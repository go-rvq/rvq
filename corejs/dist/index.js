var z=Object.defineProperty;var K=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var w=(e,t,r)=>K(e,typeof t!="symbol"?t+"":t,r);(function(e,t){typeof exports=="object"&&typeof module<"u"?t(require("vue")):typeof define=="function"&&define.amd?define(["vue"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.Vue))})(this,function(vue){"use strict";/*!
 * vue-global-events v3.0.1
 * (c) 2019-2023 Eduardo San Martin Morote, Damian Dulisz
 * Released under the MIT License.
 */let _isIE;function isIE(){return _isIE??(_isIE=/msie|trident/.test(window.navigator.userAgent.toLowerCase()))}const EVENT_NAME_RE=/^on(\w+?)((?:Once|Capture|Passive)*)$/,MODIFIERS_SEPARATOR_RE=/[OCP]/g;function extractEventOptions(e){return e?isIE()?e.includes("Capture"):e.replace(MODIFIERS_SEPARATOR_RE,",$&").toLowerCase().slice(1).split(",").reduce((r,n)=>(r[n]=!0,r),{}):void 0}const GlobalEventsImpl=vue.defineComponent({name:"GlobalEvents",props:{target:{type:String,default:"document"},filter:{type:[Function,Array],default:()=>()=>!0},stop:Boolean,prevent:Boolean},setup(e,{attrs:t}){let r=Object.create(null);const n=vue.ref(!0);return vue.onActivated(()=>{n.value=!0}),vue.onDeactivated(()=>{n.value=!1}),vue.onMounted(()=>{Object.keys(t).filter(a=>a.startsWith("on")).forEach(a=>{const c=t[a],u=Array.isArray(c)?c:[c],l=a.match(EVENT_NAME_RE);if(!l){__DEV__&&console.warn(`[vue-global-events] Unable to parse "${a}". If this should work, you should probably open a new issue on https://github.com/shentao/vue-global-events.`);return}let[,f,m]=l;f=f.toLowerCase();const g=u.map(_=>y=>{const O=Array.isArray(e.filter)?e.filter:[e.filter];n.value&&O.every(S=>S(y,_,f))&&(e.stop&&y.stopPropagation(),e.prevent&&y.preventDefault(),_(y))}),d=extractEventOptions(m);g.forEach(_=>{window[e.target].addEventListener(f,_,d)}),r[a]=[g,f,d]})}),vue.onBeforeUnmount(()=>{for(const a in r){const[c,u,l]=r[a];c.forEach(f=>{window[e.target].removeEventListener(u,f,l)})}r={}}),()=>null}}),GlobalEvents=GlobalEventsImpl;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function isObject$4(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$4,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$5=freeGlobal||freeSelf||Function("return this")(),_root=root$5,root$4=_root,now$1=function(){return root$4.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,root$3=_root,Symbol$4=root$3.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,nativeObjectToString$1=objectProto$5.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$4.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch{}var a=nativeObjectToString$1.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),a}var _getRawTag=getRawTag$1,objectProto$4=Object.prototype,nativeObjectToString=objectProto$4.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$3(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$3;function isObjectLike$4(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike$3(e)&&baseGetTag$2(e)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$3=isObject_1,isSymbol=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,isObject$2=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT="Expected a function",nativeMax$1=Math.max,nativeMin=Math.min;function debounce(e,t,r){var n,a,c,u,l,f,m=0,g=!1,d=!1,_=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject$2(r)&&(g=!!r.leading,d="maxWait"in r,c=d?nativeMax$1(toNumber(r.maxWait)||0,t):c,_="trailing"in r?!!r.trailing:_);function y(v){var C=n,A=a;return n=a=void 0,m=v,u=e.apply(A,C),u}function O(v){return m=v,l=setTimeout(j,t),g?y(v):u}function S(v){var C=v-f,A=v-m,H=t-C;return d?nativeMin(H,c-A):H}function F(v){var C=v-f,A=v-m;return f===void 0||C>=t||C<0||d&&A>=c}function j(){var v=now();if(F(v))return M(v);l=setTimeout(j,S(v))}function M(v){return l=void 0,_&&n?y(v):(n=a=void 0,u)}function P(){l!==void 0&&clearTimeout(l),m=0,n=f=a=l=void 0}function N(){return l===void 0?u:M(now())}function D(){var v=now(),C=F(v);if(n=arguments,a=this,f=v,C){if(l===void 0)return O(f);if(d)return clearTimeout(l),l=setTimeout(j,t),y(f)}return l===void 0&&(l=setTimeout(j,t)),u}return D.cancel=P,D.flush=N,D}var debounce_1=debounce;const debounce$1=getDefaultExportFromCjs(debounce_1),_sfc_main$2=vue.defineComponent({__name:"go-plaid-scope",props:{init:{},closer:{},formInit:{},setup:{},useDebounce:{},observers:{}},emits:["change-debounced"],setup(e,{emit:t}){const r=e,n=t;let a=r.init;Array.isArray(a)&&(a=Object.assign({},...a));const c=vue.reactive({...a});let u=r.formInit;Array.isArray(u)&&(u=Object.assign({},...u));const l=vue.reactive({...u}),f=vue.inject("vars"),m=vue.inject("plaid"),g=vue.inject("closer");let d;if(typeof r.closer=="object"){let y=Object.assign({parent:g,show:!1,fullscreen:!1},r.closer);d=vue.reactive({...y})}else d=g;vue.provide("closer",d),Array.isArray(r.setup)&&new Function("vars","locals","form","plaid","closer",r.setup[0])(f,c,l,m,d);function _(){!r.observers||r.observers.length==0||vue.watch(()=>f==null?void 0:f.__notification,y=>{var O;y&&((O=r.observers)==null||O.forEach(S=>{if((y==null?void 0:y.name)===S.name){let F;try{F=typeof y.payload=="string"?JSON.parse(y.payload):y.payload}catch{F=y.payload}try{new Function("name","payload","vars","locals","form","plaid","closer",S.script)(S.name,F,f,c,l,m,d)}catch(j){console.error("Error executing observer script:",j)}}}))})}return vue.onMounted(()=>{setTimeout(()=>{if(r.useDebounce){const y=r.useDebounce,O=debounce$1(S=>{n("change-debounced",S)},y);console.log("watched"),vue.watch(c,(S,F)=>{O({locals:S,form:l,oldLocals:F,oldForm:l})}),vue.watch(l,(S,F)=>{O({locals:c,form:S,oldLocals:c,oldForm:F})})}},0),_()}),(y,O)=>vue.renderSlot(y.$slots,"default",{locals:c,form:l,plaid:vue.unref(m),vars:vue.unref(f),closer:vue.unref(d),setup:y.setup})}});/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var e;function t(o){var i=0;return function(){return i<o.length?{done:!1,value:o[i++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,i,s){return o==Array.prototype||o==Object.prototype||(o[i]=s.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var i=0;i<o.length;++i){var s=o[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}var a=n(this);function c(o,i){if(i)e:{var s=a;o=o.split(".");for(var h=0;h<o.length-1;h++){var p=o[h];if(!(p in s))break e;s=s[p]}o=o[o.length-1],h=s[o],i=i(h),i!=h&&i!=null&&r(s,o,{configurable:!0,writable:!0,value:i})}}c("Symbol",function(o){function i(b){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new s(h+(b||"")+"_"+p++,b)}function s(b,T){this.A=b,r(this,"description",{configurable:!0,writable:!0,value:T})}if(o)return o;s.prototype.toString=function(){return this.A};var h="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",p=0;return i}),c("Symbol.iterator",function(o){if(o)return o;o=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<i.length;s++){var h=a[i[s]];typeof h=="function"&&typeof h.prototype[o]!="function"&&r(h.prototype,o,{configurable:!0,writable:!0,value:function(){return u(t(this))}})}return o});function u(o){return o={next:o},o[Symbol.iterator]=function(){return this},o}function l(o){var i=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return i?i.call(o):{next:t(o)}}var f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var m;e:{var g={a:!0},d={};try{d.__proto__=g,m=d.a;break e}catch{}m=!1}f=m?function(o,i){if(o.__proto__=i,o.__proto__!==i)throw new TypeError(o+" is not extensible");return o}:null}var _=f;function y(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function O(o){if(o.m)throw new TypeError("Generator is already running");o.m=!0}y.prototype.o=function(o){this.v=o},y.prototype.s=function(o){this.l={D:o,F:!0},this.h=this.C||this.u},y.prototype.return=function(o){this.l={return:o},this.h=this.u};function S(o,i){return o.h=3,{value:i}}function F(o){this.g=new y,this.G=o}F.prototype.o=function(o){return O(this.g),this.g.j?M(this,this.g.j.next,o,this.g.o):(this.g.o(o),P(this))};function j(o,i){O(o.g);var s=o.g.j;return s?M(o,"return"in s?s.return:function(h){return{value:h,done:!0}},i,o.g.return):(o.g.return(i),P(o))}F.prototype.s=function(o){return O(this.g),this.g.j?M(this,this.g.j.throw,o,this.g.o):(this.g.s(o),P(this))};function M(o,i,s,h){try{var p=i.call(o.g.j,s);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return o.g.m=!1,p;var b=p.value}catch(T){return o.g.j=null,o.g.s(T),P(o)}return o.g.j=null,h.call(o.g,b),P(o)}function P(o){for(;o.g.h;)try{var i=o.G(o.g);if(i)return o.g.m=!1,{value:i.value,done:!1}}catch(s){o.g.v=void 0,o.g.s(s)}if(o.g.m=!1,o.g.l){if(i=o.g.l,o.g.l=null,i.F)throw i.D;return{value:i.return,done:!0}}return{value:void 0,done:!0}}function N(o){this.next=function(i){return o.o(i)},this.throw=function(i){return o.s(i)},this.return=function(i){return j(o,i)},this[Symbol.iterator]=function(){return this}}function D(o,i){return i=new N(new F(i)),_&&o.prototype&&_(i,o.prototype),i}function v(o,i){o instanceof String&&(o+="");var s=0,h=!1,p={next:function(){if(!h&&s<o.length){var b=s++;return{value:i(b,o[b]),done:!1}}return h=!0,{done:!0,value:void 0}}};return p[Symbol.iterator]=function(){return p},p}if(c("Array.prototype.entries",function(o){return o||function(){return v(this,function(i,s){return[i,s]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var C=function(o,i){for(var s=0;s<o.length;s++)i(o[s])},A=function(o){return o.replace(/\r?\n|\r/g,`\r
`)},H=function(o,i,s){return i instanceof Blob?(s=s!==void 0?s+"":typeof i.name=="string"?i.name:"blob",(i.name!==s||Object.prototype.toString.call(i)==="[object Blob]")&&(i=new File([i],s)),[String(o),i]):[String(o),String(i)]},L=function(o,i){if(o.length<i)throw new TypeError(i+" argument required, but only "+o.length+" present.")},$=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,B=$.FormData,k=$.XMLHttpRequest&&$.XMLHttpRequest.prototype.send,G=$.Request&&$.fetch,q=$.navigator&&$.navigator.sendBeacon,R=$.Element&&$.Element.prototype,x=$.Symbol&&Symbol.toStringTag;x&&(Blob.prototype[x]||(Blob.prototype[x]="Blob"),"File"in $&&!File.prototype[x]&&(File.prototype[x]="File"));try{new File([],"")}catch{$.File=function(i,s,h){return i=new Blob(i,h||{}),Object.defineProperties(i,{name:{value:s},lastModified:{value:+(h&&h.lastModified!==void 0?new Date(h.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),x&&Object.defineProperty(i,x,{value:"File"}),i}}var U=function(o){return o.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},E=function(o){this.i=[];var i=this;o&&C(o.elements,function(s){if(s.name&&!s.disabled&&s.type!=="submit"&&s.type!=="button"&&!s.matches("form fieldset[disabled] *"))if(s.type==="file"){var h=s.files&&s.files.length?s.files:[new File([],"",{type:"application/octet-stream"})];C(h,function(p){i.append(s.name,p)})}else s.type==="select-multiple"||s.type==="select-one"?C(s.options,function(p){!p.disabled&&p.selected&&i.append(s.name,p.value)}):s.type==="checkbox"||s.type==="radio"?s.checked&&i.append(s.name,s.value):(h=s.type==="textarea"?A(s.value):s.value,i.append(s.name,h))})};if(e=E.prototype,e.append=function(o,i,s){L(arguments,2),this.i.push(H(o,i,s))},e.delete=function(o){L(arguments,1);var i=[];o=String(o),C(this.i,function(s){s[0]!==o&&i.push(s)}),this.i=i},e.entries=function o(){var i,s=this;return D(o,function(h){if(h.h==1&&(i=0),h.h!=3)return i<s.i.length?h=S(h,s.i[i]):(h.h=0,h=void 0),h;i++,h.h=2})},e.forEach=function(o,i){L(arguments,1);for(var s=l(this),h=s.next();!h.done;h=s.next()){var p=l(h.value);h=p.next().value,p=p.next().value,o.call(i,p,h,this)}},e.get=function(o){L(arguments,1);var i=this.i;o=String(o);for(var s=0;s<i.length;s++)if(i[s][0]===o)return i[s][1];return null},e.getAll=function(o){L(arguments,1);var i=[];return o=String(o),C(this.i,function(s){s[0]===o&&i.push(s[1])}),i},e.has=function(o){L(arguments,1),o=String(o);for(var i=0;i<this.i.length;i++)if(this.i[i][0]===o)return!0;return!1},e.keys=function o(){var i=this,s,h,p,b,T;return D(o,function(I){if(I.h==1&&(s=l(i),h=s.next()),I.h!=3){if(h.done){I.h=0;return}return p=h.value,b=l(p),T=b.next().value,S(I,T)}h=s.next(),I.h=2})},e.set=function(o,i,s){L(arguments,2),o=String(o);var h=[],p=H(o,i,s),b=!0;C(this.i,function(T){T[0]===o?b&&(b=!h.push(p)):h.push(T)}),b&&h.push(p),this.i=h},e.values=function o(){var i=this,s,h,p,b,T;return D(o,function(I){if(I.h==1&&(s=l(i),h=s.next()),I.h!=3){if(h.done){I.h=0;return}return p=h.value,b=l(p),b.next(),T=b.next().value,S(I,T)}h=s.next(),I.h=2})},E.prototype._asNative=function(){for(var o=new B,i=l(this),s=i.next();!s.done;s=i.next()){var h=l(s.value);s=h.next().value,h=h.next().value,o.append(s,h)}return o},E.prototype._blob=function(){var o="----formdata-polyfill-"+Math.random(),i=[],s="--"+o+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(h,p){return typeof h=="string"?i.push(s+U(A(p))+(`"\r
\r
`+A(h)+`\r
`)):i.push(s+U(A(p))+('"; filename="'+U(h.name)+`"\r
Content-Type: `+(h.type||"application/octet-stream")+`\r
\r
`),h,`\r
`)}),i.push("--"+o+"--"),new Blob(i,{type:"multipart/form-data; boundary="+o})},E.prototype[Symbol.iterator]=function(){return this.entries()},E.prototype.toString=function(){return"[object FormData]"},R&&!R.matches&&(R.matches=R.matchesSelector||R.mozMatchesSelector||R.msMatchesSelector||R.oMatchesSelector||R.webkitMatchesSelector||function(o){o=(this.document||this.ownerDocument).querySelectorAll(o);for(var i=o.length;0<=--i&&o.item(i)!==this;);return-1<i}),x&&(E.prototype[x]="FormData"),k){var V=$.XMLHttpRequest.prototype.setRequestHeader;$.XMLHttpRequest.prototype.setRequestHeader=function(o,i){V.call(this,o,i),o.toLowerCase()==="content-type"&&(this.B=!0)},$.XMLHttpRequest.prototype.send=function(o){o instanceof E?(o=o._blob(),this.B||this.setRequestHeader("Content-Type",o.type),k.call(this,o)):k.call(this,o)}}G&&($.fetch=function(o,i){return i&&i.body&&i.body instanceof E&&(i.body=i.body._blob()),G.call(this,o,i)}),q&&($.navigator.sendBeacon=function(o,i){return i instanceof E&&(i=i._asNative()),q.call(this,o,i)}),$.FormData=E}})();const token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],decodeComponents(r),decodeComponents(n))}function decode$1(e){try{return decodeURIComponent(e)}catch{let t=e.match(singleMatcher)||[];for(let r=1;r<t.length;r++)e=decodeComponents(t,r).join(""),t=e.match(singleMatcher)||[];return e}}function customDecodeURIComponent(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=multiMatcher.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const a=decode$1(r[0]);a!==r[0]&&(t[r[0]]=a)}r=multiMatcher.exec(e)}t["%C2"]="�";const n=Object.keys(t);for(const a of n)e=e.replace(new RegExp(a,"g"),t[a]);return e}function decodeUriComponent(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return customDecodeURIComponent(e)}}function splitOnFirst(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function includeKeys(e,t){const r={};if(Array.isArray(t))for(const n of t){const a=Object.getOwnPropertyDescriptor(e,n);a!=null&&a.enumerable&&Object.defineProperty(r,n,a)}else for(const n of Reflect.ownKeys(e)){const a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){const c=e[n];t(n,c,e)&&Object.defineProperty(r,n,a)}}return r}const isNullOrUndefined=e=>e==null,strictUriEncode=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),encodeFragmentIdentifier=Symbol("encodeFragmentIdentifier");function encoderForArrayFormat(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const a=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[encode(t,e),"[",a,"]"].join("")]:[...r,[encode(t,e),"[",encode(a,e),"]=",encode(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[encode(t,e),"[]"].join("")]:[...r,[encode(t,e),"[]=",encode(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[encode(t,e),":list="].join("")]:[...r,[encode(t,e),":list=",encode(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[encode(r,e),t,encode(a,e)].join("")]:[[n,encode(a,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,encode(t,e)]:[...r,[encode(t,e),"=",encode(n,e)].join("")]}}function parserForArrayFormat(e){let t;switch(e.arrayFormat){case"index":return(r,n,a)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){a[r]=n;return}a[r]===void 0&&(a[r]={}),a[r][t[1]]=n};case"bracket":return(r,n,a)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){a[r]=n;return}if(a[r]===void 0){a[r]=[n];return}a[r]=[...a[r],n]};case"colon-list-separator":return(r,n,a)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){a[r]=n;return}if(a[r]===void 0){a[r]=[n];return}a[r]=[...a[r],n]};case"comma":case"separator":return(r,n,a)=>{const c=typeof n=="string"&&n.includes(e.arrayFormatSeparator),u=typeof n=="string"&&!c&&decode(n,e).includes(e.arrayFormatSeparator);n=u?decode(n,e):n;const l=c||u?n.split(e.arrayFormatSeparator).map(f=>decode(f,e)):n===null?n:decode(n,e);a[r]=l};case"bracket-separator":return(r,n,a)=>{const c=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!c){a[r]=n&&decode(n,e);return}const u=n===null?[]:n.split(e.arrayFormatSeparator).map(l=>decode(l,e));if(a[r]===void 0){a[r]=u;return}a[r]=[...a[r],...u]};default:return(r,n,a)=>{if(a[r]===void 0){a[r]=n;return}a[r]=[...[a[r]].flat(),n]}}}function validateArrayFormatSeparator(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(e,t){return t.encode?t.strict?strictUriEncode(e):encodeURIComponent(e):e}function decode(e,t){return t.decode?decodeUriComponent(e):e}function keysSorter(e){return Array.isArray(e)?e.sort():typeof e=="object"?keysSorter(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function removeHash(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function getHash(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function parseValue(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function extract(e){e=removeHash(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function parse(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},validateArrayFormatSeparator(t.arrayFormatSeparator);const r=parserForArrayFormat(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const a of e.split("&")){if(a==="")continue;const c=t.decode?a.replaceAll("+"," "):a;let[u,l]=splitOnFirst(c,"=");u===void 0&&(u=c),l=l===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?l:decode(l,t),r(decode(u,t),l,n)}for(const[a,c]of Object.entries(n))if(typeof c=="object"&&c!==null)for(const[u,l]of Object.entries(c))c[u]=parseValue(l,t);else n[a]=parseValue(c,t);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((a,c)=>{const u=n[c];return a[c]=u&&typeof u=="object"&&!Array.isArray(u)?keysSorter(u):u,a},Object.create(null))}function stringify(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},validateArrayFormatSeparator(t.arrayFormatSeparator);const r=u=>t.skipNull&&isNullOrUndefined(e[u])||t.skipEmptyString&&e[u]==="",n=encoderForArrayFormat(t),a={};for(const[u,l]of Object.entries(e))r(u)||(a[u]=l);const c=Object.keys(a);return t.sort!==!1&&c.sort(t.sort),c.map(u=>{const l=e[u];return l===void 0?"":l===null?encode(u,t):Array.isArray(l)?l.length===0&&t.arrayFormat==="bracket-separator"?encode(u,t)+"[]":l.reduce(n(u),[]).join("&"):encode(u,t)+"="+encode(l,t)}).filter(u=>u.length>0).join("&")}function parseUrl(e,t){var a;t={decode:!0,...t};let[r,n]=splitOnFirst(e,"#");return r===void 0&&(r=e),{url:((a=r==null?void 0:r.split("?"))==null?void 0:a[0])??"",query:parse(extract(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:decode(n,t)}:{}}}function stringifyUrl(e,t){t={encode:!0,strict:!0,[encodeFragmentIdentifier]:!0,...t};const r=removeHash(e.url).split("?")[0]||"",n=extract(e.url),a={...parse(n,{sort:!1}),...e.query};let c=stringify(a,t);c&&(c=`?${c}`);let u=getHash(e.url);if(typeof e.fragmentIdentifier=="string"){const l=new URL(r);l.hash=e.fragmentIdentifier,u=t[encodeFragmentIdentifier]?l.hash:`#${e.fragmentIdentifier}`}return`${r}${c}${u}`}function pick(e,t,r){r={parseFragmentIdentifier:!0,[encodeFragmentIdentifier]:!1,...r};const{url:n,query:a,fragmentIdentifier:c}=parseUrl(e,r);return stringifyUrl({url:n,query:includeKeys(a,t),fragmentIdentifier:c},r)}function exclude(e,t,r){const n=Array.isArray(t)?a=>!t.includes(a):(a,c)=>!t(a,c);return pick(e,n,r)}const queryString=Object.freeze(Object.defineProperty({__proto__:null,exclude,extract,parse,parseUrl,pick,stringify,stringifyUrl},Symbol.toStringTag,{value:"Module"}));function arrayPush$1(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var _arrayPush=arrayPush$1,baseGetTag$1=_baseGetTag,isObjectLike$2=isObjectLike_1,argsTag="[object Arguments]";function baseIsArguments$1(e){return isObjectLike$2(e)&&baseGetTag$1(e)==argsTag}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$1=isObjectLike_1,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$1(e)&&hasOwnProperty$3.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments$1,isArray$1=Array.isArray,isArray_1=isArray$1,Symbol$1=_Symbol,isArguments=isArguments_1,isArray=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(e,t,r,n,a){var c=-1,u=e.length;for(r||(r=isFlattenable),a||(a=[]);++c<u;){var l=e[c];t>0&&r(l)?t>1?baseFlatten$1(l,t-1,r,n,a):arrayPush(a,l):n||(a[a.length]=l)}return a}var _baseFlatten=baseFlatten$1;function identity$2(e){return e}var identity_1=identity$2;function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply$1,apply=_apply,nativeMax=Math.max;function overRest$1(e,t,r){return t=nativeMax(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,c=nativeMax(n.length-t,0),u=Array(c);++a<c;)u[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(u),apply(e,this,l)}}var _overRest=overRest$1;function constant$1(e){return function(){return e}}var constant_1=constant$1,baseGetTag=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(e){if(!isObject$1(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$2,root$2=_root,coreJsData$1=root$2["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked$1(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$1(e){if(e!=null){try{return funcToString$1.call(e)}catch{}try{return e+""}catch{}}return""}var _toSource=toSource$1,isFunction$1=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){if(!isObject(e)||isMasked(e))return!1;var t=isFunction$1(e)?reIsNative:reIsHostCtor;return t.test(toSource(e))}var _baseIsNative=baseIsNative$1;function getValue$1(e,t){return e==null?void 0:e[t]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$4(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var _getNative=getNative$4,getNative$3=_getNative,defineProperty$1=function(){try{var e=getNative$3(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_defineProperty=defineProperty$1,constant=constant_1,defineProperty=_defineProperty,identity$1=identity_1,baseSetToString$1=defineProperty?function(e,t){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(e){var t=0,r=0;return function(){var n=nativeNow(),a=HOT_SPAN-(n-r);if(r=n,a>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$2(e,t){return setToString(overRest(e,t,identity),e+"")}var _baseRest=baseRest$2,getNative$2=_getNative,nativeCreate$4=getNative$2(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var r=t[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$1.call(t,e)?t[e]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function hashHas$1(e){var t=this.__data__;return nativeCreate$1?t[e]!==void 0:hasOwnProperty.call(t,e)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&t===void 0?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash$1.prototype.clear=hashClear,Hash$1.prototype.delete=hashDelete,Hash$1.prototype.get=hashGet,Hash$1.prototype.has=hashHas,Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$1(e,t){return e===t||e!==e&&t!==t}var eq_1=eq$1,eq=eq_1;function assocIndexOf$4(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(e){var t=this.__data__,r=assocIndexOf$3(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():splice.call(t,r,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(e){var t=this.__data__,r=assocIndexOf$2(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache$1.prototype.clear=listCacheClear,ListCache$1.prototype.delete=listCacheDelete,ListCache$1.prototype.get=listCacheGet,ListCache$1.prototype.has=listCacheHas,ListCache$1.prototype.set=listCacheSet;var _ListCache=ListCache$1,getNative$1=_getNative,root$1=_root,Map$1=getNative$1(root$1,"Map"),_Map=Map$1,Hash=_Hash,ListCache=_ListCache,Map=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(e,t){var r=e.__data__;return isKeyable(t)?r[typeof t=="string"?"string":"hash"]:r.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(e){var t=getMapData$3(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache$1.prototype.clear=mapCacheClear,MapCache$1.prototype.delete=mapCacheDelete,MapCache$1.prototype.get=mapCacheGet,MapCache$1.prototype.has=mapCacheHas,MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(e){return this.__data__.set(e,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd,SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function baseFindIndex$1(e,t,r,n){for(var a=e.length,c=r+(n?1:-1);n?c--:++c<a;)if(t(e[c],c,e))return c;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(e){return e!==e}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(e,t,r){return t===t?strictIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$2(e,t){var r=e==null?0:e.length;return!!r&&baseIndexOf(e,t,0)>-1}var _arrayIncludes=arrayIncludes$2;function arrayIncludesWith$2(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$2;function cacheHas$2(e,t){return e.has(t)}var _cacheHas=cacheHas$2,getNative=_getNative,root=_root,Set$1=getNative(root,"Set"),_Set=Set$1;function noop$1(){}var noop_1=noop$1;function setToArray$2(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var _setToArray=setToArray$2,Set=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY=1/0,createSet$1=Set&&1/setToArray$1(new Set([,-0]))[1]==INFINITY?function(e){return new Set(e)}:noop,_createSet=createSet$1,SetCache$1=_SetCache,arrayIncludes$1=_arrayIncludes,arrayIncludesWith$1=_arrayIncludesWith,cacheHas$1=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE$1=200;function baseUniq$1(e,t,r){var n=-1,a=arrayIncludes$1,c=e.length,u=!0,l=[],f=l;if(r)u=!1,a=arrayIncludesWith$1;else if(c>=LARGE_ARRAY_SIZE$1){var m=t?null:createSet(e);if(m)return setToArray(m);u=!1,a=cacheHas$1,f=new SetCache$1}else f=t?[]:l;e:for(;++n<c;){var g=e[n],d=t?t(g):g;if(g=r||g!==0?g:0,u&&d===d){for(var _=f.length;_--;)if(f[_]===d)continue e;t&&f.push(d),l.push(g)}else a(f,d,r)||(f!==l&&f.push(d),l.push(g))}return l}var _baseUniq=baseUniq$1,MAX_SAFE_INTEGER=9007199254740991;function isLength$1(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength$1,isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$1(e){return e!=null&&isLength(e.length)&&!isFunction(e)}var isArrayLike_1=isArrayLike$1,isArrayLike=isArrayLike_1,isObjectLike=isObjectLike_1;function isArrayLikeObject$2(e){return isObjectLike(e)&&isArrayLike(e)}var isArrayLikeObject_1=isArrayLikeObject$2,baseFlatten=_baseFlatten,baseRest$1=_baseRest,baseUniq=_baseUniq,isArrayLikeObject$1=isArrayLikeObject_1,union=baseRest$1(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject$1,!0))}),union_1=union;const union$1=getDefaultExportFromCjs(union_1);function arrayMap$1(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var _arrayMap=arrayMap$1;function baseUnary$1(e){return function(t){return e(t)}}var _baseUnary=baseUnary$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,arrayMap=_arrayMap,baseUnary=_baseUnary,cacheHas=_cacheHas,LARGE_ARRAY_SIZE=200;function baseDifference$1(e,t,r,n){var a=-1,c=arrayIncludes,u=!0,l=e.length,f=[],m=t.length;if(!l)return f;r&&(t=arrayMap(t,baseUnary(r))),n?(c=arrayIncludesWith,u=!1):t.length>=LARGE_ARRAY_SIZE&&(c=cacheHas,u=!1,t=new SetCache(t));e:for(;++a<l;){var g=e[a],d=r==null?g:r(g);if(g=n||g!==0?g:0,u&&d===d){for(var _=m;_--;)if(t[_]===d)continue e;f.push(g)}else c(t,d,n)||f.push(g)}return f}var _baseDifference=baseDifference$1,baseDifference=_baseDifference,baseRest=_baseRest,isArrayLikeObject=isArrayLikeObject_1,without=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]}),without_1=without;const without$1=getDefaultExportFromCjs(without_1);function buildPushState(e,t){const r=e.location,n=queryString.parseUrl((r==null?void 0:r.url)||t,{arrayFormat:"comma",parseFragmentIdentifier:!0}),a={};let c;if(r){if(r.stringQuery){const d=queryString.parse(r.stringQuery,{arrayFormat:"comma"});r.query={...d,...r.query}}if(r.mergeQuery){const d=r.clearMergeQueryKeys||[];for(const[_,y]of Object.entries(n.query))d.indexOf(_.split(".")[0])<0&&(a[_]=y);r.query||(r.query={})}c=r.query}const u=c||n.query;let l="";for(const[d,_]of Object.entries(u))Array.isArray(_)?a[d]=_:typeof _=="object"?queryUpdateByValueOp(a,d,_):a[d]=_;const f={...a,__execute_event__:e.id};l=queryString.stringify(a,{arrayFormat:"comma"}),l.length>0&&(l=`?${l}`);let m=n.url+l;return n.fragmentIdentifier&&(m=m+"#"+n.fragmentIdentifier),{pushStateArgs:[{query:a,url:m},"",m],eventURL:`${n.url}?${queryString.stringify(f,{arrayFormat:"comma"})}`}}function queryUpdateByValueOp(e,t,r){if(!r.value)return;let n=r.value;Array.isArray(r.value)||(n=[r.value]);let a=e[t];if(a&&!Array.isArray(a)&&(a=[a]),r.add){e[t]=union$1(a,n);return}if(r.remove){const c=without$1(a,...n);c.length===0?delete e[t]:e[t]=c}}function setFormValue(e,t,r){if(!t||t.length===0)return!1;if(r instanceof Event)return setFormValue(e,t,r.target);if(r instanceof HTMLInputElement){if(r.files)return setFormValue(e,t,r.files);switch(r.type){case"checkbox":return r.checked?formSet(e,t,r.value):e.has(t)?(e.delete(t),!0):!1;case"radio":return r.checked?formSet(e,t,r.value):!1;default:return formSet(e,t,r.value)}}if(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)return formSet(e,t,r.value);if(r==null)return formSet(e,t,"");let n=!1;if(e.has(t)&&(n=!0,e.delete(t)),Array.isArray(r)||r instanceof FileList){for(let a=0;a<r.length;a++)r[a]instanceof File?(n=!0,e.append(t,r[a],r[a].name)):(n=!0,e.append(t,r[a]));return n}return r instanceof File?(e.set(t,r,r.name),!0):formSet(e,t,r)}function formSet(e,t,r){return e.get(t)===r?!1:(e.set(t,r),!0)}function componentByTemplate(template,form,locals={},portal=vue.ref()){const loadScripts=(e,t)=>{template=template.replace(new RegExp('(<script component-mode="'+e+'">(.*?)<\/script>)',"gms"),(r,n,a)=>(t.push(a),""))},callFn=(e,t)=>{let r;try{r=new Function(e)}catch(n){console.error(n,e);return}r.call(t)};let setupScripts=[],dataScripts=[],methodsScripts=[],computedScripts=[],methods={};loadScripts("setup",setupScripts),loadScripts("data",dataScripts),loadScripts("methods",methodsScripts),loadScripts("computed",computedScripts);const setupScriptsBody=setupScripts.join(`
`);return eval(setupScriptsBody.length?`try {
`+setupScriptsBody+`
} catch(e) {console.error('setup-script', setupScriptsBody, e); throw(e);}`:"null"),methodsScripts.forEach(e=>callFn(e,methods)),vue.defineComponent({setup(){let e={plaid:vue.inject("plaid"),vars:vue.inject("vars"),closer:vue.inject("closer"),isFetching:vue.inject("isFetching"),updateRootTemplate:vue.inject("updateRootTemplate"),form,locals};const t=r=>{let n;try{n=new Function("plaid","vars","closer","updateRootTemplate","form","locals","computed",r)}catch(a){alert(r),console.error(a,r);return}n.apply(e,[e.plaid,e.vars,e.closer,e.updateRootTemplate,e.form,e.locals,vue.computed])};return dataScripts.forEach(r=>t(r)),computedScripts.forEach(r=>t(r)),e},methods,mounted(){this.$nextTick(()=>{this.$el&&this.$el.style&&this.$el.style.height&&(portal.value.style.height=this.$el.style.height)})},template})}function objectToFormData(e,t,r=""){if(e==null)return;const n=Array.isArray(e);if(n&&e.length>0&&(e[0]instanceof File||e[0]instanceof Blob)){setFormValue(t,r,e);return}return Object.keys(e).forEach(a=>{const c=e[a],u=r?n?`${r}[${a}]`:`${r}.${a}`:a;typeof c=="object"&&!(c instanceof File)&&!(c instanceof Date)?objectToFormData(c,t,u):setFormValue(t,u,c)}),t}const _hoisted_1=["id"],_sfc_main$1=vue.defineComponent({__name:"go-plaid-portal",props:{loader:Object,locals:Object,form:Object,visible:Boolean,afterLoaded:Function,portalName:String,autoReloadInterval:[String,Number]},setup(e){window.__goplaid=window.__goplaid??{},window.__goplaid.portals=window.__goplaid.portals??{};const t=vue.ref(),r=e,n=vue.shallowRef(null),a=vue.ref(0),c=f=>{n.value=componentByTemplate(f,r.form,r.locals,t)},u=vue.useSlots(),l=()=>{if(u.default){n.value=componentByTemplate('<slot :form="form" :locals="locals"></slot>',r.locals,t);return}const f=r.loader;f&&f.loadPortalBody(!0).form(r.form).go().then(m=>{c(m.body)})};return vue.onMounted(()=>{const f=r.portalName;f&&(window.__goplaid.portals[f]={portalName:r.portalName,updatePortalTemplate:c,reload:l}),l()}),vue.onUpdated(()=>{if(r.autoReloadInterval&&a.value==0){const f=parseInt(r.autoReloadInterval+"");if(f==0)return;a.value=setInterval(()=>{l()},f)}a.value&&a.value>0&&r.autoReloadInterval==0&&(clearInterval(a.value),a.value=0)}),vue.onBeforeUnmount(()=>{a.value&&a.value>0&&clearInterval(a.value)}),(f,m)=>e.visible?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"go-plaid-portal",id:"portal--"+e.portalName,ref_key:"portal",ref:t},[n.value?(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(n.value),{key:0},{default:vue.withCtx(()=>[vue.renderSlot(f.$slots,"default",{form:e.form,locals:e.locals})]),_:3})):vue.createCommentVNode("",!0)],8,_hoisted_1)):vue.createCommentVNode("",!0)}}),_sfc_main=vue.defineComponent({__name:"go-plaid-run-script",props:{script:{type:Function,required:!0}},setup(e){const t=e;return vue.onMounted(()=>{t.script()}),(r,n)=>null}});class Builder{constructor(){w(this,"_eventFuncID",{id:"__reload__"});w(this,"_url");w(this,"_method");w(this,"_vars");w(this,"_locals");w(this,"_closer");w(this,"_loadPortalBody",!1);w(this,"_form",{});w(this,"_popstate");w(this,"_pushState");w(this,"_location");w(this,"_updateRootTemplate");w(this,"_buildPushStateResult");w(this,"ignoreErrors",["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"]);w(this,"isIgnoreError",t=>{var r;return t instanceof Error?(r=this.ignoreErrors)==null?void 0:r.includes(t.message):!1});w(this,"runScript",t=>(t.runScript&&new Function("vars","locals","form","closer","plaid",t.runScript).apply(this,[this._vars,this._locals,this._form,this._closer,()=>plaid().vars(this._vars).locals(this._locals).form(this._form).closer(this._closer).updateRootTemplate(this._updateRootTemplate)]),t))}eventFunc(t){return this._eventFuncID.id=t,this}updateRootTemplate(t){return this._updateRootTemplate=t,this}eventFuncID(t){return this._eventFuncID=t,this}reload(){return this._eventFuncID.id="__reload__",this}url(t){return this._url=t,this}vars(t){return this._vars=t,this}closer(t){return this._closer=t,this}loadPortalBody(t){return this._loadPortalBody=t,this}locals(t){return this._locals=t,this}query(t,r){return this._location||(this._location={}),this._location.query||(this._location.query={}),this._location.query[t]=r,this}mergeQuery(t){return this._location||(this._location={}),this._location.mergeQuery=t,this}clearMergeQuery(t){return this._location||(this._location={}),this._location.mergeQuery=!0,this._location.clearMergeQueryKeys=t,this}location(t){return this._location=t,this}stringQuery(t){return this._location||(this._location={}),this._location.stringQuery=t,this}pushState(t){return this._pushState=t,this}queries(t){return this._location||(this._location={}),this._location.query=t,this}pushStateURL(t){return this._location||(this._location={}),this._location.url=t,this.pushState(!0),this}form(t){return this._form=t,this}fieldValue(t,r){if(!this._form)throw new Error("form not exist");return this._form[t]=r,this}popstate(t){return this._popstate=t,this}run(t){return new Function(t).apply(this),this}method(t){return this._method=t,this}buildFetchURL(){return this.ensurePushStateResult(),this._buildPushStateResult.eventURL}buildPushStateArgs(){return this.ensurePushStateResult(),this._buildPushStateResult.pushStateArgs}onpopstate(t){return t.state?this.popstate(!0).location(t.state).reload().go():Promise.reject("event state is undefined")}runPushState(){if(this._popstate!==!0&&this._pushState===!0){window.history.length<=2&&window.history.pushState({url:window.location.href},"",window.location.href);const t=this.buildPushStateArgs();t&&window.history.pushState(...t)}}async fetch(){this._eventFuncID.id=="__reload__"&&(this._buildPushStateResult=null);const t={method:"POST",redirect:"follow"};if(this._method&&(t.method=this._method),t.method==="POST"){const a=new FormData;objectToFormData(this._form,a),t.body=a}window.dispatchEvent(new Event("fetchStart"));const r=this.buildFetchURL();let n={};try{const a=await fetch(r,t).catch(c=>{console.log(c),Promise.reject(c),this.isIgnoreError(c)||alert("Fetch Unknown Error: "+c)});if(!a)return n;if(!a.ok)return this._vars.presetsMessage={show:!0,message:`Server Response Error: <code>${a.status}</code> (${a.statusText}). See window console for detail.`,color:"error"},Promise.reject(new Error(`Response status: ${a.status} ${a.statusText}`)),n;if(a.redirected)return document.location.replace(a.url),n;n=await a.json()}finally{window.dispatchEvent(new Event("fetchEnd"))}return n}go(){return this.runPushState(),this.fetch().then(this.runScript).then(t=>{if(t.pageTitle&&(document.title=t.pageTitle),t.redirectURL&&document.location.replace(t.redirectURL),t.reloadPortals&&t.reloadPortals.length>0)for(const r of t.reloadPortals){const n=window.__goplaid.portals[r];n&&n.reload()}if(t.updatePortals&&t.updatePortals.length>0)for(const r of t.updatePortals)if(window.__goplaid.portals[r.name]){const{updatePortalTemplate:n}=window.__goplaid.portals[r.name];n&&n(r.body)}else console.error("go-plaid-portal '"+r.name+"' does not exists.");return t.pushState?plaid().updateRootTemplate(this._updateRootTemplate).reload().pushState(!0).location(t.pushState).go():(this._loadPortalBody&&t.body||t.body&&this._updateRootTemplate(t.body),t)})}json(){return this.fetch().then(t=>t.data)}ensurePushStateResult(){if(this._buildPushStateResult)return;const t=window.location.href;this._buildPushStateResult=buildPushState({...this._eventFuncID,location:this._location},this._url||t)}}function plaid(){return new Builder}const keepScroll={mounted:(e,t,r)=>{var m,g;let n=e;r.component&&(n=(g=(m=r.component)==null?void 0:m.proxy)==null?void 0:g.$el);const a=t.arg||"scroll",u=queryString.parse(location.hash)[a];let l="";Array.isArray(u)?l=u[0]||"":l=u||"";const f=l.split("_");f.length>=2&&(n.scrollTop=parseInt(f[0]),n.scrollLeft=parseInt(f[1])),n.addEventListener("scroll",debounce$1(function(){const d=queryString.parse(location.hash);d[a]=n.scrollTop+"_"+n.scrollLeft,location.hash=queryString.stringify(d)},200))}},assignOnMounted={mounted:(e,t)=>{const[r,n]=t.value;Object.assign(r,n)}},Root=vue.defineComponent({props:{initialTemplate:{type:String,required:!0}},setup(e,{emit:t}){const r=vue.shallowRef(null),n=vue.reactive({});vue.provide("form",n);const a=f=>{r.value=componentByTemplate(f,n)};vue.provide("updateRootTemplate",a);const c=vue.reactive({__notification:{}}),u=()=>plaid().updateRootTemplate(a).vars(c);vue.provide("plaid",u),vue.provide("vars",c);const l=vue.ref(!1);return vue.provide("isFetching",l),vue.onMounted(()=>{a(e.initialTemplate),window.addEventListener("fetchStart",f=>{l.value=!0}),window.addEventListener("fetchEnd",f=>{l.value=!1}),window.addEventListener("popstate",f=>{f&&f.state!=null&&u().onpopstate(f)})}),{current:r}},template:`
      <div id="app" v-cloak>
        <component :is="current"></component>
      </div>
    `}),plaidPlugin={install(e){e.component("GoPlaidScope",_sfc_main$2),e.component("GoPlaidPortal",_sfc_main$1),e.component("GoPlaidRunScript",_sfc_main),e.directive("keep-scroll",keepScroll),e.directive("assign",assignOnMounted),e.component("GlobalEvents",GlobalEvents)}};function createWebApp(e){const t=vue.createApp(Root,{initialTemplate:e});return t.use(plaidPlugin),t}const appElement=document.getElementById("app");if(!appElement)throw new Error("#app required");const vueOptions={},app=createWebApp(appElement.innerHTML);for(const e of window.__goplaidVueComponentRegisters||[])e(app,vueOptions);app.mount("#app")});
