(function(u,oi){typeof exports=="object"&&typeof module<"u"?oi(require("vue"),require("vuetify")):typeof define=="function"&&define.amd?define(["vue","vuetify"],oi):(u=typeof globalThis<"u"?globalThis:u||self,oi(u.Vue,u.Vuetify))})(this,function(u,oi){"use strict";var kMe=Object.defineProperty;var EMe=(u,oi,Xc)=>oi in u?kMe(u,oi,{enumerable:!0,configurable:!0,writable:!0,value:Xc}):u[oi]=Xc;var We=(u,oi,Xc)=>EMe(u,typeof oi!="symbol"?oi+"":oi,Xc);function Xc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const Cb=Xc(u);function _r(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function tr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function XE(t,e){const n=_r(t);return isNaN(e)?tr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const KE=6048e5,gH=864e5,vH=6e4,yH=36e5,bH=1e3;let wH={};function Kc(){return wH}function Hs(t,e){var s,c,l,d;const n=Kc(),r=(e==null?void 0:e.weekStartsOn)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(l=n.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??0,i=_r(t),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Zc(t){return Hs(t,{weekStartsOn:1})}function ZE(t){const e=_r(t),n=e.getFullYear(),r=tr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Zc(r),o=tr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Zc(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function JE(t){const e=_r(t);return e.setHours(0,0,0,0),e}function Zh(t){const e=_r(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function xH(t,e){const n=JE(t),r=JE(e),i=+n-Zh(n),o=+r-Zh(r);return Math.round((i-o)/gH)}function CH(t){const e=ZE(t),n=tr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Zc(n)}function SH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kH(t){if(!SH(t)&&typeof t!="number")return!1;const e=_r(t);return!isNaN(Number(e))}function EH(t){const e=_r(t),n=tr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const TH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MH=(t,e,n)=>{let r;const i=TH[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Sb(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const IH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_H={date:Sb({formats:IH,defaultWidth:"full"}),time:Sb({formats:OH,defaultWidth:"full"}),dateTime:Sb({formats:AH,defaultWidth:"full"})},DH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NH=(t,e,n,r)=>DH[t];function yd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const PH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},HH={ordinalNumber:(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:yd({values:PH,defaultWidth:"wide"}),quarter:yd({values:LH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yd({values:RH,defaultWidth:"wide"}),day:yd({values:BH,defaultWidth:"wide"}),dayPeriod:yd({values:jH,defaultWidth:"wide",formattingValues:FH,defaultFormattingWidth:"wide"})};function bd(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(s)?$H(s,f=>f.test(a)):zH(s,f=>f.test(a));let l;l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(a.length);return{value:l,rest:d}}}function zH(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function $H(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function UH(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const WH=/^(\d+)(th|st|nd|rd)?/i,YH=/\d+/i,GH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XH={any:[/^b/i,/^(a|c)/i]},KH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ZH={any:[/1/i,/2/i,/3/i,/4/i]},JH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},VH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ez={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nz={ordinalNumber:UH({matchPattern:WH,parsePattern:YH,valueCallback:t=>parseInt(t,10)}),era:bd({matchPatterns:GH,defaultMatchWidth:"wide",parsePatterns:XH,defaultParseWidth:"any"}),quarter:bd({matchPatterns:KH,defaultMatchWidth:"wide",parsePatterns:ZH,defaultParseWidth:"any",valueCallback:t=>t+1}),month:bd({matchPatterns:JH,defaultMatchWidth:"wide",parsePatterns:QH,defaultParseWidth:"any"}),day:bd({matchPatterns:VH,defaultMatchWidth:"wide",parsePatterns:qH,defaultParseWidth:"any"}),dayPeriod:bd({matchPatterns:ez,defaultMatchWidth:"any",parsePatterns:tz,defaultParseWidth:"any"})},QE={code:"en-US",formatDistance:MH,formatLong:_H,formatRelative:NH,localize:HH,match:nz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rz(t){const e=_r(t);return xH(e,EH(e))+1}function VE(t){const e=_r(t),n=+Zc(e)-+CH(e);return Math.round(n/KE)+1}function kb(t,e){var d,f,b,x;const n=_r(t),r=n.getFullYear(),i=Kc(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(b=i.locale)==null?void 0:b.options)==null?void 0:x.firstWeekContainsDate)??1,a=tr(t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const s=Hs(a,e),c=tr(t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const l=Hs(c,e);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function iz(t,e){var s,c,l,d;const n=Kc(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(l=n.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??1,i=kb(t,e),o=tr(t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Hs(o,e)}function qE(t,e){const n=_r(t),r=+Hs(n,e)-+iz(n,e);return Math.round(r/KE)+1}function vn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const zs={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return vn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):vn(n+1,2)},d(t,e){return vn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return vn(t.getHours()%12||12,e.length)},H(t,e){return vn(t.getHours(),e.length)},m(t,e){return vn(t.getMinutes(),e.length)},s(t,e){return vn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return vn(i,e.length)}},Jc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return zs.y(t,e)},Y:function(t,e,n,r){const i=kb(t,r),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return vn(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):vn(o,e.length)},R:function(t,e){const n=ZE(t);return vn(n,e.length)},u:function(t,e){const n=t.getFullYear();return vn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return vn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return vn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return zs.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return vn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=qE(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):vn(i,e.length)},I:function(t,e,n){const r=VE(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):vn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):zs.d(t,e)},D:function(t,e,n){const r=rz(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return vn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return vn(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return vn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Jc.noon:r===0?i=Jc.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Jc.evening:r>=12?i=Jc.afternoon:r>=4?i=Jc.morning:i=Jc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return zs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):zs.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):zs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):zs.s(t,e)},S:function(t,e){return zs.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return nT(r);case"XXXX":case"XX":return Gl(r);case"XXXXX":case"XXX":default:return Gl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return nT(r);case"xxxx":case"xx":return Gl(r);case"xxxxx":case"xxx":default:return Gl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+tT(r,":");case"OOOO":default:return"GMT"+Gl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+tT(r,":");case"zzzz":default:return"GMT"+Gl(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return vn(r,e.length)},T:function(t,e,n){const r=t.getTime();return vn(r,e.length)}};function tT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+vn(o,2)}function nT(t,e){return t%60===0?(t>0?"-":"+")+vn(Math.abs(t)/60,2):Gl(t,e)}function Gl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=vn(Math.trunc(r/60),2),o=vn(r%60,2);return n+i+e+o}const rT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},iT=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Eb={p:iT,P:(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return rT(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",rT(r,e)).replace("{{time}}",iT(i,e))}},oz=/^D+$/,az=/^Y+$/,sz=["D","DD","YY","YYYY"];function oT(t){return oz.test(t)}function aT(t){return az.test(t)}function Tb(t,e,n){const r=lz(t,e,n);if(console.warn(r),sz.includes(t))throw new RangeError(r)}function lz(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dz=/^'([^]*?)'?$/,fz=/''/g,hz=/[a-zA-Z]/;function wd(t,e,n){var d,f,b,x;const r=Kc(),i=r.locale??QE,o=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,s=_r(t);if(!kH(s))throw new RangeError("Invalid time value");let c=e.match(uz).map(k=>{const E=k[0];if(E==="p"||E==="P"){const m=Eb[E];return m(k,i.formatLong)}return k}).join("").match(cz).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const E=k[0];if(E==="'")return{isToken:!1,value:pz(k)};if(eT[E])return{isToken:!0,value:k};if(E.match(hz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(c=i.localize.preprocessor(s,c));const l={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return c.map(k=>{if(!k.isToken)return k.value;const E=k.value;(aT(E)||oT(E))&&Tb(E,e,String(t));const m=eT[E[0]];return m(s,E,i.localize,l)}).join("")}function pz(t){const e=t.match(dz);return e?e[1].replace(fz,"'"):t}function mz(){return Object.assign({},Kc())}function gz(t){let n=_r(t).getDay();return n===0&&(n=7),n}function vz(t,e){const n=e instanceof Date?tr(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const yz=10;class sT{constructor(){We(this,"subPriority",0)}validate(e,n){return!0}}class bz extends sT{constructor(e,n,r,i,o){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,o&&(this.subPriority=o)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class wz extends sT{constructor(){super(...arguments);We(this,"priority",yz);We(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:tr(n,vz(n,Date))}}class sn{run(e,n,r,i){const o=this.parse(e,n,r,i);return o?{setter:new bz(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,n,r){return!0}}class xz extends sn{constructor(){super(...arguments);We(this,"priority",140);We(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const gr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ya={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function vr(t,e){return t&&{value:e(t.value),rest:t.rest}}function Kn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function ba(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*yH+o*vH+a*bH),rest:e.slice(n[0].length)}}function lT(t){return Kn(gr.anyDigitsSigned,t)}function nr(t,e){switch(t){case 1:return Kn(gr.singleDigit,e);case 2:return Kn(gr.twoDigits,e);case 3:return Kn(gr.threeDigits,e);case 4:return Kn(gr.fourDigits,e);default:return Kn(new RegExp("^\\d{1,"+t+"}"),e)}}function Jh(t,e){switch(t){case 1:return Kn(gr.singleDigitSigned,e);case 2:return Kn(gr.twoDigitsSigned,e);case 3:return Kn(gr.threeDigitsSigned,e);case 4:return Kn(gr.fourDigitsSigned,e);default:return Kn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Mb(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cT(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const o=r+50,a=Math.trunc(o/100)*100,s=t>=o%100;i=t+a-(s?100:0)}return n?i:1-i}function uT(t){return t%400===0||t%4===0&&t%100!==0}class Cz extends sn{constructor(){super(...arguments);We(this,"priority",130);We(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const o=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return vr(nr(4,n),o);case"yo":return vr(i.ordinalNumber(n,{unit:"year"}),o);default:return vr(nr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const o=n.getFullYear();if(i.isTwoDigitYear){const s=cT(i.year,o);return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}class Sz extends sn{constructor(){super(...arguments);We(this,"priority",130);We(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const o=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return vr(nr(4,n),o);case"Yo":return vr(i.ordinalNumber(n,{unit:"year"}),o);default:return vr(nr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,o){const a=kb(n,o);if(i.isTwoDigitYear){const c=cT(i.year,a);return n.setFullYear(c,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Hs(n,o)}const s=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(s,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Hs(n,o)}}class kz extends sn{constructor(){super(...arguments);We(this,"priority",130);We(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Jh(r==="R"?4:r.length,n)}set(n,r,i){const o=tr(n,0);return o.setFullYear(i,0,4),o.setHours(0,0,0,0),Zc(o)}}class Ez extends sn{constructor(){super(...arguments);We(this,"priority",130);We(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Jh(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Tz extends sn{constructor(){super(...arguments);We(this,"priority",120);We(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return nr(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Mz extends sn{constructor(){super(...arguments);We(this,"priority",120);We(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return nr(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Iz extends sn{constructor(){super(...arguments);We(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);We(this,"priority",110)}parse(n,r,i){const o=a=>a-1;switch(r){case"M":return vr(Kn(gr.month,n),o);case"MM":return vr(nr(2,n),o);case"Mo":return vr(i.ordinalNumber(n,{unit:"month"}),o);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Oz extends sn{constructor(){super(...arguments);We(this,"priority",110);We(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const o=a=>a-1;switch(r){case"L":return vr(Kn(gr.month,n),o);case"LL":return vr(nr(2,n),o);case"Lo":return vr(i.ordinalNumber(n,{unit:"month"}),o);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Az(t,e,n){const r=_r(t),i=qE(r,n)-e;return r.setDate(r.getDate()-i*7),r}class _z extends sn{constructor(){super(...arguments);We(this,"priority",100);We(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Kn(gr.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return nr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,o){return Hs(Az(n,i,o),o)}}function Dz(t,e){const n=_r(t),r=VE(n)-e;return n.setDate(n.getDate()-r*7),n}class Nz extends sn{constructor(){super(...arguments);We(this,"priority",100);We(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Kn(gr.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return nr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Zc(Dz(n,i))}}const Pz=[31,28,31,30,31,30,31,31,30,31,30,31],Lz=[31,29,31,30,31,30,31,31,30,31,30,31];class Rz extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"subPriority",1);We(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Kn(gr.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return nr(r.length,n)}}validate(n,r){const i=n.getFullYear(),o=uT(i),a=n.getMonth();return o?r>=1&&r<=Lz[a]:r>=1&&r<=Pz[a]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Bz extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"subpriority",1);We(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Kn(gr.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return nr(r.length,n)}}validate(n,r){const i=n.getFullYear();return uT(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function Ib(t,e,n){var f,b,x,k;const r=Kc(),i=(n==null?void 0:n.weekStartsOn)??((b=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((k=(x=r.locale)==null?void 0:x.options)==null?void 0:k.weekStartsOn)??0,o=_r(t),a=o.getDay(),c=(e%7+7)%7,l=7-i,d=e<0||e>6?e-(a+l)%7:(c+l)%7-(a+l)%7;return XE(o,d)}class jz extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=Ib(n,i,o),n.setHours(0,0,0,0),n}}class Fz extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,o){const a=s=>{const c=Math.floor((s-1)/7)*7;return(s+o.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return vr(nr(r.length,n),a);case"eo":return vr(i.ordinalNumber(n,{unit:"day"}),a);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=Ib(n,i,o),n.setHours(0,0,0,0),n}}class Hz extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,o){const a=s=>{const c=Math.floor((s-1)/7)*7;return(s+o.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return vr(nr(r.length,n),a);case"co":return vr(i.ordinalNumber(n,{unit:"day"}),a);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=Ib(n,i,o),n.setHours(0,0,0,0),n}}function zz(t,e){const n=_r(t),r=gz(n),i=e-r;return XE(n,i)}class $z extends sn{constructor(){super(...arguments);We(this,"priority",90);We(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const o=a=>a===0?7:a;switch(r){case"i":case"ii":return nr(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return vr(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return vr(i.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return vr(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return vr(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=zz(n,i),n.setHours(0,0,0,0),n}}class Uz extends sn{constructor(){super(...arguments);We(this,"priority",80);We(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(Mb(i),0,0,0),n}}class Wz extends sn{constructor(){super(...arguments);We(this,"priority",80);We(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(Mb(i),0,0,0),n}}class Yz extends sn{constructor(){super(...arguments);We(this,"priority",80);We(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(Mb(i),0,0,0),n}}class Gz extends sn{constructor(){super(...arguments);We(this,"priority",70);We(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Kn(gr.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return nr(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const o=n.getHours()>=12;return o&&i<12?n.setHours(i+12,0,0,0):!o&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Xz extends sn{constructor(){super(...arguments);We(this,"priority",70);We(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Kn(gr.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return nr(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Kz extends sn{constructor(){super(...arguments);We(this,"priority",70);We(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Kn(gr.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return nr(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Zz extends sn{constructor(){super(...arguments);We(this,"priority",70);We(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Kn(gr.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return nr(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const o=i<=24?i%24:i;return n.setHours(o,0,0,0),n}}class Jz extends sn{constructor(){super(...arguments);We(this,"priority",60);We(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Kn(gr.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return nr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Qz extends sn{constructor(){super(...arguments);We(this,"priority",50);We(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Kn(gr.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return nr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Vz extends sn{constructor(){super(...arguments);We(this,"priority",30);We(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=o=>Math.trunc(o*Math.pow(10,-r.length+3));return vr(nr(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class qz extends sn{constructor(){super(...arguments);We(this,"priority",10);We(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return ba(ya.basicOptionalMinutes,n);case"XX":return ba(ya.basic,n);case"XXXX":return ba(ya.basicOptionalSeconds,n);case"XXXXX":return ba(ya.extendedOptionalSeconds,n);case"XXX":default:return ba(ya.extended,n)}}set(n,r,i){return r.timestampIsSet?n:tr(n,n.getTime()-Zh(n)-i)}}class e8 extends sn{constructor(){super(...arguments);We(this,"priority",10);We(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return ba(ya.basicOptionalMinutes,n);case"xx":return ba(ya.basic,n);case"xxxx":return ba(ya.basicOptionalSeconds,n);case"xxxxx":return ba(ya.extendedOptionalSeconds,n);case"xxx":default:return ba(ya.extended,n)}}set(n,r,i){return r.timestampIsSet?n:tr(n,n.getTime()-Zh(n)-i)}}class t8 extends sn{constructor(){super(...arguments);We(this,"priority",40);We(this,"incompatibleTokens","*")}parse(n){return lT(n)}set(n,r,i){return[tr(n,i*1e3),{timestampIsSet:!0}]}}class n8 extends sn{constructor(){super(...arguments);We(this,"priority",20);We(this,"incompatibleTokens","*")}parse(n){return lT(n)}set(n,r,i){return[tr(n,i),{timestampIsSet:!0}]}}const r8={G:new xz,y:new Cz,Y:new Sz,R:new kz,u:new Ez,Q:new Tz,q:new Mz,M:new Iz,L:new Oz,w:new _z,I:new Nz,d:new Rz,D:new Bz,E:new jz,e:new Fz,c:new Hz,i:new $z,a:new Uz,b:new Wz,B:new Yz,h:new Gz,H:new Xz,K:new Kz,k:new Zz,m:new Jz,s:new Qz,S:new Vz,X:new qz,x:new e8,t:new t8,T:new n8},i8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,o8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a8=/^'([^]*?)'?$/,s8=/''/g,l8=/\S/,c8=/[a-zA-Z]/;function Qc(t,e,n,r){var E,m,h,g;const i=mz(),o=i.locale??QE,a=i.firstWeekContainsDate??((m=(E=i.locale)==null?void 0:E.options)==null?void 0:m.firstWeekContainsDate)??1,s=i.weekStartsOn??((g=(h=i.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0;if(e==="")return t===""?_r(n):tr(n,NaN);const c={firstWeekContainsDate:a,weekStartsOn:s,locale:o},l=[new wz],d=e.match(o8).map(w=>{const p=w[0];if(p in Eb){const v=Eb[p];return v(w,o.formatLong)}return w}).join("").match(i8),f=[];for(let w of d){aT(w)&&Tb(w,e,t),oT(w)&&Tb(w,e,t);const p=w[0],v=r8[p];if(v){const{incompatibleTokens:y}=v;if(Array.isArray(y)){const T=f.find(C=>y.includes(C.token)||C.token===p);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${w}\` at the same time`)}else if(v.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);f.push({token:p,fullToken:w});const S=v.run(t,w,o.match,c);if(!S)return tr(n,NaN);l.push(S.setter),t=S.rest}else{if(p.match(c8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");if(w==="''"?w="'":p==="'"&&(w=u8(w)),t.indexOf(w)===0)t=t.slice(w.length);else return tr(n,NaN)}}if(t.length>0&&l8.test(t))return tr(n,NaN);const b=l.map(w=>w.priority).sort((w,p)=>p-w).filter((w,p,v)=>v.indexOf(w)===p).map(w=>l.filter(p=>p.priority===w).sort((p,v)=>v.subPriority-p.subPriority)).map(w=>w[0]);let x=_r(n);if(isNaN(x.getTime()))return tr(n,NaN);const k={};for(const w of b){if(!w.validate(x,c))return tr(n,NaN);const p=w.set(x,k,c);Array.isArray(p)?(x=p[0],Object.assign(k,p[1])):x=p}return tr(n,x)}function u8(t){return t.match(a8)[1].replace(s8,"'")}const yr=typeof window<"u",Ob=yr&&"IntersectionObserver"in window;function dT(t,e,n){d8(t,e),e.set(t,n)}function d8(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fT(t,e,n){return t.set(hT(t,e),n),n}function es(t,e){return t.get(hT(t,e))}function hT(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function pT(t,e,n){const r=e.length-1;if(r<0)return t===void 0?n:t;for(let i=0;i<r;i++){if(t==null)return n;t=t[e[i]]}return t==null||t[e[r]]===void 0?n:t[e[r]]}function Ri(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>Ri(t[r],e[r]))}function xd(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),pT(t,e.split("."),n))}function Lr(t,e,n){if(e===!0)return t===void 0?n:t;if(e==null||typeof e=="boolean")return n;if(t!==Object(t)){if(typeof e!="function")return n;const i=e(t,n);return typeof i>"u"?n:i}if(typeof e=="string")return xd(t,e,n);if(Array.isArray(e))return pT(t,e,n);if(typeof e!="function")return n;const r=e(t,n);return typeof r>"u"?n:r}function Vc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,r)=>e+r)}function gt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(t==null||t==="")return;const n=Number(t);return isNaN(n)?String(t):isFinite(n)?`${n}${e}`:void 0}function Qh(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function mT(t){let e;return t!==null&&typeof t=="object"&&((e=Object.getPrototypeOf(t))===Object.prototype||e===null)}function Ab(t){if(t&&"$el"in t){const e=t.$el;return(e==null?void 0:e.nodeType)===Node.TEXT_NODE?e.nextElementSibling:e}return t}const gT=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function vT(t){return Object.keys(t)}function _b(t,e){return e.every(n=>t.hasOwnProperty(n))}function Vh(t,e){const n={};for(const r of e)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function yT(t,e,n){const r=Object.create(null),i=Object.create(null);for(const o in t)e.some(a=>a instanceof RegExp?a.test(o):a===o)?r[o]=t[o]:i[o]=t[o];return[r,i]}function Sr(t,e){const n={...t};return e.forEach(r=>delete n[r]),n}const bT=/^on[^a-z]/,Db=t=>bT.test(t),f8=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function Cd(t){const[e,n]=yT(t,[bT]),r=Sr(e,f8),[i,o]=yT(n,["class","style","id",/^data-/]);return Object.assign(i,e),Object.assign(o,r),[i,o]}function Zn(t){return t==null?[]:Array.isArray(t)?t:[t]}function h8(t,e){let n=0;const r=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout(()=>t(...o),u.unref(e))};return r.clear=()=>{clearTimeout(n)},r.immediate=t,r}function Rr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function wT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+n.repeat(Math.max(0,e-t.length))}function p8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<t.length;)n.push(t.substr(r,e)),r+=e;return n}function xT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(t<e)return`${t} B`;const n=e===1024?["Ki","Mi","Gi"]:["k","M","G"];let r=-1;for(;Math.abs(t)>=e&&r<n.length-1;)t/=e,++r;return`${t.toFixed(1)} ${n[r]}B`}function ts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const i in t)r[i]=t[i];for(const i in e){const o=t[i],a=e[i];if(mT(o)&&mT(a)){r[i]=ts(o,a,n);continue}if(n&&Array.isArray(o)&&Array.isArray(a)){r[i]=n(o,a);continue}r[i]=a}return r}function CT(t){return t.map(e=>e.type===u.Fragment?CT(e.children):e).flat()}function Xl(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Xl.cache.has(t))return Xl.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Xl.cache.set(t,e),e}Xl.cache=new Map;function Sd(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>Sd(t,n)).flat(1);if(e.suspense)return Sd(t,e.ssContent);if(Array.isArray(e.children))return e.children.map(n=>Sd(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return Sd(t,e.component.subTree).flat(1)}return[]}var qc=new WeakMap,Kl=new WeakMap;class ST{constructor(e){dT(this,qc,[]),dT(this,Kl,0),this.size=e}get isFull(){return es(qc,this).length===this.size}push(e){es(qc,this)[es(Kl,this)]=e,fT(Kl,this,(es(Kl,this)+1)%this.size)}values(){return es(qc,this).slice(es(Kl,this)).concat(es(qc,this).slice(0,es(Kl,this)))}clear(){es(qc,this).length=0,fT(Kl,this,0)}}function Nb(t){const e=u.reactive({});u.watchEffect(()=>{const r=t();for(const i in r)e[i]=r[i]},{flush:"sync"});const n={};for(const r in e)n[r]=u.toRef(()=>e[r]);return n}function qh(t,e){return t.includes(e)}function kT(t){return t[2].toLowerCase()+t.slice(3)}const Br=()=>[Function,Array];function ET(t,e){return e="on"+u.capitalize(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function ep(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(Array.isArray(t))for(const i of t)i(...n);else typeof t=="function"&&t(...n)}function kd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(n)]}function TT(t,e,n){let r,i=t.indexOf(document.activeElement);const o=e==="next"?1:-1;do i+=o,r=t[i];while((!r||r.offsetParent==null||!((n==null?void 0:n(r))??!0))&&i<t.length&&i>=0);return r}function Ed(t,e){var r,i,o,a;const n=kd(t);if(e==null)(t===document.activeElement||!t.contains(document.activeElement))&&((r=n[0])==null||r.focus());else if(e==="first")(i=n[0])==null||i.focus();else if(e==="last")(o=n.at(-1))==null||o.focus();else if(typeof e=="number")(a=n[e])==null||a.focus();else{const s=TT(n,e);s?s.focus():Ed(t,e==="next"?"first":"last")}}function tp(t){return t==null||typeof t=="string"&&t.trim()===""}function m8(){}function eu(t,e){if(!(yr&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}function Pb(t){return t.some(e=>u.isVNode(e)?e.type===u.Comment?!1:e.type!==u.Fragment||Pb(e.children):!0)?t:null}function g8(t,e){if(!yr||t===0)return e(),()=>{};const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}function v8(t,e){const n=t.clientX,r=t.clientY,i=e.getBoundingClientRect(),o=i.left,a=i.top,s=i.right,c=i.bottom;return n>=o&&n<=s&&r>=a&&r<=c}function np(){const t=u.shallowRef(),e=n=>{t.value=n};return Object.defineProperty(e,"value",{enumerable:!0,get:()=>t.value,set:n=>t.value=n}),Object.defineProperty(e,"el",{enumerable:!0,get:()=>Ab(t.value)}),e}function rp(t){const e=t.key.length===1,n=!t.ctrlKey&&!t.metaKey&&!t.altKey;return e&&n}function Lb(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint"}function Rb(t){return"\\^$*+?.()|{}[]".includes(t)?`\\${t}`:t}function y8(t,e,n){const r=new RegExp(`[\\d\\-${Rb(n)}]`),i=t.split("").filter(a=>r.test(a)).filter((a,s,c)=>s===0&&/[-]/.test(a)||a===n&&s===c.indexOf(a)||/\d/.test(a)).join("");if(e===0)return i.split(n)[0];const o=new RegExp(`${Rb(n)}\\d`);if(e!==null&&o.test(i)){const a=i.split(n);return[a[0],a[1].substring(0,e)].join(n)}return i}function b8(t){const e={};for(const n in t)e[u.camelize(n)]=t[n];return e}function w8(t){const e=["checked","disabled"];return Object.fromEntries(Object.entries(t).filter(n=>{let[r,i]=n;return e.includes(r)?!!i:i!==void 0}))}const MT=["top","bottom"],x8=["start","end","left","right"];function Bb(t,e){let[n,r]=t.split(" ");return r||(r=qh(MT,n)?"start":qh(x8,n)?"top":"center"),{side:jb(n,e),align:jb(r,e)}}function jb(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function Fb(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function Hb(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function IT(t){return{side:t.align,align:t.side}}function OT(t){return qh(MT,t.side)?"y":"x"}class wa{constructor(e){let{x:n,y:r,width:i,height:o}=e;this.x=n,this.y=r,this.width=i,this.height=o}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function AT(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function _T(t){return Array.isArray(t)?new wa({x:t[0],y:t[1],width:0,height:0}):t.getBoundingClientRect()}function C8(t){if(t===document.documentElement)return visualViewport?new wa({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new wa({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const e=t.getBoundingClientRect();return new wa({x:e.x,y:e.y,width:t.clientWidth,height:t.clientHeight})}}function zb(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){let i,o,a,s,c;if(r.startsWith("matrix3d("))i=r.slice(9,-1).split(/, /),o=Number(i[0]),a=Number(i[5]),s=Number(i[12]),c=Number(i[13]);else if(r.startsWith("matrix("))i=r.slice(7,-1).split(/, /),o=Number(i[0]),a=Number(i[3]),s=Number(i[4]),c=Number(i[5]);else return new wa(e);const l=n.transformOrigin,d=e.x-s-(1-o)*parseFloat(l),f=e.y-c-(1-a)*parseFloat(l.slice(l.indexOf(" ")+1)),b=o?e.width/o:t.offsetWidth+1,x=a?e.height/a:t.offsetHeight+1;return new wa({x:d,y:f,width:b,height:x})}else return new wa(e)}function Zl(t,e,n){if(typeof t.animate>"u")return{finished:Promise.resolve()};let r;try{r=t.animate(e,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(i=>{r.onfinish=()=>{i(r)}})),r}const ip=new WeakMap;function S8(t,e){Object.keys(e).forEach(n=>{if(Db(n)){const r=kT(n),i=ip.get(t);if(e[n]==null)i==null||i.forEach(o=>{const[a,s]=o;a===r&&(t.removeEventListener(r,s),i.delete(o))});else if(!i||![...i].some(o=>o[0]===r&&o[1]===e[n])){t.addEventListener(r,e[n]);const o=i||new Set;o.add([r,e[n]]),ip.has(t)||ip.set(t,o)}}else e[n]==null?t.removeAttribute(n):t.setAttribute(n,e[n])})}function k8(t,e){Object.keys(e).forEach(n=>{if(Db(n)){const r=kT(n),i=ip.get(t);i==null||i.forEach(o=>{const[a,s]=o;a===r&&(t.removeEventListener(r,s),i.delete(o))})}else t.removeAttribute(n)})}const tu=2.4,DT=.2126729,NT=.7151522,PT=.072175,E8=.55,T8=.58,M8=.57,I8=.62,op=.03,LT=1.45,O8=5e-4,A8=1.25,_8=1.25,D8=.078,RT=12.82051282051282,ap=.06,N8=.001;function BT(t,e){const n=(t.r/255)**tu,r=(t.g/255)**tu,i=(t.b/255)**tu,o=(e.r/255)**tu,a=(e.g/255)**tu,s=(e.b/255)**tu;let c=n*DT+r*NT+i*PT,l=o*DT+a*NT+s*PT;if(c<=op&&(c+=(op-c)**LT),l<=op&&(l+=(op-l)**LT),Math.abs(l-c)<O8)return 0;let d;if(l>c){const f=(l**E8-c**T8)*A8;d=f<N8?0:f<D8?f-f*RT*ap:f-ap}else{const f=(l**I8-c**M8)*_8;d=f>-.001?0:f>-.078?f-f*RT*ap:f+ap}return d*100}function $s(t){u.warn(`Vuetify: ${t}`)}function $b(t){u.warn(`Vuetify error: ${t}`)}function P8(t,e){e=Array.isArray(e)?e.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`,u.warn(`[Vuetify UPGRADE] '${t}' is deprecated, use ${e} instead.`)}function Ub(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function L8(t){return Ub(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const jT=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,R8={rgb:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),rgba:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),hsl:(t,e,n,r)=>FT({h:t,s:e,l:n,a:r}),hsla:(t,e,n,r)=>FT({h:t,s:e,l:n,a:r}),hsv:(t,e,n,r)=>Md({h:t,s:e,v:n,a:r}),hsva:(t,e,n,r)=>Md({h:t,s:e,v:n,a:r})};function Td(t){if(typeof t=="number")return(isNaN(t)||t<0||t>16777215)&&$s(`'${t}' is not a valid hex color`),{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&jT.test(t)){const{groups:e}=t.match(jT),{fn:n,values:r}=e,i=r.split(/,\s*|\s*\/\s*|\s+/).map((o,a)=>o.endsWith("%")||a>0&&a<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(o)/100:parseFloat(o));return R8[n](...i)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;[3,4].includes(e.length)?e=e.split("").map(r=>r+r).join(""):[6,8].includes(e.length)||$s(`'${t}' is not a valid hex(a) color`);const n=parseInt(e,16);return(isNaN(n)||n<0||n>4294967295)&&$s(`'${t}' is not a valid hex(a) color`),B8(e)}else if(typeof t=="object"){if(_b(t,["r","g","b"]))return t;if(_b(t,["h","s","l"]))return Md(HT(t));if(_b(t,["h","s","v"]))return Md(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Md(t){const{h:e,s:n,v:r,a:i}=t,o=s=>{const c=(s+e/60)%6;return r-r*n*Math.max(Math.min(c,4-c,1),0)},a=[o(5),o(3),o(1)].map(s=>Math.round(s*255));return{r:a[0],g:a[1],b:a[2],a:i}}function FT(t){return Md(HT(t))}function HT(t){const{h:e,s:n,l:r,a:i}=t,o=r+n*Math.min(r,1-r),a=o===0?0:2-2*r/o;return{h:e,s:a,v:o,a:i}}function B8(t){t=j8(t);let[e,n,r,i]=p8(t,2).map(o=>parseInt(o,16));return i=i===void 0?i:i/255,{r:e,g:n,b:r,a:i}}function j8(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=wT(wT(t,6),8,"F")),t}function F8(t){const e=Math.abs(BT(Td(0),Td(t)));return Math.abs(BT(Td(16777215),Td(t)))>Math.min(e,50)?"#fff":"#000"}function Re(t,e){return n=>Object.keys(t).reduce((r,i)=>{const a=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return n&&i in n?r[i]={...a,default:n[i]}:r[i]=a,e&&!r[i].source&&(r[i].source=e),r},{})}const Ot=Re({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function rr(t,e){const n=u.getCurrentInstance();if(!n)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return n}function xa(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=rr(t).type;return Xl((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}function H8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rr("injectSelf");const{provides:n}=e;if(n&&t in n)return n[t]}const sp=Symbol.for("vuetify:defaults");function Wb(){const t=u.inject(sp);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function Zi(t,e){const n=Wb(),r=u.ref(t),i=u.computed(()=>{if(u.unref(e==null?void 0:e.disabled))return n.value;const a=u.unref(e==null?void 0:e.scoped),s=u.unref(e==null?void 0:e.reset),c=u.unref(e==null?void 0:e.root);if(r.value==null&&!(a||s||c))return n.value;let l=ts(r.value,{prev:n.value});if(a)return l;if(s||c){const d=Number(s||1/0);for(let f=0;f<=d&&!(!l||!("prev"in l));f++)l=l.prev;return l&&typeof c=="string"&&c in l&&(l=ts(ts(l,{prev:l}),l[c])),l}return l.prev?ts(l.prev,l):l});return u.provide(sp,i),i}function z8(t,e){return t.props&&(typeof t.props[e]<"u"||typeof t.props[Xl(e)]<"u")}function $8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wb();const r=rr("useDefaults");if(e=e??r.type.name??r.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const i=u.computed(()=>{var c;return(c=n.value)==null?void 0:c[t._as??e]}),o=new Proxy(t,{get(c,l){var x,k,E,m;const d=Reflect.get(c,l);if(l==="class"||l==="style")return[(x=i.value)==null?void 0:x[l],d].filter(h=>h!=null);if(z8(r.vnode,l))return d;const f=(k=i.value)==null?void 0:k[l];if(f!==void 0)return f;const b=(m=(E=n.value)==null?void 0:E.global)==null?void 0:m[l];return b!==void 0?b:d}}),a=u.shallowRef();u.watchEffect(()=>{if(i.value){const c=Object.entries(i.value).filter(l=>{let[d]=l;return d.startsWith(d[0].toUpperCase())});a.value=c.length?Object.fromEntries(c):void 0}else a.value=void 0});function s(){const c=H8(sp,r);u.provide(sp,u.computed(()=>a.value?ts((c==null?void 0:c.value)??{},a.value):c==null?void 0:c.value))}return{props:o,provideSubDefaults:s}}function Id(t){if(t._setup=t._setup??t.setup,!t.name)return $s("The component is missing an explicit name, unable to generate default prop value"),t;if(t._setup){t.props=Re(t.props??{},t.name)();const e=Object.keys(t.props).filter(n=>n!=="class"&&n!=="style");t.filterProps=function(r){return Vh(r,e)},t.props._as=String,t.setup=function(r,i){const o=Wb();if(!o.value)return t._setup(r,i);const{props:a,provideSubDefaults:s}=$8(r,r._as??t.name,o),c=t._setup(a,i);return s(),c}}return t}function et(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?Id:u.defineComponent)(e)}function U8(t,e){return e.props=t,e}function Od(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return et()({name:n??u.capitalize(u.camelize(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Ot()},setup(r,i){let{slots:o}=i;return()=>{var a;return u.h(r.tag,{class:[t,r.class],style:r.style},(a=o.default)==null?void 0:a.call(o))}}})}function zT(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const Ad="cubic-bezier(0.4, 0, 0.2, 1)",W8="cubic-bezier(0.0, 0, 0.2, 1)",Y8="cubic-bezier(0.4, 0, 1, 1)";function $T(t,e,n){return Object.keys(t).filter(r=>Db(r)&&r.endsWith(e)).reduce((r,i)=>(r[i.slice(0,-e.length)]=o=>t[i](o,n(o)),r),{})}function UT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?G8(t):Yb(t))return t;t=t.parentElement}return document.scrollingElement}function lp(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&(Yb(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function Yb(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function G8(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function X8(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function st(t){const e=rr("useRender");e.render=t}const Ho=Re({border:[Boolean,Number,String]},"border");function Ca(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return{borderClasses:u.computed(()=>{const r=t.border;return r===!0||r===""?`${e}--border`:typeof r=="string"||r===0?String(r).split(" ").map(i=>`border-${i}`):[]})}}const K8=[null,"default","comfortable","compact"],ai=Re({density:{type:String,default:"default",validator:t=>K8.includes(t)}},"density");function bo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return{densityClasses:u.toRef(()=>`${e}--density-${t.density}`)}}const zo=Re({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function Sa(t){return{elevationClasses:u.toRef(()=>{const n=u.isRef(t)?t.value:t.elevation;return n==null?[]:[`elevation-${n}`]})}}const si=Re({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Si(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return{roundedClasses:u.computed(()=>{const r=u.isRef(t)?t.value:t.rounded,i=u.isRef(t)?t.value:t.tile,o=[];if(r===!0||r==="")o.push(`${e}--rounded`);else if(typeof r=="string"||r===0)for(const a of String(r).split(" "))o.push(`rounded-${a}`);else(i||r===!1)&&o.push("rounded-0");return o})}}const ln=Re({tag:{type:[String,Object,Function],default:"div"}},"tag"),Gb=Symbol.for("vuetify:theme"),wn=Re({theme:String},"theme");function Jn(t){rr("provideTheme");const e=u.inject(Gb,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=u.toRef(()=>t.theme??e.name.value),r=u.toRef(()=>e.themes.value[n.value]),i=u.toRef(()=>e.isDisabled?void 0:`${e.prefix}theme--${n.value}`),o={...e,name:n,current:r,themeClasses:i};return u.provide(Gb,o),o}function Z8(){rr("useTheme");const t=u.inject(Gb,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function Xb(t){return Nb(()=>{const e=u.toValue(t),n=[],r={};if(e.background)if(Ub(e.background)){if(r.backgroundColor=e.background,!e.text&&L8(e.background)){const i=Td(e.background);if(i.a==null||i.a===1){const o=F8(i);r.color=o,r.caretColor=o}}}else n.push(`bg-${e.background}`);return e.text&&(Ub(e.text)?(r.color=e.text,r.caretColor=e.text):n.push(`text-${e.text}`)),{colorClasses:n,colorStyles:r}})}function Ji(t){const{colorClasses:e,colorStyles:n}=Xb(()=>({text:u.toValue(t)}));return{textColorClasses:e,textColorStyles:n}}function li(t){const{colorClasses:e,colorStyles:n}=Xb(()=>({background:u.toValue(t)}));return{backgroundColorClasses:e,backgroundColorStyles:n}}const J8=["elevated","flat","tonal","outlined","text","plain"];function Jl(t,e){return u.createElementVNode(u.Fragment,null,[t&&u.createElementVNode("span",{key:"overlay",class:u.normalizeClass(`${e}__overlay`)},null),u.createElementVNode("span",{key:"underlay",class:u.normalizeClass(`${e}__underlay`)},null)])}const $o=Re({color:String,variant:{type:String,default:"elevated",validator:t=>J8.includes(t)}},"variant");function Ql(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();const n=u.toRef(()=>{const{variant:o}=u.toValue(t);return`${e}--variant-${o}`}),{colorClasses:r,colorStyles:i}=Xb(()=>{const{variant:o,color:a}=u.toValue(t);return{[["elevated","flat"].includes(o)?"background":"text"]:a}});return{colorClasses:r,colorStyles:i,variantClasses:n}}const WT=Re({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...Ho(),...Ot(),...ai(),...zo(),...si(),...ln(),...wn(),...$o()},"VBtnGroup"),YT=et()({name:"VBtnGroup",props:WT(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t),{densityClasses:i}=bo(t),{borderClasses:o}=Ca(t),{elevationClasses:a}=Sa(t),{roundedClasses:s}=Si(t);Zi({VBtn:{height:u.toRef(()=>t.direction==="horizontal"?"auto":null),baseColor:u.toRef(()=>t.baseColor),color:u.toRef(()=>t.color),density:u.toRef(()=>t.density),flat:!0,variant:u.toRef(()=>t.variant)}}),st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-btn-group",`v-btn-group--${t.direction}`,{"v-btn-group--divided":t.divided},r.value,o.value,i.value,a.value,s.value,t.class]),style:u.normalizeStyle(t.style)},n))}});function wo(t,e){let n;function r(){n=u.effectScope(),n.run(()=>e.length?e(()=>{n==null||n.stop(),r()}):e())}u.watch(t,i=>{i&&!n?r():i||(n==null||n.stop(),n=void 0)},{immediate:!0}),u.onScopeDispose(()=>{n==null||n.stop()})}function Lt(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const o=rr("useProxiedModel"),a=u.ref(t[e]!==void 0?t[e]:n),s=Xl(e),l=s!==e?u.computed(()=>{var f,b,x,k;return t[e],!!(((f=o.vnode.props)!=null&&f.hasOwnProperty(e)||(b=o.vnode.props)!=null&&b.hasOwnProperty(s))&&((x=o.vnode.props)!=null&&x.hasOwnProperty(`onUpdate:${e}`)||(k=o.vnode.props)!=null&&k.hasOwnProperty(`onUpdate:${s}`)))}):u.computed(()=>{var f,b;return t[e],!!((f=o.vnode.props)!=null&&f.hasOwnProperty(e)&&((b=o.vnode.props)!=null&&b.hasOwnProperty(`onUpdate:${e}`)))});wo(()=>!l.value,()=>{u.watch(()=>t[e],f=>{a.value=f})});const d=u.computed({get(){const f=t[e];return r(l.value?f:a.value)},set(f){const b=i(f),x=u.toRaw(l.value?t[e]:a.value);x===b||r(x)===f||(a.value=b,o==null||o.emit(`update:${e}`,b))}});return Object.defineProperty(d,"externalValue",{get:()=>l.value?t[e]:a.value}),d}const Kb=Re({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Zb=Re({value:null,disabled:Boolean,selectedClass:String},"group-item");function Jb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=rr("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=u.useId();u.provide(Symbol.for(`${e.description}:id`),i);const o=u.inject(e,null);if(!o){if(!n)return o;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const a=u.toRef(()=>t.value),s=u.computed(()=>!!(o.disabled.value||t.disabled));o.register({id:i,value:a,disabled:s},r),u.onBeforeUnmount(()=>{o.unregister(i)});const c=u.computed(()=>o.isSelected(i)),l=u.computed(()=>o.items.value[0].id===i),d=u.computed(()=>o.items.value[o.items.value.length-1].id===i),f=u.computed(()=>c.value&&[o.selectedClass.value,t.selectedClass]);return u.watch(c,b=>{r.emit("group:selected",{value:b})},{flush:"sync"}),{id:i,isSelected:c,isFirst:l,isLast:d,toggle:()=>o.select(i,!c.value),select:b=>o.select(i,b),selectedClass:f,value:a,disabled:s,group:o}}function cp(t,e){let n=!1;const r=u.reactive([]),i=Lt(t,"modelValue",[],b=>b==null?[]:GT(r,Zn(b)),b=>{const x=V8(r,b);return t.multiple?x:x[0]}),o=rr("useGroup");function a(b,x){const k=b,E=Symbol.for(`${e.description}:id`),h=Sd(E,o==null?void 0:o.vnode).indexOf(x);u.unref(k.value)==null&&(k.value=h,k.useIndexAsValue=!0),h>-1?r.splice(h,0,k):r.push(k)}function s(b){if(n)return;c();const x=r.findIndex(k=>k.id===b);r.splice(x,1)}function c(){const b=r.find(x=>!x.disabled);b&&t.mandatory==="force"&&!i.value.length&&(i.value=[b.id])}u.onMounted(()=>{c()}),u.onBeforeUnmount(()=>{n=!0}),u.onUpdated(()=>{for(let b=0;b<r.length;b++)r[b].useIndexAsValue&&(r[b].value=b)});function l(b,x){const k=r.find(E=>E.id===b);if(!(x&&(k!=null&&k.disabled)))if(t.multiple){const E=i.value.slice(),m=E.findIndex(g=>g===b),h=~m;if(x=x??!h,h&&t.mandatory&&E.length<=1||!h&&t.max!=null&&E.length+1>t.max)return;m<0&&x?E.push(b):m>=0&&!x&&E.splice(m,1),i.value=E}else{const E=i.value.includes(b);if(t.mandatory&&E||!E&&!x)return;i.value=x??!E?[b]:[]}}function d(b){if(t.multiple&&$s('This method is not supported when using "multiple" prop'),i.value.length){const x=i.value[0],k=r.findIndex(h=>h.id===x);let E=(k+b)%r.length,m=r[E];for(;m.disabled&&E!==k;)E=(E+b)%r.length,m=r[E];if(m.disabled)return;i.value=[r[E].id]}else{const x=r.find(k=>!k.disabled);x&&(i.value=[x.id])}}const f={register:a,unregister:s,selected:i,select:l,disabled:u.toRef(()=>t.disabled),prev:()=>d(r.length-1),next:()=>d(1),isSelected:b=>i.value.includes(b),selectedClass:u.toRef(()=>t.selectedClass),items:u.toRef(()=>r),getItemIndex:b=>Q8(r,b)};return u.provide(e,f),f}function Q8(t,e){const n=GT(t,[e]);return n.length?t.findIndex(r=>r.id===n[0]):-1}function GT(t,e){const n=[];return e.forEach(r=>{const i=t.find(a=>Ri(r,a.value)),o=t[r];(i==null?void 0:i.value)!=null?n.push(i.id):o!=null&&o.useIndexAsValue&&n.push(o.id)}),n}function V8(t,e){const n=[];return e.forEach(r=>{const i=t.findIndex(o=>o.id===r);if(~i){const o=t[i];n.push(o.value!=null?o.value:i)}}),n}const XT=Symbol.for("vuetify:v-btn-toggle"),q8=Re({...WT(),...Kb()},"VBtnToggle");et()({name:"VBtnToggle",props:q8(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:r,next:i,prev:o,select:a,selected:s}=cp(t,XT);return st(()=>{const c=YT.filterProps(t);return u.createVNode(YT,u.mergeProps({class:["v-btn-toggle",t.class]},c,{style:t.style}),{default:()=>{var l;return[(l=n.default)==null?void 0:l.call(n,{isSelected:r,next:i,prev:o,select:a,selected:s})]}})}),{next:i,prev:o,select:a}}});const e6=Re({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),en=et(!1)({name:"VDefaultsProvider",props:e6(),setup(t,e){let{slots:n}=e;const{defaults:r,disabled:i,reset:o,root:a,scoped:s}=u.toRefs(t);return Zi(r,{reset:o,root:a,scoped:s,disabled:i}),()=>{var c;return(c=n.default)==null?void 0:c.call(n)}}}),jt=[String,Function,Object,Array],t6=Symbol.for("vuetify:icons"),up=Re({icon:{type:jt},tag:{type:[String,Object,Function],required:!0}},"icon"),KT=et()({name:"VComponentIcon",props:up(),setup(t,e){let{slots:n}=e;return()=>{const r=t.icon;return u.createVNode(t.tag,null,{default:()=>{var i;return[t.icon?u.createVNode(r,null,null):(i=n.default)==null?void 0:i.call(n)]}})}}}),n6=Id({name:"VSvgIcon",inheritAttrs:!1,props:up(),setup(t,e){let{attrs:n}=e;return()=>u.createVNode(t.tag,u.mergeProps(n,{style:null}),{default:()=>[u.createElementVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(r=>Array.isArray(r)?u.createElementVNode("path",{d:r[0],"fill-opacity":r[1]},null):u.createElementVNode("path",{d:r},null)):u.createElementVNode("path",{d:t.icon},null)])]})}});Id({name:"VLigatureIcon",props:up(),setup(t){return()=>u.createVNode(t.tag,null,{default:()=>[t.icon]})}}),Id({name:"VClassIcon",props:up(),setup(t){return()=>u.createVNode(t.tag,{class:u.normalizeClass(t.icon)},null)}});const r6=t=>{const e=u.inject(t6);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:u.computed(()=>{var c;const r=u.toValue(t);if(!r)return{component:KT};let i=r;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=(c=e.aliases)==null?void 0:c[i.slice(1)])),i||$s(`Could not find aliased icon "${r}"`),Array.isArray(i))return{component:n6,icon:i};if(typeof i!="string")return{component:KT,icon:i};const o=Object.keys(e.sets).find(l=>typeof i=="string"&&i.startsWith(`${l}:`)),a=o?i.slice(o.length+1):i;return{component:e.sets[o??e.defaultSet].component,icon:a}})}},i6=["x-small","small","default","large","x-large"],nu=Re({size:{type:[String,Number],default:"default"}},"size");function _d(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return Nb(()=>{const n=t.size;let r,i;return qh(i6,n)?r=`${e}--size-${n}`:n&&(i={width:gt(n),height:gt(n)}),{sizeClasses:r,sizeStyles:i}})}const o6=Re({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:jt,opacity:[String,Number],...Ot(),...nu(),...ln({tag:"i"}),...wn()},"VIcon"),_t=et()({name:"VIcon",props:o6(),setup(t,e){let{attrs:n,slots:r}=e;const i=u.shallowRef(),{themeClasses:o}=Z8(),{iconData:a}=r6(()=>i.value||t.icon),{sizeClasses:s}=_d(t),{textColorClasses:c,textColorStyles:l}=Ji(()=>t.color);return st(()=>{var b,x;const d=(b=r.default)==null?void 0:b.call(r);d&&(i.value=(x=CT(d).filter(k=>k.type===u.Text&&k.children&&typeof k.children=="string")[0])==null?void 0:x.children);const f=!!(n.onClick||n.onClickOnce);return u.createVNode(a.value.component,{tag:t.tag,icon:a.value.icon,class:u.normalizeClass(["v-icon","notranslate",o.value,s.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":t.disabled,"v-icon--start":t.start,"v-icon--end":t.end},t.class]),style:u.normalizeStyle([{"--v-icon-opacity":t.opacity},s.value?void 0:{fontSize:gt(t.size),height:gt(t.size),width:gt(t.size)},l.value,t.style]),role:f?"button":void 0,"aria-hidden":!f,tabindex:f?t.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function ZT(t,e){const n=u.ref(),r=u.shallowRef(!1);if(Ob){const i=new IntersectionObserver(o=>{r.value=!!o.find(a=>a.isIntersecting)},e);u.onScopeDispose(()=>{i.disconnect()}),u.watch(n,(o,a)=>{a&&(i.unobserve(a),r.value=!1),o&&i.observe(o)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}function ru(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=np(),r=u.ref();if(yr){const i=new ResizeObserver(o=>{t==null||t(o,i),o.length&&(e==="content"?r.value=o[0].contentRect:r.value=o[0].target.getBoundingClientRect())});u.onBeforeUnmount(()=>{i.disconnect()}),u.watch(()=>n.el,(o,a)=>{a&&(i.unobserve(a),r.value=void 0),o&&i.observe(o)},{flush:"post"})}return{resizeRef:n,contentRect:u.readonly(r)}}const a6=Re({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ot(),...nu(),...ln({tag:"div"}),...wn()},"VProgressCircular"),Qb=et()({name:"VProgressCircular",props:a6(),setup(t,e){let{slots:n}=e;const r=20,i=2*Math.PI*r,o=u.ref(),{themeClasses:a}=Jn(t),{sizeClasses:s,sizeStyles:c}=_d(t),{textColorClasses:l,textColorStyles:d}=Ji(()=>t.color),{textColorClasses:f,textColorStyles:b}=Ji(()=>t.bgColor),{intersectionRef:x,isIntersecting:k}=ZT(),{resizeRef:E,contentRect:m}=ru(),h=u.toRef(()=>Rr(parseFloat(t.modelValue),0,100)),g=u.toRef(()=>Number(t.width)),w=u.toRef(()=>c.value?Number(t.size):m.value?m.value.width:Math.max(g.value,32)),p=u.toRef(()=>r/(1-g.value/w.value)*2),v=u.toRef(()=>g.value/w.value*p.value),y=u.toRef(()=>gt((100-h.value)/100*i));return u.watchEffect(()=>{x.value=o.value,E.value=o.value}),st(()=>u.createVNode(t.tag,{ref:o,class:u.normalizeClass(["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":k.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},a.value,s.value,l.value,t.class]),style:u.normalizeStyle([c.value,d.value,t.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:h.value},{default:()=>[u.createElementVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${p.value} ${p.value}`},[u.createElementVNode("circle",{class:u.normalizeClass(["v-progress-circular__underlay",f.value]),style:u.normalizeStyle(b.value),fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":v.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),u.createElementVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":v.value,"stroke-dasharray":i,"stroke-dashoffset":y.value},null)]),n.default&&u.createElementVNode("div",{class:"v-progress-circular__content"},[n.default({value:h.value})])]})),{}}}),Uo=Re({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Wo(t){return{dimensionStyles:u.computed(()=>{const n={},r=gt(t.height),i=gt(t.maxHeight),o=gt(t.maxWidth),a=gt(t.minHeight),s=gt(t.minWidth),c=gt(t.width);return r!=null&&(n.height=r),i!=null&&(n.maxHeight=i),o!=null&&(n.maxWidth=o),a!=null&&(n.minHeight=a),s!=null&&(n.minWidth=s),c!=null&&(n.width=c),n})}}const JT=Symbol.for("vuetify:locale");function ci(){const t=u.inject(JT);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function Bi(){const t=u.inject(JT);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const QT={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},iu=Re({location:String},"location");function Dd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=Bi();return{locationStyles:u.computed(()=>{if(!t.location)return{};const{side:o,align:a}=Bb(t.location.split(" ").length>1?t.location:`${t.location} center`,r.value);function s(l){return n?n(l):0}const c={};return o!=="center"&&(e?c[QT[o]]=`calc(100% - ${s(o)}px)`:c[o]=0),a!=="center"?e?c[QT[a]]=`calc(100% - ${s(a)}px)`:c[a]=0:(o==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[o]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[o]),c})}}const s6=Re({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ot(),...iu({location:"top"}),...si(),...ln(),...wn()},"VProgressLinear"),Nd=et()({name:"VProgressLinear",props:s6(),emits:{"update:modelValue":t=>!0},setup(t,e){var A;let{slots:n}=e;const r=Lt(t,"modelValue"),{isRtl:i,rtlClasses:o}=Bi(),{themeClasses:a}=Jn(t),{locationStyles:s}=Dd(t),{textColorClasses:c,textColorStyles:l}=Ji(()=>t.color),{backgroundColorClasses:d,backgroundColorStyles:f}=li(()=>t.bgColor||t.color),{backgroundColorClasses:b,backgroundColorStyles:x}=li(()=>t.bufferColor||t.bgColor||t.color),{backgroundColorClasses:k,backgroundColorStyles:E}=li(()=>t.color),{roundedClasses:m}=Si(t),{intersectionRef:h,isIntersecting:g}=ZT(),w=u.computed(()=>parseFloat(t.max)),p=u.computed(()=>parseFloat(t.height)),v=u.computed(()=>Rr(parseFloat(t.bufferValue)/w.value*100,0,100)),y=u.computed(()=>Rr(parseFloat(r.value)/w.value*100,0,100)),S=u.computed(()=>i.value!==t.reverse),T=u.computed(()=>t.indeterminate?"fade-transition":"slide-x-transition"),C=yr&&((A=window.matchMedia)==null?void 0:A.call(window,"(forced-colors: active)").matches);function M(P){if(!h.value)return;const{left:L,right:R,width:j}=h.value.getBoundingClientRect(),z=S.value?j-P.clientX+(R-j):P.clientX-L;r.value=Math.round(z/j*w.value)}return st(()=>u.createVNode(t.tag,{ref:h,class:u.normalizeClass(["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&g.value,"v-progress-linear--reverse":S.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},m.value,a.value,o.value,t.class]),style:u.normalizeStyle([{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?gt(p.value):0,"--v-progress-linear-height":gt(p.value),...t.absolute?s.value:{}},t.style]),role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Math.min(parseFloat(r.value),w.value),onClick:t.clickable&&M},{default:()=>[t.stream&&u.createElementVNode("div",{key:"stream",class:u.normalizeClass(["v-progress-linear__stream",c.value]),style:{...l.value,[S.value?"left":"right"]:gt(-p.value),borderTop:`${gt(p.value/2)} dotted`,opacity:parseFloat(t.bufferOpacity),top:`calc(50% - ${gt(p.value/4)})`,width:gt(100-v.value,"%"),"--v-progress-linear-stream-to":gt(p.value*(S.value?1:-1))}},null),u.createElementVNode("div",{class:u.normalizeClass(["v-progress-linear__background",C?void 0:d.value]),style:u.normalizeStyle([f.value,{opacity:parseFloat(t.bgOpacity),width:t.stream?0:void 0}])},null),u.createElementVNode("div",{class:u.normalizeClass(["v-progress-linear__buffer",C?void 0:b.value]),style:u.normalizeStyle([x.value,{opacity:parseFloat(t.bufferOpacity),width:gt(v.value,"%")}])},null),u.createVNode(u.Transition,{name:T.value},{default:()=>[t.indeterminate?u.createElementVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(P=>u.createElementVNode("div",{key:P,class:u.normalizeClass(["v-progress-linear__indeterminate",P,C?void 0:k.value]),style:u.normalizeStyle(E.value)},null))]):u.createElementVNode("div",{class:u.normalizeClass(["v-progress-linear__determinate",C?void 0:k.value]),style:u.normalizeStyle([E.value,{width:gt(y.value,"%")}])},null)]}),n.default&&u.createElementVNode("div",{class:"v-progress-linear__content"},[n.default({value:y.value,buffer:v.value})])]})),{}}}),dp=Re({loading:[Boolean,String]},"loader");function fp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return{loaderClasses:u.toRef(()=>({[`${e}--loading`]:t.loading}))}}function Vb(t,e){var r;let{slots:n}=e;return u.createElementVNode("div",{class:u.normalizeClass(`${t.name}__loader`)},[((r=n.default)==null?void 0:r.call(n,{color:t.color,isActive:t.active}))||u.createVNode(Nd,{absolute:t.absolute,active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const l6=["static","relative","fixed","absolute","sticky"],Pd=Re({position:{type:String,validator:t=>l6.includes(t)}},"position");function Ld(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();return{positionClasses:u.toRef(()=>t.position?`${e}--${t.position}`:void 0)}}function c6(){const t=rr("useRoute");return u.computed(()=>{var e;return(e=t==null?void 0:t.proxy)==null?void 0:e.$route})}function VT(){var t,e;return(e=(t=rr("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function hp(t,e){var d,f;const n=u.resolveDynamicComponent("RouterLink"),r=u.toRef(()=>!!(t.href||t.to)),i=u.computed(()=>(r==null?void 0:r.value)||ET(e,"click")||ET(t,"click"));if(typeof n=="string"||!("useLink"in n)){const b=u.toRef(()=>t.href);return{isLink:r,isClickable:i,href:b,linkProps:u.reactive({href:b})}}const o=n.useLink({to:u.toRef(()=>t.to||""),replace:u.toRef(()=>t.replace)}),a=u.computed(()=>t.to?o:void 0),s=c6(),c=u.computed(()=>{var b,x,k;return a.value?t.exact?s.value?((k=a.value.isExactActive)==null?void 0:k.value)&&Ri(a.value.route.value.query,s.value.query):((x=a.value.isExactActive)==null?void 0:x.value)??!1:((b=a.value.isActive)==null?void 0:b.value)??!1:!1}),l=u.computed(()=>{var b;return t.to?(b=a.value)==null?void 0:b.route.value.href:t.href});return{isLink:r,isClickable:i,isActive:c,route:(d=a.value)==null?void 0:d.route,navigate:(f=a.value)==null?void 0:f.navigate,href:l,linkProps:u.reactive({href:l,"aria-current":u.toRef(()=>c.value?"page":void 0)})}}const pp=Re({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let qb=!1;function u6(t,e){let n=!1,r,i;yr&&(t!=null&&t.beforeEach)&&(u.nextTick(()=>{window.addEventListener("popstate",o),r=t.beforeEach((a,s,c)=>{qb?n?e(c):c():setTimeout(()=>n?e(c):c()),qb=!0}),i=t==null?void 0:t.afterEach(()=>{qb=!1})}),u.onScopeDispose(()=>{window.removeEventListener("popstate",o),r==null||r(),i==null||i()}));function o(a){var s;(s=a.state)!=null&&s.replaced||(n=!0,setTimeout(()=>n=!1))}}function d6(t,e){u.watch(()=>{var n;return(n=t.isActive)==null?void 0:n.value},n=>{t.isLink.value&&n!=null&&e&&u.nextTick(()=>{e(n)})},{immediate:!0})}const e0=Symbol("rippleStop"),f6=80;function qT(t,e){t.style.transform=e,t.style.webkitTransform=e}function t0(t){return t.constructor.name==="TouchEvent"}function eM(t){return t.constructor.name==="KeyboardEvent"}const h6=function(t,e){var f;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,i=0;if(!eM(t)){const b=e.getBoundingClientRect(),x=t0(t)?t.touches[t.touches.length-1]:t;r=x.clientX-b.left,i=x.clientY-b.top}let o=0,a=.3;(f=e._ripple)!=null&&f.circle?(a=.15,o=e.clientWidth/2,o=n.center?o:o+Math.sqrt((r-o)**2+(i-o)**2)/4):o=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const s=`${(e.clientWidth-o*2)/2}px`,c=`${(e.clientHeight-o*2)/2}px`,l=n.center?s:`${r-o}px`,d=n.center?c:`${i-o}px`;return{radius:o,scale:a,x:l,y:d,centerX:s,centerY:c}},mp={show(t,e){var x;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((x=e==null?void 0:e._ripple)!=null&&x.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:o,scale:a,x:s,y:c,centerX:l,centerY:d}=h6(t,e,n),f=`${o*2}px`;i.className="v-ripple__animation",i.style.width=f,i.style.height=f,e.appendChild(r);const b=window.getComputedStyle(e);b&&b.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),qT(i,`translate(${s}, ${c}) scale3d(${a},${a},${a})`),i.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),qT(i,`translate(${l}, ${d}) scale3d(1,1,1)`)})})},hide(t){var o;if(!((o=t==null?void 0:t._ripple)!=null&&o.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const n=e[e.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const r=performance.now()-Number(n.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var s;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((s=n.parentNode)==null?void 0:s.parentNode)===t&&t.removeChild(n.parentNode)},300)},i)}};function tM(t){return typeof t>"u"||!!t}function Rd(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[e0])){if(t[e0]=!0,t0(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||eM(t),n._ripple.class&&(e.class=n._ripple.class),t0(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{mp.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},f6)}else mp.show(t,n,e)}}function nM(t){t[e0]=!0}function Qi(t){const e=t.currentTarget;if(e!=null&&e._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Qi(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),mp.hide(e)}}function rM(t){const e=t.currentTarget;e!=null&&e._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let Bd=!1;function iM(t,e){!Bd&&e.includes(t.key)&&(Bd=!0,Rd(t))}function oM(t){Bd=!1,Qi(t)}function aM(t){Bd&&(Bd=!1,Qi(t))}function sM(t,e,n){const{value:r,modifiers:i}=e,o=tM(r);o||mp.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=o,t._ripple.centered=i.center,t._ripple.circle=i.circle;const a=Qh(r)?r:{};a.class&&(t._ripple.class=a.class);const s=a.keys??["Enter","Space"];if(t._ripple.keyDownHandler=c=>iM(c,s),o&&!n){if(i.stop){t.addEventListener("touchstart",nM,{passive:!0}),t.addEventListener("mousedown",nM);return}t.addEventListener("touchstart",Rd,{passive:!0}),t.addEventListener("touchend",Qi,{passive:!0}),t.addEventListener("touchmove",rM,{passive:!0}),t.addEventListener("touchcancel",Qi),t.addEventListener("mousedown",Rd),t.addEventListener("mouseup",Qi),t.addEventListener("mouseleave",Qi),t.addEventListener("keydown",c=>iM(c,s)),t.addEventListener("keyup",oM),t.addEventListener("blur",aM),t.addEventListener("dragstart",Qi,{passive:!0})}else!o&&n&&lM(t)}function lM(t){var e;t.removeEventListener("mousedown",Rd),t.removeEventListener("touchstart",Rd),t.removeEventListener("touchend",Qi),t.removeEventListener("touchmove",rM),t.removeEventListener("touchcancel",Qi),t.removeEventListener("mouseup",Qi),t.removeEventListener("mouseleave",Qi),(e=t._ripple)!=null&&e.keyDownHandler&&t.removeEventListener("keydown",t._ripple.keyDownHandler),t.removeEventListener("keyup",oM),t.removeEventListener("dragstart",Qi),t.removeEventListener("blur",aM)}function p6(t,e){sM(t,e,!1)}function m6(t){lM(t),delete t._ripple}function g6(t,e){if(e.value===e.oldValue)return;const n=tM(e.oldValue);sM(t,e,n)}const ns={mounted:p6,unmounted:m6,updated:g6},n0=Re({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:XT},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:jt,appendIcon:jt,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Ho(),...Ot(),...ai(),...Uo(),...zo(),...Zb(),...dp(),...iu(),...Pd(),...si(),...pp(),...nu(),...ln({tag:"button"}),...wn(),...$o({variant:"elevated"})},"VBtn"),dt=et()({name:"VBtn",props:n0(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Jn(t),{borderClasses:o}=Ca(t),{densityClasses:a}=bo(t),{dimensionStyles:s}=Wo(t),{elevationClasses:c}=Sa(t),{loaderClasses:l}=fp(t),{locationStyles:d}=Dd(t),{positionClasses:f}=Ld(t),{roundedClasses:b}=Si(t),{sizeClasses:x,sizeStyles:k}=_d(t),E=Jb(t,t.symbol,!1),m=hp(t,n),h=u.computed(()=>{var A;return t.active!==void 0?t.active:m.isLink.value?(A=m.isActive)==null?void 0:A.value:E==null?void 0:E.isSelected.value}),g=u.toRef(()=>h.value?t.activeColor??t.color:t.color),w=u.computed(()=>{var P,L;return{color:(E==null?void 0:E.isSelected.value)&&(!m.isLink.value||((P=m.isActive)==null?void 0:P.value))||!E||((L=m.isActive)==null?void 0:L.value)?g.value??t.baseColor:t.baseColor,variant:t.variant}}),{colorClasses:p,colorStyles:v,variantClasses:y}=Ql(w),S=u.computed(()=>(E==null?void 0:E.disabled.value)||t.disabled),T=u.toRef(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),C=u.computed(()=>{if(!(t.value===void 0||typeof t.value=="symbol"))return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function M(A){var P;S.value||m.isLink.value&&(A.metaKey||A.ctrlKey||A.shiftKey||A.button!==0||n.target==="_blank")||((P=m.navigate)==null||P.call(m,A),E==null||E.toggle())}return d6(m,E==null?void 0:E.select),st(()=>{const A=m.isLink.value?"a":t.tag,P=!!(t.prependIcon||r.prepend),L=!!(t.appendIcon||r.append),R=!!(t.icon&&t.icon!==!0);return u.withDirectives(u.createVNode(A,u.mergeProps({type:A==="a"?void 0:"button",class:["v-btn",E==null?void 0:E.selectedClass.value,{"v-btn--active":h.value,"v-btn--block":t.block,"v-btn--disabled":S.value,"v-btn--elevated":T.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--readonly":t.readonly,"v-btn--slim":t.slim,"v-btn--stacked":t.stacked},i.value,o.value,p.value,a.value,c.value,l.value,f.value,b.value,x.value,y.value,t.class],style:[v.value,s.value,d.value,k.value,t.style],"aria-busy":t.loading?!0:void 0,disabled:S.value||void 0,tabindex:t.loading||t.readonly?-1:void 0,onClick:M,value:C.value},m.linkProps),{default:()=>{var j;return[Jl(!0,"v-btn"),!t.icon&&P&&u.createElementVNode("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?u.createVNode(en,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},r.prepend):u.createVNode(_t,{key:"prepend-icon",icon:t.prependIcon},null)]),u.createElementVNode("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&R?u.createVNode(_t,{key:"content-icon",icon:t.icon},null):u.createVNode(en,{key:"content-defaults",disabled:!R,defaults:{VIcon:{icon:t.icon}}},{default:()=>{var z;return[((z=r.default)==null?void 0:z.call(r))??u.toDisplayString(t.text)]}})]),!t.icon&&L&&u.createElementVNode("span",{key:"append",class:"v-btn__append"},[r.append?u.createVNode(en,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},r.append):u.createVNode(_t,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&u.createElementVNode("span",{key:"loader",class:"v-btn__loader"},[((j=r.loader)==null?void 0:j.call(r))??u.createVNode(Qb,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,width:"2"},null)])]}}),[[ns,!S.value&&t.ripple,"",{center:!!t.icon}]])}),{group:E}}}),ki=et()({name:"VCardActions",props:Ot(),setup(t,e){let{slots:n}=e;return Zi({VBtn:{slim:!0,variant:"text"}}),st(()=>{var r;return u.createElementVNode("div",{class:u.normalizeClass(["v-card-actions",t.class]),style:u.normalizeStyle(t.style)},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),v6=Re({opacity:[Number,String],...Ot(),...ln()},"VCardSubtitle"),cM=et()({name:"VCardSubtitle",props:v6(),setup(t,e){let{slots:n}=e;return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-card-subtitle",t.class]),style:u.normalizeStyle([{"--v-card-subtitle-opacity":t.opacity},t.style])},n)),{}}}),uM=Od("v-card-title");function y6(t){return{aspectStyles:u.computed(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const dM=Re({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ot(),...Uo()},"VResponsive"),fM=et()({name:"VResponsive",props:dM(),setup(t,e){let{slots:n}=e;const{aspectStyles:r}=y6(t),{dimensionStyles:i}=Wo(t);return st(()=>{var o;return u.createElementVNode("div",{class:u.normalizeClass(["v-responsive",{"v-responsive--inline":t.inline},t.class]),style:u.normalizeStyle([i.value,t.style])},[u.createElementVNode("div",{class:"v-responsive__sizer",style:u.normalizeStyle(r.value)},null),(o=n.additional)==null?void 0:o.call(n),n.default&&u.createElementVNode("div",{class:u.normalizeClass(["v-responsive__content",t.contentClass])},[n.default()])])}),{}}}),ou=Re({transition:{type:null,default:"fade-transition",validator:t=>t!==!0}},"transition"),Yo=(t,e)=>{let{slots:n}=e;const{transition:r,disabled:i,group:o,...a}=t,{component:s=o?u.TransitionGroup:u.Transition,...c}=Qh(r)?r:{};let l;return Qh(r)?l=u.mergeProps(c,w8({disabled:i,group:o}),a):l=u.mergeProps({name:i||!r?"":r},a),u.h(s,l,n)};function b6(t,e){if(!Ob)return;const n=e.modifiers||{},r=e.value,{handler:i,options:o}=typeof r=="object"?r:{handler:r,options:{}},a=new IntersectionObserver(function(){var f;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const l=(f=t._observe)==null?void 0:f[e.instance.$.uid];if(!l)return;const d=s.some(b=>b.isIntersecting);i&&(!n.quiet||l.init)&&(!n.once||d||l.init)&&i(d,s,c),d&&n.once?hM(t,e):l.init=!0},o);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:a},a.observe(t)}function hM(t,e){var r;const n=(r=t._observe)==null?void 0:r[e.instance.$.uid];n&&(n.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Vl={mounted:b6,unmounted:hM},w6=Re({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...dM(),...Ot(),...si(),...ou()},"VImg"),gp=et()({name:"VImg",directives:{vIntersect:Vl},props:w6(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:r}=e;const{backgroundColorClasses:i,backgroundColorStyles:o}=li(()=>t.color),{roundedClasses:a}=Si(t),s=rr("VImg"),c=u.shallowRef(""),l=u.ref(),d=u.shallowRef(t.eager?"loading":"idle"),f=u.shallowRef(),b=u.shallowRef(),x=u.computed(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),k=u.computed(()=>x.value.aspect||f.value/b.value||0);u.watch(()=>t.src,()=>{E(d.value!=="idle")}),u.watch(k,(P,L)=>{!P&&L&&l.value&&p(l.value)}),u.onBeforeMount(()=>E());function E(P){if(!(t.eager&&P)&&!(Ob&&!P&&!t.eager)){if(d.value="loading",x.value.lazySrc){const L=new Image;L.src=x.value.lazySrc,p(L,null)}x.value.src&&u.nextTick(()=>{var L;n("loadstart",((L=l.value)==null?void 0:L.currentSrc)||x.value.src),setTimeout(()=>{var R;if(!s.isUnmounted)if((R=l.value)!=null&&R.complete){if(l.value.naturalWidth||h(),d.value==="error")return;k.value||p(l.value,null),d.value==="loading"&&m()}else k.value||p(l.value),g()})})}}function m(){var P;s.isUnmounted||(g(),p(l.value),d.value="loaded",n("load",((P=l.value)==null?void 0:P.currentSrc)||x.value.src))}function h(){var P;s.isUnmounted||(d.value="error",n("error",((P=l.value)==null?void 0:P.currentSrc)||x.value.src))}function g(){const P=l.value;P&&(c.value=P.currentSrc||P.src)}let w=-1;u.onBeforeUnmount(()=>{clearTimeout(w)});function p(P){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const R=()=>{if(clearTimeout(w),s.isUnmounted)return;const{naturalHeight:j,naturalWidth:z}=P;j||z?(f.value=z,b.value=j):!P.complete&&d.value==="loading"&&L!=null?w=window.setTimeout(R,L):(P.currentSrc.endsWith(".svg")||P.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,b.value=1)};R()}const v=u.toRef(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),y=()=>{var R;if(!x.value.src||d.value==="idle")return null;const P=u.createElementVNode("img",{class:u.normalizeClass(["v-img__img",v.value]),style:{objectPosition:t.position},crossorigin:t.crossorigin,src:x.value.src,srcset:x.value.srcset,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:l,onLoad:m,onError:h},null),L=(R=r.sources)==null?void 0:R.call(r);return u.createVNode(Yo,{transition:t.transition,appear:!0},{default:()=>[u.withDirectives(L?u.createElementVNode("picture",{class:"v-img__picture"},[L,P]):P,[[u.vShow,d.value==="loaded"]])]})},S=()=>u.createVNode(Yo,{transition:t.transition},{default:()=>[x.value.lazySrc&&d.value!=="loaded"&&u.createElementVNode("img",{class:u.normalizeClass(["v-img__img","v-img__img--preload",v.value]),style:{objectPosition:t.position},crossorigin:t.crossorigin,src:x.value.lazySrc,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),T=()=>r.placeholder?u.createVNode(Yo,{transition:t.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!r.error)&&u.createElementVNode("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,C=()=>r.error?u.createVNode(Yo,{transition:t.transition,appear:!0},{default:()=>[d.value==="error"&&u.createElementVNode("div",{class:"v-img__error"},[r.error()])]}):null,M=()=>t.gradient?u.createElementVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,A=u.shallowRef(!1);{const P=u.watch(k,L=>{L&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.value=!0})}),P())})}return st(()=>{const P=fM.filterProps(t);return u.withDirectives(u.createVNode(fM,u.mergeProps({class:["v-img",{"v-img--absolute":t.absolute,"v-img--booting":!A.value},i.value,a.value,t.class],style:[{width:gt(t.width==="auto"?f.value:t.width)},o.value,t.style]},P,{aspectRatio:k.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>u.createElementVNode(u.Fragment,null,[u.createVNode(y,null,null),u.createVNode(S,null,null),u.createVNode(M,null,null),u.createVNode(T,null,null),u.createVNode(C,null,null)]),default:r.default}),[[Vl,{handler:E,options:t.options},null,{once:!0}]])}),{currentSrc:c,image:l,state:d,naturalWidth:f,naturalHeight:b}}}),x6=Re({start:Boolean,end:Boolean,icon:jt,image:String,text:String,...Ho(),...Ot(),...ai(),...si(),...nu(),...ln(),...wn(),...$o({variant:"flat"})},"VAvatar"),ka=et()({name:"VAvatar",props:x6(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t),{borderClasses:i}=Ca(t),{colorClasses:o,colorStyles:a,variantClasses:s}=Ql(t),{densityClasses:c}=bo(t),{roundedClasses:l}=Si(t),{sizeClasses:d,sizeStyles:f}=_d(t);return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},r.value,i.value,o.value,c.value,l.value,d.value,s.value,t.class]),style:u.normalizeStyle([a.value,f.value,t.style])},{default:()=>[n.default?u.createVNode(en,{key:"content-defaults",defaults:{VImg:{cover:!0,src:t.image},VIcon:{icon:t.icon}}},{default:()=>[n.default()]}):t.image?u.createVNode(gp,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?u.createVNode(_t,{key:"icon",icon:t.icon},null):t.text,Jl(!1,"v-avatar")]})),{}}}),C6=Re({appendAvatar:String,appendIcon:jt,prependAvatar:String,prependIcon:jt,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ot(),...ai()},"VCardItem"),S6=et()({name:"VCardItem",props:C6(),setup(t,e){let{slots:n}=e;return st(()=>{var l;const r=!!(t.prependAvatar||t.prependIcon),i=!!(r||n.prepend),o=!!(t.appendAvatar||t.appendIcon),a=!!(o||n.append),s=!!(t.title!=null||n.title),c=!!(t.subtitle!=null||n.subtitle);return u.createElementVNode("div",{class:u.normalizeClass(["v-card-item",t.class]),style:u.normalizeStyle(t.style)},[i&&u.createElementVNode("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?u.createVNode(en,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},n.prepend):u.createElementVNode(u.Fragment,null,[t.prependAvatar&&u.createVNode(ka,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&u.createVNode(_t,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),u.createElementVNode("div",{class:"v-card-item__content"},[s&&u.createVNode(uM,{key:"title"},{default:()=>{var d;return[((d=n.title)==null?void 0:d.call(n))??u.toDisplayString(t.title)]}}),c&&u.createVNode(cM,{key:"subtitle"},{default:()=>{var d;return[((d=n.subtitle)==null?void 0:d.call(n))??u.toDisplayString(t.subtitle)]}}),(l=n.default)==null?void 0:l.call(n)]),a&&u.createElementVNode("div",{key:"append",class:"v-card-item__append"},[n.append?u.createVNode(en,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},n.append):u.createElementVNode(u.Fragment,null,[t.appendIcon&&u.createVNode(_t,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&u.createVNode(ka,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),k6=Re({opacity:[Number,String],...Ot(),...ln()},"VCardText"),Dr=et()({name:"VCardText",props:k6(),setup(t,e){let{slots:n}=e;return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-card-text",t.class]),style:u.normalizeStyle([{"--v-card-text-opacity":t.opacity},t.style])},n)),{}}}),E6=Re({appendAvatar:String,appendIcon:jt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:jt,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ho(),...Ot(),...ai(),...Uo(),...zo(),...dp(),...iu(),...Pd(),...si(),...pp(),...ln(),...wn(),...$o({variant:"elevated"})},"VCard"),jn=et()({name:"VCard",directives:{vRipple:ns},props:E6(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Jn(t),{borderClasses:o}=Ca(t),{colorClasses:a,colorStyles:s,variantClasses:c}=Ql(t),{densityClasses:l}=bo(t),{dimensionStyles:d}=Wo(t),{elevationClasses:f}=Sa(t),{loaderClasses:b}=fp(t),{locationStyles:x}=Dd(t),{positionClasses:k}=Ld(t),{roundedClasses:E}=Si(t),m=hp(t,n);return st(()=>{const h=t.link!==!1&&m.isLink.value,g=!t.disabled&&t.link!==!1&&(t.link||m.isClickable.value),w=h?"a":t.tag,p=!!(r.title||t.title!=null),v=!!(r.subtitle||t.subtitle!=null),y=p||v,S=!!(r.append||t.appendAvatar||t.appendIcon),T=!!(r.prepend||t.prependAvatar||t.prependIcon),C=!!(r.image||t.image),M=y||T||S,A=!!(r.text||t.text!=null);return u.withDirectives(u.createVNode(w,u.mergeProps({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":g},i.value,o.value,a.value,l.value,f.value,b.value,k.value,E.value,c.value,t.class],style:[s.value,d.value,x.value,t.style],onClick:g&&m.navigate,tabindex:t.disabled?-1:void 0},m.linkProps),{default:()=>{var P;return[C&&u.createElementVNode("div",{key:"image",class:"v-card__image"},[r.image?u.createVNode(en,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},r.image):u.createVNode(gp,{key:"image-img",cover:!0,src:t.image},null)]),u.createVNode(Vb,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:r.loader}),M&&u.createVNode(S6,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),A&&u.createVNode(Dr,{key:"text"},{default:()=>{var L;return[((L=r.text)==null?void 0:L.call(r))??t.text]}}),(P=r.default)==null?void 0:P.call(r),r.actions&&u.createVNode(ki,null,{default:r.actions}),Jl(g,"v-card")]}}),[[ns,g&&t.ripple]])}),{}}}),T6=Re({fluid:{type:Boolean,default:!1},...Ot(),...Uo(),...ln()},"VContainer"),vp=et()({name:"VContainer",props:T6(),setup(t,e){let{slots:n}=e;const{rtlClasses:r}=Bi(),{dimensionStyles:i}=Wo(t);return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-container",{"v-container--fluid":t.fluid},r.value,t.class]),style:u.normalizeStyle([i.value,t.style])},n)),{}}}),yp=["sm","md","lg","xl","xxl"],M6=Symbol.for("vuetify:display"),jd=Re({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Us(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();const n=u.inject(M6);if(!n)throw new Error("Could not find Vuetify display injection");const r=u.computed(()=>t.mobile?!0:typeof t.mobileBreakpoint=="number"?n.width.value<t.mobileBreakpoint:t.mobileBreakpoint?n.width.value<n.thresholds.value[t.mobileBreakpoint]:t.mobile===null?n.mobile.value:!1),i=u.toRef(()=>e?{[`${e}--mobile`]:r.value}:{});return{...n,displayClasses:i,mobile:r}}const pM=yp.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),mM=yp.reduce((t,e)=>{const n="offset"+u.capitalize(e);return t[n]={type:[String,Number],default:null},t},{}),gM=yp.reduce((t,e)=>{const n="order"+u.capitalize(e);return t[n]={type:[String,Number],default:null},t},{}),vM={col:Object.keys(pM),offset:Object.keys(mM),order:Object.keys(gM)};function I6(t,e,n){let r=t;if(!(n==null||n===!1)){if(e){const i=e.replace(t,"");r+=`-${i}`}return t==="col"&&(r="v-"+r),t==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const O6=["auto","start","end","center","baseline","stretch"],A6=Re({cols:{type:[Boolean,String,Number],default:!1},...pM,offset:{type:[String,Number],default:null},...mM,order:{type:[String,Number],default:null},...gM,alignSelf:{type:String,default:null,validator:t=>O6.includes(t)},...Ot(),...ln()},"VCol"),bp=et()({name:"VCol",props:A6(),setup(t,e){let{slots:n}=e;const r=u.computed(()=>{const i=[];let o;for(o in vM)vM[o].forEach(s=>{const c=t[s],l=I6(o,s,c);l&&i.push(l)});const a=i.some(s=>s.startsWith("v-col-"));return i.push({"v-col":!a||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>{var i;return u.h(t.tag,{class:[r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),r0=["start","end","center"],yM=["space-between","space-around","space-evenly"];function i0(t,e){return yp.reduce((n,r)=>{const i=t+u.capitalize(r);return n[i]=e(),n},{})}const _6=[...r0,"baseline","stretch"],bM=t=>_6.includes(t),wM=i0("align",()=>({type:String,default:null,validator:bM})),D6=[...r0,...yM],xM=t=>D6.includes(t),CM=i0("justify",()=>({type:String,default:null,validator:xM})),N6=[...r0,...yM,"stretch"],SM=t=>N6.includes(t),kM=i0("alignContent",()=>({type:String,default:null,validator:SM})),EM={align:Object.keys(wM),justify:Object.keys(CM),alignContent:Object.keys(kM)},P6={align:"align",justify:"justify",alignContent:"align-content"};function L6(t,e,n){let r=P6[t];if(n!=null){if(e){const i=e.replace(t,"");r+=`-${i}`}return r+=`-${n}`,r.toLowerCase()}}const R6=Re({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:bM},...wM,justify:{type:String,default:null,validator:xM},...CM,alignContent:{type:String,default:null,validator:SM},...kM,...Ot(),...ln()},"VRow"),Fd=et()({name:"VRow",props:R6(),setup(t,e){let{slots:n}=e;const r=u.computed(()=>{const i=[];let o;for(o in EM)EM[o].forEach(a=>{const s=t[a],c=L6(o,a,s);c&&i.push(c)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>{var i;return u.h(t.tag,{class:["v-row",r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),Xr=Od("v-spacer","div","VSpacer"),TM=Re({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:jt,default:"$next"},prevIcon:{type:jt,default:"$prev"},modeIcon:{type:jt,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),MM=et()({name:"VDatePickerControls",props:TM(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(t,e){let{emit:n}=e;const r=u.computed(()=>Array.isArray(t.disabled)?t.disabled.includes("text"):!!t.disabled),i=u.computed(()=>Array.isArray(t.disabled)?t.disabled.includes("mode"):!!t.disabled),o=u.computed(()=>Array.isArray(t.disabled)?t.disabled.includes("prev"):!!t.disabled),a=u.computed(()=>Array.isArray(t.disabled)?t.disabled.includes("next"):!!t.disabled);function s(){n("click:prev")}function c(){n("click:next")}function l(){n("click:year")}function d(){n("click:month")}return st(()=>u.createElementVNode("div",{class:u.normalizeClass(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":gt(t.controlHeight)}},[u.createVNode(dt,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:t.text,variant:"text",rounded:!0,onClick:d},null),u.createVNode(dt,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:i.value,density:"comfortable",icon:t.modeIcon,variant:"text",onClick:l},null),u.createVNode(Xr,null,null),u.createElementVNode("div",{class:"v-date-picker-controls__month"},[u.createVNode(dt,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:t.prevIcon,variant:"text",onClick:s},null),u.createVNode(dt,{"data-testid":"next-month",disabled:a.value,icon:t.nextIcon,density:"comfortable",variant:"text",onClick:c},null)])])),{}}}),B6=Re({appendIcon:jt,color:String,header:String,transition:String,onClick:Br()},"VDatePickerHeader"),IM=et()({name:"VDatePickerHeader",props:B6(),emits:{click:()=>!0,"click:append":()=>!0},setup(t,e){let{emit:n,slots:r}=e;const{backgroundColorClasses:i,backgroundColorStyles:o}=li(()=>t.color);function a(){n("click")}function s(){n("click:append")}return st(()=>{const c=!!(r.default||t.header),l=!!(r.append||t.appendIcon);return u.createElementVNode("div",{class:u.normalizeClass(["v-date-picker-header",{"v-date-picker-header--clickable":!!t.onClick},i.value]),style:u.normalizeStyle(o.value),onClick:a},[r.prepend&&u.createElementVNode("div",{key:"prepend",class:"v-date-picker-header__prepend"},[r.prepend()]),c&&u.createVNode(Yo,{key:"content",name:t.transition},{default:()=>{var d;return[u.createElementVNode("div",{key:t.header,class:"v-date-picker-header__content"},[((d=r.default)==null?void 0:d.call(r))??t.header])]}}),l&&u.createElementVNode("div",{class:"v-date-picker-header__append"},[r.append?u.createVNode(en,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VBtn:{icon:t.appendIcon,variant:"text"}}},{default:()=>{var d;return[(d=r.append)==null?void 0:d.call(r)]}}):u.createVNode(dt,{key:"append-btn",icon:t.appendIcon,variant:"text",onClick:s},null)])])}),{}}}),j6=Symbol.for("vuetify:date-options");function F6(t,e,n){const r=t.getDiff(t.endOfDay(n??e),t.startOfDay(e),"days"),i=[e];for(let o=1;o<r;o++){const a=t.addDays(e,o);i.push(a)}return n&&i.push(t.endOfDay(n)),i}function H6(t,e){const n=u.reactive(typeof t.adapter=="function"?new t.adapter({locale:t.locale[e.current.value]??e.current.value,formats:t.formats}):t.adapter);return u.watch(e.current,r=>{n.locale=t.locale[r]??r??n.locale}),n}function Hd(){const t=u.inject(j6);if(!t)throw new Error("[Vuetify] Could not find injected date options");const e=ci();return H6(t,e)}const z6=Re({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function $6(t){const e=Hd(),n=Lt(t,"modelValue",[],x=>Zn(x).map(k=>e.date(k))),r=u.computed(()=>t.displayValue?e.date(t.displayValue):n.value.length>0?e.date(n.value[0]):t.min?e.date(t.min):Array.isArray(t.allowedDates)?e.date(t.allowedDates[0]):e.date()),i=Lt(t,"year",void 0,x=>{const k=x!=null?Number(x):e.getYear(r.value);return e.startOfYear(e.setYear(e.date(),k))},x=>e.getYear(x)),o=Lt(t,"month",void 0,x=>{const k=x!=null?Number(x):e.getMonth(r.value),E=e.setYear(e.startOfMonth(e.date()),e.getYear(i.value));return e.setMonth(E,k)},x=>e.getMonth(x)),a=u.computed(()=>{const x=e.toJsDate(e.startOfWeek(e.date(),t.firstDayOfWeek)).getDay();return e.getWeekdays(t.firstDayOfWeek,t.weekdayFormat).filter((k,E)=>t.weekdays.includes((E+x)%7))}),s=u.computed(()=>{const x=e.getWeekArray(o.value,t.firstDayOfWeek),k=x.flat(),E=6*7;if(t.weeksInMonth==="static"&&k.length<E){const m=k[k.length-1];let h=[];for(let g=1;g<=E-k.length;g++)h.push(e.addDays(m,g)),g%7===0&&(x.push(h),h=[])}return x});function c(x,k){return x.filter(E=>t.weekdays.includes(e.toJsDate(E).getDay())).map((E,m)=>{const h=e.toISO(E),g=!e.isSameMonth(E,o.value),w=e.isSameDay(E,e.startOfMonth(o.value)),p=e.isSameDay(E,e.endOfMonth(o.value)),v=e.isSameDay(E,o.value),y=t.weekdays.length;return{date:E,formatted:e.format(E,"keyboardDate"),isAdjacent:g,isDisabled:b(E),isEnd:p,isHidden:g&&!t.showAdjacentMonths,isSame:v,isSelected:n.value.some(S=>e.isSameDay(E,S)),isStart:w,isToday:e.isSameDay(E,k),isWeekEnd:m%y===y-1,isWeekStart:m%y===0,isoDate:h,localized:e.format(E,"dayOfMonth"),month:e.getMonth(E),year:e.getYear(E)}})}const l=u.computed(()=>{const x=e.startOfWeek(r.value,t.firstDayOfWeek),k=[];for(let m=0;m<=6;m++)k.push(e.addDays(x,m));const E=e.date();return c(k,E)}),d=u.computed(()=>{const x=s.value.flat(),k=e.date();return c(x,k)}),f=u.computed(()=>s.value.map(x=>x.length?e.getWeek(x[0],t.firstDayOfWeek):null));function b(x){if(t.disabled)return!0;const k=e.date(x);return t.min&&e.isBefore(e.endOfDay(k),e.date(t.min))||t.max&&e.isAfter(k,e.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(E=>e.isSameDay(e.date(E),k)):typeof t.allowedDates=="function"?!t.allowedDates(k):!1}return{displayValue:r,daysInMonth:d,daysInWeek:l,genDays:c,model:n,weeksInMonth:s,weekdayLabels:a,weekNumbers:f}}const OM=Re({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Sr(z6(),["displayValue"])},"VDatePickerMonth"),AM=et()({name:"VDatePickerMonth",props:OM(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=u.ref(),{daysInMonth:o,model:a,weekNumbers:s,weekdayLabels:c}=$6(t),l=Hd(),d=u.shallowRef(),f=u.shallowRef(),b=u.shallowRef(!1),x=u.toRef(()=>b.value?t.reverseTransition:t.transition);t.multiple==="range"&&a.value.length>0&&(d.value=a.value[0],a.value.length>1&&(f.value=a.value[a.value.length-1]));const k=u.computed(()=>{const g=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return a.value.length>=g});u.watch(o,(g,w)=>{w&&(b.value=l.isBefore(g[0].date,w[0].date))});function E(g){const w=l.startOfDay(g);if(a.value.length===0?d.value=void 0:a.value.length===1&&(d.value=a.value[0],f.value=void 0),!d.value)d.value=w,a.value=[d.value];else if(f.value)d.value=g,f.value=void 0,a.value=[d.value];else{if(l.isSameDay(w,d.value)){d.value=void 0,a.value=[];return}else l.isBefore(w,d.value)?(f.value=l.endOfDay(d.value),d.value=w):f.value=l.endOfDay(w);a.value=F6(l,d.value,f.value)}}function m(g){const w=a.value.findIndex(p=>l.isSameDay(p,g));if(w===-1)a.value=[...a.value,g];else{const p=[...a.value];p.splice(w,1),a.value=p}}function h(g){t.multiple==="range"?E(g):t.multiple?m(g):a.value=[g]}st(()=>u.createElementVNode("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":t.weekdays.length}},[t.showWeek&&u.createElementVNode("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&u.createElementVNode("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[u.createTextVNode("")]),s.value.map(g=>u.createElementVNode("div",{class:u.normalizeClass(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[g]))]),u.createVNode(Yo,{name:x.value},{default:()=>{var g;return[u.createElementVNode("div",{ref:i,key:(g=o.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!t.hideWeekdays&&c.value.map(w=>u.createElementVNode("div",{class:u.normalizeClass(["v-date-picker-month__day","v-date-picker-month__weekday"])},[w])),o.value.map((w,p)=>{var y;const v={props:{class:"v-date-picker-month__day-btn",color:w.isSelected||w.isToday?t.color:void 0,disabled:w.isDisabled,icon:!0,ripple:!1,text:w.localized,variant:w.isSelected?"flat":w.isToday?"outlined":"text",onClick:()=>h(w.date)},item:w,i:p};return k.value&&!w.isSelected&&(w.isDisabled=!0),u.createElementVNode("div",{class:u.normalizeClass(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":w.isAdjacent,"v-date-picker-month__day--hide-adjacent":w.isHidden,"v-date-picker-month__day--selected":w.isSelected,"v-date-picker-month__day--week-end":w.isWeekEnd,"v-date-picker-month__day--week-start":w.isWeekStart}]),"data-v-date":w.isDisabled?void 0:w.isoDate},[(t.showAdjacentMonths||!w.isAdjacent)&&(((y=r.day)==null?void 0:y.call(r,v))??u.createVNode(dt,v.props,null))])})])]}})]))}}),_M=Re({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),DM=et()({name:"VDatePickerMonths",props:_M(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Hd(),o=Lt(t,"modelValue"),a=u.computed(()=>{let c=i.startOfYear(i.date());return t.year&&(c=i.setYear(c,t.year)),Vc(12).map(l=>{const d=i.format(c,"monthShort"),f=!!(!s(l)||t.min&&i.isAfter(i.startOfMonth(i.date(t.min)),c)||t.max&&i.isAfter(c,i.startOfMonth(i.date(t.max))));return c=i.getNextMonth(c),{isDisabled:f,text:d,value:l}})});u.watchEffect(()=>{o.value=o.value??i.getMonth(i.date())});function s(c){return Array.isArray(t.allowedMonths)&&t.allowedMonths.length?t.allowedMonths.includes(c):typeof t.allowedMonths=="function"?t.allowedMonths(c):!0}return st(()=>u.createElementVNode("div",{class:"v-date-picker-months",style:{height:gt(t.height)}},[u.createElementVNode("div",{class:"v-date-picker-months__content"},[a.value.map((c,l)=>{var b;const d={active:o.value===l,color:o.value===l?t.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:o.value===c.value?"flat":"text",onClick:()=>f(l)};function f(x){if(o.value===x){n("update:modelValue",o.value);return}o.value=x}return((b=r.month)==null?void 0:b.call(r,{month:c,i:l,props:d}))??u.createVNode(dt,u.mergeProps({key:"month"},d),null)})])])),{}}}),NM=Re({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),PM=et()({name:"VDatePickerYears",props:NM(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Hd(),o=Lt(t,"modelValue"),a=u.computed(()=>{const l=i.getYear(i.date());let d=l-100,f=l+52;t.min&&(d=i.getYear(i.date(t.min))),t.max&&(f=i.getYear(i.date(t.max)));let b=i.startOfYear(i.date());return b=i.setYear(b,d),Vc(f-d+1,d).map(x=>{const k=i.format(b,"year");return b=i.setYear(b,i.getYear(b)+1),{text:k,value:x,isDisabled:!c(x)}})});u.watchEffect(()=>{o.value=o.value??i.getYear(i.date())});const s=np();u.onMounted(async()=>{var l;await u.nextTick(),(l=s.el)==null||l.focus()});function c(l){return Array.isArray(t.allowedYears)&&t.allowedYears.length?t.allowedYears.includes(l):typeof t.allowedYears=="function"?t.allowedYears(l):!0}return st(()=>u.createElementVNode("div",{class:"v-date-picker-years",style:{height:gt(t.height)}},[u.createElementVNode("div",{class:"v-date-picker-years__content"},[a.value.map((l,d)=>{var b;const f={ref:o.value===l.value?s:void 0,active:o.value===l.value,color:o.value===l.value?t.color:void 0,rounded:!0,text:l.text,disabled:l.isDisabled,variant:o.value===l.value?"flat":"text",onClick:()=>{if(o.value===l.value){n("update:modelValue",o.value);return}o.value=l.value}};return((b=r.year)==null?void 0:b.call(r,{year:l,i:d,props:f}))??u.createVNode(dt,u.mergeProps({key:"month"},f),null)})])])),{}}}),U6=Re({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Vi(t,e,n){return et()({name:t,props:U6({mode:n,origin:e}),setup(r,i){let{slots:o}=i;const a={onBeforeEnter(s){r.origin&&(s.style.transformOrigin=r.origin)},onLeave(s){if(r.leaveAbsolute){const{offsetTop:c,offsetLeft:l,offsetWidth:d,offsetHeight:f}=s;s._transitionInitialStyles={position:s.style.position,top:s.style.top,left:s.style.left,width:s.style.width,height:s.style.height},s.style.position="absolute",s.style.top=`${c}px`,s.style.left=`${l}px`,s.style.width=`${d}px`,s.style.height=`${f}px`}r.hideOnLeave&&s.style.setProperty("display","none","important")},onAfterLeave(s){if(r.leaveAbsolute&&(s!=null&&s._transitionInitialStyles)){const{position:c,top:l,left:d,width:f,height:b}=s._transitionInitialStyles;delete s._transitionInitialStyles,s.style.position=c||"",s.style.top=l||"",s.style.left=d||"",s.style.width=f||"",s.style.height=b||""}}};return()=>{const s=r.group?u.TransitionGroup:u.Transition;return u.h(s,{name:r.disabled?"":t,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:a},o.default)}}})}function LM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return et()({name:t,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(r,i){let{slots:o}=i;const a=r.group?u.TransitionGroup:u.Transition;return()=>u.h(a,{name:r.disabled?"":t,css:!r.disabled,...r.disabled?{}:e},o.default)}})}function RM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=u.camelize(`offset-${n}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[n]:a.style[n]}},onEnter(a){const s=a._initialStyle;if(!s)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const c=`${a[r]}px`;a.style[n]="0",a.offsetHeight,a.style.transition=s.transition,t&&a._parent&&a._parent.classList.add(t),requestAnimationFrame(()=>{a.style[n]=c})},onAfterEnter:o,onEnterCancelled:o,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[n]:a.style[n]},a.style.overflow="hidden",a.style[n]=`${a[r]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[n]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(a){t&&a._parent&&a._parent.classList.remove(t),o(a)}function o(a){if(!a._initialStyle)return;const s=a._initialStyle[n];a.style.overflow=a._initialStyle.overflow,s!=null&&(a.style[n]=s),delete a._initialStyle}}const W6=Re({target:[Object,Array]},"v-dialog-transition"),o0=new WeakMap,a0=et()({name:"VDialogTransition",props:W6(),setup(t,e){let{slots:n}=e;const r={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,o){var x;await new Promise(k=>requestAnimationFrame(k)),await new Promise(k=>requestAnimationFrame(k)),i.style.visibility="";const a=jM(t.target,i),{x:s,y:c,sx:l,sy:d,speed:f}=a;o0.set(i,a);const b=Zl(i,[{transform:`translate(${s}px, ${c}px) scale(${l}, ${d})`,opacity:0},{}],{duration:225*f,easing:W8});(x=BM(i))==null||x.forEach(k=>{Zl(k,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*f,easing:Ad})}),b.finished.then(()=>o())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,o){var x;await new Promise(k=>requestAnimationFrame(k));let a;!o0.has(i)||Array.isArray(t.target)||t.target.offsetParent||t.target.getClientRects().length?a=jM(t.target,i):a=o0.get(i);const{x:s,y:c,sx:l,sy:d,speed:f}=a;Zl(i,[{},{transform:`translate(${s}px, ${c}px) scale(${l}, ${d})`,opacity:0}],{duration:125*f,easing:Y8}).finished.then(()=>o()),(x=BM(i))==null||x.forEach(k=>{Zl(k,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*f,easing:Ad})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?u.createVNode(u.Transition,u.mergeProps({name:"dialog-transition"},r,{css:!1}),n):u.createVNode(u.Transition,{name:"dialog-transition"},n)}});function BM(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function jM(t,e){const n=_T(t),r=zb(e),[i,o]=getComputedStyle(e).transformOrigin.split(" ").map(h=>parseFloat(h)),[a,s]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;a==="left"||s==="left"?c-=n.width/2:(a==="right"||s==="right")&&(c+=n.width/2);let l=n.top+n.height/2;a==="top"||s==="top"?l-=n.height/2:(a==="bottom"||s==="bottom")&&(l+=n.height/2);const d=n.width/r.width,f=n.height/r.height,b=Math.max(1,d,f),x=d/b||0,k=f/b||0,E=r.width*r.height/(window.innerWidth*window.innerHeight),m=E>.12?Math.min(1.5,(E-.12)*10+1):1;return{x:c-(i+r.left),y:l-(o+r.top),sx:x,sy:k,speed:m}}Vi("fab-transition","center center","out-in"),Vi("dialog-bottom-transition"),Vi("dialog-top-transition");const Ws=Vi("fade-transition");Vi("scale-transition"),Vi("scroll-x-transition"),Vi("scroll-x-reverse-transition"),Vi("scroll-y-transition"),Vi("scroll-y-reverse-transition"),Vi("slide-x-transition"),Vi("slide-x-reverse-transition");const FM=Vi("slide-y-transition");Vi("slide-y-reverse-transition");const HM=LM("expand-transition",RM()),zM=LM("expand-x-transition",RM("",!0)),Y6=Od("v-picker-title"),$M=Re({color:String,...Ho(),...Ot(),...Uo(),...zo(),...iu(),...Pd(),...si(),...ln(),...wn()},"VSheet"),s0=et()({name:"VSheet",props:$M(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t),{backgroundColorClasses:i,backgroundColorStyles:o}=li(()=>t.color),{borderClasses:a}=Ca(t),{dimensionStyles:s}=Wo(t),{elevationClasses:c}=Sa(t),{locationStyles:l}=Dd(t),{positionClasses:d}=Ld(t),{roundedClasses:f}=Si(t);return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-sheet",r.value,i.value,a.value,c.value,d.value,f.value,t.class]),style:u.normalizeStyle([o.value,s.value,l.value,t.style])},n)),{}}}),UM=Re({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...$M()},"VPicker"),WM=et()({name:"VPicker",props:UM(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=li(()=>t.color);return st(()=>{const o=s0.filterProps(t),a=!!(t.title||n.title);return u.createVNode(s0,u.mergeProps(o,{color:t.bgColor,class:["v-picker",{"v-picker--divided":t.divided,"v-picker--landscape":t.landscape,"v-picker--with-actions":!!n.actions},t.class],style:t.style}),{default:()=>{var s;return[!t.hideHeader&&u.createElementVNode("div",{key:"header",class:u.normalizeClass([r.value]),style:u.normalizeStyle([i.value])},[a&&u.createVNode(Y6,{key:"picker-title"},{default:()=>{var c;return[((c=n.title)==null?void 0:c.call(n))??t.title]}}),n.header&&u.createElementVNode("div",{class:"v-picker__header"},[n.header()])]),u.createElementVNode("div",{class:"v-picker__body"},[(s=n.default)==null?void 0:s.call(n)]),n.actions&&u.createVNode(en,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[u.createElementVNode("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),G6=Re({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...TM(),...OM({weeksInMonth:"static"}),...Sr(_M(),["modelValue"]),...Sr(NM(),["modelValue"]),...UM({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),YM=et()({name:"VDatePicker",props:G6(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0,"update:viewMode":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Hd(),{t:o}=ci(),{rtlClasses:a}=Bi(),s=Lt(t,"modelValue",void 0,z=>Zn(z).map($=>i.date($)),z=>t.multiple?z:z[0]),c=Lt(t,"viewMode"),l=u.computed(()=>{const z=i.date(t.min);return t.min&&i.isValid(z)?z:null}),d=u.computed(()=>{const z=i.date(t.max);return t.max&&i.isValid(z)?z:null}),f=u.computed(()=>{var Y;const z=i.date();let $=z;return(Y=s.value)!=null&&Y[0]?$=i.date(s.value[0]):l.value&&i.isBefore(z,l.value)?$=l.value:d.value&&i.isAfter(z,d.value)&&($=d.value),$&&i.isValid($)?$:z}),b=u.toRef(()=>t.headerColor??t.color),x=Lt(t,"month"),k=u.computed({get:()=>Number(x.value??i.getMonth(i.startOfMonth(f.value))),set:z=>x.value=z}),E=Lt(t,"year"),m=u.computed({get:()=>Number(E.value??i.getYear(i.startOfYear(i.setMonth(f.value,k.value)))),set:z=>E.value=z}),h=u.shallowRef(!1),g=u.computed(()=>t.multiple&&s.value.length>1?o("$vuetify.datePicker.itemsSelected",s.value.length):s.value[0]&&i.isValid(s.value[0])?i.format(i.date(s.value[0]),"normalDateWithWeekday"):o(t.header)),w=u.computed(()=>{let z=i.date();return z=i.setDate(z,1),z=i.setMonth(z,k.value),z=i.setYear(z,m.value),i.format(z,"monthAndYear")}),p=u.toRef(()=>`date-picker-header${h.value?"-reverse":""}-transition`),v=u.computed(()=>{if(t.disabled)return!0;const z=[];if(c.value!=="month")z.push("prev","next");else{let $=i.date();if($=i.startOfMonth($),$=i.setMonth($,k.value),$=i.setYear($,m.value),l.value){const Y=i.addDays(i.startOfMonth($),-1);i.isAfter(l.value,Y)&&z.push("prev")}if(d.value){const Y=i.addDays(i.endOfMonth($),1);i.isAfter(Y,d.value)&&z.push("next")}}return z});function y(z,$){const Y=t.allowedDates;if(typeof Y!="function")return!0;const ae=i.getDiff($,z,"days");for(let K=0;K<ae;K++)if(Y(i.addDays(z,K)))return!0;return!1}function S(z){if(typeof t.allowedDates=="function"){const $=i.parseISO(`${z}-01-01`);return y($,i.endOfYear($))}if(Array.isArray(t.allowedDates)&&t.allowedDates.length){for(const $ of t.allowedDates)if(i.getYear(i.date($))===z)return!0;return!1}return!0}function T(z){if(typeof t.allowedDates=="function"){const $=String(z+1).padStart(2,"0"),Y=i.parseISO(`${m.value}-${$}-01`);return y(Y,i.endOfMonth(Y))}if(Array.isArray(t.allowedDates)&&t.allowedDates.length){for(const $ of t.allowedDates)if(i.getYear(i.date($))===m.value&&i.getMonth(i.date($))===z)return!0;return!1}return!0}function C(){k.value<11?k.value++:(m.value++,k.value=0,j()),R()}function M(){k.value>0?k.value--:(m.value--,k.value=11,j()),R()}function A(){c.value="month"}function P(){c.value=c.value==="months"?"month":"months"}function L(){c.value=c.value==="year"?"month":"year"}function R(){c.value==="months"&&P()}function j(){c.value==="year"&&L()}return u.watch(s,(z,$)=>{const Y=Zn($),ae=Zn(z);if(!ae.length)return;const K=i.date(Y[Y.length-1]),te=i.date(ae[ae.length-1]),G=i.getMonth(te),ue=i.getYear(te);G!==k.value&&(k.value=G,R()),ue!==m.value&&(m.value=ue,j()),h.value=i.isBefore(K,te)}),st(()=>{const z=WM.filterProps(t),$=MM.filterProps(t),Y=IM.filterProps(t),ae=AM.filterProps(t),K=Sr(DM.filterProps(t),["modelValue"]),te=Sr(PM.filterProps(t),["modelValue"]),G={color:b.value,header:g.value,transition:p.value};return u.createVNode(WM,u.mergeProps(z,{color:b.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":t.showWeek},a.value,t.class],style:t.style}),{title:()=>{var ue;return((ue=r.title)==null?void 0:ue.call(r))??u.createElementVNode("div",{class:"v-date-picker__title"},[o(t.title)])},header:()=>r.header?u.createVNode(en,{defaults:{VDatePickerHeader:{...G}}},{default:()=>{var ue;return[(ue=r.header)==null?void 0:ue.call(r,G)]}}):u.createVNode(IM,u.mergeProps({key:"header"},Y,G,{onClick:c.value!=="month"?A:void 0}),{prepend:r.prepend,append:r.append}),default:()=>u.createElementVNode(u.Fragment,null,[u.createVNode(MM,u.mergeProps($,{disabled:v.value,text:w.value,"onClick:next":C,"onClick:prev":M,"onClick:month":P,"onClick:year":L}),null),u.createVNode(Ws,{hideOnLeave:!0},{default:()=>[c.value==="months"?u.createVNode(DM,u.mergeProps({key:"date-picker-months"},K,{modelValue:k.value,"onUpdate:modelValue":[ue=>k.value=ue,R],min:l.value,max:d.value,year:m.value,allowedMonths:T}),{month:r.month}):c.value==="year"?u.createVNode(PM,u.mergeProps({key:"date-picker-years"},te,{modelValue:m.value,"onUpdate:modelValue":[ue=>m.value=ue,j],min:l.value,max:d.value,allowedYears:S}),{year:r.year}):u.createVNode(AM,u.mergeProps({key:"date-picker-month"},ae,{modelValue:s.value,"onUpdate:modelValue":ue=>s.value=ue,month:k.value,"onUpdate:month":[ue=>k.value=ue,R],year:m.value,"onUpdate:year":[ue=>m.value=ue,j],min:l.value,max:d.value}),{day:r.day})]})]),actions:r.actions})}),{}}});function l0(t,e){return{x:t.x+e.x,y:t.y+e.y}}function X6(t,e){return{x:t.x-e.x,y:t.y-e.y}}function GM(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,i=r==="left"?0:r==="center"?e.width/2:r==="right"?e.width:r,o=n==="top"?0:n==="bottom"?e.height:n;return l0({x:i,y:o},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:r}=t,i=n==="left"?0:n==="right"?e.width:n,o=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return l0({x:i,y:o},e)}return l0({x:e.width/2,y:e.height/2},e)}const XM={static:J6,connected:V6},K6=Re({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in XM},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Z6(t,e){const n=u.ref({}),r=u.ref();yr&&wo(()=>!!(e.isActive.value&&t.locationStrategy),s=>{var c,l;u.watch(()=>t.locationStrategy,s),u.onScopeDispose(()=>{window.removeEventListener("resize",i),visualViewport==null||visualViewport.removeEventListener("resize",o),visualViewport==null||visualViewport.removeEventListener("scroll",a),r.value=void 0}),window.addEventListener("resize",i,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",o,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",a,{passive:!0}),typeof t.locationStrategy=="function"?r.value=(c=t.locationStrategy(e,t,n))==null?void 0:c.updateLocation:r.value=(l=XM[t.locationStrategy](e,t,n))==null?void 0:l.updateLocation});function i(s){var c;(c=r.value)==null||c.call(r,s)}function o(s){var c;(c=r.value)==null||c.call(r,s)}function a(s){var c;(c=r.value)==null||c.call(r,s)}return{contentStyles:n,updateLocation:r}}function J6(){}function Q6(t,e){const n=zb(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function V6(t,e,n){(Array.isArray(t.target.value)||X8(t.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:o}=Nb(()=>{const h=Bb(e.location,t.isRtl.value),g=e.origin==="overlap"?h:e.origin==="auto"?Fb(h):Bb(e.origin,t.isRtl.value);return h.side===g.side&&h.align===Hb(g).align?{preferredAnchor:IT(h),preferredOrigin:IT(g)}:{preferredAnchor:h,preferredOrigin:g}}),[a,s,c,l]=["minWidth","minHeight","maxWidth","maxHeight"].map(h=>u.computed(()=>{const g=parseFloat(e[h]);return isNaN(g)?1/0:g})),d=u.computed(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const h=e.offset.split(" ").map(parseFloat);return h.length<2&&h.push(0),h}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let f=!1,b=-1;const x=new ST(4),k=new ResizeObserver(()=>{if(!f)return;if(requestAnimationFrame(g=>{g!==b&&x.clear(),requestAnimationFrame(w=>{b=w})}),x.isFull){const g=x.values();if(Ri(g.at(-1),g.at(-3))&&!Ri(g.at(-1),g.at(-2)))return}const h=m();h&&x.push(h.flipped)});u.watch([t.target,t.contentEl],(h,g)=>{let[w,p]=h,[v,y]=g;v&&!Array.isArray(v)&&k.unobserve(v),w&&!Array.isArray(w)&&k.observe(w),y&&k.unobserve(y),p&&k.observe(p)},{immediate:!0}),u.onScopeDispose(()=>{k.disconnect()});let E=new wa({x:0,y:0,width:0,height:0});function m(){if(f=!1,requestAnimationFrame(()=>f=!0),!t.target.value||!t.contentEl.value)return;(Array.isArray(t.target.value)||t.target.value.offsetParent||t.target.value.getClientRects().length)&&(E=_T(t.target.value));const h=Q6(t.contentEl.value,t.isRtl.value),g=lp(t.contentEl.value),w=12;g.length||(g.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(h.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),h.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const p=g.reduce((L,R)=>{const j=C8(R);return L?new wa({x:Math.max(L.left,j.left),y:Math.max(L.top,j.top),width:Math.min(L.right,j.right)-Math.max(L.left,j.left),height:Math.min(L.bottom,j.bottom)-Math.max(L.top,j.top)}):j},void 0);p.x+=w,p.y+=w,p.width-=w*2,p.height-=w*2;let v={anchor:i.value,origin:o.value};function y(L){const R=new wa(h),j=GM(L.anchor,E),z=GM(L.origin,R);let{x:$,y:Y}=X6(j,z);switch(L.anchor.side){case"top":Y-=d.value[0];break;case"bottom":Y+=d.value[0];break;case"left":$-=d.value[0];break;case"right":$+=d.value[0];break}switch(L.anchor.align){case"top":Y-=d.value[1];break;case"bottom":Y+=d.value[1];break;case"left":$-=d.value[1];break;case"right":$+=d.value[1];break}return R.x+=$,R.y+=Y,R.width=Math.min(R.width,c.value),R.height=Math.min(R.height,l.value),{overflows:AT(R,p),x:$,y:Y}}let S=0,T=0;const C={x:0,y:0},M={x:!1,y:!1};let A=-1;for(;;){if(A++>10){$b("Infinite loop detected in connectedLocationStrategy");break}const{x:L,y:R,overflows:j}=y(v);S+=L,T+=R,h.x+=L,h.y+=R;{const z=OT(v.anchor),$=j.x.before||j.x.after,Y=j.y.before||j.y.after;let ae=!1;if(["x","y"].forEach(K=>{if(K==="x"&&$&&!M.x||K==="y"&&Y&&!M.y){const te={anchor:{...v.anchor},origin:{...v.origin}},G=K==="x"?z==="y"?Hb:Fb:z==="y"?Fb:Hb;te.anchor=G(te.anchor),te.origin=G(te.origin);const{overflows:ue}=y(te);(ue[K].before<=j[K].before&&ue[K].after<=j[K].after||ue[K].before+ue[K].after<(j[K].before+j[K].after)/2)&&(v=te,ae=M[K]=!0)}}),ae)continue}j.x.before&&(S+=j.x.before,h.x+=j.x.before),j.x.after&&(S-=j.x.after,h.x-=j.x.after),j.y.before&&(T+=j.y.before,h.y+=j.y.before),j.y.after&&(T-=j.y.after,h.y-=j.y.after);{const z=AT(h,p);C.x=p.width-z.x.before-z.x.after,C.y=p.height-z.y.before-z.y.after,S+=z.x.before,h.x+=z.x.before,T+=z.y.before,h.y+=z.y.before}break}const P=OT(v.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${v.anchor.side} ${v.anchor.align}`,transformOrigin:`${v.origin.side} ${v.origin.align}`,top:gt(c0(T)),left:t.isRtl.value?void 0:gt(c0(S)),right:t.isRtl.value?gt(c0(-S)):void 0,minWidth:gt(P==="y"?Math.min(a.value,E.width):a.value),maxWidth:gt(KM(Rr(C.x,a.value===1/0?0:a.value,c.value))),maxHeight:gt(KM(Rr(C.y,s.value===1/0?0:s.value,l.value)))}),{available:C,contentBox:h,flipped:M}}return u.watch(()=>[i.value,o.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>m()),u.nextTick(()=>{const h=m();if(!h)return;const{available:g,contentBox:w}=h;w.height>g.y&&requestAnimationFrame(()=>{m(),requestAnimationFrame(()=>{m()})})}),{updateLocation:m}}function c0(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function KM(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let u0=!0;const wp=[];function q6(t){!u0||wp.length?(wp.push(t),d0()):(u0=!1,t(),d0())}let ZM=-1;function d0(){cancelAnimationFrame(ZM),ZM=requestAnimationFrame(()=>{const t=wp.shift();t&&t(),wp.length?d0():u0=!0})}const xp={none:null,close:n9,block:r9,reposition:i9},e9=Re({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in xp}},"VOverlay-scroll-strategies");function t9(t,e){if(!yr)return;let n;u.watchEffect(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=u.effectScope(),await new Promise(r=>setTimeout(r)),n.active&&n.run(()=>{var r;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(r=xp[t.scrollStrategy])==null||r.call(xp,e,t,n)}))}),u.onScopeDispose(()=>{n==null||n.stop()})}function n9(t){function e(n){t.isActive.value=!1}JM(t.targetEl.value??t.contentEl.value,e)}function r9(t,e){var a;const n=(a=t.root.value)==null?void 0:a.offsetParent,r=[...new Set([...lp(t.targetEl.value,e.contained?n:void 0),...lp(t.contentEl.value,e.contained?n:void 0)])].filter(s=>!s.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,o=(s=>Yb(s)&&s)(n||document.documentElement);o&&t.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((s,c)=>{s.style.setProperty("--v-body-scroll-x",gt(-s.scrollLeft)),s.style.setProperty("--v-body-scroll-y",gt(-s.scrollTop)),s!==document.documentElement&&s.style.setProperty("--v-scrollbar-offset",gt(i)),s.classList.add("v-overlay-scroll-blocked")}),u.onScopeDispose(()=>{r.forEach((s,c)=>{const l=parseFloat(s.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(s.style.getPropertyValue("--v-body-scroll-y")),f=s.style.scrollBehavior;s.style.scrollBehavior="auto",s.style.removeProperty("--v-body-scroll-x"),s.style.removeProperty("--v-body-scroll-y"),s.style.removeProperty("--v-scrollbar-offset"),s.classList.remove("v-overlay-scroll-blocked"),s.scrollLeft=-l,s.scrollTop=-d,s.style.scrollBehavior=f}),o&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function i9(t,e,n){let r=!1,i=-1,o=-1;function a(s){q6(()=>{var d,f;const c=performance.now();(f=(d=t.updateLocation).value)==null||f.call(d,s),r=(performance.now()-c)/(1e3/60)>2})}o=(typeof requestIdleCallback>"u"?s=>s():requestIdleCallback)(()=>{n.run(()=>{JM(t.targetEl.value??t.contentEl.value,s=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{a(s)})})):a(s)})})}),u.onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(o),cancelAnimationFrame(i)})}function JM(t,e){const n=[document,...lp(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),u.onScopeDispose(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}const f0=Symbol.for("vuetify:v-menu"),QM=Re({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function VM(t,e){let n=()=>{};function r(a){n==null||n();const s=Number(a?t.openDelay:t.closeDelay);return new Promise(c=>{n=g8(s,()=>{e==null||e(a),c(a)})})}function i(){return r(!0)}function o(){return r(!1)}return{clearDelay:n,runOpenDelay:i,runCloseDelay:o}}const o9=Re({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...QM()},"VOverlay-activator");function a9(t,e){let{isActive:n,isTop:r,contentEl:i}=e;const o=rr("useActivator"),a=u.ref();let s=!1,c=!1,l=!0;const d=u.computed(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),f=u.computed(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!d.value),{runOpenDelay:b,runCloseDelay:x}=VM(t,T=>{T===(t.openOnHover&&s||d.value&&c)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value!==T&&(l=!0),n.value=T)}),k=u.ref(),E={onClick:T=>{T.stopPropagation(),a.value=T.currentTarget||T.target,n.value||(k.value=[T.clientX,T.clientY]),n.value=!n.value},onMouseenter:T=>{var C;(C=T.sourceCapabilities)!=null&&C.firesTouchEvents||(s=!0,a.value=T.currentTarget||T.target,b())},onMouseleave:T=>{s=!1,x()},onFocus:T=>{eu(T.target,":focus-visible")!==!1&&(c=!0,T.stopPropagation(),a.value=T.currentTarget||T.target,b())},onBlur:T=>{c=!1,T.stopPropagation(),x()}},m=u.computed(()=>{const T={};return f.value&&(T.onClick=E.onClick),t.openOnHover&&(T.onMouseenter=E.onMouseenter,T.onMouseleave=E.onMouseleave),d.value&&(T.onFocus=E.onFocus,T.onBlur=E.onBlur),T}),h=u.computed(()=>{const T={};if(t.openOnHover&&(T.onMouseenter=()=>{s=!0,b()},T.onMouseleave=()=>{s=!1,x()}),d.value&&(T.onFocusin=()=>{c=!0,b()},T.onFocusout=()=>{c=!1,x()}),t.closeOnContentClick){const C=u.inject(f0,null);T.onClick=()=>{n.value=!1,C==null||C.closeParents()}}return T}),g=u.computed(()=>{const T={};return t.openOnHover&&(T.onMouseenter=()=>{l&&(s=!0,l=!1,b())},T.onMouseleave=()=>{s=!1,x()}),T});u.watch(r,T=>{var C;T&&(t.openOnHover&&!s&&(!d.value||!c)||d.value&&!c&&(!t.openOnHover||!s))&&!((C=i.value)!=null&&C.contains(document.activeElement))&&(n.value=!1)}),u.watch(n,T=>{T||setTimeout(()=>{k.value=void 0})},{flush:"post"});const w=np();u.watchEffect(()=>{w.value&&u.nextTick(()=>{a.value=w.el})});const p=np(),v=u.computed(()=>t.target==="cursor"&&k.value?k.value:p.value?p.el:qM(t.target,o)||a.value),y=u.computed(()=>Array.isArray(v.value)?void 0:v.value);let S;return u.watch(()=>!!t.activator,T=>{T&&yr?(S=u.effectScope(),S.run(()=>{s9(t,o,{activatorEl:a,activatorEvents:m})})):S&&S.stop()},{flush:"post",immediate:!0}),u.onScopeDispose(()=>{S==null||S.stop()}),{activatorEl:a,activatorRef:w,target:v,targetEl:y,targetRef:p,activatorEvents:m,contentEvents:h,scrimEvents:g}}function s9(t,e,n){let{activatorEl:r,activatorEvents:i}=n;u.watch(()=>t.activator,(c,l)=>{if(l&&c!==l){const d=s(l);d&&a(d)}c&&u.nextTick(()=>o())},{immediate:!0}),u.watch(()=>t.activatorProps,()=>{o()}),u.onScopeDispose(()=>{a()});function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&S8(c,u.mergeProps(i.value,l))}function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&k8(c,u.mergeProps(i.value,l))}function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator;const l=qM(c,e);return r.value=(l==null?void 0:l.nodeType)===Node.ELEMENT_NODE?l:void 0,r.value}}function qM(t,e){var r,i;if(!t)return;let n;if(t==="parent"){let o=(i=(r=e==null?void 0:e.proxy)==null?void 0:r.$el)==null?void 0:i.parentNode;for(;o!=null&&o.hasAttribute("data-no-activator");)o=o.parentNode;n=o}else typeof t=="string"?n=document.querySelector(t):"$el"in t?n=t.$el:n=t;return n}function l9(){if(!yr)return u.shallowRef(!1);const{ssr:t}=Us();if(t){const e=u.shallowRef(!1);return u.onMounted(()=>{e.value=!0}),e}else return u.shallowRef(!0)}const eI=Re({eager:Boolean},"lazy");function tI(t,e){const n=u.shallowRef(!1),r=u.toRef(()=>n.value||t.eager||e.value);u.watch(e,()=>n.value=!0);function i(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:i}}function ql(){const e=rr("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const nI=Symbol.for("vuetify:stack"),zd=u.reactive([]);function c9(t,e,n){const r=rr("useStack"),i=!n,o=u.inject(nI,void 0),a=u.reactive({activeChildren:new Set});u.provide(nI,a);const s=u.shallowRef(Number(u.toValue(e)));wo(t,()=>{var f;const d=(f=zd.at(-1))==null?void 0:f[1];s.value=d?d+10:Number(u.toValue(e)),i&&zd.push([r.uid,s.value]),o==null||o.activeChildren.add(r.uid),u.onScopeDispose(()=>{if(i){const b=u.toRaw(zd).findIndex(x=>x[0]===r.uid);zd.splice(b,1)}o==null||o.activeChildren.delete(r.uid)})});const c=u.shallowRef(!0);i&&u.watchEffect(()=>{var f;const d=((f=zd.at(-1))==null?void 0:f[0])===r.uid;setTimeout(()=>c.value=d)});const l=u.toRef(()=>!a.activeChildren.size);return{globalTop:u.readonly(c),localTop:l,stackStyles:u.toRef(()=>({zIndex:s.value}))}}function u9(t){return{teleportTarget:u.computed(()=>{const n=t();if(n===!0||!yr)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null){u.warn(`Unable to locate target ${n}`);return}let i=[...r.children].find(o=>o.matches(".v-overlay-container"));return i||(i=document.createElement("div"),i.className="v-overlay-container",r.appendChild(i)),i})}}function d9(){return!0}function rI(t,e,n){if(!t||iI(t,n)===!1)return!1;const r=zT(e);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const i=(typeof n.value=="object"&&n.value.include||(()=>[]))();return i.push(e),!i.some(o=>o==null?void 0:o.contains(t.target))}function iI(t,e){return(typeof e.value=="object"&&e.value.closeConditional||d9)(t)}function f9(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;t.shadowTarget=t.target,e._clickOutside.lastMousedownWasOutside&&rI(t,e,n)&&setTimeout(()=>{iI(t,n)&&r&&r(t)},0)}function oI(t,e){const n=zT(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const aI={mounted(t,e){const n=i=>f9(i,t,e),r=i=>{t._clickOutside.lastMousedownWasOutside=rI(i,t,e)};oI(t,i=>{i.addEventListener("click",n,!0),i.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},beforeUnmount(t,e){t._clickOutside&&(oI(t,n=>{var o;if(!n||!((o=t._clickOutside)!=null&&o[e.instance.$.uid]))return;const{onClick:r,onMousedown:i}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete t._clickOutside[e.instance.$.uid])}};function h9(t){const{modelValue:e,color:n,...r}=t;return u.createVNode(u.Transition,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&u.createElementVNode("div",u.mergeProps({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const $d=Re({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...o9(),...Ot(),...Uo(),...eI(),...K6(),...e9(),...wn(),...ou()},"VOverlay"),Ea=et()({name:"VOverlay",directives:{vClickOutside:aI},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...$d()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,keydown:t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:i}=e;const o=rr("VOverlay"),a=u.ref(),s=u.ref(),c=u.ref(),l=Lt(t,"modelValue"),d=u.computed({get:()=>l.value,set:ce=>{ce&&t.disabled||(l.value=ce)}}),{themeClasses:f}=Jn(t),{rtlClasses:b,isRtl:x}=Bi(),{hasContent:k,onAfterLeave:E}=tI(t,d),m=li(()=>typeof t.scrim=="string"?t.scrim:null),{globalTop:h,localTop:g,stackStyles:w}=c9(d,()=>t.zIndex,t._disableGlobalStack),{activatorEl:p,activatorRef:v,target:y,targetEl:S,targetRef:T,activatorEvents:C,contentEvents:M,scrimEvents:A}=a9(t,{isActive:d,isTop:g,contentEl:c}),{teleportTarget:P}=u9(()=>{var ne,Q,Z;const ce=t.attach||t.contained;if(ce)return ce;const V=((ne=p==null?void 0:p.value)==null?void 0:ne.getRootNode())||((Z=(Q=o.proxy)==null?void 0:Q.$el)==null?void 0:Z.getRootNode());return V instanceof ShadowRoot?V:!1}),{dimensionStyles:L}=Wo(t),R=l9(),{scopeId:j}=ql();u.watch(()=>t.disabled,ce=>{ce&&(d.value=!1)});const{contentStyles:z,updateLocation:$}=Z6(t,{isRtl:x,contentEl:c,target:y,isActive:d});t9(t,{root:a,contentEl:c,targetEl:S,isActive:d,updateLocation:$});function Y(ce){i("click:outside",ce),t.persistent?J():d.value=!1}function ae(ce){return d.value&&h.value&&(!t.scrim||ce.target===s.value||ce instanceof MouseEvent&&ce.shadowTarget===s.value)}yr&&u.watch(d,ce=>{ce?window.addEventListener("keydown",K):window.removeEventListener("keydown",K)},{immediate:!0}),u.onBeforeUnmount(()=>{yr&&window.removeEventListener("keydown",K)});function K(ce){var V,ne,Q;ce.key==="Escape"&&h.value&&((V=c.value)!=null&&V.contains(document.activeElement)||i("keydown",ce),t.persistent?J():(d.value=!1,(ne=c.value)!=null&&ne.contains(document.activeElement)&&((Q=p.value)==null||Q.focus())))}function te(ce){ce.key==="Escape"&&!h.value||i("keydown",ce)}const G=VT();wo(()=>t.closeOnBack,()=>{u6(G,ce=>{h.value&&d.value?(ce(!1),t.persistent?J():d.value=!1):ce()})});const ue=u.ref();u.watch(()=>d.value&&(t.absolute||t.contained)&&P.value==null,ce=>{if(ce){const V=UT(a.value);V&&V!==document.scrollingElement&&(ue.value=V.scrollTop)}});function J(){t.noClickAnimation||c.value&&Zl(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Ad})}function be(){i("afterEnter")}function de(){E(),i("afterLeave")}return st(()=>{var ce;return u.createElementVNode(u.Fragment,null,[(ce=n.activator)==null?void 0:ce.call(n,{isActive:d.value,targetRef:T,props:u.mergeProps({ref:v},C.value,t.activatorProps)}),R.value&&k.value&&u.createVNode(u.Teleport,{disabled:!P.value,to:P.value},{default:()=>[u.createElementVNode("div",u.mergeProps({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":d.value,"v-overlay--contained":t.contained},f.value,b.value,t.class],style:[w.value,{"--v-overlay-opacity":t.opacity,top:gt(ue.value)},t.style],ref:a,onKeydown:te},j,r),[u.createVNode(h9,u.mergeProps({color:m,modelValue:d.value&&!!t.scrim,ref:s},A.value),null),u.createVNode(Yo,{appear:!0,persisted:!0,transition:t.transition,target:y.value,onAfterEnter:be,onAfterLeave:de},{default:()=>{var V;return[u.withDirectives(u.createElementVNode("div",u.mergeProps({ref:c,class:["v-overlay__content",t.contentClass],style:[L.value,z.value]},M.value,t.contentProps),[(V=n.default)==null?void 0:V.call(n,{isActive:d})]),[[u.vShow,d.value],[aI,{handler:Y,closeConditional:ae,include:()=>[p.value]}]])]}})])]})])}),{activatorEl:p,scrimEl:s,target:y,animateClick:J,contentEl:c,globalTop:h,localTop:g,updateLocation:$}}}),h0=Symbol("Forwarded refs");function p0(t,e){let n=t;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function qi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t[h0]=n,new Proxy(t,{get(i,o){if(Reflect.has(i,o))return Reflect.get(i,o);if(!(typeof o=="symbol"||o.startsWith("$")||o.startsWith("__"))){for(const a of n)if(a.value&&Reflect.has(a.value,o)){const s=Reflect.get(a.value,o);return typeof s=="function"?s.bind(a.value):s}}},has(i,o){if(Reflect.has(i,o))return!0;if(typeof o=="symbol"||o.startsWith("$")||o.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,o))return!0;return!1},set(i,o,a){if(Reflect.has(i,o))return Reflect.set(i,o,a);if(typeof o=="symbol"||o.startsWith("$")||o.startsWith("__"))return!1;for(const s of n)if(s.value&&Reflect.has(s.value,o))return Reflect.set(s.value,o,a);return!1},getOwnPropertyDescriptor(i,o){var s;const a=Reflect.getOwnPropertyDescriptor(i,o);if(a)return a;if(!(typeof o=="symbol"||o.startsWith("$")||o.startsWith("__"))){for(const c of n){if(!c.value)continue;const l=p0(c.value,o)??("_"in c.value?p0((s=c.value._)==null?void 0:s.setupState,o):void 0);if(l)return l}for(const c of n){const l=c.value&&c.value[h0];if(!l)continue;const d=l.slice();for(;d.length;){const f=d.shift(),b=p0(f.value,o);if(b)return b;const x=f.value&&f.value[h0];x&&d.push(...x)}}}}})}const p9=Re({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...$d({origin:"center center",scrollStrategy:"block",transition:{component:a0},zIndex:2400})},"VDialog"),eo=et()({name:"VDialog",props:p9(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Lt(t,"modelValue"),{scopeId:o}=ql(),a=u.ref();function s(d){var x,k;const f=d.relatedTarget,b=d.target;if(f!==b&&((x=a.value)!=null&&x.contentEl)&&((k=a.value)!=null&&k.globalTop)&&![document,a.value.contentEl].includes(b)&&!a.value.contentEl.contains(b)){const E=kd(a.value.contentEl);if(!E.length)return;const m=E[0],h=E[E.length-1];f===m?h.focus():m.focus()}}u.onBeforeUnmount(()=>{document.removeEventListener("focusin",s)}),yr&&u.watch(()=>i.value&&t.retainFocus,d=>{d?document.addEventListener("focusin",s):document.removeEventListener("focusin",s)},{immediate:!0});function c(){var d;n("afterEnter"),(t.scrim||t.retainFocus)&&((d=a.value)!=null&&d.contentEl)&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function l(){n("afterLeave")}return u.watch(i,async d=>{var f;d||(await u.nextTick(),(f=a.value.activatorEl)==null||f.focus({preventScroll:!0}))}),st(()=>{const d=Ea.filterProps(t),f=u.mergeProps({"aria-haspopup":"dialog"},t.activatorProps),b=u.mergeProps({tabindex:-1},t.contentProps);return u.createVNode(Ea,u.mergeProps({ref:a,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},d,{modelValue:i.value,"onUpdate:modelValue":x=>i.value=x,"aria-modal":"true",activatorProps:f,contentProps:b,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:l},o),{activator:r.activator,default:function(){for(var x=arguments.length,k=new Array(x),E=0;E<x;E++)k[E]=arguments[E];return u.createVNode(en,{root:"VDialog"},{default:()=>{var m;return[(m=r.default)==null?void 0:m.call(r,...k)]}})}})}),qi({},a)}}),m9=Re({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ot(),...ou({transition:{component:FM}})},"VCounter"),m0=et()({name:"VCounter",functional:!0,props:m9(),setup(t,e){let{slots:n}=e;const r=u.toRef(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return st(()=>u.createVNode(Yo,{transition:t.transition},{default:()=>[u.withDirectives(u.createElementVNode("div",{class:u.normalizeClass(["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class]),style:u.normalizeStyle(t.style)},[n.default?n.default({counter:r.value,max:t.max,value:t.value}):r.value]),[[u.vShow,t.active]])]})),{}}}),g9=Re({text:String,onClick:Br(),...Ot(),...wn()},"VLabel"),sI=et()({name:"VLabel",props:g9(),setup(t,e){let{slots:n}=e;return st(()=>{var r;return u.createElementVNode("label",{class:u.normalizeClass(["v-label",{"v-label--clickable":!!t.onClick},t.class]),style:u.normalizeStyle(t.style),onClick:t.onClick},[t.text,(r=n.default)==null?void 0:r.call(n)])}),{}}}),v9=Re({floating:Boolean,...Ot()},"VFieldLabel"),Cp=et()({name:"VFieldLabel",props:v9(),setup(t,e){let{slots:n}=e;return st(()=>u.createVNode(sI,{class:u.normalizeClass(["v-field-label",{"v-field-label--floating":t.floating},t.class]),style:u.normalizeStyle(t.style)},n)),{}}});function lI(t){const{t:e}=ci();function n(r){let{name:i,color:o,...a}=r;const s={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],c=t[`onClick:${i}`];function l(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),f.stopPropagation(),ep(c,new PointerEvent("click",f)))}const d=c&&s?e(`$vuetify.input.${s}`,t.label??""):void 0;return u.createVNode(_t,u.mergeProps({icon:t[`${i}Icon`],"aria-label":d,onClick:c,onKeydown:l,color:o},a),null)}return{InputIcon:n}}const cI=Re({focused:Boolean,"onUpdate:focused":Br()},"focus");function Ud(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa();const n=Lt(t,"focused"),r=u.toRef(()=>({[`${e}--focused`]:n.value}));function i(){n.value=!0}function o(){n.value=!1}return{focusClasses:r,isFocused:n,focus:i,blur:o}}const y9=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Sp=Re({appendInnerIcon:jt,bgColor:String,clearable:Boolean,clearIcon:{type:jt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:jt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>y9.includes(t)},"onClick:clear":Br(),"onClick:appendInner":Br(),"onClick:prependInner":Br(),...Ot(),...dp(),...si(),...wn()},"VField"),au=et()({name:"VField",inheritAttrs:!1,props:{id:String,...cI(),...Sp()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{themeClasses:o}=Jn(t),{loaderClasses:a}=fp(t),{focusClasses:s,isFocused:c,focus:l,blur:d}=Ud(t),{InputIcon:f}=lI(t),{roundedClasses:b}=Si(t),{rtlClasses:x}=Bi(),k=u.toRef(()=>t.dirty||t.active),E=u.toRef(()=>!!(t.label||i.label)),m=u.toRef(()=>!t.singleLine&&E.value),h=u.useId(),g=u.computed(()=>t.id||`input-${h}`),w=u.toRef(()=>t.details?`${g.value}-messages`:void 0),p=u.ref(),v=u.ref(),y=u.ref(),S=u.computed(()=>["plain","underlined"].includes(t.variant)),T=u.computed(()=>t.error||t.disabled?void 0:k.value&&c.value?t.color:t.baseColor),C=u.computed(()=>{if(!(!t.iconColor||t.glow&&!c.value))return t.iconColor===!0?T.value:t.iconColor}),{backgroundColorClasses:M,backgroundColorStyles:A}=li(()=>t.bgColor),{textColorClasses:P,textColorStyles:L}=Ji(T);u.watch(k,z=>{if(m.value){const $=p.value.$el,Y=v.value.$el;requestAnimationFrame(()=>{const ae=zb($),K=Y.getBoundingClientRect(),te=K.x-ae.x,G=K.y-ae.y-(ae.height/2-K.height/2),ue=K.width/.75,J=Math.abs(ue-ae.width)>1?{maxWidth:gt(ue)}:void 0,be=getComputedStyle($),de=getComputedStyle(Y),ce=parseFloat(be.transitionDuration)*1e3||150,V=parseFloat(de.getPropertyValue("--v-field-label-scale")),ne=de.getPropertyValue("color");$.style.visibility="visible",Y.style.visibility="hidden",Zl($,{transform:`translate(${te}px, ${G}px) scale(${V})`,color:ne,...J},{duration:ce,easing:Ad,direction:z?"normal":"reverse"}).finished.then(()=>{$.style.removeProperty("visibility"),Y.style.removeProperty("visibility")})})}},{flush:"post"});const R=u.computed(()=>({isActive:k,isFocused:c,controlRef:y,blur:d,focus:l}));function j(z){z.target!==document.activeElement&&z.preventDefault()}return st(()=>{var te,G,ue;const z=t.variant==="outlined",$=!!(i["prepend-inner"]||t.prependInnerIcon),Y=!!(t.clearable||i.clear)&&!t.disabled,ae=!!(i["append-inner"]||t.appendInnerIcon||Y),K=()=>i.label?i.label({...R.value,label:t.label,props:{for:g.value}}):t.label;return u.createElementVNode("div",u.mergeProps({class:["v-field",{"v-field--active":k.value,"v-field--appended":ae,"v-field--center-affix":t.centerAffix??!S.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--glow":t.glow,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":$,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!K(),[`v-field--variant-${t.variant}`]:!0},o.value,M.value,s.value,a.value,b.value,x.value,t.class],style:[A.value,t.style],onClick:j},n),[u.createElementVNode("div",{class:"v-field__overlay"},null),u.createVNode(Vb,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:i.loader}),$&&u.createElementVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&u.createVNode(f,{key:"prepend-icon",name:"prependInner",color:C.value},null),(te=i["prepend-inner"])==null?void 0:te.call(i,R.value)]),u.createElementVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&m.value&&u.createVNode(Cp,{key:"floating-label",ref:v,class:u.normalizeClass([P.value]),floating:!0,for:g.value,"aria-hidden":!k.value,style:u.normalizeStyle(L.value)},{default:()=>[K()]}),E.value&&u.createVNode(Cp,{key:"label",ref:p,for:g.value},{default:()=>[K()]}),((G=i.default)==null?void 0:G.call(i,{...R.value,props:{id:g.value,class:"v-field__input","aria-describedby":w.value},focus:l,blur:d}))??u.createElementVNode("div",{id:g.value,class:"v-field__input","aria-describedby":w.value},null)]),Y&&u.createVNode(zM,{key:"clear"},{default:()=>[u.withDirectives(u.createElementVNode("div",{class:"v-field__clearable",onMousedown:J=>{J.preventDefault(),J.stopPropagation()}},[u.createVNode(en,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[i.clear?i.clear({...R.value,props:{onFocus:l,onBlur:d,onClick:t["onClick:clear"],tabindex:-1}}):u.createVNode(f,{name:"clear",onFocus:l,onBlur:d,tabindex:-1},null)]})]),[[u.vShow,t.dirty]])]}),ae&&u.createElementVNode("div",{key:"append",class:"v-field__append-inner"},[(ue=i["append-inner"])==null?void 0:ue.call(i,R.value),t.appendInnerIcon&&u.createVNode(f,{key:"append-icon",name:"appendInner",color:C.value},null)]),u.createElementVNode("div",{class:u.normalizeClass(["v-field__outline",P.value]),style:u.normalizeStyle(L.value)},[z&&u.createElementVNode(u.Fragment,null,[u.createElementVNode("div",{class:"v-field__outline__start"},null),m.value&&u.createElementVNode("div",{class:"v-field__outline__notch"},[u.createVNode(Cp,{ref:v,floating:!0,for:g.value,"aria-hidden":!k.value},{default:()=>[K()]})]),u.createElementVNode("div",{class:"v-field__outline__end"},null)]),S.value&&m.value&&u.createVNode(Cp,{ref:v,floating:!0,for:g.value,"aria-hidden":!k.value},{default:()=>[K()]})])])}),{controlRef:y,fieldIconColor:C}}}),b9=Re({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ot(),...ou({transition:{component:FM,leaveAbsolute:!0,group:!0}})},"VMessages"),uI=et()({name:"VMessages",props:b9(),setup(t,e){let{slots:n}=e;const r=u.computed(()=>Zn(t.messages)),{textColorClasses:i,textColorStyles:o}=Ji(()=>t.color);return st(()=>u.createVNode(Yo,{transition:t.transition,tag:"div",class:u.normalizeClass(["v-messages",i.value,t.class]),style:u.normalizeStyle([o.value,t.style])},{default:()=>[t.active&&r.value.map((a,s)=>u.createElementVNode("div",{class:"v-messages__message",key:`${s}-${r.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),dI=Symbol.for("vuetify:form"),w9=Re({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function x9(t){const e=Lt(t,"modelValue"),n=u.toRef(()=>t.disabled),r=u.toRef(()=>t.readonly),i=u.shallowRef(!1),o=u.ref([]),a=u.ref([]);async function s(){const d=[];let f=!0;a.value=[],i.value=!0;for(const b of o.value){const x=await b.validate();if(x.length>0&&(f=!1,d.push({id:b.id,errorMessages:x})),!f&&t.fastFail)break}return a.value=d,i.value=!1,{valid:f,errors:a.value}}function c(){o.value.forEach(d=>d.reset())}function l(){o.value.forEach(d=>d.resetValidation())}return u.watch(o,()=>{let d=0,f=0;const b=[];for(const x of o.value)x.isValid===!1?(f++,b.push({id:x.id,errorMessages:x.errorMessages})):x.isValid===!0&&d++;a.value=b,e.value=f>0?!1:d===o.value.length?!0:null},{deep:!0,flush:"post"}),u.provide(dI,{register:d=>{let{id:f,vm:b,validate:x,reset:k,resetValidation:E}=d;o.value.some(m=>m.id===f)&&$s(`Duplicate input name "${f}"`),o.value.push({id:f,validate:x,reset:k,resetValidation:E,vm:u.markRaw(b),isValid:null,errorMessages:[]})},unregister:d=>{o.value=o.value.filter(f=>f.id!==d)},update:(d,f,b)=>{const x=o.value.find(k=>k.id===d);x&&(x.isValid=f,x.errorMessages=b)},isDisabled:n,isReadonly:r,isValidating:i,isValid:e,items:o,validateOn:u.toRef(()=>t.validateOn)}),{errors:a,isDisabled:n,isReadonly:r,isValidating:i,isValid:e,items:o,validate:s,reset:c,resetValidation:l}}function kp(t){const e=u.inject(dI,null);return{...e,isReadonly:u.computed(()=>!!((t==null?void 0:t.readonly)??(e==null?void 0:e.isReadonly.value))),isDisabled:u.computed(()=>!!((t==null?void 0:t.disabled)??(e==null?void 0:e.isDisabled.value)))}}const C9=Symbol.for("vuetify:rules");function S9(t){const e=u.inject(C9,null);return e?e(t):u.toRef(t)}const k9=Re({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...cI()},"validation");function E9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.useId();const r=Lt(t,"modelValue"),i=u.computed(()=>t.validationValue===void 0?r.value:t.validationValue),o=kp(t),a=S9(()=>t.rules),s=u.ref([]),c=u.shallowRef(!0),l=u.computed(()=>!!(Zn(r.value===""?null:r.value).length||Zn(i.value===""?null:i.value).length)),d=u.computed(()=>{var p;return(p=t.errorMessages)!=null&&p.length?Zn(t.errorMessages).concat(s.value).slice(0,Math.max(0,Number(t.maxErrors))):s.value}),f=u.computed(()=>{var y;let p=(t.validateOn??((y=o.validateOn)==null?void 0:y.value))||"input";p==="lazy"&&(p="input lazy"),p==="eager"&&(p="input eager");const v=new Set((p==null?void 0:p.split(" "))??[]);return{input:v.has("input"),blur:v.has("blur")||v.has("input")||v.has("invalid-input"),invalidInput:v.has("invalid-input"),lazy:v.has("lazy"),eager:v.has("eager")}}),b=u.computed(()=>{var p;return t.error||(p=t.errorMessages)!=null&&p.length?!1:t.rules.length?c.value?s.value.length||f.value.lazy?null:!0:!s.value.length:!0}),x=u.shallowRef(!1),k=u.computed(()=>({[`${e}--error`]:b.value===!1,[`${e}--dirty`]:l.value,[`${e}--disabled`]:o.isDisabled.value,[`${e}--readonly`]:o.isReadonly.value})),E=rr("validation"),m=u.computed(()=>t.name??u.unref(n));u.onBeforeMount(()=>{var p;(p=o.register)==null||p.call(o,{id:m.value,vm:E,validate:w,reset:h,resetValidation:g})}),u.onBeforeUnmount(()=>{var p;(p=o.unregister)==null||p.call(o,m.value)}),u.onMounted(async()=>{var p;f.value.lazy||await w(!f.value.eager),(p=o.update)==null||p.call(o,m.value,b.value,d.value)}),wo(()=>f.value.input||f.value.invalidInput&&b.value===!1,()=>{u.watch(i,()=>{if(i.value!=null)w();else if(t.focused){const p=u.watch(()=>t.focused,v=>{v||w(),p()})}})}),wo(()=>f.value.blur,()=>{u.watch(()=>t.focused,p=>{p||w()})}),u.watch([b,d],()=>{var p;(p=o.update)==null||p.call(o,m.value,b.value,d.value)});async function h(){r.value=null,await u.nextTick(),await g()}async function g(){c.value=!0,f.value.lazy?s.value=[]:await w(!f.value.eager)}async function w(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const v=[];x.value=!0;for(const y of a.value){if(v.length>=Number(t.maxErrors??1))break;const T=await(typeof y=="function"?y:()=>y)(i.value);if(T!==!0){if(T!==!1&&typeof T!="string"){console.warn(`${T} is not a valid value. Rule functions must return boolean true or a string.`);continue}v.push(T||"")}}return s.value=v,x.value=!1,c.value=p,s.value}return{errorMessages:d,isDirty:l,isDisabled:o.isDisabled,isReadonly:o.isReadonly,isPristine:c,isValid:b,isValidating:x,reset:h,resetValidation:g,validate:w,validationClasses:k}}const Wd=Re({id:String,appendIcon:jt,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:jt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":Br(),"onClick:append":Br(),...Ot(),...ai(),...Vh(Uo(),["maxWidth","minWidth","width"]),...wn(),...k9()},"VInput"),Ta=et()({name:"VInput",props:{...Wd()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const{densityClasses:o}=bo(t),{dimensionStyles:a}=Wo(t),{themeClasses:s}=Jn(t),{rtlClasses:c}=Bi(),{InputIcon:l}=lI(t),d=u.useId(),f=u.computed(()=>t.id||`input-${d}`),{errorMessages:b,isDirty:x,isDisabled:k,isReadonly:E,isPristine:m,isValid:h,isValidating:g,reset:w,resetValidation:p,validate:v,validationClasses:y}=E9(t,"v-input",f),S=u.computed(()=>{var R;return(R=t.errorMessages)!=null&&R.length||!m.value&&b.value.length?b.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages}),T=u.toRef(()=>S.value.length>0),C=u.toRef(()=>!t.hideDetails||t.hideDetails==="auto"&&(T.value||!!r.details)),M=u.computed(()=>C.value?`${f.value}-messages`:void 0),A=u.computed(()=>({id:f,messagesId:M,isDirty:x,isDisabled:k,isReadonly:E,isPristine:m,isValid:h,isValidating:g,hasDetails:C,reset:w,resetValidation:p,validate:v})),P=u.toRef(()=>t.error||t.disabled?void 0:t.focused?t.color:t.baseColor),L=u.toRef(()=>{if(t.iconColor)return t.iconColor===!0?P.value:t.iconColor});return st(()=>{var z,$,Y,ae;const R=!!(r.prepend||t.prependIcon),j=!!(r.append||t.appendIcon);return u.createElementVNode("div",{class:u.normalizeClass(["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--focused":t.focused,"v-input--glow":t.glow,"v-input--hide-spin-buttons":t.hideSpinButtons},o.value,s.value,c.value,y.value,t.class]),style:u.normalizeStyle([a.value,t.style])},[R&&u.createElementVNode("div",{key:"prepend",class:"v-input__prepend"},[(z=r.prepend)==null?void 0:z.call(r,A.value),t.prependIcon&&u.createVNode(l,{key:"prepend-icon",name:"prepend",color:L.value},null)]),r.default&&u.createElementVNode("div",{class:"v-input__control"},[($=r.default)==null?void 0:$.call(r,A.value)]),j&&u.createElementVNode("div",{key:"append",class:"v-input__append"},[t.appendIcon&&u.createVNode(l,{key:"append-icon",name:"append",color:L.value},null),(Y=r.append)==null?void 0:Y.call(r,A.value)]),C.value&&u.createElementVNode("div",{id:M.value,class:"v-input__details",role:"alert","aria-live":"polite"},[u.createVNode(uI,{active:T.value,messages:S.value},{message:r.message}),(ae=r.details)==null?void 0:ae.call(r,A.value)])])}),{reset:w,resetValidation:p,validate:v,isValid:h,errorMessages:b}}});function fI(t){function e(n,r){var i,o;!t.autofocus||!n||(o=(i=r[0].target)==null?void 0:i.focus)==null||o.call(i)}return{onIntersect:e}}const T9=["color","file","time","date","datetime-local","week","month"],Ep=Re({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Wd(),...Sp()},"VTextField"),Fn=et()({name:"VTextField",directives:{vIntersect:Vl},inheritAttrs:!1,props:Ep(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const o=Lt(t,"modelValue"),{isFocused:a,focus:s,blur:c}=Ud(t),{onIntersect:l}=fI(t),d=u.computed(()=>typeof t.counterValue=="function"?t.counterValue(o.value):typeof t.counterValue=="number"?t.counterValue:(o.value??"").toString().length),f=u.computed(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),b=u.computed(()=>["plain","underlined"].includes(t.variant)),x=u.ref(),k=u.ref(),E=u.ref(),m=u.computed(()=>T9.includes(t.type)||t.persistentPlaceholder||a.value||t.active);function h(){a.value||s(),u.nextTick(()=>{E.value!==document.activeElement&&u.nextTick(()=>{var y;return(y=E.value)==null?void 0:y.focus()})})}function g(y){r("mousedown:control",y),y.target!==E.value&&(h(),y.preventDefault())}function w(y){r("click:control",y)}function p(y,S){y.stopPropagation(),h(),u.nextTick(()=>{o.value=null,S(),ep(t["onClick:clear"],y)})}function v(y){var T;const S=y.target;if(o.value=S.value,(T=t.modelModifiers)!=null&&T.trim&&["text","search","password","tel","url"].includes(t.type)){const C=[S.selectionStart,S.selectionEnd];u.nextTick(()=>{S.selectionStart=C[0],S.selectionEnd=C[1]})}}return st(()=>{const y=!!(i.counter||t.counter!==!1&&t.counter!=null),S=!!(y||i.details),[T,C]=Cd(n),{modelValue:M,...A}=Ta.filterProps(t),P=au.filterProps(t);return u.createVNode(Ta,u.mergeProps({ref:x,modelValue:o.value,"onUpdate:modelValue":L=>o.value=L,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":b.value},t.class],style:t.style},T,A,{centerAffix:!b.value,focused:a.value}),{...i,default:L=>{let{id:R,isDisabled:j,isDirty:z,isReadonly:$,isValid:Y,hasDetails:ae,reset:K}=L;return u.createVNode(au,u.mergeProps({ref:k,onMousedown:g,onClick:w,"onClick:clear":te=>p(te,K),"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},P,{id:R.value,active:m.value||z.value,dirty:z.value||t.dirty,disabled:j.value,focused:a.value,details:ae.value,error:Y.value===!1}),{...i,default:te=>{let{props:{class:G,...ue}}=te;const J=u.withDirectives(u.createElementVNode("input",u.mergeProps({ref:E,value:o.value,onInput:v,autofocus:t.autofocus,readonly:$.value,disabled:j.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:h,onBlur:c},ue,C),null),[[Vl,{handler:l},null,{once:!0}]]);return u.createElementVNode(u.Fragment,null,[t.prefix&&u.createElementVNode("span",{class:"v-text-field__prefix"},[u.createElementVNode("span",{class:"v-text-field__prefix__text"},[t.prefix])]),i.default?u.createElementVNode("div",{class:u.normalizeClass(G),"data-no-activator":""},[i.default(),J]):u.cloneVNode(J,{class:G}),t.suffix&&u.createElementVNode("span",{class:"v-text-field__suffix"},[u.createElementVNode("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:S?L=>{var R;return u.createElementVNode(u.Fragment,null,[(R=i.details)==null?void 0:R.call(i,L),y&&u.createElementVNode(u.Fragment,null,[u.createElementVNode("span",null,null),u.createVNode(m0,{active:t.persistentCounter||a.value,value:d.value,max:f.value,disabled:t.disabled},i.counter)])])}:void 0})}),qi({},x,k,E)}}),Yd=u.defineComponent({__name:"Datepicker",props:{modelValue:{type:String,default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dialogWidth:{type:Number,default:380},dateFormat:{type:String,default:"yyyy-MM-dd"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},textFieldProps:{type:Object},datePickerProps:{type:Object},hideDetails:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;u.ref(!1);const r=u.ref(),i=u.computed(()=>n.dateFormat),o=u.computed(()=>r.value?wd(r.value,i.value):""),a=()=>{n.modelValue&&(r.value=Qc(n.modelValue,i.value,new Date))},s=e,c=d=>{d.value=!1,r.value||(r.value=new Date),s("update:modelValue",o.value)},l=d=>{d.value=!1,r.value=null,s("update:modelValue",null)};return u.onMounted(()=>{u.nextTick(()=>{a()})}),(d,f)=>(u.openBlock(),u.createElementBlock("div",null,[u.createVNode(eo,{width:t.dialogWidth},{activator:u.withCtx(({isActive:b,props:x})=>[u.createVNode(Fn,u.mergeProps(x,{disabled:t.disabled,loading:t.loading,label:t.label,modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=k=>o.value=k),"hide-details":t.hideDetails,variant:"underlined",readonly:""}),{prepend:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-calendar-edit",color:b?"primary":"",size:"x-large"},null,8,["color"])]),loader:u.withCtx(()=>[u.createVNode(Nd,{color:"primary",indeterminate:"",absolute:"",height:"2"})]),_:2},1040,["disabled","loading","label","modelValue","hide-details"])]),default:u.withCtx(({isActive:b})=>[u.createVNode(jn,null,{default:u.withCtx(()=>[u.createVNode(Dr,{class:"px-0 py-0"},{default:u.withCtx(()=>[u.createVNode(vp,null,{default:u.withCtx(()=>[u.createVNode(Fd,null,{default:u.withCtx(()=>[u.createVNode(bp,{cols:"6",class:"pa-0"},{default:u.withCtx(()=>[u.createVNode(YM,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=x=>r.value=x),"full-width":"","no-title":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(Xr),u.createVNode(dt,{color:"grey lighten-1",variant:"text",onClick:x=>l(b)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.clearText),1)]),_:2},1032,["onClick"]),u.createVNode(dt,{color:"green darken-1",variant:"text",onClick:x=>c(b)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.okText),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["width"])]))}}),M9="00:00:00",hI="yyyy-MM-dd",pI="HH:mm:ss",g0=u.defineComponent({__name:"Datetimepicker",props:{modelValue:{type:String},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dialogWidth:{type:Number,default:620},dateFormat:{type:String,default:"yyyy-MM-dd"},timeFormat:{type:String,default:"HH:mm"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},textFieldProps:{type:Object},datePickerProps:{type:Object},timePickerProps:{type:Object},hideDetails:{type:Boolean}},emits:["update:modelValue","input"],setup(t,{emit:e}){const n=e,r=t,i=u.ref(),o=u.ref(M9),a=u.ref(),s=u.computed(()=>r.dateFormat+" "+r.timeFormat),c=u.computed(()=>hI+" "+pI),l=u.computed(()=>{if(i.value&&o.value){let E=wd(i.value,hI)+" "+o.value;return o.value.length===5&&(E+=":00"),Qc(E,c.value,new Date)}else return null}),d=u.computed(()=>l.value?wd(l.value,s.value):""),f=()=>{if(!r.modelValue)return;let E=Qc(r.modelValue,s.value,new Date);i.value=E,o.value=wd(E,pI)},b=E=>{k(E),i.value||(i.value=new Date),n("update:modelValue",d.value)},x=E=>{k(E),i.value=null,n("update:modelValue",null)},k=E=>{E.value=!1,a.value&&(a.value.selectingHour=!0)};return u.onMounted(()=>{u.nextTick(()=>{f()})}),(E,m)=>(u.openBlock(),u.createElementBlock("div",null,[u.createVNode(eo,{width:t.dialogWidth},{activator:u.withCtx(({isActive:h,props:g})=>[u.createVNode(Fn,u.mergeProps(g,{disabled:t.disabled,loading:t.loading,label:t.label,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=w=>d.value=w),"hide-details":t.hideDetails,color:"primary",variant:"underlined",readonly:""}),{prepend:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-calendar-edit",color:h?"primary":"",size:"x-large"},null,8,["color"])]),loader:u.withCtx(()=>[u.createVNode(Nd,{color:"primary",indeterminate:"",absolute:"",height:"2"})]),_:2},1040,["disabled","loading","label","modelValue","hide-details"])]),default:u.withCtx(({isActive:h})=>[u.createVNode(jn,null,{default:u.withCtx(()=>[u.createVNode(Dr,{class:"px-0 py-0"},{default:u.withCtx(()=>[u.createVNode(vp,{class:"d-flex justify-space-between align-center"},{default:u.withCtx(()=>[u.createVNode(YM,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=g=>i.value=g),"full-width":"","no-title":""},null,8,["modelValue"]),u.withDirectives(u.createElementVNode("input",{type:"time",class:"text-h2 timer","onUpdate:modelValue":m[2]||(m[2]=g=>o.value=g)},null,512),[[u.vModelText,o.value]])]),_:1})]),_:1}),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(Xr),u.createVNode(dt,{color:"grey lighten-1",variant:"text",onClick:g=>x(h)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.clearText),1)]),_:2},1032,["onClick"]),u.createVNode(dt,{color:"green darken-1",variant:"text",onClick:g=>b(h)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.okText),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["width"])]))}}),I9=Re({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ot(),...wn()},"VDivider"),Mn=et()({name:"VDivider",props:I9(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Jn(t),{textColorClasses:o,textColorStyles:a}=Ji(()=>t.color),s=u.computed(()=>{const c={};return t.length&&(c[t.vertical?"height":"width"]=gt(t.length)),t.thickness&&(c[t.vertical?"borderRightWidth":"borderTopWidth"]=gt(t.thickness)),c});return st(()=>{const c=u.createElementVNode("hr",{class:u.normalizeClass([{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},i.value,o.value,t.class]),style:u.normalizeStyle([s.value,a.value,{"--v-border-opacity":t.opacity},t.style]),"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return r.default?u.createElementVNode("div",{class:u.normalizeClass(["v-divider__wrapper",{"v-divider__wrapper--vertical":t.vertical,"v-divider__wrapper--inset":t.inset}])},[c,u.createElementVNode("div",{class:"v-divider__content"},[r.default()]),c]):c}),{}}}),O9=50,A9=500;function _9(t){let{toggleUpDown:e}=t,n=-1,r=-1;u.onScopeDispose(o);function i(s){o(),a(s),window.addEventListener("pointerup",o),document.addEventListener("blur",o),n=window.setTimeout(()=>{r=window.setInterval(()=>a(s),O9)},A9)}function o(){window.clearTimeout(n),window.clearInterval(r),window.removeEventListener("pointerup",o),document.removeEventListener("blur",o)}function a(s){e(s==="up")}return{holdStart:i,holdStop:o}}const D9=Re({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:t=>!t||t.length===1},...Sr(Ep(),["modelValue","validationValue"])},"VNumberInput"),N9=et()({name:"VNumberInput",props:{...D9()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=u.ref(),{holdStart:i,holdStop:o}=_9({toggleUpDown:C}),a=kp(t),s=u.computed(()=>a.isDisabled.value||a.isReadonly.value),c=u.shallowRef(t.focused),{decimalSeparator:l}=ci(),d=u.computed(()=>{var te;return((te=t.decimalSeparator)==null?void 0:te[0])||l.value});function f(te){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.precision,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const J=G==null?String(te):te.toFixed(G);if(c.value&&ue)return Number(J).toString().replace(".",d.value);if(t.minFractionDigits===null||G!==null&&G<t.minFractionDigits)return J.replace(".",d.value);let[be,de]=J.split(".");return de=(de??"").padEnd(t.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${t.minFractionDigits}})0`,"g"),""),[be,de].filter(Boolean).join(d.value)}const b=Lt(t,"modelValue",null,te=>te??null,te=>te==null?te??null:Rr(Number(te),t.min,t.max)),x=u.shallowRef(null);u.watchEffect(()=>{c.value&&!s.value||(b.value==null?x.value=null:isNaN(b.value)||(x.value=f(b.value)))});const k=u.computed({get:()=>x.value,set(te){if(te===null||te===""){b.value=null,x.value=null;return}const G=Number(te.replace(d.value,"."));!isNaN(G)&&G<=t.max&&G>=t.min&&(b.value=G,x.value=te)}}),E=u.computed(()=>s.value?!1:(b.value??0)+t.step<=t.max),m=u.computed(()=>s.value?!1:(b.value??0)-t.step>=t.min),h=u.computed(()=>t.hideInput?"stacked":t.controlVariant),g=u.toRef(()=>h.value==="split"?"$plus":"$collapse"),w=u.toRef(()=>h.value==="split"?"$minus":"$expand"),p=u.toRef(()=>h.value==="split"?"default":"small"),v=u.toRef(()=>h.value==="stacked"?"auto":"100%"),y={props:{onClick:P,onPointerup:L,onPointerdown:R,onPointercancel:L}},S={props:{onClick:P,onPointerup:L,onPointerdown:j,onPointercancel:L}};u.watch(()=>t.precision,()=>$()),u.watch(()=>t.minFractionDigits,()=>$()),u.onMounted(()=>{z()});function T(te){if(te==null)return 0;const G=te.toString(),ue=G.indexOf(".");return~ue?G.length-ue:0}function C(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(s.value)return;if(b.value==null){k.value=f(Rr(0,t.min,t.max));return}let G=Math.max(T(b.value),T(t.step));t.precision!=null&&(G=Math.max(G,t.precision)),te?E.value&&(k.value=f(b.value+t.step,G)):m.value&&(k.value=f(b.value-t.step,G))}function M(te){var V;if(!te.data)return;const G=te.target,{value:ue,selectionStart:J,selectionEnd:be}=G??{},de=ue?ue.slice(0,J)+te.data+ue.slice(be):te.data,ce=y8(de,t.precision,d.value);new RegExp(`^-?\\d*${Rb(d.value)}?\\d*$`).test(de)||(te.preventDefault(),G.value=ce),t.precision!=null&&(((V=de.split(d.value)[1])==null?void 0:V.length)>t.precision&&(te.preventDefault(),G.value=ce),t.precision===0&&de.includes(d.value)&&(te.preventDefault(),G.value=ce))}async function A(te){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(te.key)||te.ctrlKey||["ArrowDown","ArrowUp"].includes(te.key)&&(te.preventDefault(),z(),await u.nextTick(),te.key==="ArrowDown"?C(!1):C())}function P(te){te.stopPropagation()}function L(te){const G=te.currentTarget;G==null||G.releasePointerCapture(te.pointerId),te.preventDefault(),o()}function R(te){const G=te.currentTarget;G==null||G.setPointerCapture(te.pointerId),te.preventDefault(),te.stopPropagation(),i("up")}function j(te){const G=te.currentTarget;G==null||G.setPointerCapture(te.pointerId),te.preventDefault(),te.stopPropagation(),i("down")}function z(){if(s.value||!r.value)return;const te=r.value.value,G=Number(te.replace(d.value,"."));te&&!isNaN(G)?k.value=f(Rr(G,t.min,t.max)):k.value=null}function $(){s.value||(k.value=b.value!==null&&!isNaN(b.value)?f(b.value,t.precision,!1):null)}function Y(){if(!s.value){if(b.value===null||isNaN(b.value)){k.value=null;return}k.value=b.value.toString().replace(".",d.value)}}function ae(){Y()}function K(){z()}return st(()=>{const{modelValue:te,...G}=Fn.filterProps(t);function ue(){return n.increment?u.createVNode(en,{key:"increment-defaults",defaults:{VBtn:{disabled:!E.value,flat:!0,height:v.value,size:p.value,icon:g.value}}},{default:()=>[n.increment(y)]}):u.createVNode(dt,{"aria-hidden":"true","data-testid":"increment",disabled:!E.value,flat:!0,height:v.value,icon:g.value,key:"increment-btn",onClick:P,onPointerdown:R,onPointerup:L,onPointercancel:L,size:p.value,tabindex:"-1"},null)}function J(){return n.decrement?u.createVNode(en,{key:"decrement-defaults",defaults:{VBtn:{disabled:!m.value,flat:!0,height:v.value,size:p.value,icon:w.value}}},{default:()=>[n.decrement(S)]}):u.createVNode(dt,{"aria-hidden":"true","data-testid":"decrement",disabled:!m.value,flat:!0,height:v.value,icon:w.value,key:"decrement-btn",onClick:P,onPointerdown:j,onPointerup:L,onPointercancel:L,size:p.value,tabindex:"-1"},null)}function be(){return u.createElementVNode("div",{class:"v-number-input__control"},[J(),u.createVNode(Mn,{vertical:h.value!=="stacked"},null),ue()])}function de(){return!t.hideInput&&!t.inset?u.createVNode(Mn,{vertical:!0},null):void 0}const ce=h.value==="split"?u.createElementVNode("div",{class:"v-number-input__control"},[u.createVNode(Mn,{vertical:!0},null),ue()]):t.reverse||h.value==="hidden"?void 0:u.createElementVNode(u.Fragment,null,[de(),be()]),V=n["append-inner"]||ce,ne=h.value==="split"?u.createElementVNode("div",{class:"v-number-input__control"},[J(),u.createVNode(Mn,{vertical:!0},null)]):t.reverse&&h.value!=="hidden"?u.createElementVNode(u.Fragment,null,[be(),de()]):void 0,Q=n["prepend-inner"]||ne;return u.createVNode(Fn,u.mergeProps({ref:r},G,{modelValue:k.value,"onUpdate:modelValue":Z=>k.value=Z,focused:c.value,"onUpdate:focused":Z=>c.value=Z,validationValue:b.value,onBeforeinput:M,onFocus:ae,onBlur:K,onKeydown:A,class:["v-number-input",{"v-number-input--default":h.value==="default","v-number-input--hide-input":t.hideInput,"v-number-input--inset":t.inset,"v-number-input--reverse":t.reverse,"v-number-input--split":h.value==="split","v-number-input--stacked":h.value==="stacked"},t.class],style:t.style,inputmode:"decimal"}),{...n,"append-inner":V?function(){var re;for(var Z=arguments.length,he=new Array(Z),X=0;X<Z;X++)he[X]=arguments[X];return u.createElementVNode(u.Fragment,null,[(re=n["append-inner"])==null?void 0:re.call(n,...he),ce])}:void 0,"prepend-inner":Q?function(){var re;for(var Z=arguments.length,he=new Array(Z),X=0;X<Z;X++)he[X]=arguments[X];return u.createElementVNode(u.Fragment,null,[ne,(re=n["prepend-inner"])==null?void 0:re.call(n,...he)])}:void 0})}),qi({},r)}}),mI=Symbol.for("vuetify:selection-control-group"),gI=Re({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:jt,trueIcon:jt,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ri},...Ot(),...ai(),...wn()},"SelectionControlGroup"),P9=Re({...gI({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");et()({name:"VSelectionControlGroup",props:P9(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Lt(t,"modelValue"),i=u.useId(),o=u.toRef(()=>t.id||`v-selection-control-group-${i}`),a=u.toRef(()=>t.name||o.value),s=new Set;return u.provide(mI,{modelValue:r,forceUpdate:()=>{s.forEach(c=>c())},onForceUpdate:c=>{s.add(c),u.onScopeDispose(()=>{s.delete(c)})}}),Zi({[t.defaultsTarget]:{color:u.toRef(()=>t.color),disabled:u.toRef(()=>t.disabled),density:u.toRef(()=>t.density),error:u.toRef(()=>t.error),inline:u.toRef(()=>t.inline),modelValue:r,multiple:u.toRef(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:a,falseIcon:u.toRef(()=>t.falseIcon),trueIcon:u.toRef(()=>t.trueIcon),readonly:u.toRef(()=>t.readonly),ripple:u.toRef(()=>t.ripple),type:u.toRef(()=>t.type),valueComparator:u.toRef(()=>t.valueComparator)}}),st(()=>{var c;return u.createElementVNode("div",{class:u.normalizeClass(["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class]),style:u.normalizeStyle(t.style),role:t.type==="radio"?"radiogroup":void 0},[(c=n.default)==null?void 0:c.call(n)])}),{}}});const vI=Re({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ot(),...gI()},"VSelectionControl");function L9(t){const e=u.inject(mI,void 0),{densityClasses:n}=bo(t),r=Lt(t,"modelValue"),i=u.computed(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),o=u.computed(()=>t.falseValue!==void 0?t.falseValue:!1),a=u.computed(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),s=u.computed({get(){const x=e?e.modelValue.value:r.value;return a.value?Zn(x).some(k=>t.valueComparator(k,i.value)):t.valueComparator(x,i.value)},set(x){if(t.readonly)return;const k=x?i.value:o.value;let E=k;a.value&&(E=x?[...Zn(r.value),k]:Zn(r.value).filter(m=>!t.valueComparator(m,i.value))),e?e.modelValue.value=E:r.value=E}}),{textColorClasses:c,textColorStyles:l}=Ji(()=>{if(!(t.error||t.disabled))return s.value?t.color:t.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:f}=li(()=>s.value&&!t.error&&!t.disabled?t.color:t.baseColor),b=u.computed(()=>s.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:i,falseValue:o,model:s,textColorClasses:c,textColorStyles:l,backgroundColorClasses:d,backgroundColorStyles:f,icon:b}}const yI=et()({name:"VSelectionControl",directives:{vRipple:ns},inheritAttrs:!1,props:vI(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{group:i,densityClasses:o,icon:a,model:s,textColorClasses:c,textColorStyles:l,backgroundColorClasses:d,backgroundColorStyles:f,trueValue:b}=L9(t),x=u.useId(),k=u.shallowRef(!1),E=u.shallowRef(!1),m=u.ref(),h=u.toRef(()=>t.id||`input-${x}`),g=u.toRef(()=>!t.disabled&&!t.readonly);i==null||i.onForceUpdate(()=>{m.value&&(m.value.checked=s.value)});function w(S){g.value&&(k.value=!0,eu(S.target,":focus-visible")!==!1&&(E.value=!0))}function p(){k.value=!1,E.value=!1}function v(S){S.stopPropagation()}function y(S){if(!g.value){m.value&&(m.value.checked=s.value);return}t.readonly&&i&&u.nextTick(()=>i.forceUpdate()),s.value=S.target.checked}return st(()=>{var A,P;const S=r.label?r.label({label:t.label,props:{for:h.value}}):t.label,[T,C]=Cd(n),M=u.createElementVNode("input",u.mergeProps({ref:m,checked:s.value,disabled:!!t.disabled,id:h.value,onBlur:p,onFocus:w,onInput:y,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:b.value,name:t.name,"aria-checked":t.type==="checkbox"?s.value:void 0},C),null);return u.createElementVNode("div",u.mergeProps({class:["v-selection-control",{"v-selection-control--dirty":s.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":k.value,"v-selection-control--focus-visible":E.value,"v-selection-control--inline":t.inline},o.value,t.class]},T,{style:t.style}),[u.createElementVNode("div",{class:u.normalizeClass(["v-selection-control__wrapper",c.value]),style:u.normalizeStyle(l.value)},[(A=r.default)==null?void 0:A.call(r,{backgroundColorClasses:d,backgroundColorStyles:f}),u.withDirectives(u.createElementVNode("div",{class:u.normalizeClass(["v-selection-control__input"])},[((P=r.input)==null?void 0:P.call(r,{model:s,textColorClasses:c,textColorStyles:l,backgroundColorClasses:d,backgroundColorStyles:f,inputNode:M,icon:a.value,props:{onFocus:w,onBlur:p,id:h.value}}))??u.createElementVNode(u.Fragment,null,[a.value&&u.createVNode(_t,{key:"icon",icon:a.value},null),M])]),[[ns,!t.disabled&&!t.readonly&&t.ripple,null,{center:!0,circle:!0}]])]),S&&u.createVNode(sI,{for:h.value,onClick:v},{default:()=>[S]})])}),{isFocused:k,input:m}}}),bI=Re({indeterminate:Boolean,indeterminateIcon:{type:jt,default:"$checkboxIndeterminate"},...vI({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Ys=et()({name:"VCheckboxBtn",props:bI(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const r=Lt(t,"indeterminate"),i=Lt(t,"modelValue");function o(c){r.value&&(r.value=!1)}const a=u.toRef(()=>r.value?t.indeterminateIcon:t.falseIcon),s=u.toRef(()=>r.value?t.indeterminateIcon:t.trueIcon);return st(()=>{const c=Sr(yI.filterProps(t),["modelValue"]);return u.createVNode(yI,u.mergeProps(c,{modelValue:i.value,"onUpdate:modelValue":[l=>i.value=l,o],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:a.value,trueIcon:s.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}}),R9=Re({...Wd(),...Sr(bI(),["inline"])},"VCheckbox"),wI=et()({name:"VCheckbox",inheritAttrs:!1,props:R9(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=Lt(t,"modelValue"),{isFocused:o,focus:a,blur:s}=Ud(t),c=u.ref(),l=u.useId();return st(()=>{const[d,f]=Cd(n),b=Ta.filterProps(t),x=Ys.filterProps(t);return u.createVNode(Ta,u.mergeProps({ref:c,class:["v-checkbox",t.class]},d,b,{modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,id:t.id||`checkbox-${l}`,focused:o.value,style:t.style}),{...r,default:k=>{let{id:E,messagesId:m,isDisabled:h,isReadonly:g,isValid:w}=k;return u.createVNode(Ys,u.mergeProps(x,{id:E.value,"aria-describedby":m.value,disabled:h.value,readonly:g.value},f,{error:w.value===!1,modelValue:i.value,"onUpdate:modelValue":p=>i.value=p,onFocus:a,onBlur:s}),r)}})}),qi({},c)}}),B9=Symbol.for("vuetify:goto");function j9(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:t=>t,easeInQuad:t=>t**2,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t**2:-1+(4-2*t)*t,easeInCubic:t=>t**3,easeOutCubic:t=>--t**3+1,easeInOutCubic:t=>t<.5?4*t**3:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t**4,easeOutQuart:t=>1- --t**4,easeInOutQuart:t=>t<.5?8*t**4:1-8*--t**4,easeInQuint:t=>t**5,easeOutQuint:t=>1+--t**5,easeInOutQuint:t=>t<.5?16*t**5:1+16*--t**5}}}function F9(t){return v0(t)??(document.scrollingElement||document.body)}function v0(t){return typeof t=="string"?document.querySelector(t):Ab(t)}function y0(t,e,n){if(typeof t=="number")return e&&n?-t:t;let r=v0(t),i=0;for(;r;)i+=e?r.offsetLeft:r.offsetTop,r=r.offsetParent;return i}async function xI(t,e,n,r){const i=n?"scrollLeft":"scrollTop",o=ts((r==null?void 0:r.options)??j9(),e),a=r==null?void 0:r.rtl.value,s=(typeof t=="number"?t:v0(t))??0,c=o.container==="parent"&&s instanceof HTMLElement?s.parentElement:F9(o.container),l=typeof o.easing=="function"?o.easing:o.patterns[o.easing];if(!l)throw new TypeError(`Easing function "${o.easing}" not found.`);let d;if(typeof s=="number")d=y0(s,n,a);else if(d=y0(s,n,a)-y0(c,n,a),o.layout){const k=window.getComputedStyle(s).getPropertyValue("--v-layout-top");k&&(d-=parseInt(k,10))}d+=o.offset,d=z9(c,d,!!a,!!n);const f=c[i]??0;if(d===f)return Promise.resolve(d);const b=performance.now();return new Promise(x=>requestAnimationFrame(function k(E){const h=(E-b)/o.duration,g=Math.floor(f+(d-f)*l(Rr(h,0,1)));if(c[i]=g,h>=1&&Math.abs(g-c[i])<10)return x(d);if(h>2)return $s("Scroll target is not reachable"),x(c[i]);requestAnimationFrame(k)}))}function H9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=u.inject(B9),{isRtl:n}=Bi();if(!e)throw new Error("[Vuetify] Could not find injected goto instance");const r={...e,rtl:u.toRef(()=>e.rtl.value||n.value)};async function i(o,a){return xI(o,ts(t,a),!1,r)}return i.horizontal=async(o,a)=>xI(o,ts(t,a),!0,r),i}function z9(t,e,n,r){const{scrollWidth:i,scrollHeight:o}=t,[a,s]=t===document.scrollingElement?[window.innerWidth,window.innerHeight]:[t.offsetWidth,t.offsetHeight];let c,l;return r?n?(c=-(i-a),l=0):(c=0,l=i-a):(c=0,l=o+-s),Rr(e,c,l)}function $9(t){let{selectedElement:e,containerElement:n,isRtl:r,isHorizontal:i}=t;const o=Gd(i,n),a=SI(i,r,n),s=Gd(i,e),c=kI(i,e),l=s*.4;return a>c?c-l:a+o<c+s?c-o+s+l:a}function U9(t){let{selectedElement:e,containerElement:n,isHorizontal:r}=t;const i=Gd(r,n),o=kI(r,e),a=Gd(r,e);return o-i/2+a/2}function CI(t,e){const n=t?"scrollWidth":"scrollHeight";return(e==null?void 0:e[n])||0}function W9(t,e){const n=t?"clientWidth":"clientHeight";return(e==null?void 0:e[n])||0}function SI(t,e,n){if(!n)return 0;const{scrollLeft:r,offsetWidth:i,scrollWidth:o}=n;return t?e?o-i+r:r:n.scrollTop}function Gd(t,e){const n=t?"offsetWidth":"offsetHeight";return(e==null?void 0:e[n])||0}function kI(t,e){const n=t?"offsetLeft":"offsetTop";return(e==null?void 0:e[n])||0}const Y9=Symbol.for("vuetify:v-slide-group"),b0=Re({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Y9},nextIcon:{type:jt,default:"$next"},prevIcon:{type:jt,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Ot(),...jd({mobile:null}),...ln(),...Kb({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Tp=et()({name:"VSlideGroup",props:b0(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isRtl:r}=Bi(),{displayClasses:i,mobile:o}=Us(t),a=cp(t,t.symbol),s=u.shallowRef(!1),c=u.shallowRef(0),l=u.shallowRef(0),d=u.shallowRef(0),f=u.computed(()=>t.direction==="horizontal"),{resizeRef:b,contentRect:x}=ru(),{resizeRef:k,contentRect:E}=ru(),m=H9(),h=u.computed(()=>({container:b.el,duration:200,easing:"easeOutQuart"})),g=u.computed(()=>a.selected.value.length?a.items.value.findIndex(te=>te.id===a.selected.value[0]):-1),w=u.computed(()=>a.selected.value.length?a.items.value.findIndex(te=>te.id===a.selected.value[a.selected.value.length-1]):-1);if(yr){let te=-1;u.watch(()=>[a.selected.value,x.value,E.value,f.value],()=>{cancelAnimationFrame(te),te=requestAnimationFrame(()=>{if(x.value&&E.value){const G=f.value?"width":"height";l.value=x.value[G],d.value=E.value[G],s.value=l.value+1<d.value}if(g.value>=0&&k.el){const G=k.el.children[w.value];v(G,t.centerActive)}})})}const p=u.shallowRef(!1);function v(te,G){let ue=0;G?ue=U9({containerElement:b.el,isHorizontal:f.value,selectedElement:te}):ue=$9({containerElement:b.el,isHorizontal:f.value,isRtl:r.value,selectedElement:te}),y(ue)}function y(te){if(!yr||!b.el)return;const G=Gd(f.value,b.el),ue=SI(f.value,r.value,b.el);if(!(CI(f.value,b.el)<=G||Math.abs(te-ue)<16)){if(f.value&&r.value&&b.el){const{scrollWidth:be,offsetWidth:de}=b.el;te=be-de-te}f.value?m.horizontal(te,h.value):m(te,h.value)}}function S(te){const{scrollTop:G,scrollLeft:ue}=te.target;c.value=f.value?ue:G}function T(te){if(p.value=!0,!(!s.value||!k.el)){for(const G of te.composedPath())for(const ue of k.el.children)if(ue===G){v(ue);return}}}function C(te){p.value=!1}let M=!1;function A(te){var G;!M&&!p.value&&!(te.relatedTarget&&((G=k.el)!=null&&G.contains(te.relatedTarget)))&&j(),M=!1}function P(){M=!0}function L(te){if(!k.el)return;function G(ue){te.preventDefault(),j(ue)}f.value?te.key==="ArrowRight"?G(r.value?"prev":"next"):te.key==="ArrowLeft"&&G(r.value?"next":"prev"):te.key==="ArrowDown"?G("next"):te.key==="ArrowUp"&&G("prev"),te.key==="Home"?G("first"):te.key==="End"&&G("last")}function R(te,G){if(!te)return;let ue=te;do ue=ue==null?void 0:ue[G==="next"?"nextElementSibling":"previousElementSibling"];while(ue!=null&&ue.hasAttribute("disabled"));return ue}function j(te){if(!k.el)return;let G;if(!te)G=kd(k.el)[0];else if(te==="next"){if(G=R(k.el.querySelector(":focus"),te),!G)return j("first")}else if(te==="prev"){if(G=R(k.el.querySelector(":focus"),te),!G)return j("last")}else te==="first"?(G=k.el.firstElementChild,G!=null&&G.hasAttribute("disabled")&&(G=R(G,"next"))):te==="last"&&(G=k.el.lastElementChild,G!=null&&G.hasAttribute("disabled")&&(G=R(G,"prev")));G&&G.focus({preventScroll:!0})}function z(te){const G=f.value&&r.value?-1:1,ue=(te==="prev"?-G:G)*l.value;let J=c.value+ue;if(f.value&&r.value&&b.el){const{scrollWidth:be,offsetWidth:de}=b.el;J+=be-de}y(J)}const $=u.computed(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),Y=u.computed(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!o.value;case!0:return s.value||Math.abs(c.value)>0;case"mobile":return o.value||s.value||Math.abs(c.value)>0;default:return!o.value&&(s.value||Math.abs(c.value)>0)}}),ae=u.computed(()=>Math.abs(c.value)>1),K=u.computed(()=>{if(!b.value)return!1;const te=CI(f.value,b.el),G=W9(f.value,b.el);return te-G-Math.abs(c.value)>1});return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":Y.value,"v-slide-group--is-overflowing":s.value},i.value,t.class]),style:u.normalizeStyle(t.style),tabindex:p.value||a.selected.value.length?-1:0,onFocus:A},{default:()=>{var te,G,ue;return[Y.value&&u.createElementVNode("div",{key:"prev",class:u.normalizeClass(["v-slide-group__prev",{"v-slide-group__prev--disabled":!ae.value}]),onMousedown:P,onClick:()=>ae.value&&z("prev")},[((te=n.prev)==null?void 0:te.call(n,$.value))??u.createVNode(Ws,null,{default:()=>[u.createVNode(_t,{icon:r.value?t.nextIcon:t.prevIcon},null)]})]),u.createElementVNode("div",{key:"container",ref:b,class:u.normalizeClass(["v-slide-group__container",t.contentClass]),onScroll:S},[u.createElementVNode("div",{ref:k,class:"v-slide-group__content",onFocusin:T,onFocusout:C,onKeydown:L},[(G=n.default)==null?void 0:G.call(n,$.value)])]),Y.value&&u.createElementVNode("div",{key:"next",class:u.normalizeClass(["v-slide-group__next",{"v-slide-group__next--disabled":!K.value}]),onMousedown:P,onClick:()=>K.value&&z("next")},[((ue=n.next)==null?void 0:ue.call(n,$.value))??u.createVNode(Ws,null,{default:()=>[u.createVNode(_t,{icon:r.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:z,scrollOffset:c,focus:j,hasPrev:ae,hasNext:K}}}),EI=Symbol.for("vuetify:v-chip-group"),G9=Re({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ri},...b0(),...Ot(),...Kb({selectedClass:"v-chip--selected"}),...ln(),...wn(),...$o({variant:"tonal"})},"VChipGroup"),X9=et()({name:"VChipGroup",props:G9(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t),{isSelected:i,select:o,next:a,prev:s,selected:c}=cp(t,EI);return Zi({VChip:{baseColor:u.toRef(()=>t.baseColor),color:u.toRef(()=>t.color),disabled:u.toRef(()=>t.disabled),filter:u.toRef(()=>t.filter),variant:u.toRef(()=>t.variant)}}),st(()=>{const l=Tp.filterProps(t);return u.createVNode(Tp,u.mergeProps(l,{class:["v-chip-group",{"v-chip-group--column":t.column},r.value,t.class],style:t.style}),{default:()=>{var d;return[(d=n.default)==null?void 0:d.call(n,{isSelected:i,select:o,next:a,prev:s,selected:c.value})]}})}),{}}}),K9=Re({activeClass:String,appendAvatar:String,appendIcon:jt,baseColor:String,closable:Boolean,closeIcon:{type:jt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:jt,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:jt,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Br(),onClickOnce:Br(),...Ho(),...Ot(),...ai(),...zo(),...Zb(),...si(),...pp(),...nu(),...ln({tag:"span"}),...wn(),...$o({variant:"tonal"})},"VChip"),Gs=et()({name:"VChip",directives:{vRipple:ns},props:K9(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{t:o}=ci(),{borderClasses:a}=Ca(t),{densityClasses:s}=bo(t),{elevationClasses:c}=Sa(t),{roundedClasses:l}=Si(t),{sizeClasses:d}=_d(t),{themeClasses:f}=Jn(t),b=Lt(t,"modelValue"),x=Jb(t,EI,!1),k=hp(t,n),E=u.toRef(()=>t.link!==!1&&k.isLink.value),m=u.computed(()=>!t.disabled&&t.link!==!1&&(!!x||t.link||k.isClickable.value)),h=u.toRef(()=>({"aria-label":o(t.closeLabel),disabled:t.disabled,onClick(S){S.preventDefault(),S.stopPropagation(),b.value=!1,r("click:close",S)}})),{colorClasses:g,colorStyles:w,variantClasses:p}=Ql(()=>({color:!x||x.isSelected.value?t.color??t.baseColor:t.baseColor,variant:t.variant}));function v(S){var T;r("click",S),m.value&&((T=k.navigate)==null||T.call(k,S),x==null||x.toggle())}function y(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),v(S))}return()=>{var R;const S=k.isLink.value?"a":t.tag,T=!!(t.appendIcon||t.appendAvatar),C=!!(T||i.append),M=!!(i.close||t.closable),A=!!(i.filter||t.filter)&&x,P=!!(t.prependIcon||t.prependAvatar),L=!!(P||i.prepend);return b.value&&u.withDirectives(u.createVNode(S,u.mergeProps({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":m.value,"v-chip--filter":A,"v-chip--pill":t.pill,[`${t.activeClass}`]:t.activeClass&&((R=k.isActive)==null?void 0:R.value)},f.value,a.value,g.value,s.value,c.value,l.value,d.value,p.value,x==null?void 0:x.selectedClass.value,t.class],style:[w.value,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:m.value?0:void 0,onClick:v,onKeydown:m.value&&!E.value&&y},k.linkProps),{default:()=>{var j;return[Jl(m.value,"v-chip"),A&&u.createVNode(zM,{key:"filter"},{default:()=>[u.withDirectives(u.createElementVNode("div",{class:"v-chip__filter"},[i.filter?u.createVNode(en,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},i.filter):u.createVNode(_t,{key:"filter-icon",icon:t.filterIcon},null)]),[[u.vShow,x.isSelected.value]])]}),L&&u.createElementVNode("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?u.createVNode(en,{key:"prepend-defaults",disabled:!P,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},i.prepend):u.createElementVNode(u.Fragment,null,[t.prependIcon&&u.createVNode(_t,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&u.createVNode(ka,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),u.createElementVNode("div",{class:"v-chip__content","data-no-activator":""},[((j=i.default)==null?void 0:j.call(i,{isSelected:x==null?void 0:x.isSelected.value,selectedClass:x==null?void 0:x.selectedClass.value,select:x==null?void 0:x.select,toggle:x==null?void 0:x.toggle,value:x==null?void 0:x.value.value,disabled:t.disabled}))??u.toDisplayString(t.text)]),C&&u.createElementVNode("div",{key:"append",class:"v-chip__append"},[i.append?u.createVNode(en,{key:"append-defaults",disabled:!T,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},i.append):u.createElementVNode(u.Fragment,null,[t.appendIcon&&u.createVNode(_t,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&u.createVNode(ka,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),M&&u.createElementVNode("button",u.mergeProps({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},h.value),[i.close?u.createVNode(en,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},i.close):u.createVNode(_t,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[ns,m.value&&t.ripple,null]])}}}),w0=Symbol.for("vuetify:list");function TI(){let{filterable:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const e=u.inject(w0,{filterable:!1,hasPrepend:u.shallowRef(!1),updateHasPrepend:()=>null}),n={filterable:e.filterable||t,hasPrepend:u.shallowRef(!1),updateHasPrepend:r=>{r&&(n.hasPrepend.value=r)}};return u.provide(w0,n),e}function MI(){return u.inject(w0,null)}const x0=t=>{const e={activate:n=>{let{id:r,value:i,activated:o}=n;return r=u.toRaw(r),t&&!i&&o.size===1&&o.has(r)||(i?o.add(r):o.delete(r)),o},in:(n,r,i)=>{let o=new Set;if(n!=null)for(const a of Zn(n))o=e.activate({id:a,value:!0,activated:new Set(o),children:r,parents:i});return o},out:n=>Array.from(n)};return e},II=t=>{const e=x0(t);return{activate:r=>{let{activated:i,id:o,...a}=r;o=u.toRaw(o);const s=i.has(o)?new Set([o]):new Set;return e.activate({...a,id:o,activated:s})},in:(r,i,o)=>{let a=new Set;if(r!=null){const s=Zn(r);s.length&&(a=e.in(s.slice(0,1),i,o))}return a},out:(r,i,o)=>e.out(r,i,o)}},Z9=t=>{const e=x0(t);return{activate:r=>{let{id:i,activated:o,children:a,...s}=r;return i=u.toRaw(i),a.has(i)?o:e.activate({id:i,activated:o,children:a,...s})},in:e.in,out:e.out}},J9=t=>{const e=II(t);return{activate:r=>{let{id:i,activated:o,children:a,...s}=r;return i=u.toRaw(i),a.has(i)?o:e.activate({id:i,activated:o,children:a,...s})},in:e.in,out:e.out}},Q9={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){const o=new Set;o.add(e);let a=i.get(e);for(;a!=null;)o.add(a),a=i.get(a);return o}else return r.delete(e),r},select:()=>null},OI={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){let o=i.get(e);for(r.add(e);o!=null&&o!==e;)r.add(o),o=i.get(o);return r}else r.delete(e);return r},select:()=>null},V9={open:OI.open,select:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(!n)return r;const o=[];let a=i.get(e);for(;a!=null;)o.push(a),a=i.get(a);return new Set(o)}},C0=t=>{const e={select:n=>{let{id:r,value:i,selected:o}=n;if(r=u.toRaw(r),t&&!i){const a=Array.from(o.entries()).reduce((s,c)=>{let[l,d]=c;return d==="on"&&s.push(l),s},[]);if(a.length===1&&a[0]===r)return o}return o.set(r,i?"on":"off"),o},in:(n,r,i,o)=>{const a=new Map;for(const s of n||[])e.select({id:s,value:!0,selected:a,children:r,parents:i,disabled:o});return a},out:n=>{const r=[];for(const[i,o]of n.entries())o==="on"&&r.push(i);return r}};return e},AI=t=>{const e=C0(t);return{select:r=>{let{selected:i,id:o,...a}=r;o=u.toRaw(o);const s=i.has(o)?new Map([[o,i.get(o)]]):new Map;return e.select({...a,id:o,selected:s})},in:(r,i,o,a)=>r!=null&&r.length?e.in(r.slice(0,1),i,o,a):new Map,out:(r,i,o)=>e.out(r,i,o)}},q9=t=>{const e=C0(t);return{select:r=>{let{id:i,selected:o,children:a,...s}=r;return i=u.toRaw(i),a.has(i)?o:e.select({id:i,selected:o,children:a,...s})},in:e.in,out:e.out}},e$=t=>{const e=AI(t);return{select:r=>{let{id:i,selected:o,children:a,...s}=r;return i=u.toRaw(i),a.has(i)?o:e.select({id:i,selected:o,children:a,...s})},in:e.in,out:e.out}},_I=t=>{const e={select:n=>{let{id:r,value:i,selected:o,children:a,parents:s,disabled:c}=n;r=u.toRaw(r);const l=new Map(o),d=[r];for(;d.length;){const b=d.shift();c.has(b)||o.set(u.toRaw(b),i?"on":"off"),a.has(b)&&d.push(...a.get(b))}let f=u.toRaw(s.get(r));for(;f;){let b=!0,x=!0;for(const k of a.get(f)){const E=u.toRaw(k);if(!c.has(E)&&(o.get(E)!=="on"&&(b=!1),o.has(E)&&o.get(E)!=="off"&&(x=!1),!b&&!x))break}o.set(f,b?"on":x?"off":"indeterminate"),f=u.toRaw(s.get(f))}return t&&!i&&Array.from(o.entries()).reduce((x,k)=>{let[E,m]=k;return m==="on"&&x.push(E),x},[]).length===0?l:o},in:(n,r,i,o)=>{let a=new Map;for(const s of n||[])a=e.select({id:s,value:!0,selected:a,children:r,parents:i,disabled:o});return a},out:(n,r)=>{const i=[];for(const[o,a]of n.entries())a==="on"&&!r.has(o)&&i.push(o);return i}};return e},t$=t=>{const e=_I(t);return{select:e.select,in:e.in,out:(r,i,o)=>{const a=[];for(const[s,c]of r.entries())if(c==="on"){if(o.has(s)){const l=o.get(s);if(r.get(l)==="on")continue}a.push(s)}return a}}},Xd=Symbol.for("vuetify:nested"),DI={id:u.shallowRef(),root:{register:()=>null,unregister:()=>null,children:u.ref(new Map),parents:u.ref(new Map),disabled:u.ref(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:u.ref(!1),selectable:u.ref(!1),opened:u.ref(new Set),activated:u.ref(new Set),selected:u.ref(new Map),selectedValues:u.ref([]),getPath:()=>[]}},n$=Re({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),r$=t=>{let e=!1;const n=u.shallowRef(new Map),r=u.shallowRef(new Map),i=u.shallowRef(new Set),o=Lt(t,"opened",t.opened,E=>new Set(Array.isArray(E)?E.map(m=>u.toRaw(m)):E),E=>[...E.values()]),a=u.computed(()=>{if(typeof t.activeStrategy=="object")return t.activeStrategy;if(typeof t.activeStrategy=="function")return t.activeStrategy(t.mandatory);switch(t.activeStrategy){case"leaf":return Z9(t.mandatory);case"single-leaf":return J9(t.mandatory);case"independent":return x0(t.mandatory);case"single-independent":default:return II(t.mandatory)}}),s=u.computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;if(typeof t.selectStrategy=="function")return t.selectStrategy(t.mandatory);switch(t.selectStrategy){case"single-leaf":return e$(t.mandatory);case"leaf":return q9(t.mandatory);case"independent":return C0(t.mandatory);case"single-independent":return AI(t.mandatory);case"trunk":return t$(t.mandatory);case"classic":default:return _I(t.mandatory)}}),c=u.computed(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return V9;case"single":return Q9;case"multiple":default:return OI}}),l=Lt(t,"activated",t.activated,E=>a.value.in(E,n.value,r.value),E=>a.value.out(E,n.value,r.value)),d=Lt(t,"selected",t.selected,E=>s.value.in(E,n.value,r.value,i.value),E=>s.value.out(E,n.value,r.value));u.onBeforeUnmount(()=>{e=!0});function f(E){const m=[];let h=u.toRaw(E);for(;h!=null;)m.unshift(h),h=r.value.get(h);return m}const b=rr("nested"),x=new Set,k={id:u.shallowRef(),root:{opened:o,activatable:u.toRef(()=>t.activatable),selectable:u.toRef(()=>t.selectable),activated:l,selected:d,selectedValues:u.computed(()=>{const E=[];for(const[m,h]of d.value.entries())h==="on"&&E.push(m);return E}),register:(E,m,h,g)=>{if(x.has(E)){const w=f(E).map(String).join(" -> "),p=f(m).concat(E).map(String).join(" -> ");$b(`Multiple nodes with the same ID
	${w}
	${p}`);return}else x.add(E);m&&E!==m&&r.value.set(E,m),h&&i.value.add(E),g&&n.value.set(E,[]),m!=null&&n.value.set(m,[...n.value.get(m)||[],E])},unregister:E=>{if(e)return;x.delete(E),n.value.delete(E),i.value.delete(E);const m=r.value.get(E);if(m){const h=n.value.get(m)??[];n.value.set(m,h.filter(g=>g!==E))}r.value.delete(E)},open:(E,m,h)=>{b.emit("click:open",{id:E,value:m,path:f(E),event:h});const g=c.value.open({id:E,value:m,opened:new Set(o.value),children:n.value,parents:r.value,event:h});g&&(o.value=g)},openOnSelect:(E,m,h)=>{const g=c.value.select({id:E,value:m,selected:new Map(d.value),opened:new Set(o.value),children:n.value,parents:r.value,event:h});g&&(o.value=g)},select:(E,m,h)=>{b.emit("click:select",{id:E,value:m,path:f(E),event:h});const g=s.value.select({id:E,value:m,selected:new Map(d.value),children:n.value,parents:r.value,disabled:i.value,event:h});g&&(d.value=g),k.root.openOnSelect(E,m,h)},activate:(E,m,h)=>{if(!t.activatable)return k.root.select(E,!0,h);b.emit("click:activate",{id:E,value:m,path:f(E),event:h});const g=a.value.activate({id:E,value:m,activated:new Set(l.value),children:n.value,parents:r.value,event:h});if(g.size!==l.value.size)l.value=g;else{for(const w of g)if(!l.value.has(w)){l.value=g;return}for(const w of l.value)if(!g.has(w)){l.value=g;return}}},children:n,parents:r,disabled:i,getPath:f}};return u.provide(Xd,k),k.root},NI=(t,e,n)=>{const r=u.inject(Xd,DI),i=Symbol("nested item"),o=u.computed(()=>u.toRaw(u.toValue(t))??i),a={...r,id:o,open:(s,c)=>r.root.open(o.value,s,c),openOnSelect:(s,c)=>r.root.openOnSelect(o.value,s,c),isOpen:u.computed(()=>r.root.opened.value.has(o.value)),parent:u.computed(()=>r.root.parents.value.get(o.value)),activate:(s,c)=>r.root.activate(o.value,s,c),isActivated:u.computed(()=>r.root.activated.value.has(o.value)),select:(s,c)=>r.root.select(o.value,s,c),isSelected:u.computed(()=>r.root.selected.value.get(o.value)==="on"),isIndeterminate:u.computed(()=>r.root.selected.value.get(o.value)==="indeterminate"),isLeaf:u.computed(()=>!r.root.children.value.get(o.value)),isGroupActivator:r.isGroupActivator};return u.onBeforeMount(()=>{r.isGroupActivator||r.root.register(o.value,r.id.value,u.toValue(e),n)}),u.onBeforeUnmount(()=>{r.isGroupActivator||r.root.unregister(o.value)}),n&&u.provide(Xd,a),a},i$=()=>{const t=u.inject(Xd,DI);u.provide(Xd,{...t,isGroupActivator:!0})};function S0(){const t=u.shallowRef(!1);return u.onMounted(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:u.toRef(()=>t.value?void 0:{transition:"none !important"}),isBooted:u.readonly(t)}}const o$=Id({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return i$(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),a$=Re({activeColor:String,baseColor:String,color:String,collapseIcon:{type:jt,default:"$collapse"},disabled:Boolean,expandIcon:{type:jt,default:"$expand"},rawId:[String,Number],prependIcon:jt,appendIcon:jt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ot(),...ln()},"VListGroup"),PI=et()({name:"VListGroup",props:a$(),setup(t,e){let{slots:n}=e;const{isOpen:r,open:i,id:o}=NI(()=>t.value,()=>t.disabled,!0),a=u.computed(()=>`v-list-group--id-${String(t.rawId??o.value)}`),s=MI(),{isBooted:c}=S0();function l(x){var k;["INPUT","TEXTAREA"].includes((k=x.target)==null?void 0:k.tagName)||i(!r.value,x)}const d=u.computed(()=>({onClick:l,class:"v-list-group__header",id:a.value})),f=u.computed(()=>r.value?t.collapseIcon:t.expandIcon),b=u.computed(()=>({VListItem:{activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&f.value,appendIcon:t.appendIcon||!t.subgroup&&f.value,title:t.title,value:t.value}}));return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-list-group",{"v-list-group--prepend":s==null?void 0:s.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":r.value},t.class]),style:u.normalizeStyle(t.style)},{default:()=>[n.activator&&u.createVNode(en,{defaults:b.value},{default:()=>[u.createVNode(o$,null,{default:()=>[n.activator({props:d.value,isOpen:r.value})]})]}),u.createVNode(Yo,{transition:{component:HM},disabled:!c.value},{default:()=>{var x;return[u.withDirectives(u.createElementVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[(x=n.default)==null?void 0:x.call(n)]),[[u.vShow,r.value]])]}})]})),{isOpen:r}}}),s$=Re({opacity:[Number,String],...Ot(),...ln()},"VListItemSubtitle"),l$=et()({name:"VListItemSubtitle",props:s$(),setup(t,e){let{slots:n}=e;return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-list-item-subtitle",t.class]),style:u.normalizeStyle([{"--v-list-item-subtitle-opacity":t.opacity},t.style])},n)),{}}}),Mp=Od("v-list-item-title"),c$=Re({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:jt,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:jt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Br(),onClickOnce:Br(),...Ho(),...Ot(),...ai(),...Uo(),...zo(),...si(),...pp(),...ln(),...wn(),...$o({variant:"text"})},"VListItem"),ir=et()({name:"VListItem",directives:{vRipple:ns},props:c$(),emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const o=hp(t,n),a=u.computed(()=>t.value===void 0?o.href.value:t.value),{activate:s,isActivated:c,select:l,isOpen:d,isSelected:f,isIndeterminate:b,isGroupActivator:x,root:k,parent:E,openOnSelect:m,id:h}=NI(a,()=>t.disabled,!1),g=MI(),w=u.computed(()=>{var be;return t.active!==!1&&(t.active||((be=o.isActive)==null?void 0:be.value)||(k.activatable.value?c.value:f.value))}),p=u.toRef(()=>t.link!==!1&&o.isLink.value),v=u.computed(()=>!!g&&(k.selectable.value||k.activatable.value||t.value!=null)),y=u.computed(()=>!t.disabled&&t.link!==!1&&(t.link||o.isClickable.value||v.value)),S=u.toRef(()=>t.rounded||t.nav),T=u.toRef(()=>t.color??t.activeColor),C=u.toRef(()=>({color:w.value?T.value??t.baseColor:t.baseColor,variant:t.variant}));u.watch(()=>{var be;return(be=o.isActive)==null?void 0:be.value},be=>{be&&M()}),u.onBeforeMount(()=>{var be;(be=o.isActive)!=null&&be.value&&M()});function M(){E.value!=null&&k.open(E.value,!0),m(!0)}const{themeClasses:A}=Jn(t),{borderClasses:P}=Ca(t),{colorClasses:L,colorStyles:R,variantClasses:j}=Ql(C),{densityClasses:z}=bo(t),{dimensionStyles:$}=Wo(t),{elevationClasses:Y}=Sa(t),{roundedClasses:ae}=Si(S),K=u.toRef(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),te=u.toRef(()=>t.ripple!==void 0&&t.ripple&&(g!=null&&g.filterable)?{keys:["Enter"]}:t.ripple),G=u.computed(()=>({isActive:w.value,select:l,isOpen:d.value,isSelected:f.value,isIndeterminate:b.value}));function ue(be){var de,ce;i("click",be),!["INPUT","TEXTAREA"].includes((de=be.target)==null?void 0:de.tagName)&&y.value&&((ce=o.navigate)==null||ce.call(o,be),!x&&(k.activatable.value?s(!c.value,be):(k.selectable.value||t.value!=null)&&l(!f.value,be)))}function J(be){const de=be.target;["INPUT","TEXTAREA"].includes(de.tagName)||(be.key==="Enter"||be.key===" "&&!(g!=null&&g.filterable))&&(be.preventDefault(),be.stopPropagation(),be.target.dispatchEvent(new MouseEvent("click",be)))}return st(()=>{const be=p.value?"a":t.tag,de=r.title||t.title!=null,ce=r.subtitle||t.subtitle!=null,V=!!(t.appendAvatar||t.appendIcon),ne=!!(V||r.append),Q=!!(t.prependAvatar||t.prependIcon),Z=!!(Q||r.prepend);return g==null||g.updateHasPrepend(Z),t.activeColor&&P8("active-color",["color","base-color"]),u.withDirectives(u.createVNode(be,u.mergeProps({class:["v-list-item",{"v-list-item--active":w.value,"v-list-item--disabled":t.disabled,"v-list-item--link":y.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!Z&&(g==null?void 0:g.hasPrepend.value),"v-list-item--slim":t.slim,[`${t.activeClass}`]:t.activeClass&&w.value},A.value,P.value,L.value,z.value,Y.value,K.value,ae.value,j.value,t.class],style:[R.value,$.value,t.style],tabindex:y.value?g?-2:0:void 0,"aria-selected":v.value?k.activatable.value?c.value:k.selectable.value?f.value:w.value:void 0,onClick:ue,onKeydown:y.value&&!p.value&&J},o.linkProps),{default:()=>{var he;return[Jl(y.value||w.value,"v-list-item"),Z&&u.createElementVNode("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?u.createVNode(en,{key:"prepend-defaults",disabled:!Q,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var X;return[(X=r.prepend)==null?void 0:X.call(r,G.value)]}}):u.createElementVNode(u.Fragment,null,[t.prependAvatar&&u.createVNode(ka,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&u.createVNode(_t,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),u.createElementVNode("div",{class:"v-list-item__spacer"},null)]),u.createElementVNode("div",{class:"v-list-item__content","data-no-activator":""},[de&&u.createVNode(Mp,{key:"title"},{default:()=>{var X;return[((X=r.title)==null?void 0:X.call(r,{title:t.title}))??u.toDisplayString(t.title)]}}),ce&&u.createVNode(l$,{key:"subtitle"},{default:()=>{var X;return[((X=r.subtitle)==null?void 0:X.call(r,{subtitle:t.subtitle}))??u.toDisplayString(t.subtitle)]}}),(he=r.default)==null?void 0:he.call(r,G.value)]),ne&&u.createElementVNode("div",{key:"append",class:"v-list-item__append"},[r.append?u.createVNode(en,{key:"append-defaults",disabled:!V,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var X;return[(X=r.append)==null?void 0:X.call(r,G.value)]}}):u.createElementVNode(u.Fragment,null,[t.appendIcon&&u.createVNode(_t,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&u.createVNode(ka,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),u.createElementVNode("div",{class:"v-list-item__spacer"},null)])]}}),[[ns,y.value&&te.value]])}),{activate:s,isActivated:c,isGroupActivator:x,isSelected:f,list:g,select:l,root:k,id:h,link:o}}}),u$=Re({color:String,inset:Boolean,sticky:Boolean,title:String,...Ot(),...ln()},"VListSubheader"),Ip=et()({name:"VListSubheader",props:u$(),setup(t,e){let{slots:n}=e;const{textColorClasses:r,textColorStyles:i}=Ji(()=>t.color);return st(()=>{const o=!!(n.default||t.title);return u.createVNode(t.tag,{class:u.normalizeClass(["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},r.value,t.class]),style:u.normalizeStyle([{textColorStyles:i},t.style])},{default:()=>{var a;return[o&&u.createElementVNode("div",{class:"v-list-subheader__text"},[((a=n.default)==null?void 0:a.call(n))??t.title])]}})}),{}}}),d$=Re({items:Array,returnObject:Boolean},"VListChildren"),LI=et()({name:"VListChildren",props:d$(),setup(t,e){let{slots:n}=e;return TI(),()=>{var r,i;return((r=n.default)==null?void 0:r.call(n))??((i=t.items)==null?void 0:i.map(o=>{var b,x;let{children:a,props:s,type:c,raw:l}=o;if(c==="divider")return((b=n.divider)==null?void 0:b.call(n,{props:s}))??u.createVNode(Mn,s,null);if(c==="subheader")return((x=n.subheader)==null?void 0:x.call(n,{props:s}))??u.createVNode(Ip,s,null);const d={subtitle:n.subtitle?k=>{var E;return(E=n.subtitle)==null?void 0:E.call(n,{...k,item:l})}:void 0,prepend:n.prepend?k=>{var E;return(E=n.prepend)==null?void 0:E.call(n,{...k,item:l})}:void 0,append:n.append?k=>{var E;return(E=n.append)==null?void 0:E.call(n,{...k,item:l})}:void 0,title:n.title?k=>{var E;return(E=n.title)==null?void 0:E.call(n,{...k,item:l})}:void 0},f=PI.filterProps(s);return a?u.createVNode(PI,u.mergeProps(f,{value:t.returnObject?l:s==null?void 0:s.value,rawId:s==null?void 0:s.value}),{activator:k=>{let{props:E}=k;const m={...s,...E,value:t.returnObject?l:s.value};return n.header?n.header({props:m}):u.createVNode(ir,m,d)},default:()=>u.createVNode(LI,{items:a,returnObject:t.returnObject},n)}):n.item?n.item({props:s}):u.createVNode(ir,u.mergeProps(s,{value:t.returnObject?l:s.value}),d)}))}}}),RI=Re({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),f$=new Set(["item","divider","subheader"]);function su(t,e){const n=Lr(e,t.itemTitle,e),r=Lr(e,t.itemValue,n),i=Lr(e,t.itemChildren),o=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?Sr(e,["children"]):e:void 0:Lr(e,t.itemProps);let a=Lr(e,t.itemType,"item");f$.has(a)||(a="item");const s={title:n,value:r,...o};return{type:a,title:String(s.title??""),value:s.value,props:s,children:a==="item"&&Array.isArray(i)?BI(t,i):void 0,raw:e}}su.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function BI(t,e){const n=Vh(t,su.neededProps),r=[];for(const i of e)r.push(su(n,i));return r}function jI(t){const e=u.computed(()=>BI(t,t.items)),n=u.computed(()=>e.value.some(s=>s.value===null)),r=u.shallowRef(new Map),i=u.shallowRef([]);u.watchEffect(()=>{const s=e.value,c=new Map,l=[];for(let d=0;d<s.length;d++){const f=s[d];if(Lb(f.value)||f.value===null){let b=c.get(f.value);b||(b=[],c.set(f.value,b)),b.push(f)}else l.push(f)}r.value=c,i.value=l});function o(s){const c=r.value,l=e.value,d=i.value,f=n.value,b=t.returnObject,x=!!t.valueComparator,k=t.valueComparator||Ri,E=Vh(t,su.neededProps),m=[];e:for(const h of s){if(!f&&h===null)continue;if(b&&typeof h=="string"){m.push(su(E,h));continue}const g=c.get(h);if(x||!g){for(const w of x?l:d)if(k(h,w.value)){m.push(w);continue e}m.push(su(E,h));continue}m.push(...g)}return m}function a(s){return t.returnObject?s.map(c=>{let{raw:l}=c;return l}):s.map(c=>{let{value:l}=c;return l})}return{items:e,transformIn:o,transformOut:a}}const h$=new Set(["item","divider","subheader"]);function p$(t,e){const n=Lb(e)?e:Lr(e,t.itemTitle),r=Lb(e)?e:Lr(e,t.itemValue,void 0),i=Lr(e,t.itemChildren),o=t.itemProps===!0?Sr(e,["children"]):Lr(e,t.itemProps);let a=Lr(e,t.itemType,"item");h$.has(a)||(a="item");const s={title:n,value:r,...o};return{type:a,title:s.title,value:s.value,props:s,children:a==="item"&&i?FI(t,i):void 0,raw:e}}function FI(t,e){const n=[];for(const r of e)n.push(p$(t,r));return n}function m$(t){return{items:u.computed(()=>FI(t,t.items))}}const g$=Re({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:jt,collapseIcon:jt,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Br(),"onClick:select":Br(),"onUpdate:opened":Br(),...n$({selectStrategy:"single-leaf",openStrategy:"list"}),...Ho(),...Ot(),...ai(),...Uo(),...zo(),...RI(),...si(),...ln(),...wn(),...$o({variant:"text"})},"VList"),ji=et()({name:"VList",props:g$(),emits:{"update:selected":t=>!0,"update:activated":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:activate":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:r}=m$(t),{themeClasses:i}=Jn(t),{backgroundColorClasses:o,backgroundColorStyles:a}=li(()=>t.bgColor),{borderClasses:s}=Ca(t),{densityClasses:c}=bo(t),{dimensionStyles:l}=Wo(t),{elevationClasses:d}=Sa(t),{roundedClasses:f}=Si(t),{children:b,open:x,parents:k,select:E,getPath:m}=r$(t),h=u.toRef(()=>t.lines?`v-list--${t.lines}-line`:void 0),g=u.toRef(()=>t.activeColor),w=u.toRef(()=>t.baseColor),p=u.toRef(()=>t.color);TI({filterable:t.filterable}),Zi({VListGroup:{activeColor:g,baseColor:w,color:p,expandIcon:u.toRef(()=>t.expandIcon),collapseIcon:u.toRef(()=>t.collapseIcon)},VListItem:{activeClass:u.toRef(()=>t.activeClass),activeColor:g,baseColor:w,color:p,density:u.toRef(()=>t.density),disabled:u.toRef(()=>t.disabled),lines:u.toRef(()=>t.lines),nav:u.toRef(()=>t.nav),slim:u.toRef(()=>t.slim),variant:u.toRef(()=>t.variant)}});const v=u.shallowRef(!1),y=u.ref();function S(L){v.value=!0}function T(L){v.value=!1}function C(L){var R;!v.value&&!(L.relatedTarget&&((R=y.value)!=null&&R.contains(L.relatedTarget)))&&P()}function M(L){const R=L.target;if(!(!y.value||R.tagName==="INPUT"&&["Home","End"].includes(L.key)||R.tagName==="TEXTAREA")){if(L.key==="ArrowDown")P("next");else if(L.key==="ArrowUp")P("prev");else if(L.key==="Home")P("first");else if(L.key==="End")P("last");else return;L.preventDefault()}}function A(L){v.value=!0}function P(L){if(y.value)return Ed(y.value,L)}return st(()=>u.createVNode(t.tag,{ref:y,class:u.normalizeClass(["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav,"v-list--slim":t.slim},i.value,o.value,s.value,c.value,d.value,h.value,f.value,t.class]),style:u.normalizeStyle([a.value,l.value,t.style]),tabindex:t.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:S,onFocusout:T,onFocus:C,onKeydown:M,onMousedown:A},{default:()=>[u.createVNode(LI,{items:r.value,returnObject:t.returnObject},n)]})),{open:x,select:E,focus:P,children:b,parents:k,getPath:m}}}),v$=Re({start:Boolean,end:Boolean,...Ot(),...ln()},"VListItemAction"),y$=et()({name:"VListItemAction",props:v$(),setup(t,e){let{slots:n}=e;return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class]),style:u.normalizeStyle(t.style)},n)),{}}}),b$=Re({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Sr($d({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:a0}}),["absolute"])},"VMenu"),Go=et()({name:"VMenu",props:b$(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Lt(t,"modelValue"),{scopeId:i}=ql(),{isRtl:o}=Bi(),a=u.useId(),s=u.toRef(()=>t.id||`v-menu-${a}`),c=u.ref(),l=u.inject(f0,null),d=u.shallowRef(new Set);u.provide(f0,{register(){d.value.add(a)},unregister(){d.value.delete(a)},closeParents(m){setTimeout(()=>{var h;!d.value.size&&!t.persistent&&(m==null||(h=c.value)!=null&&h.contentEl&&!v8(m,c.value.contentEl))&&(r.value=!1,l==null||l.closeParents())},40)}}),u.onBeforeUnmount(()=>{l==null||l.unregister(),document.removeEventListener("focusin",f)}),u.onDeactivated(()=>r.value=!1);async function f(m){var w,p,v;const h=m.relatedTarget,g=m.target;await u.nextTick(),r.value&&h!==g&&((w=c.value)!=null&&w.contentEl)&&((p=c.value)!=null&&p.globalTop)&&![document,c.value.contentEl].includes(g)&&!c.value.contentEl.contains(g)&&((v=kd(c.value.contentEl)[0])==null||v.focus())}u.watch(r,m=>{m?(l==null||l.register(),yr&&!t.disableInitialFocus&&document.addEventListener("focusin",f,{once:!0})):(l==null||l.unregister(),yr&&document.removeEventListener("focusin",f))},{immediate:!0});function b(m){l==null||l.closeParents(m)}function x(m){var h,g,w,p,v;if(!t.disabled)if(m.key==="Tab"||m.key==="Enter"&&!t.closeOnContentClick){if(m.key==="Enter"&&(m.target instanceof HTMLTextAreaElement||m.target instanceof HTMLInputElement&&m.target.closest("form")))return;m.key==="Enter"&&m.preventDefault(),TT(kd((h=c.value)==null?void 0:h.contentEl,!1),m.shiftKey?"prev":"next",S=>S.tabIndex>=0)||(r.value=!1,(w=(g=c.value)==null?void 0:g.activatorEl)==null||w.focus())}else t.submenu&&m.key===(o.value?"ArrowRight":"ArrowLeft")&&(r.value=!1,(v=(p=c.value)==null?void 0:p.activatorEl)==null||v.focus())}function k(m){var g;if(t.disabled)return;const h=(g=c.value)==null?void 0:g.contentEl;h&&r.value?m.key==="ArrowDown"?(m.preventDefault(),m.stopImmediatePropagation(),Ed(h,"next")):m.key==="ArrowUp"?(m.preventDefault(),m.stopImmediatePropagation(),Ed(h,"prev")):t.submenu&&(m.key===(o.value?"ArrowRight":"ArrowLeft")?r.value=!1:m.key===(o.value?"ArrowLeft":"ArrowRight")&&(m.preventDefault(),Ed(h,"first"))):(t.submenu?m.key===(o.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(m.key))&&(r.value=!0,m.preventDefault(),setTimeout(()=>setTimeout(()=>k(m))))}const E=u.computed(()=>u.mergeProps({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-controls":s.value,onKeydown:k},t.activatorProps));return st(()=>{const m=Ea.filterProps(t);return u.createVNode(Ea,u.mergeProps({ref:c,id:s.value,class:["v-menu",t.class],style:t.style},m,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,absolute:!0,activatorProps:E.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":b,onKeydown:x},i),{activator:n.activator,default:function(){for(var h=arguments.length,g=new Array(h),w=0;w<h;w++)g[w]=arguments[w];return u.createVNode(en,{root:"VMenu"},{default:()=>{var p;return[(p=n.default)==null?void 0:p.call(n,...g)]}})}})}),qi({id:s,openChildren:d},c)}}),w$=Re({renderless:Boolean,...Ot()},"VVirtualScrollItem"),HI=et()({name:"VVirtualScrollItem",inheritAttrs:!1,props:w$(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{resizeRef:o,contentRect:a}=ru(void 0,"border");u.watch(()=>{var s;return(s=a.value)==null?void 0:s.height},s=>{s!=null&&r("update:height",s)}),st(()=>{var s,c;return t.renderless?u.createElementVNode(u.Fragment,null,[(s=i.default)==null?void 0:s.call(i,{itemRef:o})]):u.createElementVNode("div",u.mergeProps({ref:o,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(c=i.default)==null?void 0:c.call(i)])})}}),x$=-1,C$=1,k0=100,zI=Re({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function $I(t,e){const n=Us(),r=u.shallowRef(0);u.watchEffect(()=>{r.value=parseFloat(t.itemHeight||0)});const i=u.shallowRef(0),o=u.shallowRef(Math.ceil((parseInt(t.height)||n.height.value)/(r.value||16))||1),a=u.shallowRef(0),s=u.shallowRef(0),c=u.ref(),l=u.ref();let d=0;const{resizeRef:f,contentRect:b}=ru();u.watchEffect(()=>{f.value=c.value});const x=u.computed(()=>{var K;return c.value===document.documentElement?n.height.value:((K=b.value)==null?void 0:K.height)||parseInt(t.height)||0}),k=u.computed(()=>!!(c.value&&l.value&&x.value&&r.value));let E=Array.from({length:e.value.length}),m=Array.from({length:e.value.length});const h=u.shallowRef(0);let g=-1;function w(K){return E[K]||r.value}const p=h8(()=>{const K=performance.now();m[0]=0;const te=e.value.length;for(let G=1;G<=te-1;G++)m[G]=(m[G-1]||0)+w(G-1);h.value=Math.max(h.value,performance.now()-K)},h),v=u.watch(k,K=>{K&&(v(),d=l.value.offsetTop,p.immediate(),z(),~g&&u.nextTick(()=>{yr&&window.requestAnimationFrame(()=>{Y(g),g=-1})}))});u.onScopeDispose(()=>{p.clear()});function y(K,te){const G=E[K],ue=r.value;r.value=ue?Math.min(r.value,te):te,(G!==te||ue!==r.value)&&(E[K]=te,p())}function S(K){K=Rr(K,0,e.value.length-1);const te=Math.floor(K),G=K%1,ue=te+1,J=m[te]||0,be=m[ue]||J;return J+(be-J)*G}function T(K){return S$(m,K)}let C=0,M=0,A=0;u.watch(x,(K,te)=>{te&&(z(),K<te&&requestAnimationFrame(()=>{M=0,z()}))});let P=-1;function L(){if(!c.value||!l.value)return;const K=c.value.scrollTop,te=performance.now();te-A>500?(M=Math.sign(K-C),d=l.value.offsetTop):M=K-C,C=K,A=te,window.clearTimeout(P),P=window.setTimeout(R,500),z()}function R(){!c.value||!l.value||(M=0,A=0,window.clearTimeout(P),z())}let j=-1;function z(){cancelAnimationFrame(j),j=requestAnimationFrame($)}function $(){if(!c.value||!x.value||!r.value)return;const K=C-d,te=Math.sign(M),G=Math.max(0,K-k0),ue=Rr(T(G),0,e.value.length),J=K+x.value+k0,be=Rr(T(J)+1,ue+1,e.value.length);if((te!==x$||ue<i.value)&&(te!==C$||be>o.value)){const de=S(i.value)-S(ue),ce=S(be)-S(o.value);Math.max(de,ce)>k0?(i.value=ue,o.value=be):(ue<=0&&(i.value=ue),be>=e.value.length&&(o.value=be))}a.value=S(i.value),s.value=S(e.value.length)-S(o.value)}function Y(K){const te=S(K);!c.value||K&&!te?g=K:c.value.scrollTop=te}const ae=u.computed(()=>e.value.slice(i.value,o.value).map((K,te)=>{const G=te+i.value;return{raw:K,index:G,key:Lr(K,t.itemKey,G)}}));return u.watch(e,()=>{E=Array.from({length:e.value.length}),m=Array.from({length:e.value.length}),p.immediate(),z()},{deep:1}),{calculateVisibleItems:z,containerRef:c,markerRef:l,computedItems:ae,paddingTop:a,paddingBottom:s,scrollToIndex:Y,handleScroll:L,handleScrollend:R,handleItemResize:y}}function S$(t,e){let n=t.length-1,r=0,i=0,o=null,a=-1;if(t[n]<e)return n;for(;r<=n;)if(i=r+n>>1,o=t[i],o>e)n=i-1;else if(o<e)a=i,r=i+1;else return o===e?i:r;return a}const k$=Re({items:{type:Array,default:()=>[]},renderless:Boolean,...zI(),...Ot(),...Uo()},"VVirtualScroll"),UI=et()({name:"VVirtualScroll",props:k$(),setup(t,e){let{slots:n}=e;const r=rr("VVirtualScroll"),{dimensionStyles:i}=Wo(t),{calculateVisibleItems:o,containerRef:a,markerRef:s,handleScroll:c,handleScrollend:l,handleItemResize:d,scrollToIndex:f,paddingTop:b,paddingBottom:x,computedItems:k}=$I(t,u.toRef(()=>t.items));return wo(()=>t.renderless,()=>{function E(){var g,w;const h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[h]("scroll",c,{passive:!0}),document[h]("scrollend",l)):((g=a.value)==null||g[h]("scroll",c,{passive:!0}),(w=a.value)==null||w[h]("scrollend",l))}u.onMounted(()=>{a.value=UT(r.vnode.el,!0),E(!0)}),u.onScopeDispose(E)}),st(()=>{const E=k.value.map(m=>u.createVNode(HI,{key:m.key,renderless:t.renderless,"onUpdate:height":h=>d(m.index,h)},{default:h=>{var g;return(g=n.default)==null?void 0:g.call(n,{item:m.raw,index:m.index,...h})}}));return t.renderless?u.createElementVNode(u.Fragment,null,[u.createElementVNode("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:gt(b.value)}},null),E,u.createElementVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:gt(x.value)}},null)]):u.createElementVNode("div",{ref:a,class:u.normalizeClass(["v-virtual-scroll",t.class]),onScrollPassive:c,onScrollend:l,style:u.normalizeStyle([i.value,t.style])},[u.createElementVNode("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:gt(b.value),paddingBottom:gt(x.value)}},[E])])}),{calculateVisibleItems:o,scrollToIndex:f}}});function WI(t,e){const n=u.shallowRef(!1);let r;function i(s){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function o(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(n.value){const c=u.watch(n,()=>{c(),s()})}else s()})}async function a(s){var d,f;if(s.key==="Tab"&&((d=e.value)==null||d.focus()),!["PageDown","PageUp","Home","End"].includes(s.key))return;const c=(f=t.value)==null?void 0:f.$el;if(!c)return;(s.key==="Home"||s.key==="End")&&c.scrollTo({top:s.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await o();const l=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const b=c.getBoundingClientRect().top;for(const x of l)if(x.getBoundingClientRect().top>=b){x.focus();break}}else{const b=c.getBoundingClientRect().bottom;for(const x of[...l].reverse())if(x.getBoundingClientRect().bottom<=b){x.focus();break}}}return{onScrollPassive:i,onKeydown:a}}const YI=Re({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:jt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...RI({itemChildren:!1})},"Select"),E$=Re({...YI(),...Sr(Ep({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ou({transition:{component:a0}})},"VSelect"),Xs=et()({name:"VSelect",props:E$(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=ci(),i=u.ref(),o=u.ref(),a=u.ref(),{items:s,transformIn:c,transformOut:l}=jI(t),d=Lt(t,"modelValue",[],K=>c(K===null?[null]:Zn(K)),K=>{const te=l(K);return t.multiple?te:te[0]??null}),f=u.computed(()=>typeof t.counterValue=="function"?t.counterValue(d.value):typeof t.counterValue=="number"?t.counterValue:d.value.length),b=kp(t),x=u.computed(()=>d.value.map(K=>K.value)),k=u.shallowRef(!1);let E="",m=-1,h;const g=u.computed(()=>t.hideSelected?s.value.filter(K=>!d.value.some(te=>(t.valueComparator||Ri)(te,K))):s.value),w=u.computed(()=>t.hideNoData&&!g.value.length||b.isReadonly.value||b.isDisabled.value),p=Lt(t,"menu"),v=u.computed({get:()=>p.value,set:K=>{var te;p.value&&!K&&((te=o.value)!=null&&te.openChildren.size)||K&&w.value||(p.value=K)}}),y=u.toRef(()=>v.value?t.closeText:t.openText),S=u.computed(()=>{var K;return{...t.menuProps,activatorProps:{...((K=t.menuProps)==null?void 0:K.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=u.ref(),C=WI(T,i);function M(K){t.openOnClear&&(v.value=!0)}function A(){w.value||(v.value=!v.value)}function P(K){rp(K)&&L(K)}function L(K){var ne,Q,Z;if(!K.key||b.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(K.key)&&K.preventDefault(),["Enter","ArrowDown"," "].includes(K.key)&&(v.value=!0),["Escape","Tab"].includes(K.key)&&(v.value=!1),K.key==="Home"?(ne=T.value)==null||ne.focus("first"):K.key==="End"&&((Q=T.value)==null||Q.focus("last"));const te=1e3;if(!rp(K))return;const G=performance.now();G-h>te&&(E="",m=-1),E+=K.key.toLowerCase(),h=G;const ue=g.value;function J(){let he=be();return he||E.at(-1)===E.at(-2)&&(E=E.slice(0,-1),he=be(),he)||(m=-1,he=be(),he)?he:(E=K.key.toLowerCase(),be())}function be(){for(let he=m+1;he<ue.length;he++){const X=ue[he];if(X.title.toLowerCase().startsWith(E))return[X,he]}}const de=J();if(!de)return;const[ce,V]=de;m=V,(Z=T.value)==null||Z.focus(V),t.multiple||(d.value=[ce])}function R(K){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!K.props.disabled)if(t.multiple){const G=d.value.findIndex(J=>(t.valueComparator||Ri)(J.value,K.value)),ue=te??!~G;if(~G){const J=ue?[...d.value,K]:[...d.value];J.splice(G,1),d.value=J}else ue&&(d.value=[...d.value,K])}else{const G=te!==!1;d.value=G?[K]:[],u.nextTick(()=>{v.value=!1})}}function j(K){var te;(te=T.value)!=null&&te.$el.contains(K.relatedTarget)||(v.value=!1)}function z(){var K;t.eager&&((K=a.value)==null||K.calculateVisibleItems())}function $(){var K;k.value&&((K=i.value)==null||K.focus())}function Y(K){k.value=!0}function ae(K){if(K==null)d.value=[];else if(eu(i.value,":autofill")||eu(i.value,":-webkit-autofill")){const te=s.value.find(G=>G.title===K);te&&R(te)}else i.value&&(i.value.value="")}return u.watch(v,()=>{if(!t.hideSelected&&v.value&&d.value.length){const K=g.value.findIndex(te=>d.value.some(G=>(t.valueComparator||Ri)(G.value,te.value)));yr&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var te;K>=0&&((te=a.value)==null||te.scrollToIndex(K))})}}),u.watch(()=>t.items,(K,te)=>{v.value||k.value&&t.hideNoData&&!te.length&&K.length&&(v.value=!0)}),st(()=>{const K=!!(t.chips||n.chip),te=!!(!t.hideNoData||g.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),G=d.value.length>0,ue=Fn.filterProps(t),J=G||!k.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return u.createVNode(Fn,u.mergeProps({ref:i},ue,{modelValue:d.value.map(be=>be.props.value).join(", "),"onUpdate:modelValue":ae,focused:k.value,"onUpdate:focused":be=>k.value=be,validationValue:d.externalValue,counterValue:f.value,dirty:G,class:["v-select",{"v-select--active-menu":v.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:J,"onClick:clear":M,"onMousedown:control":A,onBlur:j,onKeydown:L,"aria-label":r(y.value),title:r(y.value)}),{...n,default:()=>u.createElementVNode(u.Fragment,null,[u.createVNode(Go,u.mergeProps({ref:o,modelValue:v.value,"onUpdate:modelValue":be=>v.value=be,activator:"parent",contentClass:"v-select__content",disabled:w.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:z,onAfterLeave:$},S.value),{default:()=>[te&&u.createVNode(ji,u.mergeProps({ref:T,selected:x.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:be=>be.preventDefault(),onKeydown:P,onFocusin:Y,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},C,t.listProps),{default:()=>{var be,de,ce;return[(be=n["prepend-item"])==null?void 0:be.call(n),!g.value.length&&!t.hideNoData&&(((de=n["no-data"])==null?void 0:de.call(n))??u.createVNode(ir,{key:"no-data",title:r(t.noDataText)},null)),u.createVNode(UI,{ref:a,renderless:!0,items:g.value,itemKey:"value"},{default:V=>{var re,le,fe;let{item:ne,index:Q,itemRef:Z}=V;const he=b8(ne.props),X=u.mergeProps(ne.props,{ref:Z,key:ne.value,onClick:()=>R(ne,null)});return ne.type==="divider"?((re=n.divider)==null?void 0:re.call(n,{props:ne.raw,index:Q}))??u.createVNode(Mn,u.mergeProps(ne.props,{key:`divider-${Q}`}),null):ne.type==="subheader"?((le=n.subheader)==null?void 0:le.call(n,{props:ne.raw,index:Q}))??u.createVNode(Ip,u.mergeProps(ne.props,{key:`subheader-${Q}`}),null):((fe=n.item)==null?void 0:fe.call(n,{item:ne,index:Q,props:X}))??u.createVNode(ir,u.mergeProps(X,{role:"option"}),{prepend:ke=>{let{isSelected:q}=ke;return u.createElementVNode(u.Fragment,null,[t.multiple&&!t.hideSelected?u.createVNode(Ys,{key:ne.value,modelValue:q,ripple:!1,tabindex:"-1"},null):void 0,he.prependAvatar&&u.createVNode(ka,{image:he.prependAvatar},null),he.prependIcon&&u.createVNode(_t,{icon:he.prependIcon},null)])}})}}),(ce=n["append-item"])==null?void 0:ce.call(n)]}})]}),d.value.map((be,de)=>{function ce(Z){Z.stopPropagation(),Z.preventDefault(),R(be,!1)}const V={"onClick:close":ce,onKeydown(Z){Z.key!=="Enter"&&Z.key!==" "||(Z.preventDefault(),Z.stopPropagation(),ce(Z))},onMousedown(Z){Z.preventDefault(),Z.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ne=K?!!n.chip:!!n.selection,Q=ne?Pb(K?n.chip({item:be,index:de,props:V}):n.selection({item:be,index:de})):void 0;if(!(ne&&!Q))return u.createElementVNode("div",{key:be.value,class:"v-select__selection"},[K?n.chip?u.createVNode(en,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:be.title}}},{default:()=>[Q]}):u.createVNode(Gs,u.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:be.title,disabled:be.props.disabled},V),null):Q??u.createElementVNode("span",{class:"v-select__selection-text"},[be.title,t.multiple&&de<d.value.length-1&&u.createElementVNode("span",{class:"v-select__selection-comma"},[u.createTextVNode(",")])])])})]),"append-inner":function(){var V,ne;for(var be=arguments.length,de=new Array(be),ce=0;ce<be;ce++)de[ce]=arguments[ce];return u.createElementVNode(u.Fragment,null,[(V=n["append-inner"])==null?void 0:V.call(n,...de),t.menuIcon?u.createVNode(_t,{class:"v-select__menu-icon",color:(ne=i.value)==null?void 0:ne.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),qi({isFocused:k,menu:v,select:R},i)}}),Op=u.defineComponent({__name:"Monthpicker",props:{modelValue:{type:String,default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dialogWidth:{type:Number,default:380},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},yearText:{type:String,default:"Year"},monthText:{type:String,default:"Month"},years:{type:Array,default:[]},months:{type:Array,default:[0,1,2,3,4,5,6,7,8,9,10,11,12]},monthNames:{type:Array,default:["","January","February","March","April","May","June","July","August","September","October","November","December"]},format:{type:String,default:"yyyy-MM"},textFieldProps:{type:Object},datePickerProps:{type:Object},hideDetails:{type:Boolean},min:{type:String},max:{type:String}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r={year:0,month:0},i={year:0,month:0};u.ref(!1);const o=u.ref([]),a=()=>{if(!(r!=null&&r.year))return n.months;if(d.value<r.year)return[];let w=n.months;return r.year==d.value&&(w=w.filter(p=>p>=r.month)),w},s=w=>{if(console.log("update months of ",w),!w){o.value=[];return}let p=a();p.length&&(i!=null&&i.year)&&w>=i.year&&(p=p.filter(v=>v<=i.month)),o.value=p},c=u.ref(),l=w=>{c.value=w},d=u.computed({get(){return c.value?c.value.getFullYear():0},set(w){console.log("year",w);const p=c.value?c.value:new Date;let v=p.getUTCMonth();w&&(r==null?void 0:r.year)==w&&(v=r.month),l(w?new Date(Date.UTC(w,v,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())):null),s(w)}}),f=u.computed({get(){return console.log(c.value),c.value?c.value.getMonth():0},set(w){if(!c.value)return;const p=c.value?c.value:new Date;l(new Date(Date.UTC(p.getUTCFullYear(),w,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())))}}),b=u.computed(()=>n.format),x=u.computed(()=>c.value?wd(c.value,b.value):""),k=()=>{if(!n.modelValue||n.modelValue.length<7){l(null);return}let w=Qc(n.modelValue,b.value,new Date);r!=null&&r.year&&(w=new Date(Date.UTC(r.year,r.month,w.getUTCDate(),w.getUTCHours(),w.getUTCMinutes(),w.getUTCSeconds(),w.getUTCMilliseconds()))),l(w)},E=()=>{if(n.min){const w=Qc(n.min,b.value,new Date);r.year=w.getUTCFullYear(),r.month=w.getUTCMonth()}if(n.max){const w=Qc(n.max,b.value,new Date);i.year=w.getUTCFullYear(),i.month=w.getUTCMonth()}k(),s(d.value),console.log("init"),console.log(n.min,n.max),console.log(r,i)},m=e,h=w=>{w.value=!1,c.value||l(new Date),m("update:modelValue",x.value)},g=w=>{w.value=!1,l(null),m("update:modelValue",null)};return u.onMounted(()=>{u.nextTick(()=>{E()})}),(w,p)=>(u.openBlock(),u.createElementBlock("div",null,[u.createVNode(eo,{width:t.dialogWidth},{activator:u.withCtx(({isActive:v,props:y})=>[u.createVNode(Fn,u.mergeProps(y,{disabled:t.disabled,loading:t.loading,label:t.label,modelValue:x.value,"onUpdate:modelValue":p[0]||(p[0]=S=>x.value=S),"hide-details":t.hideDetails,variant:"underlined",onClick:p[1]||(p[1]=S=>E()),readonly:""}),{prepend:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-calendar-edit",color:v?"primary":"",size:"x-large"},null,8,["color"])]),loader:u.withCtx(()=>[u.createVNode(Nd,{color:"primary",indeterminate:"",absolute:"",height:"2"})]),_:2},1040,["disabled","loading","label","modelValue","hide-details"])]),default:u.withCtx(({isActive:v})=>[u.createVNode(jn,null,{default:u.withCtx(()=>[u.createVNode(Dr,{class:"px-0 py-0"},{default:u.withCtx(()=>[u.createVNode(vp,null,{default:u.withCtx(()=>[u.createVNode(Fd,null,{default:u.withCtx(()=>[u.createVNode(bp,null,{default:u.withCtx(()=>[t.years.length?(u.openBlock(),u.createBlock(Xs,{key:0,items:t.years,label:t.yearText,modelValue:d.value,"onUpdate:modelValue":p[2]||(p[2]=y=>d.value=y)},null,8,["items","label","modelValue"])):(u.openBlock(),u.createBlock(N9,{key:1,min:(r==null?void 0:r.year)||0,max:(i==null?void 0:i.year)||2025,type:"number",clearable:"",label:t.yearText,modelValue:d.value,"onUpdate:modelValue":p[3]||(p[3]=y=>d.value=y),controlVariant:"split"},null,8,["min","max","label","modelValue"])),u.createVNode(Xs,{"v-if":d.value>0,label:t.monthText,items:o.value,"item-title":y=>t.monthNames[y],"item-value":y=>y,modelValue:f.value,"onUpdate:modelValue":p[4]||(p[4]=y=>f.value=y)},null,8,["v-if","label","items","item-title","item-value","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(Xr),u.createVNode(dt,{color:"grey lighten-1",variant:"text",onClick:y=>g(v)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.clearText),1)]),_:2},1032,["onClick"]),u.createVNode(dt,{color:"green darken-1",variant:"text",onClick:y=>h(v)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.okText),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["width"])]))}}),T$=(t,e,n)=>{if(t==null||e==null)return-1;if(!e.length)return 0;t=t.toString().toLocaleLowerCase(),e=e.toString().toLocaleLowerCase();const r=[];let i=t.indexOf(e);for(;~i;)r.push([i,i+e.length]),i=t.indexOf(e,i+e.length);return r.length?r:-1};function E0(t,e){if(!(t==null||typeof t=="boolean"||t===-1))return typeof t=="number"?[[t,t+e.length]]:Array.isArray(t[0])?t:[t]}const T0=Re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function M$(t,e,n){var s;const r=[],i=(n==null?void 0:n.default)??T$,o=n!=null&&n.filterKeys?Zn(n.filterKeys):!1,a=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return r;e:for(let c=0;c<t.length;c++){const[l,d=l]=Zn(t[c]),f={},b={};let x=-1;if((e||a>0)&&!(n!=null&&n.noFilter)){if(typeof l=="object"){if(l.type==="divider"||l.type==="subheader")continue;const m=o||Object.keys(d);for(const h of m){const g=Lr(d,h),w=(s=n==null?void 0:n.customKeyFilter)==null?void 0:s[h];if(x=w?w(g,e,l):i(g,e,l),x!==-1&&x!==!1)w?f[h]=E0(x,e):b[h]=E0(x,e);else if((n==null?void 0:n.filterMode)==="every")continue e}}else x=i(l,e,l),x!==-1&&x!==!1&&(b.title=E0(x,e));const k=Object.keys(b).length,E=Object.keys(f).length;if(!k&&!E||(n==null?void 0:n.filterMode)==="union"&&E!==a&&!k||(n==null?void 0:n.filterMode)==="intersection"&&(E!==a||!k))continue}r.push({index:c,matches:{...b,...f}})}return r}function M0(t,e,n,r){const i=u.shallowRef([]),o=u.shallowRef(new Map),a=u.computed(()=>r!=null&&r.transform?u.unref(e).map(c=>[c,r.transform(c)]):u.unref(e));u.watchEffect(()=>{const c=typeof n=="function"?n():u.unref(n),l=typeof c!="string"&&typeof c!="number"?"":String(c),d=M$(a.value,l,{customKeyFilter:{...t.customKeyFilter,...u.unref(r==null?void 0:r.customKeyFilter)},default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),f=u.unref(e),b=[],x=new Map;d.forEach(k=>{let{index:E,matches:m}=k;const h=f[E];b.push(h),x.set(h.value,m)}),i.value=b,o.value=x});function s(c){return o.value.get(c.value)}return{filteredItems:i,filteredMatches:o,getMatches:s}}function I$(t,e,n){return n==null||!n.length?e:n.map((r,i)=>{const o=i===0?0:n[i-1][1],a=[u.createElementVNode("span",{class:u.normalizeClass(`${t}__unmask`)},[e.slice(o,r[0])]),u.createElementVNode("span",{class:u.normalizeClass(`${t}__mask`)},[e.slice(r[0],r[1])])];return i===n.length-1&&a.push(u.createElementVNode("span",{class:u.normalizeClass(`${t}__unmask`)},[e.slice(r[1])])),u.createElementVNode(u.Fragment,null,[a])})}const O$=Re({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...T0({filterKeys:["title"]}),...YI(),...Sr(Ep({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ou({transition:!1})},"VAutocomplete"),Ap=et()({name:"VAutocomplete",props:O$(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=ci(),i=u.ref(),o=u.shallowRef(!1),a=u.shallowRef(!0),s=u.shallowRef(!1),c=u.ref(),l=u.ref(),d=u.shallowRef(-1),{items:f,transformIn:b,transformOut:x}=jI(t),{textColorClasses:k,textColorStyles:E}=Ji(()=>{var Q;return(Q=i.value)==null?void 0:Q.color}),m=Lt(t,"search",""),h=Lt(t,"modelValue",[],Q=>b(Q===null?[null]:Zn(Q)),Q=>{const Z=x(Q);return t.multiple?Z:Z[0]??null}),g=u.computed(()=>typeof t.counterValue=="function"?t.counterValue(h.value):typeof t.counterValue=="number"?t.counterValue:h.value.length),w=kp(t),{filteredItems:p,getMatches:v}=M0(t,f,()=>a.value?"":m.value),y=u.computed(()=>t.hideSelected?p.value.filter(Q=>!h.value.some(Z=>Z.value===Q.value)):p.value),S=u.computed(()=>!!(t.chips||n.chip)),T=u.computed(()=>S.value||!!n.selection),C=u.computed(()=>h.value.map(Q=>Q.props.value)),M=u.computed(()=>{var Z;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&m.value===((Z=y.value[0])==null?void 0:Z.title))&&y.value.length>0&&!a.value&&!s.value}),A=u.computed(()=>t.hideNoData&&!y.value.length||w.isReadonly.value||w.isDisabled.value),P=Lt(t,"menu"),L=u.computed({get:()=>P.value,set:Q=>{var Z;P.value&&!Q&&((Z=c.value)!=null&&Z.openChildren.size)||Q&&A.value||(P.value=Q)}}),R=u.computed(()=>L.value?t.closeText:t.openText),j=u.ref(),z=WI(j,i);function $(Q){t.openOnClear&&(L.value=!0),m.value=""}function Y(){A.value||(L.value=!0)}function ae(Q){A.value||(o.value&&(Q.preventDefault(),Q.stopPropagation()),L.value=!L.value)}function K(Q){var Z;(rp(Q)||Q.key==="Backspace")&&((Z=i.value)==null||Z.focus())}function te(Q){var X,re,le,fe,ke;if(w.isReadonly.value)return;const Z=(X=i.value)==null?void 0:X.selectionStart,he=h.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Q.key)&&Q.preventDefault(),["Enter","ArrowDown"].includes(Q.key)&&(L.value=!0),["Escape"].includes(Q.key)&&(L.value=!1),M.value&&["Enter","Tab"].includes(Q.key)&&!h.value.some(q=>{let{value:ie}=q;return ie===y.value[0].value})&&ne(y.value[0]),Q.key==="ArrowDown"&&M.value&&((re=j.value)==null||re.focus("next")),["Backspace","Delete"].includes(Q.key)){if(!t.multiple&&T.value&&h.value.length>0&&!m.value)return ne(h.value[0],!1);if(~d.value){Q.preventDefault();const q=d.value;ne(h.value[d.value],!1),d.value=q>=he-1?he-2:q}else Q.key==="Backspace"&&!m.value&&(d.value=he-1);return}if(t.multiple)if(Q.key==="ArrowLeft"){if(d.value<0&&Z&&Z>0)return;const q=d.value>-1?d.value-1:he-1;if(h.value[q])d.value=q;else{const ie=((le=m.value)==null?void 0:le.length)??null;d.value=-1,(fe=i.value)==null||fe.setSelectionRange(ie,ie)}}else if(Q.key==="ArrowRight"){if(d.value<0)return;const q=d.value+1;h.value[q]?d.value=q:(d.value=-1,(ke=i.value)==null||ke.setSelectionRange(0,0))}else~d.value&&rp(Q)&&(d.value=-1)}function G(Q){if(eu(i.value,":autofill")||eu(i.value,":-webkit-autofill")){const Z=f.value.find(he=>he.title===Q.target.value);Z&&ne(Z)}}function ue(){var Q;t.eager&&((Q=l.value)==null||Q.calculateVisibleItems())}function J(){var Q;o.value&&(a.value=!0,(Q=i.value)==null||Q.focus())}function be(Q){o.value=!0,setTimeout(()=>{s.value=!0})}function de(Q){s.value=!1}function ce(Q){(Q==null||Q===""&&!t.multiple&&!T.value)&&(h.value=[])}const V=u.shallowRef(!1);function ne(Q){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Q||Q.props.disabled))if(t.multiple){const he=h.value.findIndex(re=>(t.valueComparator||Ri)(re.value,Q.value)),X=Z??!~he;if(~he){const re=X?[...h.value,Q]:[...h.value];re.splice(he,1),h.value=re}else X&&(h.value=[...h.value,Q]);t.clearOnSelect&&(m.value="")}else{const he=Z!==!1;h.value=he?[Q]:[],m.value=he&&!T.value?Q.title:"",u.nextTick(()=>{L.value=!1,a.value=!0})}}return u.watch(o,(Q,Z)=>{var he;Q!==Z&&(Q?(V.value=!0,m.value=t.multiple||T.value?"":String(((he=h.value.at(-1))==null?void 0:he.props.title)??""),a.value=!0,u.nextTick(()=>V.value=!1)):(!t.multiple&&m.value==null&&(h.value=[]),L.value=!1,(t.multiple||T.value)&&(m.value=""),d.value=-1))}),u.watch(m,Q=>{!o.value||V.value||(Q&&(L.value=!0),a.value=!Q)}),u.watch(L,()=>{if(!t.hideSelected&&L.value&&h.value.length){const Q=y.value.findIndex(Z=>h.value.some(he=>Z.value===he.value));yr&&window.requestAnimationFrame(()=>{var Z;Q>=0&&((Z=l.value)==null||Z.scrollToIndex(Q))})}}),u.watch(()=>t.items,(Q,Z)=>{L.value||o.value&&!Z.length&&Q.length&&(L.value=!0)}),st(()=>{const Q=!!(!t.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Z=h.value.length>0,he=Fn.filterProps(t);return u.createVNode(Fn,u.mergeProps({ref:i},he,{modelValue:m.value,"onUpdate:modelValue":[X=>m.value=X,ce],focused:o.value,"onUpdate:focused":X=>o.value=X,validationValue:h.externalValue,counterValue:g.value,dirty:Z,onChange:G,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":L.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!T.value,"v-autocomplete--selecting-index":d.value>-1},t.class],style:t.style,readonly:w.isReadonly.value,placeholder:Z?void 0:t.placeholder,"onClick:clear":$,"onMousedown:control":Y,onKeydown:te}),{...n,default:()=>u.createElementVNode(u.Fragment,null,[u.createVNode(Go,u.mergeProps({ref:c,modelValue:L.value,"onUpdate:modelValue":X=>L.value=X,activator:"parent",contentClass:"v-autocomplete__content",disabled:A.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:ue,onAfterLeave:J},t.menuProps),{default:()=>[Q&&u.createVNode(ji,u.mergeProps({ref:j,filterable:!0,selected:C.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:X=>X.preventDefault(),onKeydown:K,onFocusin:be,onFocusout:de,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},z,t.listProps),{default:()=>{var X,re,le;return[(X=n["prepend-item"])==null?void 0:X.call(n),!y.value.length&&!t.hideNoData&&(((re=n["no-data"])==null?void 0:re.call(n))??u.createVNode(ir,{key:"no-data",title:r(t.noDataText)},null)),u.createVNode(UI,{ref:l,renderless:!0,items:y.value,itemKey:"value"},{default:fe=>{var Me,xe,ge;let{item:ke,index:q,itemRef:ie}=fe;const we=u.mergeProps(ke.props,{ref:ie,key:ke.value,active:M.value&&q===0?!0:void 0,onClick:()=>ne(ke,null)});return ke.type==="divider"?((Me=n.divider)==null?void 0:Me.call(n,{props:ke.raw,index:q}))??u.createVNode(Mn,u.mergeProps(ke.props,{key:`divider-${q}`}),null):ke.type==="subheader"?((xe=n.subheader)==null?void 0:xe.call(n,{props:ke.raw,index:q}))??u.createVNode(Ip,u.mergeProps(ke.props,{key:`subheader-${q}`}),null):((ge=n.item)==null?void 0:ge.call(n,{item:ke,index:q,props:we}))??u.createVNode(ir,u.mergeProps(we,{role:"option"}),{prepend:ye=>{let{isSelected:se}=ye;return u.createElementVNode(u.Fragment,null,[t.multiple&&!t.hideSelected?u.createVNode(Ys,{key:ke.value,modelValue:se,ripple:!1,tabindex:"-1"},null):void 0,ke.props.prependAvatar&&u.createVNode(ka,{image:ke.props.prependAvatar},null),ke.props.prependIcon&&u.createVNode(_t,{icon:ke.props.prependIcon},null)])},title:()=>{var ye;return a.value?ke.title:I$("v-autocomplete",ke.title,(ye=v(ke))==null?void 0:ye.title)}})}}),(le=n["append-item"])==null?void 0:le.call(n)]}})]}),h.value.map((X,re)=>{function le(ie){ie.stopPropagation(),ie.preventDefault(),ne(X,!1)}const fe={"onClick:close":le,onKeydown(ie){ie.key!=="Enter"&&ie.key!==" "||(ie.preventDefault(),ie.stopPropagation(),le(ie))},onMousedown(ie){ie.preventDefault(),ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ke=S.value?!!n.chip:!!n.selection,q=ke?Pb(S.value?n.chip({item:X,index:re,props:fe}):n.selection({item:X,index:re})):void 0;if(!(ke&&!q))return u.createElementVNode("div",{key:X.value,class:u.normalizeClass(["v-autocomplete__selection",re===d.value&&["v-autocomplete__selection--selected",k.value]]),style:u.normalizeStyle(re===d.value?E.value:{})},[S.value?n.chip?u.createVNode(en,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:X.title}}},{default:()=>[q]}):u.createVNode(Gs,u.mergeProps({key:"chip",closable:t.closableChips,size:"small",text:X.title,disabled:X.props.disabled},fe),null):q??u.createElementVNode("span",{class:"v-autocomplete__selection-text"},[X.title,t.multiple&&re<h.value.length-1&&u.createElementVNode("span",{class:"v-autocomplete__selection-comma"},[u.createTextVNode(",")])])])})]),"append-inner":function(){var fe,ke;for(var X=arguments.length,re=new Array(X),le=0;le<X;le++)re[le]=arguments[le];return u.createElementVNode(u.Fragment,null,[(fe=n["append-inner"])==null?void 0:fe.call(n,...re),t.menuIcon?u.createVNode(_t,{class:"v-autocomplete__menu-icon",color:(ke=i.value)==null?void 0:ke.fieldIconColor,icon:t.menuIcon,onMousedown:ae,onClick:m8,"aria-label":r(R.value),title:r(R.value),tabindex:"-1"},null):void 0])}})}),qi({isFocused:o,isPristine:a,menu:L,search:m,filteredItems:p,select:ne},i)}}),A$={key:1},GI=u.defineComponent({__name:"LinkageSelect",props:{modelValue:{},items:{},labels:{},errorMessages:{},disabled:{type:Boolean},selectOutOfOrder:{type:Boolean},chips:{type:Boolean},row:{type:Boolean},hideDetails:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=u.ref([...n.items]),o=u.ref([]),a=u.computed(()=>{let f=[...n.modelValue??[]];return s(f),f});u.onMounted(()=>{for(let f=0;f<n.labels.length;f++)o.value.push(c(f))}),i.value.forEach(f=>{f.forEach(b=>{b.Name||(b.Name=b.ID)})});const s=f=>{i.value.forEach((b,x)=>{f[x]||(f[x]="")}),f.forEach((b,x)=>{if(!b){f[x]="";return}var k=!1;for(var E of i.value[x])if(E.ID===b){k=!0;break}if(!k){f[x]="";return}if(x!==0){var m=f[x-1];if(m){for(const g of i.value[x-1])if(g.ID===m){for(var h of g.ChildrenIDs)if(h===b)return}}else{n.selectOutOfOrder||(f[x]="");return}f[x]=""}})},c=f=>{if(f===0)return i.value[f];let b=[];if(a.value[f-1]){let x={};for(const k of i.value[f-1])if(k.ID===a.value[f-1]){for(let E of k.ChildrenIDs)x[E]=!0;break}for(const k of i.value[f])x[k.ID]&&b.push(k);return b}if(n.selectOutOfOrder){for(let x=f-2;x>=0;x--)if(a.value[x]){b=d(a.value[x],x);for(let k=x+1;k<f;k++){let E=[];for(const m of b)E=E.concat(d(m.ID,k));b=E}return b}return b}return[]},l=(f,b)=>{const x=[...a.value];if(f){for(var k=b+1;k<x.length;k++)if(x[k]){var E=c(k);if(!E||E.length===0){x[k]="";continue}var m=!1;for(var h of E)if(h.ID===x[k]){m=!0;break}m||(x[k]="")}}else if(x[b]="",!n.selectOutOfOrder)for(let g=b+1;g<x.length;g++)x[g]="";n.labels.length>b+1&&(o.value[b+1]=c(b+1)),r("update:modelValue",x)},d=(f,b)=>{if(b+1>=i.value.length)return[];var x=[];for(const E of i.value[b])if(E.ID===f){x=E.ChildrenIDs;break}if(x.length==0)return[];var k=[];for(const E of i.value[b+1])x.includes(E.ID)&&k.push(E);return k};return(f,b)=>(u.openBlock(),u.createElementBlock("div",null,[f.row?(u.openBlock(),u.createBlock(Fd,{key:0},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(i.value,(x,k)=>(u.openBlock(),u.createBlock(bp,{key:k},{default:u.withCtx(()=>{var E;return[u.createVNode(Ap,{label:f.labels[k],items:o.value[k],"item-title":"Name","item-value":"ID",modelValue:a.value[k],"onUpdate:modelValue":[m=>a.value[k]=m,m=>l(m,k)],clearable:!f.chips,"error-messages":(E=f.errorMessages)==null?void 0:E[k],chips:f.chips,disabled:f.disabled,"hide-details":f.hideDetails,variant:"underlined"},null,8,["label","items","modelValue","onUpdate:modelValue","clearable","error-messages","chips","disabled","hide-details"])]}),_:2},1024))),128))]),_:1})):(u.openBlock(),u.createElementBlock("div",A$,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(i.value,(x,k)=>{var E;return u.openBlock(),u.createBlock(Ap,{label:f.labels[k],items:o.value[k],"item-value":"ID","item-title":"Name",modelValue:a.value[k],"onUpdate:modelValue":[m=>a.value[k]=m,m=>l(m,k)],variant:"underlined",clearable:!f.chips,"error-messages":(E=f.errorMessages)==null?void 0:E[k],chips:f.chips,disabled:f.disabled,"hide-details":f.hideDetails},null,8,["label","items","modelValue","onUpdate:modelValue","clearable","error-messages","chips","disabled","hide-details"])}),256))]))]))}});var XI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ec(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _p={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){D$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dp(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(e){return typeof e}:Dp=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function D$(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xo(){return xo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xo.apply(this,arguments)}function N$(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function P$(t,e){if(t==null)return{};var n=N$(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L$(t){return R$(t)||B$(t)||j$(t)||F$()}function R$(t){if(Array.isArray(t))return I0(t)}function B$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function j$(t,e){if(t){if(typeof t=="string")return I0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I0(t,e)}}function I0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H$="1.14.0";function rs(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var is=rs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Kd=rs(/Edge/i),ZI=rs(/firefox/i),Zd=rs(/safari/i)&&!rs(/chrome/i)&&!rs(/android/i),JI=rs(/iP(ad|od|hone)/i),z$=rs(/chrome/i)&&rs(/android/i),QI={capture:!1,passive:!1};function Kt(t,e,n){t.addEventListener(e,n,!is&&QI)}function Gt(t,e,n){t.removeEventListener(e,n,!is&&QI)}function Np(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function $$(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Xo(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Np(t,e):Np(t,e))||r&&t===n)return t;if(t===n)break}while(t=$$(t))}return null}var VI=/\s+/g;function Qn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(VI," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(VI," ")}}function xt(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function tc(t,e){var n="";if(typeof t=="string")n=t;else do{var r=xt(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function qI(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Ia(){var t=document.scrollingElement;return t||document.documentElement}function Hn(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,a,s,c,l,d,f;if(t!==window&&t.parentNode&&t!==Ia()?(o=t.getBoundingClientRect(),a=o.top,s=o.left,c=o.bottom,l=o.right,d=o.height,f=o.width):(a=0,s=0,c=window.innerHeight,l=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!is))do if(i&&i.getBoundingClientRect&&(xt(i,"transform")!=="none"||n&&xt(i,"position")!=="static")){var b=i.getBoundingClientRect();a-=b.top+parseInt(xt(i,"border-top-width")),s-=b.left+parseInt(xt(i,"border-left-width")),c=a+o.height,l=s+o.width;break}while(i=i.parentNode);if(r&&t!==window){var x=tc(i||t),k=x&&x.a,E=x&&x.d;x&&(a/=E,s/=k,f/=k,d/=E,c=a+d,l=s+f)}return{top:a,left:s,bottom:c,right:l,width:f,height:d}}}function eO(t,e,n){for(var r=Ks(t,!0),i=Hn(t)[e];r;){var o=Hn(r)[n],a=void 0;if(a=i>=o,!a)return r;if(r===Ia())break;r=Ks(r,!1)}return!1}function lu(t,e,n,r){for(var i=0,o=0,a=t.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==Nt.ghost&&(r||a[o]!==Nt.dragged)&&Xo(a[o],n.draggable,t,!1)){if(i===e)return a[o];i++}o++}return null}function O0(t,e){for(var n=t.lastElementChild;n&&(n===Nt.ghost||xt(n,"display")==="none"||e&&!Np(n,e));)n=n.previousElementSibling;return n||null}function or(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Nt.clone&&(!e||Np(t,e))&&n++;return n}function tO(t){var e=0,n=0,r=Ia();if(t)do{var i=tc(t),o=i.a,a=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function U$(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ks(t,e){if(!t||!t.getBoundingClientRect)return Ia();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=xt(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ia();if(r||e)return n;r=!0}}while(n=n.parentNode);return Ia()}function W$(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function A0(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Jd;function nO(t,e){return function(){if(!Jd){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Jd=setTimeout(function(){Jd=void 0},e)}}}function Y$(){clearTimeout(Jd),Jd=void 0}function rO(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _0(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function iO(t,e){xt(t,"position","absolute"),xt(t,"top",e.top),xt(t,"left",e.left),xt(t,"width",e.width),xt(t,"height",e.height)}function D0(t){xt(t,"position",""),xt(t,"top",""),xt(t,"left",""),xt(t,"width",""),xt(t,"height","")}var ui="Sortable"+new Date().getTime();function G$(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(xt(i,"display")==="none"||i===Nt.ghost)){t.push({target:i,rect:Hn(i)});var o=Ma({},t[t.length-1].rect);if(i.thisAnimationDuration){var a=tc(i,!0);a&&(o.top-=a.f,o.left-=a.e)}i.fromRect=o}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(U$(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,a=0;t.forEach(function(s){var c=0,l=s.target,d=l.fromRect,f=Hn(l),b=l.prevFromRect,x=l.prevToRect,k=s.rect,E=tc(l,!0);E&&(f.top-=E.f,f.left-=E.e),l.toRect=f,l.thisAnimationDuration&&A0(b,f)&&!A0(d,f)&&(k.top-f.top)/(k.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(c=K$(k,b,x,i.options)),A0(f,d)||(l.prevFromRect=d,l.prevToRect=f,c||(c=i.options.animation),i.animate(l,k,f,c)),c&&(o=!0,a=Math.max(a,c),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},c),l.thisAnimationDuration=c)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,i,o,a){if(a){xt(r,"transition",""),xt(r,"transform","");var s=tc(this.el),c=s&&s.a,l=s&&s.d,d=(i.left-o.left)/(c||1),f=(i.top-o.top)/(l||1);r.animatingX=!!d,r.animatingY=!!f,xt(r,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=X$(r),xt(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),xt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){xt(r,"transition",""),xt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function X$(t){return t.offsetWidth}function K$(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var cu=[],N0={initializeByDefault:!0},Qd={mount:function(e){for(var n in N0)N0.hasOwnProperty(n)&&!(n in e)&&(e[n]=N0[n]);cu.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),cu.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=e+"Global";cu.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][o]&&n[a.pluginName][o](Ma({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](Ma({sortable:n},r)))})},initializePlugins:function(e,n,r,i){cu.forEach(function(s){var c=s.pluginName;if(!(!e.options[c]&&!s.initializeByDefault)){var l=new s(e,n,e.options);l.sortable=e,l.options=e.options,e[c]=l,xo(r,l.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);typeof a<"u"&&(e.options[o]=a)}},getEventProperties:function(e,n){var r={};return cu.forEach(function(i){typeof i.eventProperties=="function"&&xo(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return cu.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(e[o.pluginName],r))}),i}};function Vd(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,c=t.oldIndex,l=t.newIndex,d=t.oldDraggableIndex,f=t.newDraggableIndex,b=t.originalEvent,x=t.putSortable,k=t.extraEventProperties;if(e=e||n&&n[ui],!!e){var E,m=e.options,h="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!is&&!Kd?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=a||n,E.from=s||n,E.item=i||n,E.clone=o,E.oldIndex=c,E.newIndex=l,E.oldDraggableIndex=d,E.newDraggableIndex=f,E.originalEvent=b,E.pullMode=x?x.lastPutMode:void 0;var g=Ma(Ma({},k),Qd.getEventProperties(r,e));for(var w in g)E[w]=g[w];n&&n.dispatchEvent(E),m[h]&&m[h].call(e,E)}}var Z$=["evt"],Fi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=P$(r,Z$);Qd.pluginEvent.bind(Nt)(e,n,Ma({dragEl:ot,parentEl:ar,ghostEl:$t,rootEl:zn,nextEl:nc,lastDownEl:Pp,cloneEl:sr,cloneHidden:Zs,dragStarted:ef,putSortable:Kr,activeSortable:Nt.active,originalEvent:i,oldIndex:uu,oldDraggableIndex:qd,newIndex:to,newDraggableIndex:Js,hideGhostForTarget:dO,unhideGhostForTarget:fO,cloneNowHidden:function(){Zs=!0},cloneNowShown:function(){Zs=!1},dispatchSortableEvent:function(s){Ei({sortable:n,name:s,originalEvent:i})}},o))};function Ei(t){Vd(Ma({putSortable:Kr,cloneEl:sr,targetEl:ot,rootEl:zn,oldIndex:uu,oldDraggableIndex:qd,newIndex:to,newDraggableIndex:Js},t))}var ot,ar,$t,zn,nc,Pp,sr,Zs,uu,to,qd,Js,Lp,Kr,du=!1,Rp=!1,Bp=[],rc,Ko,P0,L0,oO,aO,ef,fu,tf,nf=!1,jp=!1,Fp,di,R0=[],B0=!1,Hp=[],zp=typeof document<"u",$p=JI,sO=Kd||is?"cssFloat":"float",J$=zp&&!z$&&!JI&&"draggable"in document.createElement("div"),lO=function(){if(zp){if(is)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),cO=function(e,n){var r=xt(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=lu(e,0,n),a=lu(e,1,n),s=o&&xt(o),c=a&&xt(a),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Hn(o).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Hn(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||l>=i&&r[sO]==="none"||a&&r[sO]==="none"&&l+d>i)?"vertical":"horizontal"},Q$=function(e,n,r){var i=r?e.left:e.top,o=r?e.right:e.bottom,a=r?e.width:e.height,s=r?n.left:n.top,c=r?n.right:n.bottom,l=r?n.width:n.height;return i===s||o===c||i+a/2===s+l/2},V$=function(e,n){var r;return Bp.some(function(i){var o=i[ui].options.emptyInsertThreshold;if(!(!o||O0(i))){var a=Hn(i),s=e>=a.left-o&&e<=a.right+o,c=n>=a.top-o&&n<=a.bottom+o;if(s&&c)return r=i}}),r},uO=function(e){function n(o,a){return function(s,c,l,d){var f=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(o==null&&(a||f))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return n(o(s,c,l,d),a)(s,c,l,d);var b=(a?s:c).options.group.name;return o===!0||typeof o=="string"&&o===b||o.join&&o.indexOf(b)>-1}}var r={},i=e.group;(!i||Dp(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},dO=function(){!lO&&$t&&xt($t,"display","none")},fO=function(){!lO&&$t&&xt($t,"display","")};zp&&document.addEventListener("click",function(t){if(Rp)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Rp=!1,!1},!0);var ic=function(e){if(ot){e=e.touches?e.touches[0]:e;var n=V$(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[ui]._onDragOver(r)}}},q$=function(e){ot&&ot.parentNode[ui]._isOutsideThisEl(e.target)};function Nt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=xo({},e),t[ui]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cO(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Nt.supportPointer!==!1&&"PointerEvent"in window&&!Zd,emptyInsertThreshold:5};Qd.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);uO(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:J$,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Kt(t,"pointerdown",this._onTapStart):(Kt(t,"mousedown",this._onTapStart),Kt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Kt(t,"dragover",this),Kt(t,"dragenter",this)),Bp.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),xo(this,G$())}Nt.prototype={constructor:Nt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(fu=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,ot):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,d=i.filter;if(sU(r),!ot&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Zd&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=Xo(c,i.draggable,r,!1),!(c&&c.animated)&&Pp!==c)){if(uu=or(c),qd=or(c,i.draggable),typeof d=="function"){if(d.call(this,e,c,this)){Ei({sortable:n,rootEl:l,name:"filter",targetEl:c,toEl:r,fromEl:r}),Fi("filter",n,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=Xo(l,f.trim(),r,!1),f)return Ei({sortable:n,rootEl:f,name:"filter",targetEl:c,fromEl:r,toEl:r}),Fi("filter",n,{evt:e}),!0}),d)){o&&e.cancelable&&e.preventDefault();return}i.handle&&!Xo(l,i.handle,r,!1)||this._prepareDragStart(e,s,c)}}},_prepareDragStart:function(e,n,r){var i=this,o=i.el,a=i.options,s=o.ownerDocument,c;if(r&&!ot&&r.parentNode===o){var l=Hn(r);if(zn=o,ot=r,ar=ot.parentNode,nc=ot.nextSibling,Pp=r,Lp=a.group,Nt.dragged=ot,rc={target:ot,clientX:(n||e).clientX,clientY:(n||e).clientY},oO=rc.clientX-l.left,aO=rc.clientY-l.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,ot.style["will-change"]="all",c=function(){if(Fi("delayEnded",i,{evt:e}),Nt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!ZI&&i.nativeDraggable&&(ot.draggable=!0),i._triggerDragStart(e,n),Ei({sortable:i,name:"choose",originalEvent:e}),Qn(ot,a.chosenClass,!0)},a.ignore.split(",").forEach(function(d){qI(ot,d.trim(),j0)}),Kt(s,"dragover",ic),Kt(s,"mousemove",ic),Kt(s,"touchmove",ic),Kt(s,"mouseup",i._onDrop),Kt(s,"touchend",i._onDrop),Kt(s,"touchcancel",i._onDrop),ZI&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ot.draggable=!0),Fi("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Kd||is))){if(Nt.eventCanceled){this._onDrop();return}Kt(s,"mouseup",i._disableDelayedDrag),Kt(s,"touchend",i._disableDelayedDrag),Kt(s,"touchcancel",i._disableDelayedDrag),Kt(s,"mousemove",i._delayedDragTouchMoveHandler),Kt(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&Kt(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(c,a.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ot&&j0(ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Gt(e,"mouseup",this._disableDelayedDrag),Gt(e,"touchend",this._disableDelayedDrag),Gt(e,"touchcancel",this._disableDelayedDrag),Gt(e,"mousemove",this._delayedDragTouchMoveHandler),Gt(e,"touchmove",this._delayedDragTouchMoveHandler),Gt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Kt(document,"pointermove",this._onTouchMove):n?Kt(document,"touchmove",this._onTouchMove):Kt(document,"mousemove",this._onTouchMove):(Kt(ot,"dragend",this),Kt(zn,"dragstart",this._onDragStart));try{document.selection?Wp(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(du=!1,zn&&ot){Fi("dragStarted",this,{evt:n}),this.nativeDraggable&&Kt(document,"dragover",q$);var r=this.options;!e&&Qn(ot,r.dragClass,!1),Qn(ot,r.ghostClass,!0),Nt.active=this,e&&this._appendGhost(),Ei({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ko){this._lastX=Ko.clientX,this._lastY=Ko.clientY,dO();for(var e=document.elementFromPoint(Ko.clientX,Ko.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ko.clientX,Ko.clientY),e!==n);)n=e;if(ot.parentNode[ui]._isOutsideThisEl(e),n)do{if(n[ui]){var r=void 0;if(r=n[ui]._onDragOver({clientX:Ko.clientX,clientY:Ko.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);fO()}},_onTouchMove:function(e){if(rc){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=e.touches?e.touches[0]:e,a=$t&&tc($t,!0),s=$t&&a&&a.a,c=$t&&a&&a.d,l=$p&&di&&tO(di),d=(o.clientX-rc.clientX+i.x)/(s||1)+(l?l[0]-R0[0]:0)/(s||1),f=(o.clientY-rc.clientY+i.y)/(c||1)+(l?l[1]-R0[1]:0)/(c||1);if(!Nt.active&&!du){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if($t){a?(a.e+=d-(P0||0),a.f+=f-(L0||0)):a={a:1,b:0,c:0,d:1,e:d,f};var b="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");xt($t,"webkitTransform",b),xt($t,"mozTransform",b),xt($t,"msTransform",b),xt($t,"transform",b),P0=d,L0=f,Ko=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$t){var e=this.options.fallbackOnBody?document.body:zn,n=Hn(ot,!0,$p,!0,e),r=this.options;if($p){for(di=e;xt(di,"position")==="static"&&xt(di,"transform")==="none"&&di!==document;)di=di.parentNode;di!==document.body&&di!==document.documentElement?(di===document&&(di=Ia()),n.top+=di.scrollTop,n.left+=di.scrollLeft):di=Ia(),R0=tO(di)}$t=ot.cloneNode(!0),Qn($t,r.ghostClass,!1),Qn($t,r.fallbackClass,!0),Qn($t,r.dragClass,!0),xt($t,"transition",""),xt($t,"transform",""),xt($t,"box-sizing","border-box"),xt($t,"margin",0),xt($t,"top",n.top),xt($t,"left",n.left),xt($t,"width",n.width),xt($t,"height",n.height),xt($t,"opacity","0.8"),xt($t,"position",$p?"absolute":"fixed"),xt($t,"zIndex","100000"),xt($t,"pointerEvents","none"),Nt.ghost=$t,e.appendChild($t),xt($t,"transform-origin",oO/parseInt($t.style.width)*100+"% "+aO/parseInt($t.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,o=r.options;if(Fi("dragStart",this,{evt:e}),Nt.eventCanceled){this._onDrop();return}Fi("setupClone",this),Nt.eventCanceled||(sr=_0(ot),sr.draggable=!1,sr.style["will-change"]="",this._hideClone(),Qn(sr,this.options.chosenClass,!1),Nt.clone=sr),r.cloneId=Wp(function(){Fi("clone",r),!Nt.eventCanceled&&(r.options.removeCloneOnHide||zn.insertBefore(sr,ot),r._hideClone(),Ei({sortable:r,name:"clone"}))}),!n&&Qn(ot,o.dragClass,!0),n?(Rp=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Gt(document,"mouseup",r._onDrop),Gt(document,"touchend",r._onDrop),Gt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,ot)),Kt(document,"drop",r),xt(ot,"transform","translateZ(0)")),du=!0,r._dragStartId=Wp(r._dragStarted.bind(r,n,e)),Kt(document,"selectstart",r),ef=!0,Zd&&xt(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,o,a,s=this.options,c=s.group,l=Nt.active,d=Lp===c,f=s.sort,b=Kr||l,x,k=this,E=!1;if(B0)return;function m(Y,ae){Fi(Y,k,Ma({evt:e,isOwner:d,axis:x?"vertical":"horizontal",revert:a,dragRect:i,targetRect:o,canSort:f,fromSortable:b,target:r,completed:g,onMove:function(te,G){return Up(zn,n,ot,i,te,Hn(te),e,G)},changed:w},ae))}function h(){m("dragOverAnimationCapture"),k.captureAnimationState(),k!==b&&b.captureAnimationState()}function g(Y){return m("dragOverCompleted",{insertion:Y}),Y&&(d?l._hideClone():l._showClone(k),k!==b&&(Qn(ot,Kr?Kr.options.ghostClass:l.options.ghostClass,!1),Qn(ot,s.ghostClass,!0)),Kr!==k&&k!==Nt.active?Kr=k:k===Nt.active&&Kr&&(Kr=null),b===k&&(k._ignoreWhileAnimating=r),k.animateAll(function(){m("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(r===ot&&!ot.animated||r===n&&!r.animated)&&(fu=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(ot.parentNode[ui]._isOutsideThisEl(e.target),!Y&&ic(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function w(){to=or(ot),Js=or(ot,s.draggable),Ei({sortable:k,name:"change",toEl:n,newIndex:to,newDraggableIndex:Js,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Xo(r,s.draggable,n,!0),m("dragOver"),Nt.eventCanceled)return E;if(ot.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||k._ignoreWhileAnimating===r)return g(!1);if(Rp=!1,l&&!s.disabled&&(d?f||(a=ar!==zn):Kr===this||(this.lastPutMode=Lp.checkPull(this,l,ot,e))&&c.checkPut(this,l,ot,e))){if(x=this._getDirection(e,r)==="vertical",i=Hn(ot),m("dragOverValid"),Nt.eventCanceled)return E;if(a)return ar=zn,h(),this._hideClone(),m("revert"),Nt.eventCanceled||(nc?zn.insertBefore(ot,nc):zn.appendChild(ot)),g(!0);var p=O0(n,s.draggable);if(!p||rU(e,x,this)&&!p.animated){if(p===ot)return g(!1);if(p&&n===e.target&&(r=p),r&&(o=Hn(r)),Up(zn,n,ot,i,r,o,e,!!r)!==!1)return h(),n.appendChild(ot),ar=n,w(),g(!0)}else if(p&&nU(e,x,this)){var v=lu(n,0,s,!0);if(v===ot)return g(!1);if(r=v,o=Hn(r),Up(zn,n,ot,i,r,o,e,!1)!==!1)return h(),n.insertBefore(ot,v),ar=n,w(),g(!0)}else if(r.parentNode===n){o=Hn(r);var y=0,S,T=ot.parentNode!==n,C=!Q$(ot.animated&&ot.toRect||i,r.animated&&r.toRect||o,x),M=x?"top":"left",A=eO(r,"top","top")||eO(ot,"top","top"),P=A?A.scrollTop:void 0;fu!==r&&(S=o[M],nf=!1,jp=!C&&s.invertSwap||T),y=iU(e,r,o,x,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,jp,fu===r);var L;if(y!==0){var R=or(ot);do R-=y,L=ar.children[R];while(L&&(xt(L,"display")==="none"||L===$t))}if(y===0||L===r)return g(!1);fu=r,tf=y;var j=r.nextElementSibling,z=!1;z=y===1;var $=Up(zn,n,ot,i,r,o,e,z);if($!==!1)return($===1||$===-1)&&(z=$===1),B0=!0,setTimeout(tU,30),h(),z&&!j?n.appendChild(ot):r.parentNode.insertBefore(ot,z?j:r),A&&rO(A,0,P-A.scrollTop),ar=ot.parentNode,S!==void 0&&!jp&&(Fp=Math.abs(S-Hn(r)[M])),w(),g(!0)}if(n.contains(ot))return g(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Gt(document,"mousemove",this._onTouchMove),Gt(document,"touchmove",this._onTouchMove),Gt(document,"pointermove",this._onTouchMove),Gt(document,"dragover",ic),Gt(document,"mousemove",ic),Gt(document,"touchmove",ic)},_offUpEvents:function(){var e=this.el.ownerDocument;Gt(e,"mouseup",this._onDrop),Gt(e,"touchend",this._onDrop),Gt(e,"pointerup",this._onDrop),Gt(e,"touchcancel",this._onDrop),Gt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(to=or(ot),Js=or(ot,r.draggable),Fi("drop",this,{evt:e}),ar=ot&&ot.parentNode,to=or(ot),Js=or(ot,r.draggable),Nt.eventCanceled){this._nulling();return}du=!1,jp=!1,nf=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),F0(this.cloneId),F0(this._dragStartId),this.nativeDraggable&&(Gt(document,"drop",this),Gt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Zd&&xt(document.body,"user-select",""),xt(ot,"transform",""),e&&(ef&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),$t&&$t.parentNode&&$t.parentNode.removeChild($t),(zn===ar||Kr&&Kr.lastPutMode!=="clone")&&sr&&sr.parentNode&&sr.parentNode.removeChild(sr),ot&&(this.nativeDraggable&&Gt(ot,"dragend",this),j0(ot),ot.style["will-change"]="",ef&&!du&&Qn(ot,Kr?Kr.options.ghostClass:this.options.ghostClass,!1),Qn(ot,this.options.chosenClass,!1),Ei({sortable:this,name:"unchoose",toEl:ar,newIndex:null,newDraggableIndex:null,originalEvent:e}),zn!==ar?(to>=0&&(Ei({rootEl:ar,name:"add",toEl:ar,fromEl:zn,originalEvent:e}),Ei({sortable:this,name:"remove",toEl:ar,originalEvent:e}),Ei({rootEl:ar,name:"sort",toEl:ar,fromEl:zn,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:ar,originalEvent:e})),Kr&&Kr.save()):to!==uu&&to>=0&&(Ei({sortable:this,name:"update",toEl:ar,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:ar,originalEvent:e})),Nt.active&&((to==null||to===-1)&&(to=uu,Js=qd),Ei({sortable:this,name:"end",toEl:ar,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Fi("nulling",this),zn=ot=ar=$t=nc=sr=Pp=Zs=rc=Ko=ef=to=Js=uu=qd=fu=tf=Kr=Lp=Nt.dragged=Nt.ghost=Nt.clone=Nt.active=null,Hp.forEach(function(e){e.checked=!0}),Hp.length=P0=L0=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ot&&(this._onDragOver(e),eU(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,o=r.length,a=this.options;i<o;i++)n=r[i],Xo(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||aU(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(o,a){var s=i.children[a];Xo(s,this.options.draggable,i,!1)&&(r[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Xo(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Qd.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&uO(r)},destroy:function(){Fi("destroy",this);var e=this.el;e[ui]=null,Gt(e,"mousedown",this._onTapStart),Gt(e,"touchstart",this._onTapStart),Gt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Gt(e,"dragover",this),Gt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Bp.splice(Bp.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Zs){if(Fi("hideClone",this),Nt.eventCanceled)return;xt(sr,"display","none"),this.options.removeCloneOnHide&&sr.parentNode&&sr.parentNode.removeChild(sr),Zs=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Zs){if(Fi("showClone",this),Nt.eventCanceled)return;ot.parentNode==zn&&!this.options.group.revertClone?zn.insertBefore(sr,ot):nc?zn.insertBefore(sr,nc):zn.appendChild(sr),this.options.group.revertClone&&this.animate(ot,sr),xt(sr,"display",""),Zs=!1}}};function eU(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Up(t,e,n,r,i,o,a,s){var c,l=t[ui],d=l.options.onMove,f;return window.CustomEvent&&!is&&!Kd?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=n,c.draggedRect=r,c.related=i||e,c.relatedRect=o||Hn(e),c.willInsertAfter=s,c.originalEvent=a,t.dispatchEvent(c),d&&(f=d.call(l,c,a)),f}function j0(t){t.draggable=!1}function tU(){B0=!1}function nU(t,e,n){var r=Hn(lu(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function rU(t,e,n){var r=Hn(O0(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function iU(t,e,n,r,i,o,a,s){var c=r?t.clientY:t.clientX,l=r?n.height:n.width,d=r?n.top:n.left,f=r?n.bottom:n.right,b=!1;if(!a){if(s&&Fp<l*i){if(!nf&&(tf===1?c>d+l*o/2:c<f-l*o/2)&&(nf=!0),nf)b=!0;else if(tf===1?c<d+Fp:c>f-Fp)return-tf}else if(c>d+l*(1-i)/2&&c<f-l*(1-i)/2)return oU(e)}return b=b||a,b&&(c<d+l*o/2||c>f-l*o/2)?c>d+l/2?1:-1:0}function oU(t){return or(ot)<or(t)?1:-1}function aU(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function sU(t){Hp.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Hp.push(r)}}function Wp(t){return setTimeout(t,0)}function F0(t){return clearTimeout(t)}zp&&Kt(document,"touchmove",function(t){(Nt.active||du)&&t.cancelable&&t.preventDefault()}),Nt.utils={on:Kt,off:Gt,css:xt,find:qI,is:function(e,n){return!!Xo(e,n,e,!1)},extend:W$,throttle:nO,closest:Xo,toggleClass:Qn,clone:_0,index:or,nextTick:Wp,cancelNextTick:F0,detectDirection:cO,getChild:lu},Nt.get=function(t){return t[ui]},Nt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Nt.utils=Ma(Ma({},Nt.utils),r.utils)),Qd.mount(r)})},Nt.create=function(t,e){return new Nt(t,e)},Nt.version=H$;var kr=[],rf,H0,z0=!1,$0,U0,Yp,of;function lU(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Kt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Kt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Kt(document,"touchmove",this._handleFallbackAutoScroll):Kt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Gt(document,"dragover",this._handleAutoScroll):(Gt(document,"pointermove",this._handleFallbackAutoScroll),Gt(document,"touchmove",this._handleFallbackAutoScroll),Gt(document,"mousemove",this._handleFallbackAutoScroll)),hO(),Gp(),Y$()},nulling:function(){Yp=H0=rf=z0=of=$0=U0=null,kr.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,a);if(Yp=n,r||this.options.forceAutoScrollFallback||Kd||is||Zd){W0(n,this.options,s,r);var c=Ks(s,!0);z0&&(!of||o!==$0||a!==U0)&&(of&&hO(),of=setInterval(function(){var l=Ks(document.elementFromPoint(o,a),!0);l!==c&&(c=l,Gp()),W0(n,i.options,l,r)},10),$0=o,U0=a)}else{if(!this.options.bubbleScroll||Ks(s,!0)===Ia()){Gp();return}W0(n,this.options,Ks(s,!1),!1)}}},xo(t,{pluginName:"scroll",initializeByDefault:!0})}function Gp(){kr.forEach(function(t){clearInterval(t.pid)}),kr=[]}function hO(){clearInterval(of)}var W0=nO(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,c=Ia(),l=!1,d;H0!==n&&(H0=n,Gp(),rf=e.scroll,d=e.scrollFn,rf===!0&&(rf=Ks(n,!0)));var f=0,b=rf;do{var x=b,k=Hn(x),E=k.top,m=k.bottom,h=k.left,g=k.right,w=k.width,p=k.height,v=void 0,y=void 0,S=x.scrollWidth,T=x.scrollHeight,C=xt(x),M=x.scrollLeft,A=x.scrollTop;x===c?(v=w<S&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),y=p<T&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(v=w<S&&(C.overflowX==="auto"||C.overflowX==="scroll"),y=p<T&&(C.overflowY==="auto"||C.overflowY==="scroll"));var P=v&&(Math.abs(g-i)<=a&&M+w<S)-(Math.abs(h-i)<=a&&!!M),L=y&&(Math.abs(m-o)<=a&&A+p<T)-(Math.abs(E-o)<=a&&!!A);if(!kr[f])for(var R=0;R<=f;R++)kr[R]||(kr[R]={});(kr[f].vx!=P||kr[f].vy!=L||kr[f].el!==x)&&(kr[f].el=x,kr[f].vx=P,kr[f].vy=L,clearInterval(kr[f].pid),(P!=0||L!=0)&&(l=!0,kr[f].pid=setInterval((function(){r&&this.layer===0&&Nt.active._onTouchMove(Yp);var j=kr[this.layer].vy?kr[this.layer].vy*s:0,z=kr[this.layer].vx?kr[this.layer].vx*s:0;typeof d=="function"&&d.call(Nt.dragged.parentNode[ui],z,j,t,Yp,kr[this.layer].el)!=="continue"||rO(kr[this.layer].el,z,j)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&b!==c&&(b=Ks(b,!1)));z0=l}},30),pO=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(n){var l=r||o;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(d.clientX,d.clientY);c(),l&&!l.el.contains(f)&&(a("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Y0(){}Y0.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=lu(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:pO},xo(Y0,{pluginName:"revertOnSpill"});function G0(){}G0.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:pO},xo(G0,{pluginName:"removeOnSpill"});var Co;function cU(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Co=r},dragOverValid:function(n){var r=n.completed,i=n.target,o=n.onMove,a=n.activeSortable,s=n.changed,c=n.cancel;if(a.options.swap){var l=this.sortable.el,d=this.options;if(i&&i!==l){var f=Co;o(i)!==!1?(Qn(i,d.swapClass,!0),Co=i):Co=null,f&&f!==Co&&Qn(f,d.swapClass,!1)}s(),r(!0),c()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,o=n.dragEl,a=i||this.sortable,s=this.options;Co&&Qn(Co,s.swapClass,!1),Co&&(s.swap||i&&i.options.swap)&&o!==Co&&(a.captureAnimationState(),a!==r&&r.captureAnimationState(),uU(o,Co),a.animateAll(),a!==r&&r.animateAll())},nulling:function(){Co=null}},xo(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Co}}})}function uU(t,e){var n=t.parentNode,r=e.parentNode,i,o;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=or(t),o=or(e),n.isEqualNode(r)&&i<o&&o++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[o]))}var Ht=[],no=[],af,Zo,sf=!1,Hi=!1,hu=!1,In,lf,Xp;function dU(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Kt(document,"pointerup",this._deselectMultiDrag):(Kt(document,"mouseup",this._deselectMultiDrag),Kt(document,"touchend",this._deselectMultiDrag)),Kt(document,"keydown",this._checkKeyDown),Kt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var a="";Ht.length&&Zo===e?Ht.forEach(function(s,c){a+=(c?", ":"")+s.textContent}):a=o.textContent,i.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;In=r},delayEnded:function(){this.isMultiDrag=~Ht.indexOf(In)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var o=0;o<Ht.length;o++)no.push(_0(Ht[o])),no[o].sortableIndex=Ht[o].sortableIndex,no[o].draggable=!1,no[o].style["will-change"]="",Qn(no[o],this.options.selectedClass,!1),Ht[o]===In&&Qn(no[o],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,o=n.dispatchSortableEvent,a=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ht.length&&Zo===r&&(mO(!0,i),o("clone"),a()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,o=n.cancel;this.isMultiDrag&&(mO(!1,i),no.forEach(function(a){xt(a,"display","")}),r(),Xp=!1,o())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,o=n.cancel;this.isMultiDrag&&(no.forEach(function(a){xt(a,"display","none"),r.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),i(),Xp=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Zo&&Zo.multiDrag._deselectMultiDrag(),Ht.forEach(function(r){r.sortableIndex=or(r)}),Ht=Ht.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),hu=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ht.forEach(function(a){a!==In&&xt(a,"position","absolute")});var o=Hn(In,!1,!0,!0);Ht.forEach(function(a){a!==In&&iO(a,o)}),Hi=!0,sf=!0}i.animateAll(function(){Hi=!1,sf=!1,r.options.animation&&Ht.forEach(function(a){D0(a)}),r.options.sort&&Kp()})}},dragOver:function(n){var r=n.target,i=n.completed,o=n.cancel;Hi&&~Ht.indexOf(r)&&(i(!1),o())},revert:function(n){var r=n.fromSortable,i=n.rootEl,o=n.sortable,a=n.dragRect;Ht.length>1&&(Ht.forEach(function(s){o.addAnimationState({target:s,rect:Hi?Hn(s):a}),D0(s),s.fromRect=a,r.removeAnimationState(s)}),Hi=!1,fU(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,o=n.insertion,a=n.activeSortable,s=n.parentEl,c=n.putSortable,l=this.options;if(o){if(i&&a._hideClone(),sf=!1,l.animation&&Ht.length>1&&(Hi||!i&&!a.options.sort&&!c)){var d=Hn(In,!1,!0,!0);Ht.forEach(function(b){b!==In&&(iO(b,d),s.appendChild(b))}),Hi=!0}if(!i)if(Hi||Kp(),Ht.length>1){var f=Xp;a._showClone(r),a.options.animation&&!Xp&&f&&no.forEach(function(b){a.addAnimationState({target:b,rect:lf}),b.fromRect=lf,b.thisAnimationDuration=null})}else a._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,o=n.activeSortable;if(Ht.forEach(function(s){s.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){lf=xo({},r);var a=tc(In,!0);lf.top-=a.f,lf.left-=a.e}},dragOverAnimationComplete:function(){Hi&&(Hi=!1,Kp())},drop:function(n){var r=n.originalEvent,i=n.rootEl,o=n.parentEl,a=n.sortable,s=n.dispatchSortableEvent,c=n.oldIndex,l=n.putSortable,d=l||this.sortable;if(r){var f=this.options,b=o.children;if(!hu)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Qn(In,f.selectedClass,!~Ht.indexOf(In)),~Ht.indexOf(In))Ht.splice(Ht.indexOf(In),1),af=null,Vd({sortable:a,rootEl:i,name:"deselect",targetEl:In});else{if(Ht.push(In),Vd({sortable:a,rootEl:i,name:"select",targetEl:In}),r.shiftKey&&af&&a.el.contains(af)){var x=or(af),k=or(In);if(~x&&~k&&x!==k){var E,m;for(k>x?(m=x,E=k):(m=k,E=x+1);m<E;m++)~Ht.indexOf(b[m])||(Qn(b[m],f.selectedClass,!0),Ht.push(b[m]),Vd({sortable:a,rootEl:i,name:"select",targetEl:b[m]}))}}else af=In;Zo=d}if(hu&&this.isMultiDrag){if(Hi=!1,(o[ui].options.sort||o!==i)&&Ht.length>1){var h=Hn(In),g=or(In,":not(."+this.options.selectedClass+")");if(!sf&&f.animation&&(In.thisAnimationDuration=null),d.captureAnimationState(),!sf&&(f.animation&&(In.fromRect=h,Ht.forEach(function(p){if(p.thisAnimationDuration=null,p!==In){var v=Hi?Hn(p):h;p.fromRect=v,d.addAnimationState({target:p,rect:v})}})),Kp(),Ht.forEach(function(p){b[g]?o.insertBefore(p,b[g]):o.appendChild(p),g++}),c===or(In))){var w=!1;Ht.forEach(function(p){if(p.sortableIndex!==or(p)){w=!0;return}}),w&&s("update")}Ht.forEach(function(p){D0(p)}),d.animateAll()}Zo=d}(i===o||l&&l.lastPutMode!=="clone")&&no.forEach(function(p){p.parentNode&&p.parentNode.removeChild(p)})}},nullingGlobal:function(){this.isMultiDrag=hu=!1,no.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Gt(document,"pointerup",this._deselectMultiDrag),Gt(document,"mouseup",this._deselectMultiDrag),Gt(document,"touchend",this._deselectMultiDrag),Gt(document,"keydown",this._checkKeyDown),Gt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof hu<"u"&&hu)&&Zo===this.sortable&&!(n&&Xo(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Ht.length;){var r=Ht[0];Qn(r,this.options.selectedClass,!1),Ht.shift(),Vd({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},xo(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[ui];!r||!r.options.multiDrag||~Ht.indexOf(n)||(Zo&&Zo!==r&&(Zo.multiDrag._deselectMultiDrag(),Zo=r),Qn(n,r.options.selectedClass,!0),Ht.push(n))},deselect:function(n){var r=n.parentNode[ui],i=Ht.indexOf(n);!r||!r.options.multiDrag||!~i||(Qn(n,r.options.selectedClass,!1),Ht.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Ht.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var a;Hi&&o!==In?a=-1:Hi?a=or(o,":not(."+n.options.selectedClass+")"):a=or(o),i.push({multiDragElement:o,index:a})}),{items:L$(Ht),clones:[].concat(no),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function fU(t,e){Ht.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function mO(t,e){no.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function Kp(){Ht.forEach(function(t){t!==In&&t.parentNode&&t.parentNode.removeChild(t)})}Nt.mount(new lU),Nt.mount(G0,Y0);const hU=_$(Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:dU,Sortable:Nt,Swap:cU,default:Nt},Symbol.toStringTag,{value:"Module"})));var pU=_p.exports,gO;function mU(){return gO||(gO=1,function(t,e){(function(r,i){t.exports=i(u,hU)})(typeof self<"u"?self:pU,function(n,r){return function(i){var o={};function a(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return i[s].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=i,a.c=o,a.d=function(s,c,l){a.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:l})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,c){if(c&1&&(s=a(s)),c&8||c&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),c&2&&typeof s!="string")for(var d in s)a.d(l,d,(function(f){return s[f]}).bind(null,d));return l},a.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(c,"a",c),c},a.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},a.p="",a(a.s="fb15")}({"00ee":function(i,o,a){var s=a("b622"),c=s("toStringTag"),l={};l[c]="z",i.exports=String(l)==="[object z]"},"0366":function(i,o,a){var s=a("1c0b");i.exports=function(c,l,d){if(s(c),l===void 0)return c;switch(d){case 0:return function(){return c.call(l)};case 1:return function(f){return c.call(l,f)};case 2:return function(f,b){return c.call(l,f,b)};case 3:return function(f,b,x){return c.call(l,f,b,x)}}return function(){return c.apply(l,arguments)}}},"057f":function(i,o,a){var s=a("fc6a"),c=a("241c").f,l={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(b){try{return c(b)}catch{return d.slice()}};i.exports.f=function(x){return d&&l.call(x)=="[object Window]"?f(x):c(s(x))}},"06cf":function(i,o,a){var s=a("83ab"),c=a("d1e7"),l=a("5c6c"),d=a("fc6a"),f=a("c04e"),b=a("5135"),x=a("0cfb"),k=Object.getOwnPropertyDescriptor;o.f=s?k:function(m,h){if(m=d(m),h=f(h,!0),x)try{return k(m,h)}catch{}if(b(m,h))return l(!c.f.call(m,h),m[h])}},"0cfb":function(i,o,a){var s=a("83ab"),c=a("d039"),l=a("cc12");i.exports=!s&&!c(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,o,a){var s=a("23e7"),c=a("d58f").left,l=a("a640"),d=a("ae40"),f=l("reduce"),b=d("reduce",{1:0});s({target:"Array",proto:!0,forced:!f||!b},{reduce:function(k){return c(this,k,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,o,a){var s=a("c6b6"),c=a("9263");i.exports=function(l,d){var f=l.exec;if(typeof f=="function"){var b=f.call(l,d);if(typeof b!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return b}if(s(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(l,d)}},"159b":function(i,o,a){var s=a("da84"),c=a("fdbc"),l=a("17c2"),d=a("9112");for(var f in c){var b=s[f],x=b&&b.prototype;if(x&&x.forEach!==l)try{d(x,"forEach",l)}catch{x.forEach=l}}},"17c2":function(i,o,a){var s=a("b727").forEach,c=a("a640"),l=a("ae40"),d=c("forEach"),f=l("forEach");i.exports=!d||!f?function(x){return s(this,x,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,o,a){var s=a("d066");i.exports=s("document","documentElement")},"1c0b":function(i,o){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(i,o,a){var s=a("b622"),c=s("iterator"),l=!1;try{var d=0,f={next:function(){return{done:!!d++}},return:function(){l=!0}};f[c]=function(){return this},Array.from(f,function(){throw 2})}catch{}i.exports=function(b,x){if(!x&&!l)return!1;var k=!1;try{var E={};E[c]=function(){return{next:function(){return{done:k=!0}}}},b(E)}catch{}return k}},"1d80":function(i,o){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(i,o,a){var s=a("d039"),c=a("b622"),l=a("2d00"),d=c("species");i.exports=function(f){return l>=51||!s(function(){var b=[],x=b.constructor={};return x[d]=function(){return{foo:1}},b[f](Boolean).foo!==1})}},"23cb":function(i,o,a){var s=a("a691"),c=Math.max,l=Math.min;i.exports=function(d,f){var b=s(d);return b<0?c(b+f,0):l(b,f)}},"23e7":function(i,o,a){var s=a("da84"),c=a("06cf").f,l=a("9112"),d=a("6eeb"),f=a("ce4e"),b=a("e893"),x=a("94ca");i.exports=function(k,E){var m=k.target,h=k.global,g=k.stat,w,p,v,y,S,T;if(h?p=s:g?p=s[m]||f(m,{}):p=(s[m]||{}).prototype,p)for(v in E){if(S=E[v],k.noTargetGet?(T=c(p,v),y=T&&T.value):y=p[v],w=x(h?v:m+(g?".":"#")+v,k.forced),!w&&y!==void 0){if(typeof S==typeof y)continue;b(S,y)}(k.sham||y&&y.sham)&&l(S,"sham",!0),d(p,v,S,k)}}},"241c":function(i,o,a){var s=a("ca84"),c=a("7839"),l=c.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(f){return s(f,l)}},"25f0":function(i,o,a){var s=a("6eeb"),c=a("825a"),l=a("d039"),d=a("ad6d"),f="toString",b=RegExp.prototype,x=b[f],k=l(function(){return x.call({source:"a",flags:"b"})!="/a/b"}),E=x.name!=f;(k||E)&&s(RegExp.prototype,f,function(){var h=c(this),g=String(h.source),w=h.flags,p=String(w===void 0&&h instanceof RegExp&&!("flags"in b)?d.call(h):w);return"/"+g+"/"+p},{unsafe:!0})},"2ca0":function(i,o,a){var s=a("23e7"),c=a("06cf").f,l=a("50c4"),d=a("5a34"),f=a("1d80"),b=a("ab13"),x=a("c430"),k="".startsWith,E=Math.min,m=b("startsWith"),h=!x&&!m&&!!function(){var g=c(String.prototype,"startsWith");return g&&!g.writable}();s({target:"String",proto:!0,forced:!h&&!m},{startsWith:function(w){var p=String(f(this));d(w);var v=l(E(arguments.length>1?arguments[1]:void 0,p.length)),y=String(w);return k?k.call(p,y,v):p.slice(v,v+y.length)===y}})},"2d00":function(i,o,a){var s=a("da84"),c=a("342f"),l=s.process,d=l&&l.versions,f=d&&d.v8,b,x;f?(b=f.split("."),x=b[0]+b[1]):c&&(b=c.match(/Edge\/(\d+)/),(!b||b[1]>=74)&&(b=c.match(/Chrome\/(\d+)/),b&&(x=b[1]))),i.exports=x&&+x},"342f":function(i,o,a){var s=a("d066");i.exports=s("navigator","userAgent")||""},"35a1":function(i,o,a){var s=a("f5df"),c=a("3f8c"),l=a("b622"),d=l("iterator");i.exports=function(f){if(f!=null)return f[d]||f["@@iterator"]||c[s(f)]}},"37e8":function(i,o,a){var s=a("83ab"),c=a("9bf2"),l=a("825a"),d=a("df75");i.exports=s?Object.defineProperties:function(b,x){l(b);for(var k=d(x),E=k.length,m=0,h;E>m;)c.f(b,h=k[m++],x[h]);return b}},"3bbe":function(i,o,a){var s=a("861d");i.exports=function(c){if(!s(c)&&c!==null)throw TypeError("Can't set "+String(c)+" as a prototype");return c}},"3ca3":function(i,o,a){var s=a("6547").charAt,c=a("69f3"),l=a("7dd0"),d="String Iterator",f=c.set,b=c.getterFor(d);l(String,"String",function(x){f(this,{type:d,string:String(x),index:0})},function(){var k=b(this),E=k.string,m=k.index,h;return m>=E.length?{value:void 0,done:!0}:(h=s(E,m),k.index+=h.length,{value:h,done:!1})})},"3f8c":function(i,o){i.exports={}},4160:function(i,o,a){var s=a("23e7"),c=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},"428f":function(i,o,a){var s=a("da84");i.exports=s},"44ad":function(i,o,a){var s=a("d039"),c=a("c6b6"),l="".split;i.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return c(d)=="String"?l.call(d,""):Object(d)}:Object},"44d2":function(i,o,a){var s=a("b622"),c=a("7c73"),l=a("9bf2"),d=s("unscopables"),f=Array.prototype;f[d]==null&&l.f(f,d,{configurable:!0,value:c(null)}),i.exports=function(b){f[d][b]=!0}},"44e7":function(i,o,a){var s=a("861d"),c=a("c6b6"),l=a("b622"),d=l("match");i.exports=function(f){var b;return s(f)&&((b=f[d])!==void 0?!!b:c(f)=="RegExp")}},4930:function(i,o,a){var s=a("d039");i.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"4d64":function(i,o,a){var s=a("fc6a"),c=a("50c4"),l=a("23cb"),d=function(f){return function(b,x,k){var E=s(b),m=c(E.length),h=l(k,m),g;if(f&&x!=x){for(;m>h;)if(g=E[h++],g!=g)return!0}else for(;m>h;h++)if((f||h in E)&&E[h]===x)return f||h||0;return!f&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,o,a){var s=a("23e7"),c=a("b727").filter,l=a("1dde"),d=a("ae40"),f=l("filter"),b=d("filter");s({target:"Array",proto:!0,forced:!f||!b},{filter:function(k){return c(this,k,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,o,a){var s=a("0366"),c=a("7b0b"),l=a("9bdd"),d=a("e95a"),f=a("50c4"),b=a("8418"),x=a("35a1");i.exports=function(E){var m=c(E),h=typeof this=="function"?this:Array,g=arguments.length,w=g>1?arguments[1]:void 0,p=w!==void 0,v=x(m),y=0,S,T,C,M,A,P;if(p&&(w=s(w,g>2?arguments[2]:void 0,2)),v!=null&&!(h==Array&&d(v)))for(M=v.call(m),A=M.next,T=new h;!(C=A.call(M)).done;y++)P=p?l(M,w,[C.value,y],!0):C.value,b(T,y,P);else for(S=f(m.length),T=new h(S);S>y;y++)P=p?w(m[y],y):m[y],b(T,y,P);return T.length=y,T}},"4fad":function(i,o,a){var s=a("23e7"),c=a("6f53").entries;s({target:"Object",stat:!0},{entries:function(d){return c(d)}})},"50c4":function(i,o,a){var s=a("a691"),c=Math.min;i.exports=function(l){return l>0?c(s(l),9007199254740991):0}},5135:function(i,o){var a={}.hasOwnProperty;i.exports=function(s,c){return a.call(s,c)}},5319:function(i,o,a){var s=a("d784"),c=a("825a"),l=a("7b0b"),d=a("50c4"),f=a("a691"),b=a("1d80"),x=a("8aa5"),k=a("14c3"),E=Math.max,m=Math.min,h=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,w=/\$([$&'`]|\d\d?)/g,p=function(v){return v===void 0?v:String(v)};s("replace",2,function(v,y,S,T){var C=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,M=T.REPLACE_KEEPS_$0,A=C?"$":"$0";return[function(R,j){var z=b(this),$=R==null?void 0:R[v];return $!==void 0?$.call(R,z,j):y.call(String(z),R,j)},function(L,R){if(!C&&M||typeof R=="string"&&R.indexOf(A)===-1){var j=S(y,L,this,R);if(j.done)return j.value}var z=c(L),$=String(this),Y=typeof R=="function";Y||(R=String(R));var ae=z.global;if(ae){var K=z.unicode;z.lastIndex=0}for(var te=[];;){var G=k(z,$);if(G===null||(te.push(G),!ae))break;var ue=String(G[0]);ue===""&&(z.lastIndex=x($,d(z.lastIndex),K))}for(var J="",be=0,de=0;de<te.length;de++){G=te[de];for(var ce=String(G[0]),V=E(m(f(G.index),$.length),0),ne=[],Q=1;Q<G.length;Q++)ne.push(p(G[Q]));var Z=G.groups;if(Y){var he=[ce].concat(ne,V,$);Z!==void 0&&he.push(Z);var X=String(R.apply(void 0,he))}else X=P(ce,$,V,ne,Z,R);V>=be&&(J+=$.slice(be,V)+X,be=V+ce.length)}return J+$.slice(be)}];function P(L,R,j,z,$,Y){var ae=j+L.length,K=z.length,te=w;return $!==void 0&&($=l($),te=g),y.call(Y,te,function(G,ue){var J;switch(ue.charAt(0)){case"$":return"$";case"&":return L;case"`":return R.slice(0,j);case"'":return R.slice(ae);case"<":J=$[ue.slice(1,-1)];break;default:var be=+ue;if(be===0)return G;if(be>K){var de=h(be/10);return de===0?G:de<=K?z[de-1]===void 0?ue.charAt(1):z[de-1]+ue.charAt(1):G}J=z[be-1]}return J===void 0?"":J})}})},5692:function(i,o,a){var s=a("c430"),c=a("c6cd");(i.exports=function(l,d){return c[l]||(c[l]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,o,a){var s=a("d066"),c=a("241c"),l=a("7418"),d=a("825a");i.exports=s("Reflect","ownKeys")||function(b){var x=c.f(d(b)),k=l.f;return k?x.concat(k(b)):x}},"5a34":function(i,o,a){var s=a("44e7");i.exports=function(c){if(s(c))throw TypeError("The method doesn't accept regular expressions");return c}},"5c6c":function(i,o){i.exports=function(a,s){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:s}}},"5db7":function(i,o,a){var s=a("23e7"),c=a("a2bf"),l=a("7b0b"),d=a("50c4"),f=a("1c0b"),b=a("65f0");s({target:"Array",proto:!0},{flatMap:function(k){var E=l(this),m=d(E.length),h;return f(k),h=b(E,0),h.length=c(h,E,E,m,0,1,k,arguments.length>1?arguments[1]:void 0),h}})},6547:function(i,o,a){var s=a("a691"),c=a("1d80"),l=function(d){return function(f,b){var x=String(c(f)),k=s(b),E=x.length,m,h;return k<0||k>=E?d?"":void 0:(m=x.charCodeAt(k),m<55296||m>56319||k+1===E||(h=x.charCodeAt(k+1))<56320||h>57343?d?x.charAt(k):m:d?x.slice(k,k+2):(m-55296<<10)+(h-56320)+65536)}};i.exports={codeAt:l(!1),charAt:l(!0)}},"65f0":function(i,o,a){var s=a("861d"),c=a("e8b5"),l=a("b622"),d=l("species");i.exports=function(f,b){var x;return c(f)&&(x=f.constructor,typeof x=="function"&&(x===Array||c(x.prototype))?x=void 0:s(x)&&(x=x[d],x===null&&(x=void 0))),new(x===void 0?Array:x)(b===0?0:b)}},"69f3":function(i,o,a){var s=a("7f9a"),c=a("da84"),l=a("861d"),d=a("9112"),f=a("5135"),b=a("f772"),x=a("d012"),k=c.WeakMap,E,m,h,g=function(C){return h(C)?m(C):E(C,{})},w=function(C){return function(M){var A;if(!l(M)||(A=m(M)).type!==C)throw TypeError("Incompatible receiver, "+C+" required");return A}};if(s){var p=new k,v=p.get,y=p.has,S=p.set;E=function(C,M){return S.call(p,C,M),M},m=function(C){return v.call(p,C)||{}},h=function(C){return y.call(p,C)}}else{var T=b("state");x[T]=!0,E=function(C,M){return d(C,T,M),M},m=function(C){return f(C,T)?C[T]:{}},h=function(C){return f(C,T)}}i.exports={set:E,get:m,has:h,enforce:g,getterFor:w}},"6eeb":function(i,o,a){var s=a("da84"),c=a("9112"),l=a("5135"),d=a("ce4e"),f=a("8925"),b=a("69f3"),x=b.get,k=b.enforce,E=String(String).split("String");(i.exports=function(m,h,g,w){var p=w?!!w.unsafe:!1,v=w?!!w.enumerable:!1,y=w?!!w.noTargetGet:!1;if(typeof g=="function"&&(typeof h=="string"&&!l(g,"name")&&c(g,"name",h),k(g).source=E.join(typeof h=="string"?h:"")),m===s){v?m[h]=g:d(h,g);return}else p?!y&&m[h]&&(v=!0):delete m[h];v?m[h]=g:c(m,h,g)})(Function.prototype,"toString",function(){return typeof this=="function"&&x(this).source||f(this)})},"6f53":function(i,o,a){var s=a("83ab"),c=a("df75"),l=a("fc6a"),d=a("d1e7").f,f=function(b){return function(x){for(var k=l(x),E=c(k),m=E.length,h=0,g=[],w;m>h;)w=E[h++],(!s||d.call(k,w))&&g.push(b?[w,k[w]]:k[w]);return g}};i.exports={entries:f(!0),values:f(!1)}},"73d9":function(i,o,a){var s=a("44d2");s("flatMap")},7418:function(i,o){o.f=Object.getOwnPropertySymbols},"746f":function(i,o,a){var s=a("428f"),c=a("5135"),l=a("e538"),d=a("9bf2").f;i.exports=function(f){var b=s.Symbol||(s.Symbol={});c(b,f)||d(b,f,{value:l.f(f)})}},7839:function(i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,o,a){var s=a("1d80");i.exports=function(c){return Object(s(c))}},"7c73":function(i,o,a){var s=a("825a"),c=a("37e8"),l=a("7839"),d=a("d012"),f=a("1be4"),b=a("cc12"),x=a("f772"),k=">",E="<",m="prototype",h="script",g=x("IE_PROTO"),w=function(){},p=function(C){return E+h+k+C+E+"/"+h+k},v=function(C){C.write(p("")),C.close();var M=C.parentWindow.Object;return C=null,M},y=function(){var C=b("iframe"),M="java"+h+":",A;return C.style.display="none",f.appendChild(C),C.src=String(M),A=C.contentWindow.document,A.open(),A.write(p("document.F=Object")),A.close(),A.F},S,T=function(){try{S=document.domain&&new ActiveXObject("htmlfile")}catch{}T=S?v(S):y();for(var C=l.length;C--;)delete T[m][l[C]];return T()};d[g]=!0,i.exports=Object.create||function(M,A){var P;return M!==null?(w[m]=s(M),P=new w,w[m]=null,P[g]=M):P=T(),A===void 0?P:c(P,A)}},"7dd0":function(i,o,a){var s=a("23e7"),c=a("9ed3"),l=a("e163"),d=a("d2bb"),f=a("d44e"),b=a("9112"),x=a("6eeb"),k=a("b622"),E=a("c430"),m=a("3f8c"),h=a("ae93"),g=h.IteratorPrototype,w=h.BUGGY_SAFARI_ITERATORS,p=k("iterator"),v="keys",y="values",S="entries",T=function(){return this};i.exports=function(C,M,A,P,L,R,j){c(A,M,P);var z=function(de){if(de===L&&te)return te;if(!w&&de in ae)return ae[de];switch(de){case v:return function(){return new A(this,de)};case y:return function(){return new A(this,de)};case S:return function(){return new A(this,de)}}return function(){return new A(this)}},$=M+" Iterator",Y=!1,ae=C.prototype,K=ae[p]||ae["@@iterator"]||L&&ae[L],te=!w&&K||z(L),G=M=="Array"&&ae.entries||K,ue,J,be;if(G&&(ue=l(G.call(new C)),g!==Object.prototype&&ue.next&&(!E&&l(ue)!==g&&(d?d(ue,g):typeof ue[p]!="function"&&b(ue,p,T)),f(ue,$,!0,!0),E&&(m[$]=T))),L==y&&K&&K.name!==y&&(Y=!0,te=function(){return K.call(this)}),(!E||j)&&ae[p]!==te&&b(ae,p,te),m[M]=te,L)if(J={values:z(y),keys:R?te:z(v),entries:z(S)},j)for(be in J)(w||Y||!(be in ae))&&x(ae,be,J[be]);else s({target:M,proto:!0,forced:w||Y},J);return J}},"7f9a":function(i,o,a){var s=a("da84"),c=a("8925"),l=s.WeakMap;i.exports=typeof l=="function"&&/native code/.test(c(l))},"825a":function(i,o,a){var s=a("861d");i.exports=function(c){if(!s(c))throw TypeError(String(c)+" is not an object");return c}},"83ab":function(i,o,a){var s=a("d039");i.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,o,a){var s=a("c04e"),c=a("9bf2"),l=a("5c6c");i.exports=function(d,f,b){var x=s(f);x in d?c.f(d,x,l(0,b)):d[x]=b}},"861d":function(i,o){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(i,o,a){var s,c,l;(function(d,f){c=[],s=f,l=typeof s=="function"?s.apply(o,c):s,l!==void 0&&(i.exports=l)})(typeof self<"u"?self:this,function(){function d(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(S){var b=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,x=/@([^@]*):(\d+):(\d+)\s*$/ig,k=b.exec(S.stack)||x.exec(S.stack),E=k&&k[1]||!1,m=k&&k[2]||!1,h=document.location.href.replace(document.location.hash,""),g,w,p,v=document.getElementsByTagName("script");E===h&&(g=document.documentElement.outerHTML,w=new RegExp("(?:[^\\n]+?\\n){0,"+(m-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),p=g.replace(w,"$1").trim());for(var y=0;y<v.length;y++)if(v[y].readyState==="interactive"||v[y].src===E||E===h&&v[y].innerHTML&&v[y].innerHTML.trim()===p)return v[y];return null}}return d})},8925:function(i,o,a){var s=a("c6cd"),c=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(l){return c.call(l)}),i.exports=s.inspectSource},"8aa5":function(i,o,a){var s=a("6547").charAt;i.exports=function(c,l,d){return l+(d?s(c,l).length:1)}},"8bbf":function(i,o){i.exports=n},"90e3":function(i,o){var a=0,s=Math.random();i.exports=function(c){return"Symbol("+String(c===void 0?"":c)+")_"+(++a+s).toString(36)}},9112:function(i,o,a){var s=a("83ab"),c=a("9bf2"),l=a("5c6c");i.exports=s?function(d,f,b){return c.f(d,f,l(1,b))}:function(d,f,b){return d[f]=b,d}},9263:function(i,o,a){var s=a("ad6d"),c=a("9f7f"),l=RegExp.prototype.exec,d=String.prototype.replace,f=l,b=function(){var m=/a/,h=/b*/g;return l.call(m,"a"),l.call(h,"a"),m.lastIndex!==0||h.lastIndex!==0}(),x=c.UNSUPPORTED_Y||c.BROKEN_CARET,k=/()??/.exec("")[1]!==void 0,E=b||k||x;E&&(f=function(h){var g=this,w,p,v,y,S=x&&g.sticky,T=s.call(g),C=g.source,M=0,A=h;return S&&(T=T.replace("y",""),T.indexOf("g")===-1&&(T+="g"),A=String(h).slice(g.lastIndex),g.lastIndex>0&&(!g.multiline||g.multiline&&h[g.lastIndex-1]!==`
`)&&(C="(?: "+C+")",A=" "+A,M++),p=new RegExp("^(?:"+C+")",T)),k&&(p=new RegExp("^"+C+"$(?!\\s)",T)),b&&(w=g.lastIndex),v=l.call(S?p:g,A),S?v?(v.input=v.input.slice(M),v[0]=v[0].slice(M),v.index=g.lastIndex,g.lastIndex+=v[0].length):g.lastIndex=0:b&&v&&(g.lastIndex=g.global?v.index+v[0].length:w),k&&v&&v.length>1&&d.call(v[0],p,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(v[y]=void 0)}),v}),i.exports=f},"94ca":function(i,o,a){var s=a("d039"),c=/#|\.prototype\./,l=function(k,E){var m=f[d(k)];return m==x?!0:m==b?!1:typeof E=="function"?s(E):!!E},d=l.normalize=function(k){return String(k).replace(c,".").toLowerCase()},f=l.data={},b=l.NATIVE="N",x=l.POLYFILL="P";i.exports=l},"99af":function(i,o,a){var s=a("23e7"),c=a("d039"),l=a("e8b5"),d=a("861d"),f=a("7b0b"),b=a("50c4"),x=a("8418"),k=a("65f0"),E=a("1dde"),m=a("b622"),h=a("2d00"),g=m("isConcatSpreadable"),w=9007199254740991,p="Maximum allowed index exceeded",v=h>=51||!c(function(){var C=[];return C[g]=!1,C.concat()[0]!==C}),y=E("concat"),S=function(C){if(!d(C))return!1;var M=C[g];return M!==void 0?!!M:l(C)},T=!v||!y;s({target:"Array",proto:!0,forced:T},{concat:function(M){var A=f(this),P=k(A,0),L=0,R,j,z,$,Y;for(R=-1,z=arguments.length;R<z;R++)if(Y=R===-1?A:arguments[R],S(Y)){if($=b(Y.length),L+$>w)throw TypeError(p);for(j=0;j<$;j++,L++)j in Y&&x(P,L,Y[j])}else{if(L>=w)throw TypeError(p);x(P,L++,Y)}return P.length=L,P}})},"9bdd":function(i,o,a){var s=a("825a");i.exports=function(c,l,d,f){try{return f?l(s(d)[0],d[1]):l(d)}catch(x){var b=c.return;throw b!==void 0&&s(b.call(c)),x}}},"9bf2":function(i,o,a){var s=a("83ab"),c=a("0cfb"),l=a("825a"),d=a("c04e"),f=Object.defineProperty;o.f=s?f:function(x,k,E){if(l(x),k=d(k,!0),l(E),c)try{return f(x,k,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(x[k]=E.value),x}},"9ed3":function(i,o,a){var s=a("ae93").IteratorPrototype,c=a("7c73"),l=a("5c6c"),d=a("d44e"),f=a("3f8c"),b=function(){return this};i.exports=function(x,k,E){var m=k+" Iterator";return x.prototype=c(s,{next:l(1,E)}),d(x,m,!1,!0),f[m]=b,x}},"9f7f":function(i,o,a){var s=a("d039");function c(l,d){return RegExp(l,d)}o.UNSUPPORTED_Y=s(function(){var l=c("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),o.BROKEN_CARET=s(function(){var l=c("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},a2bf:function(i,o,a){var s=a("e8b5"),c=a("50c4"),l=a("0366"),d=function(f,b,x,k,E,m,h,g){for(var w=E,p=0,v=h?l(h,g,3):!1,y;p<k;){if(p in x){if(y=v?v(x[p],p,b):x[p],m>0&&s(y))w=d(f,b,y,c(y.length),w,m-1)-1;else{if(w>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[w]=y}w++}p++}return w};i.exports=d},a352:function(i,o){i.exports=r},a434:function(i,o,a){var s=a("23e7"),c=a("23cb"),l=a("a691"),d=a("50c4"),f=a("7b0b"),b=a("65f0"),x=a("8418"),k=a("1dde"),E=a("ae40"),m=k("splice"),h=E("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,w=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!h},{splice:function(S,T){var C=f(this),M=d(C.length),A=c(S,M),P=arguments.length,L,R,j,z,$,Y;if(P===0?L=R=0:P===1?(L=0,R=M-A):(L=P-2,R=w(g(l(T),0),M-A)),M+L-R>p)throw TypeError(v);for(j=b(C,R),z=0;z<R;z++)$=A+z,$ in C&&x(j,z,C[$]);if(j.length=R,L<R){for(z=A;z<M-R;z++)$=z+R,Y=z+L,$ in C?C[Y]=C[$]:delete C[Y];for(z=M;z>M-R+L;z--)delete C[z-1]}else if(L>R)for(z=M-R;z>A;z--)$=z+R-1,Y=z+L-1,$ in C?C[Y]=C[$]:delete C[Y];for(z=0;z<L;z++)C[z+A]=arguments[z+2];return C.length=M-R+L,j}})},a4d3:function(i,o,a){var s=a("23e7"),c=a("da84"),l=a("d066"),d=a("c430"),f=a("83ab"),b=a("4930"),x=a("fdbf"),k=a("d039"),E=a("5135"),m=a("e8b5"),h=a("861d"),g=a("825a"),w=a("7b0b"),p=a("fc6a"),v=a("c04e"),y=a("5c6c"),S=a("7c73"),T=a("df75"),C=a("241c"),M=a("057f"),A=a("7418"),P=a("06cf"),L=a("9bf2"),R=a("d1e7"),j=a("9112"),z=a("6eeb"),$=a("5692"),Y=a("f772"),ae=a("d012"),K=a("90e3"),te=a("b622"),G=a("e538"),ue=a("746f"),J=a("d44e"),be=a("69f3"),de=a("b727").forEach,ce=Y("hidden"),V="Symbol",ne="prototype",Q=te("toPrimitive"),Z=be.set,he=be.getterFor(V),X=Object[ne],re=c.Symbol,le=l("JSON","stringify"),fe=P.f,ke=L.f,q=M.f,ie=R.f,we=$("symbols"),Me=$("op-symbols"),xe=$("string-to-symbol-registry"),ge=$("symbol-to-string-registry"),ye=$("wks"),se=c.QObject,me=!se||!se[ne]||!se[ne].findChild,Ie=f&&k(function(){return S(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(nt,qe,ut){var Mt=fe(X,qe);Mt&&delete X[qe],ke(nt,qe,ut),Mt&&nt!==X&&ke(X,qe,Mt)}:ke,Pe=function(nt,qe){var ut=we[nt]=S(re[ne]);return Z(ut,{type:V,tag:nt,description:qe}),f||(ut.description=qe),ut},Se=x?function(nt){return typeof nt=="symbol"}:function(nt){return Object(nt)instanceof re},Ce=function(qe,ut,Mt){qe===X&&Ce(Me,ut,Mt),g(qe);var Ne=v(ut,!0);return g(Mt),E(we,Ne)?(Mt.enumerable?(E(qe,ce)&&qe[ce][Ne]&&(qe[ce][Ne]=!1),Mt=S(Mt,{enumerable:y(0,!1)})):(E(qe,ce)||ke(qe,ce,y(1,{})),qe[ce][Ne]=!0),Ie(qe,Ne,Mt)):ke(qe,Ne,Mt)},pe=function(qe,ut){g(qe);var Mt=p(ut),Ne=T(Mt).concat(vt(Mt));return de(Ne,function(Le){(!f||Be.call(Mt,Le))&&Ce(qe,Le,Mt[Le])}),qe},_e=function(qe,ut){return ut===void 0?S(qe):pe(S(qe),ut)},Be=function(qe){var ut=v(qe,!0),Mt=ie.call(this,ut);return this===X&&E(we,ut)&&!E(Me,ut)?!1:Mt||!E(this,ut)||!E(we,ut)||E(this,ce)&&this[ce][ut]?Mt:!0},Ke=function(qe,ut){var Mt=p(qe),Ne=v(ut,!0);if(!(Mt===X&&E(we,Ne)&&!E(Me,Ne))){var Le=fe(Mt,Ne);return Le&&E(we,Ne)&&!(E(Mt,ce)&&Mt[ce][Ne])&&(Le.enumerable=!0),Le}},ht=function(qe){var ut=q(p(qe)),Mt=[];return de(ut,function(Ne){!E(we,Ne)&&!E(ae,Ne)&&Mt.push(Ne)}),Mt},vt=function(qe){var ut=qe===X,Mt=q(ut?Me:p(qe)),Ne=[];return de(Mt,function(Le){E(we,Le)&&(!ut||E(X,Le))&&Ne.push(we[Le])}),Ne};if(b||(re=function(){if(this instanceof re)throw TypeError("Symbol is not a constructor");var qe=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ut=K(qe),Mt=function(Ne){this===X&&Mt.call(Me,Ne),E(this,ce)&&E(this[ce],ut)&&(this[ce][ut]=!1),Ie(this,ut,y(1,Ne))};return f&&me&&Ie(X,ut,{configurable:!0,set:Mt}),Pe(ut,qe)},z(re[ne],"toString",function(){return he(this).tag}),z(re,"withoutSetter",function(nt){return Pe(K(nt),nt)}),R.f=Be,L.f=Ce,P.f=Ke,C.f=M.f=ht,A.f=vt,G.f=function(nt){return Pe(te(nt),nt)},f&&(ke(re[ne],"description",{configurable:!0,get:function(){return he(this).description}}),d||z(X,"propertyIsEnumerable",Be,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:re}),de(T(ye),function(nt){ue(nt)}),s({target:V,stat:!0,forced:!b},{for:function(nt){var qe=String(nt);if(E(xe,qe))return xe[qe];var ut=re(qe);return xe[qe]=ut,ge[ut]=qe,ut},keyFor:function(qe){if(!Se(qe))throw TypeError(qe+" is not a symbol");if(E(ge,qe))return ge[qe]},useSetter:function(){me=!0},useSimple:function(){me=!1}}),s({target:"Object",stat:!0,forced:!b,sham:!f},{create:_e,defineProperty:Ce,defineProperties:pe,getOwnPropertyDescriptor:Ke}),s({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:ht,getOwnPropertySymbols:vt}),s({target:"Object",stat:!0,forced:k(function(){A.f(1)})},{getOwnPropertySymbols:function(qe){return A.f(w(qe))}}),le){var At=!b||k(function(){var nt=re();return le([nt])!="[null]"||le({a:nt})!="{}"||le(Object(nt))!="{}"});s({target:"JSON",stat:!0,forced:At},{stringify:function(qe,ut,Mt){for(var Ne=[qe],Le=1,Je;arguments.length>Le;)Ne.push(arguments[Le++]);if(Je=ut,!(!h(ut)&&qe===void 0||Se(qe)))return m(ut)||(ut=function(it,ct){if(typeof Je=="function"&&(ct=Je.call(this,it,ct)),!Se(ct))return ct}),Ne[1]=ut,le.apply(null,Ne)}})}re[ne][Q]||j(re[ne],Q,re[ne].valueOf),J(re,V),ae[ce]=!0},a630:function(i,o,a){var s=a("23e7"),c=a("4df4"),l=a("1c7e"),d=!l(function(f){Array.from(f)});s({target:"Array",stat:!0,forced:d},{from:c})},a640:function(i,o,a){var s=a("d039");i.exports=function(c,l){var d=[][c];return!!d&&s(function(){d.call(null,l||function(){throw 1},1)})}},a691:function(i,o){var a=Math.ceil,s=Math.floor;i.exports=function(c){return isNaN(c=+c)?0:(c>0?s:a)(c)}},ab13:function(i,o,a){var s=a("b622"),c=s("match");i.exports=function(l){var d=/./;try{"/./"[l](d)}catch{try{return d[c]=!1,"/./"[l](d)}catch{}}return!1}},ac1f:function(i,o,a){var s=a("23e7"),c=a("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(i,o,a){var s=a("825a");i.exports=function(){var c=s(this),l="";return c.global&&(l+="g"),c.ignoreCase&&(l+="i"),c.multiline&&(l+="m"),c.dotAll&&(l+="s"),c.unicode&&(l+="u"),c.sticky&&(l+="y"),l}},ae40:function(i,o,a){var s=a("83ab"),c=a("d039"),l=a("5135"),d=Object.defineProperty,f={},b=function(x){throw x};i.exports=function(x,k){if(l(f,x))return f[x];k||(k={});var E=[][x],m=l(k,"ACCESSORS")?k.ACCESSORS:!1,h=l(k,0)?k[0]:b,g=l(k,1)?k[1]:void 0;return f[x]=!!E&&!c(function(){if(m&&!s)return!0;var w={length:-1};m?d(w,1,{enumerable:!0,get:b}):w[1]=1,E.call(w,h,g)})}},ae93:function(i,o,a){var s=a("e163"),c=a("9112"),l=a("5135"),d=a("b622"),f=a("c430"),b=d("iterator"),x=!1,k=function(){return this},E,m,h;[].keys&&(h=[].keys(),"next"in h?(m=s(s(h)),m!==Object.prototype&&(E=m)):x=!0),E==null&&(E={}),!f&&!l(E,b)&&c(E,b,k),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:x}},b041:function(i,o,a){var s=a("00ee"),c=a("f5df");i.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},b0c0:function(i,o,a){var s=a("83ab"),c=a("9bf2").f,l=Function.prototype,d=l.toString,f=/^\s*function ([^ (]*)/,b="name";s&&!(b in l)&&c(l,b,{configurable:!0,get:function(){try{return d.call(this).match(f)[1]}catch{return""}}})},b622:function(i,o,a){var s=a("da84"),c=a("5692"),l=a("5135"),d=a("90e3"),f=a("4930"),b=a("fdbf"),x=c("wks"),k=s.Symbol,E=b?k:k&&k.withoutSetter||d;i.exports=function(m){return l(x,m)||(f&&l(k,m)?x[m]=k[m]:x[m]=E("Symbol."+m)),x[m]}},b64b:function(i,o,a){var s=a("23e7"),c=a("7b0b"),l=a("df75"),d=a("d039"),f=d(function(){l(1)});s({target:"Object",stat:!0,forced:f},{keys:function(x){return l(c(x))}})},b727:function(i,o,a){var s=a("0366"),c=a("44ad"),l=a("7b0b"),d=a("50c4"),f=a("65f0"),b=[].push,x=function(k){var E=k==1,m=k==2,h=k==3,g=k==4,w=k==6,p=k==5||w;return function(v,y,S,T){for(var C=l(v),M=c(C),A=s(y,S,3),P=d(M.length),L=0,R=T||f,j=E?R(v,P):m?R(v,0):void 0,z,$;P>L;L++)if((p||L in M)&&(z=M[L],$=A(z,L,C),k)){if(E)j[L]=$;else if($)switch(k){case 3:return!0;case 5:return z;case 6:return L;case 2:b.call(j,z)}else if(g)return!1}return w?-1:h||g?g:j}};i.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6)}},c04e:function(i,o,a){var s=a("861d");i.exports=function(c,l){if(!s(c))return c;var d,f;if(l&&typeof(d=c.toString)=="function"&&!s(f=d.call(c))||typeof(d=c.valueOf)=="function"&&!s(f=d.call(c))||!l&&typeof(d=c.toString)=="function"&&!s(f=d.call(c)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(i,o){i.exports=!1},c6b6:function(i,o){var a={}.toString;i.exports=function(s){return a.call(s).slice(8,-1)}},c6cd:function(i,o,a){var s=a("da84"),c=a("ce4e"),l="__core-js_shared__",d=s[l]||c(l,{});i.exports=d},c740:function(i,o,a){var s=a("23e7"),c=a("b727").findIndex,l=a("44d2"),d=a("ae40"),f="findIndex",b=!0,x=d(f);f in[]&&Array(1)[f](function(){b=!1}),s({target:"Array",proto:!0,forced:b||!x},{findIndex:function(E){return c(this,E,arguments.length>1?arguments[1]:void 0)}}),l(f)},c8ba:function(i,o){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}i.exports=a},c975:function(i,o,a){var s=a("23e7"),c=a("4d64").indexOf,l=a("a640"),d=a("ae40"),f=[].indexOf,b=!!f&&1/[1].indexOf(1,-0)<0,x=l("indexOf"),k=d("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:b||!x||!k},{indexOf:function(m){return b?f.apply(this,arguments)||0:c(this,m,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,o,a){var s=a("5135"),c=a("fc6a"),l=a("4d64").indexOf,d=a("d012");i.exports=function(f,b){var x=c(f),k=0,E=[],m;for(m in x)!s(d,m)&&s(x,m)&&E.push(m);for(;b.length>k;)s(x,m=b[k++])&&(~l(E,m)||E.push(m));return E}},caad:function(i,o,a){var s=a("23e7"),c=a("4d64").includes,l=a("44d2"),d=a("ae40"),f=d("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!f},{includes:function(x){return c(this,x,arguments.length>1?arguments[1]:void 0)}}),l("includes")},cc12:function(i,o,a){var s=a("da84"),c=a("861d"),l=s.document,d=c(l)&&c(l.createElement);i.exports=function(f){return d?l.createElement(f):{}}},ce4e:function(i,o,a){var s=a("da84"),c=a("9112");i.exports=function(l,d){try{c(s,l,d)}catch{s[l]=d}return d}},d012:function(i,o){i.exports={}},d039:function(i,o){i.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(i,o,a){var s=a("428f"),c=a("da84"),l=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,f){return arguments.length<2?l(s[d])||l(c[d]):s[d]&&s[d][f]||c[d]&&c[d][f]}},d1e7:function(i,o,a){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,l=c&&!s.call({1:2},1);o.f=l?function(f){var b=c(this,f);return!!b&&b.enumerable}:s},d28b:function(i,o,a){var s=a("746f");s("iterator")},d2bb:function(i,o,a){var s=a("825a"),c=a("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l=!1,d={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(d,[]),l=d instanceof Array}catch{}return function(x,k){return s(x),c(k),l?f.call(x,k):x.__proto__=k,x}}():void 0)},d3b7:function(i,o,a){var s=a("00ee"),c=a("6eeb"),l=a("b041");s||c(Object.prototype,"toString",l,{unsafe:!0})},d44e:function(i,o,a){var s=a("9bf2").f,c=a("5135"),l=a("b622"),d=l("toStringTag");i.exports=function(f,b,x){f&&!c(f=x?f:f.prototype,d)&&s(f,d,{configurable:!0,value:b})}},d58f:function(i,o,a){var s=a("1c0b"),c=a("7b0b"),l=a("44ad"),d=a("50c4"),f=function(b){return function(x,k,E,m){s(k);var h=c(x),g=l(h),w=d(h.length),p=b?w-1:0,v=b?-1:1;if(E<2)for(;;){if(p in g){m=g[p],p+=v;break}if(p+=v,b?p<0:w<=p)throw TypeError("Reduce of empty array with no initial value")}for(;b?p>=0:w>p;p+=v)p in g&&(m=k(m,g[p],p,h));return m}};i.exports={left:f(!1),right:f(!0)}},d784:function(i,o,a){a("ac1f");var s=a("6eeb"),c=a("d039"),l=a("b622"),d=a("9263"),f=a("9112"),b=l("species"),x=!c(function(){var g=/./;return g.exec=function(){var w=[];return w.groups={a:"7"},w},"".replace(g,"$<a>")!=="7"}),k=function(){return"a".replace(/./,"$0")==="$0"}(),E=l("replace"),m=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),h=!c(function(){var g=/(?:)/,w=g.exec;g.exec=function(){return w.apply(this,arguments)};var p="ab".split(g);return p.length!==2||p[0]!=="a"||p[1]!=="b"});i.exports=function(g,w,p,v){var y=l(g),S=!c(function(){var L={};return L[y]=function(){return 7},""[g](L)!=7}),T=S&&!c(function(){var L=!1,R=/a/;return g==="split"&&(R={},R.constructor={},R.constructor[b]=function(){return R},R.flags="",R[y]=/./[y]),R.exec=function(){return L=!0,null},R[y](""),!L});if(!S||!T||g==="replace"&&!(x&&k&&!m)||g==="split"&&!h){var C=/./[y],M=p(y,""[g],function(L,R,j,z,$){return R.exec===d?S&&!$?{done:!0,value:C.call(R,j,z)}:{done:!0,value:L.call(j,R,z)}:{done:!1}},{REPLACE_KEEPS_$0:k,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),A=M[0],P=M[1];s(String.prototype,g,A),s(RegExp.prototype,y,w==2?function(L,R){return P.call(L,this,R)}:function(L){return P.call(L,this)})}v&&f(RegExp.prototype[y],"sham",!0)}},d81d:function(i,o,a){var s=a("23e7"),c=a("b727").map,l=a("1dde"),d=a("ae40"),f=l("map"),b=d("map");s({target:"Array",proto:!0,forced:!f||!b},{map:function(k){return c(this,k,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,o,a){(function(s){var c=function(l){return l&&l.Math==Math&&l};i.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(i,o,a){var s=a("23e7"),c=a("83ab"),l=a("56ef"),d=a("fc6a"),f=a("06cf"),b=a("8418");s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(k){for(var E=d(k),m=f.f,h=l(E),g={},w=0,p,v;h.length>w;)v=m(E,p=h[w++]),v!==void 0&&b(g,p,v);return g}})},dbf1:function(i,o,a){(function(s){a.d(o,"a",function(){return l});function c(){return typeof window<"u"?window.console:s.console}var l=c()}).call(this,a("c8ba"))},ddb0:function(i,o,a){var s=a("da84"),c=a("fdbc"),l=a("e260"),d=a("9112"),f=a("b622"),b=f("iterator"),x=f("toStringTag"),k=l.values;for(var E in c){var m=s[E],h=m&&m.prototype;if(h){if(h[b]!==k)try{d(h,b,k)}catch{h[b]=k}if(h[x]||d(h,x,E),c[E]){for(var g in l)if(h[g]!==l[g])try{d(h,g,l[g])}catch{h[g]=l[g]}}}}},df75:function(i,o,a){var s=a("ca84"),c=a("7839");i.exports=Object.keys||function(d){return s(d,c)}},e01a:function(i,o,a){var s=a("23e7"),c=a("83ab"),l=a("da84"),d=a("5135"),f=a("861d"),b=a("9bf2").f,x=a("e893"),k=l.Symbol;if(c&&typeof k=="function"&&(!("description"in k.prototype)||k().description!==void 0)){var E={},m=function(){var y=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof m?new k(y):y===void 0?k():k(y);return y===""&&(E[S]=!0),S};x(m,k);var h=m.prototype=k.prototype;h.constructor=m;var g=h.toString,w=String(k("test"))=="Symbol(test)",p=/^Symbol\((.*)\)[^)]+$/;b(h,"description",{configurable:!0,get:function(){var y=f(this)?this.valueOf():this,S=g.call(y);if(d(E,y))return"";var T=w?S.slice(7,-1):S.replace(p,"$1");return T===""?void 0:T}}),s({global:!0,forced:!0},{Symbol:m})}},e163:function(i,o,a){var s=a("5135"),c=a("7b0b"),l=a("f772"),d=a("e177"),f=l("IE_PROTO"),b=Object.prototype;i.exports=d?Object.getPrototypeOf:function(x){return x=c(x),s(x,f)?x[f]:typeof x.constructor=="function"&&x instanceof x.constructor?x.constructor.prototype:x instanceof Object?b:null}},e177:function(i,o,a){var s=a("d039");i.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},e260:function(i,o,a){var s=a("fc6a"),c=a("44d2"),l=a("3f8c"),d=a("69f3"),f=a("7dd0"),b="Array Iterator",x=d.set,k=d.getterFor(b);i.exports=f(Array,"Array",function(E,m){x(this,{type:b,target:s(E),index:0,kind:m})},function(){var E=k(this),m=E.target,h=E.kind,g=E.index++;return!m||g>=m.length?(E.target=void 0,{value:void 0,done:!0}):h=="keys"?{value:g,done:!1}:h=="values"?{value:m[g],done:!1}:{value:[g,m[g]],done:!1}},"values"),l.Arguments=l.Array,c("keys"),c("values"),c("entries")},e439:function(i,o,a){var s=a("23e7"),c=a("d039"),l=a("fc6a"),d=a("06cf").f,f=a("83ab"),b=c(function(){d(1)}),x=!f||b;s({target:"Object",stat:!0,forced:x,sham:!f},{getOwnPropertyDescriptor:function(E,m){return d(l(E),m)}})},e538:function(i,o,a){var s=a("b622");o.f=s},e893:function(i,o,a){var s=a("5135"),c=a("56ef"),l=a("06cf"),d=a("9bf2");i.exports=function(f,b){for(var x=c(b),k=d.f,E=l.f,m=0;m<x.length;m++){var h=x[m];s(f,h)||k(f,h,E(b,h))}}},e8b5:function(i,o,a){var s=a("c6b6");i.exports=Array.isArray||function(l){return s(l)=="Array"}},e95a:function(i,o,a){var s=a("b622"),c=a("3f8c"),l=s("iterator"),d=Array.prototype;i.exports=function(f){return f!==void 0&&(c.Array===f||d[l]===f)}},f5df:function(i,o,a){var s=a("00ee"),c=a("c6b6"),l=a("b622"),d=l("toStringTag"),f=c(function(){return arguments}())=="Arguments",b=function(x,k){try{return x[k]}catch{}};i.exports=s?c:function(x){var k,E,m;return x===void 0?"Undefined":x===null?"Null":typeof(E=b(k=Object(x),d))=="string"?E:f?c(k):(m=c(k))=="Object"&&typeof k.callee=="function"?"Arguments":m}},f772:function(i,o,a){var s=a("5692"),c=a("90e3"),l=s("keys");i.exports=function(d){return l[d]||(l[d]=c(d))}},fb15:function(i,o,a){if(a.r(o),typeof window<"u"){var s=window.document.currentScript;{var c=a("8875");s=c(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:c})}var l=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(a.p=l[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function d(Se,Ce,pe){return Ce in Se?Object.defineProperty(Se,Ce,{value:pe,enumerable:!0,configurable:!0,writable:!0}):Se[Ce]=pe,Se}function f(Se,Ce){var pe=Object.keys(Se);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(Se);Ce&&(_e=_e.filter(function(Be){return Object.getOwnPropertyDescriptor(Se,Be).enumerable})),pe.push.apply(pe,_e)}return pe}function b(Se){for(var Ce=1;Ce<arguments.length;Ce++){var pe=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?f(Object(pe),!0).forEach(function(_e){d(Se,_e,pe[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(pe)):f(Object(pe)).forEach(function(_e){Object.defineProperty(Se,_e,Object.getOwnPropertyDescriptor(pe,_e))})}return Se}function x(Se){if(Array.isArray(Se))return Se}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function k(Se,Ce){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Se)))){var pe=[],_e=!0,Be=!1,Ke=void 0;try{for(var ht=Se[Symbol.iterator](),vt;!(_e=(vt=ht.next()).done)&&(pe.push(vt.value),!(Ce&&pe.length===Ce));_e=!0);}catch(At){Be=!0,Ke=At}finally{try{!_e&&ht.return!=null&&ht.return()}finally{if(Be)throw Ke}}return pe}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function E(Se,Ce){(Ce==null||Ce>Se.length)&&(Ce=Se.length);for(var pe=0,_e=new Array(Ce);pe<Ce;pe++)_e[pe]=Se[pe];return _e}function m(Se,Ce){if(Se){if(typeof Se=="string")return E(Se,Ce);var pe=Object.prototype.toString.call(Se).slice(8,-1);if(pe==="Object"&&Se.constructor&&(pe=Se.constructor.name),pe==="Map"||pe==="Set")return Array.from(Se);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return E(Se,Ce)}}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(Se,Ce){return x(Se)||k(Se,Ce)||m(Se,Ce)||h()}function w(Se){if(Array.isArray(Se))return E(Se)}function p(Se){if(typeof Symbol<"u"&&Symbol.iterator in Object(Se))return Array.from(Se)}function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(Se){return w(Se)||p(Se)||m(Se)||v()}var S=a("a352"),T=a.n(S);function C(Se){Se.parentElement!==null&&Se.parentElement.removeChild(Se)}function M(Se,Ce,pe){var _e=pe===0?Se.children[0]:Se.children[pe-1].nextSibling;Se.insertBefore(Ce,_e)}var A=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function P(Se){var Ce=Object.create(null);return function(_e){var Be=Ce[_e];return Be||(Ce[_e]=Se(_e))}}var L=/-(\w)/g,R=P(function(Se){return Se.replace(L,function(Ce,pe){return pe.toUpperCase()})});a("5db7"),a("73d9");var j=["Start","Add","Remove","Update","End"],z=["Choose","Unchoose","Sort","Filter","Clone"],$=["Move"],Y=[$,j,z].flatMap(function(Se){return Se}).map(function(Se){return"on".concat(Se)}),ae={manage:$,manageAndEmit:j,emit:z};function K(Se){return Y.indexOf(Se)!==-1}a("caad"),a("2ca0");var te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function G(Se){return te.includes(Se)}function ue(Se){return["transition-group","TransitionGroup"].includes(Se)}function J(Se){return["id","class","role","style"].includes(Se)||Se.startsWith("data-")||Se.startsWith("aria-")||Se.startsWith("on")}function be(Se){return Se.reduce(function(Ce,pe){var _e=g(pe,2),Be=_e[0],Ke=_e[1];return Ce[Be]=Ke,Ce},{})}function de(Se){var Ce=Se.$attrs,pe=Se.componentData,_e=pe===void 0?{}:pe,Be=be(Object.entries(Ce).filter(function(Ke){var ht=g(Ke,2),vt=ht[0];return ht[1],J(vt)}));return b(b({},Be),_e)}function ce(Se){var Ce=Se.$attrs,pe=Se.callBackBuilder,_e=be(V(Ce));Object.entries(pe).forEach(function(Ke){var ht=g(Ke,2),vt=ht[0],At=ht[1];ae[vt].forEach(function(nt){_e["on".concat(nt)]=At(nt)})});var Be="[data-draggable]".concat(_e.draggable||"");return b(b({},_e),{},{draggable:Be})}function V(Se){return Object.entries(Se).filter(function(Ce){var pe=g(Ce,2),_e=pe[0];return pe[1],!J(_e)}).map(function(Ce){var pe=g(Ce,2),_e=pe[0],Be=pe[1];return[R(_e),Be]}).filter(function(Ce){var pe=g(Ce,2),_e=pe[0];return pe[1],!K(_e)})}a("c740");function ne(Se,Ce){if(!(Se instanceof Ce))throw new TypeError("Cannot call a class as a function")}function Q(Se,Ce){for(var pe=0;pe<Ce.length;pe++){var _e=Ce[pe];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(Se,_e.key,_e)}}function Z(Se,Ce,pe){return Ce&&Q(Se.prototype,Ce),Se}var he=function(Ce){var pe=Ce.el;return pe},X=function(Ce,pe){return Ce.__draggable_context=pe},re=function(Ce){return Ce.__draggable_context},le=function(){function Se(Ce){var pe=Ce.nodes,_e=pe.header,Be=pe.default,Ke=pe.footer,ht=Ce.root,vt=Ce.realList;ne(this,Se),this.defaultNodes=Be,this.children=[].concat(y(_e),y(Be),y(Ke)),this.externalComponent=ht.externalComponent,this.rootTransition=ht.transition,this.tag=ht.tag,this.realList=vt}return Z(Se,[{key:"render",value:function(pe,_e){var Be=this.tag,Ke=this.children,ht=this._isRootComponent,vt=ht?{default:function(){return Ke}}:Ke;return pe(Be,_e,vt)}},{key:"updated",value:function(){var pe=this.defaultNodes,_e=this.realList;pe.forEach(function(Be,Ke){X(he(Be),{element:_e[Ke],index:Ke})})}},{key:"getUnderlyingVm",value:function(pe){return re(pe)}},{key:"getVmIndexFromDomIndex",value:function(pe,_e){var Be=this.defaultNodes,Ke=Be.length,ht=_e.children,vt=ht.item(pe);if(vt===null)return Ke;var At=re(vt);if(At)return At.index;if(Ke===0)return 0;var nt=he(Be[0]),qe=y(ht).findIndex(function(ut){return ut===nt});return pe<qe?0:Ke}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Se}(),fe=a("8bbf");function ke(Se,Ce){var pe=Se[Ce];return pe?pe():[]}function q(Se){var Ce=Se.$slots,pe=Se.realList,_e=Se.getKey,Be=pe||[],Ke=["header","footer"].map(function(ut){return ke(Ce,ut)}),ht=g(Ke,2),vt=ht[0],At=ht[1],nt=Ce.item;if(!nt)throw new Error("draggable element must have an item slot");var qe=Be.flatMap(function(ut,Mt){return nt({element:ut,index:Mt}).map(function(Ne){return Ne.key=_e(ut),Ne.props=b(b({},Ne.props||{}),{},{"data-draggable":!0}),Ne})});if(qe.length!==Be.length)throw new Error("Item slot must have only one child");return{header:vt,footer:At,default:qe}}function ie(Se){var Ce=ue(Se),pe=!G(Se)&&!Ce;return{transition:Ce,externalComponent:pe,tag:pe?Object(fe.resolveComponent)(Se):Ce?fe.TransitionGroup:Se}}function we(Se){var Ce=Se.$slots,pe=Se.tag,_e=Se.realList,Be=Se.getKey,Ke=q({$slots:Ce,realList:_e,getKey:Be}),ht=ie(pe);return new le({nodes:Ke,root:ht,realList:_e})}function Me(Se,Ce){var pe=this;Object(fe.nextTick)(function(){return pe.$emit(Se.toLowerCase(),Ce)})}function xe(Se){var Ce=this;return function(pe,_e){if(Ce.realList!==null)return Ce["onDrag".concat(Se)](pe,_e)}}function ge(Se){var Ce=this,pe=xe.call(this,Se);return function(_e,Be){pe.call(Ce,_e,Be),Me.call(Ce,Se,_e)}}var ye=null,se={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Ce){return Ce}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},me=["update:modelValue","change"].concat(y([].concat(y(ae.manageAndEmit),y(ae.emit)).map(function(Se){return Se.toLowerCase()}))),Ie=Object(fe.defineComponent)({name:"draggable",inheritAttrs:!1,props:se,emits:me,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Ce=this.$slots,pe=this.$attrs,_e=this.tag,Be=this.componentData,Ke=this.realList,ht=this.getKey,vt=we({$slots:Ce,tag:_e,realList:Ke,getKey:ht});this.componentStructure=vt;var At=de({$attrs:pe,componentData:Be});return vt.render(fe.h,At)}catch(nt){return this.error=!0,Object(fe.h)("pre",{style:{color:"red"}},nt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&A.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Ce=this;if(!this.error){var pe=this.$attrs,_e=this.$el,Be=this.componentStructure;Be.updated();var Ke=ce({$attrs:pe,callBackBuilder:{manageAndEmit:function(At){return ge.call(Ce,At)},emit:function(At){return Me.bind(Ce,At)},manage:function(At){return xe.call(Ce,At)}}}),ht=_e.nodeType===1?_e:_e.parentElement;this._sortable=new T.a(ht,Ke),this.targetDomElement=ht,ht.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Ce=this.list;return Ce||this.modelValue},getKey:function(){var Ce=this.itemKey;return typeof Ce=="function"?Ce:function(pe){return pe[Ce]}}},watch:{$attrs:{handler:function(Ce){var pe=this._sortable;pe&&V(Ce).forEach(function(_e){var Be=g(_e,2),Ke=Be[0],ht=Be[1];pe.option(Ke,ht)})},deep:!0}},methods:{getUnderlyingVm:function(Ce){return this.componentStructure.getUnderlyingVm(Ce)||null},getUnderlyingPotencialDraggableComponent:function(Ce){return Ce.__draggable_component__},emitChanges:function(Ce){var pe=this;Object(fe.nextTick)(function(){return pe.$emit("change",Ce)})},alterList:function(Ce){if(this.list){Ce(this.list);return}var pe=y(this.modelValue);Ce(pe),this.$emit("update:modelValue",pe)},spliceList:function(){var Ce=arguments,pe=function(Be){return Be.splice.apply(Be,y(Ce))};this.alterList(pe)},updatePosition:function(Ce,pe){var _e=function(Ke){return Ke.splice(pe,0,Ke.splice(Ce,1)[0])};this.alterList(_e)},getRelatedContextFromMoveEvent:function(Ce){var pe=Ce.to,_e=Ce.related,Be=this.getUnderlyingPotencialDraggableComponent(pe);if(!Be)return{component:Be};var Ke=Be.realList,ht={list:Ke,component:Be};if(pe!==_e&&Ke){var vt=Be.getUnderlyingVm(_e)||{};return b(b({},vt),ht)}return ht},getVmIndexFromDomIndex:function(Ce){return this.componentStructure.getVmIndexFromDomIndex(Ce,this.targetDomElement)},onDragStart:function(Ce){this.context=this.getUnderlyingVm(Ce.item),Ce.item._underlying_vm_=this.clone(this.context.element),ye=Ce.item},onDragAdd:function(Ce){var pe=Ce.item._underlying_vm_;if(pe!==void 0){C(Ce.item);var _e=this.getVmIndexFromDomIndex(Ce.newIndex);this.spliceList(_e,0,pe);var Be={element:pe,newIndex:_e};this.emitChanges({added:Be})}},onDragRemove:function(Ce){if(M(this.$el,Ce.item,Ce.oldIndex),Ce.pullMode==="clone"){C(Ce.clone);return}var pe=this.context,_e=pe.index,Be=pe.element;this.spliceList(_e,1);var Ke={element:Be,oldIndex:_e};this.emitChanges({removed:Ke})},onDragUpdate:function(Ce){C(Ce.item),M(Ce.from,Ce.item,Ce.oldIndex);var pe=this.context.index,_e=this.getVmIndexFromDomIndex(Ce.newIndex);this.updatePosition(pe,_e);var Be={element:this.context.element,oldIndex:pe,newIndex:_e};this.emitChanges({moved:Be})},computeFutureIndex:function(Ce,pe){if(!Ce.element)return 0;var _e=y(pe.to.children).filter(function(vt){return vt.style.display!=="none"}),Be=_e.indexOf(pe.related),Ke=Ce.component.getVmIndexFromDomIndex(Be),ht=_e.indexOf(ye)!==-1;return ht||!pe.willInsertAfter?Ke:Ke+1},onDragMove:function(Ce,pe){var _e=this.move,Be=this.realList;if(!_e||!Be)return!0;var Ke=this.getRelatedContextFromMoveEvent(Ce),ht=this.computeFutureIndex(Ke,Ce),vt=b(b({},this.context),{},{futureIndex:ht}),At=b(b({},Ce),{},{relatedContext:Ke,draggedContext:vt});return _e(At,pe)},onDragEnd:function(){ye=null}}}),Pe=Ie;o.default=Pe},fb6a:function(i,o,a){var s=a("23e7"),c=a("861d"),l=a("e8b5"),d=a("23cb"),f=a("50c4"),b=a("fc6a"),x=a("8418"),k=a("b622"),E=a("1dde"),m=a("ae40"),h=E("slice"),g=m("slice",{ACCESSORS:!0,0:0,1:2}),w=k("species"),p=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!h||!g},{slice:function(S,T){var C=b(this),M=f(C.length),A=d(S,M),P=d(T===void 0?M:T,M),L,R,j;if(l(C)&&(L=C.constructor,typeof L=="function"&&(L===Array||l(L.prototype))?L=void 0:c(L)&&(L=L[w],L===null&&(L=void 0)),L===Array||L===void 0))return p.call(C,A,P);for(R=new(L===void 0?Array:L)(v(P-A,0)),j=0;A<P;A++,j++)A in C&&x(R,j,C[A]);return R.length=j,R}})},fc6a:function(i,o,a){var s=a("44ad"),c=a("1d80");i.exports=function(l){return s(c(l))}},fdbc:function(i,o){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,o,a){var s=a("4930");i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})}(_p)),_p.exports}var gU=mU();const X0=ec(gU),K0=Symbol.for("vuetify:layout"),vU=Symbol.for("vuetify:layout-item"),yU=Re({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function bU(){const t=u.inject(K0);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function wU(t){const e=u.inject(K0);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${u.useId()}`,r=rr("useLayoutItem");u.provide(vU,{id:n});const i=u.shallowRef(!1);u.onDeactivated(()=>i.value=!0),u.onActivated(()=>i.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:a}=e.register(r,{...t,active:u.computed(()=>i.value?!1:t.active.value),id:n});return u.onBeforeUnmount(()=>e.unregister(n)),{layoutItemStyles:o,layoutRect:e.layoutRect,layoutItemScrimStyles:a}}function xU(){const t=u.ref([]);u.onBeforeUpdate(()=>t.value=[]);function e(n,r){t.value[r]=n}return{refs:t,updateRef:e}}const CU=Re({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:jt,default:"$first"},prevIcon:{type:jt,default:"$prev"},nextIcon:{type:jt,default:"$next"},lastIcon:{type:jt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ho(),...Ot(),...ai(),...zo(),...si(),...nu(),...ln({tag:"nav"}),...wn(),...$o({variant:"text"})},"VPagination"),Z0=et()({name:"VPagination",props:CU(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Lt(t,"modelValue"),{t:o,n:a}=ci(),{isRtl:s}=Bi(),{themeClasses:c}=Jn(t),{width:l}=Us(),d=u.shallowRef(-1);Zi(void 0,{scoped:!0});const{resizeRef:f}=ru(T=>{if(!T.length)return;const{target:C,contentRect:M}=T[0],A=C.querySelector(".v-pagination__list > *");if(!A)return;const P=M.width,L=A.offsetWidth+parseFloat(getComputedStyle(A).marginRight)*2;d.value=E(P,L)}),b=u.computed(()=>parseInt(t.length,10)),x=u.computed(()=>parseInt(t.start,10)),k=u.computed(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):d.value>=0?d.value:E(l.value,58));function E(T,C){const M=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((T-C*M)/C).toFixed(2))))}const m=u.computed(()=>{if(b.value<=0||isNaN(b.value)||b.value>Number.MAX_SAFE_INTEGER)return[];if(k.value<=0)return[];if(k.value===1)return[i.value];if(b.value<=k.value)return Vc(b.value,x.value);const T=k.value%2===0,C=T?k.value/2:Math.floor(k.value/2),M=T?C:C+1,A=b.value-C;if(M-i.value>=0)return[...Vc(Math.max(1,k.value-1),x.value),t.ellipsis,b.value];if(i.value-A>=(T?1:0)){const P=k.value-1,L=b.value-P+x.value;return[x.value,t.ellipsis,...Vc(P,L)]}else{const P=Math.max(1,k.value-2),L=P===1?i.value:i.value-Math.ceil(P/2)+x.value;return[x.value,t.ellipsis,...Vc(P,L),t.ellipsis,b.value]}});function h(T,C,M){T.preventDefault(),i.value=C,M&&r(M,C)}const{refs:g,updateRef:w}=xU();Zi({VPaginationBtn:{color:u.toRef(()=>t.color),border:u.toRef(()=>t.border),density:u.toRef(()=>t.density),size:u.toRef(()=>t.size),variant:u.toRef(()=>t.variant),rounded:u.toRef(()=>t.rounded),elevation:u.toRef(()=>t.elevation)}});const p=u.computed(()=>m.value.map((T,C)=>{const M=A=>w(A,C);if(typeof T=="string")return{isActive:!1,key:`ellipsis-${C}`,page:T,props:{ref:M,ellipsis:!0,icon:!0,disabled:!0}};{const A=T===i.value;return{isActive:A,key:T,page:a(T),props:{ref:M,ellipsis:!1,icon:!0,disabled:!!t.disabled||Number(t.length)<2,color:A?t.activeColor:t.color,"aria-current":A,"aria-label":o(A?t.currentPageAriaLabel:t.pageAriaLabel,T),onClick:P=>h(P,T)}}}})),v=u.computed(()=>{const T=!!t.disabled||i.value<=x.value,C=!!t.disabled||i.value>=x.value+b.value-1;return{first:t.showFirstLastPage?{icon:s.value?t.lastIcon:t.firstIcon,onClick:M=>h(M,x.value,"first"),disabled:T,"aria-label":o(t.firstAriaLabel),"aria-disabled":T}:void 0,prev:{icon:s.value?t.nextIcon:t.prevIcon,onClick:M=>h(M,i.value-1,"prev"),disabled:T,"aria-label":o(t.previousAriaLabel),"aria-disabled":T},next:{icon:s.value?t.prevIcon:t.nextIcon,onClick:M=>h(M,i.value+1,"next"),disabled:C,"aria-label":o(t.nextAriaLabel),"aria-disabled":C},last:t.showFirstLastPage?{icon:s.value?t.firstIcon:t.lastIcon,onClick:M=>h(M,x.value+b.value-1,"last"),disabled:C,"aria-label":o(t.lastAriaLabel),"aria-disabled":C}:void 0}});function y(){var C;const T=i.value-x.value;(C=g.value[T])==null||C.$el.focus()}function S(T){T.key===gT.left&&!t.disabled&&i.value>Number(t.start)?(i.value=i.value-1,u.nextTick(y)):T.key===gT.right&&!t.disabled&&i.value<x.value+b.value-1&&(i.value=i.value+1,u.nextTick(y))}return st(()=>u.createVNode(t.tag,{ref:f,class:u.normalizeClass(["v-pagination",c.value,t.class]),style:u.normalizeStyle(t.style),role:"navigation","aria-label":o(t.ariaLabel),onKeydown:S,"data-test":"v-pagination-root"},{default:()=>[u.createElementVNode("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&u.createElementVNode("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(v.value.first):u.createVNode(dt,u.mergeProps({_as:"VPaginationBtn"},v.value.first),null)]),u.createElementVNode("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(v.value.prev):u.createVNode(dt,u.mergeProps({_as:"VPaginationBtn"},v.value.prev),null)]),p.value.map((T,C)=>u.createElementVNode("li",{key:T.key,class:u.normalizeClass(["v-pagination__item",{"v-pagination__item--is-active":T.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(T):u.createVNode(dt,u.mergeProps({_as:"VPaginationBtn"},T.props),{default:()=>[T.page]})])),u.createElementVNode("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(v.value.next):u.createVNode(dt,u.mergeProps({_as:"VPaginationBtn"},v.value.next),null)]),t.showFirstLastPage&&u.createElementVNode("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(v.value.last):u.createVNode(dt,u.mergeProps({_as:"VPaginationBtn"},v.value.last),null)])])]})),{}}}),SU=t=>{const{touchstartX:e,touchendX:n,touchstartY:r,touchendY:i}=t,o=.5,a=16;t.offsetX=n-e,t.offsetY=i-r,Math.abs(t.offsetY)<o*Math.abs(t.offsetX)&&(t.left&&n<e-a&&t.left(t),t.right&&n>e+a&&t.right(t)),Math.abs(t.offsetX)<o*Math.abs(t.offsetY)&&(t.up&&i<r-a&&t.up(t),t.down&&i>r+a&&t.down(t))};function kU(t,e){var r;const n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,(r=e.start)==null||r.call(e,{originalEvent:t,...e})}function EU(t,e){var r;const n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,(r=e.end)==null||r.call(e,{originalEvent:t,...e}),SU(e)}function TU(t,e){var r;const n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,(r=e.move)==null||r.call(e,{originalEvent:t,...e})}function MU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:n=>kU(n,e),touchend:n=>EU(n,e),touchmove:n=>TU(n,e)}}function IU(t,e){var s;const n=e.value,r=n!=null&&n.parent?t.parentElement:t,i=(n==null?void 0:n.options)??{passive:!0},o=(s=e.instance)==null?void 0:s.$.uid;if(!r||!o)return;const a=MU(e.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[o]=a,vT(a).forEach(c=>{r.addEventListener(c,a[c],i)})}function OU(t,e){var o,a;const n=(o=e.value)!=null&&o.parent?t.parentElement:t,r=(a=e.instance)==null?void 0:a.$.uid;if(!(n!=null&&n._touchHandlers)||!r)return;const i=n._touchHandlers[r];vT(i).forEach(s=>{n.removeEventListener(s,i[s])}),delete n._touchHandlers[r]}const J0={mounted:IU,unmounted:OU},AU=Re({id:String,interactive:Boolean,text:String,...Sr($d({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),cf=et()({name:"VTooltip",props:AU(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Lt(t,"modelValue"),{scopeId:i}=ql(),o=u.useId(),a=u.toRef(()=>t.id||`v-tooltip-${o}`),s=u.ref(),c=u.computed(()=>t.location.split(" ").length>1?t.location:t.location+" center"),l=u.computed(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),d=u.toRef(()=>t.transition!=null?t.transition:r.value?"scale-transition":"fade-transition"),f=u.computed(()=>u.mergeProps({"aria-describedby":a.value},t.activatorProps));return st(()=>{const b=Ea.filterProps(t);return u.createVNode(Ea,u.mergeProps({ref:s,class:["v-tooltip",{"v-tooltip--interactive":t.interactive},t.class],style:t.style,id:a.value},b,{modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,transition:d.value,absolute:!0,location:c.value,origin:l.value,persistent:!0,role:"tooltip",activatorProps:f.value,_disableGlobalStack:!0},i),{activator:n.activator,default:function(){var m;for(var x=arguments.length,k=new Array(x),E=0;E<x;E++)k[E]=arguments[E];return((m=n.default)==null?void 0:m.call(n,...k))??t.text}})}),qi({},s)}}),_U={class:"text-center"},DU={key:1},vO=u.defineComponent({__name:"Autocomplete",props:{modelValue:{type:String},variant:{type:String,default:"underlined"},density:{type:String},items:{type:Array,default:[]},cacheItems:{type:Array,default:[]},isPaging:Boolean,hasIcon:Boolean,hideSelected:Boolean,hideDetails:Boolean,clearable:Boolean,chips:Boolean,sorting:Boolean,itemText:{type:String,default:"text"},itemValue:{type:String,default:"value"},itemIcon:{type:String,default:"icon"},pageKey:{type:String,default:"page"},pagesKey:{type:String,default:"pages"},pageSizeKey:{type:String,default:"pageSize"},totalKey:{type:String,default:"total"},itemsKey:{type:String,default:"items"},currentKey:{type:String,default:"current"},searchKey:{type:String,default:"search"},chipColor:String,loadData:Function,remote:{type:Object,default:{page:0,pageSize:0,search:""}}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,r=t,i=u.ref([...r.items]),o=u.ref(),a=u.ref([...r.cacheItems??[]]),s=u.ref(!1),c=u.ref(!1),l=u.ref(0),d=u.ref(0),f=u.ref(0),b=(p,v)=>{const y=v.split(".");return y.length===0?p:(y[0]==="$"?y.shift():y.unshift("data"),x(p,y))},x=(p,v)=>{if(typeof p!="object"||v.length==0)return p;const y=v[0];return v.shift(),x(p[y],v)},k=()=>{r.loadData&&(s.value=!0,r.loadData().then(p=>{l.value=b(p,r.totalKey),d.value=b(p,r.pagesKey),f.value=b(p,r.currentKey);const v=b(p,r.itemsKey);r.isPaging?i.value=v:(c.value=f.value>=l.value,i.value=i.value.concat(v||[]))}).finally(()=>{s.value=!1}))},E=p=>{p&&!c.value&&(r.remote[r.pageKey]+=1,k())},m=p=>{a.value.find(v=>v[r.itemValue]==p)||(a.value.push(i.value.find(v=>v[r.itemValue]==p)),n("update:modelValue",o.value))},h=p=>{o.value="",a.value=a.value.filter(v=>v[r.itemValue]!=p[r.itemValue]),n("update:modelValue",o.value)};u.onMounted(()=>{k()}),u.onUpdated(()=>{o.value=r.modelValue});const g=p=>{r.loadData&&(p==r.remote[r.searchKey]||!p||p!=o.value[r.itemText]&&(r.remote[r.pageKey]=1,r.remote[r.searchKey]=p,k()))},w=u.computed(()=>r.chips&&r.hasIcon&&!r.sorting);return(p,v)=>(u.openBlock(),u.createElementBlock("div",null,[t.sorting&&a.value.length>0?(u.openBlock(),u.createBlock(jn,{key:0},{default:u.withCtx(()=>[u.createVNode(ji,null,{default:u.withCtx(()=>[u.createVNode(u.unref(X0),{animation:"300",handle:".handle",modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=y=>a.value=y),"item-key":t.itemValue},{item:u.withCtx(({element:y})=>[t.hasIcon?(u.openBlock(),u.createBlock(ir,{key:0,"prepend-avatar":y[t.itemIcon],title:y[t.itemText],animation:"300"},{append:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-drag",class:"handle mx-2 cursor-grab"}),u.createVNode(dt,{onClick:S=>h(y),variant:"text",icon:"mdi-delete"},null,8,["onClick"])]),_:2},1032,["prepend-avatar","title"])):(u.openBlock(),u.createBlock(ir,{key:1,title:y[t.itemText],animation:"300"},{append:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-drag",class:"handle mx-2 cursor-grab"}),u.createVNode(dt,{onClick:S=>h(y),variant:"text",icon:"mdi-delete"},null,8,["onClick"])]),_:2},1032,["title"]))]),_:1},8,["modelValue","item-key"])]),_:1})]),_:1})):u.createCommentVNode("",!0),u.createVNode(Ap,{modelValue:o.value,"onUpdate:modelValue":[v[4]||(v[4]=y=>o.value=y),m],items:i.value,loading:s.value,"item-value":t.itemValue,"item-title":t.itemText,clearable:t.sorting?!1:t.clearable,"hide-details":t.hideDetails,"hide-selected":t.hideSelected,class:u.normalizeClass(t.sorting?"v-autocomplete-sorting":""),variant:t.variant,density:t.density,"onUpdate:search":g},u.createSlots({_:2},[t.hasIcon?{name:"item",fn:u.withCtx(({item:y,props:S})=>[u.createVNode(ir,u.mergeProps(S,{"prepend-avatar":y.raw[t.itemIcon],title:y.raw[t.itemText]}),null,16,["prepend-avatar","title"])]),key:"0"}:void 0,w.value?{name:"chip",fn:u.withCtx(({props:y,item:S})=>[u.createVNode(Gs,u.mergeProps(y,{color:t.chipColor,"prepend-avatar":t.hasIcon?S.raw[t.itemIcon]:void 0,text:S.raw[t.itemText]}),null,16,["color","prepend-avatar","text"])]),key:"1"}:void 0,t.loadData?{name:"append-item",fn:u.withCtx(()=>[u.createElementVNode("div",_U,[r.isPaging?(u.openBlock(),u.createBlock(Z0,{key:0,modelValue:t.remote[t.pageKey],"onUpdate:modelValue":[v[1]||(v[1]=y=>t.remote[t.pageKey]=y),v[2]||(v[2]=y=>k())],rounded:"circle",length:d.value,"total-visible":"5"},null,8,["modelValue","length"])):(u.openBlock(),u.createElementBlock("div",DU,[u.withDirectives((u.openBlock(),u.createBlock(dt,{class:"ma-2",color:"primary",disabled:c.value,loading:s.value,onClick:v[3]||(v[3]=()=>{t.remote[t.pageKey]+=1,k()})},{default:u.withCtx(()=>v[5]||(v[5]=[u.createTextVNode("Load more ")])),_:1},8,["disabled","loading"])),[[Vl,E]]),u.createVNode(Mn,{vertical:""}),u.createElementVNode("span",null,u.toDisplayString(f.value)+"/"+u.toDisplayString(l.value),1)]))])]),key:"2"}:void 0]),1032,["modelValue","items","loading","item-value","item-title","clearable","hide-details","hide-selected","class","variant","density"])]))}}),NU=u.defineComponent({__name:"TextDatepicker",props:{modelValue:{type:String},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,r=t,i=u.ref(r.modelValue),o=u.ref(r.visible),a=()=>{o.value=!o.value},s=()=>{n("update:modelValue",i.value),a()};return(c,l)=>(u.openBlock(),u.createBlock(Go,{class:"d-inline-block","min-width":"290px",eager:"",modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=d=>o.value=d),location:"end bottom",onInput:a},{activator:u.withCtx(({props:d})=>[u.createVNode(Fn,u.mergeProps({class:"d-inline-block"},d,{style:{width:"180px"},"hide-details":"",variant:"underlined",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=f=>i.value=f),"prepend-inner-icon":"mdi-event"}),null,16,["modelValue"])]),default:u.withCtx(()=>[u.createVNode(Yd,{modelValue:i.value,"onUpdate:modelValue":[l[1]||(l[1]=d=>i.value=d),s]},null,8,["modelValue"])]),_:1},8,["modelValue"]))}}),Jo="between";function Nr(t,e,n,r){const i=n?`.${n}`:"";t.push([`${e}${i}`,r.toString()])}function PU(t,e){if((e.modifier||Jo)===Jo){e.valueFrom&&Nr(t,e.key,"gte",e.valueFrom),e.valueTo&&Nr(t,e.key,"lt",e.valueTo);return}}function LU(t,e){if((e.modifier||Jo)===Jo){e.valueFrom&&Nr(t,e.key,"gte",e.valueFrom),e.valueTo&&Nr(t,e.key,"lte",e.valueTo);return}}function RU(t,e){e.valueIs&&Nr(t,e.key,"",e.valueIs)}function BU(t,e){if((e.modifier||Jo)===Jo){e.valueFrom&&Nr(t,e.key,"gte",e.valueFrom),e.valueTo&&Nr(t,e.key,"lte",e.valueTo);return}}function jU(t,e){e.valueIs&&Nr(t,e.key,"",e.valueIs)}function FU(t,e){const n=e.modifier||"equals";if(n==="equals"){const r=parseFloat(e.valueIs);isNaN(r)||Nr(t,e.key,"",r);return}if(n==="between"){const r=parseFloat(e.valueFrom),i=parseFloat(e.valueTo);isNaN(r)||Nr(t,e.key,"gte",r),isNaN(i)||Nr(t,e.key,"lte",i);return}if(n==="greaterThan"){const r=parseFloat(e.valueIs);isNaN(r)||Nr(t,e.key,"gt",r);return}if(n==="lessThan"){const r=parseFloat(e.valueIs);isNaN(r)||Nr(t,e.key,"lt",r);return}}function HU(t,e){const n=e.modifier||"equals";if(n==="equals"&&e.valueIs){Nr(t,e.key,"",e.valueIs);return}if(n==="contains"&&e.valueIs){Nr(t,e.key,"ilike",e.valueIs);return}}function zU(t,e){if((e.modifier||"equals")==="equals"&&e.valueIs){Nr(t,e.key,"",e.valueIs);return}}function $U(t,e){const n=e.modifier||"in";if(n==="in"&&e.valuesAre&&e.valuesAre.length>0){Nr(t,e.key,"in",e.valuesAre);return}if(n==="notIn"&&e.valuesAre&&e.valuesAre.length>0){Nr(t,e.key,"notIn",e.valuesAre);return}}function UU(t,e){if((e.modifier||"equals")==="equals"&&e.valuesAre&&e.valuesAre.length>0){Nr(t,e.key,"",e.valuesAre);return}}function Q0(t){if(!t)return[];const e=[];return t.filter(n=>n.selected).map(n=>(n.itemType==="DatetimeRangeItem"&&PU(e,n),n.itemType==="DateRangeItem"&&LU(e,n),n.itemType==="DateItem"&&RU(e,n),n.itemType==="MonthRangeItem"&&BU(e,n),n.itemType==="MonthItem"&&jU(e,n),n.itemType==="NumberItem"&&FU(e,n),n.itemType==="StringItem"&&HU(e,n),n.itemType==="SelectItem"&&zU(e,n),n.itemType==="MultipleSelectItem"&&$U(e,n),n.itemType==="LinkageSelectItem"&&UU(e,n),n)),e}function WU(t){return Q0(t).map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`).join("&")}const YU={class:"cursor-pointer"},GU={key:0},XU={class:"text-primary"},yO=u.defineComponent({__name:"FilterButtonBody",props:{op:{},compTranslations:{}},emits:["clear"],setup(t,{emit:e}){const n=t,r=e,i=u.computed(()=>{let a="";if(n.op.selected)switch(n.op.itemType){case"DatetimeRangeItem":case"DateRangeItem":case"MonthRangeItem":{(n.op.modifier||Jo)===Jo&&(n.op.valueFrom?n.op.valueTo?a=`${n.op.valueFrom} - ${n.op.valueTo}`:a=` >= ${n.op.valueFrom}`:n.op.valueTo&&(a=` < ${n.op.valueTo}`));break}case"DateItem":case"MonthItem":{a=n.op.valueIs;break}case"NumberItem":{const l=n.op.modifier||"equals";if(l==="equals"){const d=parseFloat(n.op.valueIs);isNaN(d)||(a+=d)}if(l==="between"){const d=parseFloat(n.op.valueFrom||""),f=parseFloat(n.op.valueTo||""),b=!isNaN(d),x=!isNaN(f);b?x?a=`${n.op.valueFrom} - ${n.op.valueTo}`:a=` >= ${n.op.valueFrom}`:x&&(a=` <= ${n.op.valueTo}`)}if(l==="greaterThan"){const d=parseFloat(n.op.valueIs);isNaN(d)||(a+=" > "+n.op.valueFrom)}if(l==="lessThan"){const d=parseFloat(n.op.valueIs);isNaN(d)||(a+=" < "+n.op.valueTo)}break}case"StringItem":{const l=n.op.modifier||"equals";l==="equals"&&n.op.valueIs&&(a=n.op.valueIs),l==="contains"&&n.op.valueIs&&(a=" ~ "+n.op.valueIs);break}case"SelectItem":{(n.op.modifier||"equals")==="equals"&&n.op.valueIs&&(a=n.op.options.find(d=>d.value===n.op.valueIs).text);break}case"MultipleSelectItem":{const l=n.op.modifier||"in",d=n.op.options.filter(f=>n.op.valuesAre.includes(f.value)).map(f=>f.text);(l==="in"||l==="notIn")&&n.op.valuesAre&&n.op.valuesAre.length>0&&(a=` ${n.compTranslations[l]} [ ${d.join(", ")} ]`);break}case"LinkageSelectItem":{a=n.op.valuesAre.map((d,f)=>{var x;const b=(x=n.op.linkageSelectData)==null?void 0:x.items[f].find(k=>d===k.ID);return b.Name?b.Name:b.ID}).join(",");break}default:throw new Error(`itemType '${n.op.itemType}' not supported`)}const s=a;a="";let c=0;for(let l=0;l<s.length;l++)if(a+=s.charAt(l),s.charCodeAt(l)>127?c+=2:c++,c>66){a+="...";break}return a}),o=a=>{r("clear",a)};return(a,s)=>(u.openBlock(),u.createElementBlock("span",YU,[u.createVNode(_t,{start:"",onClick:o,icon:a.op.selected?"mdi-close-circle":"mdi-plus-circle"},null,8,["icon"]),u.createTextVNode(" "+u.toDisplayString(a.op.label)+" ",1),a.op.selected?(u.openBlock(),u.createElementBlock("span",GU,[s[0]||(s[0]=u.createTextVNode(" | ")),u.createElementVNode("span",XU,u.toDisplayString(i.value),1)])):u.createCommentVNode("",!0)]))}}),KU=u.defineComponent({__name:"FilterButton",props:{op:{},isFoldedItem:{type:Boolean},slotProps:{},compTranslations:{}},emits:["clear"],setup(t,{emit:e}){const n=e,r=i=>{n("clear",i)};return(i,o)=>i.isFoldedItem?(u.openBlock(),u.createBlock(ir,u.mergeProps({key:0,variant:"outlined",class:"my-1 px-2"},i.slotProps),{default:u.withCtx(()=>[u.createVNode(yO,{"comp-translations":i.compTranslations,op:i.op,onClear:r},null,8,["comp-translations","op"])]),_:1},16)):(u.openBlock(),u.createBlock(Gs,u.mergeProps({key:1,variant:"outlined",class:["mr-2 my-1",i.op.selected?"":"text-grey-darken-1"],style:{borderStyle:i.op.selected?"solid":"dashed"}},i.slotProps),{default:u.withCtx(()=>[u.createVNode(yO,{"comp-translations":i.compTranslations,op:i.op,onClear:r},null,8,["comp-translations","op"])]),_:1},16,["class","style"]))}}),V0=u.defineComponent({__name:"ItemFilter",props:{modelValue:{},isFoldedItem:{type:Boolean},itemComp:{},translations:{},compTranslations:{},internalValue:{},index:{},config:{}},emits:["update:modelValue","change","clear"],setup(t,{emit:e}){const n=t;let r;const i=u.ref({...n.modelValue}),o=u.ref(!1),a=e,s=d=>{if(d){l(new Event("save"));return}!i.value.valueIs&&(!i.value.valuesAre||i.value.valuesAre.length==0)&&!i.value.valueFrom&&!i.value.valueTo||(i.value.selected=!0,Object.assign(n.modelValue,i.value),a("update:modelValue",n.modelValue),a("change",null))},c=()=>{o.value=!1,r?r(s):s(!1)},l=d=>{i.value.selected&&(i.value.valueIs="",i.value.valuesAre=[],i.value.valueFrom="",i.value.valueTo="",i.value.selected=!1,Object.assign(n.modelValue,i.value),a("update:modelValue",n.modelValue),a("clear",d))};return(d,f)=>(u.openBlock(),u.createBlock(Go,{"close-on-content-click":!1,class:"rounded-lg",modelValue:o.value,"onUpdate:modelValue":f[2]||(f[2]=b=>o.value=b)},{activator:u.withCtx(({props:b})=>[u.createVNode(KU,{"comp-translations":d.compTranslations,op:i.value,"is-folded-item":d.isFoldedItem,slotProps:b,onClear:l},null,8,["comp-translations","op","is-folded-item","slotProps"])]),default:u.withCtx(()=>[u.createVNode(jn,{class:"pa-3 bg-white"},{default:u.withCtx(()=>{var b;return[u.createElementVNode("div",null,u.toDisplayString((b=d.modelValue.translations)==null?void 0:b.filterBy),1),(u.openBlock(),u.createBlock(u.resolveDynamicComponent(d.itemComp),{ref:"itemEl",modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=x=>i.value=x),translations:d.compTranslations,config:d.config,onPostSetup:f[1]||(f[1]=x=>u.isRef(r)?r.value=x.beforeDoneHandler:r=x.beforeDoneHandler)},null,40,["modelValue","translations","config"])),u.createElementVNode("div",null,[u.createVNode(dt,{class:"mt-5 float-right",color:"primary",rounded:"",onClick:c},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(d.translations.apply),1)]),_:1})])]}),_:1})]),_:1},8,["modelValue"]))}}),ZU={style:{width:"200px"}},JU={style:{height:"34px"},class:"pl-2 pt-4"},QU=u.defineComponent({__name:"DatetimeRangeItem",props:{modelValue:{},translations:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;n.modelValue.modifier=n.modelValue.modifier||Jo;const r=u.ref(!1),i=n.modelValue.modifier;return(o,a)=>(u.openBlock(),u.createElementBlock("div",ZU,[(u.openBlock(),u.createBlock(g0,{modelValue:o.modelValue.valueFrom,"onUpdate:modelValue":a[0]||(a[0]=s=>o.modelValue.valueFrom=s),key:u.unref(i)+"form",visible:r.value,"hide-details":!0},null,8,["modelValue","visible"])),u.createElementVNode("div",JU,[u.createElementVNode("span",null,u.toDisplayString(o.translations.to),1)]),(u.openBlock(),u.createBlock(g0,{modelValue:o.modelValue.valueTo,"onUpdate:modelValue":a[1]||(a[1]=s=>o.modelValue.valueTo=s),key:u.unref(i)+"to","hide-details":!0},null,8,["modelValue"]))]))}}),VU={style:{width:"200px"}},qU={style:{height:"34px"},class:"pl-2 pt-4"},e7=u.defineComponent({__name:"DateRangeItem",props:{modelValue:{},translations:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;n.modelValue.modifier=n.modelValue.modifier||Jo;const r=u.ref(!1),i=n.modelValue.modifier;return(o,a)=>(u.openBlock(),u.createElementBlock("div",VU,[(u.openBlock(),u.createBlock(Yd,{modelValue:o.modelValue.valueFrom,"onUpdate:modelValue":a[0]||(a[0]=s=>o.modelValue.valueFrom=s),key:u.unref(i)+"form",visible:r.value,"hide-details":!0},null,8,["modelValue","visible"])),u.createElementVNode("div",qU,[u.createElementVNode("span",null,u.toDisplayString(o.translations.to),1)]),(u.openBlock(),u.createBlock(Yd,{modelValue:o.modelValue.valueTo,"onUpdate:modelValue":a[1]||(a[1]=s=>o.modelValue.valueTo=s),key:u.unref(i)+"to","hide-details":!0},null,8,["modelValue"]))]))}}),t7={style:{width:"200px"}},n7=u.defineComponent({__name:"DateItem",props:{modelValue:{},translations:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=u.ref(!1);return(r,i)=>(u.openBlock(),u.createElementBlock("div",t7,[u.createVNode(Yd,{modelValue:r.modelValue.valueIs,"onUpdate:modelValue":i[0]||(i[0]=o=>r.modelValue.valueIs=o),visible:n.value,"hide-details":!0},null,8,["modelValue","visible"])]))}}),r7={style:{width:"300px"}},i7={key:0},o7={class:"pt-6 px-3"},a7={key:1},s7=u.defineComponent({__name:"NumberItem",props:{modelValue:{},translations:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;n.modelValue.modifier=n.modelValue.modifier||"equals";const r=n.modelValue.modifier,i=n.translations;return(o,a)=>(u.openBlock(),u.createElementBlock("div",r7,[u.unref(r)=="between"?(u.openBlock(),u.createElementBlock("div",i7,[u.createVNode(vp,null,{default:u.withCtx(()=>[u.createVNode(Fd,null,{default:u.withCtx(()=>[u.createVNode(_t,{class:"py-8 mr-4 float-md-start",icon:"mdi-subdirectory-arrow-right",size:"large"}),u.createVNode(Fn,{class:"d-inline-block",style:{width:"80px"},type:"number",variant:"underlined",modelValue:n.modelValue.valueFrom,"onUpdate:modelValue":a[0]||(a[0]=s=>n.modelValue.valueFrom=s)},null,8,["modelValue"]),u.createElementVNode("div",o7,u.toDisplayString(u.unref(i).and),1),u.createVNode(Fn,{class:"d-inline-block",style:{width:"80px"},type:"number",variant:"underlined",modelValue:n.modelValue.valueTo,"onUpdate:modelValue":a[1]||(a[1]=s=>n.modelValue.valueTo=s)},null,8,["modelValue"])]),_:1})]),_:1})])):(u.openBlock(),u.createElementBlock("div",a7,[u.createVNode(_t,{class:"py-8 mr-4 float-md-start",icon:"mdi-subdirectory-arrow-right",size:"large"}),u.createVNode(Fn,{class:"d-inline-block",style:{width:"120px"},type:"number",variant:"underlined",modelValue:n.modelValue.valueIs,"onUpdate:modelValue":a[2]||(a[2]=s=>n.modelValue.valueIs=s)},null,8,["modelValue"])]))]))}}),l7=Re({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,modelModifiers:Object,...Wd(),...Sp()},"VTextarea"),c7=et()({name:"VTextarea",directives:{vIntersect:Vl},inheritAttrs:!1,props:l7(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0,"update:rows":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const o=Lt(t,"modelValue"),{isFocused:a,focus:s,blur:c}=Ud(t),{onIntersect:l}=fI(t),d=u.computed(()=>typeof t.counterValue=="function"?t.counterValue(o.value):(o.value||"").toString().length),f=u.computed(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),b=u.ref(),x=u.ref(),k=u.shallowRef(""),E=u.ref(),m=u.computed(()=>t.persistentPlaceholder||a.value||t.active);function h(){var A;E.value!==document.activeElement&&((A=E.value)==null||A.focus()),a.value||s()}function g(A){h(),r("click:control",A)}function w(A){r("mousedown:control",A)}function p(A){A.stopPropagation(),h(),u.nextTick(()=>{o.value="",ep(t["onClick:clear"],A)})}function v(A){var L;const P=A.target;if(o.value=P.value,(L=t.modelModifiers)!=null&&L.trim){const R=[P.selectionStart,P.selectionEnd];u.nextTick(()=>{P.selectionStart=R[0],P.selectionEnd=R[1]})}}const y=u.ref(),S=u.ref(Number(t.rows)),T=u.computed(()=>["plain","underlined"].includes(t.variant));u.watchEffect(()=>{t.autoGrow||(S.value=Number(t.rows))});function C(){t.autoGrow&&u.nextTick(()=>{if(!y.value||!x.value)return;const A=getComputedStyle(y.value),P=getComputedStyle(x.value.$el),L=parseFloat(A.getPropertyValue("--v-field-padding-top"))+parseFloat(A.getPropertyValue("--v-input-padding-top"))+parseFloat(A.getPropertyValue("--v-field-padding-bottom")),R=y.value.scrollHeight,j=parseFloat(A.lineHeight),z=Math.max(parseFloat(t.rows)*j+L,parseFloat(P.getPropertyValue("--v-input-control-height"))),$=parseFloat(t.maxRows)*j+L||1/0,Y=Rr(R??0,z,$);S.value=Math.floor((Y-L)/j),k.value=gt(Y)})}u.onMounted(C),u.watch(o,C),u.watch(()=>t.rows,C),u.watch(()=>t.maxRows,C),u.watch(()=>t.density,C),u.watch(S,A=>{r("update:rows",A)});let M;return u.watch(y,A=>{A?(M=new ResizeObserver(C),M.observe(y.value)):M==null||M.disconnect()}),u.onBeforeUnmount(()=>{M==null||M.disconnect()}),st(()=>{const A=!!(i.counter||t.counter||t.counterValue),P=!!(A||i.details),[L,R]=Cd(n),{modelValue:j,...z}=Ta.filterProps(t),$=au.filterProps(t);return u.createVNode(Ta,u.mergeProps({ref:b,modelValue:o.value,"onUpdate:modelValue":Y=>o.value=Y,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-input--plain-underlined":T.value},t.class],style:t.style},L,z,{centerAffix:S.value===1&&!T.value,focused:a.value}),{...i,default:Y=>{let{id:ae,isDisabled:K,isDirty:te,isReadonly:G,isValid:ue,hasDetails:J}=Y;return u.createVNode(au,u.mergeProps({ref:x,style:{"--v-textarea-control-height":k.value},onClick:g,onMousedown:w,"onClick:clear":p,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},$,{id:ae.value,active:m.value||te.value,centerAffix:S.value===1&&!T.value,dirty:te.value||t.dirty,disabled:K.value,focused:a.value,details:J.value,error:ue.value===!1}),{...i,default:be=>{let{props:{class:de,...ce}}=be;return u.createElementVNode(u.Fragment,null,[t.prefix&&u.createElementVNode("span",{class:"v-text-field__prefix"},[t.prefix]),u.withDirectives(u.createElementVNode("textarea",u.mergeProps({ref:E,class:de,value:o.value,onInput:v,autofocus:t.autofocus,readonly:G.value,disabled:K.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:h,onBlur:c},ce,R),null),[[Vl,{handler:l},null,{once:!0}]]),t.autoGrow&&u.withDirectives(u.createElementVNode("textarea",{class:u.normalizeClass([de,"v-textarea__sizer"]),id:`${ce.id}-sizer`,"onUpdate:modelValue":V=>o.value=V,ref:y,readonly:!0,"aria-hidden":"true"},null),[[u.vModelText,o.value]]),t.suffix&&u.createElementVNode("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:P?Y=>{var ae;return u.createElementVNode(u.Fragment,null,[(ae=i.details)==null?void 0:ae.call(i,Y),A&&u.createElementVNode(u.Fragment,null,[u.createElementVNode("span",null,null),u.createVNode(m0,{active:t.persistentCounter||a.value,value:d.value,max:f.value,disabled:t.disabled},i.counter)])])}:void 0})}),qi({},b,x,E)}}),u7={key:0},d7={class:"d-flex"},f7={key:1},h7={class:"d-flex"},p7=u.defineComponent({__name:"StringItem",props:{modelValue:{type:Object,default:()=>{}},translations:{type:Object,default:()=>{}},config:{type:Object,default:()=>{}}},emits:["update:modelValue","postSetup"],setup(t,{expose:e,emit:n}){const r=t;r.modelValue.modifier=r.modelValue.modifier||"contains";const i=n,o=r.translations,a=u.ref([{text:o.equals,value:"equals"},{text:o.contains,value:"contains"}]),s=u.ref([]),c=r.config||{};c.rows||(c.rows=1);const l=()=>{s.value.push({v:""})},d=b=>{s.value.splice(b,1)},f=b=>{var x;if(c.many){const k=s.value.filter(E=>E.v.length).map(E=>E.v).join(",");r.modelValue.valueIs=k,i("update:modelValue",r.modelValue),b(k.length===0)}else b(!r.modelValue.valueIs||((x=r.modelValue.valueIs)==null?void 0:x.length)===0)};return e(f),u.onMounted(()=>{i("postSetup",{beforeDoneHandler:f})}),c.many&&(r.modelValue.valueIs?r.modelValue.valueIs.split(",").filter(b=>b.length).forEach(b=>{s.value.push({v:b})}):l()),(b,x)=>(u.openBlock(),u.createElementBlock("div",null,[u.unref(c).modifierDisabled?u.createCommentVNode("",!0):(u.openBlock(),u.createElementBlock("div",u7,[u.createVNode(Xs,{class:"d-inline-block",style:{width:"200px"},modelValue:r.modelValue.modifier,"onUpdate:modelValue":x[0]||(x[0]=k=>r.modelValue.modifier=k),items:a.value,"item-title":"text","item-value":"value",variant:"underlined","hide-details":""},null,8,["modelValue","items"])])),u.createElementVNode("div",d7,[u.unref(c).modifierDisabled?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(_t,{key:0,class:"py-8 mr-4 float-md-start",icon:"mdi-subdirectory-arrow-right",size:"large"})),u.unref(c).many?(u.openBlock(),u.createElementBlock("div",f7,[u.createVNode(ji,{density:"compact"},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(s.value,(k,E)=>(u.openBlock(),u.createBlock(ir,{density:"compact"},{prepend:u.withCtx(()=>[u.createVNode(ka,{density:"compact",color:"secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(E+1),1)]),_:2},1024)]),append:u.withCtx(()=>[u.createVNode(dt,{density:"compact",variant:"text",icon:"mdi-close",onClick:m=>d(E)},null,8,["onClick"])]),default:u.withCtx(()=>[u.createVNode(Fn,{density:"compact",width:u.unref(c).width,"hide-details":"",modelValue:k.v,"onUpdate:modelValue":m=>k.v=m},null,8,["width","modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1}),u.createElementVNode("div",h7,[u.createVNode(Xr),u.createVNode(dt,{density:"compact",variant:"text",icon:"mdi-plus",onClick:l}),u.createVNode(Xr)])])):u.unref(c).rows&&u.unref(c).rows>1?(u.openBlock(),u.createBlock(c7,{key:2,rows:u.unref(c).rows,class:"d-inline-block",width:u.unref(c).width,"max-width":u.unref(c).maxWidth,variant:"underlined",type:"text",modelValue:r.modelValue.valueIs,"onUpdate:modelValue":x[1]||(x[1]=k=>r.modelValue.valueIs=k),"persistent-hint":"",hint:u.unref(c).hint,"hide-details":!u.unref(c).hint},null,8,["rows","width","max-width","modelValue","hint","hide-details"])):(u.openBlock(),u.createBlock(Fn,{key:3,class:"d-inline-block",style:{width:"120px"},variant:"underlined",type:"text",modelValue:r.modelValue.valueIs,"onUpdate:modelValue":x[2]||(x[2]=k=>r.modelValue.valueIs=k),"persistent-hint":"",hint:u.unref(c).hint,"hide-details":!u.unref(c).hint},null,8,["modelValue","hint","hide-details"]))])]))}}),m7=u.defineComponent({__name:"LinkageSelectItem",props:{modelValue:{},translations:{}},emits:["update:modelValue"],setup(t,{emit:e}){return(n,r)=>(u.openBlock(),u.createBlock(GI,{style:{width:"500px"},modelValue:n.modelValue.valuesAre,"onUpdate:modelValue":r[0]||(r[0]=i=>n.modelValue.valuesAre=i),items:n.modelValue.linkageSelectData.items,labels:n.modelValue.linkageSelectData.labels,"select-out-of-order":n.modelValue.linkageSelectData.selectOutOfOrder,row:"","hide-details":""},null,8,["modelValue","items","labels","select-out-of-order"]))}}),g7=u.defineComponent({__name:"MultipleSelectItem",props:u.mergeModels({translations:{},config:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){var c;class e{constructor(){We(this,"options",[]);We(this,"valuesAre",[]);We(this,"modifier","in")}}const n=t,r=n.translations,i=n.config||{},o=u.useModel(t,"modelValue");o.value||(o.value=new e),o.value.options||(o.value.options=[]),o.value.modifier||(o.value.modifier="in");const a=u.ref([{text:r.in,value:"in"},{text:r.notIn,value:"notIn"}]),s=(c=i.component)==null?void 0:c.call(i,{window,Vue:Cb});return(l,d)=>(u.openBlock(),u.createElementBlock("div",null,[u.createElementVNode("div",null,[u.createVNode(Xs,{class:"d-inline-block",style:{width:"200px"},modelValue:o.value.modifier,"onUpdate:modelValue":d[0]||(d[0]=f=>o.value.modifier=f),items:a.value,"item-title":"text","item-value":"value",variant:"underlined","hide-details":""},null,8,["modelValue","items"])]),u.unref(s)?(u.openBlock(),u.createBlock(u.unref(s),{key:0,modelValue:o.value.valuesAre,"onUpdate:modelValue":d[1]||(d[1]=f=>o.value.valuesAre=f),items:o.value.options,"item-title":"text","item-value":"value"},null,8,["modelValue","items"])):(u.openBlock(),u.createBlock(Xs,{key:1,chips:"",modelValue:o.value.valuesAre,"onUpdate:modelValue":d[2]||(d[2]=f=>o.value.valuesAre=f),items:o.value.options,"item-title":"text","item-value":"value",multiple:"",density:"comfortable"},null,8,["modelValue","items"]))]))}}),v7={style:{width:"200px"}},y7=u.defineComponent({__name:"SelectItem",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){return(n,r)=>(u.openBlock(),u.createElementBlock("div",v7,[u.createVNode(vO,{modelValue:n.modelValue.valueIs,"onUpdate:modelValue":r[0]||(r[0]=i=>n.modelValue.valueIs=i),items:n.modelValue.options,style:{width:"200px"},class:"d-inline-block","hide-details":""},null,8,["modelValue","items"])]))}}),b7={style:{width:"200px"}},w7={style:{height:"34px"},class:"pl-2 pt-4"},x7=u.defineComponent({__name:"MonthRangeItem",props:{modelValue:{},translations:{},config:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;n.modelValue.modifier=n.modelValue.modifier||Jo;const r=u.ref(!1),i=n.modelValue.modifier;return(o,a)=>{var s,c;return u.openBlock(),u.createElementBlock("div",b7,[(u.openBlock(),u.createBlock(Op,{modelValue:o.modelValue.valueFrom,"onUpdate:modelValue":a[0]||(a[0]=l=>o.modelValue.valueFrom=l),key:u.unref(i)+"form",visible:r.value,"hide-details":!0,"year-text":o.translations.year,"month-text":o.translations.month,"ok-text":o.translations.apply,"clear-text":o.translations.clear,"month-names":o.translations.monthNames,min:(s=o.config)==null?void 0:s.min,max:o.modelValue.valueTo},null,8,["modelValue","visible","year-text","month-text","ok-text","clear-text","month-names","min","max"])),u.createElementVNode("div",w7,[u.createElementVNode("span",null,u.toDisplayString(o.translations.to),1)]),(u.openBlock(),u.createBlock(Op,{modelValue:o.modelValue.valueTo,"onUpdate:modelValue":a[1]||(a[1]=l=>o.modelValue.valueTo=l),key:u.unref(i)+"to","hide-details":!0,"year-text":o.translations.year,"month-text":o.translations.month,"ok-text":o.translations.apply,"clear-text":o.translations.clear,"month-names":o.translations.monthNames,min:o.modelValue.valueFrom,max:(c=o.config)==null?void 0:c.max},null,8,["modelValue","year-text","month-text","ok-text","clear-text","month-names","min","max"]))])}}}),C7={style:{width:"150px"}},S7=u.defineComponent({__name:"MonthItem",props:{modelValue:{},translations:{},min:{},max:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=u.ref(!1);return(r,i)=>(u.openBlock(),u.createElementBlock("div",C7,[u.createVNode(Op,{modelValue:r.modelValue.valueIs,"onUpdate:modelValue":i[0]||(i[0]=o=>r.modelValue.valueIs=o),visible:n.value,"hide-details":!0,"year-text":r.translations.year,"month-text":r.translations.month,"ok-text":r.translations.apply,"clear-text":r.translations.clear,"month-names":r.translations.monthNames,min:r.min,max:r.max},null,8,["modelValue","visible","year-text","month-text","ok-text","clear-text","month-names","min","max"])]))}}),k7={class:"d-flex flex-grow-1"},E7=u.defineComponent({__name:"index",props:u.mergeModels({internalValue:{type:Array,required:!0},replaceWindowLocation:Boolean,translations:{type:Object,default:()=>({month:{year:"Year",month:"Month"},number:{equals:"is equal to",between:"between",greaterThan:"is greater than",lessThan:"is less than",and:"and"},string:{equals:"is equal to",contains:"contains"},multipleSelect:{in:"in",notIn:"not in"},clearAll:"Clear Filters",clear:"Clear",add:"Add Filters",apply:"Apply",to:"to"})}},{modelValue:{},modelModifiers:{}}),emits:u.mergeModels(["data"],["update:modelValue"]),setup(t,{emit:e}){const n=t,r=u.useModel(t,"modelValue"),i=e,o=n.translations,a={DatetimeRangeItem:QU,DateRangeItem:e7,MonthRangeItem:x7,DateItem:n7,MonthItem:S7,NumberItem:s7,StringItem:p7,LinkageSelectItem:m7,MultipleSelectItem:g7,SelectItem:y7},s={DatetimeRangeItem:{to:o.to},DateRangeItem:{to:o.to},MonthRangeItem:{to:o.to,clear:o.clear,apply:o.apply,...o.month},MonthItem:{clear:o.clear,apply:o.apply,...o.month},DateItem:{to:o.to},NumberItem:o.number,StringItem:o.string,SelectItem:{},MultipleSelectItem:o.multipleSelect,LinkageSelectItem:{}},c=g=>g.map((w,p)=>w.selected?p:-1).filter(w=>w!==-1),l=u.ref(!1),d=u.ref(c(n.internalValue)),f=()=>{const w={filterKeys:n.internalValue.map((p,v)=>p.key),filterData:Q0(n.internalValue),encodedFilterData:WU(n.internalValue)};r.value=w,l.value=!1,i("data",w.filterData)},b=g=>{n.internalValue.map(w=>{w.selected=!1}),d.value=c(n.internalValue),f()},x=g=>{d.value=c(n.internalValue),f(),g.stopPropagation()},k=(g,w)=>(p,v)=>n.internalValue.filter(y=>g(y)?p[y.itemType]:!1).map((y,S)=>({itemComp:p[y.itemType],op:y,internalValue:n.internalValue,isFoldedItem:w,translations:n.translations,compTranslations:v[y.itemType],config:y.config,index:S})),E=u.computed(()=>k(g=>!g.folded,!1)(a,s)),m=u.computed(()=>k(g=>g.folded&&!!g.selected,!1)(a,s)),h=u.computed(()=>k(g=>g.folded&&!g.selected,!0)(a,s));return u.onMounted(()=>{const g=Q0(n.internalValue);g.length&&i("data",g)}),(g,w)=>(u.openBlock(),u.createElementBlock("div",k7,[u.createElementVNode("div",null,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(E.value,p=>(u.openBlock(),u.createBlock(V0,u.mergeProps({modelValue:p.op,"onUpdate:modelValue":v=>p.op=v,ref_for:!0},p,{onChange:f,onClear:x}),null,16,["modelValue","onUpdate:modelValue"]))),256)),(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(m.value,p=>(u.openBlock(),u.createBlock(V0,u.mergeProps({modelValue:p.op,"onUpdate:modelValue":v=>p.op=v,ref_for:!0},p,{onChange:f,onClear:x}),null,16,["modelValue","onUpdate:modelValue"]))),256))]),u.createVNode(Xr),u.createVNode(dt,{onClick:b,variant:"plain",size:"small",disabled:t.internalValue.findIndex(p=>p.selected)<0,class:"my-1"},{default:u.withCtx(()=>[u.createVNode(_t,{size:"small",icon:"mdi-close"}),u.createTextVNode(" "+u.toDisplayString(u.unref(o).clearAll),1)]),_:1},8,["disabled"]),h.value.length>0?(u.openBlock(),u.createBlock(Go,{key:0,"close-on-content-click":!1,class:"rounded-lg"},{activator:u.withCtx(({props:p})=>[u.createVNode(dt,u.mergeProps(p,{variant:"plain",size:"small",color:"primary",class:"my-1"}),{default:u.withCtx(()=>[u.createVNode(_t,{size:"small",icon:"mdi-filter"}),u.createTextVNode(" "+u.toDisplayString(u.unref(o).add),1)]),_:2},1040)]),default:u.withCtx(()=>[u.createVNode(ji,{variant:"flat",class:"white pa-0"},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(h.value,p=>(u.openBlock(),u.createBlock(V0,u.mergeProps({modelValue:p.op,"onUpdate:modelValue":v=>p.op=v,ref_for:!0},p,{onChange:f,onClear:x}),null,16,["modelValue","onUpdate:modelValue"]))),256))]),_:1})]),_:1})):u.createCommentVNode("",!0)]))}}),T7=u.defineComponent({__name:"RestoreScrollListener",setup(t){let e=0,n=0;const r=a=>new Promise(s=>setTimeout(s,a)),i=(a,s,c=100)=>{s().catch(l=>a>1?r(c).then(()=>i(a-1,s,c*2)):Promise.reject(l))},o=()=>(window.scroll({left:e,top:n,behavior:"smooth"}),window.scrollX==e&&window.scrollY==n?Promise.resolve():Promise.reject());return u.onMounted(()=>{window.addEventListener("fetchStart",a=>{e=window.scrollX,n=window.scrollY}),window.addEventListener("fetchEnd",a=>{i(5,o,100)})}),(a,s)=>null}}),M7=["srcdoc"],I7=u.defineComponent({__name:"ScrollIframe",props:{srcdoc:{type:String,required:!0},iframeHeightName:{type:String,required:!0},iframeHeight:{type:String,required:!0},width:{type:String}},setup(t,{expose:e}){const n=u.ref(),r=u.ref(),i=t,o=s=>{let c=n.value.contentWindow.document.documentElement.scrollHeight+"px";n.value.style.height=c,document.cookie=`${i.iframeHeightName}=`+c,r.value.style.height=c};return e({scrollToCurrentContainer:s=>{var l;if(!n.value)return;const c=n.value.contentWindow.document.body.querySelector("div[data-container-id='"+s+"']");c&&window.parent.scroll({top:(l=c.parentElement)==null?void 0:l.offsetTop,behavior:"smooth"})}}),(s,c)=>(u.openBlock(),u.createElementBlock("div",{class:"mx-auto",ref_key:"container",ref:r,style:u.normalizeStyle({height:t.iframeHeight,width:t.width})},[u.createElementVNode("iframe",{ref_key:"iframe",ref:n,srcdoc:t.srcdoc,frameborder:"0",scrolling:"no",onLoad:o,style:{width:"100%",display:"block",border:"none",padding:0,margin:0}},null,40,M7)],4))}}),O7=u.defineComponent({__name:"SendVariables",setup(t,{expose:e}){const n=u.ref();return e({tagInputsFocus:o=>{n.value=o},addTags:o=>{if(!n.value)return;let a=n.value.modelValue,s=n.value.selectionStart,c=n.value.selectionEnd;const l=n.value.$el.querySelector("input");l&&(s=l.selectionStart,c=l.selectionEnd);let d=a.substring(0,s),f=a.substring(c,a.length);n.value.$emit("update:modelValue",d+"{{"+o+"}}"+f),n.value.focus()}}),(o,a)=>(u.openBlock(),u.createElementBlock("div",null,[u.renderSlot(o.$slots,"default")]))}}),A7={name:"vx-message-listener"},_7=u.defineComponent({...A7,props:{listenFunc:{required:!0,type:Function}},setup(t){const e=t;return u.onMounted(()=>{window.vxMessageListener||(window.addEventListener("message",e.listenFunc,!1),window.vxMessageListener=!0)}),(n,r)=>null}}),D7=["id"],N7={__name:"DragListener",props:{dragId:{type:String,default:"vx-drag"},targetId:{type:String,default:"vx-drag-target-area"}},emits:["drop"],setup(t,{emit:e}){const n=t,r=e;return u.onMounted(()=>{const i=document.getElementById(n.dragId);let o=null;i&&(i.ondragstart=a=>{o=a.target;const s=document.getElementById(n.targetId).querySelector("iframe");s&&(s.style.pointerEvents="none")},i.ondragover=a=>{a.preventDefault()},i.ondrop=a=>{const s=document.getElementById(n.targetId).querySelector("iframe");s&&(s.style.pointerEvents="auto"),a.target.id===n.targetId&&r("drop",{start:o,target:a.target})})}),(i,o)=>(u.openBlock(),u.createElementBlock("div",{id:n.dragId},[u.renderSlot(i.$slots,"default")],8,D7))}},P7=["innerHTML"],L7=["innerHTML"],R7={key:4,class:"v-input__details",role:"alert","aria-live":"polite"},B7={key:0,class:"v-messages mb-3","aria-live":"polite",style:{opacity:"1",color:"rgb(var(--v-theme-error))"}},j7={role:"alert",class:"v-messages__message"},F7=u.defineComponent({__name:"AdvancedSelect",props:u.mergeModels({hint:{type:String,default:""},items:{type:Array,default:()=>[]},itemValue:{type:String,default:"id"},itemText:{type:String,default:"text"},itemImage:{type:String,default:"image"},label:{type:String,default:""},addItemLabel:{type:String,default:""},modelValue:{},searchItemsFunc:{type:Function,default:null},many:{type:Boolean,default:!1},errorMessages:{type:Array,default:[]},chips:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1},autoComplete:{type:Object,default:{}}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=u.useModel(t,"modelValue"),i=u.ref([]),o=u.ref([]),a=u.ref([]),s=u.ref([]),c=u.ref(""),l=u.ref(!1),d=u.ref(!1),f=u.ref(!1),b={v:!1},x=e,k=C=>{if(!C)return[];const M=C,A=u.isReactive(M)?u.toRaw(M):M;return Array.isArray(A)?A:[A]},E=C=>{const M=o.value;let A=[];if(C){const P=k(C);a.value.length?A=P.map(L=>a.value.find(R=>R[n.itemValue].toString()===L.toString())):A=P.map(L=>M.find(R=>R[n.itemValue].toString()===L.toString()))}f.value=h||A.length==0,o.value=A};u.onMounted(()=>{n.items&&n.items.length&&(a.value=n.items);const C=k(n.modelValue);C.length&&a.value.length&&(o.value=C.map(M=>a.value.find(A=>A[n.itemValue].toString()===M.toString()))),f.value=h||C.length==0,setTimeout(()=>{u.watch(r,M=>{b.v||E(M)})},100)});const m=C=>{c.value=C},h=n.many,g=C=>{if(!C)return;const M=o.value;if(s.value=[],o.value.find(P=>P[n.itemValue]==C[n.itemValue]))return;const A=a.value.find(P=>P[n.itemValue]==C[n.itemValue]);h?o.value.push(A):o.value=[A],v(M)},w=C=>{const M=i.value;i.value=[],v(M)},p=C=>{const M=o.value;o.value=o.value.filter(A=>A[n.itemValue]!=C),v(M)},v=C=>{const M=o.value.map(P=>P[n.itemValue]),A=h?M:M.length?M[0]:"";h||C.length&&C[0],f.value=h||o.value.length==0,b.v=!0,x("update:modelValue",A)};let y,S,T=()=>{};return n.searchItemsFunc&&(S=C=>{l.value=!0,n.searchItemsFunc(C).then(M=>{a.value=M}).finally(()=>{l.value=!1})},y=C=>{C?S(""):a.value=[]},T=()=>{a.value=[],S(c.value)}),(C,M)=>{var A,P;return u.openBlock(),u.createElementBlock("div",{class:u.normalizeClass(["vx-advanced-select mb-2","vx-advanced-select__"+(u.unref(h)?"many":"one")])},[t.label?(u.openBlock(),u.createElementBlock("label",{key:0,class:"v-label theme--light",innerHTML:t.label,style:u.normalizeStyle(t.errorMessages.length?"color: rgb(var(--v-theme-error));opacity: inherit;":"")},null,12,P7)):u.createCommentVNode("",!0),t.hint?(u.openBlock(),u.createElementBlock("p",{key:1,innerHTML:t.hint},null,8,L7)):u.createCommentVNode("",!0),o.value.length>0?(u.openBlock(),u.createBlock(jn,{key:2,color:t.errorMessages.length?"error":"",variant:"flat",class:"mb-2 vx-advanced-select"},{default:u.withCtx(()=>[t.chips?(u.openBlock(),u.createBlock(X9,{key:0,column:""},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(o.value,L=>(u.openBlock(),u.createBlock(Gs,null,{append:u.withCtx(()=>[u.createVNode(dt,{density:"compact",variant:"text",icon:"mdi-delete",onClick:R=>p(L[t.itemValue])},null,8,["onClick"])]),default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(L[t.itemText])+" ",1)]),_:2},1024))),256))]),_:1})):(u.openBlock(),u.createBlock(ji,{key:1,density:"compact",style:{padding:"0"}},{default:u.withCtx(()=>[u.createVNode(u.unref(X0),{modelValue:o.value,"onUpdate:modelValue":M[0]||(M[0]=L=>o.value=L),"item-key":t.itemValue,onDragstart:M[1]||(M[1]=L=>i.value=o.value),onChange:w,handle:".handle"},{item:u.withCtx(({element:L})=>[u.createVNode(ir,{"prepend-avatar":L[t.itemImage],title:L[t.itemText],animation:"300"},{prepend:u.withCtx(()=>[u.unref(h)?(u.openBlock(),u.createBlock(_t,{key:0,density:"compact",icon:"mdi-drag",class:"handle mx-2 cursor-grab"})):u.createCommentVNode("",!0),u.createVNode(dt,{onClick:R=>p(L[t.itemValue]),variant:"text",icon:"mdi-delete",density:"compact"},null,8,["onClick"])]),_:2},1032,["prepend-avatar","title"])]),_:1},8,["modelValue","item-key"])]),_:1}))]),_:1},8,["color"])):u.createCommentVNode("",!0),f.value?(u.openBlock(),u.createBlock(Ap,{key:3,"item-value":t.itemValue,"item-title":t.itemText,items:a.value,label:t.addItemLabel,modelValue:s.value,"onUpdate:modelValue":[M[2]||(M[2]=L=>s.value=L),g],"onUpdate:search":m,"onUpdate:focused":u.unref(y),onKeyup:u.withKeys(u.unref(T),["enter"]),loading:l.value,"no-filter":d.value,"error-messages":t.errorMessages,"return-object":"",variant:"underlined",density:"compact",autocomplete:"off",style:u.normalizeStyle((A=t.autoComplete)==null?void 0:A.style),class:u.normalizeClass((P=t.autoComplete)==null?void 0:P.class)},{item:u.withCtx(({props:L,item:R})=>[u.createVNode(ir,u.mergeProps(L,{"prepend-avatar":R.raw[t.itemImage],title:R.raw[t.itemText]}),null,16,["prepend-avatar","title"])]),_:1},8,["item-value","item-title","items","label","modelValue","onUpdate:focused","onKeyup","loading","no-filter","error-messages","style","class"])):u.createCommentVNode("",!0),t.hideDetails?u.createCommentVNode("",!0):(u.openBlock(),u.createElementBlock("div",R7,[!f.value&&t.errorMessages.length?(u.openBlock(),u.createElementBlock("div",B7,[M[3]||(M[3]=u.createElementVNode("div",{style:{height:"5px","border-top":"1px solid rgb(var(--v-theme-error))"}},null,-1)),(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(t.errorMessages,(L,R)=>(u.openBlock(),u.createElementBlock("div",j7,u.toDisplayString(L),1))),256))])):u.createCommentVNode("",!0)]))],2)}}}),H7=Re({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),bO=Symbol.for("vuetify:data-table-pagination");function z7(t){const e=Lt(t,"page",void 0,r=>Number(r??1)),n=Lt(t,"itemsPerPage",void 0,r=>Number(r??10));return{page:e,itemsPerPage:n}}function $7(t){const{page:e,itemsPerPage:n,itemsLength:r}=t,i=u.computed(()=>n.value===-1?0:n.value*(e.value-1)),o=u.computed(()=>n.value===-1?r.value:Math.min(r.value,i.value+n.value)),a=u.computed(()=>n.value===-1||r.value===0?1:Math.ceil(r.value/n.value));u.watch([e,a],()=>{e.value>a.value&&(e.value=a.value)});function s(b){n.value=b,e.value=1}function c(){e.value=Rr(e.value+1,1,a.value)}function l(){e.value=Rr(e.value-1,1,a.value)}function d(b){e.value=Rr(b,1,a.value)}const f={page:e,itemsPerPage:n,startIndex:i,stopIndex:o,pageCount:a,itemsLength:r,nextPage:c,prevPage:l,setPage:d,setItemsPerPage:s};return u.provide(bO,f),f}function U7(){const t=u.inject(bO);if(!t)throw new Error("Missing pagination!");return t}function W7(t){const e=rr("usePaginatedItems"),{items:n,startIndex:r,stopIndex:i,itemsPerPage:o}=t,a=u.computed(()=>o.value<=0?n.value:n.value.slice(r.value,i.value));return u.watch(a,s=>{e.emit("update:currentItems",s)},{immediate:!0}),{paginatedItems:a}}const wO=Re({prevIcon:{type:jt,default:"$prev"},nextIcon:{type:jt,default:"$next"},firstIcon:{type:jt,default:"$first"},lastIcon:{type:jt,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),xO=et()({name:"VDataTableFooter",props:wO(),setup(t,e){let{slots:n}=e;const{t:r}=ci(),{page:i,pageCount:o,startIndex:a,stopIndex:s,itemsLength:c,itemsPerPage:l,setItemsPerPage:d}=U7(),f=u.computed(()=>t.itemsPerPageOptions.map(b=>typeof b=="number"?{value:b,title:b===-1?r("$vuetify.dataFooter.itemsPerPageAll"):String(b)}:{...b,title:isNaN(Number(b.title))?r(b.title):b.title}));return st(()=>{var x;const b=Z0.filterProps(t);return u.createElementVNode("div",{class:"v-data-table-footer"},[(x=n.prepend)==null?void 0:x.call(n),u.createElementVNode("div",{class:"v-data-table-footer__items-per-page"},[u.createElementVNode("span",{"aria-label":r(t.itemsPerPageText)},[r(t.itemsPerPageText)]),u.createVNode(Xs,{items:f.value,modelValue:l.value,"onUpdate:modelValue":k=>d(Number(k)),density:"compact",variant:"outlined",hideDetails:!0},null)]),u.createElementVNode("div",{class:"v-data-table-footer__info"},[u.createElementVNode("div",null,[r(t.pageText,c.value?a.value+1:0,s.value,c.value)])]),u.createElementVNode("div",{class:"v-data-table-footer__pagination"},[u.createVNode(Z0,u.mergeProps({modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,density:"comfortable",firstAriaLabel:t.firstPageLabel,lastAriaLabel:t.lastPageLabel,length:o.value,nextAriaLabel:t.nextPageLabel,previousAriaLabel:t.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:t.showCurrentPage?1:0,variant:"plain"},b),null)])])}),{}}}),Zp=U8({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(t,e)=>{let{slots:n}=e;const r=t.tag??"td",i=typeof t.fixed=="string"?t.fixed:t.fixed?"start":"none";return u.createVNode(r,{class:u.normalizeClass(["v-data-table__td",{"v-data-table-column--fixed":i==="start","v-data-table-column--fixed-end":i==="end","v-data-table-column--last-fixed":t.lastFixed,"v-data-table-column--first-fixed-end":t.firstFixedEnd,"v-data-table-column--no-padding":t.noPadding,"v-data-table-column--nowrap":t.nowrap},`v-data-table-column--align-${t.align}`]),style:{height:gt(t.height),width:gt(t.width),maxWidth:gt(t.maxWidth),left:i==="start"?gt(t.fixedOffset||null):void 0,right:i==="end"?gt(t.fixedEndOffset||null):void 0}},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}})}),Y7=Re({headers:Array},"DataTable-header"),CO=Symbol.for("vuetify:data-table-headers"),SO={title:"",sortable:!1},G7={...SO,width:48};function X7(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,r)=>{let i=!1;for(let o=0;o<e.length;o++)if(e[o].priority>r){e.splice(o,0,{element:n,priority:r}),i=!0;break}i||e.push({element:n,priority:r})},size:()=>e.length,count:()=>{let n=0;if(!e.length)return 0;const r=Math.floor(e[0].priority);for(let i=0;i<e.length;i++)Math.floor(e[i].priority)===r&&(n+=1);return n},dequeue:()=>e.shift()}}function q0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t.children)e.push(t);else for(const n of t.children)q0(n,e);return e}function kO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of t)n.key&&e.add(n.key),n.children&&kO(n.children,e);return e}function K7(t){if(t.key){if(t.key==="data-table-group")return SO;if(["data-table-expand","data-table-select"].includes(t.key))return G7}}function e1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.children?Math.max(e,...t.children.map(n=>e1(n,e+1))):e}function Z7(t){let e=!1;function n(s,c){var f;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(!s)return;l!=="none"&&(s.fixed=l),s.fixed===!0&&(s.fixed="start");const d=c==="start"?(f=s.children)==null?void 0:f.toReversed():s.children;if(s.fixed===c)if(d)for(const b of d)n(b,c,c);else!e&&c==="start"?s.lastFixed=!0:!e&&c==="end"?s.firstFixedEnd=!0:isNaN(Number(s.width))?$b(`Multiple fixed columns should have a static width (key: ${s.key})`):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0),e=!0;else if(d)for(const b of d)n(b,c);else e=!1}for(const s of t.toReversed())n(s,"start");for(const s of t)n(s,"end");function r(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!s)return c;if(s.children){s.fixedOffset=c;for(const l of s.children)c=r(l,c)}else s.fixed&&s.fixed!=="end"&&(s.fixedOffset=c,c+=parseFloat(s.width||"0")||0);return c}let i=0;for(const s of t)i=r(s,i);function o(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!s)return c;if(s.children){s.fixedEndOffset=c;for(const l of s.children)c=o(l,c)}else s.fixed==="end"&&(s.fixedEndOffset=c,c+=parseFloat(s.width||"0")||0);return c}let a=0;for(const s of t.toReversed())a=o(s,a)}function J7(t,e){const n=[];let r=0;const i=X7(t);for(;i.size()>0;){let a=i.count();const s=[];let c=1;for(;a>0;){const{element:l,priority:d}=i.dequeue(),f=e-r-e1(l);if(s.push({...l,rowspan:f??1,colspan:l.children?q0(l).length:1}),l.children)for(const b of l.children){const x=d%1+c/Math.pow(10,r+2);i.enqueue(b,r+f+x)}c+=1,a-=1}r+=1,n.push(s)}return{columns:t.map(a=>q0(a)).flat(),headers:n}}function EO(t){const e=[];for(const n of t){const r={...K7(n),...n},i=r.key??(typeof r.value=="string"?r.value:null),o=r.value??i??null,a={...r,key:i,value:o,sortable:r.sortable??(r.key!=null||!!r.sort),children:r.children?EO(r.children):void 0};e.push(a)}return e}function TO(t,e){const n=u.ref([]),r=u.ref([]),i=u.ref({}),o=u.ref({}),a=u.ref({});u.watchEffect(()=>{var E,m,h;const l=(t.headers||Object.keys(t.items[0]??{}).map(g=>({key:g,title:u.capitalize(g)}))).slice(),d=kO(l);(E=e==null?void 0:e.groupBy)!=null&&E.value.length&&!d.has("data-table-group")&&l.unshift({key:"data-table-group",title:"Group"}),(m=e==null?void 0:e.showSelect)!=null&&m.value&&!d.has("data-table-select")&&l.unshift({key:"data-table-select"}),(h=e==null?void 0:e.showExpand)!=null&&h.value&&!d.has("data-table-expand")&&l.push({key:"data-table-expand"});const f=EO(l);Z7(f);const b=Math.max(...f.map(g=>e1(g)))+1,x=J7(f,b);n.value=x.headers,r.value=x.columns;const k=x.headers.flat(1);for(const g of k)g.key&&(g.sortable&&(g.sort&&(i.value[g.key]=g.sort),g.sortRaw&&(o.value[g.key]=g.sortRaw)),g.filter&&(a.value[g.key]=g.filter))});const s={headers:n,columns:r,sortFunctions:i,sortRawFunctions:o,filterFunctions:a};return u.provide(CO,s),s}function Jp(){const t=u.inject(CO);if(!t)throw new Error("Missing headers!");return t}const Q7={showSelectAll:!1,allSelected:()=>[],select:t=>{var r;let{items:e,value:n}=t;return new Set(n?[(r=e[0])==null?void 0:r.value]:[])},selectAll:t=>{let{selected:e}=t;return e}},MO={showSelectAll:!0,allSelected:t=>{let{currentPage:e}=t;return e},select:t=>{let{items:e,value:n,selected:r}=t;for(const i of e)n?r.add(i.value):r.delete(i.value);return r},selectAll:t=>{let{value:e,currentPage:n,selected:r}=t;return MO.select({items:n,value:e,selected:r})}},IO={showSelectAll:!0,allSelected:t=>{let{allItems:e}=t;return e},select:t=>{let{items:e,value:n,selected:r}=t;for(const i of e)n?r.add(i.value):r.delete(i.value);return r},selectAll:t=>{let{value:e,allItems:n,selected:r}=t;return IO.select({items:n,value:e,selected:r})}},V7=Re({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ri}},"DataTable-select"),OO=Symbol.for("vuetify:data-table-selection");function AO(t,e){let{allItems:n,currentPage:r}=e;const i=Lt(t,"modelValue",t.modelValue,g=>new Set(Zn(g).map(w=>{var p;return((p=n.value.find(v=>t.valueComparator(w,v.value)))==null?void 0:p.value)??w})),g=>[...g.values()]),o=u.computed(()=>n.value.filter(g=>g.selectable)),a=u.computed(()=>r.value.filter(g=>g.selectable)),s=u.computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single":return Q7;case"all":return IO;case"page":default:return MO}}),c=u.shallowRef(null);function l(g){return Zn(g).every(w=>i.value.has(w.value))}function d(g){return Zn(g).some(w=>i.value.has(w.value))}function f(g,w){const p=s.value.select({items:g,value:w,selected:new Set(i.value)});i.value=p}function b(g,w,p){const v=[];if(w=w??r.value.findIndex(y=>y.value===g.value),t.selectStrategy!=="single"&&(p!=null&&p.shiftKey)&&c.value!==null){const[y,S]=[c.value,w].sort((T,C)=>T-C);v.push(...r.value.slice(y,S+1).filter(T=>T.selectable))}else v.push(g),c.value=w;f(v,!l([g]))}function x(g){const w=s.value.selectAll({value:g,allItems:o.value,currentPage:a.value,selected:new Set(i.value)});i.value=w}const k=u.computed(()=>i.value.size>0),E=u.computed(()=>{const g=s.value.allSelected({allItems:o.value,currentPage:a.value});return!!g.length&&l(g)}),m=u.toRef(()=>s.value.showSelectAll),h={toggleSelect:b,select:f,selectAll:x,isSelected:l,isSomeSelected:d,someSelected:k,allSelected:E,showSelectAll:m,lastSelectedIndex:c,selectStrategy:s};return u.provide(OO,h),h}function Qp(){const t=u.inject(OO);if(!t)throw new Error("Missing selection!");return t}const q7=Re({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),_O=Symbol.for("vuetify:data-table-sort");function DO(t){const e=Lt(t,"sortBy"),n=u.toRef(()=>t.mustSort),r=u.toRef(()=>t.multiSort);return{sortBy:e,mustSort:n,multiSort:r}}function NO(t){const{sortBy:e,mustSort:n,multiSort:r,page:i}=t,o=c=>{if(c.key==null)return;let l=e.value.map(f=>({...f}))??[];const d=l.find(f=>f.key===c.key);d?d.order==="desc"?n.value&&l.length===1?d.order="asc":l=l.filter(f=>f.key!==c.key):d.order="desc":r.value?l.push({key:c.key,order:"asc"}):l=[{key:c.key,order:"asc"}],e.value=l,i&&(i.value=1)};function a(c){return!!e.value.find(l=>l.key===c.key)}const s={sortBy:e,toggleSort:o,isSorted:a};return u.provide(_O,s),s}function PO(){const t=u.inject(_O);if(!t)throw new Error("Missing sort!");return t}function LO(t,e,n,r){const i=ci();return{sortedItems:u.computed(()=>{var a,s;return n.value.length?eW(e.value,n.value,i.current.value,{transform:r==null?void 0:r.transform,sortFunctions:{...t.customKeySort,...(a=r==null?void 0:r.sortFunctions)==null?void 0:a.value},sortRawFunctions:(s=r==null?void 0:r.sortRawFunctions)==null?void 0:s.value}):e.value})}}function eW(t,e,n,r){const i=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return t.map(a=>[a,r!=null&&r.transform?r.transform(a):a]).sort((a,s)=>{var c,l;for(let d=0;d<e.length;d++){let f=!1;const b=e[d].key,x=e[d].order??"asc";if(x===!1)continue;let k=xd(a[1],b),E=xd(s[1],b),m=a[0].raw,h=s[0].raw;if(x==="desc"&&([k,E]=[E,k],[m,h]=[h,m]),(c=r==null?void 0:r.sortRawFunctions)!=null&&c[b]){const g=r.sortRawFunctions[b](m,h);if(g==null)continue;if(f=!0,g)return g}if((l=r==null?void 0:r.sortFunctions)!=null&&l[b]){const g=r.sortFunctions[b](k,E);if(g==null)continue;if(f=!0,g)return g}if(!f&&(k instanceof Date&&E instanceof Date&&(k=k.getTime(),E=E.getTime()),[k,E]=[k,E].map(g=>g!=null?g.toString().toLocaleLowerCase():g),k!==E))return tp(k)&&tp(E)?0:tp(k)?-1:tp(E)?1:!isNaN(k)&&!isNaN(E)?Number(k)-Number(E):i.compare(k,E)}return 0}).map(a=>{let[s]=a;return s})}const RO=Re({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:jt,default:"$sortAsc"},sortDescIcon:{type:jt,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...jd(),...dp()},"VDataTableHeaders"),Vp=et()({name:"VDataTableHeaders",props:RO(),setup(t,e){let{slots:n}=e;const{t:r}=ci(),{toggleSort:i,sortBy:o,isSorted:a}=PO(),{someSelected:s,allSelected:c,selectAll:l,showSelectAll:d}=Qp(),{columns:f,headers:b}=Jp(),{loaderClasses:x}=fp(t);function k(C,M){if(!(t.sticky||t.fixedHeader)&&!C.fixed)return;const A=typeof C.fixed=="string"?C.fixed:C.fixed?"start":"none";return{position:"sticky",left:A==="start"?gt(C.fixedOffset):void 0,right:A==="end"?gt(C.fixedEndOffset):void 0,top:t.sticky||t.fixedHeader?`calc(var(--v-table-header-height) * ${M})`:void 0}}function E(C,M){C.key==="Enter"&&!t.disableSort&&i(M)}function m(C){const M=o.value.find(A=>A.key===C.key);return M?M.order==="asc"?t.sortAscIcon:t.sortDescIcon:t.sortAscIcon}const{backgroundColorClasses:h,backgroundColorStyles:g}=li(()=>t.color),{displayClasses:w,mobile:p}=Us(t),v=u.computed(()=>({headers:b.value,columns:f.value,toggleSort:i,isSorted:a,sortBy:o.value,someSelected:s.value,allSelected:c.value,selectAll:l,getSortIcon:m})),y=u.computed(()=>["v-data-table__th",{"v-data-table__th--sticky":t.sticky||t.fixedHeader},w.value,x.value]),S=C=>{let{column:M,x:A,y:P}=C;const L=M.key==="data-table-select"||M.key==="data-table-expand",R=u.mergeProps(t.headerProps??{},M.headerProps??{});return u.createVNode(Zp,u.mergeProps({tag:"th",align:M.align,class:[{"v-data-table__th--sortable":M.sortable&&!t.disableSort,"v-data-table__th--sorted":a(M),"v-data-table__th--fixed":M.fixed},...y.value],style:{width:gt(M.width),minWidth:gt(M.minWidth),maxWidth:gt(M.maxWidth),...k(M,P)},colspan:M.colspan,rowspan:M.rowspan,fixed:M.fixed,nowrap:M.nowrap,lastFixed:M.lastFixed,firstFixedEnd:M.firstFixedEnd,noPadding:L,tabindex:M.sortable?0:void 0,onClick:M.sortable?()=>i(M):void 0,onKeydown:M.sortable?j=>E(j,M):void 0},R),{default:()=>{var $;const j=`header.${M.key}`,z={column:M,selectAll:l,isSorted:a,toggleSort:i,sortBy:o.value,someSelected:s.value,allSelected:c.value,getSortIcon:m};return n[j]?n[j](z):M.key==="data-table-select"?(($=n["header.data-table-select"])==null?void 0:$.call(n,z))??(d.value&&u.createVNode(Ys,{modelValue:c.value,indeterminate:s.value&&!c.value,"onUpdate:modelValue":l},null)):u.createElementVNode("div",{class:"v-data-table-header__content"},[u.createElementVNode("span",null,[M.title]),M.sortable&&!t.disableSort&&u.createVNode(_t,{key:"icon",class:"v-data-table-header__sort-icon",icon:m(M)},null),t.multiSort&&a(M)&&u.createElementVNode("div",{key:"badge",class:u.normalizeClass(["v-data-table-header__sort-badge",...h.value]),style:u.normalizeStyle(g.value)},[o.value.findIndex(Y=>Y.key===M.key)+1])])}})},T=()=>{const C=u.computed(()=>f.value.filter(A=>(A==null?void 0:A.sortable)&&!t.disableSort)),M=u.computed(()=>{if(f.value.find(P=>P.key==="data-table-select")!=null)return c.value?"$checkboxOn":s.value?"$checkboxIndeterminate":"$checkboxOff"});return u.createVNode(Zp,u.mergeProps({tag:"th",class:[...y.value],colspan:b.value.length+1},t.headerProps),{default:()=>[u.createElementVNode("div",{class:"v-data-table-header__content"},[u.createVNode(Xs,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:C.value,label:r("$vuetify.dataTable.sortBy"),multiple:t.multiSort,variant:"underlined","onClick:clear":()=>o.value=[],appendIcon:M.value,"onClick:append":()=>l(!c.value)},{...n,chip:A=>{var P;return u.createVNode(Gs,{onClick:(P=A.item.raw)!=null&&P.sortable?()=>i(A.item.raw):void 0,onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},{default:()=>[A.item.title,u.createVNode(_t,{class:u.normalizeClass(["v-data-table__td-sort-icon",a(A.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:m(A.item.raw),size:"small"},null)]})}})])]})};st(()=>p.value?u.createElementVNode("tr",null,[u.createVNode(T,null,null)]):u.createElementVNode(u.Fragment,null,[n.headers?n.headers(v.value):b.value.map((C,M)=>u.createElementVNode("tr",null,[C.map((A,P)=>u.createVNode(S,{column:A,x:P,y:M},null))])),t.loading&&u.createElementVNode("tr",{class:"v-data-table-progress"},[u.createElementVNode("th",{colspan:f.value.length},[u.createVNode(Vb,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0},{default:n.loader})])])]))}}),BO=Re({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),jO=Symbol.for("vuetify:data-table-group");function FO(t){return{groupBy:Lt(t,"groupBy")}}function HO(t){const{disableSort:e,groupBy:n,sortBy:r}=t,i=u.ref(new Set),o=u.computed(()=>n.value.map(d=>({...d,order:d.order??!1})).concat(e!=null&&e.value?[]:r.value));function a(d){return i.value.has(d.id)}function s(d){const f=new Set(i.value);a(d)?f.delete(d.id):f.add(d.id),i.value=f}function c(d){function f(b){const x=[];for(const k of b.items)"type"in k&&k.type==="group"?x.push(...f(k)):x.push(k);return[...new Set(x)]}return f({items:d})}const l={sortByWithGroups:o,toggleGroup:s,opened:i,groupBy:n,extractRows:c,isGroupOpen:a};return u.provide(jO,l),l}function zO(){const t=u.inject(jO);if(!t)throw new Error("Missing group!");return t}function tW(t,e){if(!t.length)return[];const n=new Map;for(const r of t){const i=xd(r.raw,e);n.has(i)||n.set(i,[]),n.get(i).push(r)}return n}function $O(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!e.length)return[];const i=tW(t,e[0]),o=[],a=e.slice(1);return i.forEach((s,c)=>{const l=e[0],d=`${r}_${l}_${c}`;o.push({depth:n,id:d,key:l,value:c,items:a.length?$O(s,a,n+1,d):s,type:"group"})}),o}function UO(t,e){const n=[];for(const r of t)"type"in r&&r.type==="group"?(r.value!=null&&n.push(r),(e.has(r.id)||r.value==null)&&n.push(...UO(r.items,e))):n.push(r);return n}function WO(t,e,n){return{flatItems:u.computed(()=>{if(!e.value.length)return t.value;const i=$O(t.value,e.value.map(o=>o.key));return UO(i,n.value)})}}const nW=Re({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),rW=et()({name:"VDataTableGroupHeaderRow",props:nW(),setup(t,e){let{slots:n}=e;const{isGroupOpen:r,toggleGroup:i,extractRows:o}=zO(),{isSelected:a,isSomeSelected:s,select:c}=Qp(),{columns:l}=Jp(),d=u.computed(()=>o([t.item]));return()=>u.createElementVNode("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":t.item.depth}},[l.value.map(f=>{var b,x;if(f.key==="data-table-group"){const k=r(t.item)?"$expand":"$next",E=()=>i(t.item);return((b=n["data-table-group"])==null?void 0:b.call(n,{item:t.item,count:d.value.length,props:{icon:k,onClick:E}}))??u.createVNode(Zp,{class:"v-data-table-group-header-row__column"},{default:()=>[u.createVNode(dt,{size:"small",variant:"text",icon:k,onClick:E},null),u.createElementVNode("span",null,[t.item.value]),u.createElementVNode("span",null,[u.createTextVNode("("),d.value.length,u.createTextVNode(")")])]})}if(f.key==="data-table-select"){const k=a(d.value),E=s(d.value)&&!k,m=h=>c(d.value,h);return((x=n["data-table-select"])==null?void 0:x.call(n,{props:{modelValue:k,indeterminate:E,"onUpdate:modelValue":m}}))??u.createElementVNode("td",null,[u.createVNode(Ys,{modelValue:k,indeterminate:E,"onUpdate:modelValue":m},null)])}return u.createElementVNode("td",null,null)})])}}),iW=Re({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),YO=Symbol.for("vuetify:datatable:expanded");function GO(t){const e=u.toRef(()=>t.expandOnClick),n=Lt(t,"expanded",t.expanded,s=>new Set(s),s=>[...s.values()]);function r(s,c){const l=new Set(n.value);c?l.add(s.value):l.delete(s.value),n.value=l}function i(s){return n.value.has(s.value)}function o(s){r(s,!i(s))}const a={expand:r,expanded:n,expandOnClick:e,isExpanded:i,toggleExpand:o};return u.provide(YO,a),a}function XO(){const t=u.inject(YO);if(!t)throw new Error("foo");return t}const oW=Re({index:Number,item:Object,cellProps:[Object,Function],onClick:Br(),onContextmenu:Br(),onDblclick:Br(),...jd()},"VDataTableRow"),KO=et()({name:"VDataTableRow",props:oW(),setup(t,e){let{slots:n}=e;const{displayClasses:r,mobile:i}=Us(t,"v-data-table__tr"),{isSelected:o,toggleSelect:a,someSelected:s,allSelected:c,selectAll:l}=Qp(),{isExpanded:d,toggleExpand:f}=XO(),{toggleSort:b,sortBy:x,isSorted:k}=PO(),{columns:E}=Jp();st(()=>u.createElementVNode("tr",{class:u.normalizeClass(["v-data-table__tr",{"v-data-table__tr--clickable":!!(t.onClick||t.onContextmenu||t.onDblclick)},r.value]),onClick:t.onClick,onContextmenu:t.onContextmenu,onDblclick:t.onDblclick},[t.item&&E.value.map((m,h)=>{const g=t.item,w=`item.${m.key}`,p=`header.${m.key}`,v={index:t.index,item:g.raw,internalItem:g,value:xd(g.columns,m.key),column:m,isSelected:o,toggleSelect:a,isExpanded:d,toggleExpand:f},y={column:m,selectAll:l,isSorted:k,toggleSort:b,sortBy:x.value,someSelected:s.value,allSelected:c.value,getSortIcon:()=>""},S=typeof t.cellProps=="function"?t.cellProps({index:v.index,item:v.item,internalItem:v.internalItem,value:v.value,column:m}):t.cellProps,T=typeof m.cellProps=="function"?m.cellProps({index:v.index,item:v.item,internalItem:v.internalItem,value:v.value}):m.cellProps;return u.createVNode(Zp,u.mergeProps({align:m.align,class:{"v-data-table__td--expanded-row":m.key==="data-table-expand","v-data-table__td--select-row":m.key==="data-table-select"},fixed:m.fixed,fixedOffset:m.fixedOffset,fixedEndOffset:m.fixedEndOffset,lastFixed:m.lastFixed,firstFixedEnd:m.firstFixedEnd,maxWidth:i.value?void 0:m.maxWidth,noPadding:m.key==="data-table-select"||m.key==="data-table-expand",nowrap:m.nowrap,width:i.value?void 0:m.width},S,T),{default:()=>{var M,A,P,L;if(m.key==="data-table-select")return((M=n["item.data-table-select"])==null?void 0:M.call(n,{...v,props:{disabled:!g.selectable,modelValue:o([g]),onClick:u.withModifiers(()=>a(g),["stop"])}}))??u.createVNode(Ys,{disabled:!g.selectable,modelValue:o([g]),onClick:u.withModifiers(R=>a(g,t.index,R),["stop"])},null);if(m.key==="data-table-expand")return((A=n["item.data-table-expand"])==null?void 0:A.call(n,{...v,props:{icon:d(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:u.withModifiers(()=>f(g),["stop"])}}))??u.createVNode(dt,{icon:d(g)?"$collapse":"$expand",size:"small",variant:"text",onClick:u.withModifiers(()=>f(g),["stop"])},null);if(n[w]&&!i.value)return n[w](v);const C=u.toDisplayString(v.value);return i.value?u.createElementVNode(u.Fragment,null,[u.createElementVNode("div",{class:"v-data-table__td-title"},[((P=n[p])==null?void 0:P.call(n,y))??m.title]),u.createElementVNode("div",{class:"v-data-table__td-value"},[((L=n[w])==null?void 0:L.call(n,v))??C])]):C}})})]))}}),ZO=Re({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...jd()},"VDataTableRows"),qp=et()({name:"VDataTableRows",inheritAttrs:!1,props:ZO(),setup(t,e){let{attrs:n,slots:r}=e;const{columns:i}=Jp(),{expandOnClick:o,toggleExpand:a,isExpanded:s}=XO(),{isSelected:c,toggleSelect:l}=Qp(),{toggleGroup:d,isGroupOpen:f}=zO(),{t:b}=ci(),{mobile:x}=Us(t);return st(()=>{var k,E;return t.loading&&(!t.items.length||r.loading)?u.createElementVNode("tr",{class:"v-data-table-rows-loading",key:"loading"},[u.createElementVNode("td",{colspan:i.value.length},[((k=r.loading)==null?void 0:k.call(r))??b(t.loadingText)])]):!t.loading&&!t.items.length&&!t.hideNoData?u.createElementVNode("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[u.createElementVNode("td",{colspan:i.value.length},[((E=r["no-data"])==null?void 0:E.call(r))??b(t.noDataText)])]):u.createElementVNode(u.Fragment,null,[t.items.map((m,h)=>{var p;if(m.type==="group"){const v={index:h,item:m,columns:i.value,isExpanded:s,toggleExpand:a,isSelected:c,toggleSelect:l,toggleGroup:d,isGroupOpen:f};return r["group-header"]?r["group-header"](v):u.createVNode(rW,u.mergeProps({key:`group-header_${m.id}`,item:m},$T(n,":group-header",()=>v)),r)}const g={index:h,item:m.raw,internalItem:m,columns:i.value,isExpanded:s,toggleExpand:a,isSelected:c,toggleSelect:l},w={...g,props:u.mergeProps({key:`item_${m.key??m.index}`,onClick:o.value?()=>{a(m)}:void 0,index:h,item:m,cellProps:t.cellProps,mobile:x.value},$T(n,":row",()=>g),typeof t.rowProps=="function"?t.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):t.rowProps)};return u.createElementVNode(u.Fragment,{key:w.props.key},[r.item?r.item(w):u.createVNode(KO,w.props,r),s(m)&&((p=r["expanded-row"])==null?void 0:p.call(r,g))])})])}),{}}}),JO=Re({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:t=>["even","odd"].includes(t)},...Ot(),...ai(),...ln(),...wn()},"VTable"),em=et()({name:"VTable",props:JO(),setup(t,e){let{slots:n,emit:r}=e;const{themeClasses:i}=Jn(t),{densityClasses:o}=bo(t);return st(()=>u.createVNode(t.tag,{class:u.normalizeClass(["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":t.hover,"v-table--striped-even":t.striped==="even","v-table--striped-odd":t.striped==="odd"},i.value,o.value,t.class]),style:u.normalizeStyle(t.style)},{default:()=>{var a,s,c;return[(a=n.top)==null?void 0:a.call(n),n.default?u.createElementVNode("div",{class:"v-table__wrapper",style:{height:gt(t.height)}},[u.createElementVNode("table",null,[n.default()])]):(s=n.wrapper)==null?void 0:s.call(n),(c=n.bottom)==null?void 0:c.call(n)]}})),{}}}),aW=Re({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function sW(t,e,n,r){const i=t.returnObject?e:Lr(e,t.itemValue),o=Lr(e,t.itemSelectable,!0),a=r.reduce((s,c)=>(c.key!=null&&(s[c.key]=Lr(e,c.value)),s),{});return{type:"item",key:t.returnObject?Lr(e,t.itemValue):i,index:n,value:i,selectable:o,columns:a,raw:e}}function lW(t,e,n){return e.map((r,i)=>sW(t,r,i,n))}function QO(t,e){return{items:u.computed(()=>lW(t,t.items,e.value))}}function VO(t){let{page:e,itemsPerPage:n,sortBy:r,groupBy:i,search:o}=t;const a=rr("VDataTable"),s=()=>({page:e.value,itemsPerPage:n.value,sortBy:r.value,groupBy:i.value,search:o.value});let c=null;u.watch(s,l=>{Ri(c,l)||(c&&c.search!==l.search&&(e.value=1),a.emit("update:options",l),c=l)},{deep:!0,immediate:!0})}const qO=Re({...ZO(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...iW(),...BO(),...Y7(),...aW(),...V7(),...q7(),...RO(),...JO()},"DataTable"),cW=Re({...H7(),...qO(),...T0(),...wO()},"VDataTable");et()({name:"VDataTable",props:cW(),emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0,"update:currentItems":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{groupBy:i}=FO(t),{sortBy:o,multiSort:a,mustSort:s}=DO(t),{page:c,itemsPerPage:l}=z7(t),{disableSort:d}=u.toRefs(t),{columns:f,headers:b,sortFunctions:x,sortRawFunctions:k,filterFunctions:E}=TO(t,{groupBy:i,showSelect:u.toRef(()=>t.showSelect),showExpand:u.toRef(()=>t.showExpand)}),{items:m}=QO(t,f),h=u.toRef(()=>t.search),{filteredItems:g}=M0(t,m,h,{transform:ce=>ce.columns,customKeyFilter:E}),{toggleSort:w}=NO({sortBy:o,multiSort:a,mustSort:s,page:c}),{sortByWithGroups:p,opened:v,extractRows:y,isGroupOpen:S,toggleGroup:T}=HO({groupBy:i,sortBy:o,disableSort:d}),{sortedItems:C}=LO(t,g,p,{transform:ce=>({...ce.raw,...ce.columns}),sortFunctions:x,sortRawFunctions:k}),{flatItems:M}=WO(C,i,v),A=u.computed(()=>M.value.length),{startIndex:P,stopIndex:L,pageCount:R,setItemsPerPage:j}=$7({page:c,itemsPerPage:l,itemsLength:A}),{paginatedItems:z}=W7({items:M,startIndex:P,stopIndex:L,itemsPerPage:l}),$=u.computed(()=>y(z.value)),{isSelected:Y,select:ae,selectAll:K,toggleSelect:te,someSelected:G,allSelected:ue}=AO(t,{allItems:m,currentPage:$}),{isExpanded:J,toggleExpand:be}=GO(t);VO({page:c,itemsPerPage:l,sortBy:o,groupBy:i,search:h}),Zi({VDataTableRows:{hideNoData:u.toRef(()=>t.hideNoData),noDataText:u.toRef(()=>t.noDataText),loading:u.toRef(()=>t.loading),loadingText:u.toRef(()=>t.loadingText)}});const de=u.computed(()=>({page:c.value,itemsPerPage:l.value,sortBy:o.value,pageCount:R.value,toggleSort:w,setItemsPerPage:j,someSelected:G.value,allSelected:ue.value,isSelected:Y,select:ae,selectAll:K,toggleSelect:te,isExpanded:J,toggleExpand:be,isGroupOpen:S,toggleGroup:T,items:$.value.map(ce=>ce.raw),internalItems:$.value,groupedItems:z.value,columns:f.value,headers:b.value}));return st(()=>{const ce=xO.filterProps(t),V=Vp.filterProps(t),ne=qp.filterProps(t),Q=em.filterProps(t);return u.createVNode(em,u.mergeProps({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},Q,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var Z;return(Z=r.top)==null?void 0:Z.call(r,de.value)},default:()=>{var Z,he,X,re,le,fe;return r.default?r.default(de.value):u.createElementVNode(u.Fragment,null,[(Z=r.colgroup)==null?void 0:Z.call(r,de.value),!t.hideDefaultHeader&&u.createElementVNode("thead",{key:"thead"},[u.createVNode(Vp,V,r)]),(he=r.thead)==null?void 0:he.call(r,de.value),!t.hideDefaultBody&&u.createElementVNode("tbody",null,[(X=r["body.prepend"])==null?void 0:X.call(r,de.value),r.body?r.body(de.value):u.createVNode(qp,u.mergeProps(n,ne,{items:z.value}),r),(re=r["body.append"])==null?void 0:re.call(r,de.value)]),(le=r.tbody)==null?void 0:le.call(r,de.value),(fe=r.tfoot)==null?void 0:fe.call(r,de.value)])},bottom:()=>r.bottom?r.bottom(de.value):!t.hideDefaultFooter&&u.createElementVNode(u.Fragment,null,[u.createVNode(Mn,null,null),u.createVNode(xO,ce,{prepend:r["footer.prepend"]})])})}),{}}});const uW=Re({...Sr(qO(),["hideDefaultFooter"]),...BO(),...zI(),...T0()},"VDataTableVirtual"),dW=et()({name:"VDataTableVirtual",props:uW(),emits:{"update:modelValue":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{groupBy:i}=FO(t),{sortBy:o,multiSort:a,mustSort:s}=DO(t),{disableSort:c}=u.toRefs(t),{columns:l,headers:d,filterFunctions:f,sortFunctions:b,sortRawFunctions:x}=TO(t,{groupBy:i,showSelect:u.toRef(()=>t.showSelect),showExpand:u.toRef(()=>t.showExpand)}),{items:k}=QO(t,l),E=u.toRef(()=>t.search),{filteredItems:m}=M0(t,k,E,{transform:Q=>Q.columns,customKeyFilter:f}),{toggleSort:h}=NO({sortBy:o,multiSort:a,mustSort:s}),{sortByWithGroups:g,opened:w,extractRows:p,isGroupOpen:v,toggleGroup:y}=HO({groupBy:i,sortBy:o,disableSort:c}),{sortedItems:S}=LO(t,m,g,{transform:Q=>({...Q.raw,...Q.columns}),sortFunctions:b,sortRawFunctions:x}),{flatItems:T}=WO(S,i,w),C=u.computed(()=>p(T.value)),{isSelected:M,select:A,selectAll:P,toggleSelect:L,someSelected:R,allSelected:j}=AO(t,{allItems:C,currentPage:C}),{isExpanded:z,toggleExpand:$}=GO(t),{containerRef:Y,markerRef:ae,paddingTop:K,paddingBottom:te,computedItems:G,handleItemResize:ue,handleScroll:J,handleScrollend:be,calculateVisibleItems:de,scrollToIndex:ce}=$I(t,T),V=u.computed(()=>G.value.map(Q=>Q.raw));VO({sortBy:o,page:u.shallowRef(1),itemsPerPage:u.shallowRef(-1),groupBy:i,search:E}),Zi({VDataTableRows:{hideNoData:u.toRef(()=>t.hideNoData),noDataText:u.toRef(()=>t.noDataText),loading:u.toRef(()=>t.loading),loadingText:u.toRef(()=>t.loadingText)}});const ne=u.computed(()=>({sortBy:o.value,toggleSort:h,someSelected:R.value,allSelected:j.value,isSelected:M,select:A,selectAll:P,toggleSelect:L,isExpanded:z,toggleExpand:$,isGroupOpen:v,toggleGroup:y,items:C.value.map(Q=>Q.raw),internalItems:C.value,groupedItems:T.value,columns:l.value,headers:d.value}));return st(()=>{const Q=Vp.filterProps(t),Z=qp.filterProps(t),he=em.filterProps(t);return u.createVNode(em,u.mergeProps({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},he,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var X;return(X=r.top)==null?void 0:X.call(r,ne.value)},wrapper:()=>{var X,re,le,fe,ke,q;return u.createElementVNode("div",{ref:Y,onScrollPassive:J,onScrollend:be,class:"v-table__wrapper",style:{height:gt(t.height)}},[u.createElementVNode("table",null,[(X=r.colgroup)==null?void 0:X.call(r,ne.value),!t.hideDefaultHeader&&u.createElementVNode("thead",{key:"thead"},[u.createVNode(Vp,Q,r)]),(re=r.thead)==null?void 0:re.call(r,ne.value),!t.hideDefaultBody&&u.createElementVNode("tbody",{key:"tbody"},[u.createElementVNode("tr",{ref:ae,style:{height:gt(K.value),border:0}},[u.createElementVNode("td",{colspan:l.value.length,style:{height:0,border:0}},null)]),(le=r["body.prepend"])==null?void 0:le.call(r,ne.value),u.createVNode(qp,u.mergeProps(n,Z,{items:V.value}),{...r,item:ie=>u.createVNode(HI,{key:ie.internalItem.index,renderless:!0,"onUpdate:height":we=>ue(ie.internalItem.index,we)},{default:we=>{var xe;let{itemRef:Me}=we;return((xe=r.item)==null?void 0:xe.call(r,{...ie,itemRef:Me}))??u.createVNode(KO,u.mergeProps(ie.props,{ref:Me,key:ie.internalItem.index,index:ie.internalItem.index}),r)}})}),(fe=r["body.append"])==null?void 0:fe.call(r,ne.value),u.createElementVNode("tr",{style:{height:gt(te.value),border:0}},[u.createElementVNode("td",{colspan:l.value.length,style:{height:0,border:0}},null)])]),(ke=r.tbody)==null?void 0:ke.call(r,ne.value),(q=r.tfoot)==null?void 0:q.call(r,ne.value)])])},bottom:()=>{var X;return(X=r.bottom)==null?void 0:X.call(r,ne.value)}})}),{calculateVisibleItems:de,scrollToIndex:ce}}}),fW=Re({text:String,...Ot(),...ln()},"VToolbarTitle"),as=et()({name:"VToolbarTitle",props:fW(),setup(t,e){let{slots:n}=e;return st(()=>{const r=!!(n.default||n.text||t.text);return u.createVNode(t.tag,{class:u.normalizeClass(["v-toolbar-title",t.class]),style:u.normalizeStyle(t.style)},{default:()=>{var i;return[r&&u.createElementVNode("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(i=n.default)==null?void 0:i.call(n)])]}})}),{}}}),hW=[null,"prominent","default","comfortable","compact"],pW=Re({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>hW.includes(t)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ho(),...Ot(),...zo(),...si(),...ln({tag:"header"}),...wn()},"VToolbar"),Zr=et()({name:"VToolbar",props:pW(),setup(t,e){var x;let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=li(()=>t.color),{borderClasses:o}=Ca(t),{elevationClasses:a}=Sa(t),{roundedClasses:s}=Si(t),{themeClasses:c}=Jn(t),{rtlClasses:l}=Bi(),d=u.shallowRef(t.extended===null?!!((x=n.extension)!=null&&x.call(n)):t.extended),f=u.computed(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),b=u.computed(()=>d.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return Zi({VBtn:{variant:"text"}}),st(()=>{var h;const k=!!(t.title||n.title),E=!!(n.image||t.image),m=(h=n.extension)==null?void 0:h.call(n);return d.value=t.extended===null?!!m:t.extended,u.createVNode(t.tag,{class:u.normalizeClass(["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},r.value,o.value,a.value,s.value,c.value,l.value,t.class]),style:u.normalizeStyle([i.value,t.style])},{default:()=>[E&&u.createElementVNode("div",{key:"image",class:"v-toolbar__image"},[n.image?u.createVNode(en,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):u.createVNode(gp,{key:"image-img",cover:!0,src:t.image},null)]),u.createVNode(en,{defaults:{VTabs:{height:gt(f.value)}}},{default:()=>{var g,w,p;return[u.createElementVNode("div",{class:"v-toolbar__content",style:{height:gt(f.value)}},[n.prepend&&u.createElementVNode("div",{class:"v-toolbar__prepend"},[(g=n.prepend)==null?void 0:g.call(n)]),k&&u.createVNode(as,{key:"title",text:t.title},{text:n.title}),(w=n.default)==null?void 0:w.call(n),n.append&&u.createElementVNode("div",{class:"v-toolbar__append"},[(p=n.append)==null?void 0:p.call(n)])])]}}),u.createVNode(en,{defaults:{VTabs:{height:gt(b.value)}}},{default:()=>[u.createVNode(HM,null,{default:()=>[d.value&&u.createElementVNode("div",{class:"v-toolbar__extension",style:{height:gt(b.value)}},[m])]})]})]})}),{contentHeight:f,extensionHeight:b}}}),mW={class:"d-inline-flex",style:{height:"100%","vertical-align":"middle"}},gW={style:{display:"flex","flex-direction":"row","align-items":"center"}},vW={style:{display:"flex","flex-direction":"row","align-items":"center"}},yW=u.defineComponent({__name:"TreeDataTable",props:{settingsTitle:{type:String,default:"Settings"},settingsColumnsTitle:{type:String,default:"Colums"},settingsOkText:{type:String,default:"OK"},tableProps:{type:Object,default:{}},settingsProps:{type:Object,default:{}},headers:{type:Array,default:null},items:{type:Array,default:null},title:{type:Function,default:t=>t.title},children:{type:Function,default:t=>t.children},expanded:{type:Boolean,default:!1},expandable:{type:Boolean,default:!1}},emits:["postLoad","expand","applySettings"],setup(t,{emit:e}){const n=t,r=u.ref([]),i=new Map,o=S=>i.get(S);function a(S){const T={path:[],expanded:n.expanded,item:S,children:u.reactive((n.children(S)||[]).map(u.reactive)),parent:null};i.set(S,T),T.children.forEach(C=>a(C))}let s=u.reactive([]);const c=u.ref([{}]),l=u.ref([{}]),d=u.ref([{}]),f=S=>{const T=[u.reactive({title:"",key:"$control",sortable:!1,noSelectable:!0,visible:!0})];S.forEach(C=>{C.visible===void 0&&(C.visible=!0),T.push(C)}),T.push(u.reactive({title:"",key:"$columns-control",sortable:!1,width:"0%",noSelectable:!0,visible:!0,headerProps:{class:"noprint"},cellProps:{class:"noprint"}})),c.value=T,l.value=T.filter(C=>C.visible),d.value=T.filter(C=>!C.noSelectable)},b=()=>{l.value=c.value.filter(S=>S.visible)},x=()=>{if(n.items&&(u.isReactive(n.items)?s=n.items:s=u.reactive(n.items.map(u.reactive))),s.forEach(S=>{a(S)}),k(),n.headers){let S=[];Array.isArray(n.headers)?S=n.headers:S=n.headers.value,f(S)}},k=()=>{const S=[],T=(C,M,A)=>{const P=o(M);P.path=A,P.parent=C,P.expanded&&P.children.forEach((L,R)=>{S[S.length]=L,T(M,L,[...A,R])})};s.forEach((C,M)=>{S.push(C),T(null,C,[M])}),r.value=S,y("postLoad",{items:S,controllers:i,toggle:p,count:w,walk:m,update:k,setChildren:h,remove:g})},E=(S,T)=>{for(let C=0;C<S.length;C++){const M=S[C],A=i.get(M),P=T({item:M,control:A});if(P){if(P==1)break;return 2}else if(E(A==null?void 0:A.children,T)==2)return 2}},m=S=>{E(r.value,S)},h=(S,T)=>{const C=o(S);E(C.children,M=>(i.delete(M.item),0)),T.forEach(a),C.children=T,k()},g=S=>{const T=o(S);if(T.parent){const C=o(T.parent);C.children=C.children.filter(M=>M!==S)}else s=s.filter(C=>C!==S);k()},w=S=>{let T=0;const C=S||(A=>!0),M=(A,P)=>{C(A)&&(T++,o(A).children.forEach((L,R)=>{M(L,[...P,R])}))};return s.forEach((A,P)=>{M(A,[P])}),T},p=S=>{const T=o(S);T.expanded=!T.expanded,T.expanded&&y("expand",{c:T,update:k}),k()},v=()=>{b(),y("applySettings")},y=e;return u.onMounted(()=>{u.nextTick(()=>{x()})}),(S,T)=>(u.openBlock(),u.createBlock(dW,u.mergeProps({headers:l.value,items:r.value},t.tableProps),u.createSlots({"item.$control":u.withCtx(({item:C,value:M})=>[u.createElementVNode("div",mW,[o(C).path.length?u.renderSlot(S.$slots,"item.$control.prefix",{key:0,item:C,control:o(C)},()=>[u.createElementVNode("div",{style:u.normalizeStyle(`width:${(o(C).path.length-1)*30}px`)},null,4)]):u.createCommentVNode("",!0),t.expandable||o(C).children.length?u.renderSlot(S.$slots,"item.$control.buttom",{key:1,item:C,control:o(C),tooggle:p},()=>[u.createElementVNode("div",gW,[u.createVNode(dt,{density:"compact",variant:"text",icon:o(C).expanded?"mdi-menu-down":"mdi-menu-right",size:"small",onClick:A=>p(C)},null,8,["icon","onClick"])])]):u.createCommentVNode("",!0),u.createElementVNode("div",vW,[u.renderSlot(S.$slots,"item.$control.title",{item:C,control:o(C)},()=>[u.createTextVNode(u.toDisplayString(n.title(C)),1)])])])]),"header.$columns-control":u.withCtx(({column:C})=>[u.createVNode(eo,u.mergeProps({"max-width":"450",scrollable:""},t.settingsProps),{activator:u.withCtx(({props:M})=>[u.createVNode(dt,u.mergeProps({icon:"mdi-cog",density:"compact",flat:""},M,{class:"noprint"}),null,16)]),default:u.withCtx(({isActive:M})=>[u.createVNode(jn,{density:"compact"},{default:u.withCtx(()=>[u.createVNode(Zr,{density:"compact"},{default:u.withCtx(()=>[u.createVNode(as,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.settingsTitle),1)]),_:1}),u.createVNode(Xr),u.createVNode(dt,{density:"compact",class:"ml-auto",icon:"mdi-close",flat:"",onClick:A=>M.value=!1},null,8,["onClick"])]),_:2},1024),u.createVNode(Mn),u.createVNode(Dr,null,{default:u.withCtx(()=>[u.renderSlot(S.$slots,"prepend-settings"),u.createVNode(ji,{density:"compact","select-strategy":"leaf"},{default:u.withCtx(()=>[u.createVNode(Ip,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.settingsColumnsTitle),1)]),_:1}),(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(d.value,A=>(u.openBlock(),u.createBlock(ir,{density:"compact",key:A.key,title:A.title,value:A.key},{prepend:u.withCtx(()=>[u.createVNode(y$,{start:""},{default:u.withCtx(()=>[u.createVNode(Ys,{modelValue:A.visible,"onUpdate:modelValue":P=>A.visible=P},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title","value"]))),128))]),_:1}),u.renderSlot(S.$slots,"append-settings")]),_:3}),u.createVNode(Mn),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(dt,{class:"ml-auto","prepend-icon":"mdi-check",color:"primary",variant:"flat",onClick:()=>{v(),M.value=!1}},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.settingsOkText),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:3},16)]),_:2},[u.renderList(S.$slots,(C,M,A)=>({name:M,fn:u.withCtx(P=>[u.renderSlot(S.$slots,M,u.normalizeProps(u.guardReactiveProps(P)))])}))]),1040,["headers","items"]))}}),bW={class:"d-inline-flex"},wW=u.defineComponent({__name:"TreeRows",props:{items:{type:Array,default:null},columns:{type:Array,default:[]},titleKey:{type:String,default:"title"},actionsKey:{type:String,default:"actions"},childrenKey:{type:String,default:"children"},expanded:{type:Boolean,default:!1}},setup(t){const e=t,n=u.ref([]);class r{constructor(){We(this,"path");We(this,"expanded");this.path=[],this.expanded=e.expanded}}const i=new Map,o=f=>i.get(f);function a(f){var b;i.set(f,new r),(b=f[e.childrenKey])==null||b.forEach(x=>a(x))}let s=u.reactive([]);const c=()=>{e.items&&(u.isReactive(e.items)?s=e.items:s=e.items.map(f=>u.isReactive(f)?f:u.reactive(f))),console.log(s),s.forEach(f=>{a(f)}),l()},l=()=>{const f=[],b=(x,k)=>{var m;const E=o(x);E.path=k,E.expanded&&((m=x[e.childrenKey])==null||m.forEach((h,g)=>{f[f.length]=h,b(h,[...k,g])}))};s.forEach((x,k)=>{f.push(x),b(x,[k])}),n.value=f},d=f=>{const b=o(f);b.expanded=!b.expanded,l()};return u.onMounted(()=>{u.nextTick(()=>{c()})}),(f,b)=>(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(n.value,x=>u.renderSlot(f.$slots,"row",{item:x},()=>[u.createElementVNode("tr",null,[u.renderSlot(f.$slots,"item-start",{item:x}),u.renderSlot(f.$slots,"item-controller",{item:x},()=>[u.createElementVNode("td",null,[u.createElementVNode("div",bW,[o(x).path.length?u.renderSlot(f.$slots,"depth",{key:0,item:x,control:o(x)},()=>[u.createElementVNode("div",{style:u.normalizeStyle(`width:${o(x).path.length*20}px`)},null,4)]):u.createCommentVNode("",!0),x[t.childrenKey]&&x[t.childrenKey].length?u.renderSlot(f.$slots,"item-controller-buttom",{key:1,item:x,control:o(x),tooggle:d},()=>[u.createVNode(dt,{density:"comfortable",variant:"text",icon:o(x).expanded?"mdi-chevron-up":"mdi-chevron-down",size:"small",onClick:k=>d(x)},null,8,["icon","onClick"])]):u.createCommentVNode("",!0),u.renderSlot(f.$slots,"title",{item:x,control:o(x)},()=>[u.createTextVNode(u.toDisplayString(x[t.titleKey]),1)])])])]),u.renderSlot(f.$slots,"item-container",{item:x,control:o(x)},()=>[u.renderSlot(f.$slots,"pre-columns",{item:x,control:o(x)}),(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(t.columns,k=>u.renderSlot(f.$slots,`column[${k}]`.toLowerCase(),{item:x,control:o(x),column:k},()=>[u.createElementVNode("td",null,[u.renderSlot(f.$slots,`column-content[${k}]`.toLowerCase(),{item:x,control:o(x),column:k},()=>[u.createTextVNode(u.toDisplayString(x[k]),1)])])])),256)),u.renderSlot(f.$slots,"post-columns",{item:x,control:o(x)})]),u.renderSlot(f.$slots,"post-item",{item:x,control:o(x)})])])),256))}});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var xW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t1(){}Object.assign(t1,{default:t1,register:t1,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){const e=(this.document||this.ownerDocument).querySelectorAll(t);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(e!==null);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(t){const e=document.createDocumentFragment();Array.isArray(t)||(t=[t]),t.forEach(n=>{const r=n instanceof Node;e.appendChild(r?n:document.createTextNode(n))}),this.insertBefore(e,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=arguments.length===0?!0:!!t;const e=this.parentNode,n=window.getComputedStyle(e,null),r=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),o=this.offsetTop-e.offsetTop<e.scrollTop,a=this.offsetTop-e.offsetTop+this.clientHeight-r>e.scrollTop+e.clientHeight,s=this.offsetLeft-e.offsetLeft<e.scrollLeft,c=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,l=o&&!a;(o||a)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-r+this.clientHeight/2),(s||c)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(o||a||s||c)&&!t&&this.scrollIntoView(l)}),window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)};let CW=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var eA=(t=>(t.VERBOSE="VERBOSE",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",t))(eA||{});const zt={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46},SW={LEFT:0};function uf(t,e,n="log",r,i="color: inherit"){if(!("console"in window)||!window.console[n])return;const o=["info","log","warn","error"].includes(n),a=[];switch(uf.logLevel){case"ERROR":if(n!=="error")return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!o||t)return;break}r&&a.push(r);const s="Editor.js 2.30.7";t&&(o?(a.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,i),e=`%c${s}%c ${e}`):e=`( ${s} )${e}`);try{o?r?console[n](`${e} %o`,...a):console[n](e,...a):console[n](e)}catch{}}uf.logLevel="VERBOSE";function kW(t){uf.logLevel=t}const pn=uf.bind(window,!1),So=uf.bind(window,!0);function oc(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Vn(t){return oc(t)==="function"||oc(t)==="asyncfunction"}function Jr(t){return oc(t)==="object"}function ss(t){return oc(t)==="string"}function EW(t){return oc(t)==="boolean"}function tA(t){return oc(t)==="number"}function nA(t){return oc(t)==="undefined"}function ko(t){return t?Object.keys(t).length===0&&t.constructor===Object:!0}function rA(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}async function TW(t,e=()=>{},n=()=>{}){async function r(i,o,a){try{await i.function(i.data),await o(nA(i.data)?{}:i.data)}catch{a(nA(i.data)?{}:i.data)}}return t.reduce(async(i,o)=>(await i,r(o,e,n)),Promise.resolve())}function iA(t){return Array.prototype.slice.call(t)}function nm(t,e){return function(){const n=this,r=arguments;window.setTimeout(()=>t.apply(n,r),e)}}function MW(t){return t.name.split(".").pop()}function IW(t){return/^[-\w]+\/([-+\w]+|\*)$/.test(t)}function oA(t,e,n){let r;return(...i)=>{const o=this,a=()=>{r=null,t.apply(o,i)};window.clearTimeout(r),r=window.setTimeout(a,e)}}function n1(t,e,n=void 0){let r,i,o,a=null,s=0;n||(n={});const c=function(){s=n.leading===!1?0:Date.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){const l=Date.now();!s&&n.leading===!1&&(s=l);const d=e-(l-s);return r=this,i=arguments,d<=0||d>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):!a&&n.trailing!==!1&&(a=setTimeout(c,d)),o}}function OW(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e&&(t[e]=!0),t}function rm(t){return t[0].toUpperCase()+t.slice(1)}function r1(t,...e){if(!e.length)return t;const n=e.shift();if(Jr(t)&&Jr(n))for(const r in n)Jr(n[r])?(t[r]||Object.assign(t,{[r]:{}}),r1(t[r],n[r])):Object.assign(t,{[r]:n[r]});return r1(t,...e)}function i1(t){const e=OW();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function AW(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function _W(){return CW(10)}function DW(t){window.open(t,"_blank")}function NW(t=""){return`${t}${Math.floor(Math.random()*1e8).toString(16)}`}function o1(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&So(r,"warn")}function pu(t,e,n){const r=n.value?"value":"get",i=n[r],o=`#${e}Cache`;if(n[r]=function(...a){return this[o]===void 0&&(this[o]=i.apply(this,...a)),this[o]},r==="get"&&n.set){const a=n.set;n.set=function(s){delete t[o],a.apply(this,s)}}return n}const aA=650;function mu(){return window.matchMedia(`(max-width: ${aA}px)`).matches}const a1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function PW(t,e){const n=Array.isArray(t)||Jr(t),r=Array.isArray(e)||Jr(e);return n||r?JSON.stringify(t)===JSON.stringify(e):t===e}let Ue=class Li{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,n=null,r={}){const i=document.createElement(e);if(Array.isArray(n)){const o=n.filter(a=>a!==void 0);i.classList.add(...o)}else n&&i.classList.add(n);for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o]);return i}static text(e){return document.createTextNode(e)}static append(e,n){Array.isArray(n)?n.forEach(r=>e.appendChild(r)):e.appendChild(n)}static prepend(e,n){Array.isArray(n)?(n=n.reverse(),n.forEach(r=>e.prepend(r))):e.prepend(n)}static swap(e,n){const r=document.createElement("div"),i=e.parentNode;i.insertBefore(r,e),i.insertBefore(e,n),i.insertBefore(n,r),i.removeChild(r)}static find(e=document,n){return e.querySelector(n)}static get(e){return document.getElementById(e)}static findAll(e=document,n){return e.querySelectorAll(n)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return iA(e.querySelectorAll(Li.allInputsSelector)).reduce((n,r)=>Li.isNativeInput(r)||Li.containsOnlyInlineElements(r)?[...n,r]:[...n,...Li.getDeepestBlockElements(r)],[])}static getDeepestNode(e,n=!1){const r=n?"lastChild":"firstChild",i=n?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[r]){let o=e[r];if(Li.isSingleTag(o)&&!Li.isNativeInput(o)&&!Li.isLineBreakTag(o))if(o[i])o=o[i];else if(o.parentNode[i])o=o.parentNode[i];else return o.parentNode;return this.getDeepestNode(o,n)}return e}static isElement(e){return tA(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return tA(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const n=["INPUT","TEXTAREA"];return e&&e.tagName?n.includes(e.tagName):!1}static canSetCaret(e){let n=!0;if(Li.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":n=!1;break}else n=Li.isContentEditable(e);return n}static isNodeEmpty(e,n){let r;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?r=e.value:r=e.textContent.replace("",""),n&&(r=r.replace(new RegExp(n,"g"),"")),r.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,n){const r=[e];for(;r.length>0;)if(e=r.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,n))return!1;e.childNodes&&r.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const n=Li.make("div");return n.innerHTML=e,n.childElementCount>0}static getContentLength(e){return Li.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let n;ss(e)?(n=document.createElement("div"),n.innerHTML=e):n=e;const r=i=>!Li.blockElements.includes(i.tagName.toLowerCase())&&Array.from(i.children).every(r);return Array.from(n.children).every(r)}static getDeepestBlockElements(e){return Li.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((n,r)=>[...n,...Li.getDeepestBlockElements(r)],[])}static getHolder(e){return ss(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const n=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,o=n.top+i,a=n.left+r;return{top:o,left:a,bottom:o+n.height,right:a+n.width}}};function LW(t){return!/[^\t\n\r ]/.test(t)}function RW(t){const e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,i=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),a=parseFloat(e.marginTop),s=n*.8,c=(r-n)/2;return a+o+i+c+s}function sA(t){t.dataset.empty=Ue.isEmpty(t)?"true":"false"}const BW={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},jW={Text:"",Link:"",Bold:"",Italic:""},FW={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},HW={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},lA={ui:BW,toolNames:jW,tools:FW,blockTunes:HW},cA=class md{static ui(e,n){return md._t(e,n)}static t(e,n){return md._t(e,n)}static setDictionary(e){md.currentDictionary=e}static _t(e,n){const r=md.getNamespace(e);return!r||!r[n]?n:r[n]}static getNamespace(e){return e.split(".").reduce((n,r)=>!n||!Object.keys(n).length?{}:n[r],md.currentDictionary)}};cA.currentDictionary=lA;let Ti=cA,uA=class extends Error{},df=class{constructor(){this.subscribers={}}on(e,n){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(n)}once(e,n){e in this.subscribers||(this.subscribers[e]=[]);const r=i=>{const o=n(i),a=this.subscribers[e].indexOf(r);return a!==-1&&this.subscribers[e].splice(a,1),o};this.subscribers[e].push(r)}emit(e,n){ko(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((r,i)=>{const o=i(r);return o!==void 0?o:r},n)}off(e,n){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let r=0;r<this.subscribers[e].length;r++)if(this.subscribers[e][r]===n){delete this.subscribers[e][r];break}}destroy(){this.subscribers={}}};function ls(t){Object.setPrototypeOf(this,{get id(){return t.id},get name(){return t.name},get config(){return t.config},get holder(){return t.holder},get isEmpty(){return t.isEmpty},get selected(){return t.selected},set stretched(e){t.stretched=e},get stretched(){return t.stretched},get focusable(){return t.focusable},call(e,n){return t.call(e,n)},save(){return t.save()},validate(e){return t.validate(e)},dispatchChange(){t.dispatchChange()},getActiveToolboxEntry(){return t.getActiveToolboxEntry()}})}let ff=class{constructor(){this.allListeners=[]}on(e,n,r,i=!1){const o=NW("l"),a={id:o,element:e,eventType:n,handler:r,options:i};if(!this.findOne(e,n,r))return this.allListeners.push(a),e.addEventListener(n,r,i),o}off(e,n,r,i){const o=this.findAll(e,n,r);o.forEach((a,s)=>{const c=this.allListeners.indexOf(o[s]);c>-1&&(this.allListeners.splice(c,1),a.element.removeEventListener(a.eventType,a.handler,a.options))})}offById(e){const n=this.findById(e);n&&n.element.removeEventListener(n.eventType,n.handler,n.options)}findOne(e,n,r){const i=this.findAll(e,n,r);return i.length>0?i[0]:null}findAll(e,n,r){let i;const o=e?this.findByEventTarget(e):[];return e&&n&&r?i=o.filter(a=>a.eventType===n&&a.handler===r):e&&n?i=o.filter(a=>a.eventType===n):i=o,i}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(n=>{if(n.element===e)return n})}findByType(e){return this.allListeners.filter(n=>{if(n.eventType===e)return n})}findByHandler(e){return this.allListeners.filter(n=>{if(n.handler===e)return n})}findById(e){return this.allListeners.find(n=>n.id===e)}},Vt=class nH{constructor({config:e,eventsDispatcher:n}){if(this.nodes={},this.listeners=new ff,this.readOnlyMutableListeners={on:(r,i,o,a=!1)=>{this.mutableListenerIds.push(this.listeners.on(r,i,o,a))},clearAll:()=>{for(const r of this.mutableListenerIds)this.listeners.offById(r);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===nH)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=n}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const n=this.nodes[e];n instanceof HTMLElement&&n.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},Pt=class $l{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const n=e.anchorNode;return n?Ue.isElement(n)?n:n.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor($l.get())}static isSelectionAtEditor(e){if(!e)return!1;let n=e.anchorNode||e.focusNode;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${$l.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let n=e.startContainer;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${$l.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!$l.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,n,r={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,n=e.createRange(),r.x=n.boundingLeft,r.y=n.boundingTop,r.width=n.boundingWidth,r.height=n.boundingHeight,r;if(!window.getSelection)return pn("Method window.getSelection is not supported","warn"),r;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return pn("Method SelectionUtils.rangeCount is not supported","warn"),r;if(e.rangeCount===0)return r;if(n=e.getRangeAt(0).cloneRange(),n.getBoundingClientRect&&(r=n.getBoundingClientRect()),r.x===0&&r.y===0){const i=document.createElement("span");if(i.getBoundingClientRect){i.appendChild(document.createTextNode("")),n.insertNode(i),r=i.getBoundingClientRect();const o=i.parentNode;o.removeChild(i),o.normalize()}}return r}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,n=0){const r=document.createRange(),i=window.getSelection();return Ue.isNativeInput(e)?Ue.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=n,e.getBoundingClientRect()):void 0:(r.setStart(e,n),r.setEnd(e,n),i.removeAllRanges(),i.addRange(r),r.getBoundingClientRect())}static isRangeInsideContainer(e){const n=$l.range;return n===null?!1:e.contains(n.startContainer)}static addFakeCursor(){const e=$l.range;if(e===null)return;const n=Ue.make("span","codex-editor__fake-cursor");n.dataset.mutationFree="true",e.collapse(),e.insertNode(n)}static isFakeCursorInsideContainer(e){return Ue.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const n=Ue.find(e,".codex-editor__fake-cursor");n&&n.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=$l.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(e.focusNode),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}findParentTag(e,n,r=10){const i=window.getSelection();let o=null;return!i||!i.anchorNode||!i.focusNode?null:([i.anchorNode,i.focusNode].forEach(a=>{let s=r;for(;s>0&&a.parentNode&&!(a.tagName===e&&(o=a,n&&a.classList&&!a.classList.contains(n)&&(o=null),o));)a=a.parentNode,s--}),o)}expandToTag(e){const n=window.getSelection();n.removeAllRanges();const r=document.createRange();r.selectNodeContents(e),n.addRange(r)}};function zW(t,e){const{type:n,target:r,addedNodes:i,removedNodes:o}=t;return t.type==="attributes"&&t.attributeName==="data-empty"?!1:!!(e.contains(r)||n==="childList"&&(Array.from(i).some(a=>a===e)||Array.from(o).some(a=>a===e)))}const s1="redactor dom changed",dA="block changed",fA="fake cursor is about to be toggled",hA="fake cursor have been set",hf="editor mobile layout toggled";function l1(t,e){if(!t.conversionConfig)return!1;const n=t.conversionConfig[e];return Vn(n)||ss(n)}function im(t,e){return l1(t.tool,e)}function pA(t,e){return Object.entries(t).some(([n,r])=>e[n]&&PW(e[n],r))}async function mA(t,e){const n=(await t.save()).data,r=e.find(i=>i.name===t.name);return r!==void 0&&!l1(r,"export")?[]:e.reduce((i,o)=>{if(!l1(o,"import")||o.toolbox===void 0)return i;const a=o.toolbox.filter(s=>{if(ko(s)||s.icon===void 0)return!1;if(s.data!==void 0){if(pA(s.data,n))return!1}else if(o.name===t.name)return!1;return!0});return i.push({...o,toolbox:a}),i},[])}function gA(t,e){return t.mergeable?t.name===e.name?!0:im(e,"export")&&im(t,"import"):!1}function $W(t,e){const n=e==null?void 0:e.export;return Vn(n)?n(t):ss(n)?t[n]:(n!==void 0&&pn("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function vA(t,e){const n=e==null?void 0:e.import;return Vn(n)?n(t):ss(n)?{[n]:t}:(n!==void 0&&pn("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var $n=(t=>(t.Default="default",t.Separator="separator",t.Html="html",t))($n||{}),cs=(t=>(t.APPEND_CALLBACK="appendCallback",t.RENDERED="rendered",t.MOVED="moved",t.UPDATED="updated",t.REMOVED="removed",t.ON_PASTE="onPaste",t))(cs||{});let us=class Ul extends df{constructor({id:e=_W(),data:n,tool:r,readOnly:i,tunesData:o},a){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(s=void 0)=>{const c=s===void 0,l=s instanceof InputEvent;!c&&!l&&this.detectToolRootChange(s);let d;c||l?d=!0:d=!(s.length>0&&s.every(f=>{const{addedNodes:b,removedNodes:x,target:k}=f;return[...Array.from(b),...Array.from(x),k].some(E=>(Ue.isElement(E)||(E=E.parentElement),E&&E.closest('[data-mutation-free="true"]')!==null))})),d&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=r.name,this.id=e,this.settings=r.settings,this.config=r.settings.config||{},this.editorEventBus=a||null,this.blockAPI=new ls(this),this.tool=r,this.toolInstance=r.create(n,this.blockAPI,i),this.tunes=r.tunes,this.composeTunes(o),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=Ue.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const n=this.inputs.findIndex(r=>r===e||r.contains(e));n!==-1&&(this.inputIndex=n)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!ko(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return Vn(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=Ue.isEmpty(this.pluginsContent,"/"),n=!this.hasMedia;return e&&n}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var n,r;this.holder.classList.toggle(Ul.CSS.selected,e);const i=e===!0&&Pt.isRangeInsideContainer(this.holder),o=e===!1&&Pt.isFakeCursorInsideContainer(this.holder);(i||o)&&((n=this.editorEventBus)==null||n.emit(fA,{state:e}),i?Pt.addFakeCursor():Pt.removeFakeCursor(this.holder),(r=this.editorEventBus)==null||r.emit(hA,{state:e}))}get selected(){return this.holder.classList.contains(Ul.CSS.selected)}set stretched(e){this.holder.classList.toggle(Ul.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(Ul.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(Ul.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,n){if(Vn(this.toolInstance[e])){e==="appendCallback"&&pn("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,n)}catch(r){pn(`Error during '${e}' call: ${r.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),n=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([o,a])=>{if(Vn(a.save))try{n[o]=a.save()}catch(s){pn(`Tune ${a.constructor.name} save method throws an Error %o`,"warn",s)}});const r=window.performance.now();let i;return Promise.resolve(e).then(o=>(i=window.performance.now(),{id:this.id,tool:this.name,data:o,tunes:n,time:i-r})).catch(o=>{pn(`Saving process for ${this.name} tool failed due to the ${o}`,"log","red")})}async validate(e){let n=!0;return this.toolInstance.validate instanceof Function&&(n=await this.toolInstance.validate(e)),n}getTunes(){const e=[],n=[],r=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return Ue.isElement(r)?e.push({type:$n.Html,element:r}):Array.isArray(r)?e.push(...r):e.push(r),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(i=>i.render()).forEach(i=>{Ue.isElement(i)?n.push({type:$n.Html,element:i}):Array.isArray(i)?n.push(...i):n.push(i)}),{toolTunes:e,commonTunes:n}}updateCurrentInput(){this.currentInput=Ue.isNativeInput(document.activeElement)||!Pt.anchorNode?document.activeElement:Pt.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),Vn(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const n=await this.data,r=e;return r==null?void 0:r.find(i=>pA(i.data,n))}async exportDataAsString(){const e=await this.data;return $W(e,this.tool.conversionConfig)}compose(){const e=Ue.make("div",Ul.CSS.wrapper),n=Ue.make("div",Ul.CSS.content),r=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=r,n.appendChild(this.toolRenderedElement);let i=n;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(o=>{if(Vn(o.wrap))try{i=o.wrap(i)}catch(a){pn(`Tune ${o.constructor.name} wrap method throws an Error %o`,"warn",a)}}),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach(n=>{(n.isInternal?this.defaultTunesInstances:this.tunesInstances).set(n.name,n.create(e[n.name],this.blockAPI))}),Object.entries(e).forEach(([n,r])=>{this.tunesInstances.has(n)||(this.unavailableTunesData[n]=r)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),Ue.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),Ue.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=n=>{const{mutations:r}=n;r.some(i=>zW(i,this.toolRenderedElement))&&this.didMutated(r)},(e=this.editorEventBus)==null||e.on(s1,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(s1,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(n=>{if(Array.from(n.removedNodes).includes(this.toolRenderedElement)){const r=n.addedNodes[n.addedNodes.length-1];this.toolRenderedElement=r}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(sA)}},UW=class extends Vt{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,n={},r={},i,o,a,s)=>{const c=this.Editor.BlockManager.insert({id:s,tool:e,data:n,index:i,needToFocus:o,replace:a});return new ls(c)},this.composeBlockData=async e=>{const n=this.Editor.Tools.blockTools.get(e);return new us({tool:n,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,n,r)=>{const{BlockManager:i}=this.Editor,o=i.getBlockById(e);if(o===void 0)throw new Error(`Block with id "${e}" not found`);const a=await i.update(o,n,r);return new ls(a)},this.convert=async(e,n,r)=>{var i,o;const{BlockManager:a,Tools:s}=this.Editor,c=a.getBlockById(e);if(!c)throw new Error(`Block with id "${e}" not found`);const l=s.blockTools.get(c.name),d=s.blockTools.get(n);if(!d)throw new Error(`Block Tool with type "${n}" not found`);const f=((i=l==null?void 0:l.conversionConfig)==null?void 0:i.export)!==void 0,b=((o=d.conversionConfig)==null?void 0:o.import)!==void 0;if(f&&b){const x=await a.convert(c,n,r);return new ls(x)}else{const x=[f?!1:rm(c.name),b?!1:rm(n)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${c.name}" to "${n}" is not possible. ${x} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,n=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(n);const r=e.map(({id:i,type:o,data:a})=>this.Editor.BlockManager.composeBlock({id:i,tool:o||this.config.defaultBlock,data:a}));return this.Editor.BlockManager.insertMany(r,n),r.map(i=>new ls(i))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,n)=>this.swap(e,n),move:(e,n)=>this.move(e,n),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,n=!0)=>this.stretchBlock(e,n),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const n=this.Editor.BlockManager.getBlockById(e);if(!n){So("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(n)}getBlockByIndex(e){const n=this.Editor.BlockManager.getBlockByIndex(e);if(n===void 0){So("There is no block at index `"+e+"`","warn");return}return new ls(n)}getById(e){const n=this.Editor.BlockManager.getBlockById(e);return n===void 0?(So("There is no block with id `"+e+"`","warn"),null):new ls(n)}getBlockByElement(e){const n=this.Editor.BlockManager.getBlock(e);if(n===void 0){So("There is no block corresponding to element `"+e+"`","warn");return}return new ls(n)}swap(e,n){pn("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,n)}move(e,n){this.Editor.BlockManager.move(e,n)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const n=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(n)}catch(n){So(n,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,n=!0){o1(!0,"blocks.stretchBlock()","BlockAPI");const r=this.Editor.BlockManager.getBlockByIndex(e);r&&(r.stretched=n)}insertNewBlock(){pn("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}};function WW(t,e){return typeof t=="number"?e.BlockManager.getBlockByIndex(t):typeof t=="string"?e.BlockManager.getBlockById(t):e.BlockManager.getBlockById(t.id)}let YW=class extends Vt{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,n),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,n),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,n),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,n),!0):!1,this.setToBlock=(e,n=this.Editor.Caret.positions.DEFAULT,r=0)=>{const i=WW(e,this.Editor);return i===void 0?!1:(this.Editor.Caret.setToBlock(i,n,r),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}},GW=class extends Vt{get methods(){return{emit:(e,n)=>this.emit(e,n),off:(e,n)=>this.off(e,n),on:(e,n)=>this.on(e,n)}}on(e,n){this.eventsDispatcher.on(e,n)}emit(e,n){this.eventsDispatcher.emit(e,n)}off(e,n){this.eventsDispatcher.off(e,n)}},XW=class rH extends Vt{static getNamespace(e,n){return n?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{So("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,n){return Object.assign(this.methods,{t:r=>Ti.t(rH.getNamespace(e,n),r)})}},KW=class extends Vt{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,n){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,n)})}};class ZW extends Vt{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}let JW=class extends Vt{get methods(){return{on:(e,n,r,i)=>this.on(e,n,r,i),off:(e,n,r,i)=>this.off(e,n,r,i),offById:e=>this.offById(e)}}on(e,n,r,i){return this.listeners.on(e,n,r,i)}off(e,n,r,i){this.listeners.off(e,n,r,i)}offById(e){this.listeners.offById(e)}};var yA={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="/",i(i.s=0)}([function(n,r,i){i(1),n.exports=function(){var o=i(6),a="cdx-notify--bounce-in",s=null;return{show:function(c){if(c.message){(function(){if(s)return!0;s=o.getWrapper(),document.body.appendChild(s)})();var l=null,d=c.time||8e3;switch(c.type){case"confirm":l=o.confirm(c);break;case"prompt":l=o.prompt(c);break;default:l=o.alert(c),window.setTimeout(function(){l.remove()},d)}s.appendChild(l),l.classList.add(a)}}}}()},function(n,r,i){var o=i(2);typeof o=="string"&&(o=[[n.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(4)(o,a),o.locals&&(n.exports=o.locals)},function(n,r,i){(n.exports=i(3)(!1)).push([n.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(n,r){n.exports=function(i){var o=[];return o.toString=function(){return this.map(function(a){var s=function(c,l){var d=c[1]||"",f=c[3];if(!f)return d;if(l&&typeof btoa=="function"){var b=(k=f,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),x=f.sources.map(function(E){return"/*# sourceURL="+f.sourceRoot+E+" */"});return[d].concat(x).concat([b]).join(`
`)}var k;return[d].join(`
`)}(a,i);return a[2]?"@media "+a[2]+"{"+s+"}":s}).join("")},o.i=function(a,s){typeof a=="string"&&(a=[[null,a,""]]);for(var c={},l=0;l<this.length;l++){var d=this[l][0];typeof d=="number"&&(c[d]=!0)}for(l=0;l<a.length;l++){var f=a[l];typeof f[0]=="number"&&c[f[0]]||(s&&!f[2]?f[2]=s:s&&(f[2]="("+f[2]+") and ("+s+")"),o.push(f))}},o}},function(n,r,i){var o,a,s={},c=(o=function(){return window&&document&&document.all&&!window.atob},function(){return a===void 0&&(a=o.apply(this,arguments)),a}),l=function(T){var C={};return function(M){if(typeof M=="function")return M();if(C[M]===void 0){var A=(function(P){return document.querySelector(P)}).call(this,M);if(window.HTMLIFrameElement&&A instanceof window.HTMLIFrameElement)try{A=A.contentDocument.head}catch{A=null}C[M]=A}return C[M]}}(),d=null,f=0,b=[],x=i(5);function k(T,C){for(var M=0;M<T.length;M++){var A=T[M],P=s[A.id];if(P){P.refs++;for(var L=0;L<P.parts.length;L++)P.parts[L](A.parts[L]);for(;L<A.parts.length;L++)P.parts.push(p(A.parts[L],C))}else{var R=[];for(L=0;L<A.parts.length;L++)R.push(p(A.parts[L],C));s[A.id]={id:A.id,refs:1,parts:R}}}}function E(T,C){for(var M=[],A={},P=0;P<T.length;P++){var L=T[P],R=C.base?L[0]+C.base:L[0],j={css:L[1],media:L[2],sourceMap:L[3]};A[R]?A[R].parts.push(j):M.push(A[R]={id:R,parts:[j]})}return M}function m(T,C){var M=l(T.insertInto);if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var A=b[b.length-1];if(T.insertAt==="top")A?A.nextSibling?M.insertBefore(C,A.nextSibling):M.appendChild(C):M.insertBefore(C,M.firstChild),b.push(C);else if(T.insertAt==="bottom")M.appendChild(C);else{if(typeof T.insertAt!="object"||!T.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var P=l(T.insertInto+" "+T.insertAt.before);M.insertBefore(C,P)}}function h(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T);var C=b.indexOf(T);C>=0&&b.splice(C,1)}function g(T){var C=document.createElement("style");return T.attrs.type===void 0&&(T.attrs.type="text/css"),w(C,T.attrs),m(T,C),C}function w(T,C){Object.keys(C).forEach(function(M){T.setAttribute(M,C[M])})}function p(T,C){var M,A,P,L;if(C.transform&&T.css){if(!(L=C.transform(T.css)))return function(){};T.css=L}if(C.singleton){var R=f++;M=d||(d=g(C)),A=S.bind(null,M,R,!1),P=S.bind(null,M,R,!0)}else T.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(M=function(j){var z=document.createElement("link");return j.attrs.type===void 0&&(j.attrs.type="text/css"),j.attrs.rel="stylesheet",w(z,j.attrs),m(j,z),z}(C),A=(function(j,z,$){var Y=$.css,ae=$.sourceMap,K=z.convertToAbsoluteUrls===void 0&&ae;(z.convertToAbsoluteUrls||K)&&(Y=x(Y)),ae&&(Y+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(ae))))+" */");var te=new Blob([Y],{type:"text/css"}),G=j.href;j.href=URL.createObjectURL(te),G&&URL.revokeObjectURL(G)}).bind(null,M,C),P=function(){h(M),M.href&&URL.revokeObjectURL(M.href)}):(M=g(C),A=(function(j,z){var $=z.css,Y=z.media;if(Y&&j.setAttribute("media",Y),j.styleSheet)j.styleSheet.cssText=$;else{for(;j.firstChild;)j.removeChild(j.firstChild);j.appendChild(document.createTextNode($))}}).bind(null,M),P=function(){h(M)});return A(T),function(j){if(j){if(j.css===T.css&&j.media===T.media&&j.sourceMap===T.sourceMap)return;A(T=j)}else P()}}n.exports=function(T,C){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(C=C||{}).attrs=typeof C.attrs=="object"?C.attrs:{},C.singleton||typeof C.singleton=="boolean"||(C.singleton=c()),C.insertInto||(C.insertInto="head"),C.insertAt||(C.insertAt="bottom");var M=E(T,C);return k(M,C),function(A){for(var P=[],L=0;L<M.length;L++){var R=M[L];(j=s[R.id]).refs--,P.push(j)}for(A&&k(E(A,C),C),L=0;L<P.length;L++){var j;if((j=P[L]).refs===0){for(var z=0;z<j.parts.length;z++)j.parts[z]();delete s[j.id]}}}};var v,y=(v=[],function(T,C){return v[T]=C,v.filter(Boolean).join(`
`)});function S(T,C,M,A){var P=M?"":A.css;if(T.styleSheet)T.styleSheet.cssText=y(C,P);else{var L=document.createTextNode(P),R=T.childNodes;R[C]&&T.removeChild(R[C]),R.length?T.insertBefore(L,R[C]):T.appendChild(L)}}},function(n,r){n.exports=function(i){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var a=o.protocol+"//"+o.host,s=a+o.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(c,l){var d,f=l.trim().replace(/^"(.*)"$/,function(b,x){return x}).replace(/^'(.*)'$/,function(b,x){return x});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(f)?c:(d=f.indexOf("//")===0?f:f.indexOf("/")===0?a+f:s+f.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(n,r,i){var o,a,s,c,l,d,f,b,x;n.exports=(o="cdx-notifies",a="cdx-notify",s="cdx-notify__cross",c="cdx-notify__button--confirm",l="cdx-notify__button--cancel",d="cdx-notify__input",f="cdx-notify__button",b="cdx-notify__btns-wrapper",{alert:x=function(k){var E=document.createElement("DIV"),m=document.createElement("DIV"),h=k.message,g=k.style;return E.classList.add(a),g&&E.classList.add(a+"--"+g),E.innerHTML=h,m.classList.add(s),m.addEventListener("click",E.remove.bind(E)),E.appendChild(m),E},confirm:function(k){var E=x(k),m=document.createElement("div"),h=document.createElement("button"),g=document.createElement("button"),w=E.querySelector("."+s),p=k.cancelHandler,v=k.okHandler;return m.classList.add(b),h.innerHTML=k.okText||"Confirm",g.innerHTML=k.cancelText||"Cancel",h.classList.add(f),g.classList.add(f),h.classList.add(c),g.classList.add(l),p&&typeof p=="function"&&(g.addEventListener("click",p),w.addEventListener("click",p)),v&&typeof v=="function"&&h.addEventListener("click",v),h.addEventListener("click",E.remove.bind(E)),g.addEventListener("click",E.remove.bind(E)),m.appendChild(h),m.appendChild(g),E.appendChild(m),E},prompt:function(k){var E=x(k),m=document.createElement("div"),h=document.createElement("button"),g=document.createElement("input"),w=E.querySelector("."+s),p=k.cancelHandler,v=k.okHandler;return m.classList.add(b),h.innerHTML=k.okText||"Ok",h.classList.add(f),h.classList.add(c),g.classList.add(d),k.placeholder&&g.setAttribute("placeholder",k.placeholder),k.default&&(g.value=k.default),k.inputType&&(g.type=k.inputType),p&&typeof p=="function"&&w.addEventListener("click",p),v&&typeof v=="function"&&h.addEventListener("click",function(){v(g.value)}),h.addEventListener("click",E.remove.bind(E)),m.appendChild(g),m.appendChild(h),E.appendChild(m),E},getWrapper:function(){var k=document.createElement("DIV");return k.classList.add(o),k}})}])})})(yA);var QW=yA.exports;const VW=tm(QW);let qW=class{show(e){VW.show(e)}};class eY extends Vt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.notifier=new qW}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class tY extends Vt{get methods(){const e=()=>this.isEnabled;return{toggle:n=>this.toggle(n),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var bA={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(xW,function(){function n(f){var b=f.tags,x=Object.keys(b),k=x.map(function(E){return typeof b[E]}).every(function(E){return E==="object"||E==="boolean"||E==="function"});if(!k)throw new Error("The configuration was invalid");this.config=f}var r=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function i(f){return r.indexOf(f.nodeName)!==-1}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function a(f){return o.indexOf(f.nodeName)!==-1}n.prototype.clean=function(f){const b=document.implementation.createHTMLDocument(),x=b.createElement("div");return x.innerHTML=f,this._sanitize(b,x),x.innerHTML},n.prototype._sanitize=function(f,b){var x=s(f,b),k=x.firstChild();if(k)do{if(k.nodeType===Node.TEXT_NODE)if(k.data.trim()===""&&(k.previousElementSibling&&i(k.previousElementSibling)||k.nextElementSibling&&i(k.nextElementSibling))){b.removeChild(k),this._sanitize(f,b);break}else continue;if(k.nodeType===Node.COMMENT_NODE){b.removeChild(k),this._sanitize(f,b);break}var E=a(k),m;E&&(m=Array.prototype.some.call(k.childNodes,i));var h=!!b.parentNode,g=i(b)&&i(k)&&h,w=k.nodeName.toLowerCase(),p=c(this.config,w,k),v=E&&m;if(v||l(k,p)||!this.config.keepNestedBlockElements&&g){if(!(k.nodeName==="SCRIPT"||k.nodeName==="STYLE"))for(;k.childNodes.length>0;)b.insertBefore(k.childNodes[0],k);b.removeChild(k),this._sanitize(f,b);break}for(var y=0;y<k.attributes.length;y+=1){var S=k.attributes[y];d(S,p,k)&&(k.removeAttribute(S.name),y=y-1)}this._sanitize(f,k)}while(k=x.nextSibling())};function s(f,b){return f.createTreeWalker(b,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function c(f,b,x){return typeof f.tags[b]=="function"?f.tags[b](x):f.tags[b]}function l(f,b){return typeof b>"u"?!0:typeof b=="boolean"?!b:!1}function d(f,b,x){var k=f.name.toLowerCase();return b===!0?!1:typeof b[k]=="function"?!b[k](f.value,x):typeof b[k]>"u"||b[k]===!1?!0:typeof b[k]=="string"?b[k]!==f.value:!1}return n})})(bA);var nY=bA.exports;const rY=tm(nY);function c1(t,e){return t.map(n=>{const r=Vn(e)?e(n.tool):e;return ko(r)||(n.data=u1(n.data,r)),n})}function Oa(t,e={}){const n={tags:e};return new rY(n).clean(t)}function u1(t,e){return Array.isArray(t)?iY(t,e):Jr(t)?oY(t,e):ss(t)?aY(t,e):t}function iY(t,e){return t.map(n=>u1(n,e))}function oY(t,e){const n={};for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const i=t[r],o=sY(e[r])?e[r]:e;n[r]=u1(i,o)}return n}function aY(t,e){return Jr(e)?Oa(t,e):e===!1?Oa(t,{}):t}function sY(t){return Jr(t)||EW(t)||Vn(t)}let lY=class extends Vt{get methods(){return{clean:(e,n)=>this.clean(e,n)}}clean(e,n){return Oa(e,n)}},cY=class extends Vt{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(So(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}},uY=class extends Vt{constructor(){super(...arguments),this.selectionUtils=new Pt}get methods(){return{findParentTag:(e,n)=>this.findParentTag(e,n),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,n){return this.selectionUtils.findParentTag(e,n)}expandToTag(e){this.selectionUtils.expandToTag(e)}},dY=class extends Vt{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}},fY=class extends Vt{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}},hY=class extends Vt{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){So("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){So("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}};var wA={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=0)}([function(n,r,i){n.exports=i(1)},function(n,r,i){i.r(r),i.d(r,"default",function(){return o});class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(s,c,l){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const d=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},l);if(d.hidingDelay&&(this.hidingDelay=d.hidingDelay),this.nodes.content.innerHTML="",typeof c=="string")this.nodes.content.appendChild(document.createTextNode(c));else{if(!(c instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof c+" given.");this.nodes.content.appendChild(c)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),d.placement){case"top":this.placeTop(s,d);break;case"left":this.placeLeft(s,d);break;case"right":this.placeRight(s,d);break;case"bottom":default:this.placeBottom(s,d)}d&&d.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},d.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(s=!1){if(this.hidingDelay&&!s)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(s,c,l){s.addEventListener("mouseenter",()=>{this.show(s,c,l)}),s.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const s="codex-tooltips-style";if(document.getElementById(s))return;const c=i(2),l=this.make("style",null,{textContent:c.toString(),id:s});this.prepend(document.head,l)}placeBottom(s,c){const l=s.getBoundingClientRect(),d=l.left+s.clientWidth/2-this.nodes.wrapper.offsetWidth/2,f=l.bottom+window.pageYOffset+this.offsetTop+c.marginTop;this.applyPlacement("bottom",d,f)}placeTop(s,c){const l=s.getBoundingClientRect(),d=l.left+s.clientWidth/2-this.nodes.wrapper.offsetWidth/2,f=l.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",d,f)}placeLeft(s,c){const l=s.getBoundingClientRect(),d=l.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-c.marginLeft,f=l.top+window.pageYOffset+s.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",d,f)}placeRight(s,c){const l=s.getBoundingClientRect(),d=l.right+this.offsetRight+c.marginRight,f=l.top+window.pageYOffset+s.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",d,f)}applyPlacement(s,c,l){this.nodes.wrapper.classList.add(this.CSS.placement[s]),this.nodes.wrapper.style.left=c+"px",this.nodes.wrapper.style.top=l+"px"}make(s,c=null,l={}){const d=document.createElement(s);Array.isArray(c)?d.classList.add(...c):c&&d.classList.add(c);for(const f in l)l.hasOwnProperty(f)&&(d[f]=l[f]);return d}append(s,c){Array.isArray(c)?c.forEach(l=>s.appendChild(l)):s.appendChild(c)}prepend(s,c){Array.isArray(c)?(c=c.reverse()).forEach(l=>s.prepend(l)):s.prepend(c)}}},function(n,r){n.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(wA);var pY=wA.exports;const mY=tm(pY);let Qo=null;function d1(){Qo||(Qo=new mY)}function gY(t,e,n){d1(),Qo==null||Qo.show(t,e,n)}function om(t=!1){d1(),Qo==null||Qo.hide(t)}function am(t,e,n){d1(),Qo==null||Qo.onHover(t,e,n)}function vY(){Qo==null||Qo.destroy(),Qo=null}let yY=class extends Vt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n})}get methods(){return{show:(e,n,r)=>this.show(e,n,r),hide:()=>this.hide(),onHover:(e,n,r)=>this.onHover(e,n,r)}}show(e,n,r){gY(e,n,r)}hide(){om()}onHover(e,n,r){am(e,n,r)}},bY=class extends Vt{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}};function xA(t,e){const n={};return Object.entries(t).forEach(([r,i])=>{if(Jr(i)){const o=e?`${e}.${r}`:r;Object.values(i).every(a=>ss(a))?n[r]=o:n[r]=xA(i,o);return}n[r]=i}),n}const ro=xA(lA);function wY(t,e){const n={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0?n[i]=t[r]:n[r]=t[r]}),n}const CA=class Wh{constructor(e,n){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=n}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(Wh.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Wh.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let n=this.cursor;return n===-1?n=e===Wh.directions.RIGHT?-1:0:this.items[n].classList.remove(this.focusedCssClass),e===Wh.directions.RIGHT?n=(n+1)%this.items.length:n=(this.items.length+n-1)%this.items.length,Ue.canSetCaret(this.items[n])&&nm(()=>Pt.setCursor(this.items[n]),50)(),this.items[n].classList.add(this.focusedCssClass),n}};CA.directions={RIGHT:"right",LEFT:"left"};let pf=CA,sm=class FE{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=n=>{if(this.isEventReadyForHandling(n))switch(FE.usedKeys.includes(n.keyCode)&&n.preventDefault(),n.keyCode){case zt.TAB:this.handleTabPress(n);break;case zt.LEFT:case zt.UP:this.flipLeft();break;case zt.RIGHT:case zt.DOWN:this.flipRight();break;case zt.ENTER:this.handleEnterPress(n);break}},this.iterator=new pf(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||FE.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[zt.TAB,zt.LEFT,zt.RIGHT,zt.ENTER,zt.UP,zt.DOWN]}activate(e,n){this.activated=!0,e&&this.iterator.setItems(e),n!==void 0&&this.iterator.setCursor(n),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(n=>n!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?pf.directions.LEFT:pf.directions.RIGHT){case pf.directions.RIGHT:this.flipRight();break;case pf.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),Vn(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};const xY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',CY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',SY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',kY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',EY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',TY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',MY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',IY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',SA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',OY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',AY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',kA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',_Y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',DY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',NY='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',PY="__",LY="--";function Qs(t){return(e,n)=>[[t,e].filter(r=>!!r).join(PY),n].filter(r=>!!r).join(LY)}const mf=Qs("ce-hint"),gf={root:mf(),alignedStart:mf(null,"align-left"),alignedCenter:mf(null,"align-center"),title:mf("title"),description:mf("description")};let RY=class{constructor(e){this.nodes={root:Ue.make("div",[gf.root,e.alignment==="center"?gf.alignedCenter:gf.alignedStart]),title:Ue.make("div",gf.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=Ue.make("div",gf.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}},f1=class{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){om()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,n;this.params!==void 0&&"onActivate"in this.params&&((n=(e=this.params).onActivate)==null||n.call(e,this.params))}addHint(e,n){const r=new RY(n);am(e,r.getElement(),{placement:n.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}};const io=Qs("ce-popover-item"),lr={container:io(),active:io(null,"active"),disabled:io(null,"disabled"),focused:io(null,"focused"),hidden:io(null,"hidden"),confirmationState:io(null,"confirmation"),noHover:io(null,"no-hover"),noFocus:io(null,"no-focus"),title:io("title"),secondaryTitle:io("secondary-title"),icon:io("icon"),iconTool:io("icon","tool"),iconChevronRight:io("icon","chevron-right"),wobbleAnimation:Qs("wobble")()};let ac=class extends f1{constructor(e,n){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(lr.noFocus)},this.removeSpecialHoverBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(lr.noHover)},this.onErrorAnimationEnd=()=>{var r,i;(r=this.nodes.icon)==null||r.classList.remove(lr.wobbleAnimation),(i=this.nodes.icon)==null||i.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,n)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(lr.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var n;(n=this.nodes.root)==null||n.classList.toggle(lr.active,e)}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(lr.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,n){var r,i;const o=(n==null?void 0:n.wrapperTag)||"div",a=Ue.make(o,lr.container,{type:o==="button"?"button":void 0});return e.name&&(a.dataset.itemName=e.name),this.nodes.icon=Ue.make("div",[lr.icon,lr.iconTool],{innerHTML:e.icon||MY}),a.appendChild(this.nodes.icon),e.title!==void 0&&a.appendChild(Ue.make("div",lr.title,{innerHTML:e.title||""})),e.secondaryLabel&&a.appendChild(Ue.make("div",lr.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&a.appendChild(Ue.make("div",[lr.icon,lr.iconChevronRight],{innerHTML:kY})),this.isActive&&a.classList.add(lr.active),e.isDisabled&&a.classList.add(lr.disabled),e.hint!==void 0&&((r=n==null?void 0:n.hint)==null?void 0:r.enabled)!==!1&&this.addHint(a,{...e.hint,position:((i=n==null?void 0:n.hint)==null?void 0:i.position)||"right"}),a}enableConfirmationMode(e){if(this.nodes.root===null)return;const n={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},r=this.make(n);this.nodes.root.innerHTML=r.innerHTML,this.nodes.root.classList.add(lr.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(lr.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,n,r;(e=this.nodes.root)==null||e.classList.add(lr.noHover),(n=this.nodes.root)==null||n.classList.add(lr.noFocus),(r=this.nodes.root)==null||r.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var n;if(!("confirmation"in e)||e.confirmation===void 0)try{(n=e.onActivate)==null||n.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,n,r;(e=this.nodes.icon)!=null&&e.classList.contains(lr.wobbleAnimation)||((n=this.nodes.icon)==null||n.classList.add(lr.wobbleAnimation),(r=this.nodes.icon)==null||r.addEventListener("animationend",this.onErrorAnimationEnd))}};const h1=Qs("ce-popover-item-separator"),p1={container:h1(),line:h1("line"),hidden:h1(null,"hidden")};let EA=class extends f1{constructor(){super(),this.nodes={root:Ue.make("div",p1.container),line:Ue.make("div",p1.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(p1.hidden,e)}};var Aa=(t=>(t.Closed="closed",t.ClosedOnActivate="closed-on-activate",t))(Aa||{});const Mi=Qs("ce-popover"),br={popover:Mi(),popoverContainer:Mi("container"),popoverOpenTop:Mi(null,"open-top"),popoverOpenLeft:Mi(null,"open-left"),popoverOpened:Mi(null,"opened"),search:Mi("search"),nothingFoundMessage:Mi("nothing-found-message"),nothingFoundMessageDisplayed:Mi("nothing-found-message","displayed"),items:Mi("items"),overlay:Mi("overlay"),overlayHidden:Mi("overlay","hidden"),popoverNested:Mi(null,"nested"),getPopoverNestedClass:t=>Mi(null,`nested-level-${t.toString()}`),popoverInline:Mi(null,"inline"),popoverHeader:Mi("header")};var gu=(t=>(t.NestingLevel="--nesting-level",t.PopoverHeight="--popover-height",t.InlinePopoverWidth="--inline-popover-width",t.TriggerItemLeft="--trigger-item-left",t.TriggerItemTop="--trigger-item-top",t))(gu||{});const TA=Qs("ce-popover-item-html"),MA={root:TA(),hidden:TA(null,"hidden")};let vf=class extends f1{constructor(e,n){var r,i;super(e),this.nodes={root:Ue.make("div",MA.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((r=n==null?void 0:n.hint)==null?void 0:r.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((i=n==null?void 0:n.hint)==null?void 0:i.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(MA.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${Ue.allInputsSelector}`);return Array.from(e)}},IA=class extends df{constructor(e,n={}){super(),this.params=e,this.itemsRenderParams=n,this.listeners=new ff,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=Ue.make("div",[br.popoverContainer]),this.nodes.nothingFoundMessage=Ue.make("div",[br.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=Ue.make("div",[br.items]),this.items.forEach(r=>{const i=r.getElement();i!==null&&this.nodes.items.appendChild(i)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",r=>this.handleClick(r)),this.nodes.popover=Ue.make("div",[br.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof ac)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(br.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(br.popoverOpened),this.nodes.popover.classList.remove(br.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit(Aa.Closed)}destroy(){var e;this.items.forEach(n=>n.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const n=this.items.find(r=>r.name===e);this.handleItemClick(n)}buildItems(e){return e.map(n=>{switch(n.type){case $n.Separator:return new EA;case $n.Html:return new vf(n,this.itemsRenderParams[$n.Html]);default:return new ac(n,this.itemsRenderParams[$n.Default])}})}getTargetItem(e){return this.items.filter(n=>n instanceof ac||n instanceof vf).find(n=>{const r=n.getElement();return r===null?!1:e.composedPath().includes(r)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(n=>n!==e).forEach(n=>n.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(Aa.ClosedOnActivate))}}handleClick(e){const n=this.getTargetItem(e);n!==void 0&&this.handleItemClick(n)}toggleItemActivenessIfNeeded(e){if(e instanceof ac&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const n=this.itemsDefault.filter(r=>r.toggle===e.toggle);if(n.length===1){e.toggleActive();return}n.forEach(r=>{r.toggleActive(r===e)})}}};var lm=(t=>(t.Search="search",t))(lm||{});const m1=Qs("cdx-search-field"),g1={wrapper:m1(),icon:m1("icon"),input:m1("input")};let BY=class extends df{constructor({items:e,placeholder:n}){super(),this.listeners=new ff,this.items=e,this.wrapper=Ue.make("div",g1.wrapper);const r=Ue.make("div",g1.icon,{innerHTML:_Y});this.input=Ue.make("input",g1.input,{placeholder:n,tabIndex:-1}),this.wrapper.appendChild(r),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(lm.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(lm.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var n,r;const i=((n=e.title)==null?void 0:n.toLowerCase())||"",o=(r=this.searchQuery)==null?void 0:r.toLowerCase();return o!==void 0?i.includes(o):!1}};var jY=Object.defineProperty,FY=Object.getOwnPropertyDescriptor,HY=(t,e,n,r)=>{for(var i=FY(e,n),o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=a(e,n,i)||i);return i&&jY(e,n,i),i};const OA=class iH extends IA{constructor(e,n){super(e,n),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var r;super.hide(),this.destroyNestedPopoverIfExists(),(r=this.flipper)==null||r.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const r=this.itemsDefault.find(i=>i.isFocused);r==null||r.onFocus()},this.onSearch=r=>{var i;const o=r.query==="",a=r.items.length===0;this.items.forEach(c=>{let l=!1;c instanceof ac?l=!r.items.includes(c):(c instanceof EA||c instanceof vf)&&(l=a||!o),c.toggleHidden(l)}),this.toggleNothingFoundMessage(a);const s=r.query===""?this.flippableElements:r.items.map(c=>c.getElement());(i=this.flipper)!=null&&i.isActivated&&(this.flipper.deactivate(),this.flipper.activate(s))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(br.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",r=>this.handleHover(r)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new sm({items:this.flippableElements,focusedItemClass:lr.focused,allowedKeys:[zt.TAB,zt.UP,zt.DOWN,zt.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(gu.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(br.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(br.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const n=this.getTargetItem(e);n!==void 0&&this.previouslyHoveredItem!==n&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=n,n.hasChildren&&this.showNestedPopoverForItem(n))}setTriggerItemPosition(e,n){const r=n.getElement(),i=(r?r.offsetTop:0)-this.scrollTop,o=this.offsetTop+i;e.style.setProperty(gu.TriggerItemTop,o+"px")}destroyNestedPopoverIfExists(){var e,n;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off(Aa.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(n=this.nestedPopoverTriggerItem)==null||n.onChildrenClose())}showNestedPopoverForItem(e){var n;this.nestedPopover=new iH({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(Aa.ClosedOnActivate,this.hide);const r=this.nestedPopover.getElement();return this.nodes.popover.appendChild(r),this.setTriggerItemPosition(r,e),r.style.setProperty(gu.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(n=this.flipper)==null||n.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),n=this.scopeElement.getBoundingClientRect(),r=this.size.height,i=e.top+r,o=e.top-r,a=Math.min(window.innerHeight,n.bottom);return o<n.top||i<=a}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),n=this.scopeElement.getBoundingClientRect(),r=this.size.width,i=e.right+r,o=e.left-r,a=Math.min(window.innerWidth,n.right);return o<n.left||i<=a}get size(){var e;const n={height:0,width:0};if(this.nodes.popover===null)return n;const r=this.nodes.popover.cloneNode(!0);r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000px",r.classList.add(br.popoverOpened),(e=r.querySelector("."+br.popoverNested))==null||e.remove(),document.body.appendChild(r);const i=r.querySelector("."+br.popoverContainer);return n.height=i.offsetHeight,n.width=i.offsetWidth,r.remove(),n}get flippableElements(){return this.items.map(e=>{if(e instanceof ac)return e.getElement();if(e instanceof vf)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new BY({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(lm.Search,this.onSearch);const e=this.search.getElement();e.classList.add(br.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(br.nothingFoundMessageDisplayed,e)}};HY([pu],OA.prototype,"size");let v1=OA,zY=class extends v1{constructor(e){const n=!mu();super({...e,class:br.popoverInline},{[$n.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:n}},[$n.Html]:{hint:{position:"top",alignment:"center",enabled:n}}}),this.items.forEach(r=>{!(r instanceof ac)&&!(r instanceof vf)||r.hasChildren&&r.isChildrenOpen&&this.showNestedItems(r)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(gu.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,n){const r=n.getElement(),i=r?r.offsetLeft:0,o=this.offsetLeft+i;e.style.setProperty(gu.TriggerItemLeft,o+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const n=super.showNestedPopoverForItem(e);return n.getElement().classList.add(br.getPopoverNestedClass(n.nestingLevel)),n}handleItemClick(e){var n;e!==this.nestedPopoverTriggerItem&&((n=this.nestedPopoverTriggerItem)==null||n.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}};const AA=class Yh{constructor(){this.scrollPosition=null}lock(){a1?this.lockHard():document.body.classList.add(Yh.CSS.scrollLocked)}unlock(){a1?this.unlockHard():document.body.classList.remove(Yh.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(Yh.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(Yh.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};AA.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let $Y=AA;const y1=Qs("ce-popover-header"),b1={root:y1(),text:y1("text"),backButton:y1("back-button")};let UY=class{constructor({text:e,onBackButtonClick:n}){this.listeners=new ff,this.text=e,this.onBackButtonClick=n,this.nodes={root:Ue.make("div",[b1.root]),backButton:Ue.make("button",[b1.backButton]),text:Ue.make("div",[b1.text])},this.nodes.backButton.innerHTML=SY,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}},WY=class{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}},_A=class extends IA{constructor(e){super(e,{[$n.Default]:{hint:{enabled:!1}},[$n.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new $Y,this.history=new WY,this.isHidden=!0,this.nodes.overlay=Ue.make("div",[br.overlay,br.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(br.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(br.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,n){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),n!==void 0){this.header=new UY({text:n,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const r=this.header.getElement();r!==null&&this.nodes.popoverContainer.insertBefore(r,this.nodes.popoverContainer.firstChild)}this.items.forEach(r=>{var i;return(i=r.getElement())==null?void 0:i.remove()}),this.items=this.buildItems(e),this.items.forEach(r=>{var i;const o=r.getElement();o!==null&&((i=this.nodes.items)==null||i.appendChild(o))})}},YY=class extends Vt{constructor(){super(...arguments),this.opened=!1,this.selection=new Pt,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,Pt.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Aa.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=Ue.make("div",[this.CSS.settings]),this.eventsDispatcher.on(hf,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(hf,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var n;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:r,commonTunes:i}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const o=mu()?_A:v1;this.popover=new o({searchable:!0,items:await this.getTunesItems(e,i,r),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ti.ui(ro.ui.popover,"Nothing found"),search:Ti.ui(ro.ui.popover,"Filter")}}),this.popover.on(Aa.Closed,this.onPopoverClose),(n=this.nodes.wrapper)==null||n.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,n,r){const i=[];r!==void 0&&r.length>0&&(i.push(...r),i.push({type:$n.Separator}));const o=Array.from(this.Editor.Tools.blockTools.values()),a=(await mA(e,o)).reduce((s,c)=>(c.toolbox.forEach(l=>{s.push({icon:l.icon,title:Ti.t(ro.toolNames,l.title),name:c.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:d,Caret:f,Toolbar:b}=this.Editor,x=await d.convert(e,c.name,l.data);b.close(),f.setToBlock(x,f.positions.END)}})}),s),[]);return a.length>0&&(i.push({icon:kA,name:"convert-to",title:Ti.ui(ro.ui.popover,"Convert to"),children:{searchable:!0,items:a}}),i.push({type:$n.Separator})),i.push(...n),i.map(s=>this.resolveTuneAliases(s))}resolveTuneAliases(e){if(e.type===$n.Separator||e.type===$n.Html)return e;const n=wY(e,{label:"title"});return e.confirmation&&(n.confirmation=this.resolveTuneAliases(e.confirmation)),n}};var DA={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=0)}([function(n,r,i){function o(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function a(c,l,d){return l&&o(c.prototype,l),d&&o(c,d),c}i.r(r);var s=function(){function c(l){var d=this;(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")})(this,c),this.commands={},this.keys={},this.name=l.name,this.parseShortcutName(l.name),this.element=l.on,this.callback=l.callback,this.executeShortcut=function(f){d.execute(f)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return a(c,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),a(c,[{key:"parseShortcutName",value:function(l){l=l.split("+");for(var d=0;d<l.length;d++){l[d]=l[d].toUpperCase();var f=!1;for(var b in c.supportedCommands)if(c.supportedCommands[b].includes(l[d])){f=this.commands[b]=!0;break}f||(this.keys[l[d]]=!0)}for(var x in c.supportedCommands)this.commands[x]||(this.commands[x]=!1)}},{key:"execute",value:function(l){var d,f={CMD:l.ctrlKey||l.metaKey,SHIFT:l.shiftKey,ALT:l.altKey},b=!0;for(d in this.commands)this.commands[d]!==f[d]&&(b=!1);var x,k=!0;for(x in this.keys)k=k&&l.keyCode===c.keyCodes[x];b&&k&&this.callback(l)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),c}();r.default=s}]).default})})(DA);var GY=DA.exports;const XY=tm(GY);let KY=class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const n=new XY({name:e.name,on:e.on,callback:e.handler}),r=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...r,n])}remove(e,n){const r=this.findShortcut(e,n);if(!r)return;r.remove();const i=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,i.filter(o=>o!==r))}findShortcut(e,n){return(this.registeredShortcuts.get(e)||[]).find(({name:r})=>r===n)}};const vu=new KY;var ZY=Object.defineProperty,JY=Object.getOwnPropertyDescriptor,NA=(t,e,n,r)=>{for(var i=JY(e,n),o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=a(e,n,i)||i);return i&&ZY(e,n,i),i},cm=(t=>(t.Opened="toolbox-opened",t.Closed="toolbox-closed",t.BlockAdded="toolbox-block-added",t))(cm||{});const w1=class oH extends df{constructor({api:e,tools:n,i18nLabels:r}){super(),this.opened=!1,this.listeners=new ff,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=n,this.i18nLabels=r,this.enableShortcuts(),this.nodes={toolbox:Ue.make("div",oH.CSS.toolbox)},this.initPopover(),this.api.events.on(hf,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off(Aa.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(hf,this.handleMobileLayoutToggle)}toolButtonActivated(e,n){this.insertNewBlock(e,n)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const n=mu()?_A:v1;this.popover=new n({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Aa.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off(Aa.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(n=>{n.toolbox&&e.push(n)}),e}get toolboxItemsToBeDisplayed(){const e=(n,r)=>({icon:n.icon,title:Ti.t(ro.toolNames,n.title||rm(r.name)),name:r.name,onActivate:()=>{this.toolButtonActivated(r.name,n.data)},secondaryLabel:r.shortcut?i1(r.shortcut):""});return this.toolsToBeDisplayed.reduce((n,r)=>(Array.isArray(r.toolbox)?r.toolbox.forEach(i=>{n.push(e(i,r))}):r.toolbox!==void 0&&n.push(e(r.toolbox,r)),n),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const n=e.shortcut;n&&this.enableShortcutForTool(e.name,n)})}enableShortcutForTool(e,n){vu.add({name:n,on:this.api.ui.nodes.redactor,handler:async r=>{r.preventDefault();const i=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(i);if(o)try{const a=await this.api.blocks.convert(o.id,e);this.api.caret.setToBlock(a,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const n=e.shortcut;n&&vu.remove(this.api.ui.nodes.redactor,n)})}async insertNewBlock(e,n){const r=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(r);if(!i)return;const o=i.isEmpty?r:r+1;let a;if(n){const c=await this.api.blocks.composeBlockData(e);a=Object.assign(c,n)}const s=this.api.blocks.insert(e,a,void 0,o,void 0,i.isEmpty);s.call(cs.APPEND_CALLBACK),this.api.caret.setToBlock(o),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};NA([pu],w1.prototype,"toolsToBeDisplayed"),NA([pu],w1.prototype,"toolboxItemsToBeDisplayed");let QY=w1;const PA="block hovered";async function VY(t,e){const n=navigator.keyboard;if(!n)return e;try{return(await n.getLayoutMap()).get(t)||e}catch(r){return console.error(r),e}}let qY=class extends Vt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var n;(n=this.toolboxInstance)==null||n.close()},open:()=>{if(this.toolboxInstance===null){pn("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){pn("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var n;return(n=this.toolboxInstance)==null?void 0:n.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){pn("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const n=e.holder,{isMobile:r}=this.Editor.UI;let i;const o=20,a=e.firstInput,s=n.getBoundingClientRect(),c=a!==void 0?a.getBoundingClientRect():null,l=c!==null?c.top-s.top:null,d=l!==null?l>o:void 0;if(r)i=n.offsetTop+n.offsetHeight;else if(a===void 0||d){const f=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);i=n.offsetTop+f}else{const f=RW(a),b=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);i=n.offsetTop+f-b+8+l}this.nodes.wrapper.style.top=`${Math.floor(i)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,n;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(n=this.toolboxInstance)==null||n.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=Ue.make("div",this.CSS.toolbar),["content","actions"].forEach(o=>{this.nodes[o]=Ue.make("div",this.CSS[o])}),Ue.append(this.nodes.wrapper,this.nodes.content),Ue.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=Ue.make("div",this.CSS.plusButton,{innerHTML:AY}),Ue.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{om(!0),this.plusButtonClicked()},!1);const e=Ue.make("div");e.appendChild(document.createTextNode(Ti.ui(ro.ui.toolbar.toolbox,"Add"))),e.appendChild(Ue.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),am(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=Ue.make("span",this.CSS.settingsToggler,{innerHTML:OY}),Ue.append(this.nodes.actions,this.nodes.settingsToggler);const n=Ue.make("div"),r=Ue.text(Ti.ui(ro.ui.blockTunes.toggler,"Click to tune")),i=await VY("Slash","/");n.appendChild(r),n.appendChild(Ue.make("div",this.CSS.plusButtonShortcut,{textContent:i1(`CMD + ${i}`)})),am(this.nodes.settingsToggler,n,{hidingDelay:400}),Ue.append(this.nodes.actions,this.makeToolbox()),Ue.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),Ue.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new QY({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Ti.ui(ro.ui.popover,"Filter"),nothingFound:Ti.ui(ro.ui.popover,"Nothing found")}}),this.toolboxInstance.on(cm.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(cm.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(cm.BlockAdded,({block:e})=>{const{BlockManager:n,Caret:r}=this.Editor,i=n.getBlockById(e.id);i.inputs.length===0&&(i===n.lastBlock?(n.insertAtEnd(),r.setToBlock(n.lastBlock)):r.setToBlock(n.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var n;e.stopPropagation(),this.settingsTogglerClicked(),(n=this.toolboxInstance)!=null&&n.opened&&this.toolboxInstance.close(),om(!0)},!0),mu()||this.eventsDispatcher.on(PA,e=>{var n;this.Editor.BlockSettings.opened||(n=this.toolboxInstance)!=null&&n.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}};var sc=(t=>(t[t.Block=0]="Block",t[t.Inline=1]="Inline",t[t.Tune=2]="Tune",t))(sc||{}),um=(t=>(t.Shortcut="shortcut",t.Toolbox="toolbox",t.EnabledInlineTools="inlineToolbar",t.EnabledBlockTunes="tunes",t.Config="config",t))(um||{}),LA=(t=>(t.Shortcut="shortcut",t.SanitizeConfig="sanitize",t))(LA||{}),yu=(t=>(t.IsEnabledLineBreaks="enableLineBreaks",t.Toolbox="toolbox",t.ConversionConfig="conversionConfig",t.IsReadOnlySupported="isReadOnlySupported",t.PasteConfig="pasteConfig",t))(yu||{}),x1=(t=>(t.IsInline="isInline",t.Title="title",t))(x1||{}),C1=(t=>(t.IsTune="isTune",t))(C1||{});let S1=class{constructor({name:e,constructable:n,config:r,api:i,isDefault:o,isInternal:a=!1,defaultPlaceholder:s}){this.api=i,this.name=e,this.constructable=n,this.config=r,this.isDefault=o,this.isInternal=a,this.defaultPlaceholder=s}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(Vn(this.constructable.reset))return this.constructable.reset()}prepare(){if(Vn(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===sc.Inline}isBlock(){return this.type===sc.Block}isTune(){return this.type===sc.Tune}};class eG extends Vt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=mu()?20:6,this.toolsInstances=new Map}toggleReadOnly(e){e?this.destroy():window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,n;this.opened&&(this.Editor.ReadOnly.isEnabled||(Array.from(this.toolsInstances.entries()).forEach(([r,i])=>{const o=this.getToolShortcut(r);o&&vu.remove(this.Editor.UI.nodes.redactor,o),Vn(i.clear)&&i.clear()}),this.toolsInstances=null,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(n=this.popover)==null||n.destroy(),this.popover=null))}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=Ue.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),Ue.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy();const n=await this.getInlineTools();this.popover=new zY({items:n,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ti.ui(ro.ui.popover,"Nothing found"),search:Ti.ui(ro.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const n=Pt.rect,r=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),i={x:n.x-r.x,y:n.y+n.height-r.top+this.toolbarVerticalMargin};i.x+e+r.x>this.Editor.UI.contentRect.right&&(i.x=this.Editor.UI.contentRect.right-e-r.x),this.nodes.wrapper.style.left=Math.floor(i.x)+"px",this.nodes.wrapper.style.top=Math.floor(i.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],n=Pt.get(),r=Pt.text;if(!n||!n.anchorNode||n.isCollapsed||r.length<1)return!1;const i=Ue.isElement(n.anchorNode)?n.anchorNode:n.anchorNode.parentElement;if(i===null||n&&e.includes(i.tagName)||i.closest('[contenteditable="true"]')===null)return!1;const o=this.Editor.BlockManager.getBlock(n.anchorNode);return o?o.tool.inlineTools.size!==0:!1}async getInlineTools(){const e=Pt.get(),n=this.Editor.BlockManager.getBlock(e.anchorNode),r=Array.from(n.tool.inlineTools.values()),i=[];this.toolsInstances===null&&(this.toolsInstances=new Map);for(let o=0;o<r.length;o++){const a=r[o],s=a.create(),c=await s.render();this.toolsInstances.set(a.name,s);const l=this.getToolShortcut(a.name);if(l)try{this.enableShortcuts(a.name,l)}catch{}const d=l!==void 0?i1(l):void 0,f=Ti.t(ro.toolNames,a.title||rm(a.name));[c].flat().forEach(b=>{var x,k;const E={name:a.name,onActivate:()=>{this.toolClicked(s)},hint:{title:f,description:d}};if(Ue.isElement(b)){const m={...E,element:b,type:$n.Html};if(Vn(s.renderActions)){const h=s.renderActions();m.children={isOpen:(x=s.checkState)==null?void 0:x.call(s,Pt.get()),isFlippable:!1,items:[{type:$n.Html,element:h}]}}else(k=s.checkState)==null||k.call(s,Pt.get());i.push(m)}else if(b.type===$n.Html)i.push({...E,...b,type:$n.Html});else if(b.type===$n.Separator)i.push({type:$n.Separator});else{const m={...E,...b,type:$n.Default};"children"in m&&o!==0&&i.push({type:$n.Separator}),i.push(m),"children"in m&&o<r.length-1&&i.push({type:$n.Separator})}})}return i}getToolShortcut(e){const{Tools:n}=this.Editor,r=n.inlineTools.get(e),i=n.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][LA.Shortcut]:r==null?void 0:r.shortcut}enableShortcuts(e,n){vu.add({name:n,handler:r=>{var i;const{currentBlock:o}=this.Editor.BlockManager;o&&o.tool.enabledInlineTools&&(r.preventDefault(),(i=this.popover)==null||i.activateItemByName(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){var n;const r=Pt.range;(n=e.surround)==null||n.call(e,r),this.checkToolsState()}checkToolsState(){var e;(e=this.toolsInstances)==null||e.forEach(n=>{var r;(r=n.checkState)==null||r.call(n,Pt.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([n,r])=>{e[n]=r.create()}),e}}function RA(){const t=window.getSelection();if(t===null)return[null,0];let e=t.focusNode,n=t.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[n]?(e=e.childNodes[n],n=0):(e=e.childNodes[n-1],n=e.textContent.length)),[e,n])}function BA(t,e,n,r){const i=document.createRange();r==="left"?(i.setStart(t,0),i.setEnd(e,n)):(i.setStart(e,n),i.setEnd(t,t.childNodes.length));const o=i.cloneContents(),a=document.createElement("div");a.appendChild(o);const s=a.textContent||"";return LW(s)}function dm(t){const e=Ue.getDeepestNode(t);if(e===null||Ue.isEmpty(t))return!0;if(Ue.isNativeInput(e))return e.selectionEnd===0;if(Ue.isEmpty(t))return!0;const[n,r]=RA();return n===null?!1:BA(t,n,r,"left")}function fm(t){const e=Ue.getDeepestNode(t,!0);if(e===null)return!0;if(Ue.isNativeInput(e))return e.selectionEnd===e.value.length;const[n,r]=RA();return n===null?!1:BA(t,n,r,"right")}let tG=class extends Vt{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case zt.BACKSPACE:this.backspace(e);break;case zt.DELETE:this.delete(e);break;case zt.ENTER:this.enter(e);break;case zt.DOWN:case zt.RIGHT:this.arrowRightAndDown(e);break;case zt.UP:case zt.LEFT:this.arrowLeftAndUp(e);break;case zt.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&rA(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!0}dragLeave(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!1}handleCommandC(e){const{BlockSelection:n}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:n,BlockManager:r,Caret:i}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e).then(()=>{const o=r.removeSelectedBlocks(),a=r.insertDefaultBlockAtIndex(o,!0);i.setToBlock(a,i.positions.START),n.clearSelection(e)})}tabPressed(e){const{InlineToolbar:n,Caret:r}=this.Editor;n.opened||(e.shiftKey?r.navigatePrevious(!0):r.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){this.Editor.BlockManager.currentBlock.isEmpty&&(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:n,UI:r}=this.Editor,i=n.currentBlock;if(i===void 0||i.tool.isLineBreaksEnabled||r.someToolbarOpened&&r.someFlipperButtonFocused||e.shiftKey&&!a1)return;let o=i;i.currentInput!==void 0&&dm(i.currentInput)&&!i.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):i.currentInput&&fm(i.currentInput)?o=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):o=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o),e.preventDefault()}backspace(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:i,previousBlock:o}=n;if(!(i===void 0||!Pt.isCollapsed||!i.currentInput||!dm(i.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.firstInput){r.navigatePrevious();return}if(o!==null){if(o.isEmpty){n.removeBlock(o);return}if(i.isEmpty){n.removeBlock(i);const a=n.currentBlock;r.setToBlock(a,r.positions.END);return}gA(o,i)?this.mergeBlocks(o,i):r.setToBlock(o,r.positions.END)}}}delete(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:i,nextBlock:o}=n;if(!(!Pt.isCollapsed||!fm(i.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.lastInput){r.navigateNext();return}if(o!==null){if(o.isEmpty){n.removeBlock(o);return}if(i.isEmpty){n.removeBlock(i),r.setToBlock(o,r.positions.START);return}gA(i,o)?this.mergeBlocks(i,o):r.setToBlock(o,r.positions.START)}}}mergeBlocks(e,n){const{BlockManager:r,Caret:i,Toolbar:o}=this.Editor;i.createShadow(e.lastInput),r.mergeBlocks(e,n).then(()=>{i.restoreCaret(e.pluginsContent),o.close()})}arrowRightAndDown(e){const n=sm.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===zt.TAB);if(this.Editor.UI.someToolbarOpened&&n)return;this.Editor.Toolbar.close();const{currentBlock:r}=this.Editor.BlockManager,i=((r==null?void 0:r.currentInput)!==void 0?fm(r.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===zt.DOWN&&i){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===zt.DOWN||e.keyCode===zt.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}nm(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(sm.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===zt.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:n}=this.Editor.BlockManager,r=((n==null?void 0:n.currentInput)!==void 0?dm(n.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===zt.UP&&r){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===zt.UP||e.keyCode===zt.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}nm(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const n=e.keyCode===zt.ENTER&&this.Editor.Toolbar.toolbox.opened,r=e.keyCode===zt.ENTER&&this.Editor.BlockSettings.opened,i=e.keyCode===zt.ENTER&&this.Editor.InlineToolbar.opened,o=e.keyCode===zt.TAB;return!(e.shiftKey||o||n||r||i)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}},k1=class{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return iA(this.workingArea.children)}static set(e,n,r){return isNaN(Number(n))?(Reflect.set(e,n,r),!0):(e.insert(+n,r),!0)}static get(e,n){return isNaN(Number(n))?Reflect.get(e,n):e.get(+n)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,n){const r=this.blocks[n];Ue.swap(this.blocks[e].holder,r.holder),this.blocks[n]=this.blocks[e],this.blocks[e]=r}move(e,n){const r=this.blocks.splice(n,1)[0],i=e-1,o=Math.max(0,i),a=this.blocks[o];e>0?this.insertToDOM(r,"afterend",a):this.insertToDOM(r,"beforebegin",a),this.blocks.splice(e,0,r);const s=this.composeBlockEvent("move",{fromIndex:n,toIndex:e});r.call(cs.MOVED,s)}insert(e,n,r=!1){if(!this.length){this.push(n);return}e>this.length&&(e=this.length),r&&(this.blocks[e].holder.remove(),this.blocks[e].call(cs.REMOVED));const i=r?1:0;if(this.blocks.splice(e,i,n),e>0){const o=this.blocks[e-1];this.insertToDOM(n,"afterend",o)}else{const o=this.blocks[e+1];o?this.insertToDOM(n,"beforebegin",o):this.insertToDOM(n)}}replace(e,n){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(n.holder),this.blocks[e]=n}insertMany(e,n){const r=new DocumentFragment;for(const i of e)r.appendChild(i.holder);if(this.length>0){if(n>0){const i=Math.min(n-1,this.length-1);this.blocks[i].holder.after(r)}else n===0&&this.workingArea.prepend(r);this.blocks.splice(n,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(r);e.forEach(i=>i.call(cs.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(cs.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(cs.REMOVED)),this.blocks.length=0}insertAfter(e,n){const r=this.blocks.indexOf(e);this.insert(r+1,n)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,n,r){n?r.holder.insertAdjacentElement(n,e.holder):this.workingArea.appendChild(e.holder),e.call(cs.RENDERED)}composeBlockEvent(e,n){return new CustomEvent(e,{detail:n})}};const jA="block-removed",FA="block-added",nG="block-moved",HA="block-changed";let rG=class{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}},iG=class extends Vt{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new k1(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:k1.set,get:k1.get}),this.listeners.on(document,"copy",n=>this.Editor.BlockEvents.handleCommandC(n))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:n={},id:r=void 0,tunes:i={}}){const o=this.Editor.ReadOnly.isEnabled,a=this.Editor.Tools.blockTools.get(e),s=new us({id:r,data:n,tool:a,api:this.Editor.API,readOnly:o,tunesData:i},this.eventsDispatcher);return o||window.requestIdleCallback(()=>{this.bindBlockEvents(s)},{timeout:2e3}),s}insert({id:e=void 0,tool:n=this.config.defaultBlock,data:r={},index:i,needToFocus:o=!0,replace:a=!1,tunes:s={}}={}){let c=i;c===void 0&&(c=this.currentBlockIndex+(a?0:1));const l=this.composeBlock({id:e,tool:n,data:r,tunes:s});return a&&this.blockDidMutated(jA,this.getBlockByIndex(c),{index:c}),this._blocks.insert(c,l,a),this.blockDidMutated(FA,l,{index:c}),o?this.currentBlockIndex=c:c<=this.currentBlockIndex&&this.currentBlockIndex++,l}insertMany(e,n=0){this._blocks.insertMany(e,n)}async update(e,n,r){if(!n&&!r)return e;const i=await e.data,o=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},i,n??{}),tunes:r??e.tunes}),a=this.getBlockIndex(e);return this._blocks.replace(a,o),this.blockDidMutated(HA,o,{index:a}),o}replace(e,n,r){const i=this.getBlockIndex(e);return this.insert({tool:n,data:r,index:i,replace:!0})}paste(e,n,r=!1){const i=this.insert({tool:e,replace:r});try{window.requestIdleCallback(()=>{i.call(cs.ON_PASTE,n)})}catch(o){pn(`${e}: onPaste callback call is failed`,"error",o)}return i}insertDefaultBlockAtIndex(e,n=!1){const r=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=r,this.blockDidMutated(FA,r,{index:e}),n?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,r}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,n){let r;if(e.name===n.name&&e.mergeable){const i=await n.data;if(ko(i)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[o]=c1([i],e.tool.sanitizeConfig);r=o}else if(e.mergeable&&im(n,"export")&&im(e,"import")){const i=await n.exportDataAsString(),o=Oa(i,e.tool.sanitizeConfig);r=vA(o,e.tool.conversionConfig)}r!==void 0&&(await e.mergeWith(r),this.removeBlock(n),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,n=!0){return new Promise(r=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(i),this.blockDidMutated(jA,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?i===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),n&&this.insert()),r()})}removeSelectedBlocks(){let e;for(let n=this.blocks.length-1;n>=0;n--)this.blocks[n].selected&&(this.removeBlock(this.blocks[n]),e=n);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),n=Ue.make("div");n.appendChild(e);const r={text:Ue.isEmpty(n)?"":n.innerHTML};return this.insert({data:r})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(n=>n.id===e)}getBlock(e){Ue.isElement(e)||(e=e.parentNode);const n=this._blocks.nodes,r=e.closest(`.${us.CSS.wrapper}`),i=n.indexOf(r);if(i>=0)return this._blocks[i]}setCurrentBlockByChildNode(e){Ue.isElement(e)||(e=e.parentNode);const n=e.closest(`.${us.CSS.wrapper}`);if(!n)return;const r=n.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(r!=null&&r.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(n),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;Ue.isElement(e)||(e=e.parentNode);const n=e.closest(`.${us.CSS.wrapper}`);return this.blocks.find(r=>r.holder===n)}swap(e,n){this._blocks.swap(e,n),this.currentBlockIndex=n}move(e,n=this.currentBlockIndex){if(isNaN(e)||isNaN(n)){pn("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(n)){pn("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,n),this.currentBlockIndex=e,this.blockDidMutated(nG,this.currentBlock,{fromIndex:n,toIndex:e})}async convert(e,n,r){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const i=this.Editor.Tools.blockTools.get(n);if(!i)throw new Error(`Could not convert Block. Tool ${n} not found.`);const o=await e.exportDataAsString(),a=Oa(o,i.sanitizeConfig);let s=vA(a,i.conversionConfig);return r&&(s=Object.assign(s,r)),this.replace(e,i.name,s)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const n=new rG;this.blocks.forEach(r=>{n.add(async()=>{await this.removeBlock(r,!1)})}),await n.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:n}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",r=>{n.keydown(r)}),this.readOnlyMutableListeners.on(e.holder,"keyup",r=>{n.keyup(r)}),this.readOnlyMutableListeners.on(e.holder,"dragover",r=>{n.dragOver(r)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",r=>{n.dragLeave(r)}),e.on("didMutated",r=>this.blockDidMutated(HA,r,{index:this.getBlockIndex(r)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,n,r){const i=new CustomEvent(e,{detail:{target:new ls(n),...r}});return this.eventsDispatcher.emit(dA,{event:i}),n}},oG=class extends Vt{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(n=>n.selected===!0)}set allBlocksSelected(e){const{BlockManager:n}=this.Editor;n.blocks.forEach(r=>{r.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(n=>n.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new Pt,vu.add({name:"CMD+A",handler:e=>{const{BlockManager:n,ReadOnly:r}=this.Editor;if(r.isEnabled){e.preventDefault(),this.selectAllBlocks();return}n.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){Pt.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:n}=this.Editor;let r;isNaN(e)?r=n.currentBlock:r=n.getBlockByIndex(e),r.selected=!1,this.clearCache()}clearSelection(e,n=!1){const{BlockManager:r,Caret:i,RectangleSelection:o}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const a=e&&e instanceof KeyboardEvent,s=a&&rA(e.keyCode);if(this.anyBlockSelected&&a&&s&&!Pt.isSelectionExists){const c=r.removeSelectedBlocks();r.insertDefaultBlockAtIndex(c,!0),i.setToBlock(r.currentBlock),nm(()=>{const l=e.key;i.insertContentAtCaretPosition(l.length>1?"":l)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||o.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}n&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const n=Ue.make("div");this.selectedBlocks.forEach(o=>{const a=Oa(o.holder.innerHTML,this.sanitizerConfig),s=Ue.make("p");s.innerHTML=a,n.appendChild(s)});const r=Array.from(n.childNodes).map(o=>o.textContent).join(`

`),i=n.innerHTML;return e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map(o=>o.save())).then(o=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(o))}catch{}})}selectBlockByIndex(e){const{BlockManager:n}=this.Editor,r=n.getBlockByIndex(e);r!==void 0&&this.selectBlock(r)}selectBlock(e){this.selection.save(),Pt.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){vu.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),Ue.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const n=this.Editor.BlockManager.getBlock(e.target),r=n.inputs;if(r.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(r.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(n),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),Pt.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},aG=class HE extends Vt{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,n=this.positions.DEFAULT,r=0){var i;const{BlockManager:o,BlockSelection:a}=this.Editor;if(a.clearSelection(),!e.focusable){(i=window.getSelection())==null||i.removeAllRanges(),a.selectBlock(e),o.currentBlock=e;return}let s;switch(n){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const c=Ue.getDeepestNode(s,n===this.positions.END),l=Ue.getContentLength(c);switch(!0){case n===this.positions.START:r=0;break;case n===this.positions.END:case r>l:r=l;break}this.set(c,r),o.setCurrentBlockByChildNode(e.holder),o.currentBlock.currentInput=s}setToInput(e,n=this.positions.DEFAULT,r=0){const{currentBlock:i}=this.Editor.BlockManager,o=Ue.getDeepestNode(e);switch(n){case this.positions.START:this.set(o,0);break;case this.positions.END:this.set(o,Ue.getContentLength(o));break;default:r&&this.set(o,r)}i.currentInput=e}set(e,n=0){const{top:r,bottom:i}=Pt.setCursor(e,n),{innerHeight:o}=window;r<0?window.scrollBy(0,r-30):i>o&&window.scrollBy(0,i-o+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const n=this.Editor.BlockManager.insertAtEnd();this.setToBlock(n)}}extractFragmentFromCaretPosition(){const e=Pt.get();if(e.rangeCount){const n=e.getRangeAt(0),r=this.Editor.BlockManager.currentBlock.currentInput;if(n.deleteContents(),r)if(Ue.isNativeInput(r)){const i=r,o=document.createDocumentFragment(),a=i.value.substring(0,i.selectionStart),s=i.value.substring(i.selectionStart);return o.textContent=s,i.value=a,o}else{const i=n.cloneRange();return i.selectNodeContents(r),i.setStart(n.endContainer,n.endOffset),i.extractContents()}}}navigateNext(e=!1){const{BlockManager:n}=this.Editor,{currentBlock:r,nextBlock:i}=n;if(r===void 0)return!1;const{nextInput:o,currentInput:a}=r,s=a!==void 0?fm(a):void 0;let c=i;const l=e||s||!r.focusable;if(o&&l)return this.setToInput(o,this.positions.START),!0;if(c===null){if(r.tool.isDefault||!l)return!1;c=n.insertAtEnd()}return l?(this.setToBlock(c,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:n,previousBlock:r}=this.Editor.BlockManager;if(!n)return!1;const{previousInput:i,currentInput:o}=n,a=o!==void 0?dm(o):void 0,s=e||a||!n.focusable;return i&&s?(this.setToInput(i,this.positions.END),!0):r!==null&&s?(this.setToBlock(r,this.positions.END),!0):!1}createShadow(e){const n=document.createElement("span");n.classList.add(HE.CSS.shadowCaret),e.insertAdjacentElement("beforeend",n)}restoreCaret(e){const n=e.querySelector(`.${HE.CSS.shadowCaret}`);if(!n)return;new Pt().expandToTag(n);const r=document.createRange();r.selectNode(n),r.extractContents()}insertContentAtCaretPosition(e){const n=document.createDocumentFragment(),r=document.createElement("div"),i=Pt.get(),o=Pt.range;r.innerHTML=e,Array.from(r.childNodes).forEach(l=>n.appendChild(l)),n.childNodes.length===0&&n.appendChild(new Text);const a=n.lastChild;o.deleteContents(),o.insertNode(n);const s=document.createRange(),c=a.nodeType===Node.TEXT_NODE?a:a.firstChild;c!==null&&c.textContent!==null&&s.setStart(c,c.textContent.length),i.removeAllRanges(),i.addRange(s)}},sG=class extends Vt{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:n,BlockSelection:r}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const i=n.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,o=n.getBlockByChildNode(e.target);if(!(!i||!o)&&o!==i){if(i===this.firstSelectedBlock){Pt.get().removeAllRanges(),i.selected=!0,o.selected=!0,r.clearCache();return}if(o===this.firstSelectedBlock){i.selected=!1,o.selected=!1,r.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,o),this.lastSelectedBlock=o}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==SW.LEFT)return;const{BlockManager:n}=this.Editor;this.firstSelectedBlock=n.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:n,BlockSelection:r}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=n.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,r.clearCache(),Pt.get().removeAllRanges());const i=n.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),o=n.blocks[i];o&&(this.lastSelectedBlock.selected!==o.selected?(o.selected=!0,r.clearCache()):(this.lastSelectedBlock.selected=!1,r.clearCache()),this.lastSelectedBlock=o,this.Editor.InlineToolbar.close(),o.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:n,BlockSelection:r,Caret:i}=this.Editor,o=n.blocks.indexOf(this.firstSelectedBlock),a=n.blocks.indexOf(this.lastSelectedBlock);if(r.anyBlockSelected&&o>-1&&a>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case zt.DOWN:case zt.RIGHT:i.setToBlock(n.blocks[Math.max(o,a)],i.positions.END);break;case zt.UP:case zt.LEFT:i.setToBlock(n.blocks[Math.min(o,a)],i.positions.START);break;default:i.setToBlock(n.blocks[Math.max(o,a)],i.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:n}=this.Editor;Pt.isCollapsed||this.Editor.BlockSelection.clearSelection(e),n.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,n){const{BlockManager:r,BlockSelection:i}=this.Editor,o=r.blocks.indexOf(e),a=r.blocks.indexOf(n),s=e.selected!==n.selected;for(let c=Math.min(o,a);c<=Math.max(o,a);c++){const l=r.blocks[c];l!==this.firstSelectedBlock&&l!==(s?e:n)&&(r.blocks[c].selected=!r.blocks[c].selected,i.clearCache())}}},lG=class extends Vt{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async n=>{await this.processDrop(n)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",n=>{this.processDragOver(n)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:n,Paste:r,Caret:i}=this.Editor;e.preventDefault(),n.blocks.forEach(a=>{a.dropTarget=!1}),Pt.isAtEditor&&!Pt.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const o=n.setCurrentBlockByChildNode(e.target);if(o)this.Editor.Caret.setToBlock(o,i.positions.END);else{const a=n.setCurrentBlockByChildNode(n.lastBlock.holder);this.Editor.Caret.setToBlock(a,i.positions.END)}await r.processDataTransfer(e.dataTransfer,!0)}processDragStart(){Pt.isAtEditor&&!Pt.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}};const cG=180,uG=400;let dG=class extends Vt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=uG,this.mutationObserver=new MutationObserver(r=>{this.redactorChanged(r)}),this.eventsDispatcher.on(dA,r=>{this.particularBlockChanged(r.event)}),this.eventsDispatcher.on(fA,()=>{this.disable()}),this.eventsDispatcher.on(hA,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!Vn(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let n;this.batchingOnChangeQueue.size===1?n=this.batchingOnChangeQueue.values().next().value:n=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,n),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(s1,{mutations:e})}};const zA=class aH extends Vt{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const n=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!Vn(n.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(n){pn(`Paste handling for ${e.name} Tool hasn't been set up because of the error`,"warn",n)}},this.handlePasteEvent=async e=>{const{BlockManager:n,Toolbar:r}=this.Editor,i=n.setCurrentBlockByChildNode(e.target);!i||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||i&&this.exceptionList.includes(i.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),r.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,n=!1){const{Tools:r}=this.Editor,i=e.types;if((i.includes?i.includes("Files"):i.contains("Files"))&&!ko(this.toolsFiles)){await this.processFiles(e.files);return}const o=e.getData(this.MIME_TYPE),a=e.getData("text/plain");let s=e.getData("text/html");if(o)try{this.insertEditorJSData(JSON.parse(o));return}catch{}n&&a.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:a)+"</p>");const c=Object.keys(this.toolsTags).reduce((f,b)=>(f[b.toLowerCase()]=this.toolsTags[b].sanitizationConfig??{},f),{}),l=Object.assign({},c,r.getAllInlineToolsSanitizeConfig(),{br:{}}),d=Oa(s,l);!d.trim()||d.trim()===a||!Ue.isHTMLString(d)?await this.processText(a):await this.processText(d,!0)}async processText(e,n=!1){const{Caret:r,BlockManager:i}=this.Editor,o=n?this.processHTML(e):this.processPlain(e);if(!o.length)return;if(o.length===1){o[0].isBlock?this.processSingleBlock(o.pop()):this.processInlinePaste(o.pop());return}const a=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty;o.map(async(s,c)=>this.insertBlock(s,c===0&&a)),i.currentBlock&&r.setToBlock(i.currentBlock,r.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return ss(e)?[e]:Jr(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const n=e.pasteConfig.tags||[],r=[];n.forEach(i=>{const o=this.collectTagNames(i);r.push(...o),o.forEach(a=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,a)){pn(`Paste handler for ${e.name} Tool on ${a} tag is skipped because it is already used by ${this.toolsTags[a].tool.name} Tool.`,"warn");return}const s=Jr(i)?i[a]:null;this.toolsTags[a.toUpperCase()]={tool:e,sanitizationConfig:s}})}),this.tagsByTool[e.name]=r.map(i=>i.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:n={}}=e.pasteConfig;let{extensions:r,mimeTypes:i}=n;!r&&!i||(r&&!Array.isArray(r)&&(pn(`extensions property of the onDrop config for ${e.name} Tool should be an array`),r=[]),i&&!Array.isArray(i)&&(pn(`mimeTypes property of the onDrop config for ${e.name} Tool should be an array`),i=[]),i&&(i=i.filter(o=>IW(o)?!0:(pn(`MIME type value ${o} for the ${e.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:r||[],mimeTypes:i||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||ko(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([n,r])=>{r instanceof RegExp||pn(`Pattern ${r} for ${e.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:n,pattern:r,tool:e})})}isNativeBehaviour(e){return Ue.isNativeInput(e)}async processFiles(e){const{BlockManager:n}=this.Editor;let r;r=await Promise.all(Array.from(e).map(o=>this.processFile(o))),r=r.filter(o=>!!o);const i=n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty;r.forEach((o,a)=>{n.paste(o.type,o.event,a===0&&i)})}async processFile(e){const n=MW(e),r=Object.entries(this.toolsFiles).find(([o,{mimeTypes:a,extensions:s}])=>{const[c,l]=e.type.split("/"),d=s.find(b=>b.toLowerCase()===n.toLowerCase()),f=a.find(b=>{const[x,k]=b.split("/");return x===c&&(k===l||k==="*")});return!!d||!!f});if(!r)return;const[i]=r;return{event:this.composePasteEvent("file",{file:e}),type:i}}processHTML(e){const{Tools:n}=this.Editor,r=Ue.make("DIV");return r.innerHTML=e,this.getNodes(r).map(i=>{let o,a=n.defaultTool,s=!1;switch(i.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:o=Ue.make("div"),o.appendChild(i);break;case Node.ELEMENT_NODE:o=i,s=!0,this.toolsTags[o.tagName]&&(a=this.toolsTags[o.tagName].tool);break}const{tags:c}=a.pasteConfig||{tags:[]},l=c.reduce((b,x)=>(this.collectTagNames(x).forEach(k=>{const E=Jr(x)?x[k]:null;b[k.toLowerCase()]=E||{}}),b),{}),d=Object.assign({},l,a.baseSanitizeConfig);if(o.tagName.toLowerCase()==="table"){const b=Oa(o.outerHTML,d);o=Ue.make("div",void 0,{innerHTML:b}).firstChild}else o.innerHTML=Oa(o.innerHTML,d);const f=this.composePasteEvent("tag",{data:o});return{content:o,isBlock:s,tool:a.name,event:f}}).filter(i=>{const o=Ue.isEmpty(i.content),a=Ue.isSingleTag(i.content);return!o||a})}processPlain(e){const{defaultBlock:n}=this.config;if(!e)return[];const r=n;return e.split(/\r?\n/).filter(i=>i.trim()).map(i=>{const o=Ue.make("div");o.textContent=i;const a=this.composePasteEvent("tag",{data:o});return{content:o,tool:r,isBlock:!1,event:a}})}async processSingleBlock(e){const{Caret:n,BlockManager:r}=this.Editor,{currentBlock:i}=r;if(!i||e.tool!==i.name||!Ue.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,(i==null?void 0:i.tool.isDefault)&&i.isEmpty);return}n.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:n,Caret:r}=this.Editor,{content:i}=e;if(n.currentBlock&&n.currentBlock.tool.isDefault&&i.textContent.length<aH.PATTERN_PROCESSING_MAX_LENGTH){const o=await this.processPattern(i.textContent);if(o){const a=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty,s=n.paste(o.tool,o.event,a);r.setToBlock(s,r.positions.END);return}}if(n.currentBlock&&n.currentBlock.currentInput){const o=n.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Oa(i.innerHTML,o))}else this.insertBlock(e)}async processPattern(e){const n=this.toolsPatterns.find(r=>{const i=r.pattern.exec(e);return i?e===i.shift():!1});return n?{event:this.composePasteEvent("pattern",{key:n.key,data:e}),tool:n.tool.name}:void 0}insertBlock(e,n=!1){const{BlockManager:r,Caret:i}=this.Editor,{currentBlock:o}=r;let a;if(n&&o&&o.isEmpty){a=r.paste(e.tool,e.event,!0),i.setToBlock(a,i.positions.END);return}a=r.paste(e.tool,e.event),i.setToBlock(a,i.positions.END)}insertEditorJSData(e){const{BlockManager:n,Caret:r,Tools:i}=this.Editor;c1(e,o=>i.blockTools.get(o).sanitizeConfig).forEach(({tool:o,data:a},s)=>{let c=!1;s===0&&(c=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty);const l=n.insert({tool:o,data:a,replace:c});r.setToBlock(l,r.positions.END)})}processElementNode(e,n,r){const i=Object.keys(this.toolsTags),o=e,{tool:a}=this.toolsTags[o.tagName]||{},s=this.tagsByTool[a==null?void 0:a.name]||[],c=i.includes(o.tagName),l=Ue.blockElements.includes(o.tagName.toLowerCase()),d=Array.from(o.children).some(({tagName:b})=>i.includes(b)&&!s.includes(b)),f=Array.from(o.children).some(({tagName:b})=>Ue.blockElements.includes(b.toLowerCase()));if(!l&&!c&&!d)return r.appendChild(o),[...n,r];if(c&&!d||l&&!f&&!d)return[...n,r,o]}getNodes(e){const n=Array.from(e.childNodes);let r;const i=(o,a)=>{if(Ue.isEmpty(a)&&!Ue.isSingleTag(a))return o;const s=o[o.length-1];let c=new DocumentFragment;switch(s&&Ue.isFragment(s)&&(c=o.pop()),a.nodeType){case Node.ELEMENT_NODE:if(r=this.processElementNode(a,o,c),r)return r;break;case Node.TEXT_NODE:return c.appendChild(a),[...o,c];default:return[...o,c]}return[...o,...Array.from(a.childNodes).reduce(i,[])]};return n.reduce(i,[])}composePasteEvent(e,n){return new CustomEvent(e,{detail:n})}};zA.PATTERN_PROCESSING_MAX_LENGTH=450;let fG=zA,hG=class extends Vt{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:n}=e,r=[];Array.from(n.entries()).forEach(([i,o])=>{o.isReadOnlySupported||r.push(i)}),this.toolsDontSupportReadOnly=r,this.config.readOnly&&r.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,n=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const r=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const o in this.Editor)this.Editor[o].toggleReadOnly&&this.Editor[o].toggleReadOnly(e);if(r===e)return this.readOnlyEnabled;if(n)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const i=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(i.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new uA(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}},pG=class bb extends Vt{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,n){const r=document.elementFromPoint(e-window.pageXOffset,n-window.pageYOffset);r.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const i=[`.${us.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],o=r.closest("."+this.Editor.UI.CSS.editorWrapper),a=i.some(s=>!!r.closest(s));!o||a||(this.mousedown=!0,this.startX=e,this.startY=n)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",n=>{this.processMouseDown(n)},!1),this.listeners.on(document.body,"mousemove",n1(n=>{this.processMouseMove(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",n1(n=>{this.processScroll(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(Ue.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,n=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),r=Ue.make("div",bb.CSS.overlay,{}),i=Ue.make("div",bb.CSS.overlayContainer,{}),o=Ue.make("div",bb.CSS.rect,{});return i.appendChild(o),r.appendChild(i),n.appendChild(r),this.overlayRectangle=o,{container:n,overlay:r}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const n=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-n,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:n,leftPos:r,index:i}=this.genInfoForMouseSelection(),o=this.startX>n&&this.mouseX>n,a=this.startX<r&&this.mouseX<r;this.rectCrossesBlocks=!(o||a),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),i!==void 0&&(this.trySelectNextBlock(i),this.inverseSelection(),Pt.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(n);if(!this.rectCrossesBlocks&&e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(n)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,n=this.mouseY-window.pageYOffset,r=document.elementFromPoint(e,n),i=this.Editor.BlockManager.getBlockByChildNode(r);let o;i!==void 0&&(o=this.Editor.BlockManager.blocks.findIndex(d=>d.holder===i.holder));const a=this.Editor.BlockManager.lastBlock.holder.querySelector("."+us.CSS.content),s=Number.parseInt(window.getComputedStyle(a).width,10)/2,c=e-s,l=e+s;return{index:o,leftPos:c,rightPos:l}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const n=this.stackOfSelected[this.stackOfSelected.length-1]===e,r=this.stackOfSelected.length,i=1,o=-1,a=0;if(n)return;const s=this.stackOfSelected[r-1]-this.stackOfSelected[r-2]>0;let c=a;r>1&&(c=s?i:o);const l=e>this.stackOfSelected[r-1]&&c===i,d=e<this.stackOfSelected[r-1]&&c===o,f=!(l||d||c===a);if(!f&&(e>this.stackOfSelected[r-1]||this.stackOfSelected[r-1]===void 0)){let k=this.stackOfSelected[r-1]+1||e;for(k;k<=e;k++)this.addBlockInSelection(k);return}if(!f&&e<this.stackOfSelected[r-1]){for(let k=this.stackOfSelected[r-1]-1;k>=e;k--)this.addBlockInSelection(k);return}if(!f)return;let b=r-1,x;for(e>this.stackOfSelected[r-1]?x=()=>e>this.stackOfSelected[b]:x=()=>e<this.stackOfSelected[b];x();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[b]),this.stackOfSelected.pop(),b--}},mG=class extends Vt{async render(e){return new Promise(n=>{const{Tools:r,BlockManager:i}=this.Editor;if(e.length===0)i.insert();else{const o=e.map(({type:a,data:s,tunes:c,id:l})=>{r.available.has(a)===!1&&(So(`Tool ${a} is not found. Check 'tools' property at the Editor.js config.`,"warn"),s=this.composeStubDataForTool(a,s,l),a=r.stubTool);let d;try{d=i.composeBlock({id:l,tool:a,data:s,tunes:c})}catch(f){pn(`Block ${a} skipped because of plugins error`,"error",{data:s,error:f}),s=this.composeStubDataForTool(a,s,l),a=r.stubTool,d=i.composeBlock({id:l,tool:a,data:s,tunes:c})}return d});i.insertMany(o)}window.requestIdleCallback(()=>{n()},{timeout:2e3})})}composeStubDataForTool(e,n,r){const{Tools:i}=this.Editor;let o=e;if(i.unavailable.has(e)){const a=i.unavailable.get(e).toolbox;a!==void 0&&a[0].title!==void 0&&(o=a[0].title)}return{savedData:{id:r,type:e,data:n},title:o}}},gG=class extends Vt{async save(){const{BlockManager:e,Tools:n}=this.Editor,r=e.blocks,i=[];try{r.forEach(s=>{i.push(this.getSavedData(s))});const o=await Promise.all(i),a=await c1(o,s=>n.blockTools.get(s).sanitizeConfig);return this.makeOutput(a)}catch(o){So("Saving failed due to the Error %o","error",o)}}async getSavedData(e){const n=await e.save(),r=n&&await e.validate(n.data);return{...n,isValid:r}}makeOutput(e){const n=[];return e.forEach(({id:r,tool:i,data:o,tunes:a,isValid:s})=>{if(!s){pn(`Block ${i} skipped because saved data is invalid`);return}if(i===this.Editor.Tools.stubTool){n.push(o);return}const c={id:r,type:i,data:o,...!ko(a)&&{tunes:a}};n.push(c)}),{time:+new Date,blocks:n,version:"2.30.7"}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const vG='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function yG(t){const e=document.createElement("div");e.innerHTML=t.trim();const n=document.createDocumentFragment();return n.append(...Array.from(e.childNodes)),n}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */let bG=class sH{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:n,api:r,readOnly:i}){this.api=r,this.readOnly=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=n.placeholder?n.placeholder:sH.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=n.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:n}=this._element;n===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const n=yG(e.text);this._element.appendChild(n),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const n={text:e.detail.data.innerHTML};this._data=n,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:vG,title:"Text"}}},E1=class{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:xY,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}};E1.isInline=!0,E1.title="Bold";let T1=class{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=IY,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}};T1.isInline=!0,T1.title="Italic";let M1=class{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new Pt}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=SA,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const n=this.selection.findParentTag("A");if(n){this.selection.expandToTag(n),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=DY,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const n=e.getAttribute("href");this.nodes.input.value=n!=="null"?n:"",this.selection.save()}else this.nodes.button.innerHTML=SA,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const n=new Pt;n.save(),this.selection.restore(),this.selection.removeFakeBackground(),n.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let n=this.nodes.input.value||"";if(!n.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(n)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),pn("Incorrect Link pasted","warn",n);return}n=this.prepareLink(n),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(n),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const n=/^\/[^/\s]/.test(e),r=e.substring(0,1)==="#",i=/^\/\/[^/\s]/.test(e);return!n&&!r&&!i&&(e="http://"+e),e}insertLink(e){const n=this.selection.findParentTag("A");n&&this.selection.expandToTag(n),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}};M1.isInline=!0,M1.title="Link";class $A{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=Pt.get(),n=this.blocksAPI.getBlockByElement(e.anchorNode);if(n===void 0)return[];const r=this.toolsAPI.getBlockTools(),i=await mA(n,r);if(i.length===0)return[];const o=i.reduce((l,d)=>{var f;return(f=d.toolbox)==null||f.forEach(b=>{l.push({icon:b.icon,title:Ti.t(ro.toolNames,b.title),name:d.name,closeOnActivate:!0,onActivate:async()=>{const x=await this.blocksAPI.convert(n.id,d.name,b.data);this.caretAPI.setToBlock(x,"end")}})}),l},[]),a=await n.getActiveToolboxEntry(),s=a!==void 0?a.icon:kA,c=!mu();return{icon:s,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:c,items:o,onOpen:()=>{c&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{c&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}}$A.isInline=!0;class UA{constructor({data:e,api:n}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=n,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=Ue.make("div",this.CSS.wrapper),n=NY,r=Ue.make("div",this.CSS.info),i=Ue.make("div",this.CSS.title,{textContent:this.title}),o=Ue.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=n,r.appendChild(i),r.appendChild(o),e.appendChild(r),e}}UA.isReadOnlySupported=!0;let wG=class extends S1{constructor(){super(...arguments),this.type=sc.Inline}get title(){return this.constructable[x1.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}},xG=class extends S1{constructor(){super(...arguments),this.type=sc.Tune}create(e,n){return new this.constructable({api:this.api,config:this.settings,block:n,data:e})}},_a=class gd extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isBlock());return new gd(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInline());return new gd(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,n])=>n.isTune());return new gd(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInternal);return new gd(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,n])=>!n.isInternal);return new gd(e)}};var CG=Object.defineProperty,SG=Object.getOwnPropertyDescriptor,WA=(t,e,n,r)=>{for(var i=SG(e,n),o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=a(e,n,i)||i);return i&&CG(e,n,i),i};let I1=class extends S1{constructor(){super(...arguments),this.type=sc.Block,this.inlineTools=new _a,this.tunes=new _a}create(e,n,r){return new this.constructable({data:e,block:n,readOnly:r,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[yu.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[yu.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[yu.Toolbox],n=this.config[um.Toolbox];if(!ko(e)&&n!==!1)return n?Array.isArray(e)?Array.isArray(n)?n.map((r,i)=>{const o=e[i];return o?{...o,...r}:r}):[n]:Array.isArray(n)?n:[{...e,...n}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[yu.ConversionConfig]}get enabledInlineTools(){return this.config[um.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[um.EnabledBlockTunes]}get pasteConfig(){return this.constructable[yu.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,n=this.baseSanitizeConfig;if(ko(e))return n;const r={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];Jr(o)?r[i]=Object.assign({},n,o):r[i]=o}return r}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),Array.from(this.tunes.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),e}};WA([pu],I1.prototype,"sanitizeConfig"),WA([pu],I1.prototype,"baseSanitizeConfig");let kG=class{constructor(e,n,r){this.api=r,this.config=e,this.editorConfig=n}get(e){const{class:n,isInternal:r=!1,...i}=this.config[e],o=this.getConstructor(n),a=n[C1.IsTune];return new o({name:e,constructable:n,config:i,api:this.api.getMethodsForTool(e,a),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:r})}getConstructor(e){switch(!0){case e[x1.IsInline]:return wG;case e[C1.IsTune]:return xG;default:return I1}}},YA=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:CY,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e+1);if(!n)throw new Error("Unable to move Block down since it is already the last");const r=n.holder,i=r.getBoundingClientRect();let o=Math.abs(window.innerHeight-r.offsetHeight);i.top<window.innerHeight&&(o=window.scrollY+r.offsetHeight),window.scrollTo(0,o),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};YA.isTune=!0;let GA=class{constructor({api:e}){this.api=e}render(){return{icon:TY,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};GA.isTune=!0;let XA=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:EY,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e),r=this.api.blocks.getBlockByIndex(e-1);if(e===0||!n||!r)throw new Error("Unable to move Block up since it is already the first");const i=n.holder,o=r.holder,a=i.getBoundingClientRect(),s=o.getBoundingClientRect();let c;s.top>0?c=Math.abs(a.top)-Math.abs(s.top):c=Math.abs(a.top)+s.height,window.scrollBy(0,-1*c),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};XA.isTune=!0;var EG=Object.defineProperty,TG=Object.getOwnPropertyDescriptor,MG=(t,e,n,r)=>{for(var i=TG(e,n),o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=a(e,n,i)||i);return i&&EG(e,n,i),i};let KA=class extends Vt{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new _a,this.toolsUnavailable=new _a}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=r1({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new kG(e,this.config,this.Editor.API);const n=this.getListOfPrepareFunctions(e);if(n.length===0)return Promise.resolve();await TW(n,r=>{this.toolPrepareMethodSuccess(r)},r=>{this.toolPrepareMethodFallback(r)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>{Object.assign(e,n.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{Vn(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:$A,isInternal:!0},link:{class:M1,isInternal:!0},bold:{class:E1,isInternal:!0},italic:{class:T1,isInternal:!0},paragraph:{class:bG,inlineToolbar:!0,isInternal:!0},stub:{class:UA,isInternal:!0},moveUp:{class:XA,isInternal:!0},delete:{class:GA,isInternal:!0},moveDown:{class:YA,isInternal:!0}}}toolPrepareMethodSuccess(e){const n=this.factory.get(e.toolName);if(n.isInline()){const r=["render"].filter(i=>!n.create()[i]);if(r.length){pn(`Incorrect Inline Tool: ${n.name}. Some of required methods is not implemented %o`,"warn",r),this.toolsUnavailable.set(n.name,n);return}}this.toolsAvailable.set(n.name,n)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const n=[];return Object.entries(e).forEach(([r,i])=>{n.push({function:Vn(i.class.prepare)?i.class.prepare:()=>{},data:{toolName:r,config:i.config}})}),n}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new _a(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(n=>[n,this.inlineTools.get(n)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new _a(["convertTo",...e.enabledInlineTools].map(n=>[n,this.inlineTools.get(n)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const n=new _a(e.enabledBlockTunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new _a([...n,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const n=new _a(this.config.tunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new _a([...n,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const n=this.config.tools[e];if(!Vn(n)&&!Vn(n.class))throw Error(`Tool ${e} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const e={};for(const n in this.config.tools)Jr(this.config.tools[n])?e[n]=this.config.tools[n]:e[n]={class:this.config.tools[n]};return e}};MG([pu],KA.prototype,"getAllInlineToolsSanitizeConfig");const IG=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`,OG={BlocksAPI:UW,CaretAPI:YW,EventsAPI:GW,I18nAPI:XW,API:KW,InlineToolbarAPI:ZW,ListenersAPI:JW,NotifierAPI:eY,ReadOnlyAPI:tY,SanitizerAPI:lY,SaverAPI:cY,SelectionAPI:uY,ToolsAPI:dY,StylesAPI:fY,ToolbarAPI:hY,TooltipAPI:yY,UiAPI:bY,BlockSettings:YY,Toolbar:qY,InlineToolbar:eG,BlockEvents:tG,BlockManager:iG,BlockSelection:oG,Caret:aG,CrossBlockSelection:sG,DragNDrop:lG,ModificationsObserver:dG,Paste:fG,ReadOnly:hG,RectangleSelection:pG,Renderer:mG,Saver:gG,Tools:KA,UI:class extends Vt{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=oA(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${us.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r}=this.Editor;return!!(n.opened||r.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,n])=>n.flipper instanceof sm).some(([e,n])=>n.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r}=this.Editor;n.close(),r.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<aA;e!==this.isMobile&&this.eventsDispatcher.emit(hf,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=Ue.getHolder(this.config.holder),this.nodes.wrapper=Ue.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=Ue.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(Ue.get(e))return;const n=Ue.make("style",null,{id:e,textContent:IG.toString()});this.config.style&&!ko(this.config.style)&&this.config.style.nonce&&n.setAttribute("nonce",this.config.style.nonce),Ue.prepend(document.head,n)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",n=>{this.redactorClicked(n)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",n=>{this.documentKeydown(n)},!0),this.readOnlyMutableListeners.on(document,"mousedown",n=>{this.documentClicked(n)},!0);const e=oA(()=>{this.selectionChanged()},cG);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",n1(n=>{const r=n.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||r&&e!==r&&(e=r,this.eventsDispatcher.emit(PA,{block:this.Editor.BlockManager.getBlockByChildNode(r)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case zt.ENTER:this.enterPressed(e);break;case zt.BACKSPACE:case zt.DELETE:this.backspacePressed(e);break;case zt.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:n}=this.Editor.BlockManager,r=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(n!==void 0&&r===null){this.Editor.BlockEvents.keydown(e);return}r||n&&i||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:n,BlockSelection:r,Caret:i}=this.Editor;if(r.anyBlockSelected&&!Pt.isSelectionExists){const o=n.removeSelectedBlocks(),a=n.insertDefaultBlockAtIndex(o,!0);i.setToBlock(a,i.positions.START),r.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:n,BlockSelection:r}=this.Editor;if(this.someToolbarOpened)return;const i=n.currentBlockIndex>=0;if(r.anyBlockSelected&&!Pt.isSelectionExists){r.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&i&&e.target.tagName==="BODY"){const o=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var n,r;if(!e.isTrusted)return;const i=e.target;this.nodes.holder.contains(i)||Pt.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const o=(n=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:n.contains(i),a=(r=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:r.contains(i),s=o||a;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const c=this.Editor.BlockManager.getBlockByChildNode(i);this.Editor.Toolbar.moveAndOpen(c)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let n=e.target;if(n===this.nodes.redactor){const r=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;n=document.elementFromPoint(r,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(n)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!Pt.isCollapsed)return;const n=e.target,r=e.metaKey||e.ctrlKey;if(Ue.isAnchor(n)&&r){e.stopImmediatePropagation(),e.stopPropagation();const i=n.getAttribute("href"),o=AW(i);DW(o);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const n=this.Editor.BlockManager.getBlockByIndex(-1),r=Ue.offset(n.holder).bottom,i=e.pageY,{BlockSelection:o}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&r<i){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:a,Caret:s,Toolbar:c}=this.Editor;(!a.lastBlock.tool.isDefault||!a.lastBlock.isEmpty)&&a.insertAtEnd(),s.setToTheLastBlock(),c.moveAndOpen(a.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:n}=this.Editor,r=Pt.anchorElement;if(e.isCrossBlockSelectionStarted&&n.anyBlockSelected&&Pt.get().removeAllRanges(),!r){Pt.range||this.Editor.InlineToolbar.close();return}const i=r.closest(`.${us.CSS.content}`);(i===null||i.closest(`.${Pt.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(r)||this.Editor.InlineToolbar.close(),r.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(r),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(n){const r=n.target;sA(r)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}};let AG=class{constructor(e){this.moduleInstances={},this.eventsDispatcher=new df;let n,r;this.isReady=new Promise((i,o)=>{n=i,r=o}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:i,Caret:o,UI:a,ModificationsObserver:s}=this.moduleInstances;a.checkEmptiness(),s.enable(),this.configuration.autofocus&&o.setToBlock(i.blocks[0],o.positions.START),n()}).catch(i=>{pn(`Editor.js is not ready because of ${i}`,"error"),r(i)})}set configuration(e){var n,r;Jr(e)?this.config={...e}:this.config={holder:e},o1(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=eA.VERBOSE),kW(this.config.logLevel),o1(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const i={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(ko(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[i]}),this.config.readOnly=this.config.readOnly||!1,(n=this.config.i18n)!=null&&n.messages&&Ti.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((r=this.config.i18n)==null?void 0:r.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:n}=this.config;if(e&&n)throw Error("holderId and holder param can't assign at the same time.");if(ss(n)&&!Ue.get(n))throw Error(`element with ID ${n} is missing. Pass correct holder's ID.`);if(n&&Jr(n)&&!Ue.isElement(n))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,n)=>e.then(async()=>{try{await this.moduleInstances[n].prepare()}catch(r){if(r instanceof uA)throw new Error(r.message);pn(`Module ${n} was skipped because of %o`,"warn",r)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(OG).forEach(([e,n])=>{try{this.moduleInstances[e]=new n({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(r){pn("[constructModules]",`Module ${e} skipped because`,"error",r)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const n={};for(const r in this.moduleInstances)r!==e&&(n[r]=this.moduleInstances[r]);return n}};/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */let _G=class{static get version(){return"2.30.7"}constructor(e){let n=()=>{};Jr(e)&&Vn(e.onReady)&&(n=e.onReady);const r=new AG(e);this.isReady=r.isReady.then(()=>{this.exportAPI(r),n()})}exportAPI(e){const n=["configuration"],r=()=>{Object.values(e.moduleInstances).forEach(i=>{Vn(i.destroy)&&i.destroy(),i.listeners.removeAll()}),vY(),e=null;for(const i in this)Object.prototype.hasOwnProperty.call(this,i)&&delete this[i];Object.setPrototypeOf(this,null)};n.forEach(i=>{this[i]=e[i]}),this.destroy=r,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([i,o])=>{Object.entries(o).forEach(([a,s])=>{this[s]=e.moduleInstances.API.methods[i][a]})})}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.embed-tool--loading .embed-tool__caption{display:none}.embed-tool--loading .embed-tool__preloader{display:block}.embed-tool--loading .embed-tool__content{display:none}.embed-tool__preloader{display:none;position:relative;height:200px;box-sizing:border-box;border-radius:5px;border:1px solid #e6e9eb}.embed-tool__preloader:before{content:"";position:absolute;z-index:3;left:50%;top:50%;width:30px;height:30px;margin-top:-25px;margin-left:-15px;border-radius:50%;border:2px solid #cdd1e0;border-top-color:#388ae5;box-sizing:border-box;animation:embed-preloader-spin 2s infinite linear}.embed-tool__url{position:absolute;bottom:20px;left:50%;transform:translate(-50%);max-width:250px;color:#7b7e89;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.embed-tool__content{width:100%}.embed-tool__caption{margin-top:7px}.embed-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:before{opacity:1}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}@keyframes embed-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const DG={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:player.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:320,width:580},youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580,id:([t,e])=>{if(!e&&t)return t;const n={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};let r=e.slice(1).split("&").map(i=>{const[o,a]=i.split("=");return!t&&o==="v"?(t=a,null):!n[o]||a==="LL"||a.startsWith("RDMM")||a.startsWith("FL")?null:`${n[o]}=${a}`}).filter(i=>!!i);return t+"?"+r.join("&")}},coub:{regex:/https?:\/\/coub\.com\/view\/([^\/\?\&]+)/,embedUrl:"https://coub.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},vine:{regex:/https?:\/\/vine\.co\/v\/([^\/\?\&]+)/,embedUrl:"https://vine.co/v/<%= remote_id %>/embed/simple/",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},imgur:{regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},gfycat:{regex:/https?:\/\/gfycat\.com(?:\/detail)?\/([a-zA-Z]+)/,embedUrl:"https://gfycat.com/ifr/<%= remote_id %>",html:`<iframe frameborder='0' scrolling='no' style="width:100%;" height='436' allowfullscreen ></iframe>`,height:436,width:580},"twitch-channel":{regex:/https?:\/\/www\.twitch\.tv\/([^\/\?\&]*)\/?$/,embedUrl:"https://player.twitch.tv/?channel=<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"twitch-video":{regex:/https?:\/\/www\.twitch\.tv\/(?:[^\/\?\&]*\/v|videos)\/([0-9]*)/,embedUrl:"https://player.twitch.tv/?video=v<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"yandex-music-album":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/?$/,embedUrl:"https://music.yandex.ru/iframe/#album/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" style="width:100%;" height="400"></iframe>',height:400,width:540},"yandex-music-track":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/track\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#track/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:100px;" style="width:100%;" height="100"></iframe>',height:100,width:540,id:t=>t.join("/")},"yandex-music-playlist":{regex:/https?:\/\/music\.yandex\.ru\/users\/([^\/\?\&]*)\/playlists\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#playlist/<%= remote_id %>/show/cover/description/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" width="540" height="400"></iframe>',height:400,width:540,id:t=>t.join("/")},codepen:{regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:t=>t.join("/embed/")},instagram:{regex:/^https:\/\/(?:www\.)?instagram\.com\/(?:reel|p)\/(.*)/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400,id:t=>{var e;return(e=t==null?void 0:t[0])==null?void 0:e.split("/")[0]}},twitter:{regex:/^https?:\/\/(www\.)?(?:twitter\.com|x\.com)\/.+\/status\/(\d+)/,embedUrl:"https://platform.twitter.com/embed/Tweet.html?id=<%= remote_id %>",html:'<iframe width="600" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600,id:t=>t[1]},pinterest:{regex:/https?:\/\/([^\/\?\&]*).pinterest.com\/pin\/([^\/\?\&]*)\/?$/,embedUrl:"https://assets.pinterest.com/ext/embed.html?id=<%= remote_id %>",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 400px; max-height: 1000px;'></iframe>",id:t=>t[1]},facebook:{regex:/https?:\/\/www.facebook.com\/([^\/\?\&]*)\/(.*)/,embedUrl:"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/<%= remote_id %>&width=500",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 500px; max-height: 1000px;'></iframe>",id:t=>t.join("/")},aparat:{regex:/(?:http[s]?:\/\/)?(?:www.)?aparat\.com\/v\/([^\/\?\&]+)\/?/,embedUrl:"https://www.aparat.com/video/video/embed/videohash/<%= remote_id %>/vt/frame",html:'<iframe width="600" height="300" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600},miro:{regex:/https:\/\/miro.com\/\S+(\S{12})\/(\S+)?/,embedUrl:"https://miro.com/app/live-embed/<%= remote_id %>",html:'<iframe width="700" height="500" style="margin: 0 auto;" allowFullScreen frameBorder="0" scrolling="no"></iframe>'},github:{regex:/https?:\/\/gist.github.com\/([^\/\?\&]*)\/([^\/\?\&]*)/,embedUrl:'data:text/html;charset=utf-8,<head><base target="_blank" /></head><body><script src="https://gist.github.com/<%= remote_id %>" ><\/script></body>',html:'<iframe width="100%" height="350" frameborder="0" style="margin: 0 auto;"></iframe>',height:300,width:600,id:t=>`${t.join("/")}.js`}};function O1(t,e,n){var r,i,o,a,s;e==null&&(e=100);function c(){var d=Date.now()-a;d<e&&d>=0?r=setTimeout(c,e-d):(r=null,n||(s=t.apply(o,i),o=i=null))}var l=function(){o=this,i=arguments,a=Date.now();var d=n&&!r;return r||(r=setTimeout(c,e)),d&&(s=t.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}O1.debounce=O1;var NG=O1;let PG=class Gc{constructor({data:e,api:n,readOnly:r}){this.api=n,this._data={},this.element=null,this.readOnly=r,this.data=e}set data(e){var n;if(!(e instanceof Object))throw Error("Embed Tool data should be object");const{service:r,source:i,embed:o,width:a,height:s,caption:c=""}=e;this._data={service:r||this.data.service,source:i||this.data.source,embed:o||this.data.embed,width:a||this.data.width,height:s||this.data.height,caption:c||this.data.caption||""};const l=this.element;l&&((n=l.parentNode)==null||n.replaceChild(this.render(),l))}get data(){if(this.element){const e=this.element.querySelector(`.${this.api.styles.input}`);this._data.caption=e?e.innerHTML:""}return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",containerLoading:"embed-tool--loading",preloader:"embed-tool__preloader",caption:"embed-tool__caption",url:"embed-tool__url",content:"embed-tool__content"}}render(){if(!this.data.service){const s=document.createElement("div");return this.element=s,s}const{html:e}=Gc.services[this.data.service],n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("template"),o=this.createPreloader();n.classList.add(this.CSS.baseClass,this.CSS.container,this.CSS.containerLoading),r.classList.add(this.CSS.input,this.CSS.caption),n.appendChild(o),r.contentEditable=(!this.readOnly).toString(),r.dataset.placeholder=this.api.i18n.t("Enter a caption"),r.innerHTML=this.data.caption||"",i.innerHTML=e,i.content.firstChild.setAttribute("src",this.data.embed),i.content.firstChild.classList.add(this.CSS.content);const a=this.embedIsReady(n);return i.content.firstChild&&n.appendChild(i.content.firstChild),n.appendChild(r),a.then(()=>{n.classList.remove(this.CSS.containerLoading)}),this.element=n,n}createPreloader(){const e=document.createElement("preloader"),n=document.createElement("div");return n.textContent=this.data.source,e.classList.add(this.CSS.preloader),n.classList.add(this.CSS.url),e.appendChild(n),e}save(){return this.data}onPaste(e){var n;const{key:r,data:i}=e.detail,{regex:o,embedUrl:a,width:s,height:c,id:l=b=>b.shift()||""}=Gc.services[r],d=(n=o.exec(i))==null?void 0:n.slice(1),f=d?a.replace(/<%= remote_id %>/g,l(d)):"";this.data={service:r,source:i,embed:f,width:s,height:c}}static prepare({config:e={}}){const{services:n={}}=e;let r=Object.entries(DG);const i=Object.entries(n).filter(([a,s])=>typeof s=="boolean"&&s===!0).map(([a])=>a),o=Object.entries(n).filter(([a,s])=>typeof s=="object").filter(([a,s])=>Gc.checkServiceConfig(s)).map(([a,s])=>{const{regex:c,embedUrl:l,html:d,height:f,width:b,id:x}=s;return[a,{regex:c,embedUrl:l,html:d,height:f,width:b,id:x}]});i.length&&(r=r.filter(([a])=>i.includes(a))),r=r.concat(o),Gc.services=r.reduce((a,[s,c])=>s in a?(a[s]=Object.assign({},a[s],c),a):(a[s]=c,a),{}),Gc.patterns=r.reduce((a,[s,c])=>(c&&typeof c!="boolean"&&(a[s]=c.regex),a),{})}static checkServiceConfig(e){const{regex:n,embedUrl:r,html:i,height:o,width:a,id:s}=e;let c=!!(n&&n instanceof RegExp)&&!!(r&&typeof r=="string")&&!!(i&&typeof i=="string");return c=c&&(s!==void 0?s instanceof Function:!0),c=c&&(o!==void 0?Number.isFinite(o):!0),c=c&&(a!==void 0?Number.isFinite(a):!0),c}static get pasteConfig(){return{patterns:Gc.patterns}}static get isReadOnlySupported(){return!0}embedIsReady(e){let n;return new Promise((r,i)=>{n=new MutationObserver(NG.debounce(r,450)),n.observe(e,{childList:!0,subtree:!0})}).then(()=>{n.disconnect()})}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:""}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const LG='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',ZA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',JA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',QA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',RG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',BG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',jG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',FG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',HG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',zG='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $G(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var On={},A1={},_1={};Object.defineProperty(_1,"__esModule",{value:!0}),_1.allInputsSelector=UG;function UG(){var t=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+t.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allInputsSelector=void 0;var e=_1;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(A1);var lc={},D1={};Object.defineProperty(D1,"__esModule",{value:!0}),D1.isNativeInput=WG;function WG(t){var e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeInput=void 0;var e=D1;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(lc);var VA={},N1={};Object.defineProperty(N1,"__esModule",{value:!0}),N1.append=YG;function YG(t,e){Array.isArray(e)?e.forEach(function(n){t.appendChild(n)}):t.appendChild(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.append=void 0;var e=N1;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return e.append}})})(VA);var P1={},L1={};Object.defineProperty(L1,"__esModule",{value:!0}),L1.blockElements=GG;function GG(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.blockElements=void 0;var e=L1;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(P1);var qA={},R1={};Object.defineProperty(R1,"__esModule",{value:!0}),R1.calculateBaseline=XG;function XG(t){var e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,i=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),a=parseFloat(e.marginTop),s=n*.8,c=(r-n)/2,l=a+o+i+c+s;return l}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBaseline=void 0;var e=R1;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(qA);var e2={},B1={},j1={},F1={};Object.defineProperty(F1,"__esModule",{value:!0}),F1.isContentEditable=KG;function KG(t){return t.contentEditable==="true"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isContentEditable=void 0;var e=F1;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(j1),Object.defineProperty(B1,"__esModule",{value:!0}),B1.canSetCaret=QG;var ZG=lc,JG=j1;function QG(t){var e=!0;if((0,ZG.isNativeInput)(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,JG.isContentEditable)(t);return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.canSetCaret=void 0;var e=B1;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(e2);var pm={},H1={};function VG(t,e,n){const r=n.value!==void 0?"value":"get",i=n[r],o=`#${e}Cache`;if(n[r]=function(...a){return this[o]===void 0&&(this[o]=i.apply(this,a)),this[o]},r==="get"&&n.set){const a=n.set;n.set=function(s){delete t[o],a.apply(this,s)}}return n}function t2(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e!==void 0&&(t[e]=!0),t}function z1(t){return t!=null&&t!==""&&(typeof t!="object"||Object.keys(t).length>0)}function qG(t){return!z1(t)}const eX=()=>typeof window<"u"&&window.navigator!==null&&z1(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function tX(t){const e=t2();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function nX(t){return t[0].toUpperCase()+t.slice(1)}function rX(t){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=t,document.body.appendChild(e);const n=window.getSelection(),r=document.createRange();if(r.selectNode(e),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function iX(t,e,n){let r;return(...i)=>{const o=this,a=()=>{r=void 0,n!==!0&&t.apply(o,i)},s=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(a,e),s&&t.apply(o,i)}}function Vs(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function oX(t){return Vs(t)==="boolean"}function n2(t){return Vs(t)==="function"||Vs(t)==="asyncfunction"}function aX(t){return n2(t)&&/^\s*class\s+/.test(t.toString())}function sX(t){return Vs(t)==="number"}function mm(t){return Vs(t)==="object"}function lX(t){return Promise.resolve(t)===t}function cX(t){return Vs(t)==="string"}function uX(t){return Vs(t)==="undefined"}function $1(t,...e){if(!e.length)return t;const n=e.shift();if(mm(t)&&mm(n))for(const r in n)mm(n[r])?(t[r]===void 0&&Object.assign(t,{[r]:{}}),$1(t[r],n[r])):Object.assign(t,{[r]:n[r]});return $1(t,...e)}function dX(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&console.warn(r)}function fX(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function hX(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}const pX={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},mX={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class gX{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}}function vX(t,e,n=void 0){let r,i,o,a=null,s=0;n||(n={});const c=function(){s=n.leading===!1?0:Date.now(),a=null,o=t.apply(r,i),a===null&&(r=i=null)};return function(){const l=Date.now();!s&&n.leading===!1&&(s=l);const d=e-(l-s);return r=this,i=arguments,d<=0||d>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a===null&&(r=i=null)):!a&&n.trailing!==!1&&(a=setTimeout(c,d)),o}}const yX=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:gX,beautifyShortcut:tX,cacheable:VG,capitalize:nX,copyTextToClipboard:rX,debounce:iX,deepMerge:$1,deprecationAssert:dX,getUserOS:t2,getValidUrl:fX,isBoolean:oX,isClass:aX,isEmpty:qG,isFunction:n2,isIosDevice:eX,isNumber:sX,isObject:mm,isPrintableKey:hX,isPromise:lX,isString:cX,isUndefined:uX,keyCodes:pX,mouseButtons:mX,notEmpty:z1,throttle:vX,typeOf:Vs},Symbol.toStringTag,{value:"Module"})),U1=$G(yX);Object.defineProperty(H1,"__esModule",{value:!0}),H1.containsOnlyInlineElements=xX;var bX=U1,wX=P1;function xX(t){var e;(0,bX.isString)(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;var n=function(r){return!(0,wX.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(n)};return Array.from(e.children).every(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.containsOnlyInlineElements=void 0;var e=H1;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(pm);var r2={},W1={},gm={},Y1={};Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.make=CX;function CX(t,e,n){var r;e===void 0&&(e=null),n===void 0&&(n={});var i=document.createElement(t);if(Array.isArray(e)){var o=e.filter(function(s){return s!==void 0});(r=i.classList).add.apply(r,o)}else e!==null&&i.classList.add(e);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a]);return i}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.make=void 0;var e=Y1;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return e.make}})})(gm),Object.defineProperty(W1,"__esModule",{value:!0}),W1.fragmentToString=kX;var SX=gm;function kX(t){var e=(0,SX.make)("div");return e.appendChild(t),e.innerHTML}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentToString=void 0;var e=W1;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(r2);var i2={},G1={};Object.defineProperty(G1,"__esModule",{value:!0}),G1.getContentLength=TX;var EX=lc;function TX(t){var e,n;return(0,EX.isNativeInput)(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:(n=(e=t.textContent)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLength=void 0;var e=G1;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(i2);var X1={},K1={},o2=hm&&hm.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(K1,"__esModule",{value:!0}),K1.getDeepestBlockElements=a2;var MX=pm;function a2(t){return(0,MX.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce(function(e,n){return o2(o2([],e,!0),a2(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestBlockElements=void 0;var e=K1;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(X1);var s2={},Z1={},vm={},J1={};Object.defineProperty(J1,"__esModule",{value:!0}),J1.isLineBreakTag=IX;function IX(t){return["BR","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLineBreakTag=void 0;var e=J1;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(vm);var ym={},Q1={};Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.isSingleTag=OX;function OX(t){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleTag=void 0;var e=Q1;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(ym),Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.getDeepestNode=l2;var AX=lc,_X=vm,DX=ym;function l2(t,e){e===void 0&&(e=!1);var n=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[n]){var i=t[n];if((0,DX.isSingleTag)(i)&&!(0,AX.isNativeInput)(i)&&!(0,_X.isLineBreakTag)(i))if(i[r])i=i[r];else if(i.parentNode!==null&&i.parentNode[r])i=i.parentNode[r];else return i.parentNode;return l2(i,e)}return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestNode=void 0;var e=Z1;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(s2);var c2={},V1={},bm=hm&&hm.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(V1,"__esModule",{value:!0}),V1.findAllInputs=BX;var NX=pm,PX=X1,LX=A1,RX=lc;function BX(t){return Array.from(t.querySelectorAll((0,LX.allInputsSelector)())).reduce(function(e,n){return(0,RX.isNativeInput)(n)||(0,NX.containsOnlyInlineElements)(n)?bm(bm([],e,!0),[n],!1):bm(bm([],e,!0),(0,PX.getDeepestBlockElements)(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAllInputs=void 0;var e=V1;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(c2);var u2={},q1={};Object.defineProperty(q1,"__esModule",{value:!0}),q1.isCollapsedWhitespaces=jX;function jX(t){return!/[^\t\n\r ]/.test(t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsedWhitespaces=void 0;var e=q1;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(u2);var ew={},tw={};Object.defineProperty(tw,"__esModule",{value:!0}),tw.isElement=HX;var FX=U1;function HX(t){return(0,FX.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.ELEMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;var e=tw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(ew);var d2={},nw={},rw={},iw={};Object.defineProperty(iw,"__esModule",{value:!0}),iw.isLeaf=zX;function zX(t){return t===null?!1:t.childNodes.length===0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaf=void 0;var e=iw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(rw);var ow={},aw={};Object.defineProperty(aw,"__esModule",{value:!0}),aw.isNodeEmpty=GX;var $X=vm,UX=ew,WX=lc,YX=ym;function GX(t,e){var n="";return(0,YX.isSingleTag)(t)&&!(0,$X.isLineBreakTag)(t)?!1:((0,UX.isElement)(t)&&(0,WX.isNativeInput)(t)?n=t.value:t.textContent!==null&&(n=t.textContent.replace("","")),e!==void 0&&(n=n.replace(new RegExp(e,"g"),"")),n.trim().length===0)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=void 0;var e=aw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(ow),Object.defineProperty(nw,"__esModule",{value:!0}),nw.isEmpty=ZX;var XX=rw,KX=ow;function ZX(t,e){t.normalize();for(var n=[t];n.length>0;){var r=n.shift();if(r){if(t=r,(0,XX.isLeaf)(t)&&!(0,KX.isNodeEmpty)(t,e))return!1;n.push.apply(n,Array.from(t.childNodes))}}return!0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var e=nw;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(d2);var f2={},sw={};Object.defineProperty(sw,"__esModule",{value:!0}),sw.isFragment=QX;var JX=U1;function QX(t){return(0,JX.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFragment=void 0;var e=sw;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(f2);var h2={},lw={};Object.defineProperty(lw,"__esModule",{value:!0}),lw.isHTMLString=qX;var VX=gm;function qX(t){var e=(0,VX.make)("div");return e.innerHTML=t,e.childElementCount>0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=void 0;var e=lw;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(h2);var p2={},cw={};Object.defineProperty(cw,"__esModule",{value:!0}),cw.offset=eK;function eK(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,i=e.top+r,o=e.left+n;return{top:i,left:o,bottom:i+e.height,right:o+e.width}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offset=void 0;var e=cw;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return e.offset}})})(p2);var m2={},uw={};Object.defineProperty(uw,"__esModule",{value:!0}),uw.prepend=tK;function tK(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(n){return t.prepend(n)})):t.prepend(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=void 0;var e=uw;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(m2),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.offset=t.make=t.isLineBreakTag=t.isSingleTag=t.isNodeEmpty=t.isLeaf=t.isHTMLString=t.isFragment=t.isEmpty=t.isElement=t.isContentEditable=t.isCollapsedWhitespaces=t.findAllInputs=t.isNativeInput=t.allInputsSelector=t.getDeepestNode=t.getDeepestBlockElements=t.getContentLength=t.fragmentToString=t.containsOnlyInlineElements=t.canSetCaret=t.calculateBaseline=t.blockElements=t.append=void 0;var e=A1;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var n=lc;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=VA;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return r.append}});var i=P1;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var o=qA;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var a=e2;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return a.canSetCaret}});var s=pm;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return s.containsOnlyInlineElements}});var c=r2;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return c.fragmentToString}});var l=i2;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return l.getContentLength}});var d=X1;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return d.getDeepestBlockElements}});var f=s2;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return f.getDeepestNode}});var b=c2;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return b.findAllInputs}});var x=u2;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return x.isCollapsedWhitespaces}});var k=j1;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return k.isContentEditable}});var E=ew;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return E.isElement}});var m=d2;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return m.isEmpty}});var h=f2;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return h.isFragment}});var g=h2;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return g.isHTMLString}});var w=rw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return w.isLeaf}});var p=ow;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return p.isNodeEmpty}});var v=vm;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return v.isLineBreakTag}});var y=ym;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return y.isSingleTag}});var S=gm;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return S.make}});var T=p2;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return T.offset}});var C=m2;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return C.prepend}})}(On);const zi="cdx-list",fi={wrapper:zi,item:`${zi}__item`,itemContent:`${zi}__item-content`,itemChildren:`${zi}__item-children`};let g2=class Wl{static get CSS(){return{...fi,orderedList:`${zi}-ordered`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?n=On.make("ol",[Wl.CSS.wrapper,Wl.CSS.orderedList]):n=On.make("ol",[Wl.CSS.orderedList,Wl.CSS.itemChildren]),n}renderItem(e,n){const r=On.make("li",Wl.CSS.item),i=On.make("div",Wl.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(i),r}getItemContent(e){const n=e.querySelector(`.${Wl.CSS.itemContent}`);return!n||On.isEmpty(n)?"":n.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}},v2=class Yl{static get CSS(){return{...fi,unorderedList:`${zi}-unordered`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?n=On.make("ul",[Yl.CSS.wrapper,Yl.CSS.unorderedList]):n=On.make("ul",[Yl.CSS.unorderedList,Yl.CSS.itemChildren]),n}renderItem(e,n){const r=On.make("li",Yl.CSS.item),i=On.make("div",Yl.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(i),r}getItemContent(e){const n=e.querySelector(`.${Yl.CSS.itemContent}`);return!n||On.isEmpty(n)?"":n.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}};function cc(t){return t.nodeType===Node.ELEMENT_NODE}var yf={},dw={},wm={},xm={};Object.defineProperty(xm,"__esModule",{value:!0}),xm.getContenteditableSlice=rK;var nK=On;function rK(t,e,n,r,i){var o;i===void 0&&(i=!1);var a=document.createRange();if(r==="left"?(a.setStart(t,0),a.setEnd(e,n)):(a.setStart(e,n),a.setEnd(t,t.childNodes.length)),i===!0){var s=a.extractContents();return(0,nK.fragmentToString)(s)}var c=a.cloneContents(),l=document.createElement("div");l.appendChild(c);var d=(o=l.textContent)!==null&&o!==void 0?o:"";return d}Object.defineProperty(wm,"__esModule",{value:!0}),wm.checkContenteditableSliceForEmptiness=aK;var iK=On,oK=xm;function aK(t,e,n,r){var i=(0,oK.getContenteditableSlice)(t,e,n,r);return(0,iK.isCollapsedWhitespaces)(i)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkContenteditableSliceForEmptiness=void 0;var e=wm;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(dw);var y2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContenteditableSlice=void 0;var e=xm;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(y2);var b2={},fw={};Object.defineProperty(fw,"__esModule",{value:!0}),fw.focus=lK;var sK=On;function lK(t,e){var n,r;if(e===void 0&&(e=!0),(0,sK.isNativeInput)(t)){t.focus();var i=e?0:t.value.length;t.setSelectionRange(i,i)}else{var o=document.createRange(),a=window.getSelection();if(!a)return;var s=function(b,x){x===void 0&&(x=!1);var k=document.createTextNode("");x?b.insertBefore(k,b.firstChild):b.appendChild(k),o.setStart(k,0),o.setEnd(k,0)},c=function(b){return b!=null},l=t.childNodes,d=e?l[0]:l[l.length-1];if(c(d)){for(;c(d)&&d.nodeType!==Node.TEXT_NODE;)d=e?d.firstChild:d.lastChild;if(c(d)&&d.nodeType===Node.TEXT_NODE){var f=(r=(n=d.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,i=e?0:f;o.setStart(d,i),o.setEnd(d,i)}else s(t,e)}else s(t);a.removeAllRanges(),a.addRange(o)}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.focus=void 0;var e=fw;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return e.focus}})})(b2);var hw={},Cm={};Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.getCaretNodeAndOffset=cK;function cK(){var t=window.getSelection();if(t===null)return[null,0];var e=t.focusNode,n=t.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[n]!==void 0?(e=e.childNodes[n],n=0):(e=e.childNodes[n-1],e.textContent!==null&&(n=e.textContent.length))),[e,n])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCaretNodeAndOffset=void 0;var e=Cm;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(hw);var w2={},Sm={};Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.getRange=uK;function uK(){var t=window.getSelection();return t&&t.rangeCount?t.getRangeAt(0):null}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRange=void 0;var e=Sm;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(w2);var x2={},pw={};Object.defineProperty(pw,"__esModule",{value:!0}),pw.isCaretAtEndOfInput=hK;var C2=On,dK=hw,fK=dw;function hK(t){var e=(0,C2.getDeepestNode)(t,!0);if(e===null)return!0;if((0,C2.isNativeInput)(e))return e.selectionEnd===e.value.length;var n=(0,dK.getCaretNodeAndOffset)(),r=n[0],i=n[1];return r===null?!1:(0,fK.checkContenteditableSliceForEmptiness)(t,r,i,"right")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtEndOfInput=void 0;var e=pw;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(x2);var S2={},mw={};Object.defineProperty(mw,"__esModule",{value:!0}),mw.isCaretAtStartOfInput=gK;var km=On,pK=Cm,mK=wm;function gK(t){var e=(0,km.getDeepestNode)(t);if(e===null||(0,km.isEmpty)(t))return!0;if((0,km.isNativeInput)(e))return e.selectionEnd===0;if((0,km.isEmpty)(t))return!0;var n=(0,pK.getCaretNodeAndOffset)(),r=n[0],i=n[1];return r===null?!1:(0,mK.checkContenteditableSliceForEmptiness)(t,r,i,"left")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtStartOfInput=void 0;var e=mw;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(S2);var k2={},gw={};Object.defineProperty(gw,"__esModule",{value:!0}),gw.save=bK;var vK=On,yK=Sm;function bK(){var t=(0,yK.getRange)(),e=(0,vK.make)("span");if(e.id="cursor",e.hidden=!0,!!t)return t.insertNode(e),function(){var n=window.getSelection();n&&(t.setStartAfter(e),t.setEndAfter(e),n.removeAllRanges(),n.addRange(t),setTimeout(function(){e.remove()},150))}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=void 0;var e=gw;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return e.save}})})(k2),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=t.isCaretAtStartOfInput=t.isCaretAtEndOfInput=t.getRange=t.getCaretNodeAndOffset=t.focus=t.getContenteditableSlice=t.checkContenteditableSliceForEmptiness=void 0;var e=dw;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var n=y2;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return n.getContenteditableSlice}});var r=b2;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return r.focus}});var i=hw;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return i.getCaretNodeAndOffset}});var o=w2;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return o.getRange}});var a=x2;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return a.isCaretAtEndOfInput}});var s=S2;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return s.isCaretAtStartOfInput}});var c=k2;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return c.save}})}(yf);let wK=class Gr{static get CSS(){return{...fi,checklist:`${zi}-checklist`,itemChecked:`${zi}__checkbox--checked`,noHover:`${zi}__checkbox--no-hover`,checkbox:`${zi}__checkbox-check`,checkboxContainer:`${zi}__checkbox`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?(n=On.make("ul",[Gr.CSS.wrapper,Gr.CSS.checklist]),n.addEventListener("click",r=>{const i=r.target;if(i){const o=i.closest(`.${Gr.CSS.checkboxContainer}`);o&&o.contains(i)&&this.toggleCheckbox(o)}})):n=On.make("ul",[Gr.CSS.checklist,Gr.CSS.itemChildren]),n}renderItem(e,n){const r=On.make("li",[Gr.CSS.item,Gr.CSS.item]),i=On.make("div",Gr.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()}),o=On.make("span",Gr.CSS.checkbox),a=On.make("div",Gr.CSS.checkboxContainer);return n.checked===!0&&a.classList.add(Gr.CSS.itemChecked),o.innerHTML=LG,a.appendChild(o),r.appendChild(a),r.appendChild(i),r}getItemContent(e){const n=e.querySelector(`.${Gr.CSS.itemContent}`);return!n||On.isEmpty(n)?"":n.innerHTML}getItemMeta(e){const n=e.querySelector(`.${Gr.CSS.checkboxContainer}`);return{checked:n?n.classList.contains(Gr.CSS.itemChecked):!1}}composeDefaultMeta(){return{checked:!1}}toggleCheckbox(e){e.classList.toggle(Gr.CSS.itemChecked),e.classList.add(Gr.CSS.noHover),e.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(e),{once:!0})}removeSpecialHoverBehavior(e){e.classList.remove(Gr.CSS.noHover)}};function vw(t,e="after"){const n=[];let r;function i(o){switch(e){case"after":return o.nextElementSibling;case"before":return o.previousElementSibling}}for(r=i(t);r!==null;)n.push(r),r=i(r);return n.length!==0?n:null}function ds(t,e=!0){let n=t;return t.classList.contains(fi.item)&&(n=t.querySelector(`.${fi.itemChildren}`)),n===null?[]:e?Array.from(n.querySelectorAll(`:scope > .${fi.item}`)):Array.from(n.querySelectorAll(`.${fi.item}`))}function xK(t){return t.nextElementSibling===null}function CK(t){return t.querySelector(`.${fi.itemChildren}`)!==null}function qs(t){return t.querySelector(`.${fi.itemChildren}`)}function yw(t){let e=t;t.classList.contains(fi.item)&&(e=qs(t)),e!==null&&ds(e).length===0&&e.remove()}function Em(t){return t.querySelector(`.${fi.itemContent}`)}function bu(t,e=!0){const n=Em(t);n&&yf.focus(n,e)}let bw=class{get currentItem(){const e=window.getSelection();if(!e)return null;let n=e.anchorNode;return!n||(cc(n)||(n=n.parentNode),!n)||!cc(n)?null:n.closest(`.${fi.item}`)}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let n=e.parentNode,r=0;for(;n!==null&&n!==this.listWrapper;)cc(n)&&n.classList.contains(fi.item)&&(r+=1),n=n.parentNode;return r+1}constructor({data:e,config:n,api:r,readOnly:i,block:o},a){this.config=n,this.data=e,this.readOnly=i,this.api=r,this.block=o,this.renderer=a}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper}save(e){const n=e??this.listWrapper,r=a=>ds(a).map(s=>{const c=qs(s),l=this.renderer.getItemContent(s),d=this.renderer.getItemMeta(s),f=c?r(c):[];return{content:l,meta:d,items:f}}),i=n?r(n):[];let o={style:this.data.style,meta:{},items:i};return this.data.style==="ordered"&&(o.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),o}static get pasteConfig(){return{tags:["OL","UL","LI"]}}merge(e){const n=this.block.holder.querySelectorAll(`.${fi.item}`),r=n[n.length-1],i=Em(r);if(r===null||i===null||(i.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const o=ds(this.listWrapper);if(o.length===0)return;const a=o[o.length-1];let s=qs(a);const c=e.items.shift();c!==void 0&&(c.items.length!==0&&(s===null&&(s=this.renderer.renderWrapper(!1)),this.appendItems(c.items,s)),e.items.length>0&&this.appendItems(e.items,this.listWrapper))}onPaste(e){const n=e.detail.data;this.data=this.pasteHandler(n);const r=this.listWrapper;r&&r.parentNode&&r.parentNode.replaceChild(this.render(),r)}pasteHandler(e){const{tagName:n}=e;let r="unordered",i;switch(n){case"OL":r="ordered",i="ol";break;case"UL":case"LI":r="unordered",i="ul"}const o={style:r,meta:{},items:[]};r==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const a=s=>Array.from(s.querySelectorAll(":scope > li")).map(c=>{const l=c.querySelector(`:scope > ${i}`),d=l?a(l):[];return{content:c.innerHTML??"",meta:{},items:d}});return o.items=a(e),o}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset",`item ${e-1}`),this.data.meta.start=e}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e}enterPressed(e){var n;const r=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||r===null)return;const i=((n=this.renderer)==null?void 0:n.getItemContent(r).trim().length)===0,o=r.parentNode===this.listWrapper,a=r.previousElementSibling===null,s=this.api.blocks.getCurrentBlockIndex();if(o&&i)if(xK(r)&&!CK(r)){a?this.convertItemToDefaultBlock(s,!0):this.convertItemToDefaultBlock();return}else{this.splitList(r);return}else if(i){this.unshiftItem(r);return}else this.splitItem(r)}backspace(e){const n=this.currentItem;if(n!==null&&yf.isCaretAtStartOfInput(n)){if(e.stopPropagation(),n.parentNode===this.listWrapper&&n.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(n)}}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)}unshiftItem(e){if(!e.parentNode||!cc(e.parentNode))return;const n=e.parentNode.closest(`.${fi.item}`);if(!n)return;let r=qs(e);if(e.parentElement===null)return;const i=vw(e);i!==null&&(r===null&&(r=this.renderer.renderWrapper(!1)),i.forEach(o=>{r.appendChild(o)}),e.appendChild(r)),n.after(e),bu(e,!1),yw(n)}splitList(e){const n=ds(e),r=this.block,i=this.api.blocks.getCurrentBlockIndex();if(n.length!==0){const c=n[0];this.unshiftItem(c),bu(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(i);return}const o=vw(e);if(o===null)return;const a=this.renderer.renderWrapper(!0);o.forEach(c=>{a.appendChild(c)});const s=this.save(a);s.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(r==null?void 0:r.name,s,this.config,i+1),this.convertItemToDefaultBlock(i+1),a.remove()}splitItem(e){const[n,r]=yf.getCaretNodeAndOffset();if(n===null)return;const i=Em(e);let o;i===null?o="":o=yf.getContenteditableSlice(i,n,r,"right",!0);const a=qs(e),s=this.renderItem(o);e==null||e.after(s),a&&s.appendChild(a),bu(s)}mergeItemWithPrevious(e){const n=e.previousElementSibling,r=e.parentNode;if(r===null||!cc(r))return;const i=r.closest(`.${fi.item}`);if(!n&&!i||n&&!cc(n))return;let o;if(n){const f=ds(n,!1);f.length!==0&&f.length!==0?o=f[f.length-1]:o=n}else o=i;const a=this.renderer.getItemContent(e);if(!o)return;bu(o,!1);const s=Em(o);if(s===null)return;s.insertAdjacentHTML("beforeend",a);const c=ds(e);if(c.length===0){e.remove(),yw(o);return}const l=n||i,d=qs(l)??this.renderer.renderWrapper(!1);n?c.forEach(f=>{d.appendChild(f)}):c.forEach(f=>{d.prepend(f)}),qs(l)===null&&o.appendChild(d),e.remove()}addTab(e){var n;e.stopPropagation(),e.preventDefault();const r=this.currentItem;if(!r)return;if(((n=this.config)==null?void 0:n.maxLevel)!==void 0){const a=this.currentItemLevel;if(a!==null&&a===this.config.maxLevel)return}const i=r.previousSibling;if(i===null||!cc(i))return;const o=qs(i);if(o)o.appendChild(r),ds(r).forEach(a=>{o.appendChild(a)});else{const a=this.renderer.renderWrapper(!1);a.appendChild(r),ds(r).forEach(s=>{a.appendChild(s)}),i.appendChild(a)}yw(r),bu(r,!1)}convertItemToDefaultBlock(e,n){let r;const i=this.currentItem,o=i!==null?this.renderer.getItemContent(i):"";n===!0&&this.api.blocks.delete(),e!==void 0?r=this.api.blocks.insert(void 0,{text:o},void 0,e):r=this.api.blocks.insert(),i==null||i.remove(),this.api.caret.setToBlock(r,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const n=ds(e);if(n.length!==0){const a=n[0];this.unshiftItem(a),bu(e)}const r=vw(e),i=this.api.blocks.getCurrentBlockIndex(),o=r===null;this.convertItemToDefaultBlock(i,o)}renderItem(e,n){const r=n??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof g2:return this.renderer.renderItem(e,r);case this.renderer instanceof v2:return this.renderer.renderItem(e,r);default:return this.renderer.renderItem(e,r)}}appendItems(e,n){e.forEach(r=>{var i;const o=this.renderItem(r.content,r.meta);if(n.appendChild(o),r.items.length){const a=(i=this.renderer)==null?void 0:i.renderWrapper(!1);this.appendItems(r.items,a),o.appendChild(a)}})}};const wu={wrapper:`${zi}-start-with-field`,input:`${zi}-start-with-field__input`,startWithElementWrapperInvalid:`${zi}-start-with-field--invalid`};function SK(t,{value:e,placeholder:n,attributes:r,sanitize:i}){const o=On.make("div",wu.wrapper),a=On.make("input",wu.input,{placeholder:n,tabIndex:-1,value:e});for(const s in r)a.setAttribute(s,r[s]);return o.appendChild(a),a.addEventListener("input",()=>{i!==void 0&&(a.value=i(a.value));const s=a.checkValidity();!s&&!o.classList.contains(wu.startWithElementWrapperInvalid)&&o.classList.add(wu.startWithElementWrapperInvalid),s&&o.classList.contains(wu.startWithElementWrapperInvalid)&&o.classList.remove(wu.startWithElementWrapperInvalid),s&&t(a.value)}),o}const Tm=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),E2=new Map([["numeric",RG],["lower-roman",BG],["upper-roman",jG],["lower-alpha",HG],["upper-alpha",FG]]);function kK(t){return t.replace(/\D+/g,"")}function EK(t){return typeof t.items[0]=="string"}function TK(t){return typeof t.items[0]!="string"&&"text"in t.items[0]&&"checked"in t.items[0]&&typeof t.items[0].text=="string"&&typeof t.items[0].checked=="boolean"}function MK(t){const e=[];return EK(t)?(t.items.forEach(n=>{e.push({content:n,meta:{},items:[]})}),{style:t.style,meta:{},items:e}):TK(t)?(t.items.forEach(n=>{e.push({content:n.text,meta:{checked:n.checked},items:[]})}),{style:"checklist",meta:{},items:e}):t}let IK=class zE{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:JA,title:"Unordered List",data:{style:"unordered"}},{icon:QA,title:"Ordered List",data:{style:"ordered"}},{icon:ZA,title:"Checklist",data:{style:"checklist"}}]}static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>zE.joinRecursive(e),import:(e,n)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:(n==null?void 0:n.defaultStyle)!==void 0?n.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){var n;this.data.style=e,this.changeTabulatorByStyle();const r=this.list.render();(n=this.listElement)==null||n.replaceWith(r),this.listElement=r}constructor({data:e,config:n,api:r,readOnly:i,block:o}){var a;this.api=r,this.readOnly=i,this.config=n,this.block=o,this.defaultListStyle=((a=this.config)==null?void 0:a.defaultStyle)||"unordered";const s={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?MK(e):s,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()}static joinRecursive(e){return e.items.map(n=>`${n.content} ${zE.joinRecursive(n)}`).join("")}render(){return this.listElement=this.list.render(),this.listElement}save(){return this.data=this.list.save(),this.data}merge(e){this.list.merge(e)}renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:JA,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:QA,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:ZA,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const n=SK(o=>this.changeStartWith(Number(o)),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:o=>kK(o)}),r=[{label:this.api.i18n.t("Start with"),icon:zG,children:{items:[{element:n,type:"html"}]}}],i={label:this.api.i18n.t("Counter type"),icon:E2.get(this.data.meta.counterType),children:{items:[]}};Tm.forEach((o,a)=>{i.children.items.push({title:this.api.i18n.t(a),icon:E2.get(Tm.get(a)),isActive:this.data.meta.counterType===Tm.get(a),closeOnActivate:!0,onActivate:()=>{this.changeCounters(Tm.get(a))}})}),e.push({type:"separator"},...r,i)}return e}onPaste(e){const{tagName:n}=e.detail.data;switch(n){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}pasteHandler(e){return this.list.pasteHandler(e)}changeCounters(e){var n;(n=this.list)==null||n.changeCounters(e),this.data.meta.counterType=e}changeStartWith(e){var n;(n=this.list)==null||n.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new bw({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new g2(this.readOnly,this.config));break;case"unordered":this.list=new bw({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new v2(this.readOnly,this.config));break;case"checklist":this.list=new bw({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new wK(this.readOnly,this.config));break}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption{display:none}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image{display:none}.image-tool--empty .image-tool__caption,.image-tool--uploading .image-tool__caption{display:none!important}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--uploading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--uploading .image-tool__image-picture,.image-tool--uploading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}.image-tool--caption .image-tool__caption{display:block}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const OK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',AK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',T2='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',_K='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',DK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function xu(t,e=null,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e!==null&&r.classList.add(e);for(const i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}var bf=(t=>(t.Empty="empty",t.Uploading="uploading",t.Filled="filled",t))(bf||{});let NK=class{constructor({api:e,config:n,onSelectFile:r,readOnly:i}){this.api=e,this.config=n,this.onSelectFile=r,this.readOnly=i,this.nodes={wrapper:xu("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:xu("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:xu("div",this.CSS.imagePreloader),caption:xu("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}applyTune(e,n){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${e}`,n)}render(e){return e.file===void 0||Object.keys(e.file).length===0?this.toggleStatus("empty"):this.toggleStatus("uploading"),this.nodes.wrapper}showPreloader(e){this.nodes.imagePreloader.style.backgroundImage=`url(${e})`,this.toggleStatus("uploading")}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus("empty")}fillImage(e){const n=/\.mp4$/.test(e)?"VIDEO":"IMG",r={src:e};let i="load";n==="VIDEO"&&(r.autoplay=!0,r.loop=!0,r.muted=!0,r.playsinline=!0,i="loadeddata"),this.nodes.imageEl=xu(n,this.CSS.imageEl,r),this.nodes.imageEl.addEventListener(i,()=>{this.toggleStatus("filled"),this.nodes.imagePreloader!==void 0&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(e){this.nodes.caption!==void 0&&(this.nodes.caption.innerHTML=e)}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}createFileButton(){const e=xu("div",[this.CSS.button]);return e.innerHTML=this.config.buttonContent??`${T2} ${this.api.i18n.t("Select an Image")}`,e.addEventListener("click",()=>{this.onSelectFile()}),e}toggleStatus(e){for(const n in bf)Object.prototype.hasOwnProperty.call(bf,n)&&this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${bf[n]}`,e===bf[n])}};function PK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M2={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=3)}([function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){(function(o){var a=i(2),s=setTimeout;function c(){}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],E(m,this)}function d(m,h){for(;m._state===3;)m=m._value;m._state!==0?(m._handled=!0,l._immediateFn(function(){var g=m._state===1?h.onFulfilled:h.onRejected;if(g!==null){var w;try{w=g(m._value)}catch(p){return void b(h.promise,p)}f(h.promise,w)}else(m._state===1?f:b)(h.promise,m._value)})):m._deferreds.push(h)}function f(m,h){try{if(h===m)throw new TypeError("A promise cannot be resolved with itself.");if(h&&(typeof h=="object"||typeof h=="function")){var g=h.then;if(h instanceof l)return m._state=3,m._value=h,void x(m);if(typeof g=="function")return void E((w=g,p=h,function(){w.apply(p,arguments)}),m)}m._state=1,m._value=h,x(m)}catch(v){b(m,v)}var w,p}function b(m,h){m._state=2,m._value=h,x(m)}function x(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var h=0,g=m._deferreds.length;h<g;h++)d(m,m._deferreds[h]);m._deferreds=null}function k(m,h,g){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof h=="function"?h:null,this.promise=g}function E(m,h){var g=!1;try{m(function(w){g||(g=!0,f(h,w))},function(w){g||(g=!0,b(h,w))})}catch(w){if(g)return;g=!0,b(h,w)}}l.prototype.catch=function(m){return this.then(null,m)},l.prototype.then=function(m,h){var g=new this.constructor(c);return d(this,new k(m,h,g)),g},l.prototype.finally=a.a,l.all=function(m){return new l(function(h,g){if(!m||m.length===void 0)throw new TypeError("Promise.all accepts an array");var w=Array.prototype.slice.call(m);if(w.length===0)return h([]);var p=w.length;function v(S,T){try{if(T&&(typeof T=="object"||typeof T=="function")){var C=T.then;if(typeof C=="function")return void C.call(T,function(M){v(S,M)},g)}w[S]=T,--p==0&&h(w)}catch(M){g(M)}}for(var y=0;y<w.length;y++)v(y,w[y])})},l.resolve=function(m){return m&&typeof m=="object"&&m.constructor===l?m:new l(function(h){h(m)})},l.reject=function(m){return new l(function(h,g){g(m)})},l.race=function(m){return new l(function(h,g){for(var w=0,p=m.length;w<p;w++)m[w].then(h,g)})},l._immediateFn=typeof o=="function"&&function(m){o(m)}||function(m){s(m,0)},l._unhandledRejectionFn=function(m){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",m)},r.a=l}).call(this,i(5).setImmediate)},function(n,r,i){r.a=function(o){var a=this.constructor;return this.then(function(s){return a.resolve(o()).then(function(){return s})},function(s){return a.resolve(o()).then(function(){return a.reject(s)})})}},function(n,r,i){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(E)}i(4);var a,s,c,l,d,f,b,x=i(8),k=(s=function(E){return new Promise(function(m,h){E=l(E),(E=d(E)).beforeSend&&E.beforeSend();var g=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");g.open(E.method,E.url),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(E.headers).forEach(function(p){var v=E.headers[p];g.setRequestHeader(p,v)});var w=E.ratio;g.upload.addEventListener("progress",function(p){var v=Math.round(p.loaded/p.total*100),y=Math.ceil(v*w/100);E.progress(Math.min(y,100))},!1),g.addEventListener("progress",function(p){var v=Math.round(p.loaded/p.total*100),y=Math.ceil(v*(100-w)/100)+w;E.progress(Math.min(y,100))},!1),g.onreadystatechange=function(){if(g.readyState===4){var p=g.response;try{p=JSON.parse(p)}catch{}var v=x.parseHeaders(g.getAllResponseHeaders()),y={body:p,code:g.status,headers:v};b(g.status)?m(y):h(y)}},g.send(E.data)})},c=function(E){return E.method="POST",s(E)},l=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E.url&&typeof E.url!="string")throw new Error("Url must be a string");if(E.url=E.url||"",E.method&&typeof E.method!="string")throw new Error("`method` must be a string or null");if(E.method=E.method?E.method.toUpperCase():"GET",E.headers&&o(E.headers)!=="object")throw new Error("`headers` must be an object or null");if(E.headers=E.headers||{},E.type&&(typeof E.type!="string"||!Object.values(a).includes(E.type)))throw new Error("`type` must be taken from module's contentType library");if(E.progress&&typeof E.progress!="function")throw new Error("`progress` must be a function or null");if(E.progress=E.progress||function(m){},E.beforeSend=E.beforeSend||function(m){},E.ratio&&typeof E.ratio!="number")throw new Error("`ratio` must be a number");if(E.ratio<0||E.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(E.ratio=E.ratio||90,E.accept&&typeof E.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(E.accept=E.accept||"*/*",E.multiple&&typeof E.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(E.multiple=E.multiple||!1,E.fieldName&&typeof E.fieldName!="string")throw new Error("`fieldName` must be a string");return E.fieldName=E.fieldName||"files",E},d=function(E){switch(E.method){case"GET":var m=f(E.data,a.URLENCODED);delete E.data,E.url=/\?/.test(E.url)?E.url+"&"+m:E.url+"?"+m;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var h=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||a.JSON}(E);(x.isFormData(E.data)||x.isFormElement(E.data))&&(h=a.FORM),E.data=f(E.data,h),h!==k.contentType.FORM&&(E.headers["content-type"]=h)}return E},f=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case a.URLENCODED:return x.urlEncode(E);case a.JSON:return x.jsonEncode(E);case a.FORM:return x.formEncode(E);default:return E}},b=function(E){return E>=200&&E<300},{contentType:a={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:s,get:function(E){return E.method="GET",s(E)},post:c,transport:function(E){return E=l(E),x.selectFiles(E).then(function(m){for(var h=new FormData,g=0;g<m.length;g++)h.append(E.fieldName,m[g],m[g].name);x.isObject(E.data)&&Object.keys(E.data).forEach(function(p){var v=E.data[p];h.append(p,v)});var w=E.beforeSend;return E.beforeSend=function(){return w(m)},E.data=h,c(E)})},selectFiles:function(E){return delete(E=l(E)).beforeSend,x.selectFiles(E)}});n.exports=k},function(n,r,i){i.r(r);var o=i(1);window.Promise=window.Promise||o.a},function(n,r,i){(function(o){var a=o!==void 0&&o||typeof self<"u"&&self||window,s=Function.prototype.apply;function c(l,d){this._id=l,this._clearFn=d}r.setTimeout=function(){return new c(s.call(setTimeout,a,arguments),clearTimeout)},r.setInterval=function(){return new c(s.call(setInterval,a,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(l){l&&l.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(a,this._id)},r.enroll=function(l,d){clearTimeout(l._idleTimeoutId),l._idleTimeout=d},r.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},r._unrefActive=r.active=function(l){clearTimeout(l._idleTimeoutId);var d=l._idleTimeout;d>=0&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},d))},i(6),r.setImmediate=typeof self<"u"&&self.setImmediate||o!==void 0&&o.setImmediate||this&&this.setImmediate,r.clearImmediate=typeof self<"u"&&self.clearImmediate||o!==void 0&&o.clearImmediate||this&&this.clearImmediate}).call(this,i(0))},function(n,r,i){(function(o,a){(function(s,c){if(!s.setImmediate){var l,d,f,b,x,k=1,E={},m=!1,h=s.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(s);g=g&&g.setTimeout?g:s,{}.toString.call(s.process)==="[object process]"?l=function(v){a.nextTick(function(){p(v)})}:function(){if(s.postMessage&&!s.importScripts){var v=!0,y=s.onmessage;return s.onmessage=function(){v=!1},s.postMessage("","*"),s.onmessage=y,v}}()?(b="setImmediate$"+Math.random()+"$",x=function(v){v.source===s&&typeof v.data=="string"&&v.data.indexOf(b)===0&&p(+v.data.slice(b.length))},s.addEventListener?s.addEventListener("message",x,!1):s.attachEvent("onmessage",x),l=function(v){s.postMessage(b+v,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(v){p(v.data)},l=function(v){f.port2.postMessage(v)}):h&&"onreadystatechange"in h.createElement("script")?(d=h.documentElement,l=function(v){var y=h.createElement("script");y.onreadystatechange=function(){p(v),y.onreadystatechange=null,d.removeChild(y),y=null},d.appendChild(y)}):l=function(v){setTimeout(p,0,v)},g.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var y=new Array(arguments.length-1),S=0;S<y.length;S++)y[S]=arguments[S+1];var T={callback:v,args:y};return E[k]=T,l(k),k++},g.clearImmediate=w}function w(v){delete E[v]}function p(v){if(m)setTimeout(p,0,v);else{var y=E[v];if(y){m=!0;try{(function(S){var T=S.callback,C=S.args;switch(C.length){case 0:T();break;case 1:T(C[0]);break;case 2:T(C[0],C[1]);break;case 3:T(C[0],C[1],C[2]);break;default:T.apply(c,C)}})(y)}finally{w(v),m=!1}}}}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,i(0),i(7))},function(n,r){var i,o,a=n.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function l(g){if(i===setTimeout)return setTimeout(g,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(g,0);try{return i(g,0)}catch{try{return i.call(null,g,0)}catch{return i.call(this,g,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:s}catch{i=s}try{o=typeof clearTimeout=="function"?clearTimeout:c}catch{o=c}})();var d,f=[],b=!1,x=-1;function k(){b&&d&&(b=!1,d.length?f=d.concat(f):x=-1,f.length&&E())}function E(){if(!b){var g=l(k);b=!0;for(var w=f.length;w;){for(d=f,f=[];++x<w;)d&&d[x].run();x=-1,w=f.length}d=null,b=!1,function(p){if(o===clearTimeout)return clearTimeout(p);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(p);try{o(p)}catch{try{return o.call(null,p)}catch{return o.call(this,p)}}}(g)}}function m(g,w){this.fun=g,this.array=w}function h(){}a.nextTick=function(g){var w=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)w[p-1]=arguments[p];f.push(new m(g,w)),f.length!==1||b||l(E)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(g){return[]},a.binding=function(g){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(g){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(n,r,i){function o(s,c){for(var l=0;l<c.length;l++){var d=c[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}var a=i(9);n.exports=function(){function s(){(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")})(this,s)}var c,l,d;return c=s,d=[{key:"urlEncode",value:function(f){return a(f)}},{key:"jsonEncode",value:function(f){return JSON.stringify(f)}},{key:"formEncode",value:function(f){if(this.isFormData(f))return f;if(this.isFormElement(f))return new FormData(f);if(this.isObject(f)){var b=new FormData;return Object.keys(f).forEach(function(x){var k=f[x];b.append(x,k)}),b}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(f){return Object.prototype.toString.call(f)==="[object Object]"}},{key:"isFormData",value:function(f){return f instanceof FormData}},{key:"isFormElement",value:function(f){return f instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(b,x){var k=document.createElement("INPUT");k.type="file",f.multiple&&k.setAttribute("multiple","multiple"),f.accept&&k.setAttribute("accept",f.accept),k.style.display="none",document.body.appendChild(k),k.addEventListener("change",function(E){var m=E.target.files;b(m),document.body.removeChild(k)},!1),k.click()})}},{key:"parseHeaders",value:function(f){var b=f.trim().split(/[\r\n]+/),x={};return b.forEach(function(k){var E=k.split(": "),m=E.shift(),h=E.join(": ");m&&(x[m]=h)}),x}}],(l=null)&&o(c.prototype,l),d&&o(c,d),s}()},function(n,r){var i=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},o=function(a,s,c,l){return s=s||null,c=c||"&",l=l||null,a?function(d){for(var f=new Array,b=0;b<d.length;b++)d[b]&&f.push(d[b]);return f}(Object.keys(a).map(function(d){var f,b,x=d;if(l&&(x=l+"["+x+"]"),typeof a[d]=="object"&&a[d]!==null)f=o(a[d],null,c,x);else{s&&(b=x,x=!isNaN(parseFloat(b))&&isFinite(b)?s+Number(x):x);var k=a[d];k=(k=(k=(k=k===!0?"1":k)===!1?"0":k)===0?"0":k)||"",f=i(x)+"="+i(k)}return f})).join(c).replace(/[!'()*]/g,""):""};n.exports=o}])})})(M2);var LK=M2.exports;const Cu=PK(LK);function ww(t){return t!==void 0&&typeof t.then=="function"}let RK=class{constructor({config:e,onUpload:n,onError:r}){this.config=e,this.onUpload=n,this.onError=r}uploadSelectedFile({onPreview:e}){const n=function(i){const o=new FileReader;o.readAsDataURL(i),o.onload=a=>{e(a.target.result)}};let r;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"){const i=this.config.uploader.uploadByFile;r=Cu.selectFiles({accept:this.config.types??"image/*"}).then(o=>{n(o[0]);const a=i(o[0]);return ww(a)||console.warn("Custom uploader method uploadByFile should return a Promise"),a})}else r=Cu.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types??"image/*",headers:this.config.additionalRequestHeaders,beforeSend:i=>{n(i[0])},fieldName:this.config.field??"image"}).then(i=>i.body);r.then(i=>{this.onUpload(i)}).catch(i=>{this.onError(i)})}uploadByUrl(e){let n;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(n=this.config.uploader.uploadByUrl(e),ww(n)||console.warn("Custom uploader method uploadByUrl should return a Promise")):n=Cu.post({url:this.config.endpoints.byUrl,data:Object.assign({url:e},this.config.additionalRequestData),type:Cu.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(r=>r.body),n.then(r=>{this.onUpload(r)}).catch(r=>{this.onError(r)})}uploadByFile(e,{onPreview:n}){const r=new FileReader;r.readAsDataURL(e),r.onload=o=>{n(o.target.result)};let i;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")i=this.config.uploader.uploadByFile(e),ww(i)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const o=new FormData;o.append(this.config.field??"image",e),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([a,s])=>{o.append(a,s)}),i=Cu.post({url:this.config.endpoints.byFile,data:o,type:Cu.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(a=>a.body)}i.then(o=>{this.onUpload(o)}).catch(o=>{this.onError(o)})}};/**
 * Image Tool for the Editor.js
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.ts  main Tool's interface, public API and methods for working with data
 *  2) uploader.ts  module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.ts  module for UI manipulations: render, showing preloader, etc
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */let I2=class $E{constructor({data:e,config:n,api:r,readOnly:i,block:o}){this.api=r,this.block=o,this.config={endpoints:n.endpoints,additionalRequestData:n.additionalRequestData,additionalRequestHeaders:n.additionalRequestHeaders,field:n.field,types:n.types,captionPlaceholder:this.api.i18n.t(n.captionPlaceholder??"Caption"),buttonContent:n.buttonContent,uploader:n.uploader,actions:n.actions,features:n.features||{}},this.uploader=new RK({config:this.config,onUpload:a=>this.onUpload(a),onError:a=>this.uploadingFailed(a)}),this.ui=new NK({api:r,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:a=>{this.ui.showPreloader(a)}})},readOnly:i}),this._data={caption:"",withBorder:!1,withBackground:!1,stretched:!1,file:{url:""}},this.data=e}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:T2,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:AK,title:"With border",toggle:!0},{name:"stretched",icon:_K,title:"Stretch image",toggle:!0},{name:"withBackground",icon:OK,title:"With background",toggle:!0}]}render(){var e,n,r;return(((e=this.config.features)==null?void 0:e.caption)===!0||((n=this.config.features)==null?void 0:n.caption)===void 0||((r=this.config.features)==null?void 0:r.caption)==="optional"&&this.data.caption)&&this.ui.applyTune("caption",!0),this.ui.render(this.data)}validate(e){return!!e.file.url}save(){const e=this.ui.nodes.caption;return this._data.caption=e.innerHTML,this.data}renderSettings(){var e;const n=$E.tunes.concat(this.config.actions||[]),r={border:"withBorder",background:"withBackground",stretch:"stretched",caption:"caption"};return((e=this.config.features)==null?void 0:e.caption)==="optional"&&n.push({name:"caption",icon:DK,title:"With caption",toggle:!0}),n.filter(i=>{var o,a;const s=Object.keys(r).find(c=>r[c]===i.name);return s==="caption"?((o=this.config.features)==null?void 0:o.caption)!==!1:s==null||((a=this.config.features)==null?void 0:a[s])!==!1}).map(i=>({icon:i.icon,label:this.api.i18n.t(i.title),name:i.name,toggle:i.toggle,isActive:this.data[i.name],onActivate:()=>{if(typeof i.action=="function"){i.action(i.name);return}this.tuneToggled(i.name)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(e){switch(e.type){case"tag":{const n=e.detail.data;if(/^blob:/.test(n.src)){const r=await(await fetch(n.src)).blob();this.uploadFile(r);break}this.uploadUrl(n.src);break}case"pattern":{const n=e.detail.data;this.uploadUrl(n);break}case"file":{const n=e.detail.file;this.uploadFile(n);break}}}set data(e){this.image=e.file,this._data.caption=e.caption||"",this.ui.fillCaption(this._data.caption),$E.tunes.forEach(({name:n})=>{const r=typeof e[n]<"u"?e[n]===!0||e[n]==="true":!1;this.setTune(n,r)})}get data(){return this._data}set image(e){this._data.file=e||{url:""},e&&e.url&&this.ui.fillImage(e.url)}onUpload(e){e.success&&e.file?this.image=e.file:this.uploadingFailed("incorrect response: "+JSON.stringify(e))}uploadingFailed(e){console.log("Image Tool: uploading failed because of",e),this.api.notifier.show({message:this.api.i18n.t("Couldnt upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(e){this.setTune(e,!this._data[e]),e==="caption"&&!this._data[e]&&(this._data.caption="",this.ui.fillCaption(""))}setTune(e,n){this._data[e]=n,this.ui.applyTune(e,n),e==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=n}).catch(r=>{console.error(r)})}uploadFile(e){this.uploader.uploadByFile(e,{onPreview:n=>{this.ui.showPreloader(n)}})}uploadUrl(e){this.ui.showPreloader(e),this.uploader.uploadByUrl(e)}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const BK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',jK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',FK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',HK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',zK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',$K='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',UK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let WK=class{constructor({data:e,config:n,api:r,readOnly:i}){this.api=r,this.readOnly=i,this._settings=n,this._data=this.normalizeData(e),this._element=this.getTag()}get _CSS(){return{block:this.api.styles.block,wrapper:"ce-header"}}isHeaderData(e){return e.text!==void 0}normalizeData(e){const n={text:"",level:this.defaultLevel.number};return this.isHeaderData(e)&&(n.text=e.text||"",e.level!==void 0&&!isNaN(parseInt(e.level.toString()))&&(n.level=parseInt(e.level.toString()))),n}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number,render:()=>document.createElement("div")}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){this._element.insertAdjacentHTML("beforeend",e.text)}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const n=this.getTag();n.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(n,this._element),this._element=n}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(n=>n.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(n=>n.number===this._settings.defaultLevel);if(e)return e;console.warn("('-') Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:BK},{number:2,tag:"H2",svg:jK},{number:3,tag:"H3",svg:FK},{number:4,tag:"H4",svg:HK},{number:5,tag:"H5",svg:zK},{number:6,tag:"H6",svg:$K}];return this._settings.levels?e.filter(n=>this._settings.levels.includes(n.number)):e}onPaste(e){const n=e.detail;if("data"in n){const r=n.data;let i=this.defaultLevel.number;switch(r.tagName){case"H1":i=1;break;case"H2":i=2;break;case"H3":i=3;break;case"H4":i=4;break;case"H5":i=5;break;case"H6":i=6;break}this._settings.levels&&(i=this._settings.levels.reduce((o,a)=>Math.abs(a-i)<Math.abs(o-i)?a:o)),this.data={level:i,text:r.innerHTML}}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:UK,title:"Heading"}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.cdx-checklist{gap:6px;display:flex;flex-direction:column}.cdx-checklist__item{display:flex;box-sizing:content-box;align-items:flex-start}.cdx-checklist__item-text{outline:none;flex-grow:1;line-height:1.57em}.cdx-checklist__item-checkbox{width:22px;height:22px;display:flex;align-items:center;margin-right:8px;margin-top:calc(.785em - 11px);cursor:pointer}.cdx-checklist__item-checkbox svg{opacity:0;height:20px;width:20px;position:absolute;left:-1px;top:-1px;max-height:20px}@media (hover: hover){.cdx-checklist__item-checkbox:not(.cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check svg{opacity:1}}.cdx-checklist__item-checkbox-check{cursor:pointer;display:inline-block;flex-shrink:0;position:relative;width:20px;height:20px;box-sizing:border-box;margin-left:0;border-radius:5px;border:1px solid #C9C9C9;background:#fff}.cdx-checklist__item-checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:#369fff;visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}@media (hover: hover){.cdx-checklist__item--checked .cdx-checklist__item-checkbox:not(.cdx-checklist__item--checked .cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check{background:#0059AB;border-color:#0059ab}}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check{background:#369FFF;border-color:#369fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg{opacity:1}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg path{stroke:#fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const YK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',GK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';function O2(){const t=document.activeElement,e=window.getSelection().getRangeAt(0),n=e.cloneRange();return n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),n.extractContents()}function XK(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}function wf(t,e=null,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const i in n)r[i]=n[i];return r}function A2(t){return t.innerHTML.replace("<br>"," ").trim()}function _2(t,e=!1,n=void 0){const r=document.createRange(),i=window.getSelection();r.selectNodeContents(t),n!==void 0&&(r.setStart(t,n),r.setEnd(t,n)),r.collapse(e),i.removeAllRanges(),i.addRange(r)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});let KK=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:GK,title:"Checklist"}}static get conversionConfig(){return{export:e=>e.items.map(({text:n})=>n).join(". "),import:e=>({items:[{text:e,checked:!1}]})}}constructor({data:e,config:n,api:r,readOnly:i}){this._elements={wrapper:null,items:[]},this.readOnly=i,this.api=r,this.data=e||{}}render(){return this._elements.wrapper=wf("div",[this.CSS.baseBlock,this.CSS.wrapper]),this.data.items||(this.data.items=[{text:"",checked:!1}]),this.data.items.forEach(e=>{const n=this.createChecklistItem(e);this._elements.wrapper.appendChild(n)}),this.readOnly?this._elements.wrapper:(this._elements.wrapper.addEventListener("keydown",e=>{const[n,r]=[13,8];switch(e.keyCode){case n:this.enterPressed(e);break;case r:this.backspace(e);break}},!1),this._elements.wrapper.addEventListener("click",e=>{this.toggleCheckbox(e)}),this._elements.wrapper)}save(){let e=this.items.map(n=>{const r=this.getItemInput(n);return{text:A2(r),checked:n.classList.contains(this.CSS.itemChecked)}});return e=e.filter(n=>n.text.trim().length!==0),{items:e}}validate(e){return!!e.items.length}toggleCheckbox(e){const n=e.target.closest(`.${this.CSS.item}`),r=n.querySelector(`.${this.CSS.checkboxContainer}`);r.contains(e.target)&&(n.classList.toggle(this.CSS.itemChecked),r.classList.add(this.CSS.noHover),r.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(r),{once:!0}))}createChecklistItem(e={}){const n=wf("div",this.CSS.item),r=wf("span",this.CSS.checkbox),i=wf("div",this.CSS.checkboxContainer),o=wf("div",this.CSS.textField,{innerHTML:e.text?e.text:"",contentEditable:!this.readOnly});return e.checked&&n.classList.add(this.CSS.itemChecked),r.innerHTML=YK,i.appendChild(r),n.appendChild(i),n.appendChild(o),n}enterPressed(e){e.preventDefault();const n=this.items,r=document.activeElement.closest(`.${this.CSS.item}`);if(n.indexOf(r)===n.length-1&&A2(this.getItemInput(r)).length===0){const s=this.api.blocks.getCurrentBlockIndex();r.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(s+1);return}const i=O2(),o=XK(i),a=this.createChecklistItem({text:o,checked:!1});this._elements.wrapper.insertBefore(a,r.nextSibling),_2(this.getItemInput(a),!0)}backspace(e){const n=e.target.closest(`.${this.CSS.item}`),r=this.items.indexOf(n),i=this.items[r-1];if(!i||window.getSelection().focusOffset!==0)return;e.preventDefault();const o=O2(),a=this.getItemInput(i),s=a.childNodes.length;a.appendChild(o),_2(a,void 0,s),n.remove()}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",noHover:"cdx-checklist__item-checkbox--no-hover",checkbox:"cdx-checklist__item-checkbox-check",textField:"cdx-checklist__item-text",checkboxContainer:"cdx-checklist__item-checkbox"}}get items(){return Array.from(this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`))}removeSpecialHoverBehavior(e){e.classList.remove(this.CSS.noHover)}getItemInput(e){return e.querySelector(`.${this.CSS.textField}`)}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const ZK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',JK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',QK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>';var Mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VK(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Im={},xw={},Cw={};Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.allInputsSelector=qK;function qK(){var t=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+t.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allInputsSelector=void 0;var e=Cw;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(xw);var uc={},Sw={};Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.isNativeInput=eZ;function eZ(t){var e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeInput=void 0;var e=Sw;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(uc);var D2={},kw={};Object.defineProperty(kw,"__esModule",{value:!0}),kw.append=tZ;function tZ(t,e){Array.isArray(e)?e.forEach(function(n){t.appendChild(n)}):t.appendChild(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.append=void 0;var e=kw;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return e.append}})})(D2);var Ew={},Tw={};Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.blockElements=nZ;function nZ(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.blockElements=void 0;var e=Tw;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Ew);var N2={},Mw={};Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.calculateBaseline=rZ;function rZ(t){var e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,i=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),a=parseFloat(e.marginTop),s=n*.8,c=(r-n)/2,l=a+o+i+c+s;return l}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBaseline=void 0;var e=Mw;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(N2);var P2={},Iw={},Ow={},Aw={};Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.isContentEditable=iZ;function iZ(t){return t.contentEditable==="true"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isContentEditable=void 0;var e=Aw;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Ow),Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.canSetCaret=sZ;var oZ=uc,aZ=Ow;function sZ(t){var e=!0;if((0,oZ.isNativeInput)(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,aZ.isContentEditable)(t);return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.canSetCaret=void 0;var e=Iw;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(P2);var Om={},_w={};function lZ(t,e,n){const r=n.value!==void 0?"value":"get",i=n[r],o=`#${e}Cache`;if(n[r]=function(...a){return this[o]===void 0&&(this[o]=i.apply(this,a)),this[o]},r==="get"&&n.set){const a=n.set;n.set=function(s){delete t[o],a.apply(this,s)}}return n}function L2(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e!==void 0&&(t[e]=!0),t}function Dw(t){return t!=null&&t!==""&&(typeof t!="object"||Object.keys(t).length>0)}function cZ(t){return!Dw(t)}const uZ=()=>typeof window<"u"&&window.navigator!==null&&Dw(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function dZ(t){const e=L2();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function fZ(t){return t[0].toUpperCase()+t.slice(1)}function hZ(t){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=t,document.body.appendChild(e);const n=window.getSelection(),r=document.createRange();if(r.selectNode(e),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function pZ(t,e,n){let r;return(...i)=>{const o=this,a=()=>{r=void 0,n!==!0&&t.apply(o,i)},s=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(a,e),s&&t.apply(o,i)}}function el(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function mZ(t){return el(t)==="boolean"}function R2(t){return el(t)==="function"||el(t)==="asyncfunction"}function gZ(t){return R2(t)&&/^\s*class\s+/.test(t.toString())}function vZ(t){return el(t)==="number"}function Am(t){return el(t)==="object"}function yZ(t){return Promise.resolve(t)===t}function bZ(t){return el(t)==="string"}function wZ(t){return el(t)==="undefined"}function Nw(t,...e){if(!e.length)return t;const n=e.shift();if(Am(t)&&Am(n))for(const r in n)Am(n[r])?(t[r]===void 0&&Object.assign(t,{[r]:{}}),Nw(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Nw(t,...e)}function xZ(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&console.warn(r)}function CZ(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function SZ(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}const kZ={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},EZ={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let TZ=class{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}};function MZ(t,e,n=void 0){let r,i,o,a=null,s=0;n||(n={});const c=function(){s=n.leading===!1?0:Date.now(),a=null,o=t.apply(r,i),a===null&&(r=i=null)};return function(){const l=Date.now();!s&&n.leading===!1&&(s=l);const d=e-(l-s);return r=this,i=arguments,d<=0||d>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a===null&&(r=i=null)):!a&&n.trailing!==!1&&(a=setTimeout(c,d)),o}}const IZ=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:TZ,beautifyShortcut:dZ,cacheable:lZ,capitalize:fZ,copyTextToClipboard:hZ,debounce:pZ,deepMerge:Nw,deprecationAssert:xZ,getUserOS:L2,getValidUrl:CZ,isBoolean:mZ,isClass:gZ,isEmpty:cZ,isFunction:R2,isIosDevice:uZ,isNumber:vZ,isObject:Am,isPrintableKey:SZ,isPromise:yZ,isString:bZ,isUndefined:wZ,keyCodes:kZ,mouseButtons:EZ,notEmpty:Dw,throttle:MZ,typeOf:el},Symbol.toStringTag,{value:"Module"})),Pw=VK(IZ);Object.defineProperty(_w,"__esModule",{value:!0}),_w.containsOnlyInlineElements=_Z;var OZ=Pw,AZ=Ew;function _Z(t){var e;(0,OZ.isString)(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;var n=function(r){return!(0,AZ.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(n)};return Array.from(e.children).every(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.containsOnlyInlineElements=void 0;var e=_w;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Om);var B2={},Lw={},_m={},Rw={};Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.make=DZ;function DZ(t,e,n){var r;e===void 0&&(e=null),n===void 0&&(n={});var i=document.createElement(t);if(Array.isArray(e)){var o=e.filter(function(s){return s!==void 0});(r=i.classList).add.apply(r,o)}else e!==null&&i.classList.add(e);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a]);return i}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.make=void 0;var e=Rw;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return e.make}})})(_m),Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.fragmentToString=PZ;var NZ=_m;function PZ(t){var e=(0,NZ.make)("div");return e.appendChild(t),e.innerHTML}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentToString=void 0;var e=Lw;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(B2);var j2={},Bw={};Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.getContentLength=RZ;var LZ=uc;function RZ(t){var e,n;return(0,LZ.isNativeInput)(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:(n=(e=t.textContent)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLength=void 0;var e=Bw;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(j2);var jw={},Fw={},F2=Mm&&Mm.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.getDeepestBlockElements=H2;var BZ=Om;function H2(t){return(0,BZ.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce(function(e,n){return F2(F2([],e,!0),H2(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestBlockElements=void 0;var e=Fw;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(jw);var z2={},Hw={},Dm={},zw={};Object.defineProperty(zw,"__esModule",{value:!0}),zw.isLineBreakTag=jZ;function jZ(t){return["BR","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLineBreakTag=void 0;var e=zw;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Dm);var Nm={},$w={};Object.defineProperty($w,"__esModule",{value:!0}),$w.isSingleTag=FZ;function FZ(t){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleTag=void 0;var e=$w;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Nm),Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.getDeepestNode=$2;var HZ=uc,zZ=Dm,$Z=Nm;function $2(t,e){e===void 0&&(e=!1);var n=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[n]){var i=t[n];if((0,$Z.isSingleTag)(i)&&!(0,HZ.isNativeInput)(i)&&!(0,zZ.isLineBreakTag)(i))if(i[r])i=i[r];else if(i.parentNode!==null&&i.parentNode[r])i=i.parentNode[r];else return i.parentNode;return $2(i,e)}return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestNode=void 0;var e=Hw;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(z2);var U2={},Uw={},Pm=Mm&&Mm.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.findAllInputs=XZ;var UZ=Om,WZ=jw,YZ=xw,GZ=uc;function XZ(t){return Array.from(t.querySelectorAll((0,YZ.allInputsSelector)())).reduce(function(e,n){return(0,GZ.isNativeInput)(n)||(0,UZ.containsOnlyInlineElements)(n)?Pm(Pm([],e,!0),[n],!1):Pm(Pm([],e,!0),(0,WZ.getDeepestBlockElements)(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAllInputs=void 0;var e=Uw;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(U2);var W2={},Ww={};Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.isCollapsedWhitespaces=KZ;function KZ(t){return!/[^\t\n\r ]/.test(t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsedWhitespaces=void 0;var e=Ww;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(W2);var Yw={},Gw={};Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.isElement=JZ;var ZZ=Pw;function JZ(t){return(0,ZZ.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.ELEMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;var e=Gw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(Yw);var Y2={},Xw={},Kw={},Zw={};Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.isLeaf=QZ;function QZ(t){return t===null?!1:t.childNodes.length===0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaf=void 0;var e=Zw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(Kw);var Jw={},Qw={};Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.isNodeEmpty=nJ;var VZ=Dm,qZ=Yw,eJ=uc,tJ=Nm;function nJ(t,e){var n="";return(0,tJ.isSingleTag)(t)&&!(0,VZ.isLineBreakTag)(t)?!1:((0,qZ.isElement)(t)&&(0,eJ.isNativeInput)(t)?n=t.value:t.textContent!==null&&(n=t.textContent.replace("","")),e!==void 0&&(n=n.replace(new RegExp(e,"g"),"")),n.trim().length===0)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=void 0;var e=Qw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(Jw),Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.isEmpty=oJ;var rJ=Kw,iJ=Jw;function oJ(t,e){t.normalize();for(var n=[t];n.length>0;){var r=n.shift();if(r){if(t=r,(0,rJ.isLeaf)(t)&&!(0,iJ.isNodeEmpty)(t,e))return!1;n.push.apply(n,Array.from(t.childNodes))}}return!0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var e=Xw;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(Y2);var G2={},Vw={};Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.isFragment=sJ;var aJ=Pw;function sJ(t){return(0,aJ.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFragment=void 0;var e=Vw;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(G2);var X2={},qw={};Object.defineProperty(qw,"__esModule",{value:!0}),qw.isHTMLString=cJ;var lJ=_m;function cJ(t){var e=(0,lJ.make)("div");return e.innerHTML=t,e.childElementCount>0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=void 0;var e=qw;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(X2);var K2={},ex={};Object.defineProperty(ex,"__esModule",{value:!0}),ex.offset=uJ;function uJ(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,i=e.top+r,o=e.left+n;return{top:i,left:o,bottom:i+e.height,right:o+e.width}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offset=void 0;var e=ex;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return e.offset}})})(K2);var Z2={},tx={};Object.defineProperty(tx,"__esModule",{value:!0}),tx.prepend=dJ;function dJ(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(n){return t.prepend(n)})):t.prepend(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=void 0;var e=tx;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(Z2),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.offset=t.make=t.isLineBreakTag=t.isSingleTag=t.isNodeEmpty=t.isLeaf=t.isHTMLString=t.isFragment=t.isEmpty=t.isElement=t.isContentEditable=t.isCollapsedWhitespaces=t.findAllInputs=t.isNativeInput=t.allInputsSelector=t.getDeepestNode=t.getDeepestBlockElements=t.getContentLength=t.fragmentToString=t.containsOnlyInlineElements=t.canSetCaret=t.calculateBaseline=t.blockElements=t.append=void 0;var e=xw;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var n=uc;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=D2;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return r.append}});var i=Ew;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var o=N2;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var a=P2;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return a.canSetCaret}});var s=Om;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return s.containsOnlyInlineElements}});var c=B2;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return c.fragmentToString}});var l=j2;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return l.getContentLength}});var d=jw;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return d.getDeepestBlockElements}});var f=z2;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return f.getDeepestNode}});var b=U2;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return b.findAllInputs}});var x=W2;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return x.isCollapsedWhitespaces}});var k=Ow;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return k.isContentEditable}});var E=Yw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return E.isElement}});var m=Y2;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return m.isEmpty}});var h=G2;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return h.isFragment}});var g=X2;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return g.isHTMLString}});var w=Kw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return w.isLeaf}});var p=Jw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return p.isNodeEmpty}});var v=Dm;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return v.isLineBreakTag}});var y=Nm;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return y.isSingleTag}});var S=_m;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return S.make}});var T=K2;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return T.offset}});var C=Z2;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return C.prepend}})}(Im);var J2=(t=>(t.Left="left",t.Center="center",t))(J2||{});let fJ=class wb{constructor({data:e,config:n,api:r,readOnly:i,block:o}){const{DEFAULT_ALIGNMENT:a}=wb;this.api=r,this.readOnly=i,this.quotePlaceholder=r.i18n.t((n==null?void 0:n.quotePlaceholder)??wb.DEFAULT_QUOTE_PLACEHOLDER),this.captionPlaceholder=r.i18n.t((n==null?void 0:n.captionPlaceholder)??wb.DEFAULT_CAPTION_PLACEHOLDER),this.data={text:e.text||"",caption:e.caption||"",alignment:Object.values(J2).includes(e.alignment)?e.alignment:(n==null?void 0:n.defaultAlignment)??a},this.css={baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"},this.block=o}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:QK,title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get DEFAULT_ALIGNMENT(){return"left"}static get conversionConfig(){return{import:"text",export:function(e){return e.caption?`${e.text}  ${e.caption}`:e.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:JK},{name:"center",icon:ZK}]}render(){const e=Im.make("blockquote",[this.css.baseClass,this.css.wrapper]),n=Im.make("div",[this.css.input,this.css.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),r=Im.make("div",[this.css.input,this.css.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return n.dataset.placeholder=this.quotePlaceholder,r.dataset.placeholder=this.captionPlaceholder,e.appendChild(n),e.appendChild(r),e}save(e){const n=e.querySelector(`.${this.css.text}`),r=e.querySelector(`.${this.css.caption}`);return Object.assign(this.data,{text:(n==null?void 0:n.innerHTML)??"",caption:(r==null?void 0:r.innerHTML)??""})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}renderSettings(){const e=n=>n&&n[0].toUpperCase()+n.slice(1);return this.settings.map(n=>({icon:n.icon,label:this.api.i18n.t(`Align ${e(n.name)}`),onActivate:()=>this._toggleTune(n.name),isActive:this.data.alignment===n.name,closeOnActivate:!0}))}_toggleTune(e){this.data.alignment=e,this.block.dispatchChange()}};const hJ=["src"],pJ={__name:"Videojs",props:{src:{type:String,required:!0},poster:String,subtitleUrls:Object,mandatory:Boolean},emits:["loadeddata","end"],setup(t,{emit:e}){const n=u.ref(null);let r;const i=t,o=e,a=u.ref(i.src);return u.onMounted(()=>{const s={fluid:!0,poster:i.poster,playbackRates:[.5,.75,1,1.25,1.5]};r=V2(n.value,s),r.on("loadeddata",c=>o("loadeddata",c)),r.on("ended",function(){o("end",i.src),r.isFullscreen()&&r.exitFullscreen()})}),u.onUnmounted(()=>{r&&r.dispose()}),(s,c)=>(u.openBlock(),u.createElementBlock("video",{class:"video-js",controls:"",playsinline:"",preload:"auto",crossorigin:"anonymous",ref_key:"videoEl",ref:n},[u.createElementVNode("source",{src:a.value},null,8,hJ),c[0]||(c[0]=u.createElementVNode("p",{class:"vjs-no-js"},[u.createTextVNode(" To view this video please enable JavaScript, and consider upgrading to a web browser that "),u.createElementVNode("a",{href:"https://videojs.com/html5-video-support/",target:"_blank"},"supports HTML5 video")],-1))],512))}},Q2='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 489.2 489.2"><path d="M439.6,0h-390C22.2,0,0,22.2,0,49.6v390c0,27.4,22.2,49.6,49.6,49.6h390c27.4,0,49.6-22.2,49.6-49.6V49.7 C489.3,22.3,467,0,439.6,0z M300.6,47.8h42.5v42.5h-42.5V47.8z M223.4,47.8h42.5v42.5h-42.5V47.8L223.4,47.8z M146.1,47.8h42.5 v42.5h-42.5V47.8z M111.3,441.6H68.8v-42.5h42.5V441.6z M111.3,90.3H68.8V47.8h42.5V90.3z M188.6,441.6h-42.5v-42.5h42.5V441.6z M265.8,441.6h-42.5v-42.5h42.5V441.6z M343.1,441.6h-42.5v-42.5h42.5V441.6z M352.5,256.7l-163.1,94.2c-9.2,5.3-20.8-1.3-20.8-12 V150.5c0-10.7,11.6-17.3,20.8-12l163.1,94.2C361.8,238,361.8,251.4,352.5,256.7z M420.4,441.6h-42.5v-42.5h42.5V441.6z M420.4,90.3 h-42.5V47.8h42.5V90.3z"/></svg>';class V2 extends I2{static get toolbox(){return{title:"Video",icon:Q2}}constructor({data:e,config:n,api:r,readOnly:i,block:o}){n.buttonContent=n.buttonContent||`${Q2} ${r.i18n.t("Select a Video")}`,n.types=n.types||"video/*",super({data:e,config:n,api:r,readOnly:i,block:o})}set image(e){this._data.file=e||{},e&&e.url&&this.fillVideo(e.url)}fillVideo(e){const n=u.h(pJ,{src:e,class:this.ui.CSS.imageEl,"data-mutation-free":"true",onLoadeddata:()=>{this.ui.toggleStatus("filled"),this.ui.nodes.imagePreloader&&(this.ui.nodes.imagePreloader.style.backgroundImage="")}});u.render(n,this.ui.nodes.imageContainer)}static get pasteConfig(){return{tags:[{videojs:{src:!0},video:{src:!0}}],patterns:{video:/https?:\/\/\S+\.(mov|ogv|webm|mp4|m4v|m3u8)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["video/*"]}}}async onPaste(e){switch(e.type){case"tag":{const n=e.detail.data;this.uploadUrl(n.getAttribute("src"));break}case"pattern":{const n=e.detail.data;this.uploadUrl(n);break}case"file":{const n=e.detail.file;this.uploadFile(n);break}}}destroy(){u.render(null,this.ui.nodes.imageContainer)}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".cdx-marker{background:rgba(245,235,111,.29);padding:3px 0}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const mJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3536 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3536 9.31802L7.96729 12.7043C7.40889 13.2627 7.02827 13.9739 6.8734 14.7482L6.69798 15.6253C6.55804 16.325 7.17496 16.942 7.87468 16.802L8.75176 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3536 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>';let gJ=class Gh{static get CSS(){return"cdx-marker"}constructor({api:e}){this.api=e,this.button=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}surround(e){if(!e)return;let n=this.api.selection.findParentTag(this.tag,Gh.CSS);n?this.unwrap(n):this.wrap(e)}wrap(e){let n=document.createElement(this.tag);n.classList.add(Gh.CSS),n.appendChild(e.extractContents()),e.insertNode(n),this.api.selection.expandToTag(n)}unwrap(e){this.api.selection.expandToTag(e);let n=window.getSelection(),r=n.getRangeAt(0),i=r.extractContents();e.parentNode.removeChild(e),r.insertNode(i),n.removeAllRanges(),n.addRange(r)}checkState(){const e=this.api.selection.findParentTag(this.tag,Gh.CSS);this.button.classList.toggle(this.iconClasses.active,!!e)}get toolboxIcon(){return mJ}static get sanitize(){return{mark:{class:Gh.CSS}}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".inline-code{background:rgba(250,239,240,.78);color:#b44437;padding:3px 4px;border-radius:5px;margin:0 1px;font-family:inherit;font-size:.86em;font-weight:500;letter-spacing:.3px}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const vJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>';let yJ=class Xh{constructor({api:e}){this.tag="CODE",this.api=e,this.button=null,this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get CSS(){return"inline-code"}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}surround(e){if(!e)return;let n=this.api.selection.findParentTag(this.tag,Xh.CSS);n?this.unwrap(n):this.wrap(e)}wrap(e){let n=document.createElement(this.tag);n.classList.add(Xh.CSS),n.appendChild(e.extractContents()),e.insertNode(n),this.api.selection.expandToTag(n)}unwrap(e){var n;this.api.selection.expandToTag(e);const r=window.getSelection();if(!r)return;const i=r.getRangeAt(0),o=i.extractContents();(n=e.parentNode)==null||n.removeChild(e),i.insertNode(o),r.removeAllRanges(),r.addRange(i)}checkState(){const e=this.api.selection.findParentTag(this.tag,Xh.CSS);return this.button&&this.button.classList.toggle(this.iconClasses.active,!!e),!!e}get toolboxIcon(){return vJ}static get sanitize(){return{code:{class:Xh.CSS}}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".cdx-underline{text-decoration:underline}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const bJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>',q2=class Kh{constructor(e){this.tag="U",this.api=e.api,this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get CSS(){return"cdx-underline"}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}surround(e){if(!e)return;const n=this.api.selection.findParentTag(this.tag,Kh.CSS);n?this.unwrap(n):this.wrap(e)}wrap(e){const n=document.createElement(this.tag);n.classList.add(Kh.CSS),n.appendChild(e.extractContents()),e.insertNode(n),this.api.selection.expandToTag(n)}unwrap(e){var n;this.api.selection.expandToTag(e);const r=window.getSelection();if(!r)return;const i=r.getRangeAt(0);if(!i)return;const o=i.extractContents();o&&((n=e.parentNode)==null||n.removeChild(e),i.insertNode(o),r.removeAllRanges(),r.addRange(i))}checkState(){var e;const n=this.api.selection.findParentTag(this.tag,Kh.CSS);return(e=this.button)==null||e.classList.toggle(this.iconClasses.active,!!n),!!n}get toolboxIcon(){return bJ}static get sanitize(){return{u:{class:Kh.CSS}}}};q2.isInline=!0;let wJ=q2;var nx={exports:{}},e_;function xJ(){return e_||(e_=1,function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="/",i(i.s=5)}([function(n,r,i){var o=i(1);typeof o=="string"&&(o=[[n.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(3)(o,a),o.locals&&(n.exports=o.locals)},function(n,r,i){(n.exports=i(2)(!1)).push([n.i,`.change-case-action {
    z-index: 90;
    user-select: none;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;    
}

.change-case-tool {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    padding: 5px 10px;
    font-size: 14px;
    line-height: 20px;
    font-weight: 500;
    cursor: pointer;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
}

.change-case-tool:hover {
    background: #eff2f5;
}

.change-case-toolbar__label {
    color: #707684;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: .33px;
    padding: 10px 10px 5px;
    text-transform: uppercase;
    cursor: pointer;
}`,""])},function(n,r){n.exports=function(i){var o=[];return o.toString=function(){return this.map(function(a){var s=function(c,l){var d=c[1]||"",f=c[3];if(!f)return d;if(l&&typeof btoa=="function"){var b=(k=f,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),x=f.sources.map(function(E){return"/*# sourceURL="+f.sourceRoot+E+" */"});return[d].concat(x).concat([b]).join(`
`)}var k;return[d].join(`
`)}(a,i);return a[2]?"@media "+a[2]+"{"+s+"}":s}).join("")},o.i=function(a,s){typeof a=="string"&&(a=[[null,a,""]]);for(var c={},l=0;l<this.length;l++){var d=this[l][0];typeof d=="number"&&(c[d]=!0)}for(l=0;l<a.length;l++){var f=a[l];typeof f[0]=="number"&&c[f[0]]||(s&&!f[2]?f[2]=s:s&&(f[2]="("+f[2]+") and ("+s+")"),o.push(f))}},o}},function(n,r,i){var o,a,s={},c=(o=function(){return window&&document&&document.all&&!window.atob},function(){return a===void 0&&(a=o.apply(this,arguments)),a}),l=function(T){var C={};return function(M){if(typeof M=="function")return M();if(C[M]===void 0){var A=(function(P){return document.querySelector(P)}).call(this,M);if(window.HTMLIFrameElement&&A instanceof window.HTMLIFrameElement)try{A=A.contentDocument.head}catch{A=null}C[M]=A}return C[M]}}(),d=null,f=0,b=[],x=i(4);function k(T,C){for(var M=0;M<T.length;M++){var A=T[M],P=s[A.id];if(P){P.refs++;for(var L=0;L<P.parts.length;L++)P.parts[L](A.parts[L]);for(;L<A.parts.length;L++)P.parts.push(p(A.parts[L],C))}else{var R=[];for(L=0;L<A.parts.length;L++)R.push(p(A.parts[L],C));s[A.id]={id:A.id,refs:1,parts:R}}}}function E(T,C){for(var M=[],A={},P=0;P<T.length;P++){var L=T[P],R=C.base?L[0]+C.base:L[0],j={css:L[1],media:L[2],sourceMap:L[3]};A[R]?A[R].parts.push(j):M.push(A[R]={id:R,parts:[j]})}return M}function m(T,C){var M=l(T.insertInto);if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var A=b[b.length-1];if(T.insertAt==="top")A?A.nextSibling?M.insertBefore(C,A.nextSibling):M.appendChild(C):M.insertBefore(C,M.firstChild),b.push(C);else if(T.insertAt==="bottom")M.appendChild(C);else{if(typeof T.insertAt!="object"||!T.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var P=l(T.insertInto+" "+T.insertAt.before);M.insertBefore(C,P)}}function h(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T);var C=b.indexOf(T);C>=0&&b.splice(C,1)}function g(T){var C=document.createElement("style");return T.attrs.type===void 0&&(T.attrs.type="text/css"),w(C,T.attrs),m(T,C),C}function w(T,C){Object.keys(C).forEach(function(M){T.setAttribute(M,C[M])})}function p(T,C){var M,A,P,L;if(C.transform&&T.css){if(!(L=C.transform(T.css)))return function(){};T.css=L}if(C.singleton){var R=f++;M=d||(d=g(C)),A=S.bind(null,M,R,!1),P=S.bind(null,M,R,!0)}else T.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(M=function(j){var z=document.createElement("link");return j.attrs.type===void 0&&(j.attrs.type="text/css"),j.attrs.rel="stylesheet",w(z,j.attrs),m(j,z),z}(C),A=(function(j,z,$){var Y=$.css,ae=$.sourceMap,K=z.convertToAbsoluteUrls===void 0&&ae;(z.convertToAbsoluteUrls||K)&&(Y=x(Y)),ae&&(Y+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(ae))))+" */");var te=new Blob([Y],{type:"text/css"}),G=j.href;j.href=URL.createObjectURL(te),G&&URL.revokeObjectURL(G)}).bind(null,M,C),P=function(){h(M),M.href&&URL.revokeObjectURL(M.href)}):(M=g(C),A=(function(j,z){var $=z.css,Y=z.media;if(Y&&j.setAttribute("media",Y),j.styleSheet)j.styleSheet.cssText=$;else{for(;j.firstChild;)j.removeChild(j.firstChild);j.appendChild(document.createTextNode($))}}).bind(null,M),P=function(){h(M)});return A(T),function(j){if(j){if(j.css===T.css&&j.media===T.media&&j.sourceMap===T.sourceMap)return;A(T=j)}else P()}}n.exports=function(T,C){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(C=C||{}).attrs=typeof C.attrs=="object"?C.attrs:{},C.singleton||typeof C.singleton=="boolean"||(C.singleton=c()),C.insertInto||(C.insertInto="head"),C.insertAt||(C.insertAt="bottom");var M=E(T,C);return k(M,C),function(A){for(var P=[],L=0;L<M.length;L++){var R=M[L];(j=s[R.id]).refs--,P.push(j)}for(A&&k(E(A,C),C),L=0;L<P.length;L++){var j;if((j=P[L]).refs===0){for(var z=0;z<j.parts.length;z++)j.parts[z]();delete s[j.id]}}}};var v,y=(v=[],function(T,C){return v[T]=C,v.filter(Boolean).join(`
`)});function S(T,C,M,A){var P=M?"":A.css;if(T.styleSheet)T.styleSheet.cssText=y(C,P);else{var L=document.createTextNode(P),R=T.childNodes;R[C]&&T.removeChild(R[C]),R.length?T.insertBefore(L,R[C]):T.appendChild(L)}}},function(n,r){n.exports=function(i){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var a=o.protocol+"//"+o.host,s=a+o.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(c,l){var d,f=l.trim().replace(/^"(.*)"$/,function(b,x){return x}).replace(/^'(.*)'$/,function(b,x){return x});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(f)?c:(d=f.indexOf("//")===0?f:f.indexOf("/")===0?a+f:s+f.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(n,r,i){i.r(r),i(0);function o(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function a(c,l,d){return l&&o(c.prototype,l),d&&o(c,d),c}i.d(r,"default",function(){return s});var s=function(){function c(l){var d=l.config,f=l.api;(function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")})(this,c),this.api=f,this.button=null,this.optionButtons=[],this._state=!0,this.selectedText=null,this.range=null,this._settings=d,this.CSS={actions:"change-case-action",toolbarLabel:"change-case-toolbar__label",tool:"change-case-tool",toolbarBtnActive:this.api.styles.settingsButtonActive,inlineButton:this.api.styles.inlineToolButton},this.caseOptions={titleCase:"Title Case",lowerCase:"lower case",upperCase:"UPPER CASE",localeLowerCase:"local lower cas",localeUpperCase:"LCALE UPPER CASE",sentenceCase:"Sentence case",toggleCase:"tOOGLE cASE"}}return a(c,[{key:"state",get:function(){return this._state}}],[{key:"isInline",get:function(){return!0}}]),a(c,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 100 100" stroke="currentColor">
            <path d="m46.099 74.271-3.6868-13.686h-18.523l-3.6868 13.686h-11.605l17.934-57.653h13.17l18.001 57.653zm-6.2632-23.813q-5.0972-18.612-5.7524-21.056c-0.42199-1.6168-0.73293-2.9077-0.91061-3.8477q-1.1105 5.0133-6.5741 24.828z" stroke-width="1.1797"/>
            <path d="m87.355 74.271-2.4938-8.4556h-12.529l-2.4938 8.4556h-7.8496l12.131-35.619h8.9087l12.176 35.619zm-4.2365-14.712q-3.4478-11.499-3.891-13.009c-0.28544-0.99887-0.49576-1.7964-0.61595-2.3772q-0.75116 3.0973-4.4469 15.339z" stroke-width=".76265"/>
            </svg>`,this.button.classList.add(this.CSS.inlineButton),this.button}},{key:"checkState",value:function(l){l.anchorNode}},{key:"convertCase",value:function(l,d){var f=this;if(l){var b=l.cloneContents();b&&(b.childNodes.forEach(function(x){if(x.nodeName==="#text")switch(d){case"titleCase":x.textContent=x.textContent.replace(/\w\S*/g,function(k){return k.charAt(0).toUpperCase()+k.slice(1,k.length).toLowerCase()});break;case"lowerCase":x.textContent=function(k){return k.toLowerCase()}(x.textContent);break;case"upperCase":x.textContent=function(k){return k.toUpperCase()}(x.textContent);break;case"localeLowerCase":x.textContent=function(k,E){return k.toLocaleLowerCase(E)}(x.textContent,f._settings.locale);break;case"localeUpperCase":x.textContent=function(k,E){return k.toLocaleUpperCase(E)}(x.textContent,f._settings.locale);break;case"sentenceCase":x.textContent=function(k){return k.charAt(0).toUpperCase()+k.slice(1,k.length).toLowerCase()}(x.textContent);break;case"toggleCase":x.textContent=function(k){return k.replace(/\w\S*/g,function(E){return E.charAt(0).toLowerCase()+E.slice(1,E.length).toUpperCase()})}(x.textContent)}}),l.extractContents(),l.insertNode(b),this.api.inlineToolbar.close())}}},{key:"surround",value:function(l){this.selectedText=l.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:l,this.state=!this.actions.hidden}},{key:"renderActions",value:function(){var l=this;this.actions=document.createElement("div"),this.actions.classList.add(this.CSS.actions);var d=document.createElement("div");d.classList.add(this.CSS.toolbarLabel),d.innerHTML="Change Case",this.actions.appendChild(d),this.optionButtons=Object.keys(this.caseOptions).map(function(h){var g=document.createElement("div");return g.classList.add(l.CSS.tool),g.dataset.mode=h,g.innerHTML=l.caseOptions[h],g});var f=!0,b=!1,x=void 0;try{for(var k,E=function(){var h=k.value;l.actions.appendChild(h),l.api.listeners.on(h,"click",function(){l.convertCase(l.range,h.dataset.mode)})},m=this.optionButtons[Symbol.iterator]();!(f=(k=m.next()).done);f=!0)E()}catch(h){b=!0,x=h}finally{try{f||m.return==null||m.return()}finally{if(b)throw x}}return this.actions.hidden=!0,this.actions}},{key:"destroy",value:function(){var l=!0,d=!1,f=void 0;try{for(var b,x=this.optionButtons[Symbol.iterator]();!(l=(b=x.next()).done);l=!0){var k=b.value;this.api.listeners.off(k,"click")}}catch(E){d=!0,f=E}finally{try{l||x.return==null||x.return()}finally{if(d)throw f}}}},{key:"state",set:function(l){this._state=l,this.button.classList.toggle(this.CSS.toolbarBtnActive,l)}},{key:"title",get:function(){return"Change Case"}}]),c}()}])})}(nx)),nx.exports}var CJ=xJ();const SJ=ec(CJ);var rx={exports:{}},t_;function kJ(){return t_||(t_=1,function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="/",i(i.s=4)}([function(n,r,i){var o=i(1),a=i(2);typeof(a=a.__esModule?a.default:a)=="string"&&(a=[[n.i,a,""]]);var s={insert:"head",singleton:!1};o(a,s),n.exports=a.locals||{}},function(n,r,i){var o,a=function(){return o===void 0&&(o=!!(window&&document&&document.all&&!window.atob)),o},s=function(){var w={};return function(p){if(w[p]===void 0){var v=document.querySelector(p);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}w[p]=v}return w[p]}}(),c=[];function l(w){for(var p=-1,v=0;v<c.length;v++)if(c[v].identifier===w){p=v;break}return p}function d(w,p){for(var v={},y=[],S=0;S<w.length;S++){var T=w[S],C=p.base?T[0]+p.base:T[0],M=v[C]||0,A="".concat(C," ").concat(M);v[C]=M+1;var P=l(A),L={css:T[1],media:T[2],sourceMap:T[3]};P!==-1?(c[P].references++,c[P].updater(L)):c.push({identifier:A,updater:g(L,p),references:1}),y.push(A)}return y}function f(w){var p=document.createElement("style"),v=w.attributes||{};if(v.nonce===void 0){var y=i.nc;y&&(v.nonce=y)}if(Object.keys(v).forEach(function(T){p.setAttribute(T,v[T])}),typeof w.insert=="function")w.insert(p);else{var S=s(w.insert||"head");if(!S)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");S.appendChild(p)}return p}var b,x=(b=[],function(w,p){return b[w]=p,b.filter(Boolean).join(`
`)});function k(w,p,v,y){var S=v?"":y.media?"@media ".concat(y.media," {").concat(y.css,"}"):y.css;if(w.styleSheet)w.styleSheet.cssText=x(p,S);else{var T=document.createTextNode(S),C=w.childNodes;C[p]&&w.removeChild(C[p]),C.length?w.insertBefore(T,C[p]):w.appendChild(T)}}function E(w,p,v){var y=v.css,S=v.media,T=v.sourceMap;if(S?w.setAttribute("media",S):w.removeAttribute("media"),T&&btoa&&(y+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(T))))," */")),w.styleSheet)w.styleSheet.cssText=y;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(y))}}var m=null,h=0;function g(w,p){var v,y,S;if(p.singleton){var T=h++;v=m||(m=f(p)),y=k.bind(null,v,T,!1),S=k.bind(null,v,T,!0)}else v=f(p),y=E.bind(null,v,p),S=function(){(function(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C)})(v)};return y(w),function(C){if(C){if(C.css===w.css&&C.media===w.media&&C.sourceMap===w.sourceMap)return;y(w=C)}else S()}}n.exports=function(w,p){(p=p||{}).singleton||typeof p.singleton=="boolean"||(p.singleton=a());var v=d(w=w||[],p);return function(y){if(y=y||[],Object.prototype.toString.call(y)==="[object Array]"){for(var S=0;S<v.length;S++){var T=l(v[S]);c[T].references--}for(var C=d(y,p),M=0;M<v.length;M++){var A=l(v[M]);c[A].references===0&&(c[A].updater(),c.splice(A,1))}v=C}}}},function(n,r,i){(r=i(3)(!1)).push([n.i,`.cdx-strikethrough {
    text-decoration: line-through;
}
`,""]),n.exports=r},function(n,r,i){n.exports=function(o){var a=[];return a.toString=function(){return this.map(function(s){var c=function(l,d){var f=l[1]||"",b=l[3];if(!b)return f;if(d&&typeof btoa=="function"){var x=(E=b,m=btoa(unescape(encodeURIComponent(JSON.stringify(E)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(h," */")),k=b.sources.map(function(g){return"/*# sourceURL=".concat(b.sourceRoot||"").concat(g," */")});return[f].concat(k).concat([x]).join(`
`)}var E,m,h;return[f].join(`
`)}(s,o);return s[2]?"@media ".concat(s[2]," {").concat(c,"}"):c}).join("")},a.i=function(s,c,l){typeof s=="string"&&(s=[[null,s,""]]);var d={};if(l)for(var f=0;f<this.length;f++){var b=this[f][0];b!=null&&(d[b]=!0)}for(var x=0;x<s.length;x++){var k=[].concat(s[x]);l&&d[k[0]]||(c&&(k[2]?k[2]="".concat(c," and ").concat(k[2]):k[2]=c),a.push(k))}},a}},function(n,r,i){i.r(r),i.d(r,"default",function(){return s}),i(0);function o(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function a(c,l,d){return l&&o(c.prototype,l),d&&o(c,d),c}var s=function(){function c(l){var d=l.api;(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")})(this,c),this.api=d,this.button=null,this.tag="S",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return a(c,null,[{key:"CSS",get:function(){return"cdx-strikethrough"}}]),a(c,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(l){if(l){var d=this.api.selection.findParentTag(this.tag,c.CSS);d?this.unwrap(d):this.wrap(l)}}},{key:"wrap",value:function(l){var d=document.createElement(this.tag);d.classList.add(c.CSS),d.appendChild(l.extractContents()),l.insertNode(d),this.api.selection.expandToTag(d)}},{key:"unwrap",value:function(l){this.api.selection.expandToTag(l);var d=window.getSelection(),f=d.getRangeAt(0),b=f.extractContents();l.parentNode.removeChild(l),f.insertNode(b),d.removeAllRanges(),d.addRange(f)}},{key:"checkState",value:function(){var l=this.api.selection.findParentTag(this.tag,c.CSS);this.button.classList.toggle(this.iconClasses.active,!!l)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 8.50001C13.5 7 10.935 6.66476 9.75315 7.79706C9.27092 8.25909 9 8.88574 9 9.53915C9 10.1926 9.27092 10.8192 9.75315 11.2812C10.9835 12.46 13.0165 11.5457 14.2468 12.7244C14.7291 13.1865 15 13.8131 15 14.4665C15 15.1199 14.7291 15.7466 14.2468 16.2086C12.8659 17.5317 10 17.5 9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12H18"/></svg>'}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{s:{class:c.CSS}}}}]),c}()}]).default})}(rx)),rx.exports}var EJ=kJ();const TJ=ec(EJ);var ix={exports:{}};/*! For license information please see bundle.js.LICENSE.txt */var n_;function MJ(){return n_||(n_=1,function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={917:function(a,s){var c,l;c=function(d){var f=function(){function x(k,E){for(var m=0;m<E.length;m++){var h=E[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(k,E,m){return E&&x(k.prototype,E),m&&x(k,m),k}}(),b=function(){function x(k){(function(E,m){if(!(E instanceof m))throw new TypeError("Cannot call a class as a function")})(this,x),this.target=k,this.isContentEditable=k&&k.contentEditable}return f(x,[{key:"getPos",value:function(){if(document.activeElement!==this.target)return-1;if(this.isContentEditable==="true"){this.target.focus();var k=document.getSelection().getRangeAt(0),E=k.cloneRange();return E.selectNodeContents(this.target),E.setEnd(k.endContainer,k.endOffset),E.toString().length}return this.target.selectionStart}},{key:"setPos",value:function(k){if(this.isContentEditable==="true"){if(k>=0){var E=window.getSelection(),m=this.createRange(this.target,{count:k});m&&(m.collapse(!1),E.removeAllRanges(),E.addRange(m))}}else this.target.setSelectionRange(k,k)}},{key:"createRange",value:function(k,E,m){if(m||((m=document.createRange()).selectNode(k),m.setStart(k,0)),E.count===0)m.setEnd(k,E.count);else if(k&&E.count>0)if(k.nodeType===Node.TEXT_NODE)k.textContent.length<E.count?E.count-=k.textContent.length:(m.setEnd(k,E.count),E.count=0);else for(var h=0;h<k.childNodes.length&&(m=this.createRange(k.childNodes[h],E,m),E.count!==0);h++);return m}}]),x}();d.exports=b},(l=c.apply(s,[a]))===void 0||(a.exports=l)},442:(a,s,c)=>{a.exports=c(917)},633:(a,s,c)=>{var l=c(738).default;function d(){a.exports=d=function(){return b},a.exports.__esModule=!0,a.exports.default=a.exports;var f,b={},x=Object.prototype,k=x.hasOwnProperty,E=Object.defineProperty||function(ce,V,ne){ce[V]=ne.value},m=typeof Symbol=="function"?Symbol:{},h=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";function p(ce,V,ne){return Object.defineProperty(ce,V,{value:ne,enumerable:!0,configurable:!0,writable:!0}),ce[V]}try{p({},"")}catch{p=function(V,ne,Q){return V[ne]=Q}}function v(ce,V,ne,Q){var Z=V&&V.prototype instanceof P?V:P,he=Object.create(Z.prototype),X=new be(Q||[]);return E(he,"_invoke",{value:te(ce,ne,X)}),he}function y(ce,V,ne){try{return{type:"normal",arg:ce.call(V,ne)}}catch(Q){return{type:"throw",arg:Q}}}b.wrap=v;var S="suspendedStart",T="suspendedYield",C="executing",M="completed",A={};function P(){}function L(){}function R(){}var j={};p(j,h,function(){return this});var z=Object.getPrototypeOf,$=z&&z(z(de([])));$&&$!==x&&k.call($,h)&&(j=$);var Y=R.prototype=P.prototype=Object.create(j);function ae(ce){["next","throw","return"].forEach(function(V){p(ce,V,function(ne){return this._invoke(V,ne)})})}function K(ce,V){function ne(Z,he,X,re){var le=y(ce[Z],ce,he);if(le.type!=="throw"){var fe=le.arg,ke=fe.value;return ke&&l(ke)=="object"&&k.call(ke,"__await")?V.resolve(ke.__await).then(function(q){ne("next",q,X,re)},function(q){ne("throw",q,X,re)}):V.resolve(ke).then(function(q){fe.value=q,X(fe)},function(q){return ne("throw",q,X,re)})}re(le.arg)}var Q;E(this,"_invoke",{value:function(Z,he){function X(){return new V(function(re,le){ne(Z,he,re,le)})}return Q=Q?Q.then(X,X):X()}})}function te(ce,V,ne){var Q=S;return function(Z,he){if(Q===C)throw Error("Generator is already running");if(Q===M){if(Z==="throw")throw he;return{value:f,done:!0}}for(ne.method=Z,ne.arg=he;;){var X=ne.delegate;if(X){var re=G(X,ne);if(re){if(re===A)continue;return re}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(Q===S)throw Q=M,ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);Q=C;var le=y(ce,V,ne);if(le.type==="normal"){if(Q=ne.done?M:T,le.arg===A)continue;return{value:le.arg,done:ne.done}}le.type==="throw"&&(Q=M,ne.method="throw",ne.arg=le.arg)}}}function G(ce,V){var ne=V.method,Q=ce.iterator[ne];if(Q===f)return V.delegate=null,ne==="throw"&&ce.iterator.return&&(V.method="return",V.arg=f,G(ce,V),V.method==="throw")||ne!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+ne+"' method")),A;var Z=y(Q,ce.iterator,V.arg);if(Z.type==="throw")return V.method="throw",V.arg=Z.arg,V.delegate=null,A;var he=Z.arg;return he?he.done?(V[ce.resultName]=he.value,V.next=ce.nextLoc,V.method!=="return"&&(V.method="next",V.arg=f),V.delegate=null,A):he:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,A)}function ue(ce){var V={tryLoc:ce[0]};1 in ce&&(V.catchLoc=ce[1]),2 in ce&&(V.finallyLoc=ce[2],V.afterLoc=ce[3]),this.tryEntries.push(V)}function J(ce){var V=ce.completion||{};V.type="normal",delete V.arg,ce.completion=V}function be(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(ue,this),this.reset(!0)}function de(ce){if(ce||ce===""){var V=ce[h];if(V)return V.call(ce);if(typeof ce.next=="function")return ce;if(!isNaN(ce.length)){var ne=-1,Q=function Z(){for(;++ne<ce.length;)if(k.call(ce,ne))return Z.value=ce[ne],Z.done=!1,Z;return Z.value=f,Z.done=!0,Z};return Q.next=Q}}throw new TypeError(l(ce)+" is not iterable")}return L.prototype=R,E(Y,"constructor",{value:R,configurable:!0}),E(R,"constructor",{value:L,configurable:!0}),L.displayName=p(R,w,"GeneratorFunction"),b.isGeneratorFunction=function(ce){var V=typeof ce=="function"&&ce.constructor;return!!V&&(V===L||(V.displayName||V.name)==="GeneratorFunction")},b.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,R):(ce.__proto__=R,p(ce,w,"GeneratorFunction")),ce.prototype=Object.create(Y),ce},b.awrap=function(ce){return{__await:ce}},ae(K.prototype),p(K.prototype,g,function(){return this}),b.AsyncIterator=K,b.async=function(ce,V,ne,Q,Z){Z===void 0&&(Z=Promise);var he=new K(v(ce,V,ne,Q),Z);return b.isGeneratorFunction(V)?he:he.next().then(function(X){return X.done?X.value:he.next()})},ae(Y),p(Y,w,"Generator"),p(Y,h,function(){return this}),p(Y,"toString",function(){return"[object Generator]"}),b.keys=function(ce){var V=Object(ce),ne=[];for(var Q in V)ne.push(Q);return ne.reverse(),function Z(){for(;ne.length;){var he=ne.pop();if(he in V)return Z.value=he,Z.done=!1,Z}return Z.done=!0,Z}},b.values=de,be.prototype={constructor:be,reset:function(ce){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(J),!ce)for(var V in this)V.charAt(0)==="t"&&k.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=f)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if(ce.type==="throw")throw ce.arg;return this.rval},dispatchException:function(ce){if(this.done)throw ce;var V=this;function ne(le,fe){return he.type="throw",he.arg=ce,V.next=le,fe&&(V.method="next",V.arg=f),!!fe}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var Z=this.tryEntries[Q],he=Z.completion;if(Z.tryLoc==="root")return ne("end");if(Z.tryLoc<=this.prev){var X=k.call(Z,"catchLoc"),re=k.call(Z,"finallyLoc");if(X&&re){if(this.prev<Z.catchLoc)return ne(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return ne(Z.finallyLoc)}else if(X){if(this.prev<Z.catchLoc)return ne(Z.catchLoc,!0)}else{if(!re)throw Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return ne(Z.finallyLoc)}}}},abrupt:function(ce,V){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var Q=this.tryEntries[ne];if(Q.tryLoc<=this.prev&&k.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var Z=Q;break}}Z&&(ce==="break"||ce==="continue")&&Z.tryLoc<=V&&V<=Z.finallyLoc&&(Z=null);var he=Z?Z.completion:{};return he.type=ce,he.arg=V,Z?(this.method="next",this.next=Z.finallyLoc,A):this.complete(he)},complete:function(ce,V){if(ce.type==="throw")throw ce.arg;return ce.type==="break"||ce.type==="continue"?this.next=ce.arg:ce.type==="return"?(this.rval=this.arg=ce.arg,this.method="return",this.next="end"):ce.type==="normal"&&V&&(this.next=V),A},finish:function(ce){for(var V=this.tryEntries.length-1;V>=0;--V){var ne=this.tryEntries[V];if(ne.finallyLoc===ce)return this.complete(ne.completion,ne.afterLoc),J(ne),A}},catch:function(ce){for(var V=this.tryEntries.length-1;V>=0;--V){var ne=this.tryEntries[V];if(ne.tryLoc===ce){var Q=ne.completion;if(Q.type==="throw"){var Z=Q.arg;J(ne)}return Z}}throw Error("illegal catch attempt")},delegateYield:function(ce,V,ne){return this.delegate={iterator:de(ce),resultName:V,nextLoc:ne},this.method==="next"&&(this.arg=f),A}},b}a.exports=d,a.exports.__esModule=!0,a.exports.default=a.exports},738:a=>{function s(c){return a.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},a.exports.__esModule=!0,a.exports.default=a.exports,s(c)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports},756:(a,s,c)=>{var l=c(633)();a.exports=l;try{regeneratorRuntime=l}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}}},r={};function i(a){var s=r[a];if(s!==void 0)return s.exports;var c=r[a]={exports:{}};return n[a].call(c.exports,c,c.exports,i),c.exports}i.n=a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return i.d(s,{a:s}),s},i.d=(a,s)=>{for(var c in s)i.o(s,c)&&!i.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:s[c]})},i.o=(a,s)=>Object.prototype.hasOwnProperty.call(a,s);var o={};return(()=>{function a(v,y,S,T,C,M,A){try{var P=v[M](A),L=P.value}catch(R){return void S(R)}P.done?y(L):Promise.resolve(L).then(T,C)}function s(v){return function(){var y=this,S=arguments;return new Promise(function(T,C){var M=v.apply(y,S);function A(L){a(M,T,C,A,P,"next",L)}function P(L){a(M,T,C,A,P,"throw",L)}A(void 0)})}}function c(v){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},c(v)}function l(v){var y=function(S,T){if(c(S)!="object"||!S)return S;var C=S[Symbol.toPrimitive];if(C!==void 0){var M=C.call(S,"string");if(c(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(S)}(v);return c(y)=="symbol"?y:y+""}function d(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function f(v,y){for(var S=0;S<y.length;S++){var T=y[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,l(T.key),T)}}function b(v,y,S){return y&&f(v.prototype,y),S&&f(v,S),Object.defineProperty(v,"prototype",{writable:!1}),v}i.d(o,{default:()=>p});var x=i(756),k=i.n(x),E=i(442),m=i.n(E),h=function(){return b(function v(y,S,T){d(this,v),this.holder=S,this.observer=null,this.debounceTimer=T,this.mutationDebouncer=this.debounce(function(){y()},this.debounceTimer)},[{key:"setMutationObserver",value:function(){var v=this,y=this.holder.querySelector(".codex-editor__redactor");this.observer=new MutationObserver(function(S){v.mutationHandler(S)}),this.observer.observe(y,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(v){var y=this,S=!1;v.forEach(function(T){switch(T.type){case"childList":T.target===y.holder?y.onDestroy():S=!0;break;case"characterData":S=!0;break;case"attributes":T.target.classList.contains("ce-block")||T.target.classList.contains("tc-toolbox")||(S=!0)}}),S&&this.mutationDebouncer()}},{key:"debounce",value:function(v,y){var S,T=this;return function(){for(var C=arguments.length,M=new Array(C),A=0;A<C;A++)M[A]=arguments[A];var P=T;clearTimeout(S),S=setTimeout(function(){return v.apply(P,M)},y)}}},{key:"onDestroy",value:function(){var v=new CustomEvent("destroy");document.dispatchEvent(v),this.observer.disconnect()}}])}();function g(v,y){var S=Object.keys(v);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(v);y&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(v,C).enumerable})),S.push.apply(S,T)}return S}function w(v){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?arguments[y]:{};y%2?g(Object(S),!0).forEach(function(T){var C,M,A;C=v,M=T,A=S[T],(M=l(M))in C?Object.defineProperty(C,M,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[M]=A}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(S)):g(Object(S)).forEach(function(T){Object.defineProperty(v,T,Object.getOwnPropertyDescriptor(S,T))})}return v}var p=function(){return b(function M(A){var P=this,L=A.editor,R=A.config,j=R===void 0?{}:R,z=A.onUpdate,$=A.maxLength;d(this,M);var Y={maxLength:30,onUpdate:function(){},config:{debounceTimer:200,shortcuts:{undo:["CMD+Z"],redo:["CMD+Y","CMD+SHIFT+Z"]}}},ae=L.blocks,K=L.caret,te=L.configuration,G=te.holder,ue=te.defaultBlock,J=Y.config.shortcuts,be=j.shortcuts,de=w(w({},J),be),ce=Array.isArray(de.undo)?de.undo:[de.undo],V=Array.isArray(de.redo)?de.redo:[de.redo],ne=Y.config.debounceTimer,Q=j.debounceTimer,Z=Q===void 0?ne:Q;this.holder=typeof G=="string"?document.getElementById(G):G,this.editor=L,this.defaultBlock=ue,this.blocks=ae,this.caret=K,this.shouldSaveHistory=!0,this.readOnly=te.readOnly,this.maxLength=$||Y.maxLength,this.onUpdate=z||Y.onUpdate,this.config={debounceTimer:Z,shortcuts:{undo:ce,redo:V}},new h(function(){return P.registerChange()},this.holder,this.config.debounceTimer).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()},[{key:"truncate",value:function(M,A){for(;M.length>A;)M.shift()}},{key:"initialize",value:function(M){var A="blocks"in M?M.blocks:M,P={index:A.length-1,state:A};this.stack[0]=P,this.initialItem=P}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[{type:this.defaultBlock,data:{}}]}],this.position=0,this.onUpdate()}},{key:"setReadOnly",value:function(){var M=this.holder.querySelector(".ce-toolbox");this.readOnly=!M}},{key:"registerChange",value:function(){var M=this;this.setReadOnly(),this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(A){M.editorDidUpdate(A.blocks)&&M.save(A.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(M){var A=this.stack[this.position].state;return!!M.length&&(M.length!==A.length||JSON.stringify(A)!==JSON.stringify(M))}},{key:"save",value:function(M){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var A=this.blocks.getCurrentBlockIndex(),P=this.blocks.getBlocksCount(),L=A;M[A]||(L-=P-M.length);var R=!M[L]||M[L].type!=="paragraph"&&M[L].type!=="header"?null:this.getCaretIndex(A);this.stack.push({index:L,state:M,caretIndex:R}),this.position+=1,this.onUpdate()}},{key:"getCaretIndex",value:function(M){var A=this.holder.getElementsByClassName("ce-block__content");return new(m())(A[M].firstChild).getPos()}},{key:"insertDeletedBlock",value:function(M,A,P){for(var L=0;L<M.length;L+=1)if(!A[L]||M[L].id!==A[L].id){this.blocks.insert(M[L].type,M[L].data,{},L,!0),this.caret.setToBlock(P,"end");break}}},{key:"blockWasDropped",value:function(M,A){return M.length===A.length&&M.some(function(P,L){return P.id!==A[L].id})}},{key:"blockWasSkipped",value:function(M,A){return M.length!==A.length}},{key:"contentChangedInNoFocusBlock",value:function(M,A){return M!==A}},{key:"blockWasDeleted",value:function(M,A){return M.length>A.length}},{key:"contentWasCopied",value:function(M,A,P){return Object.keys(M[P].data).length===0&&JSON.stringify(A[P+1])!==JSON.stringify(M[P+1])}},{key:"undo",value:(C=s(k().mark(function M(){var A,P,L,R,j,z,$,Y,ae,K,te;return k().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!this.canUndo()){G.next=47;break}if(A=this.stack[this.position],P=A.index,L=A.state,this.position-=1,this.shouldSaveHistory=!1,R=this.stack[this.position].index,j=this.stack[this.position],z=j.state,$=j.caretIndex,this.onUpdate(),Y=this.blocks.getBlocksCount(),z[R]||(R-=1,this.stack[this.position].index=R),!this.blockWasDeleted(z,L)){G.next=13;break}this.insertDeletedBlock(z,L,R),G.next=42;break;case 13:if(!this.contentWasCopied(z,L,R)){G.next=19;break}return G.next=16,this.blocks.render({blocks:z});case 16:this.caret.setToBlock(R,"end"),G.next=42;break;case 19:if(!(R<P&&this.blockWasSkipped(z,L))){G.next=25;break}return G.next=22,this.blocks.delete(P);case 22:this.caret.setToBlock(R,"end"),G.next=42;break;case 25:if(!(Y>z.length)){G.next=31;break}return G.next=28,this.blocks.render({blocks:z});case 28:this.setCaretIndex(R,$),G.next=42;break;case 31:if(!this.blockWasDropped(z,L)){G.next=37;break}return G.next=34,this.blocks.render({blocks:z});case 34:this.caret.setToBlock(R,"end"),G.next=42;break;case 37:if(!this.contentChangedInNoFocusBlock(R,P)){G.next=42;break}return ae=this.blocks.getBlockByIndex(P),K=ae.id,G.next=41,this.blocks.update(K,z[P].data);case 41:this.setCaretIndex(R,$);case 42:if(!(te=this.blocks.getBlockByIndex(R))){G.next=47;break}return G.next=46,this.blocks.update(te.id,z[R].data);case 46:this.setCaretIndex(R,$);case 47:case"end":return G.stop()}},M,this)})),function(){return C.apply(this,arguments)})},{key:"setCaretIndex",value:function(M,A){if(A&&A!==-1){var P=this.holder.getElementsByClassName("ce-block__content"),L=new(m())(P[M].firstChild);setTimeout(function(){return L.setPos(A)},50)}else this.caret.setToBlock(M,"end")}},{key:"insertBlock",value:(T=s(k().mark(function M(A,P){return k().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.blocks.insert(A[P].type,A[P].data,{},P,!0);case 2:case"end":return L.stop()}},M,this)})),function(M,A){return T.apply(this,arguments)})},{key:"insertSkippedBlocks",value:(S=s(k().mark(function M(A,P,L){var R;return k().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:for(R=A.length;R<P.length;R+=1)this.insertBlock(P,R);if(JSON.stringify(A[L-1])===JSON.stringify(P[L-1])){j.next=4;break}return j.next=4,this.updateModifiedBlock(P,L);case 4:case"end":return j.stop()}},M,this)})),function(M,A,P){return S.apply(this,arguments)})},{key:"updateModifiedBlock",value:(y=s(k().mark(function M(A,P){var L;return k().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(L=A[P-1],!this.editor.blocks.getById(L.id)){R.next=3;break}return R.abrupt("return",this.blocks.update(L.id,L.data));case 3:return R.abrupt("return",this.blocks.render({blocks:A}));case 4:case"end":return R.stop()}},M,this)})),function(M,A){return y.apply(this,arguments)})},{key:"redo",value:(v=s(k().mark(function M(){var A,P,L,R,j,z,$;return k().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!this.canRedo()){Y.next=27;break}if(this.position+=1,this.shouldSaveHistory=!1,A=this.stack[this.position],P=A.index,L=A.state,R=A.caretIndex,(j=this.stack[this.position-1]).index,z=j.state,!this.blockWasDeleted(z,L)){Y.next=11;break}return Y.next=8,this.blocks.delete();case 8:this.caret.setToBlock(P,"end"),Y.next=21;break;case 11:if(!this.blockWasSkipped(L,z)){Y.next=17;break}return Y.next=14,this.insertSkippedBlocks(z,L,P);case 14:this.caret.setToBlock(P,"end"),Y.next=21;break;case 17:if(!this.blockWasDropped(L,z)||this.position===1){Y.next=21;break}return Y.next=20,this.blocks.render({blocks:L});case 20:this.caret.setToBlock(P,"end");case 21:if(this.onUpdate(),!($=this.blocks.getBlockByIndex(P))){Y.next=27;break}return Y.next=26,this.blocks.update($.id,L[P].data);case 26:this.setCaretIndex(P,R);case 27:case"end":return Y.stop()}},M,this)})),function(){return v.apply(this,arguments)})},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"parseKeys",value:function(M){var A={CMD:/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",ALT:"altKey",SHIFT:"shiftKey"},P=M.slice(0,-1).map(function(R){return A[R]}),L=P.includes("shiftKey")&&M.length===2?M[M.length-1].toUpperCase():M[M.length-1].toLowerCase();return P.push(L),P}},{key:"setEventListeners",value:function(){var M=this,A=this.holder,P=this.config.shortcuts,L=P.undo,R=P.redo,j=L.map(function(ue){return ue.replace(/ /g,"").split("+")}),z=R.map(function(ue){return ue.replace(/ /g,"").split("+")}),$=j.map(function(ue){return M.parseKeys(ue)}),Y=z.map(function(ue){return M.parseKeys(ue)}),ae=function(ue,J){return J.reduce(function(be,de){return be||function(ce,V){return V.length===3&&ce[V[0]]&&ce[V[1]]&&ce.key.toLowerCase()===V[2]}(ue,de)},!1)},K=function(ue,J,be){return!(!function(de,ce){return ce.reduce(function(V,ne){return V||function(Q,Z){return Z.length===2&&Q[Z[0]]&&Q.key.toLowerCase()===Z[1]}(de,ne)},!1)}(ue,J)||ae(ue,be))||!!ae(ue,J)},te=function(ue){K(ue,$,Y)&&(ue.preventDefault(),M.undo())},G=function(ue){K(ue,Y,$)&&(ue.preventDefault(),M.redo())};A.addEventListener("keydown",te),A.addEventListener("keydown",G),A.addEventListener("destroy",function(){A.removeEventListener("keydown",te),A.removeEventListener("keydown",G)})}}],[{key:"isReadOnlySupported",get:function(){return!0}}]);var v,y,S,T,C}()})(),o.default})())}(ix)),ix.exports}var IJ=MJ();const OJ=ec(IJ);var ox={exports:{}},r_;function AJ(){return r_||(r_=1,function(t,e){(function(n,r){t.exports=r()})(self,function(){return(()=>{var n={321:(a,s,c)=>{c.d(s,{Z:()=>f});var l=c(645),d=c.n(l)()(function(b){return b[1]});d.push([a.id,`.cdx-nested-list {
  margin: 0;
  padding: 0;
  outline: none;
  counter-reset: item;
  list-style: none;
}

  .cdx-nested-list__item {
    line-height: 1.6em;
    display: flex;
    margin: 2px 0;
  }

  .cdx-nested-list__item [contenteditable]{
      outline: none;
    }

  .cdx-nested-list__item-body {
      flex-grow: 2;
      /* display:flex; */
    }

  .cdx-nested-list__item-content,
    .cdx-nested-list__item-children {
      flex-basis: 100%;
    }

  .cdx-nested-list__item-content {
      display : inline-block;
      word-break: break-word;
      white-space: pre-wrap;
      margin-left:5px;
    }

  .cdx-nested-list__item-checked {
      display : inline-block;
      margin-top: 3px;
      width:20px;
      height:20px;
      background-color:#eee;
      border-radius: 50%;
      border: 1px solid #d0d0d0;
      
    }

  /* .cdx-checklist__item-checkbox {
      display: inline-block;
      flex-shrink: 0;
      position: relative;
      width: 20px;
      height: 20px;
      margin: 5px;
      margin-left: 0;
      margin-right: 7px;
      border-radius: 50%;
      border: 1px solid #d0d0d0;
      background: #fff;
      cursor: pointer;
      user-select: none;
  } */

  .cdx-nested-list__item-children {}

  .cdx-nested-list__item::before {
      counter-increment: item;
      margin-right: 5px;
      white-space: nowrap;
    }

  .cdx-nested-list--ordered > .cdx-nested-list__item::before {
    content: counters(item, ".") ". ";
  }

  .cdx-nested-list--unordered > .cdx-nested-list__item::before {
    content: "";
  }

  .cdx-nested-list--none > .cdx-nested-list__item::before {
    content: "\\00a0\\00a0\\00a0";
  }

  .cdx-nested-list__settings {
    display: flex;
  }

  .cdx-nested-list__settings .cdx-settings-button {
      width: 50%;
    }


.removebullet::before{
  content: '' !important;
}

.cdx-nested-list__item-checkedContentWrapper{
  display:flex;
}


.itemChecked_true{
  background:#388ae5;
  border: 1px solid #388ae5;
  cursor : pointer;
 
}
.itemChecked_true::before {
  content: '';
  width: 20px;
  height: 20px;
  background-color:#fff;
  display: block;
  position: absolute;
  clip-path: polygon(31% 50%, 43% 62%, 71% 34%, 77% 40%, 43% 74%, 25% 56%);
}

.itemChecked_false{
  background-color:#fff;
  border: 1px solid #d0d0d0;
  cursor : pointer;
}
.itemChecked_null{
  border: 1px solid #fff;
  /* background-color:#DDDFE6; */
  /* border:2px solid #DDDFE6; */
  background:#fff;
  /* opacity:0; */
  /* height:4px; */
  /* margin-top:10px; */
  width:4px;
  /* margin-left:-20px; */
  transition: width 0.25s ease-in-out, opacity 0.25s ease-in-out;
  opacity:0;
  /* transition: opacity 0.25s ease-in-out; */
  /* position:absolute; */
  cursor : pointer;
}
.itemChecked_null_hover{
  /* position:relative; */
  width:20px;
  opacity:1;
  background-color:#DDDFE6;
  border: 1px solid #DDDFE6;
}
`,""]);const f=d},645:a=>{a.exports=function(s){var c=[];return c.toString=function(){return this.map(function(l){var d=s(l);return l[2]?"@media ".concat(l[2]," {").concat(d,"}"):d}).join("")},c.i=function(l,d,f){typeof l=="string"&&(l=[[null,l,""]]);var b={};if(f)for(var x=0;x<this.length;x++){var k=this[x][0];k!=null&&(b[k]=!0)}for(var E=0;E<l.length;E++){var m=[].concat(l[E]);f&&b[m[0]]||(d&&(m[2]?m[2]="".concat(d," and ").concat(m[2]):m[2]=d),c.push(m))}},c}},379:(a,s,c)=>{var l,d=function(){var y={};return function(S){if(y[S]===void 0){var T=document.querySelector(S);if(window.HTMLIFrameElement&&T instanceof window.HTMLIFrameElement)try{T=T.contentDocument.head}catch{T=null}y[S]=T}return y[S]}}(),f=[];function b(y){for(var S=-1,T=0;T<f.length;T++)if(f[T].identifier===y){S=T;break}return S}function x(y,S){for(var T={},C=[],M=0;M<y.length;M++){var A=y[M],P=S.base?A[0]+S.base:A[0],L=T[P]||0,R="".concat(P," ").concat(L);T[P]=L+1;var j=b(R),z={css:A[1],media:A[2],sourceMap:A[3]};j!==-1?(f[j].references++,f[j].updater(z)):f.push({identifier:R,updater:v(z,S),references:1}),C.push(R)}return C}function k(y){var S=document.createElement("style"),T=y.attributes||{};if(T.nonce===void 0){var C=c.nc;C&&(T.nonce=C)}if(Object.keys(T).forEach(function(A){S.setAttribute(A,T[A])}),typeof y.insert=="function")y.insert(S);else{var M=d(y.insert||"head");if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");M.appendChild(S)}return S}var E,m=(E=[],function(y,S){return E[y]=S,E.filter(Boolean).join(`
`)});function h(y,S,T,C){var M=T?"":C.media?"@media ".concat(C.media," {").concat(C.css,"}"):C.css;if(y.styleSheet)y.styleSheet.cssText=m(S,M);else{var A=document.createTextNode(M),P=y.childNodes;P[S]&&y.removeChild(P[S]),P.length?y.insertBefore(A,P[S]):y.appendChild(A)}}function g(y,S,T){var C=T.css,M=T.media,A=T.sourceMap;if(M?y.setAttribute("media",M):y.removeAttribute("media"),A&&typeof btoa<"u"&&(C+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(A))))," */")),y.styleSheet)y.styleSheet.cssText=C;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(C))}}var w=null,p=0;function v(y,S){var T,C,M;if(S.singleton){var A=p++;T=w||(w=k(S)),C=h.bind(null,T,A,!1),M=h.bind(null,T,A,!0)}else T=k(S),C=g.bind(null,T,S),M=function(){(function(P){if(P.parentNode===null)return!1;P.parentNode.removeChild(P)})(T)};return C(y),function(P){if(P){if(P.css===y.css&&P.media===y.media&&P.sourceMap===y.sourceMap)return;C(y=P)}else M()}}a.exports=function(y,S){(S=S||{}).singleton||typeof S.singleton=="boolean"||(S.singleton=(l===void 0&&(l=!!(window&&document&&document.all&&!window.atob)),l));var T=x(y=y||[],S);return function(C){if(C=C||[],Object.prototype.toString.call(C)==="[object Array]"){for(var M=0;M<T.length;M++){var A=b(T[M]);f[A].references--}for(var P=x(C,S),L=0;L<T.length;L++){var R=b(T[L]);f[R].references===0&&(f[R].updater(),f.splice(R,1))}T=P}}}},499:a=>{a.exports='<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"><path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"></path></svg>'}},r={};function i(a){var s=r[a];if(s!==void 0)return s.exports;var c=r[a]={id:a,exports:{}};return n[a](c,c.exports,i),c.exports}i.n=a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return i.d(s,{a:s}),s},i.d=(a,s)=>{for(var c in s)i.o(s,c)&&!i.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:s[c]})},i.o=(a,s)=>Object.prototype.hasOwnProperty.call(a,s);var o={};return(()=>{function a(m,h=null,g={}){const w=document.createElement(m);Array.isArray(h)?w.classList.add(...h):h&&w.classList.add(h);for(const p in g)w[p]=g[p];return w}function s(m){const h=a("div");return h.appendChild(m),h.innerHTML}function c(m){let h;return m.nodeType!==Node.ELEMENT_NODE?h=m.textContent:(h=m.innerHTML,h=h.replaceAll("<br>","")),h.trim().length===0}i.d(o,{default:()=>E});class l{constructor(){this.savedFakeCaret=void 0}save(){const h=l.range,g=a("span");g.hidden=!0,h.insertNode(g),this.savedFakeCaret=g}restore(){if(!this.savedFakeCaret)return;const h=window.getSelection(),g=new Range;g.setStartAfter(this.savedFakeCaret),g.setEndAfter(this.savedFakeCaret),h.removeAllRanges(),h.addRange(g),setTimeout(()=>{this.savedFakeCaret.remove()},150)}static get range(){const h=window.getSelection();return h&&h.rangeCount?h.getRangeAt(0):null}static extractFragmentFromCaretPositionTillTheEnd(){const h=window.getSelection();if(!h.rangeCount)return;const g=h.getRangeAt(0);let w=g.startContainer;w.nodeType!==Node.ELEMENT_NODE&&(w=w.parentNode);const p=w.closest("[contenteditable]");g.deleteContents();const v=g.cloneRange();return v.selectNodeContents(p),v.setStart(g.endContainer,g.endOffset),v.extractContents()}static focus(h,g=!0){const w=document.createRange(),p=window.getSelection();w.selectNodeContents(h),w.collapse(g),p.removeAllRanges(),p.addRange(w)}static isAtStart(){const h=window.getSelection();if(h.focusOffset>0)return!1;const g=h.focusNode;return l.getHigherLevelSiblings(g,"left").every(w=>c(w))}static getHigherLevelSiblings(h,g="left"){let w=h;const p=[];for(;w.parentNode&&w.parentNode.contentEditable!=="true";)w=w.parentNode;const v=g==="left"?"previousSibling":"nextSibling";for(;w[v];)w=w[v],p.push(w);return p}}var d=i(379),f=i.n(d),b=i(321);f()(b.Z,{insert:"head",singleton:!1}),b.Z.locals;var x=i(499),k=i.n(x);class E{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:h,config:g,api:w,readOnly:p}){this.nodes={wrapper:null},this.api=w,this.readOnly=p,this.config=g,this.settings=[{name:"none",title:this.api.i18n.t("None"),icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"><path d="M 5.819 4.607 L 15.181 4.607 C 16.004 4.607 16.518 5.498 16.107 6.211 C 15.916 6.541 15.563 6.745 15.181 6.745 L 5.82 6.745 C 4.997 6.745 4.483 5.854 4.894 5.142 C 5.085 4.811 5.438 4.607 5.82 4.607 L 5.819 4.607 Z M 5.819 0 L 15.181 0 C 16.004 0 16.518 0.891 16.107 1.604 C 15.916 1.934 15.563 2.138 15.181 2.138 L 5.82 2.138 C 4.997 2.138 4.483 1.247 4.894 0.535 C 5.085 0.204 5.438 0 5.82 0 L 5.819 0 Z M 5.819 9.357 L 15.181 9.357 C 16.004 9.357 16.518 10.248 16.107 10.96 C 15.916 11.291 15.563 11.495 15.181 11.495 L 5.82 11.495 C 4.997 11.47 4.511 10.564 4.944 9.864 C 5.132 9.559 5.462 9.369 5.82 9.358 L 5.819 9.357 Z"></path></svg>',default:!1},{name:"unordered",title:this.api.i18n.t("Unordered"),icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',default:!1},{name:"ordered",title:this.api.i18n.t("Ordered"),icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"><path d="M5.819 4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0-4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0 9.357h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 0 1 0-2.137zM1.468 4.155V1.33c-.554.404-.926.606-1.118.606a.338.338 0 0 1-.244-.104A.327.327 0 0 1 0 1.59c0-.107.035-.184.105-.234.07-.05.192-.114.369-.192.264-.118.475-.243.633-.373.158-.13.298-.276.42-.438a3.94 3.94 0 0 1 .238-.298C1.802.019 1.872 0 1.975 0c.115 0 .208.042.277.127.07.085.105.202.105.351v3.556c0 .416-.15.624-.448.624a.421.421 0 0 1-.32-.127c-.08-.085-.121-.21-.121-.376zm-.283 6.664h1.572c.156 0 .275.03.358.091a.294.294 0 0 1 .123.25.323.323 0 0 1-.098.238c-.065.065-.164.097-.296.097H.629a.494.494 0 0 1-.353-.119.372.372 0 0 1-.126-.28c0-.068.027-.16.081-.273a.977.977 0 0 1 .178-.268c.267-.264.507-.49.722-.678.215-.188.368-.312.46-.371.165-.11.302-.222.412-.334.109-.112.192-.226.25-.344a.786.786 0 0 0 .085-.345.6.6 0 0 0-.341-.553.75.75 0 0 0-.345-.08c-.263 0-.47.11-.62.329-.02.029-.054.107-.101.235a.966.966 0 0 1-.16.295c-.059.069-.145.103-.26.103a.348.348 0 0 1-.25-.094.34.34 0 0 1-.099-.258c0-.132.031-.27.093-.413.063-.143.155-.273.279-.39.123-.116.28-.21.47-.282.189-.072.411-.107.666-.107.307 0 .569.045.786.137a1.182 1.182 0 0 1 .618.623 1.18 1.18 0 0 1-.096 1.083 2.03 2.03 0 0 1-.378.457c-.128.11-.344.282-.646.517-.302.235-.509.417-.621.547a1.637 1.637 0 0 0-.148.187z"/></svg>',default:!0}],this.defaultListStyle="ordered";const v={style:this.defaultListStyle,items:[]};this.data=h&&Object.keys(h).length?h:v,this.caret=new l}render(){return this.nodes.wrapper=this.makeListWrapper(this.data.style,[this.CSS.baseBlock]),this.data.items.length?this.appendItems(this.data.items,this.nodes.wrapper):this.appendItems([{content:"",items:[],checked:null}],this.nodes.wrapper),this.readOnly||this.nodes.wrapper.addEventListener("keydown",h=>{switch(h.key){case"Enter":this.enterPressed(h);break;case"Backspace":this.backspace(h);break;case"Tab":h.shiftKey?this.shiftTab(h):this.addTab(h)}},!1),this.nodes.wrapper}renderSettings(){const h=a("div",[this.CSS.settingsWrapper],{});return this.settings.forEach(g=>{const w=a("div",this.CSS.settingsButton,{innerHTML:g.icon});w.addEventListener("click",()=>{this.listStyle=g.name;const p=w.parentNode.querySelectorAll("."+this.CSS.settingsButton);Array.from(p).forEach(v=>v.classList.remove(this.CSS.settingsButtonActive)),w.classList.toggle(this.CSS.settingsButtonActive)}),this.api.tooltip.onHover(w,g.title,{placement:"top",hidingDelay:500}),this.data.style===g.name&&w.classList.add(this.CSS.settingsButtonActive),h.appendChild(w)}),h}appendItems(h,g){h.forEach(w=>{const p=this.createItem(w.content,w.items,w.checked);g.appendChild(p)})}createItem(h,g=[],w){const p=a("li",this.CSS.item),v=a("div",this.CSS.itemBody),y=a("div",this.CSS.itemCheckedContentWrapper),S=a("div",this.CSS.itemChecked);w===!0&&S.classList.add("itemChecked_true"),w===!1&&S.classList.add("itemChecked_false"),w==null&&S.classList.add("itemChecked_null"),S.addEventListener("click",C=>{if(!this.readOnly){if(S.classList.contains("itemChecked_true"))return S.classList.remove("itemChecked_true"),void S.classList.add("itemChecked_false");if(S.classList.contains("itemChecked_false"))return S.classList.remove("itemChecked_false"),void S.classList.add("itemChecked_null");if(S.classList.contains("itemChecked_null"))return S.classList.remove("itemChecked_null"),S.classList.remove("itemChecked_null_hover"),void S.classList.add("itemChecked_true")}}),S.addEventListener("mouseenter",C=>{this.readOnly||S.classList.contains("itemChecked_null")&&S.classList.add("itemChecked_null_hover")}),S.addEventListener("mouseleave",C=>{this.readOnly||S.classList.remove("itemChecked_null_hover")});const T=a("div",this.CSS.itemContent,{innerHTML:h,contentEditable:!this.readOnly});return y.appendChild(S),y.appendChild(T),v.appendChild(y),p.appendChild(v),g&&g.length>0&&this.addChildrenList(p,g),p}save(){const h=g=>Array.from(g.querySelectorAll(`:scope > .${this.CSS.item}`)).map(w=>{const p=w.querySelector(`.${this.CSS.itemChildren}`),v=this.getItemContent(w),y=w.querySelector(`.${this.CSS.itemChecked}`);let S;return y.classList.contains("itemChecked_true")&&(S=!0),y.classList.contains("itemChecked_false")&&(S=!1),y.classList.contains("itemChecked_null")&&(S=null),{content:v,checked:S,items:p?h(p):[]}});return{style:this.data.style,items:h(this.nodes.wrapper)}}addChildrenList(h,g){const w=h.querySelector(`.${this.CSS.itemBody}`),p=this.makeListWrapper(void 0,[this.CSS.itemChildren]);this.appendItems(g,p),w.appendChild(p)}makeListWrapper(h=this.listStyle,g=[]){return h=="unordered"&&g.push(this.CSS.wrapperUnordered),h=="ordered"&&g.push(this.CSS.wrapperOrdered),h=="none"&&g.push(this.CSS.wrapperNone),a("ul",[this.CSS.wrapper,...g])}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-nested-list",wrapperOrdered:"cdx-nested-list--ordered",wrapperUnordered:"cdx-nested-list--unordered",wrapperNone:"cdx-nested-list--none",item:"cdx-nested-list__item",itemBody:"cdx-nested-list__item-body",itemCheckedContentWrapper:"cdx-nested-list__item-checkedContentWrapper",itemContent:"cdx-nested-list__item-content",itemChecked:"cdx-nested-list__item-checked",itemCheckedIndicator:"cdx-nested-list__item-checkedIndicator",itemChildren:"cdx-nested-list__item-children",settingsWrapper:"cdx-nested-list__settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(h){const g=Array.from(this.nodes.wrapper.querySelectorAll(`.${this.CSS.wrapper}`));g.push(this.nodes.wrapper),g.forEach(w=>{w.classList.remove(this.CSS.wrapperUnordered,this.CSS.wrapperOrdered,this.CSS.wrapperNone),h=="unordered"&&w.classList.add(this.CSS.wrapperUnordered),h=="ordered"&&w.classList.add(this.CSS.wrapperOrdered),h=="none"&&w.classList.add(this.CSS.wrapperNone)}),this.data.style=h}get currentItem(){let h=window.getSelection().anchorNode;return h.nodeType!==Node.ELEMENT_NODE&&(h=h.parentNode),h.closest(`.${this.CSS.item}`)}enterPressed(h){const g=this.currentItem;h.stopPropagation(),h.preventDefault();const w=this.getItemContent(g).trim().length===0,p=g.parentNode===this.nodes.wrapper,v=g.nextElementSibling===null;if(p&&v&&w)return void this.getOutOfList();if(v&&w)return void this.unshiftItem();const y=s(l.extractFragmentFromCaretPositionTillTheEnd()),S=g.querySelector(`.${this.CSS.itemChildren}`),T=this.createItem(y,void 0);S&&Array.from(S.querySelectorAll(`.${this.CSS.item}`)).length>0?S.prepend(T):g.after(T),this.focusItem(T)}unshiftItem(){const h=this.currentItem,g=h.parentNode.closest(`.${this.CSS.item}`);if(!g)return;this.caret.save(),g.after(h),this.caret.restore();const w=g.querySelector(`.${this.CSS.itemChildren}`);w.children.length===0&&w.remove()}getItemContent(h){const g=h.querySelector(`.${this.CSS.itemContent}`);return c(g)?"":g.innerHTML}focusItem(h,g=!0){const w=h.querySelector(`.${this.CSS.itemContent}`);l.focus(w,g)}getOutOfList(){this.currentItem.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex())}backspace(h){if(!l.isAtStart())return;h.preventDefault();const g=this.currentItem,w=g.previousSibling,p=g.parentNode.closest(`.${this.CSS.item}`);if(!w&&!p)return;let v;if(h.stopPropagation(),w){const C=w.querySelectorAll(`.${this.CSS.item}`);v=Array.from(C).pop()||w}else v=p;const y=s(l.extractFragmentFromCaretPositionTillTheEnd()),S=v.querySelector(`.${this.CSS.itemContent}`);l.focus(S,!1),this.caret.save(),S.insertAdjacentHTML("beforeend",y);let T=g.querySelectorAll(`.${this.CSS.itemChildren} > .${this.CSS.item}`);T=Array.from(T),T=T.filter(C=>C.parentNode.closest(`.${this.CSS.item}`)===g),T.reverse().forEach(C=>{w?v.after(C):g.after(C)}),g.remove(),this.caret.restore()}addTab(h){h.stopPropagation(),h.preventDefault();const g=this.currentItem,w=g.previousSibling;if(!w)return;const p=w.querySelector(`.${this.CSS.itemChildren}`);if(this.caret.save(),p)p.appendChild(g);else{const v=this.makeListWrapper(void 0,[this.CSS.itemChildren]),y=w.querySelector(`.${this.CSS.itemBody}`);v.appendChild(g),y.appendChild(v)}this.caret.restore()}shiftTab(h){h.stopPropagation(),h.preventDefault(),this.unshiftItem()}static joinRecursive(h){return h.items.map(g=>`${g.content} ${E.joinRecursive(g)}`).join("")}static get conversionConfig(){return{export:h=>E.joinRecursive(h),import:h=>({items:[{content:h,items:[]}],style:"unordered"})}}static get toolbox(){return{icon:k(),title:"Nested Checklist"}}}})(),o.default})()})}(ox)),ox.exports}var _J=AJ();const DJ=ec(_J);(function(){var t;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(t=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:t.content,e.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size)}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border)}.tc-add-column--disabled{visibility:hidden}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row--disabled{display:none}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(e)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}})();function oo(t,e,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r}function i_(t){const e=t.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function o_(t,e){const n=i_(t),r=i_(e);return{fromTopBorder:r.y1-n.y1,fromLeftBorder:r.x1-n.x1,fromRightBorder:n.x2-r.x2,fromBottomBorder:n.y2-r.y2}}function NJ(t,e){const n=t.getBoundingClientRect(),{width:r,height:i,x:o,y:a}=n,{clientX:s,clientY:c}=e;return{width:r,height:i,x:s-o,y:c-a}}function a_(t,e){return e.parentNode.insertBefore(t,e)}function s_(t,e=!0){const n=document.createRange(),r=window.getSelection();n.selectNodeContents(t),n.collapse(e),r.removeAllRanges(),r.addRange(n)}let PJ=class yo{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=oo("div",yo.CSS.popover),this.items.forEach((e,n)=>{const r=oo("div",yo.CSS.item),i=oo("div",yo.CSS.itemIcon,{innerHTML:e.icon}),o=oo("div",yo.CSS.itemLabel,{textContent:e.label});r.dataset.index=n,r.appendChild(i),r.appendChild(o),this.wrapper.appendChild(r),this.itemEls.push(r)}),this.wrapper.addEventListener("click",e=>{this.popoverClicked(e)}),this.wrapper}popoverClicked(e){const n=e.target.closest(`.${yo.CSS.item}`);if(!n)return;const r=n.dataset.index,i=this.items[r];if(i.confirmationRequired&&!this.hasConfirmationState(n)){this.setConfirmationState(n);return}i.onClick()}setConfirmationState(e){e.classList.add(yo.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(yo.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(yo.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(yo.CSS.popoverOpened)}open(){this.items.forEach((e,n)=>{typeof e.hideIf=="function"&&this.itemEls[n].classList.toggle(yo.CSS.itemHidden,e.hideIf())}),this.wrapper.classList.add(yo.CSS.popoverOpened)}close(){this.wrapper.classList.remove(yo.CSS.popoverOpened),this.itemEls.forEach(e=>{this.clearConfirmationState(e)})}};const LJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',l_='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',RJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',BJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',jJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',FJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',HJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',c_='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',zJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',$J='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',UJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',WJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';class tl{constructor({api:e,items:n,onOpen:r,onClose:i,cssModifier:o=""}){this.api=e,this.items=n,this.onOpen=r,this.onClose=i,this.cssModifier=o,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=oo("div",[tl.CSS.toolbox,this.cssModifier?`${tl.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const n=this.createPopover(),r=this.createToggler();return e.appendChild(r),e.appendChild(n),e}createToggler(){const e=oo("div",tl.CSS.toggler,{innerHTML:HJ});return e.addEventListener("click",()=>{this.togglerClicked()}),e}createPopover(){return this.popover=new PJ({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const n=e();Object.entries(n).forEach(([r,i])=>{this.wrapper.style[r]=i}),this.wrapper.classList.add(tl.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(tl.CSS.toolboxShowed)}}function YJ(t,e){let n=0;return function(...r){const i=new Date().getTime();if(!(i-n<t))return n=i,e(...r)}}const Xt={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addRowDisabled:"tc-add-row--disabled",addColumn:"tc-add-column",addColumnDisabled:"tc-add-column--disabled"};class GJ{constructor(e,n,r,i){this.readOnly=e,this.api=n,this.data=r,this.config=i,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=o=>{const a=o.target.closest(`.${Xt.table}`)!==null,s=o.target.closest(`.${Xt.wrapper}`)===null;(a||s)&&this.hideToolboxes();const c=o.target.closest(`.${Xt.addRow}`),l=o.target.closest(`.${Xt.addColumn}`);c&&c.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):l&&l.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",YJ(150,e=>this.onMouseMoveInTable(e)),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",e=>this.onKeyDownListener(e)),this.table.addEventListener("focusin",e=>this.focusInTableListener(e))}createColumnToolbox(){return new tl({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:BJ,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:jJ,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:l_,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new tl({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:FJ,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:RJ,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:l_,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,n){return this.table.querySelectorAll(`.${Xt.row}:nth-child(${e}) .${Xt.cell}`)[n-1]}getRow(e){return this.table.querySelector(`.${Xt.row}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${Xt.cell}:first-child`)}setCellContent(e,n,r){const i=this.getCell(e,n);i.innerHTML=r}addColumn(e=-1,n=!1){var r;let i=this.numberOfColumns;if(this.config&&this.config.maxcols&&this.numberOfColumns>=this.config.maxcols)return;for(let a=1;a<=this.numberOfRows;a++){let s;const c=this.createCell();if(e>0&&e<=i?(s=this.getCell(a,e),a_(c,s)):s=this.getRow(a).appendChild(c),a===1){const l=this.getCell(a,e>0?e:i+1);l&&n&&s_(l)}}const o=this.wrapper.querySelector(`.${Xt.addColumn}`);(r=this.config)!=null&&r.maxcols&&this.numberOfColumns>this.config.maxcols-1&&o&&o.classList.add(Xt.addColumnDisabled),this.addHeadingAttrToFirstRow()}addRow(e=-1,n=!1){let r,i=oo("div",Xt.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let o=this.numberOfColumns;if(this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&s)return;if(e>0&&e<=this.numberOfRows){let c=this.getRow(e);r=a_(i,c)}else r=this.table.appendChild(i);this.fillRow(r,o),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const a=this.getRowFirstCell(r);a&&n&&s_(a);const s=this.wrapper.querySelector(`.${Xt.addRow}`);return this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&s&&s.classList.add(Xt.addRowDisabled),r}deleteColumn(e){for(let r=1;r<=this.numberOfRows;r++){const i=this.getCell(r,e);if(!i)return;i.remove()}const n=this.wrapper.querySelector(`.${Xt.addColumn}`);n&&n.classList.remove(Xt.addColumnDisabled)}deleteRow(e){this.getRow(e).remove();const n=this.wrapper.querySelector(`.${Xt.addRow}`);n&&n.classList.remove(Xt.addRowDisabled),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=oo("div",Xt.wrapper),this.table=oo("div",Xt.table),this.readOnly&&this.wrapper.classList.add(Xt.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=oo("div",Xt.addColumn,{innerHTML:c_}),n=oo("div",Xt.addRow,{innerHTML:c_});this.wrapper.appendChild(e),this.wrapper.appendChild(n)}}computeInitialSize(){const e=this.data&&this.data.content,n=Array.isArray(e),r=n?e.length:!1,i=n?e.length:void 0,o=r?e[0].length:void 0,a=Number.parseInt(this.config&&this.config.rows),s=Number.parseInt(this.config&&this.config.cols),c=!isNaN(a)&&a>0?a:void 0,l=!isNaN(s)&&s>0?s:void 0;return{rows:i||c||2,cols:o||l||2}}resize(){const{rows:e,cols:n}=this.computeInitialSize();for(let r=0;r<e;r++)this.addRow();for(let r=0;r<n;r++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let n=0;n<e.content.length;n++)for(let r=0;r<e.content[n].length;r++)this.setCellContent(n+1,r+1,e.content[n][r])}fillRow(e,n){for(let r=1;r<=n;r++){const i=this.createCell();e.appendChild(i)}}createCell(){return oo("div",Xt.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${Xt.row}:first-child .${Xt.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(e){const{row:n,column:r}=this.getHoveredCell(e);this.hoveredColumn=r,this.hoveredRow=n,this.updateToolboxesPosition()}onKeyPressListener(e){if(e.key==="Enter"){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return e.key!=="Enter"}onKeyDownListener(e){e.key==="Tab"&&e.stopPropagation()}focusInTableListener(e){const n=e.target,r=this.getRowByCell(n);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${Xt.row}`)).indexOf(r)+1,column:Array.from(r.querySelectorAll(`.${Xt.cell}`)).indexOf(n)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:n}=this.focusedCell;return this.getCell(e,n)}updateToolboxesPosition(e=this.hoveredRow,n=this.hoveredColumn){this.isColumnMenuShowing||n>0&&n<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${n} - 1) * 2))`})),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show(()=>{const r=this.getRow(e),{fromTopBorder:i}=o_(this.table,r),{height:o}=r.getBoundingClientRect();return{top:`${Math.ceil(i+o/2)}px`}})}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(Xt.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(Xt.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.removeAttribute("heading")}}selectRow(e){const n=this.getRow(e);n&&(this.selectedRow=e,n.classList.add(Xt.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${Xt.rowSelected}`);e&&e.classList.remove(Xt.rowSelected),this.selectedRow=0}selectColumn(e){for(let n=1;n<=this.numberOfRows;n++){const r=this.getCell(n,e);r&&r.classList.add(Xt.cellSelected)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${Xt.cellSelected}`);Array.from(e).forEach(n=>{n.classList.remove(Xt.cellSelected)}),this.selectedColumn=0}getHoveredCell(e){let n=this.hoveredRow,r=this.hoveredColumn;const{width:i,height:o,x:a,y:s}=NJ(this.table,e);return a>=0&&(r=this.binSearch(this.numberOfColumns,c=>this.getCell(1,c),({fromLeftBorder:c})=>a<c,({fromRightBorder:c})=>a>i-c)),s>=0&&(n=this.binSearch(this.numberOfRows,c=>this.getCell(c,1),({fromTopBorder:c})=>s<c,({fromBottomBorder:c})=>s>o-c)),{row:n||this.hoveredRow,column:r||this.hoveredColumn}}binSearch(e,n,r,i){let o=0,a=e+1,s=0,c;for(;o<a-1&&s<10;){c=Math.ceil((o+a)/2);const l=n(c),d=o_(this.table,l);if(r(d))a=c;else if(i(d))o=c;else break;s++}return c}getData(){const e=[];for(let n=1;n<=this.numberOfRows;n++){const r=this.table.querySelector(`.${Xt.row}:nth-child(${n})`),i=Array.from(r.querySelectorAll(`.${Xt.cell}`));i.every(o=>!o.textContent.trim())||e.push(i.map(o=>o.innerHTML))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}}class XJ{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:n,api:r,readOnly:i,block:o}){this.api=r,this.readOnly=i,this.config=n,this.data={withHeadings:this.getConfig("withHeadings",!1,e),stretched:this.getConfig("stretched",!1,e),content:e&&e.content?e.content:[]},this.table=null,this.block=o}static get toolbox(){return{icon:WJ,title:"Table"}}render(){return this.table=new GJ(this.readOnly,this.api,this.data,this.config),this.container=oo("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:$J,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:UJ,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.data.stretched?this.api.i18n.t("Collapse"):this.api.i18n.t("Stretch"),icon:this.data.stretched?LJ:zJ,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.stretched=!this.data.stretched,this.block.stretched=this.data.stretched}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,stretched:this.data.stretched,content:e}}destroy(){this.table.destroy()}getConfig(e,n=void 0,r=void 0){const i=this.data||r;return i?i[e]?i[e]:n:this.config&&this.config[e]?this.config[e]:n}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const n=e.detail.data,r=n.querySelector(":scope > thead, tr:first-of-type th"),i=Array.from(n.querySelectorAll("tr")).map(o=>Array.from(o.querySelectorAll("th, td")).map(a=>a.innerHTML));this.data={withHeadings:r!==null,content:i},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(`.cdx-warning{position:relative}@media all and (min-width: 736px){.cdx-warning{padding-left:36px}}.cdx-warning [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-warning [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-warning [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-warning:before{content:"";background-image:url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='5' y='5' width='14' height='14' rx='4' stroke='black' stroke-width='2'/%3E%3Cline x1='12' y1='9' x2='12' y2='12' stroke='black' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M12 15.02V15.01' stroke='black' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");width:24px;height:24px;background-size:24px 24px;position:absolute;margin-top:8px;left:0}@media all and (max-width: 735px){.cdx-warning:before{display:none}}.cdx-warning__message{min-height:85px}.cdx-warning__title{margin-bottom:6px}`)),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const KJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';class Lm{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:KJ,title:"Warning"}}static get enableLineBreaks(){return!0}static get DEFAULT_TITLE_PLACEHOLDER(){return"Title"}static get DEFAULT_MESSAGE_PLACEHOLDER(){return"Message"}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-warning",title:"cdx-warning__title",input:this.api.styles.input,message:"cdx-warning__message"}}constructor({data:e,config:n,api:r,readOnly:i}){this.api=r,this.readOnly=i,this.titlePlaceholder=(n==null?void 0:n.titlePlaceholder)||Lm.DEFAULT_TITLE_PLACEHOLDER,this.messagePlaceholder=(n==null?void 0:n.messagePlaceholder)||Lm.DEFAULT_MESSAGE_PLACEHOLDER,this.data={title:e.title||"",message:e.message||""}}render(){const e=this._make("div",[this.CSS.baseClass,this.CSS.wrapper]),n=this._make("div",[this.CSS.input,this.CSS.title],{contentEditable:!this.readOnly,innerHTML:this.data.title}),r=this._make("div",[this.CSS.input,this.CSS.message],{contentEditable:!this.readOnly,innerHTML:this.data.message});return n.dataset.placeholder=this.titlePlaceholder,r.dataset.placeholder=this.messagePlaceholder,e.appendChild(n),e.appendChild(r),e}save(e){const n=e.querySelector(`.${this.CSS.title}`),r=e.querySelector(`.${this.CSS.message}`);return Object.assign(this.data,{title:(n==null?void 0:n.innerHTML)??"",message:(r==null?void 0:r.innerHTML)??""})}_make(e,n=null,r={}){const i=document.createElement(e);Array.isArray(n)?i.classList.add(...n):n&&i.classList.add(n);for(const o in r)i[o]=r[o];return i}static get sanitize(){return{title:{},message:{}}}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-code__textarea{min-height:200px;font-family:Menlo,Monaco,Consolas,Courier New,monospace;color:#41314e;line-height:1.6em;font-size:12px;background:#f8f7fa;border:1px solid #f1f1f4;box-shadow:none;white-space:pre;word-wrap:normal;overflow-x:auto;resize:vertical}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function ZJ(t,e){let n="";for(;n!==`
`&&e>0;)e=e-1,n=t.substr(e,1);return n===`
`&&(e+=1),e}const JJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>';/**
 * CodeTool for Editor.js
 * @version 2.0.0
 * @license MIT
 */let QJ=class lH{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:n,api:r,readOnly:i}){this.api=r,this.readOnly=i,this.placeholder=this.api.i18n.t(n.placeholder||lH.DEFAULT_PLACEHOLDER),this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-code",textarea:"ce-code__textarea"},this.nodes={holder:null,textarea:null},this.data={code:e.code??""},this.nodes.holder=this.drawView()}render(){return this.nodes.holder}save(e){return{code:e.querySelector("textarea").value}}onPaste(e){const n=e.detail;if("data"in n){const r=n.data;this.data={code:r||""}}}get data(){return this._data}set data(e){this._data=e,this.nodes.textarea&&(this.nodes.textarea.value=e.code)}static get toolbox(){return{icon:JJ,title:"Code"}}static get DEFAULT_PLACEHOLDER(){return"Enter a code"}static get pasteConfig(){return{tags:["pre"]}}static get sanitize(){return{code:!0}}tabHandler(e){e.stopPropagation(),e.preventDefault();const n=e.target,r=e.shiftKey,i=n.selectionStart,o=n.value,a="  ";let s;if(!r)s=i+a.length,n.value=o.substring(0,i)+a+o.substring(i);else{const c=ZJ(o,i);if(o.substr(c,a.length)!==a)return;n.value=o.substring(0,c)+o.substring(c+a.length),s=i-a.length}n.setSelectionRange(s,s)}drawView(){const e=document.createElement("div"),n=document.createElement("textarea");return e.classList.add(this.CSS.baseClass,this.CSS.wrapper),n.classList.add(this.CSS.textarea,this.CSS.input),n.value=this.data.code,n.placeholder=this.placeholder,this.readOnly&&(n.disabled=!0),e.appendChild(n),n.addEventListener("keydown",r=>{switch(r.code){case"Tab":this.tabHandler(r);break}}),this.nodes.textarea=n,e}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-rawtool__textarea{min-height:200px;resize:vertical;border-radius:8px;border:0;background-color:#1e2128;font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;line-height:1.6;letter-spacing:-.2px;color:#a1a7b6;overscroll-behavior:contain}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const VJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.6954 5C17.912 5 18.8468 6.07716 18.6755 7.28165L17.426 16.0659C17.3183 16.8229 16.7885 17.4522 16.061 17.6873L12.6151 18.8012C12.2152 18.9304 11.7848 18.9304 11.3849 18.8012L7.93898 17.6873C7.21148 17.4522 6.6817 16.8229 6.57403 16.0659L5.32454 7.28165C5.15322 6.07716 6.088 5 7.30461 5H16.6954Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8.4H9L9.42857 11.7939H14.5714L14.3571 13.2788L14.1429 14.7636L12 15.4L9.85714 14.7636L9.77143 14.3394"/></svg>';/**
 * Raw HTML Tool for CodeX Editor
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class ax{static get isReadOnlySupported(){return!0}static get displayInToolbox(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:VJ,title:"Raw HTML"}}constructor({data:e,config:n,api:r,readOnly:i}){this.api=r,this.readOnly=i,this.placeholder=r.i18n.t(n.placeholder||ax.DEFAULT_PLACEHOLDER),this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-rawtool",textarea:"ce-rawtool__textarea"},this.data={html:e.html||""},this.textarea=null,this.resizeDebounce=null}render(){const e=document.createElement("div"),n=100;return this.textarea=document.createElement("textarea"),e.classList.add(this.CSS.baseClass,this.CSS.wrapper),this.textarea.classList.add(this.CSS.textarea,this.CSS.input),this.textarea.textContent=this.data.html,this.textarea.placeholder=this.placeholder,this.readOnly?this.textarea.disabled=!0:this.textarea.addEventListener("input",()=>{this.onInput()}),e.appendChild(this.textarea),setTimeout(()=>{this.resize()},n),e}save(e){return{html:e.querySelector("textarea").value}}static get DEFAULT_PLACEHOLDER(){return"Enter HTML code"}static get sanitize(){return{html:!0}}onInput(){this.resizeDebounce&&clearTimeout(this.resizeDebounce),this.resizeDebounce=setTimeout(()=>{this.resize()},200)}resize(){this.textarea.style.height="auto",this.textarea.style.height=this.textarea.scrollHeight+"px"}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.ce-delimiter{line-height:1.6em;width:100%;text-align:center}.ce-delimiter:before{display:inline-block;content:"***";font-size:30px;line-height:65px;height:30px;letter-spacing:.2em}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const qJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="6" x2="10" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="14" x2="18" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>';/**
 * Delimiter Block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */class eQ{static get isReadOnlySupported(){return!0}static get contentless(){return!0}constructor({data:e,config:n,api:r}){this.api=r,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._element=this.drawView(),this.data=e}drawView(){let e=document.createElement("div");return e.classList.add(this._CSS.wrapper,this._CSS.block),e}render(){return this._element}save(e){return{}}static get toolbox(){return{icon:qJ,title:"Delimiter"}}static get pasteConfig(){return{tags:["HR"]}}onPaste(e){this.data={}}}const nl=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},tQ={class:"v-input vx-input-editorjs",style:{display:"block"}},nQ={class:"v-input__control",style:{display:"block"}},rQ={key:0,class:"v-label"},iQ={key:0,class:"v-input__details"},oQ={class:"v-messages",role:"alert","aria-live":"polite"},aQ={class:"v-messages__message"},sQ=nl({__name:"EditorJS",props:{modelValue:{type:String},placeholder:{type:String},label:{type:String},hideDetails:{type:Boolean,default:!1},errorMessages:{type:Array,default:[]}},emits:["update:modelValue"],setup(t,{emit:e}){const n=u.ref(null),r=t,i=e;let o,a=!1,s=!1;function c(){if(!(!o||!a)&&r.modelValue){if(typeof r.modelValue=="string"){const d=r.modelValue.toString();if(d[0]==="{"&&d[d.length-1]==="}"){const f=new Function("return "+d).call();o.render(f)}else o.blocks.renderFromHTML(r.modelValue)}new OJ({editor:o})}}function l(d,f){s=!0,o.save().then(b=>{i("update:modelValue",JSON.stringify(b))}).catch(b=>{console.log(f,"Saving failed: ",b)}).finally(()=>{s=!1})}return u.onMounted(()=>{o=new _G({holder:n.value,placeholder:r.placeholder,tools:{embed:PG,list:IK,image:I2,video:V2,header:{class:WK,config:{placeholder:"Enter a header",levels:[1,2,3,4,5,6],defaultLevel:2}},quote:fJ,checklist:{class:KK,inlineToolbar:!0},Marker:{class:gJ,shortcut:"CMD+SHIFT+M"},inlineCode:yJ,underline:wJ,changeCase:{class:SJ},strikethrough:TJ,nestedCheckList:DJ,table:XJ,warning:Lm,code:QJ,raw:ax,delimiter:eQ},minHeight:"auto",data:r.modelValue,onChange:l}),o.isReady.then(()=>{a=!0,c()})}),u.watch(()=>r.modelValue,()=>{s||c()}),u.onUnmounted(()=>{o.destroy()}),(d,f)=>(u.openBlock(),u.createElementBlock("div",tQ,[u.createElementVNode("div",nQ,[t.label?(u.openBlock(),u.createElementBlock("label",rQ,u.toDisplayString(t.label),1)):u.createCommentVNode("",!0),u.createElementVNode("div",{class:"editorjs v-card--variant-outlined v-card--variant-outlined",ref_key:"htmlelement",ref:n},null,512)]),!t.hideDetails&&t.errorMessages.length?(u.openBlock(),u.createElementBlock("div",iQ,[u.createElementVNode("div",oQ,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(t.errorMessages,b=>(u.openBlock(),u.createElementBlock("div",aQ,u.toDisplayString(b),1))),256))])])):u.createCommentVNode("",!0)]))}},[["__scopeId","data-v-a5c53756"]]),sx=t=>new Promise(e=>{const n=new FileReader;n.onloadend=()=>{e(n.result)},n.readAsDataURL(t)});class u_{constructor(e){We(this,"value");this.value=e}toRaw(){const e=/data:(image\/.+);base64,/,n=this.value;let r="",i;return i=n.replace(e,(o,a)=>(r=a,"")),new lQ(atob(i),r)}}class lQ{constructor(e,n){We(this,"raw");We(this,"mime");this.raw=e,this.mime=n}toBinary(){return new Promise(e=>{const n=this.raw.length;let r,i;for(r=new Uint8Array(n),i=0;i<n;i+=1)r[i]=this.raw.charCodeAt(i);e(new cQ(r,this.mime))})}}class cQ{constructor(e,n){We(this,"data");We(this,"mime");this.data=e,this.mime=n}toBlob(){return new Promise(e=>{e(new uQ(new Blob([this.data],{type:this.mime})))})}}class uQ{constructor(e){We(this,"value");this.value=e}toFile(){return new Promise(e=>{const n=this.value.type.split("/")[1];let r="";n==="png"||n=="gif"?r=n:n==="jpeg"&&(r="jpg"),e(new File([this.value],"image."+r,{type:this.value.type}))})}}class dQ{constructor(e,n,r){We(this,"element");We(this,"editor");We(this,"hidder");We(this,"visibilityHandlers");We(this,"_visible");this.element=e,this.editor=n,this.hidder=r,this.visibilityHandlers=[],this._visible=!0}toURL(){return new Promise(e=>{e(new u_(this.editor.toDataURL()))})}getMethod(e,n){const{first:r,rest:i}=pQ(n),o=e.constructor.name!=="Object",a=typeof e[r];let s;return o&&a==="function"?s=e[r].bind(e):s=e[r],i.length>0?this.getMethod(s,i):s}invoke(e,...n){let r=this.editor,i=null;if(r[e])i=r[e](...n);else if(e.indexOf(".")>-1){const o=this.getMethod(r,e);typeof o=="function"&&(i=o(...n))}return i}load(e){if(e.constructor==String){const n=e;return new Promise((r,i)=>{gQ(n).catch(i).then(o=>{if(!o){i("Failed to load image.");return}const a=o,s=document.createElement("canvas"),c=s.getContext("2d");s.width=a.width,s.height=a.height,c==null||c.drawImage(a,0,0),s.toBlob(l=>{if(l){const d=new File([l],mQ(n),{type:l.type});this.editor.ui._actions.main.load(d)}else i("Failed to create Blob from image.")},"image/png")})})}else if(e.constructor==File)return new Promise(n=>{this.editor.ui._actions.main.load(e),n(null)});return new Promise((n,r)=>{r(`unsupported value of type ${typeof e}`)})}onVisibilityChange(e){this.visibilityHandlers.push(e)}setVisibility(e){e!==this._visible&&(this._visible=e,this.hidder&&this.hidder.set(e),this.visibilityHandlers.forEach(n=>{n(e)}))}setContainer(e){e?this.hidder=new fQ(e):this.hidder=null}}class fQ{constructor(e){We(this,"container");We(this,"refElement");We(this,"mode");We(this,"tempContainer");this.container=e,this.tempContainer=null,e.nextSibling?(this.refElement=e.nextSibling,this.mode=1):e.previousSibling?(this.refElement=e.previousSibling,this.mode=2):(this.refElement=e.parentNode,this.mode=0)}hide(){if(this.tempContainer)return;const e=window.document.createElement("div");e.style.display="none",e.appendChild(this.container),window.document.body.appendChild(e),this.tempContainer=e}show(){var e,n,r;this.tempContainer&&(this.mode==0?this.refElement.appendChild(this.container):this.mode==2?this.refElement.nextSibling?(e=this.refElement.parentNode)==null||e.insertBefore(this.container,this.refElement.nextSibling):(n=this.refElement.parentNode)==null||n.appendChild(this.container):this.mode==1&&((r=this.refElement.parentNode)==null||r.insertBefore(this.container,this.refElement)),this.tempContainer=null)}set(e){e?this.show():this.hide()}}class hQ{constructor(e,n){We(this,"timerId",null);We(this,"callback");We(this,"duration");this.duration=e,this.callback=n}start(){this.timerId===null&&(this.timerId=window.setTimeout(()=>{this.callback(),this.timerId=null},this.duration))}restart(){this.stop(),this.start()}stop(){this.timerId!==null&&(clearTimeout(this.timerId),this.timerId=null)}}const pQ=t=>{const e=t.indexOf(".");let n=t,r="";return e>-1&&(n=t.substring(0,e),r=t.substring(e+1,t.length)),{first:n,rest:r}},mQ=t=>{const e=t.lastIndexOf("/");return e>=0?t.substring(e+1):t};function gQ(t){return new Promise((e,n)=>{const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=function(){e(r)},r.onerror=function(){console.error("Error loading image.")}})}var lx={exports:{}},cx={exports:{}};/*!
 * TOAST UI Color Picker
 * @version 2.2.8
 * @author NHN Cloud FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */var d_;function vQ(){return d_||(d_=1,function(t,e){(function(r,i){t.exports=i()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var c in o)i.d(s,c,(function(l){return o[l]}).bind(null,c));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="dist",i(i.s=33)}([function(n,r,i){function o(a,s){var c=Object.prototype.hasOwnProperty,l,d,f,b;for(f=1,b=arguments.length;f<b;f+=1){l=arguments[f];for(d in l)c.call(l,d)&&(a[d]=l[d])}return a}n.exports=o},function(n,r,i){function o(a){return a instanceof Array}n.exports=o},function(n,r,i){var o=i(1),a=i(6),s=i(7);function c(l,d,f){o(l)?a(l,d,f):s(l,d,f)}n.exports=c},function(n,r,i){function o(a){return a===void 0}n.exports=o},function(n,r,i){var o=i(22),a=i(2),s=i(6),c=i(7),l=i(37),d=0,f={getLength:function(b){var x=0;return c(b,function(){x+=1}),x},map:function(b,x,k){var E=[];return a(b,function(){E.push(x.apply(k||null,arguments))}),E},filter:function(b,x,k){var E=[];return s(b,function(m){x.apply(k||null,arguments)&&E.push(m)}),E},generateId:function(){return d+=1,d},isOldBrowser:function(){return o.msie&&o.version<9}(),sendHostName:function(){l("color-picker","UA-129987462-1")}};n.exports=f},function(n,r,i){var o=i(1);function a(s,c,l){var d,f;if(l=l||0,!o(c))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(c,s,l);for(f=c.length,d=l;l>=0&&d<f;d+=1)if(c[d]===s)return d;return-1}n.exports=a},function(n,r,i){function o(a,s,c){var l=0,d=a.length;for(c=c||null;l<d&&s.call(c,a[l],l,a)!==!1;l+=1);}n.exports=o},function(n,r,i){function o(a,s,c){var l;c=c||null;for(l in a)if(a.hasOwnProperty(l)&&s.call(c,a[l],l,a)===!1)break}n.exports=o},function(n,r,i){var o=i(39),a=i(13),s=i(41),c=i(3),l=i(9),d=i(19),f=i(4);function b(x,k){var E=f.generateId();c(k)&&(k=l.appendHTMLElement("div")),o(k,"tui-view-"+E),this.id=E,this.container=k,this.childs=new d(function(m){return m.id}),this.parent=null}b.prototype.addChild=function(x,k){k&&k.call(x,this),x.parent=this,this.childs.add(x)},b.prototype.removeChild=function(x,k){var E=s(x)?this.childs.items[x]:x;k&&k.call(E,this),this.childs.remove(E.id)},b.prototype.render=function(){this.childs.each(function(x){x.render()})},b.prototype.recursive=function(x,k){a(x)&&(k||x(this),this.childs.each(function(E){E.recursive(x)}))},b.prototype.resize=function(){for(var x=Array.prototype.slice.call(arguments),k=this.parent;k;)a(k._onResize)&&k._onResize.apply(k,x),k=k.parent},b.prototype._beforeDestroy=function(){},b.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},b.prototype.destroy=function(x){this.childs&&(this.childs.each(function(k){k.destroy(!0),k._destroy()}),this.childs.clear()),!x&&this._destroy()},b.prototype.getViewBound=function(){var x=this.container.getBoundingClientRect();return{x:x.left,y:x.top,width:x.right-x.left,height:x.bottom-x.top}},n.exports=b},function(n,r,i){var o={appendHTMLElement:function(a,s,c){var l=document.createElement(a);return l.className=c||"",s?s.appendChild(l):document.body.appendChild(l),l}};n.exports=o},function(n,r,i){var o=i(0),a=i(20),s=i(11),c=i(21),l=i(1),d=i(13),f=i(2),b=/\s+/g;function x(){this.events=null,this.contexts=null}x.mixin=function(k){o(k.prototype,x.prototype)},x.prototype._getHandlerItem=function(k,E){var m={handler:k};return E&&(m.context=E),m},x.prototype._safeEvent=function(k){var E=this.events,m;return E||(E=this.events={}),k&&(m=E[k],m||(m=[],E[k]=m),E=m),E},x.prototype._safeContext=function(){var k=this.contexts;return k||(k=this.contexts=[]),k},x.prototype._indexOfContext=function(k){for(var E=this._safeContext(),m=0;E[m];){if(k===E[m][0])return m;m+=1}return-1},x.prototype._memorizeContext=function(k){var E,m;a(k)&&(E=this._safeContext(),m=this._indexOfContext(k),m>-1?E[m][1]+=1:E.push([k,1]))},x.prototype._forgetContext=function(k){var E,m;a(k)&&(E=this._safeContext(),m=this._indexOfContext(k),m>-1&&(E[m][1]-=1,E[m][1]<=0&&E.splice(m,1)))},x.prototype._bindEvent=function(k,E,m){var h=this._safeEvent(k);this._memorizeContext(m),h.push(this._getHandlerItem(E,m))},x.prototype.on=function(k,E,m){var h=this;s(k)?(k=k.split(b),f(k,function(g){h._bindEvent(g,E,m)})):c(k)&&(m=E,f(k,function(g,w){h.on(w,g,m)}))},x.prototype.once=function(k,E,m){var h=this;if(c(k)){m=E,f(k,function(w,p){h.once(p,w,m)});return}function g(){E.apply(m,arguments),h.off(k,g,m)}this.on(k,g,m)},x.prototype._spliceMatches=function(k,E){var m=0,h;if(l(k))for(h=k.length;m<h;m+=1)E(k[m])===!0&&(k.splice(m,1),h-=1,m-=1)},x.prototype._matchHandler=function(k){var E=this;return function(m){var h=k===m.handler;return h&&E._forgetContext(m.context),h}},x.prototype._matchContext=function(k){var E=this;return function(m){var h=k===m.context;return h&&E._forgetContext(m.context),h}},x.prototype._matchHandlerAndContext=function(k,E){var m=this;return function(h){var g=k===h.handler,w=E===h.context,p=g&&w;return p&&m._forgetContext(h.context),p}},x.prototype._offByEventName=function(k,E){var m=this,h=d(E),g=m._matchHandler(E);k=k.split(b),f(k,function(w){var p=m._safeEvent(w);h?m._spliceMatches(p,g):(f(p,function(v){m._forgetContext(v.context)}),m.events[w]=[])})},x.prototype._offByHandler=function(k){var E=this,m=this._matchHandler(k);f(this._safeEvent(),function(h){E._spliceMatches(h,m)})},x.prototype._offByObject=function(k,E){var m=this,h;this._indexOfContext(k)<0?f(k,function(g,w){m.off(w,g)}):s(E)?(h=this._matchContext(k),m._spliceMatches(this._safeEvent(E),h)):d(E)?(h=this._matchHandlerAndContext(E,k),f(this._safeEvent(),function(g){m._spliceMatches(g,h)})):(h=this._matchContext(k),f(this._safeEvent(),function(g){m._spliceMatches(g,h)}))},x.prototype.off=function(k,E){s(k)?this._offByEventName(k,E):arguments.length?d(k)?this._offByHandler(k):c(k)&&this._offByObject(k,E):(this.events={},this.contexts=[])},x.prototype.fire=function(k){this.invoke.apply(this,arguments)},x.prototype.invoke=function(k){var E,m,h,g;if(!this.hasListener(k))return!0;for(E=this._safeEvent(k),m=Array.prototype.slice.call(arguments,1),h=0;E[h];){if(g=E[h],g.handler.apply(g.context,m)===!1)return!1;h+=1}return!0},x.prototype.hasListener=function(k){return this.getListenerLength(k)>0},x.prototype.getListenerLength=function(k){var E=this._safeEvent(k);return E.length},n.exports=x},function(n,r,i){function o(a){return typeof a=="string"||a instanceof String}n.exports=o},function(n,r,i){var o=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,a={leadingZero:function(s,c){var l="",d=0;if((s+"").length>c)return s+"";for(;d<c-1;d+=1)l+="0";return(l+s).slice(c*-1)},isValidRGB:function(s){return o.test(s)},hexToRGB:function(s){var c,l,d;return a.isValidRGB(s)?(s=s.substring(1),c=parseInt(s.substr(0,2),16),l=parseInt(s.substr(2,2),16),d=parseInt(s.substr(4,2),16),[c,l,d]):!1},rgbToHEX:function(s,c,l){var d="#"+a.leadingZero(s.toString(16),2)+a.leadingZero(c.toString(16),2)+a.leadingZero(l.toString(16),2);return a.isValidRGB(d)?d:!1},rgbToHSV:function(s,c,l){var d,f,b,x,k,E;if(s/=255,c/=255,l/=255,d=Math.max(s,c,l),f=Math.min(s,c,l),k=d,E=d-f,x=d===0?0:E/d,d===f)b=0;else{switch(d){case s:b=(c-l)/E+(c<l?6:0);break;case c:b=(l-s)/E+2;break;case l:b=(s-c)/E+4;break}b/=6}return[Math.round(b*360),Math.round(x*100),Math.round(k*100)]},hsvToRGB:function(s,c,l){var d,f,b,x,k,E,m,h;if(s=Math.max(0,Math.min(360,s)),c=Math.max(0,Math.min(100,c)),l=Math.max(0,Math.min(100,l)),c/=100,l/=100,c===0)return d=f=b=l,[Math.round(d*255),Math.round(f*255),Math.round(b*255)];switch(s/=60,x=Math.floor(s),k=s-x,E=l*(1-c),m=l*(1-c*k),h=l*(1-c*(1-k)),x){case 0:d=l,f=h,b=E;break;case 1:d=m,f=l,b=E;break;case 2:d=E,f=l,b=h;break;case 3:d=E,f=m,b=l;break;case 4:d=h,f=E,b=l;break;default:d=l,f=E,b=m;break}return[Math.round(d*255),Math.round(f*255),Math.round(b*255)]}};n.exports=a},function(n,r,i){function o(a){return a instanceof Function}n.exports=o},function(n,r,i){var o=i(11),a=i(2),s=i(26);function c(f,b,x,k){if(o(b)){a(b.split(/\s+/g),function(E){l(f,E,x,k)});return}a(b,function(E,m){l(f,m,E,x)})}function l(f,b,x,k){function E(m){x.call(k||f,m||window.event)}"addEventListener"in f?f.addEventListener(b,E):"attachEvent"in f&&f.attachEvent("on"+b,E),d(f,b,x,E)}function d(f,b,x,k){var E=s(f,b),m=!1;a(E,function(h){return h.handler===x?(m=!0,!1):!0}),m||E.push({handler:x,wrappedHandler:k})}n.exports=c},function(n,r,i){function o(a){if(a.preventDefault){a.preventDefault();return}a.returnValue=!1}n.exports=o},function(n,r,i){function o(a){return a.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}n.exports=o},function(n,r,i){var o=i(11),a=i(2),s=i(26);function c(f,b,x){if(o(b)){a(b.split(/\s+/g),function(k){l(f,k,x)});return}a(b,function(k,E){l(f,E,k)})}function l(f,b,x){var k=s(f,b),E;x?(a(k,function(m,h){return x===m.handler?(d(f,b,m.wrappedHandler),E=h,!1):!0}),k.splice(E,1)):(a(k,function(m){d(f,b,m.wrappedHandler)}),k.splice(0,k.length))}function d(f,b,x){"removeEventListener"in f?f.removeEventListener(b,x):"detachEvent"in f&&f.detachEvent("on"+b,x)}n.exports=c},function(n,r,i){var o=i(50);function a(s,c){var l=o(c.prototype);l.constructor=s,s.prototype=l}n.exports=a},function(n,r,i){var o=i(6),a=i(7),s=i(0),c=i(1),l=i(20),d=i(13),f=i(21),b=i(4),x=Array.prototype.slice;function k(E){this.items={},this.length=0,d(E)&&(this.getItemID=E)}k.and=function(E){var m;return E=x.call(arguments),m=E.length,function(h){for(var g=0;g<m;g+=1)if(!E[g].call(null,h))return!1;return!0}},k.or=function(E){var m;return E=x.call(arguments),m=E.length,function(h){for(var g=1,w=E[0].call(null,h);g<m;g+=1)w=w||E[g].call(null,h);return w}},k.merge=function(E){var m={},h=new k(E.getItemID);return o(arguments,function(g){s(m,g.items)}),h.items=m,h.length=b.getLength(h.items),h},k.prototype.getItemID=function(E){return E._id+""},k.prototype.add=function(E){var m,h;if(arguments.length>1){o(x.call(arguments),function(g){this.add(g)},this);return}m=this.getItemID(E),h=this.items,h[m]||(this.length+=1),h[m]=E},k.prototype.remove=function(E){var m=[],h,g;return this.length?arguments.length>1?(m=b.map(x.call(arguments),function(w){return this.remove(w)},this),m):(h=this.items,f(E)&&(E=this.getItemID(E)),h[E]?(this.length-=1,g=h[E],delete h[E],g):m):m},k.prototype.clear=function(){this.items={},this.length=0},k.prototype.has=function(E){var m,h;return this.length?(m=d(E),h=!1,m?this.each(function(g){return E(g)===!0?(h=!0,!1):!0}):(E=f(E)?this.getItemID(E):E,h=l(this.items[E])),h):!1},k.prototype.doWhenHas=function(E,m,h){var g=this.items[E];l(g)&&m.call(h||this,g)},k.prototype.find=function(E){var m=new k;return this.hasOwnProperty("getItemID")&&(m.getItemID=this.getItemID),this.each(function(h){E(h)===!0&&m.add(h)}),m},k.prototype.groupBy=function(E,m){var h={},g=d(E),w=this.getItemID,p,v;if(c(E)){if(o(E,function(y){h[y+""]=new k(w)}),!m)return h;E=m,g=!0}return this.each(function(y){g?v=E(y):(v=y[E],d(v)&&(v=v.apply(y))),p=h[v],p||(p=h[v]=new k(w)),p.add(y)}),h},k.prototype.single=function(){var E;return this.each(function(m){return E=m,!1},this),E},k.prototype.sort=function(E){var m=[];return this.each(function(h){m.push(h)}),d(E)&&(m=m.sort(E)),m},k.prototype.each=function(E,m){a(this.items,E,m||this)},k.prototype.toArray=function(){return this.length?b.map(this.items,function(E){return E}):[]},n.exports=k},function(n,r,i){var o=i(3),a=i(36);function s(c){return!o(c)&&!a(c)}n.exports=s},function(n,r,i){function o(a){return a===Object(a)}n.exports=o},function(n,r,i){var o={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&a();function a(){var s=window.navigator,c=s.appName.replace(/\s/g,"_"),l=s.userAgent,d=/MSIE\s([0-9]+[.0-9]*)/,f=/Trident.*rv:11\./,b=/Edge\/(\d+)\./,x={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},k,E,m={Microsoft_Internet_Explorer:function(){var g=l.match(d);g?(o.msie=!0,o.version=parseFloat(g[1])):o.others=!0},Netscape:function(){var g=!1;if(f.exec(l))o.msie=!0,o.version=11,g=!0;else if(b.exec(l))o.edge=!0,o.version=l.match(b)[1],g=!0;else for(k in x)if(x.hasOwnProperty(k)&&(E=l.match(x[k]),E&&E.length>1)){o[k]=g=!0,o.version=parseFloat(E[1]||0);break}g||(o.others=!0)}},h=m[c];h&&m[c]()}n.exports=o},function(n,r,i){var o=i(3);function a(s){return!s||!s.className?"":o(s.className.baseVal)?s.className:s.className.baseVal}n.exports=a},function(n,r,i){(function(o){var a=i(10),s=i(42),c=i(44),l=i(47),d=i(28),f=i(17),b=i(14),x=i(15),k=i(0);function E(m,h){b(h,"mousedown",this._onMouseDown,this),this.options=k({distance:10},m),this.container=h,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}E.prototype.destroy=function(){f(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},E.prototype._toggleDragEvent=function(m){var h=this.container;m?(s(h),b(window,"dragstart",x),b(o.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(c(h),f(window,"dragstart",x),f(o.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},E.prototype._getEventData=function(m){return{target:d(m),originEvent:m}},E.prototype._onMouseDown=function(m){l(m)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(m),this._toggleDragEvent(!0))},E.prototype._onMouseMove=function(m){var h=this.options.distance;if(x(m),this._isMoved=!0,this._distance<h){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(m))},E.prototype._onMouseUp=function(m){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(m));return}this.fire("click",this._getEventData(m))},a.mixin(E),n.exports=E}).call(this,i(25))},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){var o="_feEventKey";function a(s,c){var l=s[o],d;return l||(l=s[o]={}),d=l[c],d||(d=l[c]=[]),d}n.exports=a},function(n,r,i){function o(a){var s=document.documentElement.style,c,l;for(c=0,l=a.length;c<l;c+=1)if(a[c]in s)return a[c];return!1}n.exports=o},function(n,r,i){function o(a){return a.target||a.srcElement}n.exports=o},function(n,r,i){var o=i(10),a=i(28),s=i(17),c=i(14),l=i(30),d=i(0),f=i(18),b=i(9),x=i(12),k=i(8),E=i(51);function m(h,g){this.options=d({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},h),g=b.appendHTMLElement("div",g,this.options.cssPrefix+"palette-container"),k.call(this,h,g)}f(m,k),m.prototype._onClick=function(h){var g=this.options,w=a(h),p={};if(l(w,g.cssPrefix+"palette-button")){p.color=w.value,this.fire("_selectColor",p);return}l(w,g.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},m.prototype._onChange=function(h){var g=this.options,w=a(h),p={};l(w,g.cssPrefix+"palette-hex")&&(p.color=w.value,this.fire("_selectColor",p))},m.prototype._beforeDestroy=function(){this._toggleEvent(!1)},m.prototype._toggleEvent=function(h){var g=this.options,w=this.container,p=h?c:s,v;p(w,"click",this._onClick,this),v=w.querySelector("."+g.cssPrefix+"palette-hex",w),v&&p(v,"change",this._onChange,this)},m.prototype.render=function(h){var g=this.options,w="";this._toggleEvent(!1),w=E({cssPrefix:g.cssPrefix,preset:g.preset,detailTxt:g.detailTxt,color:h,isValidRGB:x.isValidRGB,getItemClass:function(p){return p?"":" "+g.cssPrefix+"color-transparent"},isSelected:function(p){return p===h?" "+g.cssPrefix+"selected":""}}),this.container.innerHTML=w,this._toggleEvent(!0)},o.mixin(m),n.exports=m},function(n,r,i){var o=i(5),a=i(23);function s(c,l){var d;return c.classList?c.classList.contains(l):(d=a(c).split(/\s+/),o(l,d)>-1)}n.exports=s},function(n,r,i){var o=i(10),a=i(53),s=i(54),c=i(30),l=i(0),d=i(18),f=i(9),b=i(32),x=i(12),k=i(8),E=i(24),m=i(57),h=-7,g=112,w=-3,p=115,v=359.99;function y(S,T){T=f.appendHTMLElement("div",T,S.cssPrefix+"slider-container"),T.style.display="none",k.call(this,S,T),this.options=l({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},S),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new E({distance:0},T),this.colorSliderPosLimitRange=[h,g],this.huebarPosLimitRange=[w,p],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}d(y,k),y.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},y.prototype.toggle=function(S){this.container.style.display=S?"block":"none"},y.prototype.isVisible=function(){return this.container.style.display==="block"},y.prototype.render=function(S){var T=this.container,C=this.options,M=m.layout,A,P;x.isValidRGB(S)&&(M=M.replace(/{{slider}}/,m.slider),M=M.replace(/{{huebar}}/,m.huebar),M=M.replace(/{{cssPrefix}}/g,C.cssPrefix),M=M.replace(/{{id}}/g,C.id),this.container.innerHTML=M,this.sliderSvgElement=T.querySelector("."+C.cssPrefix+"svg-slider"),this.huebarSvgElement=T.querySelector("."+C.cssPrefix+"svg-huebar"),this.sliderHandleElement=T.querySelector("."+C.cssPrefix+"slider-handle"),this.huebarHandleElement=T.querySelector("."+C.cssPrefix+"huebar-handle"),this.baseColorElement=T.querySelector("."+C.cssPrefix+"slider-basecolor"),A=x.hexToRGB(S),P=x.rgbToHSV.apply(null,A),this.moveHue(P[0],!0),this.moveSaturationAndValue(P[1],P[2],!0))},y.prototype._setColorSliderPosMax=function(){var S=this.sliderSvgElement.getClientRects()[0];S&&(this.colorSliderPosLimitRange[1]=S.height-10)},y.prototype._moveColorSliderHandle=function(S,T,C){var M=this.sliderHandleElement,A;T=Math.max(this.colorSliderPosLimitRange[0],T),T=Math.min(this.colorSliderPosLimitRange[1],T),S=Math.max(this.colorSliderPosLimitRange[0],S),S=Math.min(this.colorSliderPosLimitRange[1],S),b.setTranslateXY(M,S,T),A=T>50?"white":"black",b.setStrokeColor(M,A),C||this.fire("_selectColor",{color:x.rgbToHEX.apply(null,this.getRGB())})},y.prototype.moveSaturationAndValue=function(S,T,C){var M,A,P,L;S=S||0,T=T||0,M=Math.abs(this.colorSliderPosLimitRange[0]),A=this.colorSliderPosLimitRange[1],P=S*A/100-M,L=A-T*A/100-M,this._moveColorSliderHandle(P,L,C)},y.prototype._moveColorSliderByPosition=function(S,T){var C=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(S+C,T+C)},y.prototype.getSaturationAndValue=function(){var S=Math.abs(this.colorSliderPosLimitRange[0]),T=S+this.colorSliderPosLimitRange[1],C=b.getTranslateXY(this.sliderHandleElement),M,A;return M=(C[1]+S)/T*100,A=100-(C[0]+S)/T*100,[M,A]},y.prototype._setHueBarPosMax=function(){var S=this.huebarSvgElement.getClientRects()[0];S&&(this.huebarPosLimitRange[1]=S.height-7)},y.prototype._moveHueHandle=function(S,T){var C=this.huebarHandleElement,M=this.baseColorElement,A,P;S=Math.max(this.huebarPosLimitRange[0],S),S=Math.min(this.huebarPosLimitRange[1],S),b.setTranslateY(C,S),A=x.hsvToRGB(this.getHue(),100,100),P=x.rgbToHEX.apply(null,A),b.setGradientColorStop(M,P),T||this.fire("_selectColor",{color:x.rgbToHEX.apply(null,this.getRGB())})},y.prototype.moveHue=function(S,T){var C=0,M,A;M=Math.abs(this.huebarPosLimitRange[0]),A=M+this.huebarPosLimitRange[1],S=S||0,C=A*S/v-M,this._moveHueHandle(C,T)},y.prototype._moveHueByPosition=function(S){var T=this.huebarPosLimitRange[0];this._moveHueHandle(S+T)},y.prototype.getHue=function(){var S=this.huebarHandleElement,T=b.getTranslateXY(S),C,M;return C=Math.abs(this.huebarPosLimitRange[0]),M=C+this.huebarPosLimitRange[1],(T[0]+C)*v/M},y.prototype.getHSV=function(){var S=this.getSaturationAndValue(),T=this.getHue();return[T].concat(S)},y.prototype.getRGB=function(){return x.hsvToRGB.apply(null,this.getHSV())},y.prototype._prepareColorSliderForMouseEvent=function(S){var T=this.options,C=s(S.target,"."+T.cssPrefix+"slider-part"),M;return M=this._dragDataCache={isColorSlider:c(C,T.cssPrefix+"slider-left"),parentElement:C},M},y.prototype._onClick=function(S){var T=this._prepareColorSliderForMouseEvent(S),C=a(S.originEvent,T.parentElement);T.isColorSlider?this._moveColorSliderByPosition(C[0],C[1]):this._moveHueByPosition(C[1]),this._dragDataCache=null},y.prototype._onDragStart=function(S){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(S)},y.prototype._onDrag=function(S){var T=this._dragDataCache,C=a(S.originEvent,T.parentElement);T.isColorSlider?this._moveColorSliderByPosition(C[0],C[1]):this._moveHueByPosition(C[1])},y.prototype._onDragEnd=function(){this._dragDataCache=null},o.mixin(y),n.exports=y},function(n,r,i){var o=i(4).isOldBrowser,a=/[\.\-0-9]+/g,s=-6,c={getTranslateXY:function(l){var d;return o?(d=l.style,[parseFloat(d.top),parseFloat(d.left)]):(d=l.getAttribute("transform"),d?(d=d.match(a),[parseFloat(d[1]),parseFloat(d[0])]):[0,0])},setTranslateXY:function(l,d,f){o?(l.style.left=d+"px",l.style.top=f+"px"):l.setAttribute("transform","translate("+d+","+f+")")},setTranslateY:function(l,d){o?l.style.top=d+"px":l.setAttribute("transform","translate("+s+","+d+")")},setStrokeColor:function(l,d){o?l.strokecolor=d:l.setAttribute("stroke",d)},setGradientColorStop:function(l,d){o?l.color=d:l.setAttribute("stop-color",d)}};n.exports=c},function(n,r,i){i(34),n.exports=i(35)},function(n,r,i){},function(n,r,i){var o=i(19),a=i(8),s=i(24),c=i(48),l=i(29),d=i(31),f=i(12),b=i(32),x={Collection:o,View:a,Drag:s,create:c,Palette:l,Slider:d,colorutil:f,svgvml:b};n.exports=x},function(n,r,i){function o(a){return a===null}n.exports=o},function(n,r,i){var o=i(3),a=i(38),s=7*24*60*60*1e3;function c(d){var f=new Date().getTime();return f-d>s}function l(d,f){var b="https://www.google-analytics.com/collect",x=location.hostname,k="event",E="use",m="TOAST UI "+d+" for "+x+": Statistics",h=window.localStorage.getItem(m);!o(window.tui)&&window.tui.usageStatistics===!1||h&&!c(h)||(window.localStorage.setItem(m,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&a(b,{v:1,t:k,tid:f,cid:x,dp:x,dh:d,el:d,ec:E})},1e3))}n.exports=l},function(n,r,i){var o=i(7);function a(s,c){var l=document.createElement("img"),d="";return o(c,function(f,b){d+="&"+b+"="+f}),d=d.substring(1),l.src=s+"?"+d,l.style.display="none",document.body.appendChild(l),document.body.removeChild(l),l}n.exports=a},function(n,r,i){var o=i(2),a=i(5),s=i(23),c=i(40);function l(d){var f=Array.prototype.slice.call(arguments,1),b=d.classList,x=[],k;if(b){o(f,function(E){d.classList.add(E)});return}k=s(d),k&&(f=[].concat(k.split(/\s+/),f)),o(f,function(E){a(E,x)<0&&x.push(E)}),c(d,x)}n.exports=l},function(n,r,i){var o=i(1),a=i(3);function s(c,l){if(l=o(l)?l.join(" "):l,l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),a(c.className.baseVal)){c.className=l;return}c.className.baseVal=l}n.exports=s},function(n,r,i){function o(a){return typeof a=="number"||a instanceof Number}n.exports=o},function(n,r,i){var o=i(14),a=i(15),s=i(43),c=i(27),l="onselectstart"in document,d="prevUserSelect",f=c(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function b(x){x||(x=document),l?o(x,"selectstart",a):(x=x===document?document.documentElement:x,s(x,d,x.style[f]),x.style[f]="none")}n.exports=b},function(n,r,i){var o=i(16);function a(s,c,l){if(s.dataset){s.dataset[c]=l;return}s.setAttribute("data-"+o(c),l)}n.exports=a},function(n,r,i){var o=i(17),a=i(15),s=i(45),c=i(46),l=i(27),d="onselectstart"in document,f="prevUserSelect",b=l(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function x(k){k||(k=document),d?o(k,"selectstart",a):(k=k===document?document.documentElement:k,k.style[b]=s(k,f)||"auto",c(k,f))}n.exports=x},function(n,r,i){var o=i(16);function a(s,c){return s.dataset?s.dataset[c]:s.getAttribute("data-"+o(c))}n.exports=a},function(n,r,i){var o=i(16);function a(s,c){if(s.dataset){delete s.dataset[c];return}s.removeAttribute("data-"+o(c))}n.exports=a},function(n,r,i){var o=i(22),a=i(5),s=["0","1","3","5","7"],c=["2","6"],l=["4"];function d(b){return o.msie&&o.version<=8?f(b):b.button}function f(b){var x=String(b.button);return a(x,s)>-1?0:a(x,c)>-1?2:a(x,l)>-1?1:null}n.exports=d},function(n,r,i){var o=i(10),a=i(0),s=i(4),c=i(12),l=i(49),d=i(29),f=i(31),b=0;function x(){return b+=1,b}function k(E){var m;if(!(this instanceof k))return new k(E);if(E=this.options=a({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:x(),usageStatistics:!0},E),!E.container)throw new Error("ColorPicker(): need container option.");m=this.layout=new l(E,E.container),this.palette=new d(E,m.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new f(E,m.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),m.addChild(this.palette),m.addChild(this.slider),this.render(E.color),E.usageStatistics&&s.sendHostName()}k.prototype._onSelectColorInPalette=function(E){var m=E.color,h=this.options;if(!c.isValidRGB(m)&&m!==""){this.render();return}this.fire("selectColor",{color:m,origin:"palette"}),h.color!==m&&(h.color=m,this.render(m))},k.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},k.prototype._onSelectColorInSlider=function(E){var m=E.color,h=this.options;this.fire("selectColor",{color:m,origin:"slider"}),h.color!==m&&(h.color=m,this.palette.render(m))},k.prototype.setColor=function(E){if(!c.isValidRGB(E))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=E,this.render(E)},k.prototype.getColor=function(){return this.options.color},k.prototype.toggle=function(E){this.layout.container.style.display=E?"block":"none"},k.prototype.render=function(E){this.layout.render(E||this.options.color)},k.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},o.mixin(k),n.exports=k},function(n,r,i){var o=i(0),a=i(18),s=i(9),c=i(8);function l(d,f){this.options=o({cssPrefix:"tui-colorpicker-"},d),f=s.appendHTMLElement("div",f,this.options.cssPrefix+"container"),c.call(this,d,f),this.render()}a(l,c),l.prototype.render=function(d){this.recursive(function(f){f.render(d)},!0)},n.exports=l},function(n,r,i){function o(a){function s(){}return s.prototype=a,new s}n.exports=o},function(n,r,i){var o=i(52);n.exports=function(a){var s=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),c=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",s,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return o(c,a)}},function(n,r,i){var o=i(5),a=i(2),s=i(1),c=i(11),l=i(0),d=/{{\s?|\s?}}/g,f=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,b=/\[\s?|\s?\]/,x=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,k=/\./,E=/^["']\w+["']$/,m=/"|'/g,h=/^-?\d+\.?\d*$/,g=2,w={if:T,each:C,with:M},p="a".split(/a/).length===3,v=function(){return p?function($,Y){return $.split(Y)}:function($,Y){var ae=[],K=0,te,G;for(Y.global||(Y=new RegExp(Y,"g")),te=Y.exec($);te!==null;)G=te.index,ae.push($.slice(K,G)),K=G+te[0].length,te=Y.exec($);return ae.push($.slice(K)),ae}}();function y($,Y){var ae,K=Y[$];return $==="true"?K=!0:$==="false"?K=!1:E.test($)?K=$.replace(m,""):f.test($)?(ae=$.split(b),K=y(ae[0],Y)[y(ae[1],Y)]):x.test($)?(ae=$.split(k),K=y(ae[0],Y)[ae[1]]):h.test($)&&(K=parseFloat($)),K}function S($,Y){var ae=[$],K=[],te=0,G=0;return a(Y,function(ue,J){ue.indexOf("if")===0?te+=1:ue==="/if"?te-=1:!te&&(ue.indexOf("elseif")===0||ue==="else")&&(ae.push(ue==="else"?["true"]:ue.split(" ").slice(1)),K.push(Y.slice(G,J)),G=J+1)}),K.push(Y.slice(G)),{exps:ae,sourcesInsideIf:K}}function T($,Y,ae){var K=S($,Y),te=!1,G="";return a(K.exps,function(ue,J){return te=L(ue,ae),te&&(G=j(K.sourcesInsideIf[J],ae)),!te}),G}function C($,Y,ae){var K=L($,ae),te=s(K)?"@index":"@key",G={},ue="";return a(K,function(J,be){G[te]=be,G["@this"]=J,l(ae,G),ue+=j(Y.slice(),ae)}),ue}function M($,Y,ae){var K=o("as",$),te=$[K+1],G=L($.slice(0,K),ae),ue={};return ue[te]=G,j(Y,l(ae,ue))||""}function A($,Y,ae){var K=$.splice(Y+1,ae-Y);return K.pop(),K}function P($,Y,ae){for(var K=w[$],te=1,G=0,ue,J=G+g,be=Y[J];te&&c(be);)be.indexOf($)===0?te+=1:be.indexOf("/"+$)===0&&(te-=1,ue=J),J+=g,be=Y[J];if(te)throw Error($+" needs {{/"+$+"}} expression.");return Y[G]=K(Y[G].split(" ").slice(1),A(Y,G,ue),ae),Y}function L($,Y){var ae=y($[0],Y);return ae instanceof Function?R(ae,$.slice(1),Y):ae}function R($,Y,ae){var K=[];return a(Y,function(te){K.push(y(te,ae))}),$.apply(null,K)}function j($,Y){for(var ae=1,K=$[ae],te,G,ue;c(K);)te=K.split(" "),G=te[0],w[G]?(ue=P(G,$.splice(ae,$.length-ae),Y),$=$.concat(ue)):$[ae]=L(te,Y),ae+=g,K=$[ae];return $.join("")}function z($,Y){return j(v($,d),Y)}n.exports=z},function(n,r,i){var o=i(1);function a(s,c){var l=o(s),d=l?s[0]:s.clientX,f=l?s[1]:s.clientY,b;return c?(b=c.getBoundingClientRect(),[d-b.left-c.clientLeft,f-b.top-c.clientTop]):[d,f]}n.exports=a},function(n,r,i){var o=i(55);function a(s,c){var l=s.parentNode;if(o(s,c))return s;for(;l&&l!==document;){if(o(l,c))return l;l=l.parentNode}return null}n.exports=a},function(n,r,i){var o=i(5),a=i(56),s=Element.prototype,c=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||function(d){var f=this.document||this.ownerDocument;return o(this,a(f.querySelectorAll(d)))>-1};function l(d,f){return c.call(d,f)}n.exports=l},function(n,r,i){var o=i(6);function a(s){var c;try{c=Array.prototype.slice.call(s)}catch{c=[],o(s,function(d){c.push(d)})}return c}n.exports=a},function(n,r,i){(function(o){var a=i(4).isOldBrowser,s=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),c=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),l=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),d=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),f=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);a&&o.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),n.exports={layout:s,slider:a?l:c,huebar:a?f:d}}).call(this,i(25))}])})}(cx)),cx.exports}/*!
 * TOAST UI ImageEditor
 * @version 3.15.3
 * @license MIT
 */var f_;function yQ(){return f_||(f_=1,function(t,e){(function(r,i){t.exports=i(vQ())})(self,function(n){return function(){var r={2777:function(s,c,l){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var d=d||{version:"4.6.0"};if(c.fabric=d,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?d.document=document:d.document=document.implementation.createHTMLDocument(""),d.window=window;else{var f=l(4960),b=new f.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;d.document=b.document,d.jsdomImplForWrapper=l(6759).implForWrapper,d.nodeCanvas=l(6272).Canvas,d.window=b,DOMParser=d.window.DOMParser}d.isTouchSupported="ontouchstart"in d.window||"ontouchstart"in d.document||d.window&&d.window.navigator&&d.window.navigator.maxTouchPoints>0,d.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",d.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],d.DPI=96,d.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",d.commaWsp="(?:\\s+,?\\s*|,\\s*)",d.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,d.reNonWord=/[ \n\.,;!\?\-]/,d.fontPaths={},d.iMatrix=[1,0,0,1,0,0],d.svgNS="http://www.w3.org/2000/svg",d.perfLimitSizeTotal=2097152,d.maxCacheSideLimit=4096,d.minCacheSideLimit=256,d.charWidthsCache={},d.textureSize=2048,d.disableStyleCopyPaste=!1,d.enableGLFiltering=!0,d.devicePixelRatio=d.window.devicePixelRatio||d.window.webkitDevicePixelRatio||d.window.mozDevicePixelRatio||1,d.browserShadowBlurConstant=1,d.arcToSegmentsCache={},d.boundsOfCurveCache={},d.cachesBoundsOfCurve=!0,d.forceGLPutImageData=!1,d.initFilterBackend=function(){if(d.enableGLFiltering&&d.isWebglSupported&&d.isWebglSupported(d.textureSize))return console.log("max texture size: "+d.maxTextureSize),new d.WebglFilterBackend({tileSize:d.textureSize});if(d.Canvas2dFilterBackend)return new d.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=d),function(){function m(y,S){if(this.__eventListeners[y]){var T=this.__eventListeners[y];S?T[T.indexOf(S)]=!1:d.util.array.fill(T,!1)}}function h(y,S){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var T in y)this.on(T,y[T]);else this.__eventListeners[y]||(this.__eventListeners[y]=[]),this.__eventListeners[y].push(S);return this}function g(y,S){var T=(function(){S.apply(this,arguments),this.off(y,T)}).bind(this);this.on(y,T)}function w(y,S){if(arguments.length===1)for(var T in y)g.call(this,T,y[T]);else g.call(this,y,S);return this}function p(y,S){if(!this.__eventListeners)return this;if(arguments.length===0)for(y in this.__eventListeners)m.call(this,y);else if(arguments.length===1&&typeof arguments[0]=="object")for(var T in y)m.call(this,T,y[T]);else m.call(this,y,S);return this}function v(y,S){if(!this.__eventListeners)return this;var T=this.__eventListeners[y];if(!T)return this;for(var C=0,M=T.length;C<M;C++)T[C]&&T[C].call(this,S||{});return this.__eventListeners[y]=T.filter(function(A){return A!==!1}),this}d.Observable={fire:v,on:h,once:w,off:p}}(),d.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var m=0,h=arguments.length;m<h;m++)this._onObjectAdded(arguments[m]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(m,h,g){var w=this._objects;return g?w[h]=m:w.splice(h,0,m),this._onObjectAdded&&this._onObjectAdded(m),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var m=this._objects,h,g=!1,w=0,p=arguments.length;w<p;w++)h=m.indexOf(arguments[w]),h!==-1&&(g=!0,m.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[w]));return this.renderOnAddRemove&&g&&this.requestRenderAll(),this},forEachObject:function(m,h){for(var g=this.getObjects(),w=0,p=g.length;w<p;w++)m.call(h,g[w],w,g);return this},getObjects:function(m){return typeof m>"u"?this._objects.concat():this._objects.filter(function(h){return h.type===m})},item:function(m){return this._objects[m]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(m,h){return this._objects.indexOf(m)>-1?!0:h?this._objects.some(function(g){return typeof g.contains=="function"&&g.contains(m,!0)}):!1},complexity:function(){return this._objects.reduce(function(m,h){return m+=h.complexity?h.complexity():0,m},0)}},d.CommonMethods={_setOptions:function(m){for(var h in m)this.set(h,m[h])},_initGradient:function(m,h){m&&m.colorStops&&!(m instanceof d.Gradient)&&this.set(h,new d.Gradient(m))},_initPattern:function(m,h,g){m&&m.source&&!(m instanceof d.Pattern)?this.set(h,new d.Pattern(m,g)):g&&g()},_setObject:function(m){for(var h in m)this._set(h,m[h])},set:function(m,h){return typeof m=="object"?this._setObject(m):this._set(m,h),this},_set:function(m,h){this[m]=h},toggle:function(m){var h=this.get(m);return typeof h=="boolean"&&this.set(m,!h),this},get:function(m){return this[m]}},function(m){var h=Math.sqrt,g=Math.atan2,w=Math.pow,p=Math.PI/180,v=Math.PI/2;d.util={cos:function(y){if(y===0)return 1;y<0&&(y=-y);var S=y/v;switch(S){case 1:case 3:return 0;case 2:return-1}return Math.cos(y)},sin:function(y){if(y===0)return 0;var S=y/v,T=1;switch(y<0&&(T=-1),S){case 1:return T;case 2:return 0;case 3:return-T}return Math.sin(y)},removeFromArray:function(y,S){var T=y.indexOf(S);return T!==-1&&y.splice(T,1),y},getRandomInt:function(y,S){return Math.floor(Math.random()*(S-y+1))+y},degreesToRadians:function(y){return y*p},radiansToDegrees:function(y){return y/p},rotatePoint:function(y,S,T){var C=new d.Point(y.x-S.x,y.y-S.y),M=d.util.rotateVector(C,T);return new d.Point(M.x,M.y).addEquals(S)},rotateVector:function(y,S){var T=d.util.sin(S),C=d.util.cos(S),M=y.x*C-y.y*T,A=y.x*T+y.y*C;return{x:M,y:A}},transformPoint:function(y,S,T){return T?new d.Point(S[0]*y.x+S[2]*y.y,S[1]*y.x+S[3]*y.y):new d.Point(S[0]*y.x+S[2]*y.y+S[4],S[1]*y.x+S[3]*y.y+S[5])},makeBoundingBoxFromPoints:function(y,S){if(S)for(var T=0;T<y.length;T++)y[T]=d.util.transformPoint(y[T],S);var C=[y[0].x,y[1].x,y[2].x,y[3].x],M=d.util.array.min(C),A=d.util.array.max(C),P=A-M,L=[y[0].y,y[1].y,y[2].y,y[3].y],R=d.util.array.min(L),j=d.util.array.max(L),z=j-R;return{left:M,top:R,width:P,height:z}},invertTransform:function(y){var S=1/(y[0]*y[3]-y[1]*y[2]),T=[S*y[3],-S*y[1],-S*y[2],S*y[0]],C=d.util.transformPoint({x:y[4],y:y[5]},T,!0);return T[4]=-C.x,T[5]=-C.y,T},toFixed:function(y,S){return parseFloat(Number(y).toFixed(S))},parseUnit:function(y,S){var T=/\D{0,2}$/.exec(y),C=parseFloat(y);switch(S||(S=d.Text.DEFAULT_SVG_FONT_SIZE),T[0]){case"mm":return C*d.DPI/25.4;case"cm":return C*d.DPI/2.54;case"in":return C*d.DPI;case"pt":return C*d.DPI/72;case"pc":return C*d.DPI/72*12;case"em":return C*S;default:return C}},falseFunction:function(){return!1},getKlass:function(y,S){return y=d.util.string.camelize(y.charAt(0).toUpperCase()+y.slice(1)),d.util.resolveNamespace(S)[y]},getSvgAttributes:function(y){var S=["instantiated_by_use","style","id","class"];switch(y){case"linearGradient":S=S.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":S=S.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":S=S.concat(["offset","stop-color","stop-opacity"]);break}return S},resolveNamespace:function(y){if(!y)return d;var S=y.split("."),T=S.length,C,M=m||d.window;for(C=0;C<T;++C)M=M[S[C]];return M},loadImage:function(y,S,T,C){if(!y){S&&S.call(T,y);return}var M=d.util.createImage(),A=function(){S&&S.call(T,M,!1),M=M.onload=M.onerror=null};M.onload=A,M.onerror=function(){d.log("Error loading "+M.src),S&&S.call(T,null,!0),M=M.onload=M.onerror=null},y.indexOf("data")!==0&&C!==void 0&&C!==null&&(M.crossOrigin=C),y.substring(0,14)==="data:image/svg"&&(M.onload=null,d.util.loadImageInDom(M,A)),M.src=y},loadImageInDom:function(y,S){var T=d.document.createElement("div");T.style.width=T.style.height="1px",T.style.left=T.style.top="-100%",T.style.position="absolute",T.appendChild(y),d.document.querySelector("body").appendChild(T),y.onload=function(){S(),T.parentNode.removeChild(T),T=null}},enlivenObjects:function(y,S,T,C){y=y||[];var M=[],A=0,P=y.length;function L(){++A===P&&S&&S(M.filter(function(R){return R}))}if(!P){S&&S(M);return}y.forEach(function(R,j){if(!R||!R.type){L();return}var z=d.util.getKlass(R.type,T);z.fromObject(R,function($,Y){Y||(M[j]=$),C&&C(R,$,Y),L()})})},enlivenPatterns:function(y,S){y=y||[];function T(){++M===A&&S&&S(C)}var C=[],M=0,A=y.length;if(!A){S&&S(C);return}y.forEach(function(P,L){P&&P.source?new d.Pattern(P,function(R){C[L]=R,T()}):(C[L]=P,T())})},groupSVGElements:function(y,S,T){var C;return y&&y.length===1?y[0]:(S&&(S.width&&S.height?S.centerPoint={x:S.width/2,y:S.height/2}:(delete S.width,delete S.height)),C=new d.Group(y,S),typeof T<"u"&&(C.sourcePath=T),C)},populateWithProperties:function(y,S,T){if(T&&Object.prototype.toString.call(T)==="[object Array]")for(var C=0,M=T.length;C<M;C++)T[C]in y&&(S[T[C]]=y[T[C]])},drawDashedLine:function(y,S,T,C,M,A){var P=C-S,L=M-T,R=h(P*P+L*L),j=g(L,P),z=A.length,$=0,Y=!0;for(y.save(),y.translate(S,T),y.moveTo(0,0),y.rotate(j),S=0;R>S;)S+=A[$++%z],S>R&&(S=R),y[Y?"lineTo":"moveTo"](S,0),Y=!Y;y.restore()},createCanvasElement:function(){return d.document.createElement("canvas")},copyCanvasElement:function(y){var S=d.util.createCanvasElement();return S.width=y.width,S.height=y.height,S.getContext("2d").drawImage(y,0,0),S},toDataURL:function(y,S,T){return y.toDataURL("image/"+S,T)},createImage:function(){return d.document.createElement("img")},multiplyTransformMatrices:function(y,S,T){return[y[0]*S[0]+y[2]*S[1],y[1]*S[0]+y[3]*S[1],y[0]*S[2]+y[2]*S[3],y[1]*S[2]+y[3]*S[3],T?0:y[0]*S[4]+y[2]*S[5]+y[4],T?0:y[1]*S[4]+y[3]*S[5]+y[5]]},qrDecompose:function(y){var S=g(y[1],y[0]),T=w(y[0],2)+w(y[1],2),C=h(T),M=(y[0]*y[3]-y[2]*y[1])/C,A=g(y[0]*y[2]+y[1]*y[3],T);return{angle:S/p,scaleX:C,scaleY:M,skewX:A/p,skewY:0,translateX:y[4],translateY:y[5]}},calcRotateMatrix:function(y){if(!y.angle)return d.iMatrix.concat();var S=d.util.degreesToRadians(y.angle),T=d.util.cos(S),C=d.util.sin(S);return[T,C,-C,T,0,0]},calcDimensionsMatrix:function(y){var S=typeof y.scaleX>"u"?1:y.scaleX,T=typeof y.scaleY>"u"?1:y.scaleY,C=[y.flipX?-S:S,0,0,y.flipY?-T:T,0,0],M=d.util.multiplyTransformMatrices,A=d.util.degreesToRadians;return y.skewX&&(C=M(C,[1,0,Math.tan(A(y.skewX)),1],!0)),y.skewY&&(C=M(C,[1,Math.tan(A(y.skewY)),0,1],!0)),C},composeMatrix:function(y){var S=[1,0,0,1,y.translateX||0,y.translateY||0],T=d.util.multiplyTransformMatrices;return y.angle&&(S=T(S,d.util.calcRotateMatrix(y))),(y.scaleX!==1||y.scaleY!==1||y.skewX||y.skewY||y.flipX||y.flipY)&&(S=T(S,d.util.calcDimensionsMatrix(y))),S},resetObjectTransform:function(y){y.scaleX=1,y.scaleY=1,y.skewX=0,y.skewY=0,y.flipX=!1,y.flipY=!1,y.rotate(0)},saveObjectTransform:function(y){return{scaleX:y.scaleX,scaleY:y.scaleY,skewX:y.skewX,skewY:y.skewY,angle:y.angle,left:y.left,flipX:y.flipX,flipY:y.flipY,top:y.top}},isTransparent:function(y,S,T,C){C>0&&(S>C?S-=C:S=0,T>C?T-=C:T=0);var M=!0,A,P,L=y.getImageData(S,T,C*2||1,C*2||1),R=L.data.length;for(A=3;A<R&&(P=L.data[A],M=P<=0,M!==!1);A+=4);return L=null,M},parsePreserveAspectRatioAttribute:function(y){var S="meet",T="Mid",C="Mid",M=y.split(" "),A;return M&&M.length&&(S=M.pop(),S!=="meet"&&S!=="slice"?(A=S,S="meet"):M.length&&(A=M.pop())),T=A!=="none"?A.slice(1,4):"none",C=A!=="none"?A.slice(5,8):"none",{meetOrSlice:S,alignX:T,alignY:C}},clearFabricFontCache:function(y){y=(y||"").toLowerCase(),y?d.charWidthsCache[y]&&delete d.charWidthsCache[y]:d.charWidthsCache={}},limitDimsByArea:function(y,S){var T=Math.sqrt(S*y),C=Math.floor(S/T);return{x:Math.floor(T),y:C}},capValue:function(y,S,T){return Math.max(y,Math.min(S,T))},findScaleToFit:function(y,S){return Math.min(S.width/y.width,S.height/y.height)},findScaleToCover:function(y,S){return Math.max(S.width/y.width,S.height/y.height)},matrixToSVG:function(y){return"matrix("+y.map(function(S){return d.util.toFixed(S,d.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(y,S){var T=d.util.invertTransform(S),C=d.util.multiplyTransformMatrices(T,y.calcOwnMatrix());d.util.applyTransformToObject(y,C)},addTransformToObject:function(y,S){d.util.applyTransformToObject(y,d.util.multiplyTransformMatrices(S,y.calcOwnMatrix()))},applyTransformToObject:function(y,S){var T=d.util.qrDecompose(S),C=new d.Point(T.translateX,T.translateY);y.flipX=!1,y.flipY=!1,y.set("scaleX",T.scaleX),y.set("scaleY",T.scaleY),y.skewX=T.skewX,y.skewY=T.skewY,y.angle=T.angle,y.setPositionByOrigin(C,"center","center")},sizeAfterTransform:function(y,S,T){var C=y/2,M=S/2,A=[{x:-C,y:-M},{x:C,y:-M},{x:-C,y:M},{x:C,y:M}],P=d.util.calcDimensionsMatrix(T),L=d.util.makeBoundingBoxFromPoints(A,P);return{x:L.width,y:L.height}}}}(c),function(){var m=Array.prototype.join,h={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},g={m:"l",M:"L"};function w(Q,Z,he,X,re,le,fe,ke,q,ie,we){var Me=d.util.cos(Q),xe=d.util.sin(Q),ge=d.util.cos(Z),ye=d.util.sin(Z),se=he*re*ge-X*le*ye+fe,me=X*re*ge+he*le*ye+ke,Ie=ie+q*(-he*re*xe-X*le*Me),Pe=we+q*(-X*re*xe+he*le*Me),Se=se+q*(he*re*ye+X*le*ge),Ce=me+q*(X*re*ye-he*le*ge);return["C",Ie,Pe,Se,Ce,se,me]}function p(Q,Z,he,X,re,le,fe){var ke=Math.PI,q=fe*ke/180,ie=d.util.sin(q),we=d.util.cos(q),Me=0,xe=0;he=Math.abs(he),X=Math.abs(X);var ge=-we*Q*.5-ie*Z*.5,ye=-we*Z*.5+ie*Q*.5,se=he*he,me=X*X,Ie=ye*ye,Pe=ge*ge,Se=se*me-se*Ie-me*Pe,Ce=0;if(Se<0){var pe=Math.sqrt(1-Se/(se*me));he*=pe,X*=pe}else Ce=(re===le?-1:1)*Math.sqrt(Se/(se*Ie+me*Pe));var _e=Ce*he*ye/X,Be=-Ce*X*ge/he,Ke=we*_e-ie*Be+Q*.5,ht=ie*_e+we*Be+Z*.5,vt=v(1,0,(ge-_e)/he,(ye-Be)/X),At=v((ge-_e)/he,(ye-Be)/X,(-ge-_e)/he,(-ye-Be)/X);le===0&&At>0?At-=2*ke:le===1&&At<0&&(At+=2*ke);for(var nt=Math.ceil(Math.abs(At/ke*2)),qe=[],ut=At/nt,Mt=8/3*Math.sin(ut/4)*Math.sin(ut/4)/Math.sin(ut/2),Ne=vt+ut,Le=0;Le<nt;Le++)qe[Le]=w(vt,Ne,we,ie,he,X,Ke,ht,Mt,Me,xe),Me=qe[Le][5],xe=qe[Le][6],vt=Ne,Ne+=ut;return qe}function v(Q,Z,he,X){var re=Math.atan2(Z,Q),le=Math.atan2(X,he);return le>=re?le-re:2*Math.PI-(re-le)}function y(Q,Z,he,X,re,le,fe,ke){var q;if(d.cachesBoundsOfCurve&&(q=m.call(arguments),d.boundsOfCurveCache[q]))return d.boundsOfCurveCache[q];var ie=Math.sqrt,we=Math.min,Me=Math.max,xe=Math.abs,ge=[],ye=[[],[]],se,me,Ie,Pe,Se,Ce,pe,_e;me=6*Q-12*he+6*re,se=-3*Q+9*he-9*re+3*fe,Ie=3*he-3*Q;for(var Be=0;Be<2;++Be){if(Be>0&&(me=6*Z-12*X+6*le,se=-3*Z+9*X-9*le+3*ke,Ie=3*X-3*Z),xe(se)<1e-12){if(xe(me)<1e-12)continue;Pe=-Ie/me,0<Pe&&Pe<1&&ge.push(Pe);continue}pe=me*me-4*Ie*se,!(pe<0)&&(_e=ie(pe),Se=(-me+_e)/(2*se),0<Se&&Se<1&&ge.push(Se),Ce=(-me-_e)/(2*se),0<Ce&&Ce<1&&ge.push(Ce))}for(var Ke,ht,vt=ge.length,At=vt,nt;vt--;)Pe=ge[vt],nt=1-Pe,Ke=nt*nt*nt*Q+3*nt*nt*Pe*he+3*nt*Pe*Pe*re+Pe*Pe*Pe*fe,ye[0][vt]=Ke,ht=nt*nt*nt*Z+3*nt*nt*Pe*X+3*nt*Pe*Pe*le+Pe*Pe*Pe*ke,ye[1][vt]=ht;ye[0][At]=Q,ye[1][At]=Z,ye[0][At+1]=fe,ye[1][At+1]=ke;var qe=[{x:we.apply(null,ye[0]),y:we.apply(null,ye[1])},{x:Me.apply(null,ye[0]),y:Me.apply(null,ye[1])}];return d.cachesBoundsOfCurve&&(d.boundsOfCurveCache[q]=qe),qe}function S(Q,Z,he){for(var X=he[1],re=he[2],le=he[3],fe=he[4],ke=he[5],q=he[6],ie=he[7],we=p(q-Q,ie-Z,X,re,fe,ke,le),Me=0,xe=we.length;Me<xe;Me++)we[Me][1]+=Q,we[Me][2]+=Z,we[Me][3]+=Q,we[Me][4]+=Z,we[Me][5]+=Q,we[Me][6]+=Z;return we}function T(Q){var Z=0,he=0,X=Q.length,re=0,le=0,fe,ke,q,ie=[],we,Me,xe;for(ke=0;ke<X;++ke){switch(q=!1,fe=Q[ke].slice(0),fe[0]){case"l":fe[0]="L",fe[1]+=Z,fe[2]+=he;case"L":Z=fe[1],he=fe[2];break;case"h":fe[1]+=Z;case"H":fe[0]="L",fe[2]=he,Z=fe[1];break;case"v":fe[1]+=he;case"V":fe[0]="L",he=fe[1],fe[1]=Z,fe[2]=he;break;case"m":fe[0]="M",fe[1]+=Z,fe[2]+=he;case"M":Z=fe[1],he=fe[2],re=fe[1],le=fe[2];break;case"c":fe[0]="C",fe[1]+=Z,fe[2]+=he,fe[3]+=Z,fe[4]+=he,fe[5]+=Z,fe[6]+=he;case"C":Me=fe[3],xe=fe[4],Z=fe[5],he=fe[6];break;case"s":fe[0]="S",fe[1]+=Z,fe[2]+=he,fe[3]+=Z,fe[4]+=he;case"S":we==="C"?(Me=2*Z-Me,xe=2*he-xe):(Me=Z,xe=he),Z=fe[3],he=fe[4],fe[0]="C",fe[5]=fe[3],fe[6]=fe[4],fe[3]=fe[1],fe[4]=fe[2],fe[1]=Me,fe[2]=xe,Me=fe[3],xe=fe[4];break;case"q":fe[0]="Q",fe[1]+=Z,fe[2]+=he,fe[3]+=Z,fe[4]+=he;case"Q":Me=fe[1],xe=fe[2],Z=fe[3],he=fe[4];break;case"t":fe[0]="T",fe[1]+=Z,fe[2]+=he;case"T":we==="Q"?(Me=2*Z-Me,xe=2*he-xe):(Me=Z,xe=he),fe[0]="Q",Z=fe[1],he=fe[2],fe[1]=Me,fe[2]=xe,fe[3]=Z,fe[4]=he;break;case"a":fe[0]="A",fe[6]+=Z,fe[7]+=he;case"A":q=!0,ie=ie.concat(S(Z,he,fe)),Z=fe[6],he=fe[7];break;case"z":case"Z":Z=re,he=le;break}q||ie.push(fe),we=fe[0]}return ie}function C(Q,Z,he,X){return Math.sqrt((he-Q)*(he-Q)+(X-Z)*(X-Z))}function M(Q){return Q*Q*Q}function A(Q){return 3*Q*Q*(1-Q)}function P(Q){return 3*Q*(1-Q)*(1-Q)}function L(Q){return(1-Q)*(1-Q)*(1-Q)}function R(Q,Z,he,X,re,le,fe,ke){return function(q){var ie=M(q),we=A(q),Me=P(q),xe=L(q);return{x:fe*ie+re*we+he*Me+Q*xe,y:ke*ie+le*we+X*Me+Z*xe}}}function j(Q,Z,he,X,re,le,fe,ke){return function(q){var ie=1-q,we=3*ie*ie*(he-Q)+6*ie*q*(re-he)+3*q*q*(fe-re),Me=3*ie*ie*(X-Z)+6*ie*q*(le-X)+3*q*q*(ke-le);return Math.atan2(Me,we)}}function z(Q){return Q*Q}function $(Q){return 2*Q*(1-Q)}function Y(Q){return(1-Q)*(1-Q)}function ae(Q,Z,he,X,re,le){return function(fe){var ke=z(fe),q=$(fe),ie=Y(fe);return{x:re*ke+he*q+Q*ie,y:le*ke+X*q+Z*ie}}}function K(Q,Z,he,X,re,le){return function(fe){var ke=1-fe,q=2*ke*(he-Q)+2*fe*(re-he),ie=2*ke*(X-Z)+2*fe*(le-X);return Math.atan2(ie,q)}}function te(Q,Z,he){var X={x:Z,y:he},re,le=0,fe;for(fe=1;fe<=100;fe+=1)re=Q(fe/100),le+=C(X.x,X.y,re.x,re.y),X=re;return le}function G(Q,Z){for(var he=0,X=0,re=Q.iterator,le={x:Q.x,y:Q.y},fe,ke,q=.01,ie=Q.angleFinder,we;X<Z&&he<=1&&q>1e-4;)fe=re(he),we=he,ke=C(le.x,le.y,fe.x,fe.y),ke+X>Z?(q/=2,he-=q):(le=fe,he+=q,X+=ke);return fe.angle=ie(we),fe}function ue(Q){for(var Z=0,he=Q.length,X,re=0,le=0,fe=0,ke=0,q=[],ie,we,Me,xe=0;xe<he;xe++){switch(X=Q[xe],we={x:re,y:le,command:X[0]},X[0]){case"M":we.length=0,fe=re=X[1],ke=le=X[2];break;case"L":we.length=C(re,le,X[1],X[2]),re=X[1],le=X[2];break;case"C":ie=R(re,le,X[1],X[2],X[3],X[4],X[5],X[6]),Me=j(re,le,X[1],X[2],X[3],X[4],X[5],X[6]),we.iterator=ie,we.angleFinder=Me,we.length=te(ie,re,le),re=X[5],le=X[6];break;case"Q":ie=ae(re,le,X[1],X[2],X[3],X[4]),Me=K(re,le,X[1],X[2],X[3],X[4]),we.iterator=ie,we.angleFinder=Me,we.length=te(ie,re,le),re=X[3],le=X[4];break;case"Z":case"z":we.destX=fe,we.destY=ke,we.length=C(re,le,fe,ke),re=fe,le=ke;break}Z+=we.length,q.push(we)}return q.push({length:Z,x:re,y:le}),q}function J(Q,Z,he){he||(he=ue(Q));for(var X=0;Z-he[X].length>0&&X<he.length-2;)Z-=he[X].length,X++;var re=he[X],le=Z/re.length,fe=re.command,ke=Q[X],q;switch(fe){case"M":return{x:re.x,y:re.y,angle:0};case"Z":case"z":return q=new d.Point(re.x,re.y).lerp(new d.Point(re.destX,re.destY),le),q.angle=Math.atan2(re.destY-re.y,re.destX-re.x),q;case"L":return q=new d.Point(re.x,re.y).lerp(new d.Point(ke[1],ke[2]),le),q.angle=Math.atan2(ke[2]-re.y,ke[1]-re.x),q;case"C":return G(re,Z);case"Q":return G(re,Z)}}function be(Q){var Z=[],he=[],X,re,le=d.rePathCommand,fe="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ke="("+fe+")"+d.commaWsp,q="([01])"+d.commaWsp+"?",ie=ke+"?"+ke+"?"+ke+q+q+ke+"?("+fe+")",we=new RegExp(ie,"g"),Me,xe,ge;if(!Q||!Q.match)return Z;ge=Q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ye=0,se,me=ge.length;ye<me;ye++){X=ge[ye],xe=X.slice(1).trim(),he.length=0;var Ie=X.charAt(0);if(se=[Ie],Ie.toLowerCase()==="a")for(var Pe;Pe=we.exec(xe);)for(var Se=1;Se<Pe.length;Se++)he.push(Pe[Se]);else for(;Me=le.exec(xe);)he.push(Me[0]);for(var Se=0,Ce=he.length;Se<Ce;Se++)re=parseFloat(he[Se]),isNaN(re)||se.push(re);var pe=h[Ie.toLowerCase()],_e=g[Ie]||Ie;if(se.length-1>pe)for(var Be=1,Ke=se.length;Be<Ke;Be+=pe)Z.push([Ie].concat(se.slice(Be,Be+pe))),Ie=_e;else Z.push(se)}return Z}function de(Q,Z){var he=[],X,re=new d.Point(Q[0].x,Q[0].y),le=new d.Point(Q[1].x,Q[1].y),fe=Q.length,ke=1,q=0,ie=fe>2;for(Z=Z||0,ie&&(ke=Q[2].x<le.x?-1:Q[2].x===le.x?0:1,q=Q[2].y<le.y?-1:Q[2].y===le.y?0:1),he.push(["M",re.x-ke*Z,re.y-q*Z]),X=1;X<fe;X++){if(!re.eq(le)){var we=re.midPointFrom(le);he.push(["Q",re.x,re.y,we.x,we.y])}re=Q[X],X+1<Q.length&&(le=Q[X+1])}return ie&&(ke=re.x>Q[X-2].x?1:re.x===Q[X-2].x?0:-1,q=re.y>Q[X-2].y?1:re.y===Q[X-2].y?0:-1),he.push(["L",re.x+ke*Z,re.y+q*Z]),he}function ce(Q,Z,he){return he&&(Z=d.util.multiplyTransformMatrices(Z,[1,0,0,1,-he.x,-he.y])),Q.map(function(X){for(var re=X.slice(0),le={},fe=1;fe<X.length-1;fe+=2)le.x=X[fe],le.y=X[fe+1],le=d.util.transformPoint(le,Z),re[fe]=le.x,re[fe+1]=le.y;return re})}function V(Q,Z,he,X,re,le,fe,ke,q){for(var ie=0,we=0,Me,xe=[],ge=p(ke-Q,q-Z,he,X,le,fe,re),ye=0,se=ge.length;ye<se;ye++)Me=y(ie,we,ge[ye][1],ge[ye][2],ge[ye][3],ge[ye][4],ge[ye][5],ge[ye][6]),xe.push({x:Me[0].x+Q,y:Me[0].y+Z}),xe.push({x:Me[1].x+Q,y:Me[1].y+Z}),ie=ge[ye][5],we=ge[ye][6];return xe}function ne(Q,Z,he,X){X=X.slice(0).unshift("X");var re=S(Z,he,X);re.forEach(function(le){Q.bezierCurveTo.apply(Q,le.slice(1))})}d.util.joinPath=function(Q){return Q.map(function(Z){return Z.join(" ")}).join(" ")},d.util.parsePath=be,d.util.makePathSimpler=T,d.util.getSmoothPathFromPoints=de,d.util.getPathSegmentsInfo=ue,d.util.getBoundsOfCurve=y,d.util.getPointOnPath=J,d.util.transformPath=ce,d.util.fromArcToBeizers=S,d.util.getBoundsOfArc=V,d.util.drawArc=ne}(),function(){var m=Array.prototype.slice;function h(y,S){for(var T=m.call(arguments,2),C=[],M=0,A=y.length;M<A;M++)C[M]=T.length?y[M][S].apply(y[M],T):y[M][S].call(y[M]);return C}function g(y,S){return v(y,S,function(T,C){return T>=C})}function w(y,S){return v(y,S,function(T,C){return T<C})}function p(y,S){for(var T=y.length;T--;)y[T]=S;return y}function v(y,S,T){if(!(!y||y.length===0)){var C=y.length-1,M=S?y[C][S]:y[C];if(S)for(;C--;)T(y[C][S],M)&&(M=y[C][S]);else for(;C--;)T(y[C],M)&&(M=y[C]);return M}}d.util.array={fill:p,invoke:h,min:w,max:g}}(),function(){function m(g,w,p){if(p)if(!d.isLikelyNode&&w instanceof Element)g=w;else if(w instanceof Array){g=[];for(var v=0,y=w.length;v<y;v++)g[v]=m({},w[v],p)}else if(w&&typeof w=="object")for(var S in w)S==="canvas"||S==="group"?g[S]=null:w.hasOwnProperty(S)&&(g[S]=m({},w[S],p));else g=w;else for(var S in w)g[S]=w[S];return g}function h(g,w){return m({},g,w)}d.util.object={extend:m,clone:h},d.util.object.extend(d.util,d.Observable)}(),function(){function m(v){return v.replace(/-+(.)?/g,function(y,S){return S?S.toUpperCase():""})}function h(v,y){return v.charAt(0).toUpperCase()+(y?v.slice(1):v.slice(1).toLowerCase())}function g(v){return v.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(v){var y=0,S,T=[];for(y=0,S;y<v.length;y++)(S=p(v,y))!==!1&&T.push(S);return T}function p(v,y){var S=v.charCodeAt(y);if(isNaN(S))return"";if(S<55296||S>57343)return v.charAt(y);if(55296<=S&&S<=56319){if(v.length<=y+1)throw"High surrogate without following low surrogate";var T=v.charCodeAt(y+1);if(56320>T||T>57343)throw"High surrogate without following low surrogate";return v.charAt(y)+v.charAt(y+1)}if(y===0)throw"Low surrogate without preceding high surrogate";var C=v.charCodeAt(y-1);if(55296>C||C>56319)throw"Low surrogate without preceding high surrogate";return!1}d.util.string={camelize:m,capitalize:h,escapeXml:g,graphemeSplit:w}}(),function(){var m=Array.prototype.slice,h=function(){},g=function(){for(var S in{toString:1})if(S==="toString")return!1;return!0}(),w=function(S,T,C){for(var M in T)M in S.prototype&&typeof S.prototype[M]=="function"&&(T[M]+"").indexOf("callSuper")>-1?S.prototype[M]=function(A){return function(){var P=this.constructor.superclass;this.constructor.superclass=C;var L=T[A].apply(this,arguments);if(this.constructor.superclass=P,A!=="initialize")return L}}(M):S.prototype[M]=T[M],g&&(T.toString!==Object.prototype.toString&&(S.prototype.toString=T.toString),T.valueOf!==Object.prototype.valueOf&&(S.prototype.valueOf=T.valueOf))};function p(){}function v(S){for(var T=null,C=this;C.constructor.superclass;){var M=C.constructor.superclass.prototype[S];if(C[S]!==M){T=M;break}C=C.constructor.superclass.prototype}return T?arguments.length>1?T.apply(this,m.call(arguments,1)):T.call(this):console.log("tried to callSuper "+S+", method not found in prototype chain",this)}function y(){var S=null,T=m.call(arguments,0);typeof T[0]=="function"&&(S=T.shift());function C(){this.initialize.apply(this,arguments)}C.superclass=S,C.subclasses=[],S&&(p.prototype=S.prototype,C.prototype=new p,S.subclasses.push(C));for(var M=0,A=T.length;M<A;M++)w(C,T[M],S);return C.prototype.initialize||(C.prototype.initialize=h),C.prototype.constructor=C,C.prototype.callSuper=v,C}d.util.createClass=y}(),function(){var m=!!d.document.createElement("div").attachEvent,h=["touchstart","touchmove","touchend"];d.util.addListener=function(w,p,v,y){w&&w.addEventListener(p,v,m?!1:y)},d.util.removeListener=function(w,p,v,y){w&&w.removeEventListener(p,v,m?!1:y)};function g(w){var p=w.changedTouches;return p&&p[0]?p[0]:w}d.util.getPointer=function(w){var p=w.target,v=d.util.getScrollLeftTop(p),y=g(w);return{x:y.clientX+v.left,y:y.clientY+v.top}},d.util.isTouchEvent=function(w){return h.indexOf(w.type)>-1||w.pointerType==="touch"}}(),function(){function m(y,S){var T=y.style;if(!T)return y;if(typeof S=="string")return y.style.cssText+=";"+S,S.indexOf("opacity")>-1?v(y,S.match(/opacity:\s*(\d?\.?\d*)/)[1]):y;for(var C in S)if(C==="opacity")v(y,S[C]);else{var M=C==="float"||C==="cssFloat"?typeof T.styleFloat>"u"?"cssFloat":"styleFloat":C;T[M]=S[C]}return y}var h=d.document.createElement("div"),g=typeof h.style.opacity=="string",w=typeof h.style.filter=="string",p=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,v=function(y){return y};g?v=function(y,S){return y.style.opacity=S,y}:w&&(v=function(y,S){var T=y.style;return y.currentStyle&&!y.currentStyle.hasLayout&&(T.zoom=1),p.test(T.filter)?(S=S>=.9999?"":"alpha(opacity="+S*100+")",T.filter=T.filter.replace(p,S)):T.filter+=" alpha(opacity="+S*100+")",y}),d.util.setStyle=m}(),function(){var m=Array.prototype.slice;function h(L){return typeof L=="string"?d.document.getElementById(L):L}var g,w=function(L){return m.call(L,0)};try{g=w(d.document.childNodes)instanceof Array}catch{}g||(w=function(L){for(var R=new Array(L.length),j=L.length;j--;)R[j]=L[j];return R});function p(L,R){var j=d.document.createElement(L);for(var z in R)z==="class"?j.className=R[z]:z==="for"?j.htmlFor=R[z]:j.setAttribute(z,R[z]);return j}function v(L,R){L&&(" "+L.className+" ").indexOf(" "+R+" ")===-1&&(L.className+=(L.className?" ":"")+R)}function y(L,R,j){return typeof R=="string"&&(R=p(R,j)),L.parentNode&&L.parentNode.replaceChild(R,L),R.appendChild(L),R}function S(L){for(var R=0,j=0,z=d.document.documentElement,$=d.document.body||{scrollLeft:0,scrollTop:0};L&&(L.parentNode||L.host)&&(L=L.parentNode||L.host,L===d.document?(R=$.scrollLeft||z.scrollLeft||0,j=$.scrollTop||z.scrollTop||0):(R+=L.scrollLeft||0,j+=L.scrollTop||0),!(L.nodeType===1&&L.style.position==="fixed")););return{left:R,top:j}}function T(L){var R,j=L&&L.ownerDocument,z={left:0,top:0},$={left:0,top:0},Y,ae={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!j)return $;for(var K in ae)$[ae[K]]+=parseInt(C(L,K),10)||0;return R=j.documentElement,typeof L.getBoundingClientRect<"u"&&(z=L.getBoundingClientRect()),Y=S(L),{left:z.left+Y.left-(R.clientLeft||0)+$.left,top:z.top+Y.top-(R.clientTop||0)+$.top}}var C;d.document.defaultView&&d.document.defaultView.getComputedStyle?C=function(L,R){var j=d.document.defaultView.getComputedStyle(L,null);return j?j[R]:void 0}:C=function(L,R){var j=L.style[R];return!j&&L.currentStyle&&(j=L.currentStyle[R]),j},function(){var L=d.document.documentElement.style,R="userSelect"in L?"userSelect":"MozUserSelect"in L?"MozUserSelect":"WebkitUserSelect"in L?"WebkitUserSelect":"KhtmlUserSelect"in L?"KhtmlUserSelect":"";function j($){return typeof $.onselectstart<"u"&&($.onselectstart=d.util.falseFunction),R?$.style[R]="none":typeof $.unselectable=="string"&&($.unselectable="on"),$}function z($){return typeof $.onselectstart<"u"&&($.onselectstart=null),R?$.style[R]="":typeof $.unselectable=="string"&&($.unselectable=""),$}d.util.makeElementUnselectable=j,d.util.makeElementSelectable=z}();function M(L){var R=d.jsdomImplForWrapper(L);return R._canvas||R._image}function A(L){if(d.isLikelyNode){var R=d.jsdomImplForWrapper(L);R&&(R._image=null,R._canvas=null,R._currentSrc=null,R._attributes=null,R._classList=null)}}function P(L,R){L.imageSmoothingEnabled=L.imageSmoothingEnabled||L.webkitImageSmoothingEnabled||L.mozImageSmoothingEnabled||L.msImageSmoothingEnabled||L.oImageSmoothingEnabled,L.imageSmoothingEnabled=R}d.util.setImageSmoothing=P,d.util.getById=h,d.util.toArray=w,d.util.addClass=v,d.util.makeElement=p,d.util.wrapElement=y,d.util.getScrollLeftTop=S,d.util.getElementOffset=T,d.util.getNodeCanvas=M,d.util.cleanUpJsdomNode=A}(),function(){function m(w,p){return w+(/\?/.test(w)?"&":"?")+p}function h(){}function g(w,p){p||(p={});var v=p.method?p.method.toUpperCase():"GET",y=p.onComplete||function(){},S=new d.window.XMLHttpRequest,T=p.body||p.parameters;return S.onreadystatechange=function(){S.readyState===4&&(y(S),S.onreadystatechange=h)},v==="GET"&&(T=null,typeof p.parameters=="string"&&(w=m(w,p.parameters))),S.open(v,w,!0),(v==="POST"||v==="PUT")&&S.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),S.send(T),S}d.util.request=g}(),d.log=console.log,d.warn=console.warn,function(){function m(){return!1}function h(S,T,C,M){return-C*Math.cos(S/M*(Math.PI/2))+C+T}function g(S){var T=!1;return v(function(C){S||(S={});var M=C||+new Date,A=S.duration||500,P=M+A,L,R=S.onChange||m,j=S.abort||m,z=S.onComplete||m,$=S.easing||h,Y="startValue"in S?S.startValue:0,ae="endValue"in S?S.endValue:100,K=S.byValue||ae-Y;S.onStart&&S.onStart(),function te(G){L=G||+new Date;var ue=L>P?A:L-M,J=ue/A,be=$(ue,Y,K,A),de=Math.abs((be-Y)/K);if(!T){if(j(be,de,J)){z(ae,1,1);return}if(L>P){R(ae,1,1),z(ae,1,1);return}else R(be,de,J),v(te)}}(M)}),function(){T=!0}}var w=d.window.requestAnimationFrame||d.window.webkitRequestAnimationFrame||d.window.mozRequestAnimationFrame||d.window.oRequestAnimationFrame||d.window.msRequestAnimationFrame||function(S){return d.window.setTimeout(S,1e3/60)},p=d.window.cancelAnimationFrame||d.window.clearTimeout;function v(){return w.apply(d.window,arguments)}function y(){return p.apply(d.window,arguments)}d.util.animate=g,d.util.requestAnimFrame=v,d.util.cancelAnimFrame=y}(),function(){function m(g,w,p){var v="rgba("+parseInt(g[0]+p*(w[0]-g[0]),10)+","+parseInt(g[1]+p*(w[1]-g[1]),10)+","+parseInt(g[2]+p*(w[2]-g[2]),10);return v+=","+(g&&w?parseFloat(g[3]+p*(w[3]-g[3])):1),v+=")",v}function h(g,w,p,v){var y=new d.Color(g).getSource(),S=new d.Color(w).getSource(),T=v.onComplete,C=v.onChange;return v=v||{},d.util.animate(d.util.object.extend(v,{duration:p||500,startValue:y,endValue:S,byValue:S,easing:function(M,A,P,L){var R=v.colorEasing?v.colorEasing(M,L):1-Math.cos(M/L*(Math.PI/2));return m(A,P,R)},onComplete:function(M,A,P){if(T)return T(m(S,S,0),A,P)},onChange:function(M,A,P){if(C){if(Array.isArray(M))return C(m(M,M,0),A,P);C(M,A,P)}}}))}d.util.animateColor=h}(),function(){function m(V,ne,Q,Z){return V<Math.abs(ne)?(V=ne,Z=Q/4):ne===0&&V===0?Z=Q/(2*Math.PI)*Math.asin(1):Z=Q/(2*Math.PI)*Math.asin(ne/V),{a:V,c:ne,p:Q,s:Z}}function h(V,ne,Q){return V.a*Math.pow(2,10*(ne-=1))*Math.sin((ne*Q-V.s)*(2*Math.PI)/V.p)}function g(V,ne,Q,Z){return Q*((V=V/Z-1)*V*V+1)+ne}function w(V,ne,Q,Z){return V/=Z/2,V<1?Q/2*V*V*V+ne:Q/2*((V-=2)*V*V+2)+ne}function p(V,ne,Q,Z){return Q*(V/=Z)*V*V*V+ne}function v(V,ne,Q,Z){return-Q*((V=V/Z-1)*V*V*V-1)+ne}function y(V,ne,Q,Z){return V/=Z/2,V<1?Q/2*V*V*V*V+ne:-Q/2*((V-=2)*V*V*V-2)+ne}function S(V,ne,Q,Z){return Q*(V/=Z)*V*V*V*V+ne}function T(V,ne,Q,Z){return Q*((V=V/Z-1)*V*V*V*V+1)+ne}function C(V,ne,Q,Z){return V/=Z/2,V<1?Q/2*V*V*V*V*V+ne:Q/2*((V-=2)*V*V*V*V+2)+ne}function M(V,ne,Q,Z){return-Q*Math.cos(V/Z*(Math.PI/2))+Q+ne}function A(V,ne,Q,Z){return Q*Math.sin(V/Z*(Math.PI/2))+ne}function P(V,ne,Q,Z){return-Q/2*(Math.cos(Math.PI*V/Z)-1)+ne}function L(V,ne,Q,Z){return V===0?ne:Q*Math.pow(2,10*(V/Z-1))+ne}function R(V,ne,Q,Z){return V===Z?ne+Q:Q*(-Math.pow(2,-10*V/Z)+1)+ne}function j(V,ne,Q,Z){return V===0?ne:V===Z?ne+Q:(V/=Z/2,V<1?Q/2*Math.pow(2,10*(V-1))+ne:Q/2*(-Math.pow(2,-10*--V)+2)+ne)}function z(V,ne,Q,Z){return-Q*(Math.sqrt(1-(V/=Z)*V)-1)+ne}function $(V,ne,Q,Z){return Q*Math.sqrt(1-(V=V/Z-1)*V)+ne}function Y(V,ne,Q,Z){return V/=Z/2,V<1?-Q/2*(Math.sqrt(1-V*V)-1)+ne:Q/2*(Math.sqrt(1-(V-=2)*V)+1)+ne}function ae(V,ne,Q,Z){var he=1.70158,X=0,re=Q;if(V===0)return ne;if(V/=Z,V===1)return ne+Q;X||(X=Z*.3);var le=m(re,Q,X,he);return-h(le,V,Z)+ne}function K(V,ne,Q,Z){var he=1.70158,X=0,re=Q;if(V===0)return ne;if(V/=Z,V===1)return ne+Q;X||(X=Z*.3);var le=m(re,Q,X,he);return le.a*Math.pow(2,-10*V)*Math.sin((V*Z-le.s)*(2*Math.PI)/le.p)+le.c+ne}function te(V,ne,Q,Z){var he=1.70158,X=0,re=Q;if(V===0)return ne;if(V/=Z/2,V===2)return ne+Q;X||(X=Z*.44999999999999996);var le=m(re,Q,X,he);return V<1?-.5*h(le,V,Z)+ne:le.a*Math.pow(2,-10*(V-=1))*Math.sin((V*Z-le.s)*(2*Math.PI)/le.p)*.5+le.c+ne}function G(V,ne,Q,Z,he){return he===void 0&&(he=1.70158),Q*(V/=Z)*V*((he+1)*V-he)+ne}function ue(V,ne,Q,Z,he){return he===void 0&&(he=1.70158),Q*((V=V/Z-1)*V*((he+1)*V+he)+1)+ne}function J(V,ne,Q,Z,he){return he===void 0&&(he=1.70158),V/=Z/2,V<1?Q/2*(V*V*(((he*=1.525)+1)*V-he))+ne:Q/2*((V-=2)*V*(((he*=1.525)+1)*V+he)+2)+ne}function be(V,ne,Q,Z){return Q-de(Z-V,0,Q,Z)+ne}function de(V,ne,Q,Z){return(V/=Z)<.36363636363636365?Q*(7.5625*V*V)+ne:V<.7272727272727273?Q*(7.5625*(V-=.5454545454545454)*V+.75)+ne:V<.9090909090909091?Q*(7.5625*(V-=.8181818181818182)*V+.9375)+ne:Q*(7.5625*(V-=.9545454545454546)*V+.984375)+ne}function ce(V,ne,Q,Z){return V<Z/2?be(V*2,0,Q,Z)*.5+ne:de(V*2-Z,0,Q,Z)*.5+Q*.5+ne}d.util.ease={easeInQuad:function(V,ne,Q,Z){return Q*(V/=Z)*V+ne},easeOutQuad:function(V,ne,Q,Z){return-Q*(V/=Z)*(V-2)+ne},easeInOutQuad:function(V,ne,Q,Z){return V/=Z/2,V<1?Q/2*V*V+ne:-Q/2*(--V*(V-2)-1)+ne},easeInCubic:function(V,ne,Q,Z){return Q*(V/=Z)*V*V+ne},easeOutCubic:g,easeInOutCubic:w,easeInQuart:p,easeOutQuart:v,easeInOutQuart:y,easeInQuint:S,easeOutQuint:T,easeInOutQuint:C,easeInSine:M,easeOutSine:A,easeInOutSine:P,easeInExpo:L,easeOutExpo:R,easeInOutExpo:j,easeInCirc:z,easeOutCirc:$,easeInOutCirc:Y,easeInElastic:ae,easeOutElastic:K,easeInOutElastic:te,easeInBack:G,easeOutBack:ue,easeInOutBack:J,easeInBounce:be,easeOutBounce:de,easeInOutBounce:ce}}(),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.util.object.clone,p=h.util.toFixed,v=h.util.parseUnit,y=h.util.multiplyTransformMatrices,S=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],T=["symbol","image","marker","pattern","view","svg"],C=["pattern","defs","symbol","metadata","clipPath","mask","desc"],M=["symbol","g","a","svg","clipPath","defs"],A={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},P={stroke:"strokeOpacity",fill:"fillOpacity"},L="font-size",R="clip-path";h.svgValidTagNamesRegEx=$(S),h.svgViewBoxElementsRegEx=$(T),h.svgInvalidAncestorsRegEx=$(C),h.svgValidParentsRegEx=$(M),h.cssRules={},h.gradientDefs={},h.clipPaths={};function j(X){return X in A?A[X]:X}function z(X,re,le,fe){var ke=Object.prototype.toString.call(re)==="[object Array]",q;if((X==="fill"||X==="stroke")&&re==="none")re="";else{if(X==="strokeUniform")return re==="non-scaling-stroke";if(X==="strokeDashArray")re==="none"?re=null:re=re.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(X==="transformMatrix")le&&le.transformMatrix?re=y(le.transformMatrix,h.parseTransformAttribute(re)):re=h.parseTransformAttribute(re);else if(X==="visible")re=re!=="none"&&re!=="hidden",le&&le.visible===!1&&(re=!1);else if(X==="opacity")re=parseFloat(re),le&&typeof le.opacity<"u"&&(re*=le.opacity);else if(X==="textAnchor")re=re==="start"?"left":re==="end"?"right":"center";else if(X==="charSpacing")q=v(re,fe)/fe*1e3;else if(X==="paintFirst"){var ie=re.indexOf("fill"),we=re.indexOf("stroke"),re="fill";(ie>-1&&we>-1&&we<ie||ie===-1&&we>-1)&&(re="stroke")}else{if(X==="href"||X==="xlink:href"||X==="font")return re;if(X==="imageSmoothing")return re==="optimizeQuality";q=ke?re.map(v):v(re,fe)}}return!ke&&isNaN(q)?re:q}function $(X){return new RegExp("^("+X.join("|")+")\\b","i")}function Y(X){for(var re in P)if(!(typeof X[P[re]]>"u"||X[re]==="")){if(typeof X[re]>"u"){if(!h.Object.prototype[re])continue;X[re]=h.Object.prototype[re]}if(X[re].indexOf("url(")!==0){var le=new h.Color(X[re]);X[re]=le.setAlpha(p(le.getAlpha()*X[P[re]],2)).toRgba()}}return X}function ae(X,re){var le,fe=[],ke,q,ie;for(q=0,ie=re.length;q<ie;q++)le=re[q],ke=X.getElementsByTagName(le),fe=fe.concat(Array.prototype.slice.call(ke));return fe}h.parseTransformAttribute=function(){function X(pe,_e){var Be=h.util.cos(_e[0]),Ke=h.util.sin(_e[0]),ht=0,vt=0;_e.length===3&&(ht=_e[1],vt=_e[2]),pe[0]=Be,pe[1]=Ke,pe[2]=-Ke,pe[3]=Be,pe[4]=ht-(Be*ht-Ke*vt),pe[5]=vt-(Ke*ht+Be*vt)}function re(pe,_e){var Be=_e[0],Ke=_e.length===2?_e[1]:_e[0];pe[0]=Be,pe[3]=Ke}function le(pe,_e,Be){pe[Be]=Math.tan(h.util.degreesToRadians(_e[0]))}function fe(pe,_e){pe[4]=_e[0],_e.length===2&&(pe[5]=_e[1])}var ke=h.iMatrix,q=h.reNum,ie=h.commaWsp,we="(?:(skewX)\\s*\\(\\s*("+q+")\\s*\\))",Me="(?:(skewY)\\s*\\(\\s*("+q+")\\s*\\))",xe="(?:(rotate)\\s*\\(\\s*("+q+")(?:"+ie+"("+q+")"+ie+"("+q+"))?\\s*\\))",ge="(?:(scale)\\s*\\(\\s*("+q+")(?:"+ie+"("+q+"))?\\s*\\))",ye="(?:(translate)\\s*\\(\\s*("+q+")(?:"+ie+"("+q+"))?\\s*\\))",se="(?:(matrix)\\s*\\(\\s*("+q+")"+ie+"("+q+")"+ie+"("+q+")"+ie+"("+q+")"+ie+"("+q+")"+ie+"("+q+")\\s*\\))",me="(?:"+se+"|"+ye+"|"+ge+"|"+xe+"|"+we+"|"+Me+")",Ie="(?:"+me+"(?:"+ie+"*"+me+")*)",Pe="^\\s*(?:"+Ie+"?)\\s*$",Se=new RegExp(Pe),Ce=new RegExp(me,"g");return function(pe){var _e=ke.concat(),Be=[];if(!pe||pe&&!Se.test(pe))return _e;pe.replace(Ce,function(ht){var vt=new RegExp(me).exec(ht).filter(function(qe){return!!qe}),At=vt[1],nt=vt.slice(2).map(parseFloat);switch(At){case"translate":fe(_e,nt);break;case"rotate":nt[0]=h.util.degreesToRadians(nt[0]),X(_e,nt);break;case"scale":re(_e,nt);break;case"skewX":le(_e,nt,2);break;case"skewY":le(_e,nt,1);break;case"matrix":_e=nt;break}Be.push(_e.concat()),_e=ke.concat()});for(var Ke=Be[0];Be.length>1;)Be.shift(),Ke=h.util.multiplyTransformMatrices(Ke,Be[0]);return Ke}}();function K(X,re){var le,fe;X.replace(/;\s*$/,"").split(";").forEach(function(ke){var q=ke.split(":");le=q[0].trim().toLowerCase(),fe=q[1].trim(),re[le]=fe})}function te(X,re){var le,fe;for(var ke in X)typeof X[ke]>"u"||(le=ke.toLowerCase(),fe=X[ke],re[le]=fe)}function G(X,re){var le={};for(var fe in h.cssRules[re])if(ue(X,fe.split(" ")))for(var ke in h.cssRules[re][fe])le[ke]=h.cssRules[re][fe][ke];return le}function ue(X,re){var le,fe=!0;return le=be(X,re.pop()),le&&re.length&&(fe=J(X,re)),le&&fe&&re.length===0}function J(X,re){for(var le,fe=!0;X.parentNode&&X.parentNode.nodeType===1&&re.length;)fe&&(le=re.pop()),X=X.parentNode,fe=be(X,le);return re.length===0}function be(X,re){var le=X.nodeName,fe=X.getAttribute("class"),ke=X.getAttribute("id"),q,ie;if(q=new RegExp("^"+le,"i"),re=re.replace(q,""),ke&&re.length&&(q=new RegExp("#"+ke+"(?![a-zA-Z\\-]+)","i"),re=re.replace(q,"")),fe&&re.length)for(fe=fe.split(" "),ie=fe.length;ie--;)q=new RegExp("\\."+fe[ie]+"(?![a-zA-Z\\-]+)","i"),re=re.replace(q,"");return re.length===0}function de(X,re){var le;if(X.getElementById&&(le=X.getElementById(re)),le)return le;var fe,ke,q,ie=X.getElementsByTagName("*");for(ke=0,q=ie.length;ke<q;ke++)if(fe=ie[ke],re===fe.getAttribute("id"))return fe}function ce(X){for(var re=ae(X,["use","svg:use"]),le=0;re.length&&le<re.length;){var fe=re[le],ke=fe.getAttribute("xlink:href")||fe.getAttribute("href");if(ke===null)return;var q=ke.substr(1),ie=fe.getAttribute("x")||0,we=fe.getAttribute("y")||0,Me=de(X,q).cloneNode(!0),xe=(Me.getAttribute("transform")||"")+" translate("+ie+", "+we+")",ge,ye=re.length,se,me,Ie,Pe,Se=h.svgNS;if(ne(Me),/^svg$/i.test(Me.nodeName)){var Ce=Me.ownerDocument.createElementNS(Se,"g");for(me=0,Ie=Me.attributes,Pe=Ie.length;me<Pe;me++)se=Ie.item(me),Ce.setAttributeNS(Se,se.nodeName,se.nodeValue);for(;Me.firstChild;)Ce.appendChild(Me.firstChild);Me=Ce}for(me=0,Ie=fe.attributes,Pe=Ie.length;me<Pe;me++)se=Ie.item(me),!(se.nodeName==="x"||se.nodeName==="y"||se.nodeName==="xlink:href"||se.nodeName==="href")&&(se.nodeName==="transform"?xe=se.nodeValue+" "+xe:Me.setAttribute(se.nodeName,se.nodeValue));Me.setAttribute("transform",xe),Me.setAttribute("instantiated_by_use","1"),Me.removeAttribute("id"),ge=fe.parentNode,ge.replaceChild(Me,fe),re.length===ye&&le++}}var V=new RegExp("^\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*$");function ne(X){if(!h.svgViewBoxElementsRegEx.test(X.nodeName))return{};var re=X.getAttribute("viewBox"),le=1,fe=1,ke=0,q=0,ie,we,Me,xe,ge=X.getAttribute("width"),ye=X.getAttribute("height"),se=X.getAttribute("x")||0,me=X.getAttribute("y")||0,Ie=X.getAttribute("preserveAspectRatio")||"",Pe=!re||!(re=re.match(V)),Se=!ge||!ye||ge==="100%"||ye==="100%",Ce=Pe&&Se,pe={},_e="",Be=0,Ke=0;if(pe.width=0,pe.height=0,pe.toBeParsed=Ce,Pe&&(se||me)&&X.parentNode&&X.parentNode.nodeName!=="#document"&&(_e=" translate("+v(se)+" "+v(me)+") ",Me=(X.getAttribute("transform")||"")+_e,X.setAttribute("transform",Me),X.removeAttribute("x"),X.removeAttribute("y")),Ce)return pe;if(Pe)return pe.width=v(ge),pe.height=v(ye),pe;if(ke=-parseFloat(re[1]),q=-parseFloat(re[2]),ie=parseFloat(re[3]),we=parseFloat(re[4]),pe.minX=ke,pe.minY=q,pe.viewBoxWidth=ie,pe.viewBoxHeight=we,Se?(pe.width=ie,pe.height=we):(pe.width=v(ge),pe.height=v(ye),le=pe.width/ie,fe=pe.height/we),Ie=h.util.parsePreserveAspectRatioAttribute(Ie),Ie.alignX!=="none"&&(Ie.meetOrSlice==="meet"&&(fe=le=le>fe?fe:le),Ie.meetOrSlice==="slice"&&(fe=le=le>fe?le:fe),Be=pe.width-ie*le,Ke=pe.height-we*le,Ie.alignX==="Mid"&&(Be/=2),Ie.alignY==="Mid"&&(Ke/=2),Ie.alignX==="Min"&&(Be=0),Ie.alignY==="Min"&&(Ke=0)),le===1&&fe===1&&ke===0&&q===0&&se===0&&me===0)return pe;if((se||me)&&X.parentNode.nodeName!=="#document"&&(_e=" translate("+v(se)+" "+v(me)+") "),Me=_e+" matrix("+le+" 0 0 "+fe+" "+(ke*le+Be)+" "+(q*fe+Ke)+") ",X.nodeName==="svg"){for(xe=X.ownerDocument.createElementNS(h.svgNS,"g");X.firstChild;)xe.appendChild(X.firstChild);X.appendChild(xe)}else xe=X,xe.removeAttribute("x"),xe.removeAttribute("y"),Me=xe.getAttribute("transform")+Me;return xe.setAttribute("transform",Me),pe}function Q(X,re){for(;X&&(X=X.parentNode);)if(X.nodeName&&re.test(X.nodeName.replace("svg:",""))&&!X.getAttribute("instantiated_by_use"))return!0;return!1}h.parseSVGDocument=function(X,re,le,fe){if(X){ce(X);var ke=h.Object.__uid++,q,ie,we=ne(X),Me=h.util.toArray(X.getElementsByTagName("*"));if(we.crossOrigin=fe&&fe.crossOrigin,we.svgUid=ke,Me.length===0&&h.isLikelyNode){Me=X.selectNodes('//*[name(.)!="svg"]');var xe=[];for(q=0,ie=Me.length;q<ie;q++)xe[q]=Me[q];Me=xe}var ge=Me.filter(function(se){return ne(se),h.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))&&!Q(se,h.svgInvalidAncestorsRegEx)});if(!ge||ge&&!ge.length){re&&re([],{});return}var ye={};Me.filter(function(se){return se.nodeName.replace("svg:","")==="clipPath"}).forEach(function(se){var me=se.getAttribute("id");ye[me]=h.util.toArray(se.getElementsByTagName("*")).filter(function(Ie){return h.svgValidTagNamesRegEx.test(Ie.nodeName.replace("svg:",""))})}),h.gradientDefs[ke]=h.getGradientDefs(X),h.cssRules[ke]=h.getCSSRules(X),h.clipPaths[ke]=ye,h.parseElements(ge,function(se,me){re&&(re(se,we,me,Me),delete h.gradientDefs[ke],delete h.cssRules[ke],delete h.clipPaths[ke])},w(we),le,fe)}};function Z(X,re){var le=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],fe="xlink:href",ke=re.getAttribute(fe).substr(1),q=de(X,ke);if(q&&q.getAttribute(fe)&&Z(X,q),le.forEach(function(we){q&&!re.hasAttribute(we)&&q.hasAttribute(we)&&re.setAttribute(we,q.getAttribute(we))}),!re.children.length)for(var ie=q.cloneNode(!0);ie.firstChild;)re.appendChild(ie.firstChild);re.removeAttribute(fe)}var he=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+h.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+h.reNum+"))?\\s+(.*)");g(h,{parseFontDeclaration:function(X,re){var le=X.match(he);if(le){var fe=le[1],ke=le[3],q=le[4],ie=le[5],we=le[6];fe&&(re.fontStyle=fe),ke&&(re.fontWeight=isNaN(parseFloat(ke))?ke:parseFloat(ke)),q&&(re.fontSize=v(q)),we&&(re.fontFamily=we),ie&&(re.lineHeight=ie==="normal"?1:ie)}},getGradientDefs:function(X){var re=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],le=ae(X,re),fe,ke=0,q={};for(ke=le.length;ke--;)fe=le[ke],fe.getAttribute("xlink:href")&&Z(X,fe),q[fe.getAttribute("id")]=fe;return q},parseAttributes:function(X,re,le){if(X){var fe,ke={},q,ie;typeof le>"u"&&(le=X.getAttribute("svgUid")),X.parentNode&&h.svgValidParentsRegEx.test(X.parentNode.nodeName)&&(ke=h.parseAttributes(X.parentNode,re,le));var we=re.reduce(function(Ie,Pe){return fe=X.getAttribute(Pe),fe&&(Ie[Pe]=fe),Ie},{}),Me=g(G(X,le),h.parseStyleAttribute(X));we=g(we,Me),Me[R]&&X.setAttribute(R,Me[R]),q=ie=ke.fontSize||h.Text.DEFAULT_SVG_FONT_SIZE,we[L]&&(we[L]=q=v(we[L],ie));var xe,ge,ye={};for(var se in we)xe=j(se),ge=z(xe,we[se],ke,q),ye[xe]=ge;ye&&ye.font&&h.parseFontDeclaration(ye.font,ye);var me=g(ke,ye);return h.svgValidParentsRegEx.test(X.nodeName)?me:Y(me)}},parseElements:function(X,re,le,fe,ke){new h.ElementsParser(X,re,le,fe,ke).parse()},parseStyleAttribute:function(X){var re={},le=X.getAttribute("style");return le&&(typeof le=="string"?K(le,re):te(le,re)),re},parsePointsAttribute:function(X){if(!X)return null;X=X.replace(/,/g," ").trim(),X=X.split(/\s+/);var re=[],le,fe;for(le=0,fe=X.length;le<fe;le+=2)re.push({x:parseFloat(X[le]),y:parseFloat(X[le+1])});return re},getCSSRules:function(X){var re=X.getElementsByTagName("style"),le,fe,ke={},q;for(le=0,fe=re.length;le<fe;le++){var ie=re[le].textContent;ie=ie.replace(/\/\*[\s\S]*?\*\//g,""),ie.trim()!==""&&(q=ie.match(/[^{]*\{[\s\S]*?\}/g),q=q.map(function(we){return we.trim()}),q.forEach(function(we){var Me=we.match(/([\s\S]*?)\s*\{([^}]*)\}/),xe={},ge=Me[2].trim(),ye=ge.replace(/;$/,"").split(/\s*;\s*/);for(le=0,fe=ye.length;le<fe;le++){var se=ye[le].split(/\s*:\s*/),me=se[0],Ie=se[1];xe[me]=Ie}we=Me[1],we.split(",").forEach(function(Pe){Pe=Pe.replace(/^svg/i,"").trim(),Pe!==""&&(ke[Pe]?h.util.object.extend(ke[Pe],xe):ke[Pe]=h.util.object.clone(xe))})}))}return ke},loadSVGFromURL:function(X,re,le,fe){X=X.replace(/^\n\s*/,"").trim(),new h.util.request(X,{method:"get",onComplete:ke});function ke(q){var ie=q.responseXML;if(!ie||!ie.documentElement)return re&&re(null),!1;h.parseSVGDocument(ie.documentElement,function(we,Me,xe,ge){re&&re(we,Me,xe,ge)},le,fe)}},loadSVGFromString:function(X,re,le,fe){var ke=new h.window.DOMParser,q=ke.parseFromString(X.trim(),"text/xml");h.parseSVGDocument(q.documentElement,function(ie,we,Me,xe){re(ie,we,Me,xe)},le,fe)}})}(c),d.ElementsParser=function(m,h,g,w,p,v){this.elements=m,this.callback=h,this.options=g,this.reviver=w,this.svgUid=g&&g.svgUid||0,this.parsingOptions=p,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=v},function(m){m.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},m.createObjects=function(){var h=this;this.elements.forEach(function(g,w){g.setAttribute("svgUid",h.svgUid),h.createObject(g,w)})},m.findTag=function(h){return d[d.util.string.capitalize(h.tagName.replace("svg:",""))]},m.createObject=function(h,g){var w=this.findTag(h);if(w&&w.fromElement)try{w.fromElement(h,this.createCallback(g,h),this.options)}catch(p){d.log(p)}else this.checkIfDone()},m.createCallback=function(h,g){var w=this;return function(p){var v;w.resolveGradient(p,g,"fill"),w.resolveGradient(p,g,"stroke"),p instanceof d.Image&&p._originalElement&&(v=p.parsePreserveAspectRatioAttribute(g)),p._removeTransformMatrix(v),w.resolveClipPath(p,g),w.reviver&&w.reviver(g,p),w.instances[h]=p,w.checkIfDone()}},m.extractPropertyDefinition=function(h,g,w){var p=h[g],v=this.regexUrl;if(v.test(p)){v.lastIndex=0;var y=v.exec(p)[1];return v.lastIndex=0,d[w][this.svgUid][y]}},m.resolveGradient=function(h,g,w){var p=this.extractPropertyDefinition(h,w,"gradientDefs");if(p){var v=g.getAttribute(w+"-opacity"),y=d.Gradient.fromElement(p,h,v,this.options);h.set(w,y)}},m.createClipPathCallback=function(h,g){return function(w){w._removeTransformMatrix(),w.fillRule=w.clipRule,g.push(w)}},m.resolveClipPath=function(h,g){var w=this.extractPropertyDefinition(h,"clipPath","clipPaths"),p,v,y,S,T,C;if(w){S=[],y=d.util.invertTransform(h.calcTransformMatrix());for(var M=w[0].parentNode,A=g;A.parentNode&&A.getAttribute("clip-path")!==h.clipPath;)A=A.parentNode;A.parentNode.appendChild(M);for(var P=0;P<w.length;P++)p=w[P],v=this.findTag(p),v.fromElement(p,this.createClipPathCallback(h,S),this.options);S.length===1?w=S[0]:w=new d.Group(S),T=d.util.multiplyTransformMatrices(y,w.calcTransformMatrix()),w.clipPath&&this.resolveClipPath(w,A);var C=d.util.qrDecompose(T);w.flipX=!1,w.flipY=!1,w.set("scaleX",C.scaleX),w.set("scaleY",C.scaleY),w.angle=C.angle,w.skewX=C.skewX,w.skewY=0,w.setPositionByOrigin({x:C.translateX,y:C.translateY},"center","center"),h.clipPath=w}else delete h.clipPath},m.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))}}(d.ElementsParser.prototype),function(m){var h=m.fabric||(m.fabric={});if(h.Point){h.warn("fabric.Point is already defined");return}h.Point=g;function g(w,p){this.x=w,this.y=p}g.prototype={type:"point",constructor:g,add:function(w){return new g(this.x+w.x,this.y+w.y)},addEquals:function(w){return this.x+=w.x,this.y+=w.y,this},scalarAdd:function(w){return new g(this.x+w,this.y+w)},scalarAddEquals:function(w){return this.x+=w,this.y+=w,this},subtract:function(w){return new g(this.x-w.x,this.y-w.y)},subtractEquals:function(w){return this.x-=w.x,this.y-=w.y,this},scalarSubtract:function(w){return new g(this.x-w,this.y-w)},scalarSubtractEquals:function(w){return this.x-=w,this.y-=w,this},multiply:function(w){return new g(this.x*w,this.y*w)},multiplyEquals:function(w){return this.x*=w,this.y*=w,this},divide:function(w){return new g(this.x/w,this.y/w)},divideEquals:function(w){return this.x/=w,this.y/=w,this},eq:function(w){return this.x===w.x&&this.y===w.y},lt:function(w){return this.x<w.x&&this.y<w.y},lte:function(w){return this.x<=w.x&&this.y<=w.y},gt:function(w){return this.x>w.x&&this.y>w.y},gte:function(w){return this.x>=w.x&&this.y>=w.y},lerp:function(w,p){return typeof p>"u"&&(p=.5),p=Math.max(Math.min(1,p),0),new g(this.x+(w.x-this.x)*p,this.y+(w.y-this.y)*p)},distanceFrom:function(w){var p=this.x-w.x,v=this.y-w.y;return Math.sqrt(p*p+v*v)},midPointFrom:function(w){return this.lerp(w)},min:function(w){return new g(Math.min(this.x,w.x),Math.min(this.y,w.y))},max:function(w){return new g(Math.max(this.x,w.x),Math.max(this.y,w.y))},toString:function(){return this.x+","+this.y},setXY:function(w,p){return this.x=w,this.y=p,this},setX:function(w){return this.x=w,this},setY:function(w){return this.y=w,this},setFromPoint:function(w){return this.x=w.x,this.y=w.y,this},swap:function(w){var p=this.x,v=this.y;this.x=w.x,this.y=w.y,w.x=p,w.y=v},clone:function(){return new g(this.x,this.y)}}}(c),function(m){var h=m.fabric||(m.fabric={});if(h.Intersection){h.warn("fabric.Intersection is already defined");return}function g(w){this.status=w,this.points=[]}h.Intersection=g,h.Intersection.prototype={constructor:g,appendPoint:function(w){return this.points.push(w),this},appendPoints:function(w){return this.points=this.points.concat(w),this}},h.Intersection.intersectLineLine=function(w,p,v,y){var S,T=(y.x-v.x)*(w.y-v.y)-(y.y-v.y)*(w.x-v.x),C=(p.x-w.x)*(w.y-v.y)-(p.y-w.y)*(w.x-v.x),M=(y.y-v.y)*(p.x-w.x)-(y.x-v.x)*(p.y-w.y);if(M!==0){var A=T/M,P=C/M;0<=A&&A<=1&&0<=P&&P<=1?(S=new g("Intersection"),S.appendPoint(new h.Point(w.x+A*(p.x-w.x),w.y+A*(p.y-w.y)))):S=new g}else T===0||C===0?S=new g("Coincident"):S=new g("Parallel");return S},h.Intersection.intersectLinePolygon=function(w,p,v){var y=new g,S=v.length,T,C,M,A;for(A=0;A<S;A++)T=v[A],C=v[(A+1)%S],M=g.intersectLineLine(w,p,T,C),y.appendPoints(M.points);return y.points.length>0&&(y.status="Intersection"),y},h.Intersection.intersectPolygonPolygon=function(w,p){var v=new g,y=w.length,S;for(S=0;S<y;S++){var T=w[S],C=w[(S+1)%y],M=g.intersectLinePolygon(T,C,p);v.appendPoints(M.points)}return v.points.length>0&&(v.status="Intersection"),v},h.Intersection.intersectPolygonRectangle=function(w,p,v){var y=p.min(v),S=p.max(v),T=new h.Point(S.x,y.y),C=new h.Point(y.x,S.y),M=g.intersectLinePolygon(y,T,w),A=g.intersectLinePolygon(T,S,w),P=g.intersectLinePolygon(S,C,w),L=g.intersectLinePolygon(C,y,w),R=new g;return R.appendPoints(M.points),R.appendPoints(A.points),R.appendPoints(P.points),R.appendPoints(L.points),R.points.length>0&&(R.status="Intersection"),R}}(c),function(m){var h=m.fabric||(m.fabric={});if(h.Color){h.warn("fabric.Color is already defined.");return}function g(p){p?this._tryParsingColor(p):this.setSource([0,0,0,1])}h.Color=g,h.Color.prototype={_tryParsingColor:function(p){var v;p in g.colorNameMap&&(p=g.colorNameMap[p]),p==="transparent"&&(v=[255,255,255,0]),v||(v=g.sourceFromHex(p)),v||(v=g.sourceFromRgb(p)),v||(v=g.sourceFromHsl(p)),v||(v=[0,0,0,1]),v&&this.setSource(v)},_rgbToHsl:function(p,v,y){p/=255,v/=255,y/=255;var S,T,C,M=h.util.array.max([p,v,y]),A=h.util.array.min([p,v,y]);if(C=(M+A)/2,M===A)S=T=0;else{var P=M-A;switch(T=C>.5?P/(2-M-A):P/(M+A),M){case p:S=(v-y)/P+(v<y?6:0);break;case v:S=(y-p)/P+2;break;case y:S=(p-v)/P+4;break}S/=6}return[Math.round(S*360),Math.round(T*100),Math.round(C*100)]},getSource:function(){return this._source},setSource:function(p){this._source=p},toRgb:function(){var p=this.getSource();return"rgb("+p[0]+","+p[1]+","+p[2]+")"},toRgba:function(){var p=this.getSource();return"rgba("+p[0]+","+p[1]+","+p[2]+","+p[3]+")"},toHsl:function(){var p=this.getSource(),v=this._rgbToHsl(p[0],p[1],p[2]);return"hsl("+v[0]+","+v[1]+"%,"+v[2]+"%)"},toHsla:function(){var p=this.getSource(),v=this._rgbToHsl(p[0],p[1],p[2]);return"hsla("+v[0]+","+v[1]+"%,"+v[2]+"%,"+p[3]+")"},toHex:function(){var p=this.getSource(),v,y,S;return v=p[0].toString(16),v=v.length===1?"0"+v:v,y=p[1].toString(16),y=y.length===1?"0"+y:y,S=p[2].toString(16),S=S.length===1?"0"+S:S,v.toUpperCase()+y.toUpperCase()+S.toUpperCase()},toHexa:function(){var p=this.getSource(),v;return v=Math.round(p[3]*255),v=v.toString(16),v=v.length===1?"0"+v:v,this.toHex()+v.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(p){var v=this.getSource();return v[3]=p,this.setSource(v),this},toGrayscale:function(){var p=this.getSource(),v=parseInt((p[0]*.3+p[1]*.59+p[2]*.11).toFixed(0),10),y=p[3];return this.setSource([v,v,v,y]),this},toBlackWhite:function(p){var v=this.getSource(),y=(v[0]*.3+v[1]*.59+v[2]*.11).toFixed(0),S=v[3];return p=p||127,y=Number(y)<Number(p)?0:255,this.setSource([y,y,y,S]),this},overlayWith:function(p){p instanceof g||(p=new g(p));var v=[],y=this.getAlpha(),S=.5,T=this.getSource(),C=p.getSource(),M;for(M=0;M<3;M++)v.push(Math.round(T[M]*(1-S)+C[M]*S));return v[3]=y,this.setSource(v),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function w(p,v,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?p+(v-p)*6*y:y<.5?v:y<.6666666666666666?p+(v-p)*(.6666666666666666-y)*6:p}h.Color.fromRgb=function(p){return g.fromSource(g.sourceFromRgb(p))},h.Color.sourceFromRgb=function(p){var v=p.match(g.reRGBa);if(v){var y=parseInt(v[1],10)/(/%$/.test(v[1])?100:1)*(/%$/.test(v[1])?255:1),S=parseInt(v[2],10)/(/%$/.test(v[2])?100:1)*(/%$/.test(v[2])?255:1),T=parseInt(v[3],10)/(/%$/.test(v[3])?100:1)*(/%$/.test(v[3])?255:1);return[parseInt(y,10),parseInt(S,10),parseInt(T,10),v[4]?parseFloat(v[4]):1]}},h.Color.fromRgba=g.fromRgb,h.Color.fromHsl=function(p){return g.fromSource(g.sourceFromHsl(p))},h.Color.sourceFromHsl=function(p){var v=p.match(g.reHSLa);if(v){var y=(parseFloat(v[1])%360+360)%360/360,S=parseFloat(v[2])/(/%$/.test(v[2])?100:1),T=parseFloat(v[3])/(/%$/.test(v[3])?100:1),C,M,A;if(S===0)C=M=A=T;else{var P=T<=.5?T*(S+1):T+S-T*S,L=T*2-P;C=w(L,P,y+.3333333333333333),M=w(L,P,y),A=w(L,P,y-.3333333333333333)}return[Math.round(C*255),Math.round(M*255),Math.round(A*255),v[4]?parseFloat(v[4]):1]}},h.Color.fromHsla=g.fromHsl,h.Color.fromHex=function(p){return g.fromSource(g.sourceFromHex(p))},h.Color.sourceFromHex=function(p){if(p.match(g.reHex)){var v=p.slice(p.indexOf("#")+1),y=v.length===3||v.length===4,S=v.length===8||v.length===4,T=y?v.charAt(0)+v.charAt(0):v.substring(0,2),C=y?v.charAt(1)+v.charAt(1):v.substring(2,4),M=y?v.charAt(2)+v.charAt(2):v.substring(4,6),A=S?y?v.charAt(3)+v.charAt(3):v.substring(6,8):"FF";return[parseInt(T,16),parseInt(C,16),parseInt(M,16),parseFloat((parseInt(A,16)/255).toFixed(2))]}},h.Color.fromSource=function(p){var v=new g;return v.setSource(p),v}}(c),function(m){var h=m.fabric||(m.fabric={}),g=["e","se","s","sw","w","nw","n","ne","e"],w=["ns","nesw","ew","nwse"],p={},v="left",y="top",S="right",T="bottom",C="center",M={top:T,bottom:y,left:S,right:v,center:C},A=h.util.radiansToDegrees,P=Math.sign||function(xe){return(xe>0)-(xe<0)||+xe};function L(xe,ge){var ye=xe.angle+A(Math.atan2(ge.y,ge.x))+360;return Math.round(ye%360/45)}function R(xe,ge){var ye=ge.transform.target,se=ye.canvas,me=h.util.object.clone(ge);me.target=ye,se&&se.fire("object:"+xe,me),ye.fire(xe,ge)}function j(xe,ge){var ye=ge.canvas,se=ye.uniScaleKey,me=xe[se];return ye.uniformScaling&&!me||!ye.uniformScaling&&me}function z(xe){return xe.originX===C&&xe.originY===C}function $(xe,ge,ye){var se=xe.lockScalingX,me=xe.lockScalingY;return!!(se&&me||!ge&&(se||me)&&ye||se&&ge==="x"||me&&ge==="y")}function Y(xe,ge,ye){var se="not-allowed",me=j(xe,ye),Ie="";if(ge.x!==0&&ge.y===0?Ie="x":ge.x===0&&ge.y!==0&&(Ie="y"),$(ye,Ie,me))return se;var Pe=L(ye,ge);return g[Pe]+"-resize"}function ae(xe,ge,ye){var se="not-allowed";if(ge.x!==0&&ye.lockSkewingY||ge.y!==0&&ye.lockSkewingX)return se;var me=L(ye,ge)%4;return w[me]+"-resize"}function K(xe,ge,ye){return xe[ye.canvas.altActionKey]?p.skewCursorStyleHandler(xe,ge,ye):p.scaleCursorStyleHandler(xe,ge,ye)}function te(xe,ge,ye){var se=xe[ye.canvas.altActionKey];if(ge.x===0)return se?"skewX":"scaleY";if(ge.y===0)return se?"skewY":"scaleX"}function G(xe,ge,ye){return ye.lockRotation?"not-allowed":ge.cursorStyle}function ue(xe,ge,ye,se){return{e:xe,transform:ge,pointer:{x:ye,y:se}}}function J(xe){return function(ge,ye,se,me){var Ie=ye.target,Pe=Ie.getCenterPoint(),Se=Ie.translateToOriginPoint(Pe,ye.originX,ye.originY),Ce=xe(ge,ye,se,me);return Ie.setPositionByOrigin(Se,ye.originX,ye.originY),Ce}}function be(xe,ge){return function(ye,se,me,Ie){var Pe=ge(ye,se,me,Ie);return Pe&&R(xe,ue(ye,se,me,Ie)),Pe}}function de(xe,ge,ye,se,me){var Ie=xe.target,Pe=Ie.controls[xe.corner],Se=Ie.canvas.getZoom(),Ce=Ie.padding/Se,pe=Ie.toLocalPoint(new h.Point(se,me),ge,ye);return pe.x>=Ce&&(pe.x-=Ce),pe.x<=-Ce&&(pe.x+=Ce),pe.y>=Ce&&(pe.y-=Ce),pe.y<=Ce&&(pe.y+=Ce),pe.x-=Pe.offsetX,pe.y-=Pe.offsetY,pe}function ce(xe){return xe.flipX!==xe.flipY}function V(xe,ge,ye,se,me){if(xe[ge]!==0){var Ie=xe._getTransformedDimensions()[se],Pe=me/Ie*xe[ye];xe.set(ye,Pe)}}function ne(xe,ge,ye,se){var me=ge.target,Ie=me._getTransformedDimensions(0,me.skewY),Pe=de(ge,ge.originX,ge.originY,ye,se),Se=Math.abs(Pe.x*2)-Ie.x,Ce=me.skewX,pe;Se<2?pe=0:(pe=A(Math.atan2(Se/me.scaleX,Ie.y/me.scaleY)),ge.originX===v&&ge.originY===T&&(pe=-pe),ge.originX===S&&ge.originY===y&&(pe=-pe),ce(me)&&(pe=-pe));var _e=Ce!==pe;if(_e){var Be=me._getTransformedDimensions().y;me.set("skewX",pe),V(me,"skewY","scaleY","y",Be)}return _e}function Q(xe,ge,ye,se){var me=ge.target,Ie=me._getTransformedDimensions(me.skewX,0),Pe=de(ge,ge.originX,ge.originY,ye,se),Se=Math.abs(Pe.y*2)-Ie.y,Ce=me.skewY,pe;Se<2?pe=0:(pe=A(Math.atan2(Se/me.scaleY,Ie.x/me.scaleX)),ge.originX===v&&ge.originY===T&&(pe=-pe),ge.originX===S&&ge.originY===y&&(pe=-pe),ce(me)&&(pe=-pe));var _e=Ce!==pe;if(_e){var Be=me._getTransformedDimensions().x;me.set("skewY",pe),V(me,"skewX","scaleX","x",Be)}return _e}function Z(xe,ge,ye,se){var me=ge.target,Ie=me.skewX,Pe,Se=ge.originY;if(me.lockSkewingX)return!1;if(Ie===0){var Ce=de(ge,C,C,ye,se);Ce.x>0?Pe=v:Pe=S}else Ie>0&&(Pe=Se===y?v:S),Ie<0&&(Pe=Se===y?S:v),ce(me)&&(Pe=Pe===v?S:v);ge.originX=Pe;var pe=be("skewing",J(ne));return pe(xe,ge,ye,se)}function he(xe,ge,ye,se){var me=ge.target,Ie=me.skewY,Pe,Se=ge.originX;if(me.lockSkewingY)return!1;if(Ie===0){var Ce=de(ge,C,C,ye,se);Ce.y>0?Pe=y:Pe=T}else Ie>0&&(Pe=Se===v?y:T),Ie<0&&(Pe=Se===v?T:y),ce(me)&&(Pe=Pe===y?T:y);ge.originY=Pe;var pe=be("skewing",J(Q));return pe(xe,ge,ye,se)}function X(xe,ge,ye,se){var me=ge,Ie=me.target,Pe=Ie.translateToOriginPoint(Ie.getCenterPoint(),me.originX,me.originY);if(Ie.lockRotation)return!1;var Se=Math.atan2(me.ey-Pe.y,me.ex-Pe.x),Ce=Math.atan2(se-Pe.y,ye-Pe.x),pe=A(Ce-Se+me.theta),_e=!0;if(Ie.snapAngle>0){var Be=Ie.snapAngle,Ke=Ie.snapThreshold||Be,ht=Math.ceil(pe/Be)*Be,vt=Math.floor(pe/Be)*Be;Math.abs(pe-vt)<Ke?pe=vt:Math.abs(pe-ht)<Ke&&(pe=ht)}return pe<0&&(pe=360+pe),pe%=360,_e=Ie.angle!==pe,Ie.angle=pe,_e}function re(xe,ge,ye,se,me){me=me||{};var Ie=ge.target,Pe=Ie.lockScalingX,Se=Ie.lockScalingY,Ce=me.by,pe,_e,Be,Ke,ht=j(xe,Ie),vt=$(Ie,Ce,ht),At,nt,qe=ge.gestureScale;if(vt)return!1;if(qe)_e=ge.scaleX*qe,Be=ge.scaleY*qe;else{if(pe=de(ge,ge.originX,ge.originY,ye,se),At=Ce!=="y"?P(pe.x):1,nt=Ce!=="x"?P(pe.y):1,ge.signX||(ge.signX=At),ge.signY||(ge.signY=nt),Ie.lockScalingFlip&&(ge.signX!==At||ge.signY!==nt))return!1;if(Ke=Ie._getTransformedDimensions(),ht&&!Ce){var ut=Math.abs(pe.x)+Math.abs(pe.y),Mt=ge.original,Ne=Math.abs(Ke.x*Mt.scaleX/Ie.scaleX)+Math.abs(Ke.y*Mt.scaleY/Ie.scaleY),Le=ut/Ne;_e=Mt.scaleX*Le,Be=Mt.scaleY*Le}else _e=Math.abs(pe.x*Ie.scaleX/Ke.x),Be=Math.abs(pe.y*Ie.scaleY/Ke.y);z(ge)&&(_e*=2,Be*=2),ge.signX!==At&&Ce!=="y"&&(ge.originX=M[ge.originX],_e*=-1,ge.signX=At),ge.signY!==nt&&Ce!=="x"&&(ge.originY=M[ge.originY],Be*=-1,ge.signY=nt)}var Je=Ie.scaleX,it=Ie.scaleY;return Ce?(Ce==="x"&&Ie.set("scaleX",_e),Ce==="y"&&Ie.set("scaleY",Be)):(!Pe&&Ie.set("scaleX",_e),!Se&&Ie.set("scaleY",Be)),Je!==Ie.scaleX||it!==Ie.scaleY}function le(xe,ge,ye,se){return re(xe,ge,ye,se)}function fe(xe,ge,ye,se){return re(xe,ge,ye,se,{by:"x"})}function ke(xe,ge,ye,se){return re(xe,ge,ye,se,{by:"y"})}function q(xe,ge,ye,se){return xe[ge.target.canvas.altActionKey]?p.skewHandlerX(xe,ge,ye,se):p.scalingY(xe,ge,ye,se)}function ie(xe,ge,ye,se){return xe[ge.target.canvas.altActionKey]?p.skewHandlerY(xe,ge,ye,se):p.scalingX(xe,ge,ye,se)}function we(xe,ge,ye,se){var me=ge.target,Ie=de(ge,ge.originX,ge.originY,ye,se),Pe=me.strokeWidth/(me.strokeUniform?me.scaleX:1),Se=z(ge)?2:1,Ce=me.width,pe=Math.abs(Ie.x*Se/me.scaleX)-Pe;return me.set("width",Math.max(pe,0)),Ce!==pe}function Me(xe,ge,ye,se){var me=ge.target,Ie=ye-ge.offsetX,Pe=se-ge.offsetY,Se=!me.get("lockMovementX")&&me.left!==Ie,Ce=!me.get("lockMovementY")&&me.top!==Pe;return Se&&me.set("left",Ie),Ce&&me.set("top",Pe),(Se||Ce)&&R("moving",ue(xe,ge,ye,se)),Se||Ce}p.scaleCursorStyleHandler=Y,p.skewCursorStyleHandler=ae,p.scaleSkewCursorStyleHandler=K,p.rotationWithSnapping=be("rotating",J(X)),p.scalingEqually=be("scaling",J(le)),p.scalingX=be("scaling",J(fe)),p.scalingY=be("scaling",J(ke)),p.scalingYOrSkewingX=q,p.scalingXOrSkewingY=ie,p.changeWidth=be("resizing",J(we)),p.skewHandlerX=Z,p.skewHandlerY=he,p.dragHandler=Me,p.scaleOrSkewActionName=te,p.rotationStyleHandler=G,p.fireEvent=R,p.wrapWithFixedAnchor=J,p.wrapWithFireEvent=be,p.getLocalPoint=de,h.controlsUtils=p}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.degreesToRadians,w=h.controlsUtils;function p(y,S,T,C,M){C=C||{};var A=this.sizeX||C.cornerSize||M.cornerSize,P=this.sizeY||C.cornerSize||M.cornerSize,L=typeof C.transparentCorners<"u"?C.transparentCorners:M.transparentCorners,R=L?"stroke":"fill",j=!L&&(C.cornerStrokeColor||M.cornerStrokeColor),z=S,$=T,Y;y.save(),y.fillStyle=C.cornerColor||M.cornerColor,y.strokeStyle=C.cornerStrokeColor||M.cornerStrokeColor,A>P?(Y=A,y.scale(1,P/A),$=T*A/P):P>A?(Y=P,y.scale(A/P,1),z=S*P/A):Y=A,y.lineWidth=1,y.beginPath(),y.arc(z,$,Y/2,0,2*Math.PI,!1),y[R](),j&&y.stroke(),y.restore()}function v(y,S,T,C,M){C=C||{};var A=this.sizeX||C.cornerSize||M.cornerSize,P=this.sizeY||C.cornerSize||M.cornerSize,L=typeof C.transparentCorners<"u"?C.transparentCorners:M.transparentCorners,R=L?"stroke":"fill",j=!L&&(C.cornerStrokeColor||M.cornerStrokeColor),z=A/2,$=P/2;y.save(),y.fillStyle=C.cornerColor||M.cornerColor,y.strokeStyle=C.cornerStrokeColor||M.cornerStrokeColor,y.lineWidth=1,y.translate(S,T),y.rotate(g(M.angle)),y[R+"Rect"](-z,-$,A,P),j&&y.strokeRect(-z,-$,A,P),y.restore()}w.renderCircleControl=p,w.renderSquareControl=v}(c),function(m){var h=m.fabric||(m.fabric={});function g(w){for(var p in w)this[p]=w[p]}h.Control=g,h.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(w,p){return p.cursorStyle},getActionName:function(w,p){return p.actionName},getVisibility:function(w,p){var v=w._controlsVisibility;return v&&typeof v[p]<"u"?v[p]:this.visible},setVisibility:function(w){this.visible=w},positionHandler:function(w,p){var v=h.util.transformPoint({x:this.x*w.x+this.offsetX,y:this.y*w.y+this.offsetY},p);return v},calcCornerCoords:function(w,p,v,y,S){var T,C,M,A,P=S?this.touchSizeX:this.sizeX,L=S?this.touchSizeY:this.sizeY;if(P&&L&&P!==L){var R=Math.atan2(L,P),j=Math.sqrt(P*P+L*L)/2,z=R-h.util.degreesToRadians(w),$=Math.PI/2-R-h.util.degreesToRadians(w);T=j*h.util.cos(z),C=j*h.util.sin(z),M=j*h.util.cos($),A=j*h.util.sin($)}else{var Y=P&&L?P:p;j=Y*.7071067812;var z=h.util.degreesToRadians(45-w);T=M=j*h.util.cos(z),C=A=j*h.util.sin(z)}return{tl:{x:v-A,y:y-M},tr:{x:v+T,y:y-C},bl:{x:v-T,y:y+C},br:{x:v+A,y:y+M}}},render:function(w,p,v,y,S){switch(y=y||{},y.cornerStyle||S.cornerStyle){case"circle":h.controlsUtils.renderCircleControl.call(this,w,p,v,y,S);break;default:h.controlsUtils.renderSquareControl.call(this,w,p,v,y,S)}}}}(c),function(){function m(v,y){var S=v.getAttribute("style"),T=v.getAttribute("offset")||0,C,M,A,P;if(T=parseFloat(T)/(/%$/.test(T)?100:1),T=T<0?0:T>1?1:T,S){var L=S.split(/\s*;\s*/);for(L[L.length-1]===""&&L.pop(),P=L.length;P--;){var R=L[P].split(/\s*:\s*/),j=R[0].trim(),z=R[1].trim();j==="stop-color"?C=z:j==="stop-opacity"&&(A=z)}}return C||(C=v.getAttribute("stop-color")||"rgb(0,0,0)"),A||(A=v.getAttribute("stop-opacity")),C=new d.Color(C),M=C.getAlpha(),A=isNaN(parseFloat(A))?1:parseFloat(A),A*=M*y,{offset:T,color:C.toRgb(),opacity:A}}function h(v){return{x1:v.getAttribute("x1")||0,y1:v.getAttribute("y1")||0,x2:v.getAttribute("x2")||"100%",y2:v.getAttribute("y2")||0}}function g(v){return{x1:v.getAttribute("fx")||v.getAttribute("cx")||"50%",y1:v.getAttribute("fy")||v.getAttribute("cy")||"50%",r1:0,x2:v.getAttribute("cx")||"50%",y2:v.getAttribute("cy")||"50%",r2:v.getAttribute("r")||"50%"}}var w=d.util.object.clone;d.Gradient=d.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(v){v||(v={}),v.coords||(v.coords={});var y,S=this;Object.keys(v).forEach(function(T){S[T]=v[T]}),this.id?this.id+="_"+d.Object.__uid++:this.id=d.Object.__uid++,y={x1:v.coords.x1||0,y1:v.coords.y1||0,x2:v.coords.x2||0,y2:v.coords.y2||0},this.type==="radial"&&(y.r1=v.coords.r1||0,y.r2=v.coords.r2||0),this.coords=y,this.colorStops=v.colorStops.slice()},addColorStop:function(v){for(var y in v){var S=new d.Color(v[y]);this.colorStops.push({offset:parseFloat(y),color:S.toRgb(),opacity:S.getAlpha()})}return this},toObject:function(v){var y={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return d.util.populateWithProperties(this,y,v),y},toSVG:function(v,M){var S=w(this.coords,!0),T,C,M=M||{},A,P,L=w(this.colorStops,!0),R=S.r1>S.r2,j=this.gradientTransform?this.gradientTransform.concat():d.iMatrix.concat(),z=-this.offsetX,$=-this.offsetY,Y=!!M.additionalTransform,ae=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(L.sort(function(J,be){return J.offset-be.offset}),ae==="objectBoundingBox"?(z/=v.width,$/=v.height):(z+=v.width/2,$+=v.height/2),v.type==="path"&&this.gradientUnits!=="percentage"&&(z-=v.pathOffset.x,$-=v.pathOffset.y),j[4]-=z,j[5]-=$,P='id="SVGID_'+this.id+'" gradientUnits="'+ae+'"',P+=' gradientTransform="'+(Y?M.additionalTransform+" ":"")+d.util.matrixToSVG(j)+'" ',this.type==="linear"?A=["<linearGradient ",P,' x1="',S.x1,'" y1="',S.y1,'" x2="',S.x2,'" y2="',S.y2,`">
`]:this.type==="radial"&&(A=["<radialGradient ",P,' cx="',R?S.x1:S.x2,'" cy="',R?S.y1:S.y2,'" r="',R?S.r1:S.r2,'" fx="',R?S.x2:S.x1,'" fy="',R?S.y2:S.y1,`">
`]),this.type==="radial"){if(R)for(L=L.concat(),L.reverse(),T=0,C=L.length;T<C;T++)L[T].offset=1-L[T].offset;var K=Math.min(S.r1,S.r2);if(K>0){var te=Math.max(S.r1,S.r2),G=K/te;for(T=0,C=L.length;T<C;T++)L[T].offset+=G*(1-L[T].offset)}}for(T=0,C=L.length;T<C;T++){var ue=L[T];A.push("<stop ",'offset="',ue.offset*100+"%",'" style="stop-color:',ue.color,typeof ue.opacity<"u"?";stop-opacity: "+ue.opacity:";",`"/>
`)}return A.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),A.join("")},toLive:function(v){var y,S=d.util.object.clone(this.coords),T,C;if(this.type){for(this.type==="linear"?y=v.createLinearGradient(S.x1,S.y1,S.x2,S.y2):this.type==="radial"&&(y=v.createRadialGradient(S.x1,S.y1,S.r1,S.x2,S.y2,S.r2)),T=0,C=this.colorStops.length;T<C;T++){var M=this.colorStops[T].color,A=this.colorStops[T].opacity,P=this.colorStops[T].offset;typeof A<"u"&&(M=new d.Color(M).setAlpha(A).toRgba()),y.addColorStop(P,M)}return y}}}),d.util.object.extend(d.Gradient,{fromElement:function(v,y,S,T){var C=parseFloat(S)/(/%$/.test(S)?100:1);C=C<0?0:C>1?1:C,isNaN(C)&&(C=1);var M=v.getElementsByTagName("stop"),A,P=v.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",L=v.getAttribute("gradientTransform")||"",R=[],j,z,$=0,Y=0,ae;for(v.nodeName==="linearGradient"||v.nodeName==="LINEARGRADIENT"?(A="linear",j=h(v)):(A="radial",j=g(v)),z=M.length;z--;)R.push(m(M[z],C));ae=d.parseTransformAttribute(L),p(y,j,T,P),P==="pixels"&&($=-y.left,Y=-y.top);var K=new d.Gradient({id:v.getAttribute("id"),type:A,coords:j,colorStops:R,gradientUnits:P,gradientTransform:ae,offsetX:$,offsetY:Y});return K}});function p(v,y,S,T){var C,M;Object.keys(y).forEach(function(A){C=y[A],C==="Infinity"?M=1:C==="-Infinity"?M=0:(M=parseFloat(y[A],10),typeof C=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(C)&&(M*=.01,T==="pixels"&&((A==="x1"||A==="x2"||A==="r2")&&(M*=S.viewBoxWidth||S.width),(A==="y1"||A==="y2")&&(M*=S.viewBoxHeight||S.height)))),y[A]=M})}}(),function(){var m=d.util.toFixed;d.Pattern=d.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,g){if(h||(h={}),this.id=d.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string"){g&&g(this);return}else{var w=this;this.source=d.util.createImage(),d.util.loadImage(h.source,function(p,v){w.source=p,g&&g(w,v)},null,this.crossOrigin)}},toObject:function(h){var g=d.Object.NUM_FRACTION_DIGITS,w,p;return typeof this.source.src=="string"?w=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(w=this.source.toDataURL()),p={type:"pattern",source:w,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:m(this.offsetX,g),offsetY:m(this.offsetY,g),patternTransform:this.patternTransform?this.patternTransform.concat():null},d.util.populateWithProperties(this,p,h),p},toSVG:function(h){var g=typeof this.source=="function"?this.source():this.source,w=g.width/h.width,p=g.height/h.height,v=this.offsetX/h.width,y=this.offsetY/h.height,S="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(p=1,y&&(p+=Math.abs(y))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(w=1,v&&(w+=Math.abs(v))),g.src?S=g.src:g.toDataURL&&(S=g.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+v+'" y="'+y+'" width="'+w+'" height="'+p+`">
<image x="0" y="0" width="`+g.width+'" height="'+g.height+'" xlink:href="'+S+`"></image>
</pattern>
`},setOptions:function(h){for(var g in h)this[g]=h[g]},toLive:function(h){var g=this.source;return!g||typeof g.src<"u"&&(!g.complete||g.naturalWidth===0||g.naturalHeight===0)?"":h.createPattern(g,this.repeat)}})}(),function(m){var h=m.fabric||(m.fabric={}),g=h.util.toFixed;if(h.Shadow){h.warn("fabric.Shadow is already defined.");return}h.Shadow=h.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(w){typeof w=="string"&&(w=this._parseShadow(w));for(var p in w)this[p]=w[p];this.id=h.Object.__uid++},_parseShadow:function(w){var p=w.trim(),v=h.Shadow.reOffsetsAndBlur.exec(p)||[],y=p.replace(h.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:y.trim(),offsetX:parseFloat(v[1],10)||0,offsetY:parseFloat(v[2],10)||0,blur:parseFloat(v[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(w){var p=40,v=40,y=h.Object.NUM_FRACTION_DIGITS,S=h.util.rotateVector({x:this.offsetX,y:this.offsetY},h.util.degreesToRadians(-w.angle)),T=20,C=new h.Color(this.color);return w.width&&w.height&&(p=g((Math.abs(S.x)+this.blur)/w.width,y)*100+T,v=g((Math.abs(S.y)+this.blur)/w.height,y)*100+T),w.flipX&&(S.x*=-1),w.flipY&&(S.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+v+'%" height="'+(100+2*v)+'%" x="-'+p+'%" width="'+(100+2*p)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+g(this.blur?this.blur/2:0,y)+`"></feGaussianBlur>
	<feOffset dx="`+g(S.x,y)+'" dy="'+g(S.y,y)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+C.toRgb()+'" flood-opacity="'+C.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var w={},p=h.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(v){this[v]!==p[v]&&(w[v]=this[v])},this),w}}),h.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(c),function(){if(d.StaticCanvas){d.warn("fabric.StaticCanvas is already defined.");return}var m=d.util.object.extend,h=d.util.getElementOffset,g=d.util.removeFromArray,w=d.util.toFixed,p=d.util.transformPoint,v=d.util.invertTransform,y=d.util.getNodeCanvas,S=d.util.createCanvasElement,T=new Error("Could not initialize `canvas` element");d.StaticCanvas=d.util.createClass(d.CommonMethods,{initialize:function(C,M){M||(M={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(C,M)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:d.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(C,M){var A=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(C),this._initOptions(M),this.interactive||this._initRetinaScaling(),M.overlayImage&&this.setOverlayImage(M.overlayImage,A),M.backgroundImage&&this.setBackgroundImage(M.backgroundImage,A),M.backgroundColor&&this.setBackgroundColor(M.backgroundColor,A),M.overlayColor&&this.setOverlayColor(M.overlayColor,A),this.calcOffset()},_isRetinaScaling:function(){return d.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?d.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var C=d.devicePixelRatio;this.__initRetinaScaling(C,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(C,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(C,M,A){M.setAttribute("width",this.width*C),M.setAttribute("height",this.height*C),A.scale(C,C)},calcOffset:function(){return this._offset=h(this.lowerCanvasEl),this},setOverlayImage:function(C,M,A){return this.__setBgOverlayImage("overlayImage",C,M,A)},setBackgroundImage:function(C,M,A){return this.__setBgOverlayImage("backgroundImage",C,M,A)},setOverlayColor:function(C,M){return this.__setBgOverlayColor("overlayColor",C,M)},setBackgroundColor:function(C,M){return this.__setBgOverlayColor("backgroundColor",C,M)},__setBgOverlayImage:function(C,M,A,P){return typeof M=="string"?d.util.loadImage(M,function(L,R){if(L){var j=new d.Image(L,P);this[C]=j,j.canvas=this}A&&A(L,R)},this,P&&P.crossOrigin):(P&&M.setOptions(P),this[C]=M,M&&(M.canvas=this),A&&A(M,!1)),this},__setBgOverlayColor:function(C,M,A){return this[C]=M,this._initGradient(M,C),this._initPattern(M,C,A),this},_createCanvasElement:function(){var C=S();if(!C||(C.style||(C.style={}),typeof C.getContext>"u"))throw T;return C},_initOptions:function(C){var M=this.lowerCanvasEl;this._setOptions(C),this.width=this.width||parseInt(M.width,10)||0,this.height=this.height||parseInt(M.height,10)||0,this.lowerCanvasEl.style&&(M.width=this.width,M.height=this.height,M.style.width=this.width+"px",M.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(C){C&&C.getContext?this.lowerCanvasEl=C:this.lowerCanvasEl=d.util.getById(C)||this._createCanvasElement(),d.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(C,M){return this.setDimensions({width:C},M)},setHeight:function(C,M){return this.setDimensions({height:C},M)},setDimensions:function(C,M){var A;M=M||{};for(var P in C)A=C[P],M.cssOnly||(this._setBackstoreDimension(P,C[P]),A+="px",this.hasLostContext=!0),M.backstoreOnly||this._setCssDimension(P,A);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),M.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(C,M){return this.lowerCanvasEl[C]=M,this.upperCanvasEl&&(this.upperCanvasEl[C]=M),this.cacheCanvasEl&&(this.cacheCanvasEl[C]=M),this[C]=M,this},_setCssDimension:function(C,M){return this.lowerCanvasEl.style[C]=M,this.upperCanvasEl&&(this.upperCanvasEl.style[C]=M),this.wrapperEl&&(this.wrapperEl.style[C]=M),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(C){var M=this._activeObject,A=this.backgroundImage,P=this.overlayImage,L,R,j;for(this.viewportTransform=C,R=0,j=this._objects.length;R<j;R++)L=this._objects[R],L.group||L.setCoords(!0);return M&&M.setCoords(),A&&A.setCoords(!0),P&&P.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(C,M){var A=C,P=this.viewportTransform.slice(0);C=p(C,v(this.viewportTransform)),P[0]=M,P[3]=M;var L=p(C,P);return P[4]+=A.x-L.x,P[5]+=A.y-L.y,this.setViewportTransform(P)},setZoom:function(C){return this.zoomToPoint(new d.Point(0,0),C),this},absolutePan:function(C){var M=this.viewportTransform.slice(0);return M[4]=-C.x,M[5]=-C.y,this.setViewportTransform(M)},relativePan:function(C){return this.absolutePan(new d.Point(-C.x-this.viewportTransform[4],-C.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(C){this.stateful&&C.setupState(),C._set("canvas",this),C.setCoords(),this.fire("object:added",{target:C}),C.fire("added")},_onObjectRemoved:function(C){this.fire("object:removed",{target:C}),C.fire("removed"),delete C.canvas},clearContext:function(C){return C.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var C=this.contextContainer;return this.renderCanvas(C,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=d.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var C={},M=this.width,A=this.height,P=v(this.viewportTransform);return C.tl=p({x:0,y:0},P),C.br=p({x:M,y:A},P),C.tr=new d.Point(C.br.x,C.tl.y),C.bl=new d.Point(C.tl.x,C.br.y),this.vptCoords=C,C},cancelRequestedRender:function(){this.isRendering&&(d.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(C,M){var A=this.viewportTransform,P=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(C),d.util.setImageSmoothing(C,this.imageSmoothingEnabled),this.fire("before:render",{ctx:C}),this._renderBackground(C),C.save(),C.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._renderObjects(C,M),C.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(C),P&&(P.canvas=this,P.shouldCache(),P._transformDone=!0,P.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(C)),this._renderOverlay(C),this.controlsAboveOverlay&&this.interactive&&this.drawControls(C),this.fire("after:render",{ctx:C})},drawClipPathOnCanvas:function(C){var M=this.viewportTransform,A=this.clipPath;C.save(),C.transform(M[0],M[1],M[2],M[3],M[4],M[5]),C.globalCompositeOperation="destination-in",A.transform(C),C.scale(1/A.zoomX,1/A.zoomY),C.drawImage(A._cacheCanvas,-A.cacheTranslationX,-A.cacheTranslationY),C.restore()},_renderObjects:function(C,M){var A,P;for(A=0,P=M.length;A<P;++A)M[A]&&M[A].render(C)},_renderBackgroundOrOverlay:function(C,M){var A=this[M+"Color"],P=this[M+"Image"],L=this.viewportTransform,R=this[M+"Vpt"];if(!(!A&&!P)){if(A){C.save(),C.beginPath(),C.moveTo(0,0),C.lineTo(this.width,0),C.lineTo(this.width,this.height),C.lineTo(0,this.height),C.closePath(),C.fillStyle=A.toLive?A.toLive(C,this):A,R&&C.transform(L[0],L[1],L[2],L[3],L[4],L[5]),C.transform(1,0,0,1,A.offsetX||0,A.offsetY||0);var j=A.gradientTransform||A.patternTransform;j&&C.transform(j[0],j[1],j[2],j[3],j[4],j[5]),C.fill(),C.restore()}P&&(C.save(),R&&C.transform(L[0],L[1],L[2],L[3],L[4],L[5]),P.render(C),C.restore())}},_renderBackground:function(C){this._renderBackgroundOrOverlay(C,"background")},_renderOverlay:function(C){this._renderBackgroundOrOverlay(C,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(C){return this._centerObject(C,new d.Point(this.getCenter().left,C.getCenterPoint().y))},centerObjectV:function(C){return this._centerObject(C,new d.Point(C.getCenterPoint().x,this.getCenter().top))},centerObject:function(C){var M=this.getCenter();return this._centerObject(C,new d.Point(M.left,M.top))},viewportCenterObject:function(C){var M=this.getVpCenter();return this._centerObject(C,M)},viewportCenterObjectH:function(C){var M=this.getVpCenter();return this._centerObject(C,new d.Point(M.x,C.getCenterPoint().y)),this},viewportCenterObjectV:function(C){var M=this.getVpCenter();return this._centerObject(C,new d.Point(C.getCenterPoint().x,M.y))},getVpCenter:function(){var C=this.getCenter(),M=v(this.viewportTransform);return p({x:C.left,y:C.top},M)},_centerObject:function(C,M){return C.setPositionByOrigin(M,"center","center"),C.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(C){return this.toDatalessObject(C)},toObject:function(C){return this._toObjectMethod("toObject",C)},toDatalessObject:function(C){return this._toObjectMethod("toDatalessObject",C)},_toObjectMethod:function(C,M){var A=this.clipPath,P={version:d.version,objects:this._toObjects(C,M)};return A&&!A.excludeFromExport&&(P.clipPath=this._toObject(this.clipPath,C,M)),m(P,this.__serializeBgOverlay(C,M)),d.util.populateWithProperties(this,P,M),P},_toObjects:function(C,M){return this._objects.filter(function(A){return!A.excludeFromExport}).map(function(A){return this._toObject(A,C,M)},this)},_toObject:function(C,M,A){var P;this.includeDefaultValues||(P=C.includeDefaultValues,C.includeDefaultValues=!1);var L=C[M](A);return this.includeDefaultValues||(C.includeDefaultValues=P),L},__serializeBgOverlay:function(C,M){var A={},P=this.backgroundImage,L=this.overlayImage,R=this.backgroundColor,j=this.overlayColor;return R&&R.toObject?R.excludeFromExport||(A.background=R.toObject(M)):R&&(A.background=R),j&&j.toObject?j.excludeFromExport||(A.overlay=j.toObject(M)):j&&(A.overlay=j),P&&!P.excludeFromExport&&(A.backgroundImage=this._toObject(P,C,M)),L&&!L.excludeFromExport&&(A.overlayImage=this._toObject(L,C,M)),A},svgViewportTransformation:!0,toSVG:function(C,M){C||(C={}),C.reviver=M;var A=[];return this._setSVGPreamble(A,C),this._setSVGHeader(A,C),this.clipPath&&A.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(A,"background"),this._setSVGBgOverlayImage(A,"backgroundImage",M),this._setSVGObjects(A,M),this.clipPath&&A.push(`</g>
`),this._setSVGBgOverlayColor(A,"overlay"),this._setSVGBgOverlayImage(A,"overlayImage",M),A.push("</svg>"),A.join("")},_setSVGPreamble:function(C,M){M.suppressPreamble||C.push('<?xml version="1.0" encoding="',M.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(C,M){var A=M.width||this.width,P=M.height||this.height,L,R='viewBox="0 0 '+this.width+" "+this.height+'" ',j=d.Object.NUM_FRACTION_DIGITS;M.viewBox?R='viewBox="'+M.viewBox.x+" "+M.viewBox.y+" "+M.viewBox.width+" "+M.viewBox.height+'" ':this.svgViewportTransformation&&(L=this.viewportTransform,R='viewBox="'+w(-L[4]/L[0],j)+" "+w(-L[5]/L[3],j)+" "+w(this.width/L[0],j)+" "+w(this.height/L[3],j)+'" '),C.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',A,'" ','height="',P,'" ',R,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",d.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(M),`</defs>
`)},createSVGClipPathMarkup:function(C){var M=this.clipPath;return M?(M.clipPathId="CLIPPATH_"+d.Object.__uid++,'<clipPath id="'+M.clipPathId+`" >
`+this.clipPath.toClipPathSVG(C.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var C=this,M=["background","overlay"].map(function(A){var P=C[A+"Color"];if(P&&P.toLive){var L=C[A+"Vpt"],R=C.viewportTransform,j={width:C.width/(L?R[0]:1),height:C.height/(L?R[3]:1)};return P.toSVG(j,{additionalTransform:L?d.util.matrixToSVG(R):""})}});return M.join("")},createSVGFontFacesMarkup:function(){var C="",M={},A,P,L,R,j,z,$,Y,ae,K=d.fontPaths,te=[];for(this._objects.forEach(function ue(J){te.push(J),J._objects&&J._objects.forEach(ue)}),Y=0,ae=te.length;Y<ae;Y++)if(A=te[Y],P=A.fontFamily,!(A.type.indexOf("text")===-1||M[P]||!K[P])&&(M[P]=!0,!!A.styles)){L=A.styles;for(j in L){R=L[j];for($ in R)z=R[$],P=z.fontFamily,!M[P]&&K[P]&&(M[P]=!0)}}for(var G in M)C+=[`		@font-face {
`,"			font-family: '",G,`';
`,"			src: url('",K[G],`');
`,`		}
`].join("");return C&&(C=['	<style type="text/css">',`<![CDATA[
`,C,"]]>",`</style>
`].join("")),C},_setSVGObjects:function(C,M){var A,P,L,R=this._objects;for(P=0,L=R.length;P<L;P++)A=R[P],!A.excludeFromExport&&this._setSVGObject(C,A,M)},_setSVGObject:function(C,M,A){C.push(M.toSVG(A))},_setSVGBgOverlayImage:function(C,M,A){this[M]&&!this[M].excludeFromExport&&this[M].toSVG&&C.push(this[M].toSVG(A))},_setSVGBgOverlayColor:function(C,M){var A=this[M+"Color"],P=this.viewportTransform,L=this.width,R=this.height;if(A)if(A.toLive){var j=A.repeat,z=d.util.invertTransform(P),$=this[M+"Vpt"],Y=$?d.util.matrixToSVG(z):"";C.push('<rect transform="'+Y+" translate(",L/2,",",R/2,')"',' x="',A.offsetX-L/2,'" y="',A.offsetY-R/2,'" ','width="',j==="repeat-y"||j==="no-repeat"?A.source.width:L,'" height="',j==="repeat-x"||j==="no-repeat"?A.source.height:R,'" fill="url(#SVGID_'+A.id+')"',`></rect>
`)}else C.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',A,'"',`></rect>
`)},sendToBack:function(C){if(!C)return this;var M=this._activeObject,A,P,L;if(C===M&&C.type==="activeSelection")for(L=M._objects,A=L.length;A--;)P=L[A],g(this._objects,P),this._objects.unshift(P);else g(this._objects,C),this._objects.unshift(C);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(C){if(!C)return this;var M=this._activeObject,A,P,L;if(C===M&&C.type==="activeSelection")for(L=M._objects,A=0;A<L.length;A++)P=L[A],g(this._objects,P),this._objects.push(P);else g(this._objects,C),this._objects.push(C);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(C,M){if(!C)return this;var A=this._activeObject,P,L,R,j,z,$=0;if(C===A&&C.type==="activeSelection")for(z=A._objects,P=0;P<z.length;P++)L=z[P],R=this._objects.indexOf(L),R>0+$&&(j=R-1,g(this._objects,L),this._objects.splice(j,0,L)),$++;else R=this._objects.indexOf(C),R!==0&&(j=this._findNewLowerIndex(C,R,M),g(this._objects,C),this._objects.splice(j,0,C));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(C,M,A){var P,L;if(A)for(P=M,L=M-1;L>=0;--L){var R=C.intersectsWithObject(this._objects[L])||C.isContainedWithinObject(this._objects[L])||this._objects[L].isContainedWithinObject(C);if(R){P=L;break}}else P=M-1;return P},bringForward:function(C,M){if(!C)return this;var A=this._activeObject,P,L,R,j,z,$=0;if(C===A&&C.type==="activeSelection")for(z=A._objects,P=z.length;P--;)L=z[P],R=this._objects.indexOf(L),R<this._objects.length-1-$&&(j=R+1,g(this._objects,L),this._objects.splice(j,0,L)),$++;else R=this._objects.indexOf(C),R!==this._objects.length-1&&(j=this._findNewUpperIndex(C,R,M),g(this._objects,C),this._objects.splice(j,0,C));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(C,M,A){var P,L,R;if(A)for(P=M,L=M+1,R=this._objects.length;L<R;++L){var j=C.intersectsWithObject(this._objects[L])||C.isContainedWithinObject(this._objects[L])||this._objects[L].isContainedWithinObject(C);if(j){P=L;break}}else P=M+1;return P},moveTo:function(C,M){return g(this._objects,C),this._objects.splice(M,0,C),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(d.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(C){C.dispose&&C.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),d.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),m(d.StaticCanvas.prototype,d.Observable),m(d.StaticCanvas.prototype,d.Collection),m(d.StaticCanvas.prototype,d.DataURLExporter),m(d.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(C){var M=S();if(!M||!M.getContext)return null;var A=M.getContext("2d");if(!A)return null;switch(C){case"setLineDash":return typeof A.setLineDash<"u";default:return null}}}),d.StaticCanvas.prototype.toJSON=d.StaticCanvas.prototype.toObject,d.isLikelyNode&&(d.StaticCanvas.prototype.createPNGStream=function(){var C=y(this.lowerCanvasEl);return C&&C.createPNGStream()},d.StaticCanvas.prototype.createJPEGStream=function(C){var M=y(this.lowerCanvasEl);return M&&M.createJPEGStream(C)})}(),d.BaseBrush=d.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var m=this.canvas.contextTop;m.strokeStyle=this.color,m.lineWidth=this.width,m.lineCap=this.strokeLineCap,m.miterLimit=this.strokeMiterLimit,m.lineJoin=this.strokeLineJoin,m.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(m){var h=this.canvas.viewportTransform;m.save(),m.transform(h[0],h[1],h[2],h[3],h[4],h[5])},_setShadow:function(){if(this.shadow){var m=this.canvas,h=this.shadow,g=m.contextTop,w=m.getZoom();m&&m._isRetinaScaling()&&(w*=d.devicePixelRatio),g.shadowColor=h.color,g.shadowBlur=h.blur*w,g.shadowOffsetX=h.offsetX*w,g.shadowOffsetY=h.offsetY*w}},needsFullRender:function(){var m=new d.Color(this.color);return m.getAlpha()<1||!!this.shadow},_resetShadow:function(){var m=this.canvas.contextTop;m.shadowColor="",m.shadowBlur=m.shadowOffsetX=m.shadowOffsetY=0},_isOutSideCanvas:function(m){return m.x<0||m.x>this.canvas.getWidth()||m.y<0||m.y>this.canvas.getHeight()}}),function(){d.PencilBrush=d.util.createClass(d.BaseBrush,{decimate:.4,initialize:function(m){this.canvas=m,this._points=[]},_drawSegment:function(m,h,g){var w=h.midPointFrom(g);return m.quadraticCurveTo(h.x,h.y,w.x,w.y),w},onMouseDown:function(m,h){this.canvas._isMainEvent(h.e)&&(this._prepareForDrawing(m),this._captureDrawingPath(m),this._render())},onMouseMove:function(m,h){if(this.canvas._isMainEvent(h.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(m))&&this._captureDrawingPath(m)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var g=this._points,w=g.length,p=this.canvas.contextTop;this._saveAndTransform(p),this.oldEnd&&(p.beginPath(),p.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(p,g[w-2],g[w-1],!0),p.stroke(),p.restore()}},onMouseUp:function(m){return this.canvas._isMainEvent(m.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(m){var h=new d.Point(m.x,m.y);this._reset(),this._addPoint(h),this.canvas.contextTop.moveTo(h.x,h.y)},_addPoint:function(m){return this._points.length>1&&m.eq(this._points[this._points.length-1])?!1:(this._points.push(m),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(m){var h=new d.Point(m.x,m.y);return this._addPoint(h)},_render:function(){var m=this.canvas.contextTop,h,g,w=this._points[0],p=this._points[1];if(this._saveAndTransform(m),m.beginPath(),this._points.length===2&&w.x===p.x&&w.y===p.y){var v=this.width/1e3;w=new d.Point(w.x,w.y),p=new d.Point(p.x,p.y),w.x-=v,p.x+=v}for(m.moveTo(w.x,w.y),h=1,g=this._points.length;h<g;h++)this._drawSegment(m,w,p),w=this._points[h],p=this._points[h+1];m.lineTo(w.x,w.y),m.stroke(),m.restore()},convertPointsToSVGPath:function(m){var h=this.width/1e3;return d.util.getSmoothPathFromPoints(m,h)},_isEmptySVGPath:function(m){var h=d.util.joinPath(m);return h==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(m){var h=new d.Path(m,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,h.shadow=new d.Shadow(this.shadow)),h},decimatePoints:function(m,h){if(m.length<=2)return m;var g=this.canvas.getZoom(),w=Math.pow(h/g,2),p,v=m.length-1,y=m[0],S=[y],T;for(p=1;p<v-1;p++)T=Math.pow(y.x-m[p].x,2)+Math.pow(y.y-m[p].y,2),T>=w&&(y=m[p],S.push(y));return S.push(m[v]),S},_finalizeAndAddPath:function(){var m=this.canvas.contextTop;m.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h)){this.canvas.requestRenderAll();return}var g=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.requestRenderAll(),g.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:g})}})}(),d.CircleBrush=d.util.createClass(d.BaseBrush,{width:10,initialize:function(m){this.canvas=m,this.points=[]},drawDot:function(m){var h=this.addPoint(m),g=this.canvas.contextTop;this._saveAndTransform(g),this.dot(g,h),g.restore()},dot:function(m,h){m.fillStyle=h.fill,m.beginPath(),m.arc(h.x,h.y,h.radius,0,Math.PI*2,!1),m.closePath(),m.fill()},onMouseDown:function(m){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(m)},_render:function(){var m=this.canvas.contextTop,h,g,w=this.points;for(this._saveAndTransform(m),h=0,g=w.length;h<g;h++)this.dot(m,w[h]);m.restore()},onMouseMove:function(m){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(m)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(m),this._render()):this.drawDot(m))},onMouseUp:function(){var m=this.canvas.renderOnAddRemove,h,g;this.canvas.renderOnAddRemove=!1;var w=[];for(h=0,g=this.points.length;h<g;h++){var p=this.points[h],v=new d.Circle({radius:p.radius,left:p.x,top:p.y,originX:"center",originY:"center",fill:p.fill});this.shadow&&(v.shadow=new d.Shadow(this.shadow)),w.push(v)}var y=new d.Group(w);y.canvas=this.canvas,this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.fire("path:created",{path:y}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=m,this.canvas.requestRenderAll()},addPoint:function(m){var h=new d.Point(m.x,m.y),g=d.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,w=new d.Color(this.color).setAlpha(d.util.getRandomInt(0,100)/100).toRgba();return h.radius=g,h.fill=w,this.points.push(h),h}}),d.SprayBrush=d.util.createClass(d.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(m){this.canvas=m,this.sprayChunks=[]},onMouseDown:function(m){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(m),this.render(this.sprayChunkPoints)},onMouseMove:function(m){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(m)||(this.addSprayChunk(m),this.render(this.sprayChunkPoints))},onMouseUp:function(){var m=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var h=[],g=0,w=this.sprayChunks.length;g<w;g++)for(var p=this.sprayChunks[g],v=0,y=p.length;v<y;v++){var S=new d.Rect({width:p[v].width,height:p[v].width,left:p[v].x+1,top:p[v].y+1,originX:"center",originY:"center",fill:this.color});h.push(S)}this.optimizeOverlapping&&(h=this._getOptimizedRects(h));var T=new d.Group(h);this.shadow&&T.set("shadow",new d.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:T}),this.canvas.add(T),this.canvas.fire("path:created",{path:T}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=m,this.canvas.requestRenderAll()},_getOptimizedRects:function(m){var h={},g,w,p;for(w=0,p=m.length;w<p;w++)g=m[w].left+""+m[w].top,h[g]||(h[g]=m[w]);var v=[];for(g in h)v.push(h[g]);return v},render:function(m){var h=this.canvas.contextTop,g,w;for(h.fillStyle=this.color,this._saveAndTransform(h),g=0,w=m.length;g<w;g++){var p=m[g];typeof p.opacity<"u"&&(h.globalAlpha=p.opacity),h.fillRect(p.x,p.y,p.width,p.width)}h.restore()},_render:function(){var m=this.canvas.contextTop,h,g;for(m.fillStyle=this.color,this._saveAndTransform(m),h=0,g=this.sprayChunks.length;h<g;h++)this.render(this.sprayChunks[h]);m.restore()},addSprayChunk:function(m){this.sprayChunkPoints=[];var h,g,w,p=this.width/2,v;for(v=0;v<this.density;v++){h=d.util.getRandomInt(m.x-p,m.x+p),g=d.util.getRandomInt(m.y-p,m.y+p),this.dotWidthVariance?w=d.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):w=this.dotWidth;var y=new d.Point(h,g);y.width=w,this.randomOpacity&&(y.opacity=d.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(y)}this.sprayChunks.push(this.sprayChunkPoints)}}),d.PatternBrush=d.util.createClass(d.PencilBrush,{getPatternSrc:function(){var m=20,h=5,g=d.util.createCanvasElement(),w=g.getContext("2d");return g.width=g.height=m+h,w.fillStyle=this.color,w.beginPath(),w.arc(m/2,m/2,m/2,0,Math.PI*2,!1),w.closePath(),w.fill(),g},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(m){var h=this.callSuper("createPath",m),g=h._getLeftTopCoords().scalarAdd(h.strokeWidth/2);return h.stroke=new d.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-g.x,offsetY:-g.y}),h}}),function(){var m=d.util.getPointer,h=d.util.degreesToRadians,g=d.util.isTouchEvent;d.Canvas=d.util.createClass(d.StaticCanvas,{initialize:function(p,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(p,v),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=d.PencilBrush&&new d.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var p=this.getActiveObjects(),v,y,S;if(p.length>0&&!this.preserveObjectStacking){y=[],S=[];for(var T=0,C=this._objects.length;T<C;T++)v=this._objects[T],p.indexOf(v)===-1?y.push(v):S.push(v);p.length>1&&(this._activeObject._objects=S),y.push.apply(y,S)}else y=this._objects;return y},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var p=this.contextContainer;return this.renderCanvas(p,this._chooseObjectsToRender()),this},renderTopLayer:function(p){p.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(p),this.contextTopDirty=!0),p.restore()},renderTop:function(){var p=this.contextTop;return this.clearContext(p),this.renderTopLayer(p),this.fire("after:render"),this},_normalizePointer:function(p,v){var y=p.calcTransformMatrix(),S=d.util.invertTransform(y),T=this.restorePointerVpt(v);return d.util.transformPoint(T,S)},isTargetTransparent:function(p,v,y){if(p.shouldCache()&&p._cacheCanvas&&p!==this._activeObject){var S=this._normalizePointer(p,{x:v,y}),T=Math.max(p.cacheTranslationX+S.x*p.zoomX,0),C=Math.max(p.cacheTranslationY+S.y*p.zoomY,0),L=d.util.isTransparent(p._cacheContext,Math.round(T),Math.round(C),this.targetFindTolerance);return L}var M=this.contextCache,A=p.selectionBackgroundColor,P=this.viewportTransform;p.selectionBackgroundColor="",this.clearContext(M),M.save(),M.transform(P[0],P[1],P[2],P[3],P[4],P[5]),p.render(M),M.restore(),p.selectionBackgroundColor=A;var L=d.util.isTransparent(M,v,y,this.targetFindTolerance);return L},_isSelectionKeyPressed:function(p){var v=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?v=!!this.selectionKey.find(function(y){return p[y]===!0}):v=p[this.selectionKey],v},_shouldClearSelection:function(p,v){var y=this.getActiveObjects(),S=this._activeObject;return!v||v&&S&&y.length>1&&y.indexOf(v)===-1&&S!==v&&!this._isSelectionKeyPressed(p)||v&&!v.evented||v&&!v.selectable&&S&&S!==v},_shouldCenterTransform:function(p,v,y){if(p){var S;return v==="scale"||v==="scaleX"||v==="scaleY"||v==="resizing"?S=this.centeredScaling||p.centeredScaling:v==="rotate"&&(S=this.centeredRotation||p.centeredRotation),S?!y:y}},_getOriginFromCorner:function(p,v){var y={x:p.originX,y:p.originY};return v==="ml"||v==="tl"||v==="bl"?y.x="right":(v==="mr"||v==="tr"||v==="br")&&(y.x="left"),v==="tl"||v==="mt"||v==="tr"?y.y="bottom":(v==="bl"||v==="mb"||v==="br")&&(y.y="top"),y},_getActionFromCorner:function(p,v,y,S){if(!v||!p)return"drag";var T=S.controls[v];return T.getActionName(y,T,S)},_setupCurrentTransform:function(p,v,y){if(v){var S=this.getPointer(p),T=v.__corner,C=v.controls[T],M=y&&T?C.getActionHandler(p,v,C):d.controlsUtils.dragHandler,A=this._getActionFromCorner(y,T,p,v),P=this._getOriginFromCorner(v,T),L=p[this.centeredKey],R={target:v,action:A,actionHandler:M,corner:T,scaleX:v.scaleX,scaleY:v.scaleY,skewX:v.skewX,skewY:v.skewY,offsetX:S.x-v.left,offsetY:S.y-v.top,originX:P.x,originY:P.y,ex:S.x,ey:S.y,lastX:S.x,lastY:S.y,theta:h(v.angle),width:v.width*v.scaleX,shiftKey:p.shiftKey,altKey:L,original:d.util.saveObjectTransform(v)};this._shouldCenterTransform(v,A,L)&&(R.originX="center",R.originY="center"),R.original.originX=P.x,R.original.originY=P.y,this._currentTransform=R,this._beforeTransform(p)}},setCursor:function(p){this.upperCanvasEl.style.cursor=p},_drawSelection:function(p){var v=this._groupSelector,y=new d.Point(v.ex,v.ey),S=d.util.transformPoint(y,this.viewportTransform),T=new d.Point(v.ex+v.left,v.ey+v.top),C=d.util.transformPoint(T,this.viewportTransform),M=Math.min(S.x,C.x),A=Math.min(S.y,C.y),P=Math.max(S.x,C.x),L=Math.max(S.y,C.y),R=this.selectionLineWidth/2;this.selectionColor&&(p.fillStyle=this.selectionColor,p.fillRect(M,A,P-M,L-A)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(p.lineWidth=this.selectionLineWidth,p.strokeStyle=this.selectionBorderColor,M+=R,A+=R,P-=R,L-=R,d.Object.prototype._setLineDash.call(this,p,this.selectionDashArray),p.strokeRect(M,A,P-M,L-A))},findTarget:function(p,v){if(!this.skipTargetFind){var y=!0,S=this.getPointer(p,y),T=this._activeObject,C=this.getActiveObjects(),M,A,P=g(p),L=C.length>1&&!v||C.length===1;if(this.targets=[],L&&T._findTargetCorner(S,P)||C.length>1&&!v&&T===this._searchPossibleTargets([T],S))return T;if(C.length===1&&T===this._searchPossibleTargets([T],S))if(this.preserveObjectStacking)M=T,A=this.targets,this.targets=[];else return T;var R=this._searchPossibleTargets(this._objects,S);return p[this.altSelectionKey]&&R&&M&&R!==M&&(R=M,this.targets=A),R}},_checkTarget:function(p,v,y){if(v&&v.visible&&v.evented&&v.containsPoint(p))if((this.perPixelTargetFind||v.perPixelTargetFind)&&!v.isEditing){var S=this.isTargetTransparent(v,y.x,y.y);if(!S)return!0}else return!0},_searchPossibleTargets:function(p,v){for(var y,S=p.length,T;S--;){var C=p[S],M=C.group?this._normalizePointer(C.group,v):v;if(this._checkTarget(M,C,v)){y=p[S],y.subTargetCheck&&y instanceof d.Group&&(T=this._searchPossibleTargets(y._objects,v),T&&this.targets.push(T));break}}return y},restorePointerVpt:function(p){return d.util.transformPoint(p,d.util.invertTransform(this.viewportTransform))},getPointer:function(p,v){if(this._absolutePointer&&!v)return this._absolutePointer;if(this._pointer&&v)return this._pointer;var y=m(p),S=this.upperCanvasEl,T=S.getBoundingClientRect(),C=T.width||0,M=T.height||0,A;(!C||!M)&&("top"in T&&"bottom"in T&&(M=Math.abs(T.top-T.bottom)),"right"in T&&"left"in T&&(C=Math.abs(T.right-T.left))),this.calcOffset(),y.x=y.x-this._offset.left,y.y=y.y-this._offset.top,v||(y=this.restorePointerVpt(y));var P=this.getRetinaScaling();return P!==1&&(y.x/=P,y.y/=P),C===0||M===0?A={width:1,height:1}:A={width:S.width/C,height:S.height/M},{x:y.x*A.width,y:y.y*A.height}},_createUpperCanvas:function(){var p=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),v=this.lowerCanvasEl,y=this.upperCanvasEl;y?y.className="":(y=this._createCanvasElement(),this.upperCanvasEl=y),d.util.addClass(y,"upper-canvas "+p),this.wrapperEl.appendChild(y),this._copyCanvasStyle(v,y),this._applyCanvasStyle(y),this.contextTop=y.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=d.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),d.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),d.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(p){var v=this.width||p.width,y=this.height||p.height;d.util.setStyle(p,{position:"absolute",width:v+"px",height:y+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),p.width=v,p.height=y,d.util.makeElementUnselectable(p)},_copyCanvasStyle:function(p,v){v.style.cssText=p.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var p=this._activeObject;return p?p.type==="activeSelection"&&p._objects?p._objects.slice(0):[p]:[]},_onObjectRemoved:function(p){p===this._activeObject&&(this.fire("before:selection:cleared",{target:p}),this._discardActiveObject(),this.fire("selection:cleared",{target:p}),p.fire("deselected")),p===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",p)},_fireSelectionEvents:function(p,v){var y=!1,S=this.getActiveObjects(),T=[],C=[];p.forEach(function(M){S.indexOf(M)===-1&&(y=!0,M.fire("deselected",{e:v,target:M}),C.push(M))}),S.forEach(function(M){p.indexOf(M)===-1&&(y=!0,M.fire("selected",{e:v,target:M}),T.push(M))}),p.length>0&&S.length>0?y&&this.fire("selection:updated",{e:v,selected:T,deselected:C,updated:T[0]||C[0],target:this._activeObject}):S.length>0?this.fire("selection:created",{e:v,selected:T,target:this._activeObject}):p.length>0&&this.fire("selection:cleared",{e:v,deselected:C})},setActiveObject:function(p,v){var y=this.getActiveObjects();return this._setActiveObject(p,v),this._fireSelectionEvents(y,v),this},_setActiveObject:function(p,v){return this._activeObject===p||!this._discardActiveObject(v,p)||p.onSelect({e:v})?!1:(this._activeObject=p,!0)},_discardActiveObject:function(p,v){var y=this._activeObject;if(y){if(y.onDeselect({e:p,object:v}))return!1;this._activeObject=null}return!0},discardActiveObject:function(p){var v=this.getActiveObjects(),y=this.getActiveObject();return v.length&&this.fire("before:selection:cleared",{target:y,e:p}),this._discardActiveObject(p),this._fireSelectionEvents(v,p),this},dispose:function(){var p=this.wrapperEl;return this.removeListeners(),p.removeChild(this.upperCanvasEl),p.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(v){d.util.cleanUpJsdomNode(this[v]),this[v]=void 0}).bind(this)),p.parentNode&&p.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,d.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(p){var v=this._activeObject;v&&v._renderControls(p)},_toObject:function(p,v,y){var S=this._realizeGroupTransformOnObject(p),T=this.callSuper("_toObject",p,v,y);return this._unwindGroupTransformOnObject(p,S),T},_realizeGroupTransformOnObject:function(p){if(p.group&&p.group.type==="activeSelection"&&this._activeObject===p.group){var v=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],y={};return v.forEach(function(S){y[S]=p[S]}),d.util.addTransformToObject(p,this._activeObject.calcOwnMatrix()),y}else return null},_unwindGroupTransformOnObject:function(p,v){v&&p.set(v)},_setSVGObject:function(p,v,y){var S=this._realizeGroupTransformOnObject(v);this.callSuper("_setSVGObject",p,v,y),this._unwindGroupTransformOnObject(v,S)},setViewportTransform:function(p){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),d.StaticCanvas.prototype.setViewportTransform.call(this,p)}});for(var w in d.StaticCanvas)w!=="prototype"&&(d.Canvas[w]=d.StaticCanvas[w])}(),function(){var m=d.util.addListener,h=d.util.removeListener,g=3,w=2,p=1,v={passive:!1};function y(S,T){return S.button&&S.button===T-1}d.util.object.extend(d.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(m,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(S,T){var C=this.upperCanvasEl,M=this._getEventPrefix();S(d.window,"resize",this._onResize),S(C,M+"down",this._onMouseDown),S(C,M+"move",this._onMouseMove,v),S(C,M+"out",this._onMouseOut),S(C,M+"enter",this._onMouseEnter),S(C,"wheel",this._onMouseWheel),S(C,"contextmenu",this._onContextMenu),S(C,"dblclick",this._onDoubleClick),S(C,"dragover",this._onDragOver),S(C,"dragenter",this._onDragEnter),S(C,"dragleave",this._onDragLeave),S(C,"drop",this._onDrop),this.enablePointerEvents||S(C,"touchstart",this._onTouchStart,v),typeof eventjs<"u"&&T in eventjs&&(eventjs[T](C,"gesture",this._onGesture),eventjs[T](C,"drag",this._onDrag),eventjs[T](C,"orientation",this._onOrientationChange),eventjs[T](C,"shake",this._onShake),eventjs[T](C,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(h,"remove");var S=this._getEventPrefix();h(d.document,S+"up",this._onMouseUp),h(d.document,"touchend",this._onTouchEnd,v),h(d.document,S+"move",this._onMouseMove,v),h(d.document,"touchmove",this._onMouseMove,v)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(S,T){this.__onTransformGesture&&this.__onTransformGesture(S,T)},_onDrag:function(S,T){this.__onDrag&&this.__onDrag(S,T)},_onMouseWheel:function(S){this.__onMouseWheel(S)},_onMouseOut:function(S){var T=this._hoveredTarget;this.fire("mouse:out",{target:T,e:S}),this._hoveredTarget=null,T&&T.fire("mouseout",{e:S});var C=this;this._hoveredTargets.forEach(function(M){C.fire("mouse:out",{target:T,e:S}),M&&T.fire("mouseout",{e:S})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(M){M.isEditing&&M.hiddenTextarea.focus()})},_onMouseEnter:function(S){!this._currentTransform&&!this.findTarget(S)&&(this.fire("mouse:over",{target:null,e:S}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(S,T){this.__onOrientationChange&&this.__onOrientationChange(S,T)},_onShake:function(S,T){this.__onShake&&this.__onShake(S,T)},_onLongPress:function(S,T){this.__onLongPress&&this.__onLongPress(S,T)},_onDragOver:function(S){S.preventDefault();var T=this._simpleEventHandler("dragover",S);this._fireEnterLeaveEvents(T,S)},_onContextMenu:function(S){return this.stopContextMenu&&(S.stopPropagation(),S.preventDefault()),!1},_onDoubleClick:function(S){this._cacheTransformEventData(S),this._handleEvent(S,"dblclick"),this._resetTransformEventData(S)},getPointerId:function(S){var T=S.changedTouches;return T?T[0]&&T[0].identifier:this.enablePointerEvents?S.pointerId:-1},_isMainEvent:function(S){return S.isPrimary===!0?!0:S.isPrimary===!1?!1:S.type==="touchend"&&S.touches.length===0?!0:S.changedTouches?S.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(S){S.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(S)),this.__onMouseDown(S),this._resetTransformEventData();var T=this.upperCanvasEl,C=this._getEventPrefix();m(d.document,"touchend",this._onTouchEnd,v),m(d.document,"touchmove",this._onMouseMove,v),h(T,C+"down",this._onMouseDown)},_onMouseDown:function(S){this.__onMouseDown(S),this._resetTransformEventData();var T=this.upperCanvasEl,C=this._getEventPrefix();h(T,C+"move",this._onMouseMove,v),m(d.document,C+"up",this._onMouseUp),m(d.document,C+"move",this._onMouseMove,v)},_onTouchEnd:function(S){if(!(S.touches.length>0)){this.__onMouseUp(S),this._resetTransformEventData(),this.mainTouchId=null;var T=this._getEventPrefix();h(d.document,"touchend",this._onTouchEnd,v),h(d.document,"touchmove",this._onMouseMove,v);var C=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){m(C.upperCanvasEl,T+"down",C._onMouseDown),C._willAddMouseDown=0},400)}},_onMouseUp:function(S){this.__onMouseUp(S),this._resetTransformEventData();var T=this.upperCanvasEl,C=this._getEventPrefix();this._isMainEvent(S)&&(h(d.document,C+"up",this._onMouseUp),h(d.document,C+"move",this._onMouseMove,v),m(T,C+"move",this._onMouseMove,v))},_onMouseMove:function(S){!this.allowTouchScrolling&&S.preventDefault&&S.preventDefault(),this.__onMouseMove(S)},_onResize:function(){this.calcOffset()},_shouldRender:function(S){var T=this._activeObject;return!!T!=!!S||T&&S&&T!==S?!0:(T&&T.isEditing,!1)},__onMouseUp:function(S){var T,C=this._currentTransform,M=this._groupSelector,A=!1,P=!M||M.left===0&&M.top===0;if(this._cacheTransformEventData(S),T=this._target,this._handleEvent(S,"up:before"),y(S,g)){this.fireRightClick&&this._handleEvent(S,"up",g,P);return}if(y(S,w)){this.fireMiddleClick&&this._handleEvent(S,"up",w,P),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(S);return}if(this._isMainEvent(S)){if(C&&(this._finalizeCurrentTransform(S),A=C.actionPerformed),!P){var L=T===this._activeObject;this._maybeGroupObjects(S),A||(A=this._shouldRender(T)||!L&&T===this._activeObject)}if(T){if(T.selectable&&T!==this._activeObject&&T.activeOn==="up")this.setActiveObject(T,S),A=!0;else{var R=T._findTargetCorner(this.getPointer(S,!0),d.util.isTouchEvent(S)),j=T.controls[R],z=j&&j.getMouseUpHandler(S,T,j);if(z){var $=this.getPointer(S);z(S,C,$.x,$.y)}}T.isMoving=!1}this._setCursorFromEvent(S,T),this._handleEvent(S,"up",p,P),this._groupSelector=null,this._currentTransform=null,T&&(T.__corner=0),A?this.requestRenderAll():P||this.renderTop()}},_simpleEventHandler:function(S,T){var C=this.findTarget(T),M=this.targets,A={e:T,target:C,subTargets:M};if(this.fire(S,A),C&&C.fire(S,A),!M)return C;for(var P=0;P<M.length;P++)M[P].fire(S,A);return C},_handleEvent:function(S,T,C,M){var A=this._target,P=this.targets||[],L={e:S,target:A,subTargets:P,button:C||p,isClick:M||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};T==="up"&&(L.currentTarget=this.findTarget(S),L.currentSubTargets=this.targets),this.fire("mouse:"+T,L),A&&A.fire("mouse"+T,L);for(var R=0;R<P.length;R++)P[R].fire("mouse"+T,L)},_finalizeCurrentTransform:function(S){var T=this._currentTransform,C=T.target,M,A={e:S,target:C,transform:T,action:T.action};C._scaling&&(C._scaling=!1),C.setCoords(),(T.actionPerformed||this.stateful&&C.hasStateChanged())&&(T.actionPerformed&&(M=this._addEventOptions(A,T),this._fire(M,A)),this._fire("modified",A))},_addEventOptions:function(S,T){var C,M;switch(T.action){case"scaleX":C="scaled",M="x";break;case"scaleY":C="scaled",M="y";break;case"skewX":C="skewed",M="x";break;case"skewY":C="skewed",M="y";break;case"scale":C="scaled",M="equally";break;case"rotate":C="rotated";break;case"drag":C="moved";break}return S.by=M,C},_onMouseDownInDrawingMode:function(S){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(S).requestRenderAll();var T=this.getPointer(S);this.freeDrawingBrush.onMouseDown(T,{e:S,pointer:T}),this._handleEvent(S,"down")},_onMouseMoveInDrawingMode:function(S){if(this._isCurrentlyDrawing){var T=this.getPointer(S);this.freeDrawingBrush.onMouseMove(T,{e:S,pointer:T})}this.setCursor(this.freeDrawingCursor),this._handleEvent(S,"move")},_onMouseUpInDrawingMode:function(S){var T=this.getPointer(S);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:S,pointer:T}),this._handleEvent(S,"up")},__onMouseDown:function(S){this._cacheTransformEventData(S),this._handleEvent(S,"down:before");var T=this._target;if(y(S,g)){this.fireRightClick&&this._handleEvent(S,"down",g);return}if(y(S,w)){this.fireMiddleClick&&this._handleEvent(S,"down",w);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(S);return}if(this._isMainEvent(S)&&!this._currentTransform){var C=this._pointer;this._previousPointer=C;var M=this._shouldRender(T),A=this._shouldGroup(S,T);if(this._shouldClearSelection(S,T)?this.discardActiveObject(S):A&&(this._handleGrouping(S,T),T=this._activeObject),this.selection&&(!T||!T.selectable&&!T.isEditing&&T!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),T){var P=T===this._activeObject;T.selectable&&T.activeOn==="down"&&this.setActiveObject(T,S);var L=T._findTargetCorner(this.getPointer(S,!0),d.util.isTouchEvent(S));if(T.__corner=L,T===this._activeObject&&(L||!A)){this._setupCurrentTransform(S,T,P);var R=T.controls[L],C=this.getPointer(S),j=R&&R.getMouseDownHandler(S,T,R);j&&j(S,this._currentTransform,C.x,C.y)}}this._handleEvent(S,"down"),(M||A)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(S){this._resetTransformEventData(),this._pointer=this.getPointer(S,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(S)||null},_beforeTransform:function(S){var T=this._currentTransform;this.stateful&&T.target.saveState(),this.fire("before:transform",{e:S,transform:T})},__onMouseMove:function(S){this._handleEvent(S,"move:before"),this._cacheTransformEventData(S);var T,C;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(S);return}if(this._isMainEvent(S)){var M=this._groupSelector;M?(C=this._absolutePointer,M.left=C.x-M.ex,M.top=C.y-M.ey,this.renderTop()):this._currentTransform?this._transformObject(S):(T=this.findTarget(S)||null,this._setCursorFromEvent(S,T),this._fireOverOutEvents(T,S)),this._handleEvent(S,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(S,T){var C=this._hoveredTarget,M=this._hoveredTargets,A=this.targets,P=Math.max(M.length,A.length);this.fireSyntheticInOutEvents(S,T,{oldTarget:C,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var L=0;L<P;L++)this.fireSyntheticInOutEvents(A[L],T,{oldTarget:M[L],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=S,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(S,T){var C=this._draggedoverTarget,M=this._hoveredTargets,A=this.targets,P=Math.max(M.length,A.length);this.fireSyntheticInOutEvents(S,T,{oldTarget:C,evtOut:"dragleave",evtIn:"dragenter"});for(var L=0;L<P;L++)this.fireSyntheticInOutEvents(A[L],T,{oldTarget:M[L],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=S},fireSyntheticInOutEvents:function(S,T,C){var M,A,P=C.oldTarget,L,R,j=P!==S,z=C.canvasEvtIn,$=C.canvasEvtOut;j&&(M={e:T,target:S,previousTarget:P},A={e:T,target:P,nextTarget:S}),R=S&&j,L=P&&j,L&&($&&this.fire($,A),P.fire(C.evtOut,A)),R&&(z&&this.fire(z,M),S.fire(C.evtIn,M))},__onMouseWheel:function(S){this._cacheTransformEventData(S),this._handleEvent(S,"wheel"),this._resetTransformEventData()},_transformObject:function(S){var T=this.getPointer(S),C=this._currentTransform;C.reset=!1,C.shiftKey=S.shiftKey,C.altKey=S[this.centeredKey],this._performTransformAction(S,C,T),C.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(S,T,C){var M=C.x,A=C.y,P=T.action,L=!1,R=T.actionHandler;R&&(L=R(S,T,M,A)),P==="drag"&&L&&(T.target.isMoving=!0,this.setCursor(T.target.moveCursor||this.moveCursor)),T.actionPerformed=T.actionPerformed||L},_fire:d.controlsUtils.fireEvent,_setCursorFromEvent:function(S,T){if(!T)return this.setCursor(this.defaultCursor),!1;var C=T.hoverCursor||this.hoverCursor,M=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,A=(!M||!M.contains(T))&&T._findTargetCorner(this.getPointer(S,!0));A?this.setCursor(this.getCornerCursor(A,T,S)):(T.subTargetCheck&&this.targets.concat().reverse().map(function(P){C=P.hoverCursor||C}),this.setCursor(C))},getCornerCursor:function(S,T,C){var M=T.controls[S];return M.cursorStyleHandler(C,M,T)}})}(),function(){var m=Math.min,h=Math.max;d.util.object.extend(d.Canvas.prototype,{_shouldGroup:function(g,w){var p=this._activeObject;return p&&this._isSelectionKeyPressed(g)&&w&&w.selectable&&this.selection&&(p!==w||p.type==="activeSelection")&&!w.onSelect({e:g})},_handleGrouping:function(g,w){var p=this._activeObject;p.__corner||w===p&&(w=this.findTarget(g,!0),!w||!w.selectable)||(p&&p.type==="activeSelection"?this._updateActiveSelection(w,g):this._createActiveSelection(w,g))},_updateActiveSelection:function(g,w){var p=this._activeObject,v=p._objects.slice(0);p.contains(g)?(p.removeWithUpdate(g),this._hoveredTarget=g,this._hoveredTargets=this.targets.concat(),p.size()===1&&this._setActiveObject(p.item(0),w)):(p.addWithUpdate(g),this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(v,w)},_createActiveSelection:function(g,w){var p=this.getActiveObjects(),v=this._createGroup(g);this._hoveredTarget=v,this._setActiveObject(v,w),this._fireSelectionEvents(p,w)},_createGroup:function(g){var w=this._objects,p=w.indexOf(this._activeObject)<w.indexOf(g),v=p?[this._activeObject,g]:[g,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new d.ActiveSelection(v,{canvas:this})},_groupSelectedObjects:function(g){var w=this._collectObjects(g),p;w.length===1?this.setActiveObject(w[0],g):w.length>1&&(p=new d.ActiveSelection(w.reverse(),{canvas:this}),this.setActiveObject(p,g))},_collectObjects:function(g){for(var w=[],p,v=this._groupSelector.ex,y=this._groupSelector.ey,S=v+this._groupSelector.left,T=y+this._groupSelector.top,C=new d.Point(m(v,S),m(y,T)),M=new d.Point(h(v,S),h(y,T)),A=!this.selectionFullyContained,P=v===S&&y===T,L=this._objects.length;L--&&(p=this._objects[L],!(!(!p||!p.selectable||!p.visible)&&(A&&p.intersectsWithRect(C,M,!0)||p.isContainedWithinRect(C,M,!0)||A&&p.containsPoint(C,null,!0)||A&&p.containsPoint(M,null,!0))&&(w.push(p),P))););return w.length>1&&(w=w.filter(function(R){return!R.onSelect({e:g})})),w},_maybeGroupObjects:function(g){this.selection&&this._groupSelector&&this._groupSelectedObjects(g),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){d.util.object.extend(d.StaticCanvas.prototype,{toDataURL:function(m){m||(m={});var h=m.format||"png",g=m.quality||1,w=(m.multiplier||1)*(m.enableRetinaScaling?this.getRetinaScaling():1),p=this.toCanvasElement(w,m);return d.util.toDataURL(p,h,g)},toCanvasElement:function(m,h){m=m||1,h=h||{};var g=(h.width||this.width)*m,w=(h.height||this.height)*m,p=this.getZoom(),v=this.width,y=this.height,S=p*m,T=this.viewportTransform,C=(T[4]-(h.left||0))*m,M=(T[5]-(h.top||0))*m,A=this.interactive,P=[S,0,0,S,C,M],L=this.enableRetinaScaling,R=d.util.createCanvasElement(),j=this.contextTop;return R.width=g,R.height=w,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=P,this.width=g,this.height=w,this.calcViewportBoundaries(),this.renderCanvas(R.getContext("2d"),this._objects),this.viewportTransform=T,this.width=v,this.height=y,this.calcViewportBoundaries(),this.interactive=A,this.enableRetinaScaling=L,this.contextTop=j,R}})}(),d.util.object.extend(d.StaticCanvas.prototype,{loadFromJSON:function(m,h,g){if(m){var w=typeof m=="string"?JSON.parse(m):d.util.object.clone(m),p=this,v=w.clipPath,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete w.clipPath,this._enlivenObjects(w.objects,function(S){p.clear(),p._setBgOverlay(w,function(){v?p._enlivenObjects([v],function(T){p.clipPath=T[0],p.__setupCanvas.call(p,w,S,y,h)}):p.__setupCanvas.call(p,w,S,y,h)})},g),this}},__setupCanvas:function(m,h,g,w){var p=this;h.forEach(function(v,y){p.insertAt(v,y)}),this.renderOnAddRemove=g,delete m.objects,delete m.backgroundImage,delete m.overlayImage,delete m.background,delete m.overlay,this._setOptions(m),this.renderAll(),w&&w()},_setBgOverlay:function(m,h){var g={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!m.backgroundImage&&!m.overlayImage&&!m.background&&!m.overlay){h&&h();return}var w=function(){g.backgroundImage&&g.overlayImage&&g.backgroundColor&&g.overlayColor&&h&&h()};this.__setBgOverlay("backgroundImage",m.backgroundImage,g,w),this.__setBgOverlay("overlayImage",m.overlayImage,g,w),this.__setBgOverlay("backgroundColor",m.background,g,w),this.__setBgOverlay("overlayColor",m.overlay,g,w)},__setBgOverlay:function(m,h,g,w){var p=this;if(!h){g[m]=!0,w&&w();return}m==="backgroundImage"||m==="overlayImage"?d.util.enlivenObjects([h],function(v){p[m]=v[0],g[m]=!0,w&&w()}):this["set"+d.util.string.capitalize(m,!0)](h,function(){g[m]=!0,w&&w()})},_enlivenObjects:function(m,h,g){if(!m||m.length===0){h&&h([]);return}d.util.enlivenObjects(m,function(w){h&&h(w)},null,g)},_toDataURL:function(m,h){this.clone(function(g){h(g.toDataURL(m))})},_toDataURLWithMultiplier:function(m,h,g){this.clone(function(w){g(w.toDataURLWithMultiplier(m,h))})},clone:function(m,h){var g=JSON.stringify(this.toJSON(h));this.cloneWithoutData(function(w){w.loadFromJSON(g,function(){m&&m(w)})})},cloneWithoutData:function(m){var h=d.util.createCanvasElement();h.width=this.width,h.height=this.height;var g=new d.Canvas(h);this.backgroundImage?(g.setBackgroundImage(this.backgroundImage.src,function(){g.renderAll(),m&&m(g)}),g.backgroundImageOpacity=this.backgroundImageOpacity,g.backgroundImageStretch=this.backgroundImageStretch):m&&m(g)}}),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.util.object.clone,p=h.util.toFixed,v=h.util.string.capitalize,y=h.util.degreesToRadians,S=!h.isLikelyNode,T=2;h.Object||(h.Object=h.util.createClass(h.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:S,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(C){C&&this.setOptions(C)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=h.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(C){var M=h.perfLimitSizeTotal,A=C.width,P=C.height,L=h.maxCacheSideLimit,R=h.minCacheSideLimit;if(A<=L&&P<=L&&A*P<=M)return A<R&&(C.width=R),P<R&&(C.height=R),C;var j=A/P,z=h.util.limitDimsByArea(j,M),$=h.util.capValue,Y=$(R,z.x,L),ae=$(R,z.y,L);return A>Y&&(C.zoomX/=A/Y,C.width=Y,C.capped=!0),P>ae&&(C.zoomY/=P/ae,C.height=ae,C.capped=!0),C},_getCacheCanvasDimensions:function(){var C=this.getTotalObjectScaling(),M=this._getTransformedDimensions(0,0),A=M.x*C.scaleX/this.scaleX,P=M.y*C.scaleY/this.scaleY;return{width:A+T,height:P+T,zoomX:C.scaleX,zoomY:C.scaleY,x:A,y:P}},_updateCacheCanvas:function(){var C=this.canvas;if(this.noScaleCache&&C&&C._currentTransform){var M=C._currentTransform.target,A=C._currentTransform.action;if(this===M&&A.slice&&A.slice(0,5)==="scale")return!1}var P=this._cacheCanvas,L=this._limitCacheSize(this._getCacheCanvasDimensions()),R=h.minCacheSideLimit,j=L.width,z=L.height,$,Y,ae=L.zoomX,K=L.zoomY,te=j!==this.cacheWidth||z!==this.cacheHeight,G=this.zoomX!==ae||this.zoomY!==K,ue=te||G,J=0,be=0,de=!1;if(te){var ce=this._cacheCanvas.width,V=this._cacheCanvas.height,ne=j>ce||z>V,Q=(j<ce*.9||z<V*.9)&&ce>R&&V>R;de=ne||Q,ne&&!L.capped&&(j>R||z>R)&&(J=j*.1,be=z*.1)}return this instanceof h.Text&&this.path&&(ue=!0,de=!0,J+=this.getHeightOfLine(0)*this.zoomX,be+=this.getHeightOfLine(0)*this.zoomY),ue?(de?(P.width=Math.ceil(j+J),P.height=Math.ceil(z+be)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,P.width,P.height)),$=L.x/2,Y=L.y/2,this.cacheTranslationX=Math.round(P.width/2-$)+$,this.cacheTranslationY=Math.round(P.height/2-Y)+Y,this.cacheWidth=j,this.cacheHeight=z,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ae,K),this.zoomX=ae,this.zoomY=K,!0):!1},setOptions:function(C){this._setOptions(C),this._initGradient(C.fill,"fill"),this._initGradient(C.stroke,"stroke"),this._initPattern(C.fill,"fill"),this._initPattern(C.stroke,"stroke")},transform:function(C){var M=this.group&&!this.group._transformDone||this.group&&this.canvas&&C===this.canvas.contextTop,A=this.calcTransformMatrix(!M);C.transform(A[0],A[1],A[2],A[3],A[4],A[5])},toObject:function(C){var M=h.Object.NUM_FRACTION_DIGITS,A={type:this.type,version:h.version,originX:this.originX,originY:this.originY,left:p(this.left,M),top:p(this.top,M),width:p(this.width,M),height:p(this.height,M),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:p(this.strokeWidth,M),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:p(this.strokeMiterLimit,M),scaleX:p(this.scaleX,M),scaleY:p(this.scaleY,M),angle:p(this.angle,M),flipX:this.flipX,flipY:this.flipY,opacity:p(this.opacity,M),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:p(this.skewX,M),skewY:p(this.skewY,M)};return this.clipPath&&!this.clipPath.excludeFromExport&&(A.clipPath=this.clipPath.toObject(C),A.clipPath.inverted=this.clipPath.inverted,A.clipPath.absolutePositioned=this.clipPath.absolutePositioned),h.util.populateWithProperties(this,A,C),this.includeDefaultValues||(A=this._removeDefaultValues(A)),A},toDatalessObject:function(C){return this.toObject(C)},_removeDefaultValues:function(C){var M=h.util.getKlass(C.type).prototype,A=M.stateProperties;return A.forEach(function(P){if(!(P==="left"||P==="top")){C[P]===M[P]&&delete C[P];var L=Object.prototype.toString.call(C[P])==="[object Array]"&&Object.prototype.toString.call(M[P])==="[object Array]";L&&C[P].length===0&&M[P].length===0&&delete C[P]}}),C},toString:function(){return"#<fabric."+v(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var C=h.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(C.scaleX),scaleY:Math.abs(C.scaleY)}},getTotalObjectScaling:function(){var C=this.getObjectScaling(),M=C.scaleX,A=C.scaleY;if(this.canvas){var P=this.canvas.getZoom(),L=this.canvas.getRetinaScaling();M*=P*L,A*=P*L}return{scaleX:M,scaleY:A}},getObjectOpacity:function(){var C=this.opacity;return this.group&&(C*=this.group.getObjectOpacity()),C},_set:function(C,M){var A=C==="scaleX"||C==="scaleY",P=this[C]!==M,L=!1;return A&&(M=this._constrainScale(M)),C==="scaleX"&&M<0?(this.flipX=!this.flipX,M*=-1):C==="scaleY"&&M<0?(this.flipY=!this.flipY,M*=-1):C==="shadow"&&M&&!(M instanceof h.Shadow)?M=new h.Shadow(M):C==="dirty"&&this.group&&this.group.set("dirty",M),this[C]=M,P&&(L=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(C)>-1?(this.dirty=!0,L&&this.group.set("dirty",!0)):L&&this.stateProperties.indexOf(C)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:h.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(C){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(C.save(),this._setupCompositeOperation(C),this.drawSelectionBackground(C),this.transform(C),this._setOpacity(C),this._setShadow(C,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(C)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(C),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),C.restore())},renderCache:function(C){C=C||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,C.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(C){var M=this.clipPath;if(C.save(),M.inverted?C.globalCompositeOperation="destination-out":C.globalCompositeOperation="destination-in",M.absolutePositioned){var A=h.util.invertTransform(this.calcTransformMatrix());C.transform(A[0],A[1],A[2],A[3],A[4],A[5])}M.transform(C),C.scale(1/M.zoomX,1/M.zoomY),C.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),C.restore()},drawObject:function(C,M){var A=this.fill,P=this.stroke;M?(this.fill="black",this.stroke="",this._setClippingProperties(C)):this._renderBackground(C),this._render(C),this._drawClipPath(C),this.fill=A,this.stroke=P},_drawClipPath:function(C){var M=this.clipPath;M&&(M.canvas=this.canvas,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCache(C))},drawCacheOnCanvas:function(C){C.scale(1/this.zoomX,1/this.zoomY),C.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(C){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!C&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!C){var M=this.cacheWidth/this.zoomX,A=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-M/2,-A/2,M,A)}return!0}return!1},_renderBackground:function(C){if(this.backgroundColor){var M=this._getNonTransformedDimensions();C.fillStyle=this.backgroundColor,C.fillRect(-M.x/2,-M.y/2,M.x,M.y),this._removeShadow(C)}},_setOpacity:function(C){this.group&&!this.group._transformDone?C.globalAlpha=this.getObjectOpacity():C.globalAlpha*=this.opacity},_setStrokeStyles:function(C,M){var A=M.stroke;A&&(C.lineWidth=M.strokeWidth,C.lineCap=M.strokeLineCap,C.lineDashOffset=M.strokeDashOffset,C.lineJoin=M.strokeLineJoin,C.miterLimit=M.strokeMiterLimit,A.toLive?A.gradientUnits==="percentage"||A.gradientTransform||A.patternTransform?this._applyPatternForTransformedGradient(C,A):(C.strokeStyle=A.toLive(C,this),this._applyPatternGradientTransform(C,A)):C.strokeStyle=M.stroke)},_setFillStyles:function(C,M){var A=M.fill;A&&(A.toLive?(C.fillStyle=A.toLive(C,this),this._applyPatternGradientTransform(C,M.fill)):C.fillStyle=A)},_setClippingProperties:function(C){C.globalAlpha=1,C.strokeStyle="transparent",C.fillStyle="#000000"},_setLineDash:function(C,M){!M||M.length===0||(1&M.length&&M.push.apply(M,M),C.setLineDash(M))},_renderControls:function(C,M){var A=this.getViewportTransform(),P=this.calcTransformMatrix(),L,R,j;M=M||{},R=typeof M.hasBorders<"u"?M.hasBorders:this.hasBorders,j=typeof M.hasControls<"u"?M.hasControls:this.hasControls,P=h.util.multiplyTransformMatrices(A,P),L=h.util.qrDecompose(P),C.save(),C.translate(L.translateX,L.translateY),C.lineWidth=1*this.borderScaleFactor,this.group||(C.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),C.rotate(y(L.angle)),M.forActiveSelection||this.group?R&&this.drawBordersInGroup(C,L,M):R&&this.drawBorders(C,M),j&&this.drawControls(C,M),C.restore()},_setShadow:function(C){if(this.shadow){var M=this.shadow,A=this.canvas,P,L=A&&A.viewportTransform[0]||1,R=A&&A.viewportTransform[3]||1;M.nonScaling?P={scaleX:1,scaleY:1}:P=this.getObjectScaling(),A&&A._isRetinaScaling()&&(L*=h.devicePixelRatio,R*=h.devicePixelRatio),C.shadowColor=M.color,C.shadowBlur=M.blur*h.browserShadowBlurConstant*(L+R)*(P.scaleX+P.scaleY)/4,C.shadowOffsetX=M.offsetX*L*P.scaleX,C.shadowOffsetY=M.offsetY*R*P.scaleY}},_removeShadow:function(C){this.shadow&&(C.shadowColor="",C.shadowBlur=C.shadowOffsetX=C.shadowOffsetY=0)},_applyPatternGradientTransform:function(C,M){if(!M||!M.toLive)return{offsetX:0,offsetY:0};var A=M.gradientTransform||M.patternTransform,P=-this.width/2+M.offsetX||0,L=-this.height/2+M.offsetY||0;return M.gradientUnits==="percentage"?C.transform(this.width,0,0,this.height,P,L):C.transform(1,0,0,1,P,L),A&&C.transform(A[0],A[1],A[2],A[3],A[4],A[5]),{offsetX:P,offsetY:L}},_renderPaintInOrder:function(C){this.paintFirst==="stroke"?(this._renderStroke(C),this._renderFill(C)):(this._renderFill(C),this._renderStroke(C))},_render:function(){},_renderFill:function(C){this.fill&&(C.save(),this._setFillStyles(C,this),this.fillRule==="evenodd"?C.fill("evenodd"):C.fill(),C.restore())},_renderStroke:function(C){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(C),C.save(),this.strokeUniform&&this.group){var M=this.getObjectScaling();C.scale(1/M.scaleX,1/M.scaleY)}else this.strokeUniform&&C.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(C,this.strokeDashArray),this._setStrokeStyles(C,this),C.stroke(),C.restore()}},_applyPatternForTransformedGradient:function(C,M){var A=this._limitCacheSize(this._getCacheCanvasDimensions()),P=h.util.createCanvasElement(),L,R=this.canvas.getRetinaScaling(),j=A.x/this.scaleX/R,z=A.y/this.scaleY/R;P.width=j,P.height=z,L=P.getContext("2d"),L.beginPath(),L.moveTo(0,0),L.lineTo(j,0),L.lineTo(j,z),L.lineTo(0,z),L.closePath(),L.translate(j/2,z/2),L.scale(A.zoomX/this.scaleX/R,A.zoomY/this.scaleY/R),this._applyPatternGradientTransform(L,M),L.fillStyle=M.toLive(C),L.fill(),C.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),C.scale(R*this.scaleX/A.zoomX,R*this.scaleY/A.zoomY),C.strokeStyle=L.createPattern(P,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var C=h.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",C.scaleX),this.set("scaleY",C.scaleY),this.angle=C.angle,this.skewX=C.skewX,this.skewY=0}},_removeTransformMatrix:function(C){var M=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),M=h.util.transformPoint(M,this.transformMatrix)),this.transformMatrix=null,C&&(this.scaleX*=C.scaleX,this.scaleY*=C.scaleY,this.cropX=C.cropX,this.cropY=C.cropY,M.x+=C.offsetLeft,M.y+=C.offsetTop,this.width=C.width,this.height=C.height),this.setPositionByOrigin(M,"center","center")},clone:function(C,M){var A=this.toObject(M);this.constructor.fromObject?this.constructor.fromObject(A,C):h.Object._fromObject("Object",A,C)},cloneAsImage:function(C,M){var A=this.toCanvasElement(M);return C&&C(new h.Image(A)),this},toCanvasElement:function(C){C||(C={});var M=h.util,A=M.saveObjectTransform(this),P=this.group,L=this.shadow,R=Math.abs,j=(C.multiplier||1)*(C.enableRetinaScaling?h.devicePixelRatio:1);delete this.group,C.withoutTransform&&M.resetObjectTransform(this),C.withoutShadow&&(this.shadow=null);var z=h.util.createCanvasElement(),$=this.getBoundingRect(!0,!0),Y=this.shadow,ae,K={x:0,y:0},te,G,ue;Y&&(te=Y.blur,Y.nonScaling?ae={scaleX:1,scaleY:1}:ae=this.getObjectScaling(),K.x=2*Math.round(R(Y.offsetX)+te)*R(ae.scaleX),K.y=2*Math.round(R(Y.offsetY)+te)*R(ae.scaleY)),G=$.width+K.x,ue=$.height+K.y,z.width=Math.ceil(G),z.height=Math.ceil(ue);var J=new h.StaticCanvas(z,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});C.format==="jpeg"&&(J.backgroundColor="#fff"),this.setPositionByOrigin(new h.Point(J.width/2,J.height/2),"center","center");var be=this.canvas;J.add(this);var de=J.toCanvasElement(j||1,C);return this.shadow=L,this.set("canvas",be),P&&(this.group=P),this.set(A).setCoords(),J._objects=[],J.dispose(),J=null,de},toDataURL:function(C){return C||(C={}),h.util.toDataURL(this.toCanvasElement(C),C.format||"png",C.quality||1)},isType:function(C){return this.type===C},complexity:function(){return 1},toJSON:function(C){return this.toObject(C)},rotate:function(C){var M=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return M&&this._setOriginToCenter(),this.set("angle",C),M&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(C,M){M=M||this.canvas.getPointer(C);var A=new h.Point(M.x,M.y),P=this._getLeftTopCoords();return this.angle&&(A=h.util.rotatePoint(A,P,y(-this.angle))),{x:A.x-P.x,y:A.y-P.y}},_setupCompositeOperation:function(C){this.globalCompositeOperation&&(C.globalCompositeOperation=this.globalCompositeOperation)}}),h.util.createAccessors&&h.util.createAccessors(h.Object),g(h.Object.prototype,h.Observable),h.Object.NUM_FRACTION_DIGITS=2,h.Object._fromObject=function(C,M,A,P){var L=h[C];M=w(M,!0),h.util.enlivenPatterns([M.fill,M.stroke],function(R){typeof R[0]<"u"&&(M.fill=R[0]),typeof R[1]<"u"&&(M.stroke=R[1]),h.util.enlivenObjects([M.clipPath],function(j){M.clipPath=j[0];var z=P?new L(M[P],M):new L(M);A&&A(z)})})},h.Object.__uid=0)}(c),function(){var m=d.util.degreesToRadians,h={left:-.5,center:0,right:.5},g={top:-.5,center:0,bottom:.5};d.util.object.extend(d.Object.prototype,{translateToGivenOrigin:function(w,p,v,y,S){var T=w.x,C=w.y,M,A,P;return typeof p=="string"?p=h[p]:p-=.5,typeof y=="string"?y=h[y]:y-=.5,M=y-p,typeof v=="string"?v=g[v]:v-=.5,typeof S=="string"?S=g[S]:S-=.5,A=S-v,(M||A)&&(P=this._getTransformedDimensions(),T=w.x+M*P.x,C=w.y+A*P.y),new d.Point(T,C)},translateToCenterPoint:function(w,p,v){var y=this.translateToGivenOrigin(w,p,v,"center","center");return this.angle?d.util.rotatePoint(y,w,m(this.angle)):y},translateToOriginPoint:function(w,p,v){var y=this.translateToGivenOrigin(w,"center","center",p,v);return this.angle?d.util.rotatePoint(y,w,m(this.angle)):y},getCenterPoint:function(){var w=new d.Point(this.left,this.top);return this.translateToCenterPoint(w,this.originX,this.originY)},getPointByOrigin:function(w,p){var v=this.getCenterPoint();return this.translateToOriginPoint(v,w,p)},toLocalPoint:function(w,p,v){var y=this.getCenterPoint(),S,T;return typeof p<"u"&&typeof v<"u"?S=this.translateToGivenOrigin(y,"center","center",p,v):S=new d.Point(this.left,this.top),T=new d.Point(w.x,w.y),this.angle&&(T=d.util.rotatePoint(T,y,-m(this.angle))),T.subtractEquals(S)},setPositionByOrigin:function(w,p,v){var y=this.translateToCenterPoint(w,p,v),S=this.translateToOriginPoint(y,this.originX,this.originY);this.set("left",S.x),this.set("top",S.y)},adjustPosition:function(w){var p=m(this.angle),v=this.getScaledWidth(),y=d.util.cos(p)*v,S=d.util.sin(p)*v,T,C;typeof this.originX=="string"?T=h[this.originX]:T=this.originX-.5,typeof w=="string"?C=h[w]:C=w-.5,this.left+=y*(C-T),this.top+=S*(C-T),this.setCoords(),this.originX=w},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var w=this.getCenterPoint();this.originX="center",this.originY="center",this.left=w.x,this.top=w.y},_resetOrigin:function(){var w=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=w.x,this.top=w.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function m(v){return[new d.Point(v.tl.x,v.tl.y),new d.Point(v.tr.x,v.tr.y),new d.Point(v.br.x,v.br.y),new d.Point(v.bl.x,v.bl.y)]}var h=d.util,g=h.degreesToRadians,w=h.multiplyTransformMatrices,p=h.transformPoint;h.object.extend(d.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(v,y){return y?v?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),v?this.aCoords:this.lineCoords)},getCoords:function(v,y){return m(this._getCoords(v,y))},intersectsWithRect:function(v,y,S,T){var C=this.getCoords(S,T),M=d.Intersection.intersectPolygonRectangle(C,v,y);return M.status==="Intersection"},intersectsWithObject:function(v,y,S){var T=d.Intersection.intersectPolygonPolygon(this.getCoords(y,S),v.getCoords(y,S));return T.status==="Intersection"||v.isContainedWithinObject(this,y,S)||this.isContainedWithinObject(v,y,S)},isContainedWithinObject:function(v,y,S){for(var T=this.getCoords(y,S),C=y?v.aCoords:v.lineCoords,M=0,A=v._getImageLines(C);M<4;M++)if(!v.containsPoint(T[M],A))return!1;return!0},isContainedWithinRect:function(v,y,S,T){var C=this.getBoundingRect(S,T);return C.left>=v.x&&C.left+C.width<=y.x&&C.top>=v.y&&C.top+C.height<=y.y},containsPoint:function(v,M,S,T){var C=this._getCoords(S,T),M=M||this._getImageLines(C),A=this._findCrossPoints(v,M);return A!==0&&A%2===1},isOnScreen:function(v){if(!this.canvas)return!1;var y=this.canvas.vptCoords.tl,S=this.canvas.vptCoords.br,T=this.getCoords(!0,v);return T.some(function(C){return C.x<=S.x&&C.x>=y.x&&C.y<=S.y&&C.y>=y.y})||this.intersectsWithRect(y,S,!0,v)?!0:this._containsCenterOfCanvas(y,S,v)},_containsCenterOfCanvas:function(v,y,S){var T={x:(v.x+y.x)/2,y:(v.y+y.y)/2};return!!this.containsPoint(T,null,!0,S)},isPartiallyOnScreen:function(v){if(!this.canvas)return!1;var y=this.canvas.vptCoords.tl,S=this.canvas.vptCoords.br;if(this.intersectsWithRect(y,S,!0,v))return!0;var T=this.getCoords(!0,v).every(function(C){return(C.x>=S.x||C.x<=y.x)&&(C.y>=S.y||C.y<=y.y)});return T&&this._containsCenterOfCanvas(y,S,v)},_getImageLines:function(v){var y={topline:{o:v.tl,d:v.tr},rightline:{o:v.tr,d:v.br},bottomline:{o:v.br,d:v.bl},leftline:{o:v.bl,d:v.tl}};return y},_findCrossPoints:function(v,y){var S,T,C,M,A,P=0,L;for(var R in y)if(L=y[R],!(L.o.y<v.y&&L.d.y<v.y)&&!(L.o.y>=v.y&&L.d.y>=v.y)&&(L.o.x===L.d.x&&L.o.x>=v.x?A=L.o.x:(S=0,T=(L.d.y-L.o.y)/(L.d.x-L.o.x),C=v.y-S*v.x,M=L.o.y-T*L.o.x,A=-(C-M)/(S-T)),A>=v.x&&(P+=1),P===2))break;return P},getBoundingRect:function(v,y){var S=this.getCoords(v,y);return h.makeBoundingBoxFromPoints(S)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(v){return Math.abs(v)<this.minScaleLimit?v<0?-this.minScaleLimit:this.minScaleLimit:v===0?1e-4:v},scale:function(v){return this._set("scaleX",v),this._set("scaleY",v),this.setCoords()},scaleToWidth:function(v,y){var S=this.getBoundingRect(y).width/this.getScaledWidth();return this.scale(v/this.width/S)},scaleToHeight:function(v,y){var S=this.getBoundingRect(y).height/this.getScaledHeight();return this.scale(v/this.height/S)},calcCoords:function(v){return v?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var v=this.getViewportTransform(),y=this.padding,S=g(this.angle),T=h.cos(S),C=h.sin(S),M=T*y,A=C*y,P=M+A,L=M-A,R=this.calcACoords(),j={tl:p(R.tl,v),tr:p(R.tr,v),bl:p(R.bl,v),br:p(R.br,v)};return y&&(j.tl.x-=L,j.tl.y-=P,j.tr.x+=P,j.tr.y-=L,j.bl.x-=P,j.bl.y+=L,j.br.x+=L,j.br.y+=P),j},calcOCoords:function(){var v=this._calcRotateMatrix(),y=this._calcTranslateMatrix(),S=this.getViewportTransform(),T=w(S,y),C=w(T,v),C=w(C,[1/S[0],0,0,1/S[3],0,0]),M=this._calculateCurrentDimensions(),A={};return this.forEachControl(function(P,L,R){A[L]=P.positionHandler(M,C,R)}),A},calcACoords:function(){var v=this._calcRotateMatrix(),y=this._calcTranslateMatrix(),S=w(y,v),T=this._getTransformedDimensions(),C=T.x/2,M=T.y/2;return{tl:p({x:-C,y:-M},S),tr:p({x:C,y:-M},S),bl:p({x:-C,y:M},S),br:p({x:C,y:M},S)}},setCoords:function(v){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),v?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var v=this.getCenterPoint();return[1,0,0,1,v.x,v.y]},transformMatrixKey:function(v){var y="_",S="";return!v&&this.group&&(S=this.group.transformMatrixKey(v)+y),S+this.top+y+this.left+y+this.scaleX+y+this.scaleY+y+this.skewX+y+this.skewY+y+this.angle+y+this.originX+y+this.originY+y+this.width+y+this.height+y+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(v){var y=this.calcOwnMatrix();if(v||!this.group)return y;var S=this.transformMatrixKey(v),T=this.matrixCache||(this.matrixCache={});return T.key===S?T.value:(this.group&&(y=w(this.group.calcTransformMatrix(!1),y)),T.key=S,T.value=y,y)},calcOwnMatrix:function(){var v=this.transformMatrixKey(!0),y=this.ownMatrixCache||(this.ownMatrixCache={});if(y.key===v)return y.value;var S=this._calcTranslateMatrix(),T={angle:this.angle,translateX:S[4],translateY:S[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return y.key=v,y.value=h.composeMatrix(T),y.value},_calcDimensionsTransformMatrix:function(v,y,S){return h.calcDimensionsMatrix({skewX:v,skewY:y,scaleX:this.scaleX*(S&&this.flipX?-1:1),scaleY:this.scaleY*(S&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var v=this.strokeWidth,y=this.width+v,S=this.height+v;return{x:y,y:S}},_getTransformedDimensions:function(v,y){typeof v>"u"&&(v=this.skewX),typeof y>"u"&&(y=this.skewY);var S,T,C,M=v===0&&y===0;if(this.strokeUniform?(T=this.width,C=this.height):(S=this._getNonTransformedDimensions(),T=S.x,C=S.y),M)return this._finalizeDimensions(T*this.scaleX,C*this.scaleY);var A=h.sizeAfterTransform(T,C,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:v,skewY:y});return this._finalizeDimensions(A.x,A.y)},_finalizeDimensions:function(v,y){return this.strokeUniform?{x:v+this.strokeWidth,y:y+this.strokeWidth}:{x:v,y}},_calculateCurrentDimensions:function(){var v=this.getViewportTransform(),y=this._getTransformedDimensions(),S=p(y,v,!0);return S.scalarAdd(2*this.padding)}})}(),d.util.object.extend(d.Object.prototype,{sendToBack:function(){return this.group?d.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?d.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(m){return this.group?d.StaticCanvas.prototype.sendBackwards.call(this.group,this,m):this.canvas&&this.canvas.sendBackwards(this,m),this},bringForward:function(m){return this.group?d.StaticCanvas.prototype.bringForward.call(this.group,this,m):this.canvas&&this.canvas.bringForward(this,m),this},moveTo:function(m){return this.group&&this.group.type!=="activeSelection"?d.StaticCanvas.prototype.moveTo.call(this.group,this,m):this.canvas&&this.canvas.moveTo(this,m),this}}),function(){function m(g,w){if(w){if(w.toLive)return g+": url(#SVGID_"+w.id+"); ";var p=new d.Color(w),v=g+": "+p.toRgb()+"; ",y=p.getAlpha();return y!==1&&(v+=g+"-opacity: "+y.toString()+"; "),v}else return g+": none; "}var h=d.util.toFixed;d.util.object.extend(d.Object.prototype,{getSvgStyles:function(g){var w=this.fillRule?this.fillRule:"nonzero",p=this.strokeWidth?this.strokeWidth:"0",v=this.strokeDashArray?this.strokeDashArray.join(" "):"none",y=this.strokeDashOffset?this.strokeDashOffset:"0",S=this.strokeLineCap?this.strokeLineCap:"butt",T=this.strokeLineJoin?this.strokeLineJoin:"miter",C=this.strokeMiterLimit?this.strokeMiterLimit:"4",M=typeof this.opacity<"u"?this.opacity:"1",A=this.visible?"":" visibility: hidden;",P=g?"":this.getSvgFilter(),L=m("fill",this.fill),R=m("stroke",this.stroke);return[R,"stroke-width: ",p,"; ","stroke-dasharray: ",v,"; ","stroke-linecap: ",S,"; ","stroke-dashoffset: ",y,"; ","stroke-linejoin: ",T,"; ","stroke-miterlimit: ",C,"; ",L,"fill-rule: ",w,"; ","opacity: ",M,";",P,A].join("")},getSvgSpanStyles:function(g,w){var p="; ",y=g.fontFamily?"font-family: "+(g.fontFamily.indexOf("'")===-1&&g.fontFamily.indexOf('"')===-1?"'"+g.fontFamily+"'":g.fontFamily)+p:"",v=g.strokeWidth?"stroke-width: "+g.strokeWidth+p:"",y=y,S=g.fontSize?"font-size: "+g.fontSize+"px"+p:"",T=g.fontStyle?"font-style: "+g.fontStyle+p:"",C=g.fontWeight?"font-weight: "+g.fontWeight+p:"",M=g.fill?m("fill",g.fill):"",A=g.stroke?m("stroke",g.stroke):"",P=this.getSvgTextDecoration(g),L=g.deltaY?"baseline-shift: "+-g.deltaY+"; ":"";return P&&(P="text-decoration: "+P+p),[A,v,y,S,T,C,P,M,L,w?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(g){return["overline","underline","line-through"].filter(function(w){return g[w.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(g,w){var p=g?this.calcTransformMatrix():this.calcOwnMatrix(),v='transform="'+d.util.matrixToSVG(p);return v+(w||"")+'" '},_setSVGBg:function(g){if(this.backgroundColor){var w=d.Object.NUM_FRACTION_DIGITS;g.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',h(-this.width/2,w),'" y="',h(-this.height/2,w),'" width="',h(this.width,w),'" height="',h(this.height,w),`"></rect>
`)}},toSVG:function(g){return this._createBaseSVGMarkup(this._toSVG(g),{reviver:g})},toClipPathSVG:function(g){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(g),{reviver:g})},_createBaseClipPathSVGMarkup:function(g,w){w=w||{};var p=w.reviver,v=w.additionalTransform||"",y=[this.getSvgTransform(!0,v),this.getSvgCommons()].join(""),S=g.indexOf("COMMON_PARTS");return g[S]=y,p?p(g.join("")):g.join("")},_createBaseSVGMarkup:function(g,w){w=w||{};var p=w.noStyle,v=w.reviver,y=p?"":'style="'+this.getSvgStyles()+'" ',S=w.withShadow?'style="'+this.getSvgFilter()+'" ':"",T=this.clipPath,C=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",M=T&&T.absolutePositioned,A=this.stroke,P=this.fill,L=this.shadow,R,j=[],z,$=g.indexOf("COMMON_PARTS"),Y=w.additionalTransform;return T&&(T.clipPathId="CLIPPATH_"+d.Object.__uid++,z='<clipPath id="'+T.clipPathId+`" >
`+T.toClipPathSVG(v)+`</clipPath>
`),M&&j.push("<g ",S,this.getSvgCommons(),` >
`),j.push("<g ",this.getSvgTransform(!1),M?"":S+this.getSvgCommons(),` >
`),R=[y,C,p?"":this.addPaintOrder()," ",Y?'transform="'+Y+'" ':""].join(""),g[$]=R,P&&P.toLive&&j.push(P.toSVG(this)),A&&A.toLive&&j.push(A.toSVG(this)),L&&j.push(L.toSVG(this)),T&&j.push(z),j.push(g.join("")),j.push(`</g>
`),M&&j.push(`</g>
`),v?v(j.join("")):j.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var m=d.util.object.extend,h="stateProperties";function g(p,v,y){var S={},T=!0;y.forEach(function(C){S[C]=p[C]}),m(p[v],S,T)}function w(p,v,y){if(p===v)return!0;if(Array.isArray(p)){if(!Array.isArray(v)||p.length!==v.length)return!1;for(var S=0,T=p.length;S<T;S++)if(!w(p[S],v[S]))return!1;return!0}else if(p&&typeof p=="object"){var C=Object.keys(p),M;if(!v||typeof v!="object"||!y&&C.length!==Object.keys(v).length)return!1;for(var S=0,T=C.length;S<T;S++)if(M=C[S],!(M==="canvas"||M==="group")&&!w(p[M],v[M]))return!1;return!0}}d.util.object.extend(d.Object.prototype,{hasStateChanged:function(p){p=p||h;var v="_"+p;return Object.keys(this[v]).length<this[p].length?!0:!w(this[v],this,!0)},saveState:function(p){var v=p&&p.propertySet||h,y="_"+v;return this[y]?(g(this,y,this[v]),p&&p.stateProperties&&g(this,y,p.stateProperties),this):this.setupState(p)},setupState:function(p){p=p||{};var v=p.propertySet||h;return p.propertySet=v,this["_"+v]={},this.saveState(p),this}})}(),function(){var m=d.util.degreesToRadians;d.util.object.extend(d.Object.prototype,{_findTargetCorner:function(h,g){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var w=h.x,p=h.y,v,y,S=Object.keys(this.oCoords),T=S.length-1,C;for(this.__corner=0;T>=0;T--)if(C=S[T],!!this.isControlVisible(C)&&(y=this._getImageLines(g?this.oCoords[C].touchCorner:this.oCoords[C].corner),v=this._findCrossPoints({x:w,y:p},y),v!==0&&v%2===1))return this.__corner=C,C;return!1},forEachControl:function(h){for(var g in this.controls)h(this.controls[g],g,this)},_setCornerCoords:function(){var h=this.oCoords;for(var g in h){var w=this.controls[g];h[g].corner=w.calcCornerCoords(this.angle,this.cornerSize,h[g].x,h[g].y,!1),h[g].touchCorner=w.calcCornerCoords(this.angle,this.touchCornerSize,h[g].x,h[g].y,!0)}},drawSelectionBackground:function(h){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;h.save();var g=this.getCenterPoint(),w=this._calculateCurrentDimensions(),p=this.canvas.viewportTransform;return h.translate(g.x,g.y),h.scale(1/p[0],1/p[3]),h.rotate(m(this.angle)),h.fillStyle=this.selectionBackgroundColor,h.fillRect(-w.x/2,-w.y/2,w.x,w.y),h.restore(),this},drawBorders:function(h,g){g=g||{};var w=this._calculateCurrentDimensions(),p=this.borderScaleFactor,v=w.x+p,y=w.y+p,S=typeof g.hasControls<"u"?g.hasControls:this.hasControls,T=!1;return h.save(),h.strokeStyle=g.borderColor||this.borderColor,this._setLineDash(h,g.borderDashArray||this.borderDashArray),h.strokeRect(-v/2,-y/2,v,y),S&&(h.beginPath(),this.forEachControl(function(C,M,A){C.withConnection&&C.getVisibility(A,M)&&(T=!0,h.moveTo(C.x*v,C.y*y),h.lineTo(C.x*v+C.offsetX,C.y*y+C.offsetY))}),T&&h.stroke()),h.restore(),this},drawBordersInGroup:function(h,g,w){w=w||{};var p=d.util.sizeAfterTransform(this.width,this.height,g),v=this.strokeWidth,y=this.strokeUniform,S=this.borderScaleFactor,T=p.x+v*(y?this.canvas.getZoom():g.scaleX)+S,C=p.y+v*(y?this.canvas.getZoom():g.scaleY)+S;return h.save(),this._setLineDash(h,w.borderDashArray||this.borderDashArray),h.strokeStyle=w.borderColor||this.borderColor,h.strokeRect(-T/2,-C/2,T,C),h.restore(),this},drawControls:function(h,g){g=g||{},h.save();var w=this.canvas.getRetinaScaling(),p,v;return h.setTransform(w,0,0,w,0,0),h.strokeStyle=h.fillStyle=g.cornerColor||this.cornerColor,this.transparentCorners||(h.strokeStyle=g.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(h,g.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(p=this.group.calcTransformMatrix()),this.forEachControl(function(y,S,T){v=T.oCoords[S],y.getVisibility(T,S)&&(p&&(v=d.util.transformPoint(v,p)),y.render(h,v.x,v.y,g,T))}),h.restore(),this},isControlVisible:function(h){return this.controls[h]&&this.controls[h].getVisibility(this,h)},setControlVisible:function(h,g){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[h]=g,this},setControlsVisibility:function(h){h||(h={});for(var g in h)this.setControlVisible(g,h[g]);return this},onDeselect:function(){},onSelect:function(){}})}(),d.util.object.extend(d.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(m,h){h=h||{};var g=function(){},w=h.onComplete||g,p=h.onChange||g,v=this;return d.util.animate({startValue:m.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(y){m.set("left",y),v.requestRenderAll(),p()},onComplete:function(){m.setCoords(),w()}}),this},fxCenterObjectV:function(m,h){h=h||{};var g=function(){},w=h.onComplete||g,p=h.onChange||g,v=this;return d.util.animate({startValue:m.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(y){m.set("top",y),v.requestRenderAll(),p()},onComplete:function(){m.setCoords(),w()}}),this},fxRemove:function(m,h){h=h||{};var g=function(){},w=h.onComplete||g,p=h.onChange||g,v=this;return d.util.animate({startValue:m.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(y){m.set("opacity",y),v.requestRenderAll(),p()},onComplete:function(){v.remove(m),w()}}),this}}),d.util.object.extend(d.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var m=[],h,g;for(h in arguments[0])m.push(h);for(var w=0,p=m.length;w<p;w++)h=m[w],g=w!==p-1,this._animate(h,arguments[0][h],arguments[1],g)}else this._animate.apply(this,arguments);return this},_animate:function(m,h,g,w){var p=this,v;h=h.toString(),g?g=d.util.object.clone(g):g={},~m.indexOf(".")&&(v=m.split("."));var y=p.colorProperties.indexOf(m)>-1||v&&p.colorProperties.indexOf(v[1])>-1,S=v?this.get(v[0])[v[1]]:this.get(m);"from"in g||(g.from=S),y||(~h.indexOf("=")?h=S+parseFloat(h.replace("=","")):h=parseFloat(h));var T={startValue:g.from,endValue:h,byValue:g.by,easing:g.easing,duration:g.duration,abort:g.abort&&function(C,M,A){return g.abort.call(p,C,M,A)},onChange:function(C,M,A){v?p[v[0]][v[1]]=C:p.set(m,C),!w&&g.onChange&&g.onChange(C,M,A)},onComplete:function(C,M,A){w||(p.setCoords(),g.onComplete&&g.onComplete(C,M,A))}};return y?d.util.animateColor(T.startValue,T.endValue,T.duration,T):d.util.animate(T)}}),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.util.object.clone,p={x1:1,x2:1,y1:1,y2:1};if(h.Line){h.warn("fabric.Line is already defined");return}h.Line=h.util.createClass(h.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:h.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(y,S){y||(y=[0,0,0,0]),this.callSuper("initialize",S),this.set("x1",y[0]),this.set("y1",y[1]),this.set("x2",y[2]),this.set("y2",y[3]),this._setWidthHeight(S)},_setWidthHeight:function(y){y||(y={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in y?y.left:this._getLeftToOriginX(),this.top="top"in y?y.top:this._getTopToOriginY()},_set:function(y,S){return this.callSuper("_set",y,S),typeof p[y]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:v({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:v({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(y){y.beginPath();var S=this.calcLinePoints();y.moveTo(S.x1,S.y1),y.lineTo(S.x2,S.y2),y.lineWidth=this.strokeWidth;var T=y.strokeStyle;y.strokeStyle=this.stroke||y.fillStyle,this.stroke&&this._renderStroke(y),y.strokeStyle=T},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(y){return g(this.callSuper("toObject",y),this.calcLinePoints())},_getNonTransformedDimensions:function(){var y=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(y.y-=this.strokeWidth),this.height===0&&(y.x-=this.strokeWidth)),y},calcLinePoints:function(){var y=this.x1<=this.x2?-1:1,S=this.y1<=this.y2?-1:1,T=y*this.width*.5,C=S*this.height*.5,M=y*this.width*-.5,A=S*this.height*-.5;return{x1:T,x2:M,y1:C,y2:A}},_toSVG:function(){var y=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',y.x1,'" y1="',y.y1,'" x2="',y.x2,'" y2="',y.y2,`" />
`]}}),h.Line.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),h.Line.fromElement=function(y,S,T){T=T||{};var C=h.parseAttributes(y,h.Line.ATTRIBUTE_NAMES),M=[C.x1||0,C.y1||0,C.x2||0,C.y2||0];S(new h.Line(M,g(C,T)))},h.Line.fromObject=function(y,S){function T(M){delete M.points,S&&S(M)}var C=w(y,!0);C.points=[y.x1,y.y1,y.x2,y.y2],h.Object._fromObject("Line",C,T,"points")};function v(y,S){var T=y.origin,C=y.axis1,M=y.axis2,A=y.dimension,P=S.nearest,L=S.center,R=S.farthest;return function(){switch(this.get(T)){case P:return Math.min(this.get(C),this.get(M));case L:return Math.min(this.get(C),this.get(M))+.5*this.get(A);case R:return Math.max(this.get(C),this.get(M))}}}}(c),function(m){var h=m.fabric||(m.fabric={}),g=Math.PI;if(h.Circle){h.warn("fabric.Circle is already defined.");return}h.Circle=h.util.createClass(h.Object,{type:"circle",radius:0,startAngle:0,endAngle:g*2,cacheProperties:h.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(p,v){return this.callSuper("_set",p,v),p==="radius"&&this.setRadius(v),this},toObject:function(p){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(p))},_toSVG:function(){var p,v=0,y=0,S=(this.endAngle-this.startAngle)%(2*g);if(S===0)p=["<circle ","COMMON_PARTS",'cx="'+v+'" cy="'+y+'" ','r="',this.radius,`" />
`];else{var T=h.util.cos(this.startAngle)*this.radius,C=h.util.sin(this.startAngle)*this.radius,M=h.util.cos(this.endAngle)*this.radius,A=h.util.sin(this.endAngle)*this.radius,P=S>g?"1":"0";p=['<path d="M '+T+" "+C," A "+this.radius+" "+this.radius," 0 ",+P+" 1"," "+M+" "+A,'" ',"COMMON_PARTS",` />
`]}return p},_render:function(p){p.beginPath(),p.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(p)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(p){return this.radius=p,this.set("width",p*2).set("height",p*2)}}),h.Circle.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),h.Circle.fromElement=function(p,v){var y=h.parseAttributes(p,h.Circle.ATTRIBUTE_NAMES);if(!w(y))throw new Error("value of `r` attribute is required and can not be negative");y.left=(y.left||0)-y.radius,y.top=(y.top||0)-y.radius,v(new h.Circle(y))};function w(p){return"radius"in p&&p.radius>=0}h.Circle.fromObject=function(p,v){h.Object._fromObject("Circle",p,v)}}(c),function(m){var h=m.fabric||(m.fabric={});if(h.Triangle){h.warn("fabric.Triangle is already defined");return}h.Triangle=h.util.createClass(h.Object,{type:"triangle",width:100,height:100,_render:function(g){var w=this.width/2,p=this.height/2;g.beginPath(),g.moveTo(-w,p),g.lineTo(0,-p),g.lineTo(w,p),g.closePath(),this._renderPaintInOrder(g)},_toSVG:function(){var g=this.width/2,w=this.height/2,p=[-g+" "+w,"0 "+-w,g+" "+w].join(",");return["<polygon ","COMMON_PARTS",'points="',p,'" />']}}),h.Triangle.fromObject=function(g,w){return h.Object._fromObject("Triangle",g,w)}}(c),function(m){var h=m.fabric||(m.fabric={}),g=Math.PI*2;if(h.Ellipse){h.warn("fabric.Ellipse is already defined.");return}h.Ellipse=h.util.createClass(h.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(w){this.callSuper("initialize",w),this.set("rx",w&&w.rx||0),this.set("ry",w&&w.ry||0)},_set:function(w,p){switch(this.callSuper("_set",w,p),w){case"rx":this.rx=p,this.set("width",p*2);break;case"ry":this.ry=p,this.set("height",p*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(w){return this.callSuper("toObject",["rx","ry"].concat(w))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(w){w.beginPath(),w.save(),w.transform(1,0,0,this.ry/this.rx,0,0),w.arc(0,0,this.rx,0,g,!1),w.restore(),this._renderPaintInOrder(w)}}),h.Ellipse.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),h.Ellipse.fromElement=function(w,p){var v=h.parseAttributes(w,h.Ellipse.ATTRIBUTE_NAMES);v.left=(v.left||0)-v.rx,v.top=(v.top||0)-v.ry,p(new h.Ellipse(v))},h.Ellipse.fromObject=function(w,p){h.Object._fromObject("Ellipse",w,p)}}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend;if(h.Rect){h.warn("fabric.Rect is already defined");return}h.Rect=h.util.createClass(h.Object,{stateProperties:h.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(w){this.callSuper("initialize",w),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(w){var p=this.rx?Math.min(this.rx,this.width/2):0,v=this.ry?Math.min(this.ry,this.height/2):0,y=this.width,S=this.height,T=-this.width/2,C=-this.height/2,M=p!==0||v!==0,A=1-.5522847498;w.beginPath(),w.moveTo(T+p,C),w.lineTo(T+y-p,C),M&&w.bezierCurveTo(T+y-A*p,C,T+y,C+A*v,T+y,C+v),w.lineTo(T+y,C+S-v),M&&w.bezierCurveTo(T+y,C+S-A*v,T+y-A*p,C+S,T+y-p,C+S),w.lineTo(T+p,C+S),M&&w.bezierCurveTo(T+A*p,C+S,T,C+S-A*v,T,C+S-v),w.lineTo(T,C+v),M&&w.bezierCurveTo(T,C+A*v,T+A*p,C,T+p,C),w.closePath(),this._renderPaintInOrder(w)},toObject:function(w){return this.callSuper("toObject",["rx","ry"].concat(w))},_toSVG:function(){var w=-this.width/2,p=-this.height/2;return["<rect ","COMMON_PARTS",'x="',w,'" y="',p,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),h.Rect.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),h.Rect.fromElement=function(w,p,v){if(!w)return p(null);v=v||{};var y=h.parseAttributes(w,h.Rect.ATTRIBUTE_NAMES);y.left=y.left||0,y.top=y.top||0,y.height=y.height||0,y.width=y.width||0;var S=new h.Rect(g(v?h.util.object.clone(v):{},y));S.visible=S.visible&&S.width>0&&S.height>0,p(S)},h.Rect.fromObject=function(w,p){return h.Object._fromObject("Rect",w,p)}}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.util.array.min,p=h.util.array.max,v=h.util.toFixed;if(h.Polyline){h.warn("fabric.Polyline is already defined");return}h.Polyline=h.util.createClass(h.Object,{type:"polyline",points:null,cacheProperties:h.Object.prototype.cacheProperties.concat("points"),initialize:function(y,S){S=S||{},this.points=y||[],this.callSuper("initialize",S),this._setPositionDimensions(S)},_setPositionDimensions:function(y){var S=this._calcDimensions(y),T;this.width=S.width,this.height=S.height,y.fromSVG||(T=this.translateToGivenOrigin({x:S.left-this.strokeWidth/2,y:S.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof y.left>"u"&&(this.left=y.fromSVG?S.left:T.x),typeof y.top>"u"&&(this.top=y.fromSVG?S.top:T.y),this.pathOffset={x:S.left+this.width/2,y:S.top+this.height/2}},_calcDimensions:function(){var y=this.points,S=w(y,"x")||0,T=w(y,"y")||0,C=p(y,"x")||0,M=p(y,"y")||0,A=C-S,P=M-T;return{left:S,top:T,width:A,height:P}},toObject:function(y){return g(this.callSuper("toObject",y),{points:this.points.concat()})},_toSVG:function(){for(var y=[],S=this.pathOffset.x,T=this.pathOffset.y,C=h.Object.NUM_FRACTION_DIGITS,M=0,A=this.points.length;M<A;M++)y.push(v(this.points[M].x-S,C),",",v(this.points[M].y-T,C)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',y.join(""),`" />
`]},commonRender:function(y){var S,T=this.points.length,C=this.pathOffset.x,M=this.pathOffset.y;if(!T||isNaN(this.points[T-1].y))return!1;y.beginPath(),y.moveTo(this.points[0].x-C,this.points[0].y-M);for(var A=0;A<T;A++)S=this.points[A],y.lineTo(S.x-C,S.y-M);return!0},_render:function(y){this.commonRender(y)&&this._renderPaintInOrder(y)},complexity:function(){return this.get("points").length}}),h.Polyline.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polyline.fromElementGenerator=function(y){return function(S,T,C){if(!S)return T(null);C||(C={});var M=h.parsePointsAttribute(S.getAttribute("points")),A=h.parseAttributes(S,h[y].ATTRIBUTE_NAMES);A.fromSVG=!0,T(new h[y](M,g(A,C)))}},h.Polyline.fromElement=h.Polyline.fromElementGenerator("Polyline"),h.Polyline.fromObject=function(y,S){return h.Object._fromObject("Polyline",y,S,"points")}}(c),function(m){var h=m.fabric||(m.fabric={});if(h.Polygon){h.warn("fabric.Polygon is already defined");return}h.Polygon=h.util.createClass(h.Polyline,{type:"polygon",_render:function(g){this.commonRender(g)&&(g.closePath(),this._renderPaintInOrder(g))}}),h.Polygon.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polygon.fromElement=h.Polyline.fromElementGenerator("Polygon"),h.Polygon.fromObject=function(g,w){h.Object._fromObject("Polygon",g,w,"points")}}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.array.min,w=h.util.array.max,p=h.util.object.extend,v=Object.prototype.toString,y=h.util.toFixed;if(h.Path){h.warn("fabric.Path is already defined");return}h.Path=h.util.createClass(h.Object,{type:"path",path:null,cacheProperties:h.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:h.Object.prototype.stateProperties.concat("path"),initialize:function(S,T){T=T||{},this.callSuper("initialize",T),S||(S=[]);var C=v.call(S)==="[object Array]";this.path=h.util.makePathSimpler(C?S:h.util.parsePath(S)),this.path&&h.Polyline.prototype._setPositionDimensions.call(this,T)},_renderPathCommands:function(S){var T,C=0,M=0,A=0,P=0,L=0,R=0,j=-this.pathOffset.x,z=-this.pathOffset.y;S.beginPath();for(var $=0,Y=this.path.length;$<Y;++$)switch(T=this.path[$],T[0]){case"L":A=T[1],P=T[2],S.lineTo(A+j,P+z);break;case"M":A=T[1],P=T[2],C=A,M=P,S.moveTo(A+j,P+z);break;case"C":A=T[5],P=T[6],L=T[3],R=T[4],S.bezierCurveTo(T[1]+j,T[2]+z,L+j,R+z,A+j,P+z);break;case"Q":S.quadraticCurveTo(T[1]+j,T[2]+z,T[3]+j,T[4]+z),A=T[3],P=T[4],L=T[1],R=T[2];break;case"z":case"Z":A=C,P=M,S.closePath();break}},_render:function(S){this._renderPathCommands(S),this._renderPaintInOrder(S)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(S){return p(this.callSuper("toObject",S),{path:this.path.map(function(T){return T.slice()})})},toDatalessObject:function(S){var T=this.toObject(["sourcePath"].concat(S));return T.sourcePath&&delete T.path,T},_toSVG:function(){var S=h.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',S,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var S=h.Object.NUM_FRACTION_DIGITS;return" translate("+y(-this.pathOffset.x,S)+", "+y(-this.pathOffset.y,S)+")"},toClipPathSVG:function(S){var T=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:S,additionalTransform:T})},toSVG:function(S){var T=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:S,additionalTransform:T})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var S=[],T=[],C,M=0,A=0,P=0,L=0,R,j=0,z=this.path.length;j<z;++j){switch(C=this.path[j],C[0]){case"L":P=C[1],L=C[2],R=[];break;case"M":P=C[1],L=C[2],M=P,A=L,R=[];break;case"C":R=h.util.getBoundsOfCurve(P,L,C[1],C[2],C[3],C[4],C[5],C[6]),P=C[5],L=C[6];break;case"Q":R=h.util.getBoundsOfCurve(P,L,C[1],C[2],C[1],C[2],C[3],C[4]),P=C[3],L=C[4];break;case"z":case"Z":P=M,L=A;break}R.forEach(function(ue){S.push(ue.x),T.push(ue.y)}),S.push(P),T.push(L)}var $=g(S)||0,Y=g(T)||0,ae=w(S)||0,K=w(T)||0,te=ae-$,G=K-Y;return{left:$,top:Y,width:te,height:G}}}),h.Path.fromObject=function(S,T){if(typeof S.sourcePath=="string"){var C=S.sourcePath;h.loadSVGFromURL(C,function(M){var A=M[0];A.setOptions(S),T&&T(A)})}else h.Object._fromObject("Path",S,T,"path")},h.Path.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(["d"]),h.Path.fromElement=function(S,T,C){var M=h.parseAttributes(S,h.Path.ATTRIBUTE_NAMES);M.fromSVG=!0,T(new h.Path(M.d,p(M,C)))}}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.array.min,w=h.util.array.max;h.Group||(h.Group=h.util.createClass(h.Object,h.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(p,v,y){v=v||{},this._objects=[],y&&this.callSuper("initialize",v),this._objects=p||[];for(var S=this._objects.length;S--;)this._objects[S].group=this;if(y)this._updateObjectsACoords();else{var T=v&&v.centerPoint;v.originX!==void 0&&(this.originX=v.originX),v.originY!==void 0&&(this.originY=v.originY),T||this._calcBounds(),this._updateObjectsCoords(T),delete v.centerPoint,this.callSuper("initialize",v)}this.setCoords()},_updateObjectsACoords:function(){for(var p=!0,v=this._objects.length;v--;)this._objects[v].setCoords(p)},_updateObjectsCoords:function(v){for(var v=v||this.getCenterPoint(),y=this._objects.length;y--;)this._updateObjectCoords(this._objects[y],v)},_updateObjectCoords:function(p,v){var y=p.left,S=p.top,T=!0;p.set({left:y-v.x,top:S-v.y}),p.group=this,p.setCoords(T)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(p){var v=!!this.group;return this._restoreObjectsState(),h.util.resetObjectTransform(this),p&&(v&&h.util.removeTransformFromObject(p,this.group.calcTransformMatrix()),this._objects.push(p),p.group=this,p._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,v?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(p){return this._restoreObjectsState(),h.util.resetObjectTransform(this),this.remove(p),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(p){this.dirty=!0,p.group=this,p._set("canvas",this.canvas)},_onObjectRemoved:function(p){this.dirty=!0,delete p.group},_set:function(p,v){var y=this._objects.length;if(this.useSetOnGroup)for(;y--;)this._objects[y].setOnGroup(p,v);if(p==="canvas")for(;y--;)this._objects[y]._set(p,v);h.Object.prototype._set.call(this,p,v)},toObject:function(p){var v=this.includeDefaultValues,y=this._objects.filter(function(T){return!T.excludeFromExport}).map(function(T){var C=T.includeDefaultValues;T.includeDefaultValues=v;var M=T.toObject(p);return T.includeDefaultValues=C,M}),S=h.Object.prototype.toObject.call(this,p);return S.objects=y,S},toDatalessObject:function(p){var v,y=this.sourcePath;if(y)v=y;else{var S=this.includeDefaultValues;v=this._objects.map(function(C){var M=C.includeDefaultValues;C.includeDefaultValues=S;var A=C.toDatalessObject(p);return C.includeDefaultValues=M,A})}var T=h.Object.prototype.toDatalessObject.call(this,p);return T.objects=v,T},render:function(p){this._transformDone=!0,this.callSuper("render",p),this._transformDone=!1},shouldCache:function(){var p=h.Object.prototype.shouldCache.call(this);if(p){for(var v=0,y=this._objects.length;v<y;v++)if(this._objects[v].willDrawShadow())return this.ownCaching=!1,!1}return p},willDrawShadow:function(){if(h.Object.prototype.willDrawShadow.call(this))return!0;for(var p=0,v=this._objects.length;p<v;p++)if(this._objects[p].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(p){for(var v=0,y=this._objects.length;v<y;v++)this._objects[v].render(p);this._drawClipPath(p)},isCacheDirty:function(p){if(this.callSuper("isCacheDirty",p))return!0;if(!this.statefullCache)return!1;for(var v=0,y=this._objects.length;v<y;v++)if(this._objects[v].isCacheDirty(!0)){if(this._cacheCanvas){var S=this.cacheWidth/this.zoomX,T=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-S/2,-T/2,S,T)}return!0}return!1},_restoreObjectsState:function(){var p=this.calcOwnMatrix();return this._objects.forEach(function(v){h.util.addTransformToObject(v,p),delete v.group,v.setCoords()}),this},realizeTransform:function(p,v){return h.util.addTransformToObject(p,v),p},destroy:function(){return this._objects.forEach(function(p){p.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var p=this._objects,v=this.canvas;this._objects=[];var y=this.toObject();delete y.objects;var S=new h.ActiveSelection([]);return S.set(y),S.type="activeSelection",v.remove(this),p.forEach(function(T){T.group=S,T.dirty=!0,v.add(T)}),S.canvas=v,S._objects=p,v._activeObject=S,S.setCoords(),S}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var p=!0;return this.forEachObject(function(v){v.setCoords(p)}),this},_calcBounds:function(p){for(var v=[],y=[],S,T,C,M=["tr","br","bl","tl"],A=0,P=this._objects.length,L,R=M.length;A<P;++A){for(S=this._objects[A],C=S.calcACoords(),L=0;L<R;L++)T=M[L],v.push(C[T].x),y.push(C[T].y);S.aCoords=C}this._getBounds(v,y,p)},_getBounds:function(p,v,y){var S=new h.Point(g(p),g(v)),T=new h.Point(w(p),w(v)),C=S.y||0,M=S.x||0,A=T.x-S.x||0,P=T.y-S.y||0;this.width=A,this.height=P,y||this.setPositionByOrigin({x:M,y:C},"left","top")},_toSVG:function(p){for(var v=["<g ","COMMON_PARTS",` >
`],y=0,S=this._objects.length;y<S;y++)v.push("		",this._objects[y].toSVG(p));return v.push(`</g>
`),v},getSvgStyles:function(){var p=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",v=this.visible?"":" visibility: hidden;";return[p,this.getSvgFilter(),v].join("")},toClipPathSVG:function(p){for(var v=[],y=0,S=this._objects.length;y<S;y++)v.push("	",this._objects[y].toClipPathSVG(p));return this._createBaseClipPathSVGMarkup(v,{reviver:p})}}),h.Group.fromObject=function(p,v){var y=p.objects,S=h.util.object.clone(p,!0);if(delete S.objects,typeof y=="string"){h.loadSVGFromURL(y,function(T){var C=h.util.groupSVGElements(T,p,y);C.set(S),v&&v(C)});return}h.util.enlivenObjects(y,function(T){h.util.enlivenObjects([p.clipPath],function(C){var M=h.util.object.clone(p,!0);M.clipPath=C[0],delete M.objects,v&&v(new h.Group(T,M,!0))})})})}(c),function(m){var h=m.fabric||(m.fabric={});h.ActiveSelection||(h.ActiveSelection=h.util.createClass(h.Group,{type:"activeSelection",initialize:function(g,w){w=w||{},this._objects=g||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;w.originX&&(this.originX=w.originX),w.originY&&(this.originY=w.originY),this._calcBounds(),this._updateObjectsCoords(),h.Object.prototype.initialize.call(this,w),this.setCoords()},toGroup:function(){var g=this._objects.concat();this._objects=[];var w=h.Object.prototype.toObject.call(this),p=new h.Group([]);if(delete w.type,p.set(w),g.forEach(function(y){y.canvas.remove(y),y.group=p}),p._objects=g,!this.canvas)return p;var v=this.canvas;return v.add(p),v._activeObject=p,p.setCoords(),p},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(g,w,p){g.save(),g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",g,w),p=p||{},typeof p.hasControls>"u"&&(p.hasControls=!1),p.forActiveSelection=!0;for(var v=0,y=this._objects.length;v<y;v++)this._objects[v]._renderControls(g,p);g.restore()}}),h.ActiveSelection.fromObject=function(g,w){h.util.enlivenObjects(g.objects,function(p){delete g.objects,w&&w(new h.ActiveSelection(p,g,!0))})})}(c),function(m){var h=d.util.object.extend;if(m.fabric||(m.fabric={}),m.fabric.Image){d.warn("fabric.Image is already defined.");return}d.Image=d.util.createClass(d.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:d.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:d.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(g,w){w||(w={}),this.filters=[],this.cacheKey="texture"+d.Object.__uid++,this.callSuper("initialize",w),this._initElement(g,w)},getElement:function(){return this._element||{}},setElement:function(g,w){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=g,this._originalElement=g,this._initConfig(w),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(g){var w=d.filterBackend;w&&w.evictCachesForKey&&w.evictCachesForKey(g)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(g){d.util.cleanUpJsdomNode(this[g]),this[g]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var g=this.getElement();return{width:g.naturalWidth||g.width,height:g.naturalHeight||g.height}},_stroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){var w=this.width/2,p=this.height/2;g.beginPath(),g.moveTo(-w,-p),g.lineTo(w,-p),g.lineTo(w,p),g.lineTo(-w,p),g.lineTo(-w,-p),g.closePath()}},toObject:function(g){var w=[];this.filters.forEach(function(v){v&&w.push(v.toObject())});var p=h(this.callSuper("toObject",["cropX","cropY"].concat(g)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:w});return this.resizeFilter&&(p.resizeFilter=this.resizeFilter.toObject()),p},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var g=[],w=[],p,v=this._element,y=-this.width/2,S=-this.height/2,T="",C="";if(!v)return[];if(this.hasCrop()){var M=d.Object.__uid++;g.push('<clipPath id="imageCrop_'+M+`">
`,'	<rect x="'+y+'" y="'+S+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),T=' clip-path="url(#imageCrop_'+M+')" '}if(this.imageSmoothing||(C='" image-rendering="optimizeSpeed'),w.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',y-this.cropX,'" y="',S-this.cropY,'" width="',v.width||v.naturalWidth,'" height="',v.height||v.height,C,'"',T,`></image>
`),this.stroke||this.strokeDashArray){var A=this.fill;this.fill=null,p=["	<rect ",'x="',y,'" y="',S,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=A}return this.paintFirst!=="fill"?g=g.concat(p,w):g=g.concat(w,p),g},getSrc:function(g){var w=g?this._element:this._originalElement;return w?w.toDataURL?w.toDataURL():this.srcFromAttribute?w.getAttribute("src"):w.src:this.src||""},setSrc:function(g,w,p){return d.util.loadImage(g,function(v,y){this.setElement(v,p),this._setWidthHeight(),w&&w(this,y)},this,p&&p.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var g=this.resizeFilter,w=this.minimumScaleTrigger,p=this.getTotalObjectScaling(),v=p.scaleX,y=p.scaleY,S=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!g||v>w&&y>w){this._element=S,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=v,this._lastScaleY=y;return}d.filterBackend||(d.filterBackend=d.initFilterBackend());var T=d.util.createCanvasElement(),C=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,M=S.width,A=S.height;T.width=M,T.height=A,this._element=T,this._lastScaleX=g.scaleX=v,this._lastScaleY=g.scaleY=y,d.filterBackend.applyFilters([g],S,M,A,this._element,C),this._filterScalingX=T.width/this._originalElement.width,this._filterScalingY=T.height/this._originalElement.height},applyFilters:function(g){if(g=g||this.filters||[],g=g.filter(function(S){return S&&!S.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),g.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var w=this._originalElement,p=w.naturalWidth||w.width,v=w.naturalHeight||w.height;if(this._element===this._originalElement){var y=d.util.createCanvasElement();y.width=p,y.height=v,this._element=y,this._filteredEl=y}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,p,v),this._lastScaleX=1,this._lastScaleY=1;return d.filterBackend||(d.filterBackend=d.initFilterBackend()),d.filterBackend.applyFilters(g,this._originalElement,p,v,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(g){d.util.setImageSmoothing(g,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(g),this._renderPaintInOrder(g)},drawCacheOnCanvas:function(g){d.util.setImageSmoothing(g,this.imageSmoothing),d.Object.prototype.drawCacheOnCanvas.call(this,g)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(g){var w=this._element;if(w){var p=this._filterScalingX,v=this._filterScalingY,y=this.width,S=this.height,T=Math.min,C=Math.max,M=C(this.cropX,0),A=C(this.cropY,0),P=w.naturalWidth||w.width,L=w.naturalHeight||w.height,R=M*p,j=A*v,z=T(y*p,P-R),$=T(S*v,L-j),Y=-y/2,ae=-S/2,K=T(y,P/p-M),te=T(S,L/v-A);w&&g.drawImage(w,R,j,z,$,Y,ae,K,te)}},_needsResize:function(){var g=this.getTotalObjectScaling();return g.scaleX!==this._lastScaleX||g.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(g,w){this.setElement(d.util.getById(g),w),d.util.addClass(this.getElement(),d.Image.CSS_CANVAS)},_initConfig:function(g){g||(g={}),this.setOptions(g),this._setWidthHeight(g)},_initFilters:function(g,w){g&&g.length?d.util.enlivenObjects(g,function(p){w&&w(p)},"fabric.Image.filters"):w&&w()},_setWidthHeight:function(g){g||(g={});var w=this.getElement();this.width=g.width||w.naturalWidth||w.width||0,this.height=g.height||w.naturalHeight||w.height||0},parsePreserveAspectRatioAttribute:function(){var g=d.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),w=this._element.width,p=this._element.height,v=1,y=1,S=0,T=0,C=0,M=0,A,P=this.width,L=this.height,R={width:P,height:L};return g&&(g.alignX!=="none"||g.alignY!=="none")?(g.meetOrSlice==="meet"&&(v=y=d.util.findScaleToFit(this._element,R),A=(P-w*v)/2,g.alignX==="Min"&&(S=-A),g.alignX==="Max"&&(S=A),A=(L-p*y)/2,g.alignY==="Min"&&(T=-A),g.alignY==="Max"&&(T=A)),g.meetOrSlice==="slice"&&(v=y=d.util.findScaleToCover(this._element,R),A=w-P/v,g.alignX==="Mid"&&(C=A/2),g.alignX==="Max"&&(C=A),A=p-L/y,g.alignY==="Mid"&&(M=A/2),g.alignY==="Max"&&(M=A),w=P/v,p=L/y)):(v=P/w,y=L/p),{width:w,height:p,scaleX:v,scaleY:y,offsetLeft:S,offsetTop:T,cropX:C,cropY:M}}}),d.Image.CSS_CANVAS="canvas-img",d.Image.prototype.getSvgSrc=d.Image.prototype.getSrc,d.Image.fromObject=function(g,w){var p=d.util.object.clone(g);d.util.loadImage(p.src,function(v,y){if(y){w&&w(null,!0);return}d.Image.prototype._initFilters.call(p,p.filters,function(S){p.filters=S||[],d.Image.prototype._initFilters.call(p,[p.resizeFilter],function(T){p.resizeFilter=T[0],d.util.enlivenObjects([p.clipPath],function(C){p.clipPath=C[0];var M=new d.Image(v,p);w(M,!1)})})})},null,p.crossOrigin)},d.Image.fromURL=function(g,w,p){d.util.loadImage(g,function(v,y){w&&w(new d.Image(v,p),y)},null,p&&p.crossOrigin)},d.Image.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),d.Image.fromElement=function(g,w,p){var v=d.parseAttributes(g,d.Image.ATTRIBUTE_NAMES);d.Image.fromURL(v["xlink:href"],w,h(p?d.util.object.clone(p):{},v))}}(c),d.util.object.extend(d.Object.prototype,{_getAngleValueForStraighten:function(){var m=this.angle%360;return m>0?Math.round((m-1)/90)*90:Math.round(m/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(m){m=m||{};var h=function(){},g=m.onComplete||h,w=m.onChange||h,p=this;return d.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(v){p.rotate(v),w()},onComplete:function(){p.setCoords(),g()}}),this}}),d.util.object.extend(d.StaticCanvas.prototype,{straightenObject:function(m){return m.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(m){return m.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function m(g,w){var p="precision "+w+` float;
void main(){}`,v=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(v,p),g.compileShader(v),!!g.getShaderParameter(v,g.COMPILE_STATUS)}d.isWebglSupported=function(g){if(d.isLikelyNode)return!1;g=g||d.WebglFilterBackend.prototype.tileSize;var w=document.createElement("canvas"),p=w.getContext("webgl")||w.getContext("experimental-webgl"),v=!1;if(p){d.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE),v=d.maxTextureSize>=g;for(var y=["highp","mediump","lowp"],S=0;S<3;S++)if(m(p,y[S])){d.webGlPrecision=y[S];break}}return this.isSupported=v,v},d.WebglFilterBackend=h;function h(g){g&&g.tileSize&&(this.tileSize=g.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}h.prototype={tileSize:2048,resources:{},setupGLContext:function(g,w){this.dispose(),this.createWebGLCanvas(g,w),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(g,w)},chooseFastestCopyGLTo2DMethod:function(g,w){var p=typeof window.performance<"u",v;try{new ImageData(1,1),v=!0}catch{v=!1}var y=typeof ArrayBuffer<"u",S=typeof Uint8ClampedArray<"u";if(p&&v&&y&&S){var T=d.util.createCanvasElement(),C=new ArrayBuffer(g*w*4);if(d.forceGLPutImageData){this.imageBuffer=C,this.copyGLTo2D=E;return}var M={imageBuffer:C,destinationWidth:g,destinationHeight:w,targetCanvas:T},A,P,L;T.width=g,T.height=w,A=window.performance.now(),k.call(M,this.gl,M),P=window.performance.now()-A,A=window.performance.now(),E.call(M,this.gl,M),L=window.performance.now()-A,P>L?(this.imageBuffer=C,this.copyGLTo2D=E):this.copyGLTo2D=k}},createWebGLCanvas:function(g,w){var p=d.util.createCanvasElement();p.width=g,p.height=w;var v={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},y=p.getContext("webgl",v);y||(y=p.getContext("experimental-webgl",v)),y&&(y.clearColor(0,0,0,0),this.canvas=p,this.gl=y)},applyFilters:function(g,w,p,v,y,S){var T=this.gl,C;S&&(C=this.getCachedTexture(S,w));var M={originalWidth:w.width||w.originalWidth,originalHeight:w.height||w.originalHeight,sourceWidth:p,sourceHeight:v,destinationWidth:p,destinationHeight:v,context:T,sourceTexture:this.createTexture(T,p,v,!C&&w),targetTexture:this.createTexture(T,p,v),originalTexture:C||this.createTexture(T,p,v,!C&&w),passes:g.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:y},A=T.createFramebuffer();return T.bindFramebuffer(T.FRAMEBUFFER,A),g.forEach(function(P){P&&P.applyTo(M)}),x(M),this.copyGLTo2D(T,M),T.bindTexture(T.TEXTURE_2D,null),T.deleteTexture(M.sourceTexture),T.deleteTexture(M.targetTexture),T.deleteFramebuffer(A),y.getContext("2d").setTransform(1,0,0,1,0,0),M},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(g,w,p,v){var y=g.createTexture();return g.bindTexture(g.TEXTURE_2D,y),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),v?g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,v):g.texImage2D(g.TEXTURE_2D,0,g.RGBA,w,p,0,g.RGBA,g.UNSIGNED_BYTE,null),y},getCachedTexture:function(g,w){if(this.textureCache[g])return this.textureCache[g];var p=this.createTexture(this.gl,w.width,w.height,w);return this.textureCache[g]=p,p},evictCachesForKey:function(g){this.textureCache[g]&&(this.gl.deleteTexture(this.textureCache[g]),delete this.textureCache[g])},copyGLTo2D:k,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var g=this.gl,w={renderer:"",vendor:""};if(!g)return w;var p=g.getExtension("WEBGL_debug_renderer_info");if(p){var v=g.getParameter(p.UNMASKED_RENDERER_WEBGL),y=g.getParameter(p.UNMASKED_VENDOR_WEBGL);v&&(w.renderer=v.toLowerCase()),y&&(w.vendor=y.toLowerCase())}return this.gpuInfo=w,w}}}();function x(m){var h=m.targetCanvas,g=h.width,w=h.height,p=m.destinationWidth,v=m.destinationHeight;(g!==p||w!==v)&&(h.width=p,h.height=v)}function k(m,h){var g=m.canvas,w=h.targetCanvas,p=w.getContext("2d");p.translate(0,w.height),p.scale(1,-1);var v=g.height-w.height;p.drawImage(g,0,v,w.width,w.height,0,0,w.width,w.height)}function E(m,h){var g=h.targetCanvas,w=g.getContext("2d"),p=h.destinationWidth,v=h.destinationHeight,y=p*v*4,S=new Uint8Array(this.imageBuffer,0,y),T=new Uint8ClampedArray(this.imageBuffer,0,y);m.readPixels(0,0,p,v,m.RGBA,m.UNSIGNED_BYTE,S);var C=new ImageData(T,p,v);w.putImageData(C,0,0)}(function(){var m=function(){};d.Canvas2dFilterBackend=h;function h(){}h.prototype={evictCachesForKey:m,dispose:m,clearWebGLCaches:m,resources:{},applyFilters:function(g,w,p,v,y){var S=y.getContext("2d");S.drawImage(w,0,0,p,v);var T=S.getImageData(0,0,p,v),C=S.getImageData(0,0,p,v),M={sourceWidth:p,sourceHeight:v,imageData:T,originalEl:w,originalImageData:C,canvasEl:y,ctx:S,filterBackend:this};return g.forEach(function(A){A.applyTo(M)}),(M.imageData.width!==p||M.imageData.height!==v)&&(y.width=M.imageData.width,y.height=M.imageData.height),S.putImageData(M.imageData,0,0),M}}})(),d.Image=d.Image||{},d.Image.filters=d.Image.filters||{},d.Image.filters.BaseFilter=d.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(m){m&&this.setOptions(m)},setOptions:function(m){for(var h in m)this[h]=m[h]},createProgram:function(m,h,g){h=h||this.fragmentSource,g=g||this.vertexSource,d.webGlPrecision!=="highp"&&(h=h.replace(/precision highp float/g,"precision "+d.webGlPrecision+" float"));var w=m.createShader(m.VERTEX_SHADER);if(m.shaderSource(w,g),m.compileShader(w),!m.getShaderParameter(w,m.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+m.getShaderInfoLog(w));var p=m.createShader(m.FRAGMENT_SHADER);if(m.shaderSource(p,h),m.compileShader(p),!m.getShaderParameter(p,m.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+m.getShaderInfoLog(p));var v=m.createProgram();if(m.attachShader(v,w),m.attachShader(v,p),m.linkProgram(v),!m.getProgramParameter(v,m.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+m.getProgramInfoLog(v));var y=this.getAttributeLocations(m,v),S=this.getUniformLocations(m,v)||{};return S.uStepW=m.getUniformLocation(v,"uStepW"),S.uStepH=m.getUniformLocation(v,"uStepH"),{program:v,attributeLocations:y,uniformLocations:S}},getAttributeLocations:function(m,h){return{aPosition:m.getAttribLocation(h,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(m,h,g){var w=h.aPosition,p=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,p),m.enableVertexAttribArray(w),m.vertexAttribPointer(w,2,m.FLOAT,!1,0,0),m.bufferData(m.ARRAY_BUFFER,g,m.STATIC_DRAW)},_setupFrameBuffer:function(m){var h=m.context,g,w;m.passes>1?(g=m.destinationWidth,w=m.destinationHeight,(m.sourceWidth!==g||m.sourceHeight!==w)&&(h.deleteTexture(m.targetTexture),m.targetTexture=m.filterBackend.createTexture(h,g,w)),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,m.targetTexture,0)):(h.bindFramebuffer(h.FRAMEBUFFER,null),h.finish())},_swapTextures:function(m){m.passes--,m.pass++;var h=m.targetTexture;m.targetTexture=m.sourceTexture,m.sourceTexture=h},isNeutralState:function(){var m=this.mainParameter,h=d.Image.filters[this.type].prototype;if(m)if(Array.isArray(h[m])){for(var g=h[m].length;g--;)if(this[m][g]!==h[m][g])return!1;return!0}else return h[m]===this[m];else return!1},applyTo:function(m){m.webgl?(this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m)):this.applyTo2d(m)},retrieveShader:function(m){return m.programCache.hasOwnProperty(this.type)||(m.programCache[this.type]=this.createProgram(m.context)),m.programCache[this.type]},applyToWebGL:function(m){var h=m.context,g=this.retrieveShader(m);m.pass===0&&m.originalTexture?h.bindTexture(h.TEXTURE_2D,m.originalTexture):h.bindTexture(h.TEXTURE_2D,m.sourceTexture),h.useProgram(g.program),this.sendAttributeData(h,g.attributeLocations,m.aPosition),h.uniform1f(g.uniformLocations.uStepW,1/m.sourceWidth),h.uniform1f(g.uniformLocations.uStepH,1/m.sourceHeight),this.sendUniformData(h,g.uniformLocations),h.viewport(0,0,m.destinationWidth,m.destinationHeight),h.drawArrays(h.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(m,h,g){m.activeTexture(g),m.bindTexture(m.TEXTURE_2D,h),m.activeTexture(m.TEXTURE0)},unbindAdditionalTexture:function(m,h){m.activeTexture(h),m.bindTexture(m.TEXTURE_2D,null),m.activeTexture(m.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(m){this[this.mainParameter]=m},sendUniformData:function(){},createHelpLayer:function(m){if(!m.helpLayer){var h=document.createElement("canvas");h.width=m.sourceWidth,h.height=m.sourceHeight,m.helpLayer=h}},toObject:function(){var m={type:this.type},h=this.mainParameter;return h&&(m[h]=this[h]),m},toJSON:function(){return this.toObject()}}),d.Image.filters.BaseFilter.fromObject=function(m,h){var g=new d.Image.filters[m.type](m);return h&&h(g),g},function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.ColorMatrix=w(g.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(p){this.callSuper("initialize",p),this.matrix=this.matrix.slice(0)},applyTo2d:function(p){var v=p.imageData,y=v.data,S=y.length,T=this.matrix,C,M,A,P,L,R=this.colorsOnly;for(L=0;L<S;L+=4)C=y[L],M=y[L+1],A=y[L+2],R?(y[L]=C*T[0]+M*T[1]+A*T[2]+T[4]*255,y[L+1]=C*T[5]+M*T[6]+A*T[7]+T[9]*255,y[L+2]=C*T[10]+M*T[11]+A*T[12]+T[14]*255):(P=y[L+3],y[L]=C*T[0]+M*T[1]+A*T[2]+P*T[3]+T[4]*255,y[L+1]=C*T[5]+M*T[6]+A*T[7]+P*T[8]+T[9]*255,y[L+2]=C*T[10]+M*T[11]+A*T[12]+P*T[13]+T[14]*255,y[L+3]=C*T[15]+M*T[16]+A*T[17]+P*T[18]+T[19]*255)},getUniformLocations:function(p,v){return{uColorMatrix:p.getUniformLocation(v,"uColorMatrix"),uConstants:p.getUniformLocation(v,"uConstants")}},sendUniformData:function(p,v){var y=this.matrix,S=[y[0],y[1],y[2],y[3],y[5],y[6],y[7],y[8],y[10],y[11],y[12],y[13],y[15],y[16],y[17],y[18]],T=[y[4],y[9],y[14],y[19]];p.uniformMatrix4fv(v.uColorMatrix,!1,S),p.uniform4fv(v.uConstants,T)}}),h.Image.filters.ColorMatrix.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Brightness=w(g.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(p){if(this.brightness!==0){var v=p.imageData,y=v.data,S,T=y.length,C=Math.round(this.brightness*255);for(S=0;S<T;S+=4)y[S]=y[S]+C,y[S+1]=y[S+1]+C,y[S+2]=y[S+2]+C}},getUniformLocations:function(p,v){return{uBrightness:p.getUniformLocation(v,"uBrightness")}},sendUniformData:function(p,v){p.uniform1f(v.uBrightness,this.brightness)}}),h.Image.filters.Brightness.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.Image.filters,p=h.util.createClass;w.Convolute=p(w.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(v){var y=Math.sqrt(this.matrix.length),S=this.type+"_"+y+"_"+(this.opaque?1:0),T=this.fragmentSource[S];return v.programCache.hasOwnProperty(S)||(v.programCache[S]=this.createProgram(v.context,T)),v.programCache[S]},applyTo2d:function(v){var y=v.imageData,S=y.data,T=this.matrix,C=Math.round(Math.sqrt(T.length)),M=Math.floor(C/2),A=y.width,P=y.height,L=v.ctx.createImageData(A,P),R=L.data,j=this.opaque?1:0,z,$,Y,ae,K,te,G,ue,J,be,de,ce,V;for(de=0;de<P;de++)for(be=0;be<A;be++){for(K=(de*A+be)*4,z=0,$=0,Y=0,ae=0,V=0;V<C;V++)for(ce=0;ce<C;ce++)G=de+V-M,te=be+ce-M,!(G<0||G>=P||te<0||te>=A)&&(ue=(G*A+te)*4,J=T[V*C+ce],z+=S[ue]*J,$+=S[ue+1]*J,Y+=S[ue+2]*J,j||(ae+=S[ue+3]*J));R[K]=z,R[K+1]=$,R[K+2]=Y,j?R[K+3]=S[K+3]:R[K+3]=ae}v.imageData=L},getUniformLocations:function(v,y){return{uMatrix:v.getUniformLocation(y,"uMatrix"),uOpaque:v.getUniformLocation(y,"uOpaque"),uHalfSize:v.getUniformLocation(y,"uHalfSize"),uSize:v.getUniformLocation(y,"uSize")}},sendUniformData:function(v,y){v.uniform1fv(y.uMatrix,this.matrix)},toObject:function(){return g(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),h.Image.filters.Convolute.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Grayscale=w(g.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(p){var v=p.imageData,y=v.data,S,T=y.length,C,M=this.mode;for(S=0;S<T;S+=4)M==="average"?C=(y[S]+y[S+1]+y[S+2])/3:M==="lightness"?C=(Math.min(y[S],y[S+1],y[S+2])+Math.max(y[S],y[S+1],y[S+2]))/2:M==="luminosity"&&(C=.21*y[S]+.72*y[S+1]+.07*y[S+2]),y[S]=C,y[S+1]=C,y[S+2]=C},retrieveShader:function(p){var v=this.type+"_"+this.mode;if(!p.programCache.hasOwnProperty(v)){var y=this.fragmentSource[this.mode];p.programCache[v]=this.createProgram(p.context,y)}return p.programCache[v]},getUniformLocations:function(p,v){return{uMode:p.getUniformLocation(v,"uMode")}},sendUniformData:function(p,v){var y=1;p.uniform1i(v.uMode,y)},isNeutralState:function(){return!1}}),h.Image.filters.Grayscale.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Invert=w(g.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(p){var v=p.imageData,y=v.data,S,T=y.length;for(S=0;S<T;S+=4)y[S]=255-y[S],y[S+1]=255-y[S+1],y[S+2]=255-y[S+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(p,v){return{uInvert:p.getUniformLocation(v,"uInvert")}},sendUniformData:function(p,v){p.uniform1i(v.uInvert,this.invert)}}),h.Image.filters.Invert.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.Image.filters,p=h.util.createClass;w.Noise=p(w.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(v){if(this.noise!==0){var y=v.imageData,S=y.data,T,C=S.length,M=this.noise,A;for(T=0,C=S.length;T<C;T+=4)A=(.5-Math.random())*M,S[T]+=A,S[T+1]+=A,S[T+2]+=A}},getUniformLocations:function(v,y){return{uNoise:v.getUniformLocation(y,"uNoise"),uSeed:v.getUniformLocation(y,"uSeed")}},sendUniformData:function(v,y){v.uniform1f(y.uNoise,this.noise/255),v.uniform1f(y.uSeed,Math.random())},toObject:function(){return g(this.callSuper("toObject"),{noise:this.noise})}}),h.Image.filters.Noise.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Pixelate=w(g.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(p){var v=p.imageData,y=v.data,S=v.height,T=v.width,C,M,A,P,L,R,j,z,$,Y,ae;for(M=0;M<S;M+=this.blocksize)for(A=0;A<T;A+=this.blocksize)for(C=M*4*T+A*4,P=y[C],L=y[C+1],R=y[C+2],j=y[C+3],Y=Math.min(M+this.blocksize,S),ae=Math.min(A+this.blocksize,T),z=M;z<Y;z++)for($=A;$<ae;$++)C=z*4*T+$*4,y[C]=P,y[C+1]=L,y[C+2]=R,y[C+3]=j},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(p,v){return{uBlocksize:p.getUniformLocation(v,"uBlocksize"),uStepW:p.getUniformLocation(v,"uStepW"),uStepH:p.getUniformLocation(v,"uStepH")}},sendUniformData:function(p,v){p.uniform1f(v.uBlocksize,this.blocksize)}}),h.Image.filters.Pixelate.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.extend,w=h.Image.filters,p=h.util.createClass;w.RemoveColor=p(w.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(v){var y=v.imageData,S=y.data,T,C=this.distance*255,M,A,P,L=new h.Color(this.color).getSource(),R=[L[0]-C,L[1]-C,L[2]-C],j=[L[0]+C,L[1]+C,L[2]+C];for(T=0;T<S.length;T+=4)M=S[T],A=S[T+1],P=S[T+2],M>R[0]&&A>R[1]&&P>R[2]&&M<j[0]&&A<j[1]&&P<j[2]&&(S[T+3]=0)},getUniformLocations:function(v,y){return{uLow:v.getUniformLocation(y,"uLow"),uHigh:v.getUniformLocation(y,"uHigh")}},sendUniformData:function(v,y){var S=new h.Color(this.color).getSource(),T=parseFloat(this.distance),C=[0+S[0]/255-T,0+S[1]/255-T,0+S[2]/255-T,1],M=[S[0]/255+T,S[1]/255+T,S[2]/255+T,1];v.uniform4fv(y.uLow,C),v.uniform4fv(y.uHigh,M)},toObject:function(){return g(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),h.Image.filters.RemoveColor.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass,p={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var v in p)g[v]=w(g.ColorMatrix,{type:v,matrix:p[v],mainParameter:!1,colorsOnly:!0}),h.Image.filters[v].fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric,g=h.Image.filters,w=h.util.createClass;g.BlendColor=w(g.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(p){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[p]+`}
}`},retrieveShader:function(p){var v=this.type+"_"+this.mode,y;return p.programCache.hasOwnProperty(v)||(y=this.buildSource(this.mode),p.programCache[v]=this.createProgram(p.context,y)),p.programCache[v]},applyTo2d:function(p){var v=p.imageData,y=v.data,S=y.length,T,C,M,A,P,L,R,j=1-this.alpha;R=new h.Color(this.color).getSource(),T=R[0]*this.alpha,C=R[1]*this.alpha,M=R[2]*this.alpha;for(var z=0;z<S;z+=4)switch(A=y[z],P=y[z+1],L=y[z+2],this.mode){case"multiply":y[z]=A*T/255,y[z+1]=P*C/255,y[z+2]=L*M/255;break;case"screen":y[z]=255-(255-A)*(255-T)/255,y[z+1]=255-(255-P)*(255-C)/255,y[z+2]=255-(255-L)*(255-M)/255;break;case"add":y[z]=A+T,y[z+1]=P+C,y[z+2]=L+M;break;case"diff":case"difference":y[z]=Math.abs(A-T),y[z+1]=Math.abs(P-C),y[z+2]=Math.abs(L-M);break;case"subtract":y[z]=A-T,y[z+1]=P-C,y[z+2]=L-M;break;case"darken":y[z]=Math.min(A,T),y[z+1]=Math.min(P,C),y[z+2]=Math.min(L,M);break;case"lighten":y[z]=Math.max(A,T),y[z+1]=Math.max(P,C),y[z+2]=Math.max(L,M);break;case"overlay":y[z]=T<128?2*A*T/255:255-2*(255-A)*(255-T)/255,y[z+1]=C<128?2*P*C/255:255-2*(255-P)*(255-C)/255,y[z+2]=M<128?2*L*M/255:255-2*(255-L)*(255-M)/255;break;case"exclusion":y[z]=T+A-2*T*A/255,y[z+1]=C+P-2*C*P/255,y[z+2]=M+L-2*M*L/255;break;case"tint":y[z]=T+A*j,y[z+1]=C+P*j,y[z+2]=M+L*j}},getUniformLocations:function(p,v){return{uColor:p.getUniformLocation(v,"uColor")}},sendUniformData:function(p,v){var y=new h.Color(this.color).getSource();y[0]=this.alpha*y[0]/255,y[1]=this.alpha*y[1]/255,y[2]=this.alpha*y[2]/255,y[3]=this.alpha,p.uniform4fv(v.uColor,y)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendColor.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric,g=h.Image.filters,w=h.util.createClass;g.BlendImage=w(g.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(p){var v=this.type+"_"+this.mode,y=this.fragmentSource[this.mode];return p.programCache.hasOwnProperty(v)||(p.programCache[v]=this.createProgram(p.context,y)),p.programCache[v]},applyToWebGL:function(p){var v=p.context,y=this.createTexture(p.filterBackend,this.image);this.bindAdditionalTexture(v,y,v.TEXTURE1),this.callSuper("applyToWebGL",p),this.unbindAdditionalTexture(v,v.TEXTURE1)},createTexture:function(p,v){return p.getCachedTexture(v.cacheKey,v._element)},calculateMatrix:function(){var p=this.image,v=p._element.width,y=p._element.height;return[1/p.scaleX,0,0,0,1/p.scaleY,0,-p.left/v,-p.top/y,1]},applyTo2d:function(p){var v=p.imageData,y=p.filterBackend.resources,S=v.data,T=S.length,C=v.width,M=v.height,A,P,L,R,j,z,$,Y,ae,K,te=this.image,G;y.blendImage||(y.blendImage=h.util.createCanvasElement()),ae=y.blendImage,K=ae.getContext("2d"),ae.width!==C||ae.height!==M?(ae.width=C,ae.height=M):K.clearRect(0,0,C,M),K.setTransform(te.scaleX,0,0,te.scaleY,te.left,te.top),K.drawImage(te._element,0,0,C,M),G=K.getImageData(0,0,C,M).data;for(var ue=0;ue<T;ue+=4)switch(j=S[ue],z=S[ue+1],$=S[ue+2],Y=S[ue+3],A=G[ue],P=G[ue+1],L=G[ue+2],R=G[ue+3],this.mode){case"multiply":S[ue]=j*A/255,S[ue+1]=z*P/255,S[ue+2]=$*L/255,S[ue+3]=Y*R/255;break;case"mask":S[ue+3]=R;break}},getUniformLocations:function(p,v){return{uTransformMatrix:p.getUniformLocation(v,"uTransformMatrix"),uImage:p.getUniformLocation(v,"uImage")}},sendUniformData:function(p,v){var y=this.calculateMatrix();p.uniform1i(v.uImage,1),p.uniformMatrix3fv(v.uTransformMatrix,!1,y)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendImage.fromObject=function(p,v){h.Image.fromObject(p.image,function(y){var S=h.util.object.clone(p);S.image=y,v(new h.Image.filters.BlendImage(S))})}}(c),function(m){var h=m.fabric||(m.fabric={}),g=Math.pow,w=Math.floor,p=Math.sqrt,v=Math.abs,y=Math.round,S=Math.sin,T=Math.ceil,C=h.Image.filters,M=h.util.createClass;C.Resize=M(C.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(A,P){return{uDelta:A.getUniformLocation(P,"uDelta"),uTaps:A.getUniformLocation(P,"uTaps")}},sendUniformData:function(A,P){A.uniform2fv(P.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),A.uniform1fv(P.uTaps,this.taps)},retrieveShader:function(A){var P=this.getFilterWindow(),L=this.type+"_"+P;if(!A.programCache.hasOwnProperty(L)){var R=this.generateShader(P);A.programCache[L]=this.createProgram(A.context,R)}return A.programCache[L]},getFilterWindow:function(){var A=this.tempScale;return Math.ceil(this.lanczosLobes/A)},getTaps:function(){for(var A=this.lanczosCreate(this.lanczosLobes),P=this.tempScale,L=this.getFilterWindow(),R=new Array(L),j=1;j<=L;j++)R[j-1]=A(j*P);return R},generateShader:function(R){for(var P=new Array(R),L=this.fragmentSourceTOP,R,j=1;j<=R;j++)P[j-1]=j+".0 * uDelta";return L+="uniform float uTaps["+R+`];
`,L+=`void main() {
`,L+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,L+=`  float sum = 1.0;
`,P.forEach(function(z,$){L+="  color += texture2D(uTexture, vTexCoord + "+z+") * uTaps["+$+`];
`,L+="  color += texture2D(uTexture, vTexCoord - "+z+") * uTaps["+$+`];
`,L+="  sum += 2.0 * uTaps["+$+`];
`}),L+=`  gl_FragColor = color / sum;
`,L+="}",L},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(A){A.webgl?(A.passes++,this.width=A.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=A.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),A.destinationWidth=this.dW,this._setupFrameBuffer(A),this.applyToWebGL(A),this._swapTextures(A),A.sourceWidth=A.destinationWidth,this.height=A.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),A.destinationHeight=this.dH,this._setupFrameBuffer(A),this.applyToWebGL(A),this._swapTextures(A),A.sourceHeight=A.destinationHeight):this.applyTo2d(A)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(A){return function(P){if(P>=A||P<=-A)return 0;if(P<11920929e-14&&P>-11920929e-14)return 1;P*=Math.PI;var L=P/A;return S(P)/P*S(L)/L}},applyTo2d:function(A){var P=A.imageData,L=this.scaleX,R=this.scaleY;this.rcpScaleX=1/L,this.rcpScaleY=1/R;var j=P.width,z=P.height,$=y(j*L),Y=y(z*R),ae;this.resizeType==="sliceHack"?ae=this.sliceByTwo(A,j,z,$,Y):this.resizeType==="hermite"?ae=this.hermiteFastResize(A,j,z,$,Y):this.resizeType==="bilinear"?ae=this.bilinearFiltering(A,j,z,$,Y):this.resizeType==="lanczos"&&(ae=this.lanczosResize(A,j,z,$,Y)),A.imageData=ae},sliceByTwo:function(A,P,L,R,j){var z=A.imageData,$=.5,Y=!1,ae=!1,K=P*$,te=L*$,G=h.filterBackend.resources,ue,J,be=0,de=0,ce=P,V=0;for(G.sliceByTwo||(G.sliceByTwo=document.createElement("canvas")),ue=G.sliceByTwo,(ue.width<P*1.5||ue.height<L)&&(ue.width=P*1.5,ue.height=L),J=ue.getContext("2d"),J.clearRect(0,0,P*1.5,L),J.putImageData(z,0,0),R=w(R),j=w(j);!Y||!ae;)P=K,L=te,R<w(K*$)?K=w(K*$):(K=R,Y=!0),j<w(te*$)?te=w(te*$):(te=j,ae=!0),J.drawImage(ue,be,de,P,L,ce,V,K,te),be=ce,de=V,V+=te;return J.getImageData(be,de,R,j)},lanczosResize:function(A,P,L,R,j){function z(Q){var Z,he,X,re,le,fe,ke,q,ie,we,Me;for(V.x=(Q+.5)*te,ne.x=w(V.x),Z=0;Z<j;Z++){for(V.y=(Z+.5)*G,ne.y=w(V.y),le=0,fe=0,ke=0,q=0,ie=0,he=ne.x-be;he<=ne.x+be;he++)if(!(he<0||he>=P)){we=w(1e3*v(he-V.x)),ce[we]||(ce[we]={});for(var xe=ne.y-de;xe<=ne.y+de;xe++)xe<0||xe>=L||(Me=w(1e3*v(xe-V.y)),ce[we][Me]||(ce[we][Me]=K(p(g(we*ue,2)+g(Me*J,2))/1e3)),X=ce[we][Me],X>0&&(re=(xe*P+he)*4,le+=X,fe+=X*$[re],ke+=X*$[re+1],q+=X*$[re+2],ie+=X*$[re+3]))}re=(Z*R+Q)*4,ae[re]=fe/le,ae[re+1]=ke/le,ae[re+2]=q/le,ae[re+3]=ie/le}return++Q<R?z(Q):Y}var $=A.imageData.data,Y=A.ctx.createImageData(R,j),ae=Y.data,K=this.lanczosCreate(this.lanczosLobes),te=this.rcpScaleX,G=this.rcpScaleY,ue=2/this.rcpScaleX,J=2/this.rcpScaleY,be=T(te*this.lanczosLobes/2),de=T(G*this.lanczosLobes/2),ce={},V={},ne={};return z(0)},bilinearFiltering:function(A,P,L,R,j){var z,$,Y,ae,K,te,G,ue,J,be,de,ce,V=0,ne,Q=this.rcpScaleX,Z=this.rcpScaleY,he=4*(P-1),X=A.imageData,re=X.data,le=A.ctx.createImageData(R,j),fe=le.data;for(G=0;G<j;G++)for(ue=0;ue<R;ue++)for(K=w(Q*ue),te=w(Z*G),J=Q*ue-K,be=Z*G-te,ne=4*(te*P+K),de=0;de<4;de++)z=re[ne+de],$=re[ne+4+de],Y=re[ne+he+de],ae=re[ne+he+4+de],ce=z*(1-J)*(1-be)+$*J*(1-be)+Y*be*(1-J)+ae*J*be,fe[V++]=ce;return le},hermiteFastResize:function(A,P,L,R,j){for(var z=this.rcpScaleX,$=this.rcpScaleY,Y=T(z/2),ae=T($/2),K=A.imageData,te=K.data,G=A.ctx.createImageData(R,j),ue=G.data,J=0;J<j;J++)for(var be=0;be<R;be++){for(var de=(be+J*R)*4,ce=0,V=0,ne=0,Q=0,Z=0,he=0,X=0,re=(J+.5)*$,le=w(J*$);le<(J+1)*$;le++)for(var fe=v(re-(le+.5))/ae,ke=(be+.5)*z,q=fe*fe,ie=w(be*z);ie<(be+1)*z;ie++){var we=v(ke-(ie+.5))/Y,Me=p(q+we*we);Me>1&&Me<-1||(ce=2*Me*Me*Me-3*Me*Me+1,ce>0&&(we=4*(ie+le*P),X+=ce*te[we+3],ne+=ce,te[we+3]<255&&(ce=ce*te[we+3]/250),Q+=ce*te[we],Z+=ce*te[we+1],he+=ce*te[we+2],V+=ce))}ue[de]=Q/V,ue[de+1]=Z/V,ue[de+2]=he/V,ue[de+3]=X/ne}return G},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),h.Image.filters.Resize.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Contrast=w(g.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(p){if(this.contrast!==0){var v=p.imageData,y,T,S=v.data,T=S.length,C=Math.floor(this.contrast*255),M=259*(C+255)/(255*(259-C));for(y=0;y<T;y+=4)S[y]=M*(S[y]-128)+128,S[y+1]=M*(S[y+1]-128)+128,S[y+2]=M*(S[y+2]-128)+128}},getUniformLocations:function(p,v){return{uContrast:p.getUniformLocation(v,"uContrast")}},sendUniformData:function(p,v){p.uniform1f(v.uContrast,this.contrast)}}),h.Image.filters.Contrast.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Saturation=w(g.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(p){if(this.saturation!==0){var v=p.imageData,y=v.data,S=y.length,T=-this.saturation,C,M;for(C=0;C<S;C+=4)M=Math.max(y[C],y[C+1],y[C+2]),y[C]+=M!==y[C]?(M-y[C])*T:0,y[C+1]+=M!==y[C+1]?(M-y[C+1])*T:0,y[C+2]+=M!==y[C+2]?(M-y[C+2])*T:0}},getUniformLocations:function(p,v){return{uSaturation:p.getUniformLocation(v,"uSaturation")}},sendUniformData:function(p,v){p.uniform1f(v.uSaturation,-this.saturation)}}),h.Image.filters.Saturation.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Vibrance=w(g.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(p){if(this.vibrance!==0){var v=p.imageData,y=v.data,S=y.length,T=-this.vibrance,C,M,A,P;for(C=0;C<S;C+=4)M=Math.max(y[C],y[C+1],y[C+2]),A=(y[C]+y[C+1]+y[C+2])/3,P=Math.abs(M-A)*2/255*T,y[C]+=M!==y[C]?(M-y[C])*P:0,y[C+1]+=M!==y[C+1]?(M-y[C+1])*P:0,y[C+2]+=M!==y[C+2]?(M-y[C+2])*P:0}},getUniformLocations:function(p,v){return{uVibrance:p.getUniformLocation(v,"uVibrance")}},sendUniformData:function(p,v){p.uniform1f(v.uVibrance,-this.vibrance)}}),h.Image.filters.Vibrance.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Blur=w(g.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(p){p.webgl?(this.aspectRatio=p.sourceWidth/p.sourceHeight,p.passes++,this._setupFrameBuffer(p),this.horizontal=!0,this.applyToWebGL(p),this._swapTextures(p),this._setupFrameBuffer(p),this.horizontal=!1,this.applyToWebGL(p),this._swapTextures(p)):this.applyTo2d(p)},applyTo2d:function(p){p.imageData=this.simpleBlur(p)},simpleBlur:function(p){var v=p.filterBackend.resources,y,S,T=p.imageData.width,C=p.imageData.height;v.blurLayer1||(v.blurLayer1=h.util.createCanvasElement(),v.blurLayer2=h.util.createCanvasElement()),y=v.blurLayer1,S=v.blurLayer2,(y.width!==T||y.height!==C)&&(S.width=y.width=T,S.height=y.height=C);var M=y.getContext("2d"),A=S.getContext("2d"),P=15,L,R,j,z,$=this.blur*.06*.5;for(M.putImageData(p.imageData,0,0),A.clearRect(0,0,T,C),z=-15;z<=P;z++)L=(Math.random()-.5)/4,R=z/P,j=$*R*T+L,A.globalAlpha=1-Math.abs(R),A.drawImage(y,j,L),M.drawImage(S,0,0),A.globalAlpha=1,A.clearRect(0,0,S.width,S.height);for(z=-15;z<=P;z++)L=(Math.random()-.5)/4,R=z/P,j=$*R*C+L,A.globalAlpha=1-Math.abs(R),A.drawImage(y,L,j),M.drawImage(S,0,0),A.globalAlpha=1,A.clearRect(0,0,S.width,S.height);p.ctx.drawImage(y,0,0);var Y=p.ctx.getImageData(0,0,y.width,y.height);return M.globalAlpha=1,M.clearRect(0,0,y.width,y.height),Y},getUniformLocations:function(p,v){return{delta:p.getUniformLocation(v,"uDelta")}},sendUniformData:function(p,v){var y=this.chooseRightDelta();p.uniform2fv(v.delta,y)},chooseRightDelta:function(){var p=1,v=[0,0],y;return this.horizontal?this.aspectRatio>1&&(p=1/this.aspectRatio):this.aspectRatio<1&&(p=this.aspectRatio),y=p*this.blur*.12,this.horizontal?v[0]=y:v[1]=y,v}}),g.Blur.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Gamma=w(g.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(p){this.gamma=[1,1,1],g.BaseFilter.prototype.initialize.call(this,p)},applyTo2d:function(p){var v=p.imageData,y=v.data,S=this.gamma,T=y.length,C=1/S[0],M=1/S[1],A=1/S[2],P;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),P=0,T=256;P<T;P++)this.rVals[P]=Math.pow(P/255,C)*255,this.gVals[P]=Math.pow(P/255,M)*255,this.bVals[P]=Math.pow(P/255,A)*255;for(P=0,T=y.length;P<T;P+=4)y[P]=this.rVals[y[P]],y[P+1]=this.gVals[y[P+1]],y[P+2]=this.bVals[y[P+2]]},getUniformLocations:function(p,v){return{uGamma:p.getUniformLocation(v,"uGamma")}},sendUniformData:function(p,v){p.uniform3fv(v.uGamma,this.gamma)}}),h.Image.filters.Gamma.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.Composed=w(g.BaseFilter,{type:"Composed",subFilters:[],initialize:function(p){this.callSuper("initialize",p),this.subFilters=this.subFilters.slice(0)},applyTo:function(p){p.passes+=this.subFilters.length-1,this.subFilters.forEach(function(v){v.applyTo(p)})},toObject:function(){return h.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(p){return p.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(p){return!p.isNeutralState()})}}),h.Image.filters.Composed.fromObject=function(p,v){var y=p.subFilters||[],S=y.map(function(C){return new h.Image.filters[C.type](C)}),T=new h.Image.filters.Composed({subFilters:S});return v&&v(T),T}}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.Image.filters,w=h.util.createClass;g.HueRotation=w(g.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var p=this.rotation*Math.PI,v=h.util.cos(p),y=h.util.sin(p),S=1/3,T=Math.sqrt(S)*y,C=1-v;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=v+C/3,this.matrix[1]=S*C-T,this.matrix[2]=S*C+T,this.matrix[5]=S*C+T,this.matrix[6]=v+S*C,this.matrix[7]=S*C-T,this.matrix[10]=S*C-T,this.matrix[11]=S*C+T,this.matrix[12]=v+S*C},isNeutralState:function(p){return this.calculateMatrix(),g.BaseFilter.prototype.isNeutralState.call(this,p)},applyTo:function(p){this.calculateMatrix(),g.BaseFilter.prototype.applyTo.call(this,p)}}),h.Image.filters.HueRotation.fromObject=h.Image.filters.BaseFilter.fromObject}(c),function(m){var h=m.fabric||(m.fabric={}),g=h.util.object.clone;if(h.Text){h.warn("fabric.Text is already defined");return}var w="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");h.Text=h.util.createClass(h.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:h.Object.prototype.stateProperties.concat(w),cacheProperties:h.Object.prototype.cacheProperties.concat(w),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(p,v){this.styles=v?v.styles||{}:{},this.text=p,this.__skipDimension=!0,this.callSuper("initialize",v),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var p=this.path;p&&(p.segmentsInfo=h.util.getPathSegmentsInfo(p.path))},getMeasuringContext:function(){return h._measuringContext||(h._measuringContext=this.canvas&&this.canvas.contextCache||h.util.createCanvasElement().getContext("2d")),h._measuringContext},_splitText:function(){var p=this._splitTextIntoLines(this.text);return this.textLines=p.lines,this._textLines=p.graphemeLines,this._unwrappedTextLines=p._unwrappedLines,this._text=p.graphemeText,p},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var p,v,y,S,T,C,M,A=0,P=this._textLines.length;A<P;A++)if(!(this.textAlign!=="justify"&&(A===P-1||this.isEndOfWrapping(A)))&&(S=0,T=this._textLines[A],v=this.getLineWidth(A),v<this.width&&(M=this.textLines[A].match(this._reSpacesAndTabs)))){y=M.length,p=(this.width-v)/y;for(var L=0,R=T.length;L<=R;L++)C=this.__charBounds[A][L],this._reSpaceAndTab.test(T[L])?(C.width+=p,C.kernedWidth+=p,C.left+=S,S+=p):C.left+=S}},isEndOfWrapping:function(p){return p===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var p=this.callSuper("_getCacheCanvasDimensions"),v=this.fontSize;return p.width+=v*p.zoomX,p.height+=v*p.zoomY,p},_render:function(p){var v=this.path;v&&!v.isNotVisible()&&v._render(p),this._setTextStyles(p),this._renderTextLinesBackground(p),this._renderTextDecoration(p,"underline"),this._renderText(p),this._renderTextDecoration(p,"overline"),this._renderTextDecoration(p,"linethrough")},_renderText:function(p){this.paintFirst==="stroke"?(this._renderTextStroke(p),this._renderTextFill(p)):(this._renderTextFill(p),this._renderTextStroke(p))},_setTextStyles:function(p,v,y){p.textBaseline="alphabetic",p.font=this._getFontDeclaration(v,y)},calcTextWidth:function(){for(var p=this.getLineWidth(0),v=1,y=this._textLines.length;v<y;v++){var S=this.getLineWidth(v);S>p&&(p=S)}return p},_renderTextLine:function(p,v,y,S,T,C){this._renderChars(p,v,y,S,T,C)},_renderTextLinesBackground:function(p){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var v,y,S=p.fillStyle,T,C,M=this._getLeftOffset(),A=this._getTopOffset(),P=0,L=0,R,j,z=this.path,$,Y=0,ae=this._textLines.length;Y<ae;Y++){if(v=this.getHeightOfLine(Y),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Y)){A+=v;continue}T=this._textLines[Y],y=this._getLineLeftOffset(Y),L=0,P=0,C=this.getValueOfPropertyAt(Y,0,"textBackgroundColor");for(var K=0,te=T.length;K<te;K++)R=this.__charBounds[Y][K],j=this.getValueOfPropertyAt(Y,K,"textBackgroundColor"),z?(p.save(),p.translate(R.renderLeft,R.renderTop),p.rotate(R.angle),p.fillStyle=j,j&&p.fillRect(-R.width/2,-v/this.lineHeight*(1-this._fontSizeFraction),R.width,v/this.lineHeight),p.restore()):j!==C?($=M+y+P,this.direction==="rtl"&&($=this.width-$-L),p.fillStyle=C,C&&p.fillRect($,A,L,v/this.lineHeight),P=R.left,L=R.width,C=j):L+=R.kernedWidth;j&&!z&&($=M+y+P,this.direction==="rtl"&&($=this.width-$-L),p.fillStyle=j,p.fillRect($,A,L,v/this.lineHeight)),A+=v}p.fillStyle=S,this._removeShadow(p)}},getFontCache:function(p){var v=p.fontFamily.toLowerCase();h.charWidthsCache[v]||(h.charWidthsCache[v]={});var y=h.charWidthsCache[v],S=p.fontStyle.toLowerCase()+"_"+(p.fontWeight+"").toLowerCase();return y[S]||(y[S]={}),y[S]},_measureChar:function(p,v,y,S){var T=this.getFontCache(v),C=this._getFontDeclaration(v),M=this._getFontDeclaration(S),A=y+p,P=C===M,L,R,j,z=v.fontSize/this.CACHE_FONT_SIZE,$;if(y&&T[y]!==void 0&&(j=T[y]),T[p]!==void 0&&($=L=T[p]),P&&T[A]!==void 0&&(R=T[A],$=R-j),L===void 0||j===void 0||R===void 0){var Y=this.getMeasuringContext();this._setTextStyles(Y,v,!0)}return L===void 0&&($=L=Y.measureText(p).width,T[p]=L),j===void 0&&P&&y&&(j=Y.measureText(y).width,T[y]=j),P&&R===void 0&&(R=Y.measureText(A).width,T[A]=R,$=R-j),{width:L*z,kernedWidth:$*z}},getHeightOfChar:function(p,v){return this.getValueOfPropertyAt(p,v,"fontSize")},measureLine:function(p){var v=this._measureLine(p);return this.charSpacing!==0&&(v.width-=this._getWidthOfCharSpacing()),v.width<0&&(v.width=0),v},_measureLine:function(p){var v=0,y,S,T=this._textLines[p],C,M,A=0,P=new Array(T.length),L=0,R,j,z=this.path,$=this.pathSide==="right";for(this.__charBounds[p]=P,y=0;y<T.length;y++)S=T[y],M=this._getGraphemeBox(S,p,y,C),P[y]=M,v+=M.kernedWidth,C=S;if(P[y]={left:M?M.left+M.width:0,width:0,kernedWidth:0,height:this.fontSize},z){switch(j=z.segmentsInfo[z.segmentsInfo.length-1].length,R=h.util.getPointOnPath(z.path,0,z.segmentsInfo),R.x+=z.pathOffset.x,R.y+=z.pathOffset.y,this.textAlign){case"left":L=$?j-v:0;break;case"center":L=(j-v)/2;break;case"right":L=$?0:j-v;break}for(L+=this.pathStartOffset*($?-1:1),y=$?T.length-1:0;$?y>=0:y<T.length;$?y--:y++)M=P[y],L>j?L%=j:L<0&&(L+=j),this._setGraphemeOnPath(L,M,R),L+=M.kernedWidth}return{width:v,numOfSpaces:A}},_setGraphemeOnPath:function(p,v,y){var S=p+v.kernedWidth/2,T=this.path,C=h.util.getPointOnPath(T.path,S,T.segmentsInfo);v.renderLeft=C.x-y.x,v.renderTop=C.y-y.y,v.angle=C.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(p,v,y,S,T){var C=this.getCompleteStyleDeclaration(v,y),M=S?this.getCompleteStyleDeclaration(v,y-1):{},A=this._measureChar(p,C,S,M),P=A.kernedWidth,L=A.width,R;this.charSpacing!==0&&(R=this._getWidthOfCharSpacing(),L+=R,P+=R);var j={width:L,left:0,height:C.fontSize,kernedWidth:P,deltaY:C.deltaY};if(y>0&&!T){var z=this.__charBounds[v][y-1];j.left=z.left+z.width+A.kernedWidth-A.width}return j},getHeightOfLine:function(p){if(this.__lineHeights[p])return this.__lineHeights[p];for(var v=this._textLines[p],y=this.getHeightOfChar(p,0),S=1,T=v.length;S<T;S++)y=Math.max(this.getHeightOfChar(p,S),y);return this.__lineHeights[p]=y*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var p,v=0,y=0,S=this._textLines.length;y<S;y++)p=this.getHeightOfLine(y),v+=y===S-1?p/this.lineHeight:p;return v},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(p,v){p.save();for(var y=0,S=this._getLeftOffset(),T=this._getTopOffset(),C=0,M=this._textLines.length;C<M;C++){var A=this.getHeightOfLine(C),P=A/this.lineHeight,L=this._getLineLeftOffset(C);this._renderTextLine(v,p,this._textLines[C],S+L,T+y+P,C),y+=A}p.restore()},_renderTextFill:function(p){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(p,"fillText")},_renderTextStroke:function(p){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this._setLineDash(p,this.strokeDashArray),p.beginPath(),this._renderTextCommon(p,"strokeText"),p.closePath(),p.restore())},_renderChars:function(p,v,y,S,T,C){var M=this.getHeightOfLine(C),A=this.textAlign.indexOf("justify")!==-1,P,L,R="",j,z=0,$,Y=this.path,ae=!A&&this.charSpacing===0&&this.isEmptyStyles(C)&&!Y,K=this.direction==="ltr",te=this.direction==="ltr"?1:-1,G;if(v.save(),T-=M*this._fontSizeFraction/this.lineHeight,ae){v.canvas.setAttribute("dir",K?"ltr":"rtl"),v.direction=K?"ltr":"rtl",v.textAlign=K?"left":"right",this._renderChar(p,v,C,0,y.join(""),S,T,M),v.restore();return}for(var ue=0,J=y.length-1;ue<=J;ue++)$=ue===J||this.charSpacing||Y,R+=y[ue],j=this.__charBounds[C][ue],z===0?(S+=te*(j.kernedWidth-j.width),z+=j.width):z+=j.kernedWidth,A&&!$&&this._reSpaceAndTab.test(y[ue])&&($=!0),$||(P=P||this.getCompleteStyleDeclaration(C,ue),L=this.getCompleteStyleDeclaration(C,ue+1),$=this._hasStyleChanged(P,L)),$&&(Y?(v.save(),v.translate(j.renderLeft,j.renderTop),v.rotate(j.angle),this._renderChar(p,v,C,ue,R,-z/2,0,M),v.restore()):(G=S,v.canvas.setAttribute("dir",K?"ltr":"rtl"),v.direction=K?"ltr":"rtl",v.textAlign=K?"left":"right",this._renderChar(p,v,C,ue,R,G,T,M)),R="",P=L,S+=te*z,z=0);v.restore()},_applyPatternGradientTransformText:function(p){var v=h.util.createCanvasElement(),y,S=this.width+this.strokeWidth,T=this.height+this.strokeWidth;return v.width=S,v.height=T,y=v.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(S,0),y.lineTo(S,T),y.lineTo(0,T),y.closePath(),y.translate(S/2,T/2),y.fillStyle=p.toLive(y),this._applyPatternGradientTransform(y,p),y.fill(),y.createPattern(v,"no-repeat")},handleFiller:function(p,v,y){var S,T;return y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?(S=-this.width/2,T=-this.height/2,p.translate(S,T),p[v]=this._applyPatternGradientTransformText(y),{offsetX:S,offsetY:T}):(p[v]=y.toLive(p,this),this._applyPatternGradientTransform(p,y)):(p[v]=y,{offsetX:0,offsetY:0})},_setStrokeStyles:function(p,v){return p.lineWidth=v.strokeWidth,p.lineCap=this.strokeLineCap,p.lineDashOffset=this.strokeDashOffset,p.lineJoin=this.strokeLineJoin,p.miterLimit=this.strokeMiterLimit,this.handleFiller(p,"strokeStyle",v.stroke)},_setFillStyles:function(p,v){return this.handleFiller(p,"fillStyle",v.fill)},_renderChar:function(p,v,y,S,T,C,M){var A=this._getStyleDeclaration(y,S),P=this.getCompleteStyleDeclaration(y,S),L=p==="fillText"&&P.fill,R=p==="strokeText"&&P.stroke&&P.strokeWidth,j,z;!R&&!L||(v.save(),L&&(j=this._setFillStyles(v,P)),R&&(z=this._setStrokeStyles(v,P)),v.font=this._getFontDeclaration(P),A&&A.textBackgroundColor&&this._removeShadow(v),A&&A.deltaY&&(M+=A.deltaY),L&&v.fillText(T,C-j.offsetX,M-j.offsetY),R&&v.strokeText(T,C-z.offsetX,M-z.offsetY),v.restore())},setSuperscript:function(p,v){return this._setScript(p,v,this.superscript)},setSubscript:function(p,v){return this._setScript(p,v,this.subscript)},_setScript:function(p,v,y){var S=this.get2DCursorLocation(p,!0),T=this.getValueOfPropertyAt(S.lineIndex,S.charIndex,"fontSize"),C=this.getValueOfPropertyAt(S.lineIndex,S.charIndex,"deltaY"),M={fontSize:T*y.size,deltaY:C+T*y.baseline};return this.setSelectionStyles(M,p,v),this},_hasStyleChanged:function(p,v){return p.fill!==v.fill||p.stroke!==v.stroke||p.strokeWidth!==v.strokeWidth||p.fontSize!==v.fontSize||p.fontFamily!==v.fontFamily||p.fontWeight!==v.fontWeight||p.fontStyle!==v.fontStyle||p.deltaY!==v.deltaY},_hasStyleChangedForSvg:function(p,v){return this._hasStyleChanged(p,v)||p.overline!==v.overline||p.underline!==v.underline||p.linethrough!==v.linethrough},_getLineLeftOffset:function(p){var v=this.getLineWidth(p),y=this.width-v,S=this.textAlign,T=this.direction,M,C=0,M=this.isEndOfWrapping(p);return S==="justify"||S==="justify-center"&&!M||S==="justify-right"&&!M||S==="justify-left"&&!M?0:(S==="center"&&(C=y/2),S==="right"&&(C=y),S==="justify-center"&&(C=y/2),S==="justify-right"&&(C=y),T==="rtl"&&(C-=y),C)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var p=this._forceClearCache;return p||(p=this.hasStateChanged("_dimensionAffectingProps")),p&&(this.dirty=!0,this._forceClearCache=!1),p},getLineWidth:function(p){if(this.__lineWidths[p])return this.__lineWidths[p];var v,y=this._textLines[p],S;return y===""?v=0:(S=this.measureLine(p),v=S.width),this.__lineWidths[p]=v,v},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(p,v,y){var S=this._getStyleDeclaration(p,v);return S&&typeof S[y]<"u"?S[y]:this[y]},_renderTextDecoration:function(p,v){if(!(!this[v]&&!this.styleHas(v))){for(var y,S,T,C,M,A,P,L,R=this._getLeftOffset(),j=this._getTopOffset(),z,$,Y,ae,K,te,G,ue,J=this.path,be=this._getWidthOfCharSpacing(),de=this.offsets[v],ce=0,V=this._textLines.length;ce<V;ce++){if(y=this.getHeightOfLine(ce),!this[v]&&!this.styleHas(v,ce)){j+=y;continue}P=this._textLines[ce],te=y/this.lineHeight,C=this._getLineLeftOffset(ce),$=0,Y=0,L=this.getValueOfPropertyAt(ce,0,v),ue=this.getValueOfPropertyAt(ce,0,"fill"),z=j+te*(1-this._fontSizeFraction),S=this.getHeightOfChar(ce,0),M=this.getValueOfPropertyAt(ce,0,"deltaY");for(var ne=0,Q=P.length;ne<Q;ne++)if(ae=this.__charBounds[ce][ne],K=this.getValueOfPropertyAt(ce,ne,v),G=this.getValueOfPropertyAt(ce,ne,"fill"),T=this.getHeightOfChar(ce,ne),A=this.getValueOfPropertyAt(ce,ne,"deltaY"),J&&K&&G)p.save(),p.fillStyle=ue,p.translate(ae.renderLeft,ae.renderTop),p.rotate(ae.angle),p.fillRect(-ae.kernedWidth/2,de*T+A,ae.kernedWidth,this.fontSize/15),p.restore();else if((K!==L||G!==ue||T!==S||A!==M)&&Y>0){var Z=R+C+$;this.direction==="rtl"&&(Z=this.width-Z-Y),L&&ue&&(p.fillStyle=ue,p.fillRect(Z,z+de*S+M,Y,this.fontSize/15)),$=ae.left,Y=ae.width,L=K,ue=G,S=T,M=A}else Y+=ae.kernedWidth;var Z=R+C+$;this.direction==="rtl"&&(Z=this.width-Z-Y),p.fillStyle=G,K&&G&&p.fillRect(Z,z+de*S+M,Y-be,this.fontSize/15),j+=y}this._removeShadow(p)}},_getFontDeclaration:function(p,v){var y=p||this,S=this.fontFamily,T=h.Text.genericFonts.indexOf(S.toLowerCase())>-1,C=S===void 0||S.indexOf("'")>-1||S.indexOf(",")>-1||S.indexOf('"')>-1||T?y.fontFamily:'"'+y.fontFamily+'"';return[h.isLikelyNode?y.fontWeight:y.fontStyle,h.isLikelyNode?y.fontStyle:y.fontWeight,v?this.CACHE_FONT_SIZE+"px":y.fontSize+"px",C].join(" ")},render:function(p){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",p)))},_splitTextIntoLines:function(p){for(var v=p.split(this._reNewline),y=new Array(v.length),S=[`
`],T=[],C=0;C<v.length;C++)y[C]=h.util.string.graphemeSplit(v[C]),T=T.concat(y[C],S);return T.pop(),{_unwrappedLines:y,lines:v,graphemeText:T,graphemeLines:y}},toObject:function(p){var v=w.concat(p),y=this.callSuper("toObject",v);return y.styles=g(this.styles,!0),y.path&&(y.path=this.path.toObject()),y},set:function(p,v){this.callSuper("set",p,v);var y=!1,S=!1;if(typeof p=="object")for(var T in p)T==="path"&&this.setPathInfo(),y=y||this._dimensionAffectingProps.indexOf(T)!==-1,S=S||T==="path";else y=this._dimensionAffectingProps.indexOf(p)!==-1,S=p==="path";return S&&this.setPathInfo(),y&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),h.Text.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),h.Text.DEFAULT_SVG_FONT_SIZE=16,h.Text.fromElement=function(p,v,y){if(!p)return v(null);var S=h.parseAttributes(p,h.Text.ATTRIBUTE_NAMES),T=S.textAnchor||"left";if(y=h.util.object.extend(y?g(y):{},S),y.top=y.top||0,y.left=y.left||0,S.textDecoration){var C=S.textDecoration;C.indexOf("underline")!==-1&&(y.underline=!0),C.indexOf("overline")!==-1&&(y.overline=!0),C.indexOf("line-through")!==-1&&(y.linethrough=!0),delete y.textDecoration}"dx"in S&&(y.left+=S.dx),"dy"in S&&(y.top+=S.dy),"fontSize"in y||(y.fontSize=h.Text.DEFAULT_SVG_FONT_SIZE);var M="";"textContent"in p?M=p.textContent:"firstChild"in p&&p.firstChild!==null&&"data"in p.firstChild&&p.firstChild.data!==null&&(M=p.firstChild.data),M=M.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var A=y.strokeWidth;y.strokeWidth=0;var P=new h.Text(M,y),L=P.getScaledHeight()/P.height,R=(P.height+P.strokeWidth)*P.lineHeight-P.height,j=R*L,z=P.getScaledHeight()+j,$=0;T==="center"&&($=P.getScaledWidth()/2),T==="right"&&($=P.getScaledWidth()),P.set({left:P.left-$,top:P.top-(z-P.fontSize*(.07+P._fontSizeFraction))/P.lineHeight,strokeWidth:typeof A<"u"?A:1}),v(P)},h.Text.fromObject=function(p,v){var y=g(p),S=p.path;return delete y.path,h.Object._fromObject("Text",y,function(T){S?h.Object._fromObject("Path",S,function(C){T.set("path",C),v(T)},"path"):v(T)},"text")},h.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],h.util.createAccessors&&h.util.createAccessors(h.Text)}(c),function(){d.util.object.extend(d.Text.prototype,{isEmptyStyles:function(m){if(!this.styles||typeof m<"u"&&!this.styles[m])return!0;var h=typeof m>"u"?this.styles:{line:this.styles[m]};for(var g in h)for(var w in h[g])for(var p in h[g][w])return!1;return!0},styleHas:function(m,h){if(!this.styles||!m||m===""||typeof h<"u"&&!this.styles[h])return!1;var g=typeof h>"u"?this.styles:{0:this.styles[h]};for(var w in g)for(var p in g[w])if(typeof g[w][p][m]<"u")return!0;return!1},cleanStyle:function(m){if(!this.styles||!m||m==="")return!1;var h=this.styles,g=0,w,p,v=!0,y=0,S;for(var T in h){w=0;for(var C in h[T]){var S=h[T][C],M=S.hasOwnProperty(m);g++,M?(p?S[m]!==p&&(v=!1):p=S[m],S[m]===this[m]&&delete S[m]):v=!1,Object.keys(S).length!==0?w++:delete h[T][C]}w===0&&delete h[T]}for(var A=0;A<this._textLines.length;A++)y+=this._textLines[A].length;v&&g===y&&(this[m]=p,this.removeStyle(m))},removeStyle:function(m){if(!(!this.styles||!m||m==="")){var h=this.styles,g,w,p;for(w in h){g=h[w];for(p in g)delete g[p][m],Object.keys(g[p]).length===0&&delete g[p];Object.keys(g).length===0&&delete h[w]}}},_extendStyles:function(m,h){var g=this.get2DCursorLocation(m);this._getLineStyle(g.lineIndex)||this._setLineStyle(g.lineIndex),this._getStyleDeclaration(g.lineIndex,g.charIndex)||this._setStyleDeclaration(g.lineIndex,g.charIndex,{}),d.util.object.extend(this._getStyleDeclaration(g.lineIndex,g.charIndex),h)},get2DCursorLocation:function(m,h){typeof m>"u"&&(m=this.selectionStart);for(var g=h?this._unwrappedTextLines:this._textLines,w=g.length,p=0;p<w;p++){if(m<=g[p].length)return{lineIndex:p,charIndex:m};m-=g[p].length+this.missingNewlineOffset(p)}return{lineIndex:p-1,charIndex:g[p-1].length<m?g[p-1].length:m}},getSelectionStyles:function(m,h,g){typeof m>"u"&&(m=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||m);for(var w=[],p=m;p<h;p++)w.push(this.getStyleAtPosition(p,g));return w},getStyleAtPosition:function(m,h){var g=this.get2DCursorLocation(m),w=h?this.getCompleteStyleDeclaration(g.lineIndex,g.charIndex):this._getStyleDeclaration(g.lineIndex,g.charIndex);return w||{}},setSelectionStyles:function(m,h,g){typeof h>"u"&&(h=this.selectionStart||0),typeof g>"u"&&(g=this.selectionEnd||h);for(var w=h;w<g;w++)this._extendStyles(w,m);return this._forceClearCache=!0,this},_getStyleDeclaration:function(m,h){var g=this.styles&&this.styles[m];return g?g[h]:null},getCompleteStyleDeclaration:function(m,h){for(var g=this._getStyleDeclaration(m,h)||{},w={},p,v=0;v<this._styleProperties.length;v++)p=this._styleProperties[v],w[p]=typeof g[p]>"u"?this[p]:g[p];return w},_setStyleDeclaration:function(m,h,g){this.styles[m][h]=g},_deleteStyleDeclaration:function(m,h){delete this.styles[m][h]},_getLineStyle:function(m){return!!this.styles[m]},_setLineStyle:function(m){this.styles[m]={}},_deleteLineStyle:function(m){delete this.styles[m]}})}(),function(){function m(h){h.textDecoration&&(h.textDecoration.indexOf("underline")>-1&&(h.underline=!0),h.textDecoration.indexOf("line-through")>-1&&(h.linethrough=!0),h.textDecoration.indexOf("overline")>-1&&(h.overline=!0),delete h.textDecoration)}d.IText=d.util.createClass(d.Text,d.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(h,g){this.callSuper("initialize",h,g),this.initBehavior()},setSelectionStart:function(h){h=Math.max(h,0),this._updateAndFire("selectionStart",h)},setSelectionEnd:function(h){h=Math.min(h,this.text.length),this._updateAndFire("selectionEnd",h)},_updateAndFire:function(h,g){this[h]!==g&&(this._fireSelectionChanged(),this[h]=g),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(h){this.clearContextTop(),this.callSuper("render",h),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(h){this.callSuper("_render",h)},clearContextTop:function(h){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var g=this.canvas.contextTop,w=this.canvas.viewportTransform;g.save(),g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this.transform(g),this._clearTextArea(g),h||g.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this._getCursorBoundaries(),g=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(h,g):this.renderSelection(h,g),g.restore()}},_clearTextArea:function(h){var g=this.width+4,w=this.height+4;h.clearRect(-g/2,-w/2,g,w)},_getCursorBoundaries:function(h){typeof h>"u"&&(h=this.selectionStart);var g=this._getLeftOffset(),w=this._getTopOffset(),p=this._getCursorBoundariesOffsets(h);return{left:g,top:w,leftOffset:p.left,topOffset:p.top}},_getCursorBoundariesOffsets:function(h){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var g,w,p,v=0,y=0,S,T=this.get2DCursorLocation(h);p=T.charIndex,w=T.lineIndex;for(var C=0;C<w;C++)v+=this.getHeightOfLine(C);g=this._getLineLeftOffset(w);var M=this.__charBounds[w][p];return M&&(y=M.left),this.charSpacing!==0&&p===this._textLines[w].length&&(y-=this._getWidthOfCharSpacing()),S={top:v,left:g+(y>0?y:0)},this.direction==="rtl"&&(S.left*=-1),this.cursorOffsetCache=S,this.cursorOffsetCache},renderCursor:function(h,g){var w=this.get2DCursorLocation(),p=w.lineIndex,v=w.charIndex>0?w.charIndex-1:0,y=this.getValueOfPropertyAt(p,v,"fontSize"),S=this.scaleX*this.canvas.getZoom(),T=this.cursorWidth/S,C=h.topOffset,M=this.getValueOfPropertyAt(p,v,"deltaY");C+=(1-this._fontSizeFraction)*this.getHeightOfLine(p)/this.lineHeight-y*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(h,g),g.fillStyle=this.cursorColor||this.getValueOfPropertyAt(p,v,"fill"),g.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,g.fillRect(h.left+h.leftOffset-T/2,C+h.top+M,T,y)},renderSelection:function(h,g){for(var w=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,p=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,v=this.textAlign.indexOf("justify")!==-1,y=this.get2DCursorLocation(w),S=this.get2DCursorLocation(p),T=y.lineIndex,C=S.lineIndex,M=y.charIndex<0?0:y.charIndex,A=S.charIndex<0?0:S.charIndex,P=T;P<=C;P++){var L=this._getLineLeftOffset(P)||0,R=this.getHeightOfLine(P),j=0,z=0,$=0;if(P===T&&(z=this.__charBounds[T][M].left),P>=T&&P<C)$=v&&!this.isEndOfWrapping(P)?this.width:this.getLineWidth(P)||5;else if(P===C)if(A===0)$=this.__charBounds[C][A].left;else{var Y=this._getWidthOfCharSpacing();$=this.__charBounds[C][A-1].left+this.__charBounds[C][A-1].width-Y}j=R,(this.lineHeight<1||P===C&&this.lineHeight>1)&&(R/=this.lineHeight);var ae=h.left+L+z,K=$-z,te=R,G=0;this.inCompositionMode?(g.fillStyle=this.compositionColor||"black",te=1,G=R):g.fillStyle=this.selectionColor,this.direction==="rtl"&&(ae=this.width-ae-K),g.fillRect(ae,h.top+h.topOffset+G,K,te),h.topOffset+=j}},getCurrentCharFontSize:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fontSize")},getCurrentCharColor:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fill")},_getCurrentCharIndex:function(){var h=this.get2DCursorLocation(this.selectionStart,!0),g=h.charIndex>0?h.charIndex-1:0;return{l:h.lineIndex,c:g}}}),d.IText.fromObject=function(h,g){if(m(h),h.styles)for(var w in h.styles)for(var p in h.styles[w])m(h.styles[w][p]);d.Object._fromObject("IText",h,g,"text")}}(),function(){var m=d.util.object.clone;d.util.object.extend(d.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var h=this;this.on("added",function(){var g=h.canvas;g&&(g._hasITextHandlers||(g._hasITextHandlers=!0,h._initCanvasHandlers(g)),g._iTextInstances=g._iTextInstances||[],g._iTextInstances.push(h))})},initRemovedHandler:function(){var h=this;this.on("removed",function(){var g=h.canvas;g&&(g._iTextInstances=g._iTextInstances||[],d.util.removeFromArray(g._iTextInstances,h),g._iTextInstances.length===0&&(g._hasITextHandlers=!1,h._removeCanvasHandlers(g)))})},_initCanvasHandlers:function(h){h._mouseUpITextHandler=function(){h._iTextInstances&&h._iTextInstances.forEach(function(g){g.__isMousedown=!1})},h.on("mouse:up",h._mouseUpITextHandler)},_removeCanvasHandlers:function(h){h.off("mouse:up",h._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(h,g,w,p){var v;return v={isAborted:!1,abort:function(){this.isAborted=!0}},h.animate("_currentCursorOpacity",g,{duration:w,onComplete:function(){v.isAborted||h[p]()},onChange:function(){h.canvas&&h.selectionStart===h.selectionEnd&&h.renderCursorOrSelection()},abort:function(){return v.isAborted}}),v},_onTickComplete:function(){var h=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){h._currentTickCompleteState=h._animateCursor(h,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(h){var g=this,w=h?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){g._tick()},w)},abortCursorAnimation:function(){var h=this._currentTickState||this._currentTickCompleteState,g=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,h&&g&&g.clearContext(g.contextTop||g.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(h){var g=0,w=h-1;if(this._reSpace.test(this._text[w]))for(;this._reSpace.test(this._text[w]);)g++,w--;for(;/\S/.test(this._text[w])&&w>-1;)g++,w--;return h-g},findWordBoundaryRight:function(h){var g=0,w=h;if(this._reSpace.test(this._text[w]))for(;this._reSpace.test(this._text[w]);)g++,w++;for(;/\S/.test(this._text[w])&&w<this._text.length;)g++,w++;return h+g},findLineBoundaryLeft:function(h){for(var g=0,w=h-1;!/\n/.test(this._text[w])&&w>-1;)g++,w--;return h-g},findLineBoundaryRight:function(h){for(var g=0,w=h;!/\n/.test(this._text[w])&&w<this._text.length;)g++,w++;return h+g},searchWordBoundary:function(h,g){for(var w=this._text,p=this._reSpace.test(w[h])?h-1:h,v=w[p],y=d.reNonWord;!y.test(v)&&p>0&&p<w.length;)p+=g,v=w[p];return y.test(v)&&(p+=g===1?0:1),p},selectWord:function(h){h=h||this.selectionStart;var g=this.searchWordBoundary(h,-1),w=this.searchWordBoundary(h,1);this.selectionStart=g,this.selectionEnd=w,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(h){h=h||this.selectionStart;var g=this.findLineBoundaryLeft(h),w=this.findLineBoundaryRight(h);return this.selectionStart=g,this.selectionEnd=w,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(h){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(h),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(h){h._iTextInstances&&h._iTextInstances.forEach(function(g){g.selected=!1,g.isEditing&&g.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(h){if(!(!this.__isMousedown||!this.isEditing)){var g=this.getSelectionStartFromPointer(h.e),w=this.selectionStart,p=this.selectionEnd;(g!==this.__selectionStartOnMouseDown||w===p)&&(w===g||p===g)||(g>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=g):(this.selectionStart=g,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==w||this.selectionEnd!==p)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(h,g,w){var p=w.slice(0,h),v=d.util.string.graphemeSplit(p).length;if(h===g)return{selectionStart:v,selectionEnd:v};var y=w.slice(h,g),S=d.util.string.graphemeSplit(y).length;return{selectionStart:v,selectionEnd:v+S}},fromGraphemeToStringSelection:function(h,g,w){var p=w.slice(0,h),v=p.join("").length;if(h===g)return{selectionStart:v,selectionEnd:v};var y=w.slice(h,g),S=y.join("").length;return{selectionStart:v,selectionEnd:v+S}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var h=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=h.selectionStart,this.hiddenTextarea.selectionEnd=h.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var h=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=h.selectionEnd,this.inCompositionMode||(this.selectionStart=h.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var h=this._calcTextareaPosition();this.hiddenTextarea.style.left=h.left,this.hiddenTextarea.style.top=h.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var h=this.inCompositionMode?this.compositionStart:this.selectionStart,g=this._getCursorBoundaries(h),w=this.get2DCursorLocation(h),p=w.lineIndex,v=w.charIndex,y=this.getValueOfPropertyAt(p,v,"fontSize")*this.lineHeight,S=g.leftOffset,T=this.calcTransformMatrix(),C={x:g.left+S,y:g.top+g.topOffset+y},M=this.canvas.getRetinaScaling(),A=this.canvas.upperCanvasEl,P=A.width/M,L=A.height/M,R=P-y,j=L-y,z=A.clientWidth/P,$=A.clientHeight/L;return C=d.util.transformPoint(C,T),C=d.util.transformPoint(C,this.canvas.viewportTransform),C.x*=z,C.y*=$,C.x<0&&(C.x=0),C.x>R&&(C.x=R),C.y<0&&(C.y=0),C.y>j&&(C.y=j),C.x+=this.canvas._offset.left,C.y+=this.canvas._offset.top,{left:C.x+"px",top:C.y+"px",fontSize:y+"px",charHeight:y}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var h=this._textBeforeEdit!==this.text,g=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,g&&(g.blur&&g.blur(),g.parentNode&&g.parentNode.removeChild(g)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),h&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),h&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var h in this.styles)this._textLines[h]||delete this.styles[h]},removeStyleFromTo:function(h,g){var w=this.get2DCursorLocation(h,!0),p=this.get2DCursorLocation(g,!0),v=w.lineIndex,y=w.charIndex,S=p.lineIndex,T=p.charIndex,C,M;if(v!==S){if(this.styles[v])for(C=y;C<this._unwrappedTextLines[v].length;C++)delete this.styles[v][C];if(this.styles[S])for(C=T;C<this._unwrappedTextLines[S].length;C++)M=this.styles[S][C],M&&(this.styles[v]||(this.styles[v]={}),this.styles[v][y+C-T]=M);for(C=v+1;C<=S;C++)delete this.styles[C];this.shiftLineStyles(S,v-S)}else if(this.styles[v]){M=this.styles[v];var A=T-y,P,L;for(C=y;C<T;C++)delete M[C];for(L in this.styles[v])P=parseInt(L,10),P>=T&&(M[P-A]=M[L],delete M[L])}},shiftLineStyles:function(h,g){var w=m(this.styles);for(var p in this.styles){var v=parseInt(p,10);v>h&&(this.styles[v+g]=w[v],w[v-g]||delete this.styles[v])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(h,g,w,p){var v,y={},S=!1,T=this._unwrappedTextLines[h].length===g;w||(w=1),this.shiftLineStyles(h,w),this.styles[h]&&(v=this.styles[h][g===0?g:g-1]);for(var C in this.styles[h]){var M=parseInt(C,10);M>=g&&(S=!0,y[M-g]=this.styles[h][C],T&&g===0||delete this.styles[h][C])}var A=!1;for(S&&!T&&(this.styles[h+w]=y,A=!0),A&&w--;w>0;)p&&p[w-1]?this.styles[h+w]={0:m(p[w-1])}:v?this.styles[h+w]={0:m(v)}:delete this.styles[h+w],w--;this._forceClearCache=!0},insertCharStyleObject:function(h,g,w,p){this.styles||(this.styles={});var v=this.styles[h],y=v?m(v):{};w||(w=1);for(var S in y){var T=parseInt(S,10);T>=g&&(v[T+w]=y[T],y[T-w]||delete v[T])}if(this._forceClearCache=!0,p){for(;w--;)Object.keys(p[w]).length&&(this.styles[h]||(this.styles[h]={}),this.styles[h][g+w]=m(p[w]));return}if(v)for(var C=v[g?g-1:1];C&&w--;)this.styles[h][g+w]=m(C)},insertNewStyleBlock:function(h,g,w){for(var p=this.get2DCursorLocation(g,!0),v=[0],y=0,S=0;S<h.length;S++)h[S]===`
`?(y++,v[y]=0):v[y]++;v[0]>0&&(this.insertCharStyleObject(p.lineIndex,p.charIndex,v[0],w),w=w&&w.slice(v[0]+1)),y&&this.insertNewlineStyleObject(p.lineIndex,p.charIndex+v[0],y);for(var S=1;S<y;S++)v[S]>0?this.insertCharStyleObject(p.lineIndex+S,0,v[S],w):w&&(this.styles[p.lineIndex+S][0]=w[0]),w=w&&w.slice(v[S]+1);v[S]>0&&this.insertCharStyleObject(p.lineIndex+S,0,v[S],w)},setSelectionStartEndWithShift:function(h,g,w){w<=h?(g===h?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=h),this.selectionStart=w):w>h&&w<g?this._selectionDirection==="right"?this.selectionEnd=w:this.selectionStart=w:(g===h?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=g),this.selectionEnd=w)},setSelectionInBoundaries:function(){var h=this.text.length;this.selectionStart>h?this.selectionStart=h:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>h?this.selectionEnd=h:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),d.util.object.extend(d.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(m){if(this.canvas){this.__newClickTime=+new Date;var h=m.pointer;this.isTripleClick(h)&&(this.fire("tripleclick",m),this._stopEvent(m.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=h,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(m){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===m.x&&this.__lastPointer.y===m.y},_stopEvent:function(m){m.preventDefault&&m.preventDefault(),m.stopPropagation&&m.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(m){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(m.e))},tripleClickHandler:function(m){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(m.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(m){!this.canvas||!this.editable||m.e.button&&m.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(m.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(m){!this.canvas||!this.editable||m.e.button&&m.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(m){if(this.__isMousedown=!1,!(!this.editable||this.group||m.transform&&m.transform.actionPerformed||m.e.button&&m.e.button!==1)){if(this.canvas){var h=this.canvas._activeObject;if(h&&h!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(m.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(m){var h=this.getSelectionStartFromPointer(m),g=this.selectionStart,w=this.selectionEnd;m.shiftKey?this.setSelectionStartEndWithShift(g,w,h):(this.selectionStart=h,this.selectionEnd=h),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(m){for(var h=this.getLocalPointer(m),g=0,w=0,p=0,v=0,y=0,S,T,C=0,M=this._textLines.length;C<M&&p<=h.y;C++)p+=this.getHeightOfLine(C)*this.scaleY,y=C,C>0&&(v+=this._textLines[C-1].length+this.missingNewlineOffset(C-1));S=this._getLineLeftOffset(y),w=S*this.scaleX,T=this._textLines[y],this.direction==="rtl"&&(h.x=this.width*this.scaleX-h.x+w);for(var A=0,P=T.length;A<P&&(g=w,w+=this.__charBounds[y][A].kernedWidth*this.scaleX,w<=h.x);A++)v++;return this._getNewSelectionStartFromOffset(h,g,w,v,P)},_getNewSelectionStartFromOffset:function(m,h,g,w,p){var v=m.x-h,y=g-m.x,S=y>v||y<0?0:1,T=w+S;return this.flipX&&(T=p-T),T>this._text.length&&(T=this._text.length),T}}),d.util.object.extend(d.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=d.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var m=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+m.top+"; left: "+m.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+m.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):d.document.body.appendChild(this.hiddenTextarea),d.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),d.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),d.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),d.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),d.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),d.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(d.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(m){if(this.isEditing){var h=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(m.keyCode in h)this[h[m.keyCode]](m);else if(m.keyCode in this.ctrlKeysMapDown&&(m.ctrlKey||m.metaKey))this[this.ctrlKeysMapDown[m.keyCode]](m);else return;m.stopImmediatePropagation(),m.preventDefault(),m.keyCode>=33&&m.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(m){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(m.keyCode in this.ctrlKeysMapUp&&(m.ctrlKey||m.metaKey))this[this.ctrlKeysMapUp[m.keyCode]](m);else return;m.stopImmediatePropagation(),m.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(m){var h=this.fromPaste;if(this.fromPaste=!1,m&&m.stopPropagation(),!!this.isEditing){var g=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,w=this._text.length,p=g.length,v,y,S=p-w,T=this.selectionStart,C=this.selectionEnd,M=T!==C,A,P,L;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var R=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),j=T>R.selectionStart;M?(v=this._text.slice(T,C),S+=C-T):p<w&&(j?v=this._text.slice(C+S,C):v=this._text.slice(T,T-S)),y=g.slice(R.selectionEnd-S,R.selectionEnd),v&&v.length&&(y.length&&(A=this.getSelectionStyles(T,T+1,!1),A=y.map(function(){return A[0]})),M?(P=T,L=C):j?(P=C-v.length,L=C):(P=C,L=C+v.length),this.removeStyleFromTo(P,L)),y.length&&(h&&y.join("")===d.copiedText&&!d.disableStyleCopyPaste&&(A=d.copiedTextStyle),this.insertNewStyleBlock(y,T,A)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(m){this.compositionStart=m.target.selectionStart,this.compositionEnd=m.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(d.copiedText=this.getSelectedText(),d.disableStyleCopyPaste?d.copiedTextStyle=null:d.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(m){return m&&m.clipboardData||d.window.clipboardData},_getWidthBeforeCursor:function(m,h){var g=this._getLineLeftOffset(m),w;return h>0&&(w=this.__charBounds[m][h-1],g+=w.left+w.width),g},getDownCursorOffset:function(m,h){var g=this._getSelectionForOffset(m,h),w=this.get2DCursorLocation(g),p=w.lineIndex;if(p===this._textLines.length-1||m.metaKey||m.keyCode===34)return this._text.length-g;var v=w.charIndex,y=this._getWidthBeforeCursor(p,v),S=this._getIndexOnLine(p+1,y),T=this._textLines[p].slice(v);return T.length+S+1+this.missingNewlineOffset(p)},_getSelectionForOffset:function(m,h){return m.shiftKey&&this.selectionStart!==this.selectionEnd&&h?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(m,h){var g=this._getSelectionForOffset(m,h),w=this.get2DCursorLocation(g),p=w.lineIndex;if(p===0||m.metaKey||m.keyCode===33)return-g;var v=w.charIndex,y=this._getWidthBeforeCursor(p,v),S=this._getIndexOnLine(p-1,y),T=this._textLines[p].slice(0,v),C=this.missingNewlineOffset(p-1);return-this._textLines[p-1].length+S-T.length+(1-C)},_getIndexOnLine:function(m,h){for(var g=this._textLines[m],w=this._getLineLeftOffset(m),p=w,v=0,y,S,T=0,C=g.length;T<C;T++)if(y=this.__charBounds[m][T].width,p+=y,p>h){S=!0;var M=p-y,A=p,P=Math.abs(M-h),L=Math.abs(A-h);v=L<P?T:T-1;break}return S||(v=g.length-1),v},moveCursorDown:function(m){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",m)},moveCursorUp:function(m){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",m)},_moveCursorUpOrDown:function(m,h){var g="get"+m+"CursorOffset",w=this[g](h,this._selectionDirection==="right");h.shiftKey?this.moveCursorWithShift(w):this.moveCursorWithoutShift(w),w!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(m){var h=this._selectionDirection==="left"?this.selectionStart+m:this.selectionEnd+m;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,h),m!==0},moveCursorWithoutShift:function(m){return m<0?(this.selectionStart+=m,this.selectionEnd=this.selectionStart):(this.selectionEnd+=m,this.selectionStart=this.selectionEnd),m!==0},moveCursorLeft:function(m){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",m)},_move:function(m,h,g){var w;if(m.altKey)w=this["findWordBoundary"+g](this[h]);else if(m.metaKey||m.keyCode===35||m.keyCode===36)w=this["findLineBoundary"+g](this[h]);else return this[h]+=g==="Left"?-1:1,!0;if(typeof w!==void 0&&this[h]!==w)return this[h]=w,!0},_moveLeft:function(m,h){return this._move(m,h,"Left")},_moveRight:function(m,h){return this._move(m,h,"Right")},moveCursorLeftWithoutShift:function(m){var h=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(h=this._moveLeft(m,"selectionStart")),this.selectionEnd=this.selectionStart,h},moveCursorLeftWithShift:function(m){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(m,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(m,"selectionStart")},moveCursorRight:function(m){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",m)},_moveCursorLeftOrRight:function(m,h){var g="moveCursor"+m+"With";this._currentCursorOpacity=1,h.shiftKey?g+="Shift":g+="outShift",this[g](h)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(m){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(m,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(m,"selectionEnd")},moveCursorRightWithoutShift:function(m){var h=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(h=this._moveRight(m,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,h},removeChars:function(m,h){typeof h>"u"&&(h=m+1),this.removeStyleFromTo(m,h),this._text.splice(m,h-m),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(m,h,g,w){typeof w>"u"&&(w=g),w>g&&this.removeStyleFromTo(g,w);var p=d.util.string.graphemeSplit(m);this.insertNewStyleBlock(p,g,h),this._text=[].concat(this._text.slice(0,g),p,this._text.slice(w)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var m=d.util.toFixed,h=/  +/g;d.util.object.extend(d.Text.prototype,{_toSVG:function(){var g=this._getSVGLeftTopOffsets(),w=this._getSVGTextAndBg(g.textTop,g.textLeft);return this._wrapSVGTextAndBg(w)},toSVG:function(g){return this._createBaseSVGMarkup(this._toSVG(),{reviver:g,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(g){var w=!0,p=this.getSvgTextDecoration(this);return[g.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",p?'text-decoration="'+p+'" ':"",'style="',this.getSvgStyles(w),'"',this.addPaintOrder()," >",g.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(g,w){var p=[],v=[],y=g,S;this._setSVGBg(v);for(var T=0,C=this._textLines.length;T<C;T++)S=this._getLineLeftOffset(T),(this.textBackgroundColor||this.styleHas("textBackgroundColor",T))&&this._setSVGTextLineBg(v,T,w+S,y),this._setSVGTextLineText(p,T,w+S,y),y+=this.getHeightOfLine(T);return{textSpans:p,textBgRects:v}},_createTextCharSpan:function(g,w,p,v){var y=g!==g.trim()||g.match(h),S=this.getSvgSpanStyles(w,y),T=S?'style="'+S+'"':"",C=w.deltaY,M="",A=d.Object.NUM_FRACTION_DIGITS;return C&&(M=' dy="'+m(C,A)+'" '),['<tspan x="',m(p,A),'" y="',m(v,A),'" ',M,T,">",d.util.string.escapeXml(g),"</tspan>"].join("")},_setSVGTextLineText:function(g,w,p,v){var y=this.getHeightOfLine(w),S=this.textAlign.indexOf("justify")!==-1,T,C,M="",A,P,L=0,R=this._textLines[w],j;v+=y*(1-this._fontSizeFraction)/this.lineHeight;for(var z=0,$=R.length-1;z<=$;z++)j=z===$||this.charSpacing,M+=R[z],A=this.__charBounds[w][z],L===0?(p+=A.kernedWidth-A.width,L+=A.width):L+=A.kernedWidth,S&&!j&&this._reSpaceAndTab.test(R[z])&&(j=!0),j||(T=T||this.getCompleteStyleDeclaration(w,z),C=this.getCompleteStyleDeclaration(w,z+1),j=this._hasStyleChangedForSvg(T,C)),j&&(P=this._getStyleDeclaration(w,z)||{},g.push(this._createTextCharSpan(M,P,p,v)),M="",T=C,p+=L,L=0)},_pushTextBgRect:function(g,w,p,v,y,S){var T=d.Object.NUM_FRACTION_DIGITS;g.push("		<rect ",this._getFillAttributes(w),' x="',m(p,T),'" y="',m(v,T),'" width="',m(y,T),'" height="',m(S,T),`"></rect>
`)},_setSVGTextLineBg:function(g,w,p,v){for(var y=this._textLines[w],S=this.getHeightOfLine(w)/this.lineHeight,T=0,C=0,M,A,P=this.getValueOfPropertyAt(w,0,"textBackgroundColor"),L=0,R=y.length;L<R;L++)M=this.__charBounds[w][L],A=this.getValueOfPropertyAt(w,L,"textBackgroundColor"),A!==P?(P&&this._pushTextBgRect(g,P,p+C,v,T,S),C=M.left,T=M.width,P=A):T+=M.kernedWidth;A&&this._pushTextBgRect(g,A,p+C,v,T,S)},_getFillAttributes:function(g){var w=g&&typeof g=="string"?new d.Color(g):"";return!w||!w.getSource()||w.getAlpha()===1?'fill="'+g+'"':'opacity="'+w.getAlpha()+'" fill="'+w.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(g){for(var w=0,p=0,v=0;v<g;v++)w+=this.getHeightOfLine(v);return p=this.getHeightOfLine(v),{lineTop:w,offset:(this._fontSizeMult-this._fontSizeFraction)*p/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(g){var w=d.Object.prototype.getSvgStyles.call(this,g);return w+" white-space: pre;"}})}(),function(m){var h=m.fabric||(m.fabric={});h.Textbox=h.util.createClass(h.IText,h.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:h.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(g){for(var w=0,p=0,v=0,y={},S=0;S<g.graphemeLines.length;S++)g.graphemeText[v]===`
`&&S>0?(p=0,v++,w++):!this.splitByGrapheme&&this._reSpaceAndTab.test(g.graphemeText[v])&&S>0&&(p++,v++),y[S]={line:w,offset:p},v+=g.graphemeLines[S].length,p+=g.graphemeLines[S].length;return y},styleHas:function(g,w){if(this._styleMap&&!this.isWrapping){var p=this._styleMap[w];p&&(w=p.line)}return h.Text.prototype.styleHas.call(this,g,w)},isEmptyStyles:function(g){if(!this.styles)return!0;var w=0,p=g+1,v,y,S=!1,T=this._styleMap[g],C=this._styleMap[g+1];T&&(g=T.line,w=T.offset),C&&(p=C.line,S=p===g,v=C.offset),y=typeof g>"u"?this.styles:{line:this.styles[g]};for(var M in y)for(var A in y[M])if(A>=w&&(!S||A<v))for(var P in y[M][A])return!1;return!0},_getStyleDeclaration:function(g,w){if(this._styleMap&&!this.isWrapping){var p=this._styleMap[g];if(!p)return null;g=p.line,w=p.offset+w}return this.callSuper("_getStyleDeclaration",g,w)},_setStyleDeclaration:function(g,w,p){var v=this._styleMap[g];g=v.line,w=v.offset+w,this.styles[g][w]=p},_deleteStyleDeclaration:function(g,w){var p=this._styleMap[g];g=p.line,w=p.offset+w,delete this.styles[g][w]},_getLineStyle:function(g){var w=this._styleMap[g];return!!this.styles[w.line]},_setLineStyle:function(g){var w=this._styleMap[g];this.styles[w.line]={}},_wrapText:function(g,w){var p=[],v;for(this.isWrapping=!0,v=0;v<g.length;v++)p=p.concat(this._wrapLine(g[v],v,w));return this.isWrapping=!1,p},_measureWord:function(g,w,p){var v=0,y,S=!0;p=p||0;for(var T=0,C=g.length;T<C;T++){var M=this._getGraphemeBox(g[T],w,T+p,y,S);v+=M.kernedWidth,y=g[T]}return v},_wrapLine:function(g,w,p,ae){var y=0,S=this.splitByGrapheme,T=[],C=[],M=S?h.util.string.graphemeSplit(g):g.split(this._wordJoiners),A="",P=0,L=S?"":" ",R=0,j=0,z=0,$=!0,Y=this._getWidthOfCharSpacing(),ae=ae||0;M.length===0&&M.push([]),p-=ae;for(var K=0;K<M.length;K++)A=S?M[K]:h.util.string.graphemeSplit(M[K]),R=this._measureWord(A,w,P),P+=A.length,y+=j+R-Y,y>p&&!$?(T.push(C),C=[],y=R,$=!0):y+=Y,!$&&!S&&C.push(L),C=C.concat(A),j=S?0:this._measureWord([L],w,P),P++,$=!1,R>z&&(z=R);return K&&T.push(C),z+ae>this.dynamicMinWidth&&(this.dynamicMinWidth=z-Y+ae),T},isEndOfWrapping:function(g){return!this._styleMap[g+1]||this._styleMap[g+1].line!==this._styleMap[g].line},missingNewlineOffset:function(g){return this.splitByGrapheme?this.isEndOfWrapping(g)?1:0:1},_splitTextIntoLines:function(g){for(var w=h.Text.prototype._splitTextIntoLines.call(this,g),p=this._wrapText(w.lines,this.width),v=new Array(p.length),y=0;y<p.length;y++)v[y]=p[y].join("");return w.lines=v,w.graphemeLines=p,w},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var g={};for(var w in this._styleMap)this._textLines[w]&&(g[this._styleMap[w].line]=1);for(var w in this.styles)g[w]||delete this.styles[w]},toObject:function(g){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(g))}}),h.Textbox.fromObject=function(g,w){return h.Object._fromObject("Textbox",g,w,"text")}}(c),function(){var m=d.controlsUtils,h=m.scaleSkewCursorStyleHandler,g=m.scaleCursorStyleHandler,w=m.scalingEqually,p=m.scalingYOrSkewingX,v=m.scalingXOrSkewingY,y=m.scaleOrSkewActionName,S=d.Object.prototype.controls;if(S.ml=new d.Control({x:-.5,y:0,cursorStyleHandler:h,actionHandler:v,getActionName:y}),S.mr=new d.Control({x:.5,y:0,cursorStyleHandler:h,actionHandler:v,getActionName:y}),S.mb=new d.Control({x:0,y:.5,cursorStyleHandler:h,actionHandler:p,getActionName:y}),S.mt=new d.Control({x:0,y:-.5,cursorStyleHandler:h,actionHandler:p,getActionName:y}),S.tl=new d.Control({x:-.5,y:-.5,cursorStyleHandler:g,actionHandler:w}),S.tr=new d.Control({x:.5,y:-.5,cursorStyleHandler:g,actionHandler:w}),S.bl=new d.Control({x:-.5,y:.5,cursorStyleHandler:g,actionHandler:w}),S.br=new d.Control({x:.5,y:.5,cursorStyleHandler:g,actionHandler:w}),S.mtr=new d.Control({x:0,y:-.5,actionHandler:m.rotationWithSnapping,cursorStyleHandler:m.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),d.Textbox){var T=d.Textbox.prototype.controls={};T.mtr=S.mtr,T.tr=S.tr,T.br=S.br,T.tl=S.tl,T.bl=S.bl,T.mt=S.mt,T.mb=S.mb,T.mr=new d.Control({x:.5,y:0,actionHandler:m.changeWidth,cursorStyleHandler:h,actionName:"resizing"}),T.ml=new d.Control({x:-.5,y:0,actionHandler:m.changeWidth,cursorStyleHandler:h,actionName:"resizing"})}}()},3053:function(s,c,l){var d=l(602);function f(b,x,k){var E,m;if(k=k||0,!d(x))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(x,b,k);for(m=x.length,E=k;k>=0&&E<m;E+=1)if(x[E]===b)return E;return-1}s.exports=f},8592:function(s,c,l){var d=l(602),f=l(6092),b=l(5573);function x(k,E,m){d(k)?f(k,E,m):b(k,E,m)}s.exports=x},6092:function(s){function c(l,d,f){var b=0,x=l.length;for(f=f||null;b<x&&d.call(f,l[b],b,l)!==!1;b+=1);}s.exports=c},5573:function(s){function c(l,d,f){var b;f=f||null;for(b in l)if(l.hasOwnProperty(b)&&d.call(f,l[b],b,l)===!1)break}s.exports=c},9052:function(s,c,l){var d=l(961),f=l(9886),b=l(2560),x=l(5393),k=l(602),E=l(5183),m=l(8592),h=/\s+/g;function g(){this.events=null,this.contexts=null}g.mixin=function(w){d(w.prototype,g.prototype)},g.prototype._getHandlerItem=function(w,p){var v={handler:w};return p&&(v.context=p),v},g.prototype._safeEvent=function(w){var p=this.events,v;return p||(p=this.events={}),w&&(v=p[w],v||(v=[],p[w]=v),p=v),p},g.prototype._safeContext=function(){var w=this.contexts;return w||(w=this.contexts=[]),w},g.prototype._indexOfContext=function(w){for(var p=this._safeContext(),v=0;p[v];){if(w===p[v][0])return v;v+=1}return-1},g.prototype._memorizeContext=function(w){var p,v;f(w)&&(p=this._safeContext(),v=this._indexOfContext(w),v>-1?p[v][1]+=1:p.push([w,1]))},g.prototype._forgetContext=function(w){var p,v;f(w)&&(p=this._safeContext(),v=this._indexOfContext(w),v>-1&&(p[v][1]-=1,p[v][1]<=0&&p.splice(v,1)))},g.prototype._bindEvent=function(w,p,v){var y=this._safeEvent(w);this._memorizeContext(v),y.push(this._getHandlerItem(p,v))},g.prototype.on=function(w,p,v){var y=this;b(w)?(w=w.split(h),m(w,function(S){y._bindEvent(S,p,v)})):x(w)&&(v=p,m(w,function(S,T){y.on(T,S,v)}))},g.prototype.once=function(w,p,v){var y=this;if(x(w)){v=p,m(w,function(T,C){y.once(C,T,v)});return}function S(){p.apply(v,arguments),y.off(w,S,v)}this.on(w,S,v)},g.prototype._spliceMatches=function(w,p){var v=0,y;if(k(w))for(y=w.length;v<y;v+=1)p(w[v])===!0&&(w.splice(v,1),y-=1,v-=1)},g.prototype._matchHandler=function(w){var p=this;return function(v){var y=w===v.handler;return y&&p._forgetContext(v.context),y}},g.prototype._matchContext=function(w){var p=this;return function(v){var y=w===v.context;return y&&p._forgetContext(v.context),y}},g.prototype._matchHandlerAndContext=function(w,p){var v=this;return function(y){var S=w===y.handler,T=p===y.context,C=S&&T;return C&&v._forgetContext(y.context),C}},g.prototype._offByEventName=function(w,p){var v=this,y=E(p),S=v._matchHandler(p);w=w.split(h),m(w,function(T){var C=v._safeEvent(T);y?v._spliceMatches(C,S):(m(C,function(M){v._forgetContext(M.context)}),v.events[T]=[])})},g.prototype._offByHandler=function(w){var p=this,v=this._matchHandler(w);m(this._safeEvent(),function(y){p._spliceMatches(y,v)})},g.prototype._offByObject=function(w,p){var v=this,y;this._indexOfContext(w)<0?m(w,function(S,T){v.off(T,S)}):b(p)?(y=this._matchContext(w),v._spliceMatches(this._safeEvent(p),y)):E(p)?(y=this._matchHandlerAndContext(p,w),m(this._safeEvent(),function(S){v._spliceMatches(S,y)})):(y=this._matchContext(w),m(this._safeEvent(),function(S){v._spliceMatches(S,y)}))},g.prototype.off=function(w,p){b(w)?this._offByEventName(w,p):arguments.length?E(w)?this._offByHandler(w):x(w)&&this._offByObject(w,p):(this.events={},this.contexts=[])},g.prototype.fire=function(w){this.invoke.apply(this,arguments)},g.prototype.invoke=function(w){var p,v,y,S;if(!this.hasListener(w))return!0;for(p=this._safeEvent(w),v=Array.prototype.slice.call(arguments,1),y=0;p[y];){if(S=p[y],S.handler.apply(S.context,v)===!1)return!1;y+=1}return!0},g.prototype.hasListener=function(w){return this.getListenerLength(w)>0},g.prototype.getListenerLength=function(w){var p=this._safeEvent(w);return p.length},s.exports=g},961:function(s){function c(l,d){var f=Object.prototype.hasOwnProperty,b,x,k,E;for(k=1,E=arguments.length;k<E;k+=1){b=arguments[k];for(x in b)f.call(b,x)&&(l[x]=b[x])}return l}s.exports=c},1610:function(s,c,l){var d=l(5695),f=l(3778);function b(x,k){for(var E=arguments,m=E[0],h=1,g=E.length;h<g;h+=1){if(d(m)||f(m))return;m=m[E[h]]}return m}s.exports=b},4564:function(s,c,l){var d=l(5573);function f(b,x){var k=document.createElement("img"),E="";return d(x,function(m,h){E+="&"+h+"="+m}),E=E.substring(1),k.src=b+"?"+E,k.style.display="none",document.body.appendChild(k),document.body.removeChild(k),k}s.exports=f},4729:function(s,c,l){var d=l(5695),f=l(4564),b=7*24*60*60*1e3;function x(E){var m=new Date().getTime();return m-E>b}function k(E,m){var h="https://www.google-analytics.com/collect",g=location.hostname,w="event",p="use",v="TOAST UI "+E+" for "+g+": Statistics",y=window.localStorage.getItem(v);!d(window.tui)&&window.tui.usageStatistics===!1||y&&!x(y)||(window.localStorage.setItem(v,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&f(h,{v:1,t:w,tid:m,cid:g,dp:g,dh:E,el:E,ec:p})},1e3))}s.exports=k},602:function(s){function c(l){return l instanceof Array}s.exports=c},9886:function(s,c,l){var d=l(5695),f=l(3778);function b(x){return!d(x)&&!f(x)}s.exports=b},5183:function(s){function c(l){return l instanceof Function}s.exports=c},3778:function(s){function c(l){return l===null}s.exports=c},5393:function(s){function c(l){return l===Object(l)}s.exports=c},2560:function(s){function c(l){return typeof l=="string"||l instanceof String}s.exports=c},5695:function(s){function c(l){return l===void 0}s.exports=c},4426:function(s,c,l){s.exports=l(4486)},9406:function(s,c,l){s.exports=l(4877)},789:function(s,c,l){s.exports=l(7178)},381:function(s,c,l){s.exports=l(5603)},7636:function(s,c,l){s.exports=l(1206)},1899:function(s,c,l){s.exports=l(6174)},899:function(s,c,l){s.exports=l(57)},8005:function(s,c,l){s.exports=l(4741)},6562:function(s,c,l){s.exports=l(8368)},9131:function(s,c,l){s.exports=l(3739)},4383:function(s,c,l){s.exports=l(172)},6065:function(s,c,l){s.exports=l(4963)},1734:function(s,c,l){s.exports=l(7820)},2461:function(s,c,l){s.exports=l(5636)},5214:function(s,c,l){s.exports=l(5059)},6397:function(s,c,l){s.exports=l(3969)},8189:function(s,c,l){s.exports=l(6618)},9146:function(s,c,l){s.exports=l(5279)},4496:function(s,c,l){s.exports=l(9562)},3972:function(s,c,l){s.exports=l(652)},7172:function(s,c,l){s.exports=l(2813)},1845:function(s,c,l){s.exports=l(8664)},662:function(s,c,l){s.exports=l(1457)},711:function(s,c,l){s.exports=l(2937)},6623:function(s,c,l){s.exports=l(9297)},7077:function(s,c,l){s.exports=l(8026)},9856:function(s,c,l){s.exports=l(2044)},4230:function(s,c,l){s.exports=l(2214)},184:function(s,c,l){s.exports=l(9256)},3742:function(s,c,l){s.exports=l(5659)},1801:function(s){var c={rect:1,circle:2,triangle:1},l={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function d(h){var g=h.originX,w=h.originY,p=g.substring(0,1)+w.substring(0,1);h.startPoint=h.origins[p]}function f(h,g,w){var p=h.x,v=h.y,y=g.x,S=g.y,T=w*Math.PI/180,C=(y-p)*Math.cos(T)-(S-v)*Math.sin(T)+p,M=(y-p)*Math.sin(T)+(S-v)*Math.cos(T)+v;return{originX:p>C?"right":"left",originY:v>M?"bottom":"top"}}function b(h){return h.originX==="center"&&h.originY==="center"}function x(h,g){var w=g.getPointByOrigin("center","center"),p=-g.angle,v=f(w,h,p),y=v.originX,S=v.originY,T=g.getPointByOrigin(y,S),C=g.left-(w.x-T.x),M=g.top-(w.y-T.y);g.set({originX:y,originY:S,left:C,top:M}),g.setCoords()}function k(h,g){var w=g.startPoint,p=-g.angle,v=f(w,h,p),y=v.originX,S=v.originY;g.setPositionByOrigin(w,y,S),g.setCoords()}function E(h){var g=h.type,w=h.scaleX,p=h.scaleY,v=l[g],y=h[v.w]*w,S=h[v.h]*p;if(h.isRegular){var T=Math.max(w,p);y=h[v.w]*T,S=h[v.h]*T}var C={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};C[v.w]=y,C[v.h]=S,h.set(C)}function m(h,g){var w=g.type,p=g.strokeWidth,v=g.startPoint,y=c[w],S=l[w],T=g.type==="triangle",C={},M=Math.abs(v.x-h.x)/y,A=Math.abs(v.y-h.y)/y;M>p&&(M-=p/y),A>p&&(A-=p/y),g.isRegular&&(M=A=Math.max(M,A),T&&(A=Math.sqrt(3)/2*M)),C[S.w]=M,C[S.h]=A,g.set(C)}s.exports={setOrigins:function(g){var w=g.getPointByOrigin("left","top"),p=g.getPointByOrigin("right","top"),v=g.getPointByOrigin("right","bottom"),y=g.getPointByOrigin("left","bottom");g.origins={lt:w,rt:p,rb:v,lb:y}},resize:function(g,w,p){b(g)&&(x(w,g),d(g)),p?E(g):m(w,g),k(w,g)},adjustOriginToCenter:function(g){var w=g.getPointByOrigin("center","center"),p=g.originX,v=g.originY,y=g.getPointByOrigin(p,v),S=g.left+(w.x-y.x),T=g.top+(w.y-y.y);g.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:S,top:T}),g.setCoords()}}},2221:function(s,c,l){l(5454),l(9173);var d=l(7545);s.exports=d.Array.from},5078:function(s,c,l){l(8118);var d=l(7545);s.exports=d.Array.isArray},6135:function(s,c,l){l(9106);var d=l(5607);s.exports=d("Array").concat},9510:function(s,c,l){l(1710);var d=l(5607);s.exports=d("Array").fill},3971:function(s,c,l){l(3436);var d=l(5607);s.exports=d("Array").filter},98:function(s,c,l){l(9823);var d=l(5607);s.exports=d("Array").forEach},2089:function(s,c,l){l(2276);var d=l(5607);s.exports=d("Array").indexOf},6209:function(s,c,l){l(3838);var d=l(5607);s.exports=d("Array").map},2671:function(s,c,l){l(5818);var d=l(5607);s.exports=d("Array").slice},1375:function(s,c,l){l(2178);var d=l(5607);s.exports=d("Array").splice},3528:function(s,c,l){l(665);var d=l(5607);s.exports=d("Function").bind},5739:function(s,c,l){l(8939),l(5454);var d=l(8703);s.exports=d},278:function(s,c,l){var d=l(3528),f=Function.prototype;s.exports=function(b){var x=b.bind;return b===f||b instanceof Function&&x===f.bind?d:x}},1484:function(s,c,l){var d=l(6135),f=Array.prototype;s.exports=function(b){var x=b.concat;return b===f||b instanceof Array&&x===f.concat?d:x}},7731:function(s,c,l){var d=l(9510),f=Array.prototype;s.exports=function(b){var x=b.fill;return b===f||b instanceof Array&&x===f.fill?d:x}},3669:function(s,c,l){var d=l(3971),f=Array.prototype;s.exports=function(b){var x=b.filter;return b===f||b instanceof Array&&x===f.filter?d:x}},2604:function(s,c,l){var d=l(2089),f=Array.prototype;s.exports=function(b){var x=b.indexOf;return b===f||b instanceof Array&&x===f.indexOf?d:x}},263:function(s,c,l){var d=l(6209),f=Array.prototype;s.exports=function(b){var x=b.map;return b===f||b instanceof Array&&x===f.map?d:x}},7663:function(s,c,l){var d=l(2671),f=Array.prototype;s.exports=function(b){var x=b.slice;return b===f||b instanceof Array&&x===f.slice?d:x}},5063:function(s,c,l){var d=l(1375),f=Array.prototype;s.exports=function(b){var x=b.splice;return b===f||b instanceof Array&&x===f.splice?d:x}},6813:function(s,c,l){var d=l(3842),f=String.prototype;s.exports=function(b){var x=b.trim;return typeof b=="string"||b===f||b instanceof String&&x===f.trim?d:x}},6285:function(s,c,l){l(2666);var d=l(7545);s.exports=d.Number.parseInt},3213:function(s,c,l){l(3113);var d=l(7545),f=d.Object;s.exports=function(x,k){return f.create(x,k)}},3512:function(s,c,l){l(297);var d=l(7545),f=d.Object,b=s.exports=function(k,E,m){return f.defineProperty(k,E,m)};f.defineProperty.sham&&(b.sham=!0)},8168:function(s,c,l){l(9234);var d=l(7545);s.exports=d.Object.getPrototypeOf},8651:function(s,c,l){l(2647);var d=l(7545);s.exports=d.Object.keys},3083:function(s,c,l){l(3222);var d=l(7545);s.exports=d.Object.setPrototypeOf},2987:function(s,c,l){l(4859);var d=l(7545);s.exports=d.parseFloat},2239:function(s,c,l){l(5706);var d=l(7545);s.exports=d.parseInt},3154:function(s,c,l){l(4242),l(8939),l(6663),l(9021),l(7884),l(8885),l(1868),l(5454);var d=l(7545);s.exports=d.Promise},6577:function(s,c,l){l(5397);var d=l(7545);s.exports=d.Reflect.construct},3842:function(s,c,l){l(957);var d=l(5607);s.exports=d("String").trim},5008:function(s,c,l){l(9106),l(6663),l(6187),l(9781),l(492),l(6681),l(9594),l(3665),l(9017),l(1250),l(9786),l(503),l(6565),l(9322),l(3610),l(6886),l(3514),l(8671),l(8556),l(1367);var d=l(7545);s.exports=d.Symbol},994:function(s,c,l){l(8939),l(6663),l(5454),l(3665);var d=l(9207);s.exports=d.f("iterator")},2813:function(s,c,l){var d=l(3822);s.exports=d},8664:function(s,c,l){var d=l(1434);s.exports=d},1457:function(s,c,l){var d=l(7710);s.exports=d},2937:function(s,c,l){var d=l(4741);s.exports=d},9297:function(s,c,l){var d=l(4963);s.exports=d},8026:function(s,c,l){var d=l(7820);s.exports=d},2044:function(s,c,l){var d=l(8980);s.exports=d},2214:function(s,c,l){var d=l(6672);s.exports=d},9256:function(s,c,l){var d=l(2285);l(177),l(9031),l(6658),l(1875),l(8658),l(4592),l(6680),s.exports=d},5659:function(s,c,l){var d=l(8535);s.exports=d},6235:function(s,c,l){var d=l(6447),f=l(9288);s.exports=function(b){if(d(b))return b;throw TypeError(f(b)+" is not a function")}},1404:function(s,c,l){var d=l(2091),f=l(9288);s.exports=function(b){if(d(b))return b;throw TypeError(f(b)+" is not a constructor")}},7757:function(s,c,l){var d=l(6447);s.exports=function(f){if(typeof f=="object"||d(f))return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},7423:function(s){s.exports=function(){}},6961:function(s){s.exports=function(c,l,d){if(c instanceof l)return c;throw TypeError("Incorrect "+(d?d+" ":"")+"invocation")}},1138:function(s,c,l){var d=l(5744);s.exports=function(f){if(d(f))return f;throw TypeError(String(f)+" is not an object")}},2724:function(s,c,l){var d=l(1795),f=l(7739),b=l(4104);s.exports=function(k){for(var E=d(this),m=b(E),h=arguments.length,g=f(h>1?arguments[1]:void 0,m),w=h>2?arguments[2]:void 0,p=w===void 0?m:f(w,m);p>g;)E[g++]=k;return E}},7397:function(s,c,l){var d=l(454).forEach,f=l(424),b=f("forEach");s.exports=b?[].forEach:function(k){return d(this,k,arguments.length>1?arguments[1]:void 0)}},841:function(s,c,l){var d=l(8043),f=l(1795),b=l(1635),x=l(6109),k=l(2091),E=l(4104),m=l(9361),h=l(1669),g=l(8703);s.exports=function(p){var v=f(p),y=k(this),S=arguments.length,T=S>1?arguments[1]:void 0,C=T!==void 0;C&&(T=d(T,S>2?arguments[2]:void 0,2));var M=g(v),A=0,P,L,R,j,z,$;if(M&&!(this==Array&&x(M)))for(j=h(v,M),z=j.next,L=y?new this:[];!(R=z.call(j)).done;A++)$=C?b(j,T,[R.value,A],!0):R.value,m(L,A,$);else for(P=E(v),L=y?new this(P):Array(P);P>A;A++)$=C?T(v[A],A):v[A],m(L,A,$);return L.length=A,L}},8180:function(s,c,l){var d=l(101),f=l(7739),b=l(4104),x=function(k){return function(E,m,h){var g=d(E),w=b(g),p=f(h,w),v;if(k&&m!=m){for(;w>p;)if(v=g[p++],v!=v)return!0}else for(;w>p;p++)if((k||p in g)&&g[p]===m)return k||p||0;return!k&&-1}};s.exports={includes:x(!0),indexOf:x(!1)}},454:function(s,c,l){var d=l(8043),f=l(2202),b=l(1795),x=l(4104),k=l(1321),E=[].push,m=function(h){var g=h==1,w=h==2,p=h==3,v=h==4,y=h==6,S=h==7,T=h==5||y;return function(C,M,A,P){for(var L=b(C),R=f(L),j=d(M,A,3),z=x(R),$=0,Y=P||k,ae=g?Y(C,z):w||S?Y(C,0):void 0,K,te;z>$;$++)if((T||$ in R)&&(K=R[$],te=j(K,$,L),h))if(g)ae[$]=te;else if(te)switch(h){case 3:return!0;case 5:return K;case 6:return $;case 2:E.call(ae,K)}else switch(h){case 4:return!1;case 7:E.call(ae,K)}return y?-1:p||v?v:ae}};s.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6),filterReject:m(7)}},242:function(s,c,l){var d=l(6192),f=l(8182),b=l(4218),x=f("species");s.exports=function(k){return b>=51||!d(function(){var E=[],m=E.constructor={};return m[x]=function(){return{foo:1}},E[k](Boolean).foo!==1})}},424:function(s,c,l){var d=l(6192);s.exports=function(f,b){var x=[][f];return!!x&&d(function(){x.call(null,b||function(){throw 1},1)})}},3712:function(s,c,l){var d=l(4770),f=l(2091),b=l(5744),x=l(8182),k=x("species");s.exports=function(E){var m;return d(E)&&(m=E.constructor,f(m)&&(m===Array||d(m.prototype))?m=void 0:b(m)&&(m=m[k],m===null&&(m=void 0))),m===void 0?Array:m}},1321:function(s,c,l){var d=l(3712);s.exports=function(f,b){return new(d(f))(b===0?0:b)}},1635:function(s,c,l){var d=l(1138),f=l(6639);s.exports=function(b,x,k,E){try{return E?x(d(k)[0],k[1]):x(k)}catch(m){f(b,"throw",m)}}},9770:function(s,c,l){var d=l(8182),f=d("iterator"),b=!1;try{var x=0,k={next:function(){return{done:!!x++}},return:function(){b=!0}};k[f]=function(){return this},Array.from(k,function(){throw 2})}catch{}s.exports=function(E,m){if(!m&&!b)return!1;var h=!1;try{var g={};g[f]=function(){return{next:function(){return{done:h=!0}}}},E(g)}catch{}return h}},9272:function(s){var c={}.toString;s.exports=function(l){return c.call(l).slice(8,-1)}},4696:function(s,c,l){var d=l(3471),f=l(6447),b=l(9272),x=l(8182),k=x("toStringTag"),E=b(function(){return arguments}())=="Arguments",m=function(h,g){try{return h[g]}catch{}};s.exports=d?b:function(h){var g,w,p;return h===void 0?"Undefined":h===null?"Null":typeof(w=m(g=Object(h),k))=="string"?w:E?b(g):(p=b(g))=="Object"&&f(g.callee)?"Arguments":p}},4635:function(s,c,l){var d=l(6192);s.exports=!d(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},5148:function(s,c,l){var d=l(4413).IteratorPrototype,f=l(2853),b=l(774),x=l(1284),k=l(7771),E=function(){return this};s.exports=function(m,h,g){var w=h+" Iterator";return m.prototype=f(d,{next:b(1,g)}),x(m,w,!1,!0),k[w]=E,m}},8711:function(s,c,l){var d=l(69),f=l(2760),b=l(774);s.exports=d?function(x,k,E){return f.f(x,k,b(1,E))}:function(x,k,E){return x[k]=E,x}},774:function(s){s.exports=function(c,l){return{enumerable:!(c&1),configurable:!(c&2),writable:!(c&4),value:l}}},9361:function(s,c,l){var d=l(77),f=l(2760),b=l(774);s.exports=function(x,k,E){var m=d(k);m in x?f.f(x,m,b(0,E)):x[m]=E}},7218:function(s,c,l){var d=l(3085),f=l(5546),b=l(2282),x=l(6447),k=l(5148),E=l(9341),m=l(4469),h=l(1284),g=l(8711),w=l(9482),p=l(8182),v=l(7771),y=l(4413),S=b.PROPER,T=b.CONFIGURABLE,C=y.IteratorPrototype,M=y.BUGGY_SAFARI_ITERATORS,A=p("iterator"),P="keys",L="values",R="entries",j=function(){return this};s.exports=function(z,$,Y,ae,K,te,G){k(Y,$,ae);var ue=function(X){if(X===K&&V)return V;if(!M&&X in de)return de[X];switch(X){case P:return function(){return new Y(this,X)};case L:return function(){return new Y(this,X)};case R:return function(){return new Y(this,X)}}return function(){return new Y(this)}},J=$+" Iterator",be=!1,de=z.prototype,ce=de[A]||de["@@iterator"]||K&&de[K],V=!M&&ce||ue(K),ne=$=="Array"&&de.entries||ce,Q,Z,he;if(ne&&(Q=E(ne.call(new z)),Q!==Object.prototype&&Q.next&&(!f&&E(Q)!==C&&(m?m(Q,C):x(Q[A])||w(Q,A,j)),h(Q,J,!0,!0),f&&(v[J]=j))),S&&K==L&&ce&&ce.name!==L&&(!f&&T?g(de,"name",L):(be=!0,V=function(){return ce.call(this)})),K)if(Z={values:ue(L),keys:te?V:ue(P),entries:ue(R)},G)for(he in Z)(M||be||!(he in de))&&w(de,he,Z[he]);else d({target:$,proto:!0,forced:M||be},Z);return(!f||G)&&de[A]!==V&&w(de,A,V,{name:K}),v[$]=V,Z}},1488:function(s,c,l){var d=l(7545),f=l(4500),b=l(9207),x=l(2760).f;s.exports=function(k){var E=d.Symbol||(d.Symbol={});f(E,k)||x(E,k,{value:b.f(k)})}},69:function(s,c,l){var d=l(6192);s.exports=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(s,c,l){var d=l(8576),f=l(5744),b=d.document,x=f(b)&&f(b.createElement);s.exports=function(k){return x?b.createElement(k):{}}},7365:function(s){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(s){s.exports=typeof window=="object"},9347:function(s,c,l){var d=l(8989),f=l(8576);s.exports=/ipad|iphone|ipod/i.test(d)&&f.Pebble!==void 0},9536:function(s,c,l){var d=l(8989);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(d)},224:function(s,c,l){var d=l(9272),f=l(8576);s.exports=d(f.process)=="process"},5914:function(s,c,l){var d=l(8989);s.exports=/web0s(?!.*chrome)/i.test(d)},8989:function(s,c,l){var d=l(150);s.exports=d("navigator","userAgent")||""},4218:function(s,c,l){var d=l(8576),f=l(8989),b=d.process,x=d.Deno,k=b&&b.versions||x&&x.version,E=k&&k.v8,m,h;E?(m=E.split("."),h=m[0]<4?1:m[0]+m[1]):f&&(m=f.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=f.match(/Chrome\/(\d+)/),m&&(h=m[1]))),s.exports=h&&+h},5607:function(s,c,l){var d=l(7545);s.exports=function(f){return d[f+"Prototype"]}},2952:function(s){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(s,c,l){var d=l(8576),f=l(6447),b=l(5141).f,x=l(9245),k=l(7545),E=l(8043),m=l(8711),h=l(4500),g=function(w){var p=function(v,y,S){if(this instanceof w){switch(arguments.length){case 0:return new w;case 1:return new w(v);case 2:return new w(v,y)}return new w(v,y,S)}return w.apply(this,arguments)};return p.prototype=w.prototype,p};s.exports=function(w,p){var v=w.target,y=w.global,S=w.stat,T=w.proto,C=y?d:S?d[v]:(d[v]||{}).prototype,M=y?k:k[v]||m(k,v,{})[v],A=M.prototype,P,L,R,j,z,$,Y,ae,K;for(j in p)P=x(y?j:v+(S?".":"#")+j,w.forced),L=!P&&C&&h(C,j),$=M[j],L&&(w.noTargetGet?(K=b(C,j),Y=K&&K.value):Y=C[j]),z=L&&Y?Y:p[j],!(L&&typeof $==typeof z)&&(w.bind&&L?ae=E(z,d):w.wrap&&L?ae=g(z):T&&f(z)?ae=E(Function.call,z):ae=z,(w.sham||z&&z.sham||$&&$.sham)&&m(ae,"sham",!0),m(M,j,ae),T&&(R=v+"Prototype",h(k,R)||m(k,R,{}),m(k[R],j,z),w.real&&A&&!A[j]&&m(A,j,z)))}},6192:function(s){s.exports=function(c){try{return!!c()}catch{return!0}}},8043:function(s,c,l){var d=l(6235);s.exports=function(f,b,x){if(d(f),b===void 0)return f;switch(x){case 0:return function(){return f.call(b)};case 1:return function(k){return f.call(b,k)};case 2:return function(k,E){return f.call(b,k,E)};case 3:return function(k,E,m){return f.call(b,k,E,m)}}return function(){return f.apply(b,arguments)}}},6782:function(s,c,l){var d=l(6235),f=l(5744),b=[].slice,x={},k=function(E,m,h){if(!(m in x)){for(var g=[],w=0;w<m;w++)g[w]="a["+w+"]";x[m]=Function("C,a","return new C("+g.join(",")+")")}return x[m](E,h)};s.exports=Function.bind||function(m){var h=d(this),g=b.call(arguments,1),w=function(){var v=g.concat(b.call(arguments));return this instanceof w?k(h,v.length,v):h.apply(m,v)};return f(h.prototype)&&(w.prototype=h.prototype),w}},2282:function(s,c,l){var d=l(69),f=l(4500),b=Function.prototype,x=d&&Object.getOwnPropertyDescriptor,k=f(b,"name"),E=k&&(function(){}).name==="something",m=k&&(!d||d&&x(b,"name").configurable);s.exports={EXISTS:k,PROPER:E,CONFIGURABLE:m}},150:function(s,c,l){var d=l(7545),f=l(8576),b=l(6447),x=function(k){return b(k)?k:void 0};s.exports=function(k,E){return arguments.length<2?x(d[k])||x(f[k]):d[k]&&d[k][E]||f[k]&&f[k][E]}},8703:function(s,c,l){var d=l(4696),f=l(5037),b=l(7771),x=l(8182),k=x("iterator");s.exports=function(E){if(E!=null)return f(E,k)||f(E,"@@iterator")||b[d(E)]}},1669:function(s,c,l){var d=l(6235),f=l(1138),b=l(8703);s.exports=function(x,k){var E=arguments.length<2?b(x):k;if(d(E))return f(E.call(x));throw TypeError(String(x)+" is not iterable")}},5037:function(s,c,l){var d=l(6235);s.exports=function(f,b){var x=f[b];return x==null?void 0:d(x)}},8576:function(s,c,l){var d=function(f){return f&&f.Math==Math&&f};s.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof l.g=="object"&&l.g)||function(){return this}()||Function("return this")()},4500:function(s,c,l){var d=l(1795),f={}.hasOwnProperty;s.exports=Object.hasOwn||function(x,k){return f.call(d(x),k)}},4535:function(s){s.exports={}},3681:function(s,c,l){var d=l(8576);s.exports=function(f,b){var x=d.console;x&&x.error&&(arguments.length===1?x.error(f):x.error(f,b))}},7403:function(s,c,l){var d=l(150);s.exports=d("document","documentElement")},188:function(s,c,l){var d=l(69),f=l(6192),b=l(7449);s.exports=!d&&!f(function(){return Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(s,c,l){var d=l(6192),f=l(9272),b="".split;s.exports=d(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return f(x)=="String"?b.call(x,""):Object(x)}:Object},9516:function(s,c,l){var d=l(6447),f=l(6434),b=Function.toString;d(f.inspectSource)||(f.inspectSource=function(x){return b.call(x)}),s.exports=f.inspectSource},273:function(s,c,l){var d=l(5744),f=l(8711);s.exports=function(b,x){d(x)&&"cause"in x&&f(b,"cause",b.cause)}},3326:function(s,c,l){var d=l(8921),f=l(8576),b=l(5744),x=l(8711),k=l(4500),E=l(6434),m=l(9766),h=l(4535),g="Object already initialized",w=f.WeakMap,p,v,y,S=function(R){return y(R)?v(R):p(R,{})},T=function(R){return function(j){var z;if(!b(j)||(z=v(j)).type!==R)throw TypeError("Incompatible receiver, "+R+" required");return z}};if(d||E.state){var C=E.state||(E.state=new w),M=C.get,A=C.has,P=C.set;p=function(R,j){if(A.call(C,R))throw new TypeError(g);return j.facade=R,P.call(C,R,j),j},v=function(R){return M.call(C,R)||{}},y=function(R){return A.call(C,R)}}else{var L=m("state");h[L]=!0,p=function(R,j){if(k(R,L))throw new TypeError(g);return j.facade=R,x(R,L,j),j},v=function(R){return k(R,L)?R[L]:{}},y=function(R){return k(R,L)}}s.exports={set:p,get:v,has:y,enforce:S,getterFor:T}},6109:function(s,c,l){var d=l(8182),f=l(7771),b=d("iterator"),x=Array.prototype;s.exports=function(k){return k!==void 0&&(f.Array===k||x[b]===k)}},4770:function(s,c,l){var d=l(9272);s.exports=Array.isArray||function(b){return d(b)=="Array"}},6447:function(s){s.exports=function(c){return typeof c=="function"}},2091:function(s,c,l){var d=l(6192),f=l(6447),b=l(4696),x=l(150),k=l(9516),E=[],m=x("Reflect","construct"),h=/^\s*(?:class|function)\b/,g=h.exec,w=!h.exec(function(){}),p=function(y){if(!f(y))return!1;try{return m(Object,E,y),!0}catch{return!1}},v=function(y){if(!f(y))return!1;switch(b(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return w||!!g.call(h,k(y))};s.exports=!m||d(function(){var y;return p(p.call)||!p(Object)||!p(function(){y=!0})||y})?v:p},9245:function(s,c,l){var d=l(6192),f=l(6447),b=/#|\.prototype\./,x=function(g,w){var p=E[k(g)];return p==h?!0:p==m?!1:f(w)?d(w):!!w},k=x.normalize=function(g){return String(g).replace(b,".").toLowerCase()},E=x.data={},m=x.NATIVE="N",h=x.POLYFILL="P";s.exports=x},5744:function(s,c,l){var d=l(6447);s.exports=function(f){return typeof f=="object"?f!==null:d(f)}},5546:function(s){s.exports=!0},3236:function(s,c,l){var d=l(6447),f=l(150),b=l(615);s.exports=b?function(x){return typeof x=="symbol"}:function(x){var k=f("Symbol");return d(k)&&Object(x)instanceof k}},3442:function(s,c,l){var d=l(1138),f=l(6109),b=l(4104),x=l(8043),k=l(1669),E=l(8703),m=l(6639),h=function(g,w){this.stopped=g,this.result=w};s.exports=function(g,w,p){var v=p&&p.that,y=!!(p&&p.AS_ENTRIES),S=!!(p&&p.IS_ITERATOR),T=!!(p&&p.INTERRUPTED),C=x(w,v,1+y+T),M,A,P,L,R,j,z,$=function(ae){return M&&m(M,"normal",ae),new h(!0,ae)},Y=function(ae){return y?(d(ae),T?C(ae[0],ae[1],$):C(ae[0],ae[1])):T?C(ae,$):C(ae)};if(S)M=g;else{if(A=E(g),!A)throw TypeError(String(g)+" is not iterable");if(f(A)){for(P=0,L=b(g);L>P;P++)if(R=Y(g[P]),R&&R instanceof h)return R;return new h(!1)}M=k(g,A)}for(j=M.next;!(z=j.call(M)).done;){try{R=Y(z.value)}catch(ae){m(M,"throw",ae)}if(typeof R=="object"&&R&&R instanceof h)return R}return new h(!1)}},6639:function(s,c,l){var d=l(1138),f=l(5037);s.exports=function(b,x,k){var E,m;d(b);try{if(E=f(b,"return"),!E){if(x==="throw")throw k;return k}E=E.call(b)}catch(h){m=!0,E=h}if(x==="throw")throw k;if(m)throw E;return d(E),k}},4413:function(s,c,l){var d=l(6192),f=l(6447),b=l(2853),x=l(9341),k=l(9482),E=l(8182),m=l(5546),h=E("iterator"),g=!1,w,p,v;[].keys&&(v=[].keys(),"next"in v?(p=x(x(v)),p!==Object.prototype&&(w=p)):g=!0);var y=w==null||d(function(){var S={};return w[h].call(S)!==S});y?w={}:m&&(w=b(w)),f(w[h])||k(w,h,function(){return this}),s.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:g}},7771:function(s){s.exports={}},4104:function(s,c,l){var d=l(8445);s.exports=function(f){return d(f.length)}},2950:function(s,c,l){var d=l(8576),f=l(5141).f,b=l(7160).set,x=l(9536),k=l(9347),E=l(5914),m=l(224),h=d.MutationObserver||d.WebKitMutationObserver,g=d.document,w=d.process,p=d.Promise,v=f(d,"queueMicrotask"),y=v&&v.value,S,T,C,M,A,P,L,R;y||(S=function(){var j,z;for(m&&(j=w.domain)&&j.exit();T;){z=T.fn,T=T.next;try{z()}catch($){throw T?M():C=void 0,$}}C=void 0,j&&j.enter()},!x&&!m&&!E&&h&&g?(A=!0,P=g.createTextNode(""),new h(S).observe(P,{characterData:!0}),M=function(){P.data=A=!A}):!k&&p&&p.resolve?(L=p.resolve(void 0),L.constructor=p,R=L.then,M=function(){R.call(L,S)}):m?M=function(){w.nextTick(S)}:M=function(){b.call(d,S)}),s.exports=y||function(j){var z={fn:j,next:void 0};C&&(C.next=z),T||(T=z,M()),C=z}},4471:function(s,c,l){var d=l(8576);s.exports=d.Promise},3045:function(s,c,l){var d=l(4218),f=l(6192);s.exports=!!Object.getOwnPropertySymbols&&!f(function(){var b=Symbol();return!String(b)||!(Object(b)instanceof Symbol)||!Symbol.sham&&d&&d<41})},4551:function(s,c,l){var d=l(6192),f=l(8182),b=l(5546),x=f("iterator");s.exports=!d(function(){var k=new URL("b?a=1&b=2&c=3","http://a"),E=k.searchParams,m="";return k.pathname="c%20d",E.forEach(function(h,g){E.delete("b"),m+=g+h}),b&&!k.toJSON||!E.sort||k.href!=="http://a/c%20d?a=1&c=3"||E.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!E[x]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||m!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(s,c,l){var d=l(8576),f=l(6447),b=l(9516),x=d.WeakMap;s.exports=f(x)&&/native code/.test(b(x))},9438:function(s,c,l){var d=l(6235),f=function(b){var x,k;this.promise=new b(function(E,m){if(x!==void 0||k!==void 0)throw TypeError("Bad Promise constructor");x=E,k=m}),this.resolve=d(x),this.reject=d(k)};s.exports.f=function(b){return new f(b)}},15:function(s,c,l){var d=l(8576),f=l(6192),b=l(4845),x=l(4277).trim,k=l(1450),E=d.parseFloat,m=d.Symbol,h=m&&m.iterator,g=1/E(k+"-0")!==-1/0||h&&!f(function(){E(Object(h))});s.exports=g?function(p){var v=x(b(p)),y=E(v);return y===0&&v.charAt(0)=="-"?-0:y}:E},2558:function(s,c,l){var d=l(8576),f=l(6192),b=l(4845),x=l(4277).trim,k=l(1450),E=d.parseInt,m=d.Symbol,h=m&&m.iterator,g=/^[+-]?0[Xx]/,w=E(k+"08")!==8||E(k+"0x16")!==22||h&&!f(function(){E(Object(h))});s.exports=w?function(v,y){var S=x(b(v));return E(S,y>>>0||(g.test(S)?16:10))}:E},2503:function(s,c,l){var d=l(69),f=l(6192),b=l(7653),x=l(4750),k=l(6007),E=l(1795),m=l(2202),h=Object.assign,g=Object.defineProperty;s.exports=!h||f(function(){if(d&&h({b:1},h(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var w={},p={},v=Symbol(),y="abcdefghijklmnopqrst";return w[v]=7,y.split("").forEach(function(S){p[S]=S}),h({},w)[v]!=7||b(h({},p)).join("")!=y})?function(p,v){for(var y=E(p),S=arguments.length,T=1,C=x.f,M=k.f;S>T;)for(var A=m(arguments[T++]),P=C?b(A).concat(C(A)):b(A),L=P.length,R=0,j;L>R;)j=P[R++],(!d||M.call(A,j))&&(y[j]=A[j]);return y}:h},2853:function(s,c,l){var d=l(1138),f=l(1187),b=l(2952),x=l(4535),k=l(7403),E=l(7449),m=l(9766),h=">",g="<",w="prototype",p="script",v=m("IE_PROTO"),y=function(){},S=function(P){return g+p+h+P+g+"/"+p+h},T=function(P){P.write(S("")),P.close();var L=P.parentWindow.Object;return P=null,L},C=function(){var P=E("iframe"),L="java"+p+":",R;return P.style.display="none",k.appendChild(P),P.src=String(L),R=P.contentWindow.document,R.open(),R.write(S("document.F=Object")),R.close(),R.F},M,A=function(){try{M=new ActiveXObject("htmlfile")}catch{}A=typeof document<"u"?document.domain&&M?T(M):C():T(M);for(var P=b.length;P--;)delete A[w][b[P]];return A()};x[v]=!0,s.exports=Object.create||function(L,R){var j;return L!==null?(y[w]=d(L),j=new y,y[w]=null,j[v]=L):j=A(),R===void 0?j:f(j,R)}},1187:function(s,c,l){var d=l(69),f=l(2760),b=l(1138),x=l(7653);s.exports=d?Object.defineProperties:function(E,m){b(E);for(var h=x(m),g=h.length,w=0,p;g>w;)f.f(E,p=h[w++],m[p]);return E}},2760:function(s,c,l){var d=l(69),f=l(188),b=l(1138),x=l(77),k=Object.defineProperty;c.f=d?k:function(m,h,g){if(b(m),h=x(h),b(g),f)try{return k(m,h,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(m[h]=g.value),m}},5141:function(s,c,l){var d=l(69),f=l(6007),b=l(774),x=l(101),k=l(77),E=l(4500),m=l(188),h=Object.getOwnPropertyDescriptor;c.f=d?h:function(w,p){if(w=x(w),p=k(p),m)try{return h(w,p)}catch{}if(E(w,p))return b(!f.f.call(w,p),w[p])}},4052:function(s,c,l){var d=l(101),f=l(2092).f,b={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],k=function(E){try{return f(E)}catch{return x.slice()}};s.exports.f=function(m){return x&&b.call(m)=="[object Window]"?k(m):f(d(m))}},2092:function(s,c,l){var d=l(7934),f=l(2952),b=f.concat("length","prototype");c.f=Object.getOwnPropertyNames||function(k){return d(k,b)}},4750:function(s,c){c.f=Object.getOwnPropertySymbols},9341:function(s,c,l){var d=l(4500),f=l(6447),b=l(1795),x=l(9766),k=l(4635),E=x("IE_PROTO"),m=Object.prototype;s.exports=k?Object.getPrototypeOf:function(h){var g=b(h);if(d(g,E))return g[E];var w=g.constructor;return f(w)&&g instanceof w?w.prototype:g instanceof Object?m:null}},7934:function(s,c,l){var d=l(4500),f=l(101),b=l(8180).indexOf,x=l(4535);s.exports=function(k,E){var m=f(k),h=0,g=[],w;for(w in m)!d(x,w)&&d(m,w)&&g.push(w);for(;E.length>h;)d(m,w=E[h++])&&(~b(g,w)||g.push(w));return g}},7653:function(s,c,l){var d=l(7934),f=l(2952);s.exports=Object.keys||function(x){return d(x,f)}},6007:function(s,c){var l={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,f=d&&!l.call({1:2},1);c.f=f?function(x){var k=d(this,x);return!!k&&k.enumerable}:l},4469:function(s,c,l){var d=l(1138),f=l(7757);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b=!1,x={},k;try{k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,k.call(x,[]),b=x instanceof Array}catch{}return function(m,h){return d(m),f(h),b?k.call(m,h):m.__proto__=h,m}}():void 0)},158:function(s,c,l){var d=l(3471),f=l(4696);s.exports=d?{}.toString:function(){return"[object "+f(this)+"]"}},380:function(s,c,l){var d=l(6447),f=l(5744);s.exports=function(b,x){var k,E;if(x==="string"&&d(k=b.toString)&&!f(E=k.call(b))||d(k=b.valueOf)&&!f(E=k.call(b))||x!=="string"&&d(k=b.toString)&&!f(E=k.call(b)))return E;throw TypeError("Can't convert object to primitive value")}},7545:function(s){s.exports={}},892:function(s){s.exports=function(c){try{return{error:!1,value:c()}}catch(l){return{error:!0,value:l}}}},9126:function(s,c,l){var d=l(1138),f=l(5744),b=l(9438);s.exports=function(x,k){if(d(x),f(k)&&k.constructor===x)return k;var E=b.f(x),m=E.resolve;return m(k),E.promise}},533:function(s,c,l){var d=l(9482);s.exports=function(f,b,x){for(var k in b)x&&x.unsafe&&f[k]?f[k]=b[k]:d(f,k,b[k],x);return f}},9482:function(s,c,l){var d=l(8711);s.exports=function(f,b,x,k){k&&k.enumerable?f[b]=x:d(f,b,x)}},3209:function(s){s.exports=function(c){if(c==null)throw TypeError("Can't call method on "+c);return c}},7613:function(s,c,l){var d=l(8576);s.exports=function(f,b){try{Object.defineProperty(d,f,{value:b,configurable:!0,writable:!0})}catch{d[f]=b}return b}},3656:function(s,c,l){var d=l(150),f=l(2760),b=l(8182),x=l(69),k=b("species");s.exports=function(E){var m=d(E),h=f.f;x&&m&&!m[k]&&h(m,k,{configurable:!0,get:function(){return this}})}},1284:function(s,c,l){var d=l(3471),f=l(2760).f,b=l(8711),x=l(4500),k=l(158),E=l(8182),m=E("toStringTag");s.exports=function(h,g,w,p){if(h){var v=w?h:h.prototype;x(v,m)||f(v,m,{configurable:!0,value:g}),p&&!d&&b(v,"toString",k)}}},9766:function(s,c,l){var d=l(8717),f=l(2759),b=d("keys");s.exports=function(x){return b[x]||(b[x]=f(x))}},6434:function(s,c,l){var d=l(8576),f=l(7613),b="__core-js_shared__",x=d[b]||f(b,{});s.exports=x},8717:function(s,c,l){var d=l(5546),f=l(6434);(s.exports=function(b,x){return f[b]||(f[b]=x!==void 0?x:{})})("versions",[]).push({version:"3.18.2",mode:d?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(s,c,l){var d=l(1138),f=l(1404),b=l(8182),x=b("species");s.exports=function(k,E){var m=d(k).constructor,h;return m===void 0||(h=d(m)[x])==null?E:f(h)}},863:function(s,c,l){var d=l(1941),f=l(4845),b=l(3209),x=function(k){return function(E,m){var h=f(b(E)),g=d(m),w=h.length,p,v;return g<0||g>=w?k?"":void 0:(p=h.charCodeAt(g),p<55296||p>56319||g+1===w||(v=h.charCodeAt(g+1))<56320||v>57343?k?h.charAt(g):p:k?h.slice(g,g+2):(p-55296<<10)+(v-56320)+65536)}};s.exports={codeAt:x(!1),charAt:x(!0)}},7977:function(s){var c=2147483647,l=36,d=1,f=26,b=38,x=700,k=72,E=128,m="-",h=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,w="Overflow: input needs wider integers to process",p=l-d,v=Math.floor,y=String.fromCharCode,S=function(A){for(var P=[],L=0,R=A.length;L<R;){var j=A.charCodeAt(L++);if(j>=55296&&j<=56319&&L<R){var z=A.charCodeAt(L++);(z&64512)==56320?P.push(((j&1023)<<10)+(z&1023)+65536):(P.push(j),L--)}else P.push(j)}return P},T=function(A){return A+22+75*(A<26)},C=function(A,P,L){var R=0;for(A=L?v(A/x):A>>1,A+=v(A/P);A>p*f>>1;R+=l)A=v(A/p);return v(R+(p+1)*A/(A+b))},M=function(A){var P=[];A=S(A);var L=A.length,R=E,j=0,z=k,$,Y;for($=0;$<A.length;$++)Y=A[$],Y<128&&P.push(y(Y));var ae=P.length,K=ae;for(ae&&P.push(m);K<L;){var te=c;for($=0;$<A.length;$++)Y=A[$],Y>=R&&Y<te&&(te=Y);var G=K+1;if(te-R>v((c-j)/G))throw RangeError(w);for(j+=(te-R)*G,R=te,$=0;$<A.length;$++){if(Y=A[$],Y<R&&++j>c)throw RangeError(w);if(Y==R){for(var ue=j,J=l;;J+=l){var be=J<=z?d:J>=z+f?f:J-z;if(ue<be)break;var de=ue-be,ce=l-be;P.push(y(T(be+de%ce))),ue=v(de/ce)}P.push(y(T(ue))),z=C(j,G,K==ae),j=0,++K}}++j,++R}return P.join("")};s.exports=function(A){var P=[],L=A.toLowerCase().replace(g,".").split("."),R,j;for(R=0;R<L.length;R++)j=L[R],P.push(h.test(j)?"xn--"+M(j):j);return P.join(".")}},6815:function(s,c,l){var d=l(2282).PROPER,f=l(6192),b=l(1450),x="";s.exports=function(k){return f(function(){return!!b[k]()||x[k]()!==x||d&&b[k].name!==k})}},4277:function(s,c,l){var d=l(3209),f=l(4845),b=l(1450),x="["+b+"]",k=RegExp("^"+x+x+"*"),E=RegExp(x+x+"*$"),m=function(h){return function(g){var w=f(d(g));return h&1&&(w=w.replace(k,"")),h&2&&(w=w.replace(E,"")),w}};s.exports={start:m(1),end:m(2),trim:m(3)}},7160:function(s,c,l){var d=l(8576),f=l(6447),b=l(6192),x=l(8043),k=l(7403),E=l(7449),m=l(9536),h=l(224),g=d.setImmediate,w=d.clearImmediate,p=d.process,v=d.MessageChannel,y=d.Dispatch,S=0,T={},C="onreadystatechange",M,A,P,L;try{M=d.location}catch{}var R=function(Y){if(T.hasOwnProperty(Y)){var ae=T[Y];delete T[Y],ae()}},j=function(Y){return function(){R(Y)}},z=function(Y){R(Y.data)},$=function(Y){d.postMessage(String(Y),M.protocol+"//"+M.host)};(!g||!w)&&(g=function(ae){for(var K=[],te=arguments.length,G=1;te>G;)K.push(arguments[G++]);return T[++S]=function(){(f(ae)?ae:Function(ae)).apply(void 0,K)},A(S),S},w=function(ae){delete T[ae]},h?A=function(Y){p.nextTick(j(Y))}:y&&y.now?A=function(Y){y.now(j(Y))}:v&&!m?(P=new v,L=P.port2,P.port1.onmessage=z,A=x(L.postMessage,L,1)):d.addEventListener&&f(d.postMessage)&&!d.importScripts&&M&&M.protocol!=="file:"&&!b($)?(A=$,d.addEventListener("message",z,!1)):C in E("script")?A=function(Y){k.appendChild(E("script"))[C]=function(){k.removeChild(this),R(Y)}}:A=function(Y){setTimeout(j(Y),0)}),s.exports={set:g,clear:w}},7739:function(s,c,l){var d=l(1941),f=Math.max,b=Math.min;s.exports=function(x,k){var E=d(x);return E<0?f(E+k,0):b(E,k)}},101:function(s,c,l){var d=l(2202),f=l(3209);s.exports=function(b){return d(f(b))}},1941:function(s){var c=Math.ceil,l=Math.floor;s.exports=function(d){var f=+d;return f!==f||f===0?0:(f>0?l:c)(f)}},8445:function(s,c,l){var d=l(1941),f=Math.min;s.exports=function(b){return b>0?f(d(b),9007199254740991):0}},1795:function(s,c,l){var d=l(3209);s.exports=function(f){return Object(d(f))}},7888:function(s,c,l){var d=l(5744),f=l(3236),b=l(5037),x=l(380),k=l(8182),E=k("toPrimitive");s.exports=function(m,h){if(!d(m)||f(m))return m;var g=b(m,E),w;if(g){if(h===void 0&&(h="default"),w=g.call(m,h),!d(w)||f(w))return w;throw TypeError("Can't convert object to primitive value")}return h===void 0&&(h="number"),x(m,h)}},77:function(s,c,l){var d=l(7888),f=l(3236);s.exports=function(b){var x=d(b,"string");return f(x)?x:String(x)}},3471:function(s,c,l){var d=l(8182),f=d("toStringTag"),b={};b[f]="z",s.exports=String(b)==="[object z]"},4845:function(s,c,l){var d=l(4696);s.exports=function(f){if(d(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(f)}},9288:function(s){s.exports=function(c){try{return String(c)}catch{return"Object"}}},2759:function(s){var c=0,l=Math.random();s.exports=function(d){return"Symbol("+String(d===void 0?"":d)+")_"+(++c+l).toString(36)}},615:function(s,c,l){var d=l(3045);s.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(s,c,l){var d=l(8182);c.f=d},8182:function(s,c,l){var d=l(8576),f=l(8717),b=l(4500),x=l(2759),k=l(3045),E=l(615),m=f("wks"),h=d.Symbol,g=E?h:h&&h.withoutSetter||x;s.exports=function(w){return(!b(m,w)||!(k||typeof m[w]=="string"))&&(k&&b(h,w)?m[w]=h[w]:m[w]=g("Symbol."+w)),m[w]}},1450:function(s){s.exports=`	
\v\f\r \u2028\u2029\uFEFF`},4242:function(s,c,l){var d=l(3085),f=l(9341),b=l(4469),x=l(2853),k=l(8711),E=l(774),m=l(273),h=l(3442),g=l(4845),w=function(v,y){var S=this,T=arguments.length>2?arguments[2]:void 0;if(!(S instanceof w))return new w(v,y,T);b&&(S=b(new Error(void 0),f(S))),y!==void 0&&k(S,"message",g(y)),m(S,T);var C=[];return h(v,C.push,{that:C}),k(S,"errors",C),S};w.prototype=x(Error.prototype,{constructor:E(5,w),message:E(5,""),name:E(5,"AggregateError")}),d({global:!0},{AggregateError:w})},9106:function(s,c,l){var d=l(3085),f=l(6192),b=l(4770),x=l(5744),k=l(1795),E=l(4104),m=l(9361),h=l(1321),g=l(242),w=l(8182),p=l(4218),v=w("isConcatSpreadable"),y=9007199254740991,S="Maximum allowed index exceeded",T=p>=51||!f(function(){var P=[];return P[v]=!1,P.concat()[0]!==P}),C=g("concat"),M=function(P){if(!x(P))return!1;var L=P[v];return L!==void 0?!!L:b(P)},A=!T||!C;d({target:"Array",proto:!0,forced:A},{concat:function(L){var R=k(this),j=h(R,0),z=0,$,Y,ae,K,te;for($=-1,ae=arguments.length;$<ae;$++)if(te=$===-1?R:arguments[$],M(te)){if(K=E(te),z+K>y)throw TypeError(S);for(Y=0;Y<K;Y++,z++)Y in te&&m(j,z,te[Y])}else{if(z>=y)throw TypeError(S);m(j,z++,te)}return j.length=z,j}})},1710:function(s,c,l){var d=l(3085),f=l(2724),b=l(7423);d({target:"Array",proto:!0},{fill:f}),b("fill")},3436:function(s,c,l){var d=l(3085),f=l(454).filter,b=l(242),x=b("filter");d({target:"Array",proto:!0,forced:!x},{filter:function(E){return f(this,E,arguments.length>1?arguments[1]:void 0)}})},9823:function(s,c,l){var d=l(3085),f=l(7397);d({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},9173:function(s,c,l){var d=l(3085),f=l(841),b=l(9770),x=!b(function(k){Array.from(k)});d({target:"Array",stat:!0,forced:x},{from:f})},2276:function(s,c,l){var d=l(3085),f=l(8180).indexOf,b=l(424),x=[].indexOf,k=!!x&&1/[1].indexOf(1,-0)<0,E=b("indexOf");d({target:"Array",proto:!0,forced:k||!E},{indexOf:function(h){return k?x.apply(this,arguments)||0:f(this,h,arguments.length>1?arguments[1]:void 0)}})},8118:function(s,c,l){var d=l(3085),f=l(4770);d({target:"Array",stat:!0},{isArray:f})},8939:function(s,c,l){var d=l(101),f=l(7423),b=l(7771),x=l(3326),k=l(7218),E="Array Iterator",m=x.set,h=x.getterFor(E);s.exports=k(Array,"Array",function(g,w){m(this,{type:E,target:d(g),index:0,kind:w})},function(){var g=h(this),w=g.target,p=g.kind,v=g.index++;return!w||v>=w.length?(g.target=void 0,{value:void 0,done:!0}):p=="keys"?{value:v,done:!1}:p=="values"?{value:w[v],done:!1}:{value:[v,w[v]],done:!1}},"values"),b.Arguments=b.Array,f("keys"),f("values"),f("entries")},3838:function(s,c,l){var d=l(3085),f=l(454).map,b=l(242),x=b("map");d({target:"Array",proto:!0,forced:!x},{map:function(E){return f(this,E,arguments.length>1?arguments[1]:void 0)}})},5818:function(s,c,l){var d=l(3085),f=l(4770),b=l(2091),x=l(5744),k=l(7739),E=l(4104),m=l(101),h=l(9361),g=l(8182),w=l(242),p=w("slice"),v=g("species"),y=[].slice,S=Math.max;d({target:"Array",proto:!0,forced:!p},{slice:function(C,M){var A=m(this),P=E(A),L=k(C,P),R=k(M===void 0?P:M,P),j,z,$;if(f(A)&&(j=A.constructor,b(j)&&(j===Array||f(j.prototype))?j=void 0:x(j)&&(j=j[v],j===null&&(j=void 0)),j===Array||j===void 0))return y.call(A,L,R);for(z=new(j===void 0?Array:j)(S(R-L,0)),$=0;L<R;L++,$++)L in A&&h(z,$,A[L]);return z.length=$,z}})},2178:function(s,c,l){var d=l(3085),f=l(7739),b=l(1941),x=l(4104),k=l(1795),E=l(1321),m=l(9361),h=l(242),g=h("splice"),w=Math.max,p=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";d({target:"Array",proto:!0,forced:!g},{splice:function(T,C){var M=k(this),A=x(M),P=f(T,A),L=arguments.length,R,j,z,$,Y,ae;if(L===0?R=j=0:L===1?(R=0,j=A-P):(R=L-2,j=p(w(b(C),0),A-P)),A+R-j>v)throw TypeError(y);for(z=E(M,j),$=0;$<j;$++)Y=P+$,Y in M&&m(z,$,M[Y]);if(z.length=j,R<j){for($=P;$<A-j;$++)Y=$+j,ae=$+R,Y in M?M[ae]=M[Y]:delete M[ae];for($=A;$>A-j+R;$--)delete M[$-1]}else if(R>j)for($=A-j;$>P;$--)Y=$+j-1,ae=$+R-1,Y in M?M[ae]=M[Y]:delete M[ae];for($=0;$<R;$++)M[$+P]=arguments[$+2];return M.length=A-j+R,z}})},665:function(s,c,l){var d=l(3085),f=l(6782);d({target:"Function",proto:!0},{bind:f})},8671:function(s,c,l){var d=l(8576),f=l(1284);f(d.JSON,"JSON",!0)},8556:function(){},2666:function(s,c,l){var d=l(3085),f=l(2558);d({target:"Number",stat:!0,forced:Number.parseInt!=f},{parseInt:f})},3113:function(s,c,l){var d=l(3085),f=l(69),b=l(2853);d({target:"Object",stat:!0,sham:!f},{create:b})},297:function(s,c,l){var d=l(3085),f=l(69),b=l(2760);d({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperty:b.f})},9234:function(s,c,l){var d=l(3085),f=l(6192),b=l(1795),x=l(9341),k=l(4635),E=f(function(){x(1)});d({target:"Object",stat:!0,forced:E,sham:!k},{getPrototypeOf:function(h){return x(b(h))}})},2647:function(s,c,l){var d=l(3085),f=l(1795),b=l(7653),x=l(6192),k=x(function(){b(1)});d({target:"Object",stat:!0,forced:k},{keys:function(m){return b(f(m))}})},3222:function(s,c,l){var d=l(3085),f=l(4469);d({target:"Object",stat:!0},{setPrototypeOf:f})},6663:function(){},4859:function(s,c,l){var d=l(3085),f=l(15);d({global:!0,forced:parseFloat!=f},{parseFloat:f})},5706:function(s,c,l){var d=l(3085),f=l(2558);d({global:!0,forced:parseInt!=f},{parseInt:f})},7884:function(s,c,l){var d=l(3085),f=l(6235),b=l(9438),x=l(892),k=l(3442);d({target:"Promise",stat:!0},{allSettled:function(m){var h=this,g=b.f(h),w=g.resolve,p=g.reject,v=x(function(){var y=f(h.resolve),S=[],T=0,C=1;k(m,function(M){var A=T++,P=!1;S.push(void 0),C++,y.call(h,M).then(function(L){P||(P=!0,S[A]={status:"fulfilled",value:L},--C||w(S))},function(L){P||(P=!0,S[A]={status:"rejected",reason:L},--C||w(S))})}),--C||w(S)});return v.error&&p(v.value),g.promise}})},8885:function(s,c,l){var d=l(3085),f=l(6235),b=l(150),x=l(9438),k=l(892),E=l(3442),m="No one promise resolved";d({target:"Promise",stat:!0},{any:function(g){var w=this,p=x.f(w),v=p.resolve,y=p.reject,S=k(function(){var T=f(w.resolve),C=[],M=0,A=1,P=!1;E(g,function(L){var R=M++,j=!1;C.push(void 0),A++,T.call(w,L).then(function(z){j||P||(P=!0,v(z))},function(z){j||P||(j=!0,C[R]=z,--A||y(new(b("AggregateError"))(C,m)))})}),--A||y(new(b("AggregateError"))(C,m))});return S.error&&y(S.value),p.promise}})},1868:function(s,c,l){var d=l(3085),f=l(5546),b=l(4471),x=l(6192),k=l(150),E=l(6447),m=l(4743),h=l(9126),g=l(9482),w=!!b&&x(function(){b.prototype.finally.call({then:function(){}},function(){})});if(d({target:"Promise",proto:!0,real:!0,forced:w},{finally:function(v){var y=m(this,k("Promise")),S=E(v);return this.then(S?function(T){return h(y,v()).then(function(){return T})}:v,S?function(T){return h(y,v()).then(function(){throw T})}:v)}}),!f&&E(b)){var p=k("Promise").prototype.finally;b.prototype.finally!==p&&g(b.prototype,"finally",p,{unsafe:!0})}},9021:function(s,c,l){var d=l(3085),f=l(5546),b=l(8576),x=l(150),k=l(4471),E=l(9482),m=l(533),h=l(4469),g=l(1284),w=l(3656),p=l(6235),v=l(6447),y=l(5744),S=l(6961),T=l(9516),C=l(3442),M=l(9770),A=l(4743),P=l(7160).set,L=l(2950),R=l(9126),j=l(3681),z=l(9438),$=l(892),Y=l(3326),ae=l(9245),K=l(8182),te=l(2957),G=l(224),ue=l(4218),J=K("species"),be="Promise",de=Y.get,ce=Y.set,V=Y.getterFor(be),ne=k&&k.prototype,Q=k,Z=ne,he=b.TypeError,X=b.document,re=b.process,le=z.f,fe=le,ke=!!(X&&X.createEvent&&b.dispatchEvent),q=v(b.PromiseRejectionEvent),ie="unhandledrejection",we="rejectionhandled",Me=0,xe=1,ge=2,ye=1,se=2,me=!1,Ie,Pe,Se,Ce,pe=ae(be,function(){var Ne=T(Q),Le=Ne!==String(Q);if(!Le&&ue===66||f&&!Z.finally)return!0;if(ue>=51&&/native code/.test(Ne))return!1;var Je=new Q(function(Xe){Xe(1)}),it=function(Xe){Xe(function(){},function(){})},ct=Je.constructor={};return ct[J]=it,me=Je.then(function(){})instanceof it,me?!Le&&te&&!q:!0}),_e=pe||!M(function(Ne){Q.all(Ne).catch(function(){})}),Be=function(Ne){var Le;return y(Ne)&&v(Le=Ne.then)?Le:!1},Ke=function(Ne,Le){if(!Ne.notified){Ne.notified=!0;var Je=Ne.reactions;L(function(){for(var it=Ne.value,ct=Ne.state==xe,Xe=0;Je.length>Xe;){var Xn=Je[Xe++],pr=ct?Xn.ok:Xn.fail,ft=Xn.resolve,je=Xn.reject,bn=Xn.domain,Jt,nn,Pi;try{pr?(ct||(Ne.rejection===se&&nt(Ne),Ne.rejection=ye),pr===!0?Jt=it:(bn&&bn.enter(),Jt=pr(it),bn&&(bn.exit(),Pi=!0)),Jt===Xn.promise?je(he("Promise-chain cycle")):(nn=Be(Jt))?nn.call(Jt,ft,je):ft(Jt)):je(it)}catch(xi){bn&&!Pi&&bn.exit(),je(xi)}}Ne.reactions=[],Ne.notified=!1,Le&&!Ne.rejection&&vt(Ne)})}},ht=function(Ne,Le,Je){var it,ct;ke?(it=X.createEvent("Event"),it.promise=Le,it.reason=Je,it.initEvent(Ne,!1,!0),b.dispatchEvent(it)):it={promise:Le,reason:Je},!q&&(ct=b["on"+Ne])?ct(it):Ne===ie&&j("Unhandled promise rejection",Je)},vt=function(Ne){P.call(b,function(){var Le=Ne.facade,Je=Ne.value,it=At(Ne),ct;if(it&&(ct=$(function(){G?re.emit("unhandledRejection",Je,Le):ht(ie,Le,Je)}),Ne.rejection=G||At(Ne)?se:ye,ct.error))throw ct.value})},At=function(Ne){return Ne.rejection!==ye&&!Ne.parent},nt=function(Ne){P.call(b,function(){var Le=Ne.facade;G?re.emit("rejectionHandled",Le):ht(we,Le,Ne.value)})},qe=function(Ne,Le,Je){return function(it){Ne(Le,it,Je)}},ut=function(Ne,Le,Je){Ne.done||(Ne.done=!0,Je&&(Ne=Je),Ne.value=Le,Ne.state=ge,Ke(Ne,!0))},Mt=function(Ne,Le,Je){if(!Ne.done){Ne.done=!0,Je&&(Ne=Je);try{if(Ne.facade===Le)throw he("Promise can't be resolved itself");var it=Be(Le);it?L(function(){var ct={done:!1};try{it.call(Le,qe(Mt,ct,Ne),qe(ut,ct,Ne))}catch(Xe){ut(ct,Xe,Ne)}}):(Ne.value=Le,Ne.state=xe,Ke(Ne,!1))}catch(ct){ut({done:!1},ct,Ne)}}};if(pe&&(Q=function(Le){S(this,Q,be),p(Le),Ie.call(this);var Je=de(this);try{Le(qe(Mt,Je),qe(ut,Je))}catch(it){ut(Je,it)}},Z=Q.prototype,Ie=function(Le){ce(this,{type:be,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Me,value:void 0})},Ie.prototype=m(Z,{then:function(Le,Je){var it=V(this),ct=le(A(this,Q));return ct.ok=v(Le)?Le:!0,ct.fail=v(Je)&&Je,ct.domain=G?re.domain:void 0,it.parent=!0,it.reactions.push(ct),it.state!=Me&&Ke(it,!1),ct.promise},catch:function(Ne){return this.then(void 0,Ne)}}),Pe=function(){var Ne=new Ie,Le=de(Ne);this.promise=Ne,this.resolve=qe(Mt,Le),this.reject=qe(ut,Le)},z.f=le=function(Ne){return Ne===Q||Ne===Se?new Pe(Ne):fe(Ne)},!f&&v(k)&&ne!==Object.prototype)){Ce=ne.then,me||(E(ne,"then",function(Le,Je){var it=this;return new Q(function(ct,Xe){Ce.call(it,ct,Xe)}).then(Le,Je)},{unsafe:!0}),E(ne,"catch",Z.catch,{unsafe:!0}));try{delete ne.constructor}catch{}h&&h(ne,Z)}d({global:!0,wrap:!0,forced:pe},{Promise:Q}),g(Q,be,!1,!0),w(be),Se=x(be),d({target:be,stat:!0,forced:pe},{reject:function(Le){var Je=le(this);return Je.reject.call(void 0,Le),Je.promise}}),d({target:be,stat:!0,forced:f||pe},{resolve:function(Le){return R(f&&this===Se?Q:this,Le)}}),d({target:be,stat:!0,forced:_e},{all:function(Le){var Je=this,it=le(Je),ct=it.resolve,Xe=it.reject,Xn=$(function(){var pr=p(Je.resolve),ft=[],je=0,bn=1;C(Le,function(Jt){var nn=je++,Pi=!1;ft.push(void 0),bn++,pr.call(Je,Jt).then(function(xi){Pi||(Pi=!0,ft[nn]=xi,--bn||ct(ft))},Xe)}),--bn||ct(ft)});return Xn.error&&Xe(Xn.value),it.promise},race:function(Le){var Je=this,it=le(Je),ct=it.reject,Xe=$(function(){var Xn=p(Je.resolve);C(Le,function(pr){Xn.call(Je,pr).then(it.resolve,ct)})});return Xe.error&&ct(Xe.value),it.promise}})},5397:function(s,c,l){var d=l(3085),f=l(150),b=l(1404),x=l(1138),k=l(5744),E=l(2853),m=l(6782),h=l(6192),g=f("Reflect","construct"),w=h(function(){function y(){}return!(g(function(){},[],y)instanceof y)}),p=!h(function(){g(function(){})}),v=w||p;d({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(S,T){b(S),x(T);var C=arguments.length<3?S:b(arguments[2]);if(p&&!w)return g(S,T,C);if(S==C){switch(T.length){case 0:return new S;case 1:return new S(T[0]);case 2:return new S(T[0],T[1]);case 3:return new S(T[0],T[1],T[2]);case 4:return new S(T[0],T[1],T[2],T[3])}var M=[null];return M.push.apply(M,T),new(m.apply(S,M))}var A=C.prototype,P=E(k(A)?A:Object.prototype),L=Function.apply.call(S,P,T);return k(L)?L:P}})},1367:function(){},5454:function(s,c,l){var d=l(863).charAt,f=l(4845),b=l(3326),x=l(7218),k="String Iterator",E=b.set,m=b.getterFor(k);x(String,"String",function(h){E(this,{type:k,string:f(h),index:0})},function(){var g=m(this),w=g.string,p=g.index,v;return p>=w.length?{value:void 0,done:!0}:(v=d(w,p),g.index+=v.length,{value:v,done:!1})})},957:function(s,c,l){var d=l(3085),f=l(4277).trim,b=l(6815);d({target:"String",proto:!0,forced:b("trim")},{trim:function(){return f(this)}})},9781:function(s,c,l){var d=l(1488);d("asyncIterator")},492:function(){},6681:function(s,c,l){var d=l(1488);d("hasInstance")},9594:function(s,c,l){var d=l(1488);d("isConcatSpreadable")},3665:function(s,c,l){var d=l(1488);d("iterator")},6187:function(s,c,l){var d=l(3085),f=l(8576),b=l(150),x=l(5546),k=l(69),E=l(3045),m=l(6192),h=l(4500),g=l(4770),w=l(6447),p=l(5744),v=l(3236),y=l(1138),S=l(1795),T=l(101),C=l(77),M=l(4845),A=l(774),P=l(2853),L=l(7653),R=l(2092),j=l(4052),z=l(4750),$=l(5141),Y=l(2760),ae=l(6007),K=l(9482),te=l(8717),G=l(9766),ue=l(4535),J=l(2759),be=l(8182),de=l(9207),ce=l(1488),V=l(1284),ne=l(3326),Q=l(454).forEach,Z=G("hidden"),he="Symbol",X="prototype",re=be("toPrimitive"),le=ne.set,fe=ne.getterFor(he),ke=Object[X],q=f.Symbol,ie=b("JSON","stringify"),we=$.f,Me=Y.f,xe=j.f,ge=ae.f,ye=te("symbols"),se=te("op-symbols"),me=te("string-to-symbol-registry"),Ie=te("symbol-to-string-registry"),Pe=te("wks"),Se=f.QObject,Ce=!Se||!Se[X]||!Se[X].findChild,pe=k&&m(function(){return P(Me({},"a",{get:function(){return Me(this,"a",{value:7}).a}})).a!=7})?function(Ne,Le,Je){var it=we(ke,Le);it&&delete ke[Le],Me(Ne,Le,Je),it&&Ne!==ke&&Me(ke,Le,it)}:Me,_e=function(Ne,Le){var Je=ye[Ne]=P(q[X]);return le(Je,{type:he,tag:Ne,description:Le}),k||(Je.description=Le),Je},Be=function(Le,Je,it){Le===ke&&Be(se,Je,it),y(Le);var ct=C(Je);return y(it),h(ye,ct)?(it.enumerable?(h(Le,Z)&&Le[Z][ct]&&(Le[Z][ct]=!1),it=P(it,{enumerable:A(0,!1)})):(h(Le,Z)||Me(Le,Z,A(1,{})),Le[Z][ct]=!0),pe(Le,ct,it)):Me(Le,ct,it)},Ke=function(Le,Je){y(Le);var it=T(Je),ct=L(it).concat(qe(it));return Q(ct,function(Xe){(!k||vt.call(it,Xe))&&Be(Le,Xe,it[Xe])}),Le},ht=function(Le,Je){return Je===void 0?P(Le):Ke(P(Le),Je)},vt=function(Le){var Je=C(Le),it=ge.call(this,Je);return this===ke&&h(ye,Je)&&!h(se,Je)?!1:it||!h(this,Je)||!h(ye,Je)||h(this,Z)&&this[Z][Je]?it:!0},At=function(Le,Je){var it=T(Le),ct=C(Je);if(!(it===ke&&h(ye,ct)&&!h(se,ct))){var Xe=we(it,ct);return Xe&&h(ye,ct)&&!(h(it,Z)&&it[Z][ct])&&(Xe.enumerable=!0),Xe}},nt=function(Le){var Je=xe(T(Le)),it=[];return Q(Je,function(ct){!h(ye,ct)&&!h(ue,ct)&&it.push(ct)}),it},qe=function(Le){var Je=Le===ke,it=xe(Je?se:T(Le)),ct=[];return Q(it,function(Xe){h(ye,Xe)&&(!Je||h(ke,Xe))&&ct.push(ye[Xe])}),ct};if(E||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var Le=!arguments.length||arguments[0]===void 0?void 0:M(arguments[0]),Je=J(Le),it=function(ct){this===ke&&it.call(se,ct),h(this,Z)&&h(this[Z],Je)&&(this[Z][Je]=!1),pe(this,Je,A(1,ct))};return k&&Ce&&pe(ke,Je,{configurable:!0,set:it}),_e(Je,Le)},K(q[X],"toString",function(){return fe(this).tag}),K(q,"withoutSetter",function(Ne){return _e(J(Ne),Ne)}),ae.f=vt,Y.f=Be,$.f=At,R.f=j.f=nt,z.f=qe,de.f=function(Ne){return _e(be(Ne),Ne)},k&&(Me(q[X],"description",{configurable:!0,get:function(){return fe(this).description}}),x||K(ke,"propertyIsEnumerable",vt,{unsafe:!0}))),d({global:!0,wrap:!0,forced:!E,sham:!E},{Symbol:q}),Q(L(Pe),function(Ne){ce(Ne)}),d({target:he,stat:!0,forced:!E},{for:function(Ne){var Le=M(Ne);if(h(me,Le))return me[Le];var Je=q(Le);return me[Le]=Je,Ie[Je]=Le,Je},keyFor:function(Le){if(!v(Le))throw TypeError(Le+" is not a symbol");if(h(Ie,Le))return Ie[Le]},useSetter:function(){Ce=!0},useSimple:function(){Ce=!1}}),d({target:"Object",stat:!0,forced:!E,sham:!k},{create:ht,defineProperty:Be,defineProperties:Ke,getOwnPropertyDescriptor:At}),d({target:"Object",stat:!0,forced:!E},{getOwnPropertyNames:nt,getOwnPropertySymbols:qe}),d({target:"Object",stat:!0,forced:m(function(){z.f(1)})},{getOwnPropertySymbols:function(Le){return z.f(S(Le))}}),ie){var ut=!E||m(function(){var Ne=q();return ie([Ne])!="[null]"||ie({a:Ne})!="{}"||ie(Object(Ne))!="{}"});d({target:"JSON",stat:!0,forced:ut},{stringify:function(Le,Je,it){for(var ct=[Le],Xe=1,Xn;arguments.length>Xe;)ct.push(arguments[Xe++]);if(Xn=Je,!(!p(Je)&&Le===void 0||v(Le)))return g(Je)||(Je=function(pr,ft){if(w(Xn)&&(ft=Xn.call(this,pr,ft)),!v(ft))return ft}),ct[1]=Je,ie.apply(null,ct)}})}if(!q[X][re]){var Mt=q[X].valueOf;K(q[X],re,function(){return Mt.apply(this,arguments)})}V(q,he),ue[Z]=!0},1250:function(s,c,l){var d=l(1488);d("matchAll")},9017:function(s,c,l){var d=l(1488);d("match")},9786:function(s,c,l){var d=l(1488);d("replace")},503:function(s,c,l){var d=l(1488);d("search")},6565:function(s,c,l){var d=l(1488);d("species")},9322:function(s,c,l){var d=l(1488);d("split")},3610:function(s,c,l){var d=l(1488);d("toPrimitive")},6886:function(s,c,l){var d=l(1488);d("toStringTag")},3514:function(s,c,l){var d=l(1488);d("unscopables")},177:function(s,c,l){var d=l(1488);d("asyncDispose")},9031:function(s,c,l){var d=l(1488);d("dispose")},6658:function(s,c,l){var d=l(1488);d("matcher")},1875:function(s,c,l){var d=l(1488);d("metadata")},8658:function(s,c,l){var d=l(1488);d("observable")},4592:function(s,c,l){var d=l(1488);d("patternMatch")},6680:function(s,c,l){var d=l(1488);d("replaceAll")},162:function(s,c,l){l(8939);var d=l(7365),f=l(8576),b=l(4696),x=l(8711),k=l(7771),E=l(8182),m=E("toStringTag");for(var h in d){var g=f[h],w=g&&g.prototype;w&&b(w)!==m&&x(w,m,h),k[h]=k.Array}},2906:function(s,c,l){var d=l(3085),f=l(8576),b=l(6447),x=l(8989),k=[].slice,E=/MSIE .\./.test(x),m=function(h){return function(g,w){var p=arguments.length>2,v=p?k.call(arguments,2):void 0;return h(p?function(){(b(g)?g:Function(g)).apply(this,v)}:g,w)}};d({global:!0,bind:!0,forced:E},{setTimeout:m(f.setTimeout),setInterval:m(f.setInterval)})},9336:function(s,c,l){l(8939);var d=l(3085),f=l(150),b=l(4551),x=l(9482),k=l(533),E=l(1284),m=l(5148),h=l(3326),g=l(6961),w=l(6447),p=l(4500),v=l(8043),y=l(4696),S=l(1138),T=l(5744),C=l(4845),M=l(2853),A=l(774),P=l(1669),L=l(8703),R=l(8182),j=f("fetch"),z=f("Request"),$=z&&z.prototype,Y=f("Headers"),ae=R("iterator"),K="URLSearchParams",te=K+"Iterator",G=h.set,ue=h.getterFor(K),J=h.getterFor(te),be=/\+/g,de=Array(4),ce=function(xe){return de[xe-1]||(de[xe-1]=RegExp("((?:%[\\da-f]{2}){"+xe+"})","gi"))},V=function(xe){try{return decodeURIComponent(xe)}catch{return xe}},ne=function(xe){var ge=xe.replace(be," "),ye=4;try{return decodeURIComponent(ge)}catch{for(;ye;)ge=ge.replace(ce(ye--),V);return ge}},Q=/[!'()~]|%20/g,Z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},he=function(xe){return Z[xe]},X=function(xe){return encodeURIComponent(xe).replace(Q,he)},re=function(xe,ge){if(ge)for(var ye=ge.split("&"),se=0,me,Ie;se<ye.length;)me=ye[se++],me.length&&(Ie=me.split("="),xe.push({key:ne(Ie.shift()),value:ne(Ie.join("="))}))},le=function(xe){this.entries.length=0,re(this.entries,xe)},fe=function(xe,ge){if(xe<ge)throw TypeError("Not enough arguments")},ke=m(function(ge,ye){G(this,{type:te,iterator:P(ue(ge).entries),kind:ye})},"Iterator",function(){var ge=J(this),ye=ge.kind,se=ge.iterator.next(),me=se.value;return se.done||(se.value=ye==="keys"?me.key:ye==="values"?me.value:[me.key,me.value]),se}),q=function(){g(this,q,K);var ge=arguments.length>0?arguments[0]:void 0,ye=this,se=[],me,Ie,Pe,Se,Ce,pe,_e,Be,Ke;if(G(ye,{type:K,entries:se,updateURL:function(){},updateSearchParams:le}),ge!==void 0)if(T(ge))if(me=L(ge),me)for(Ie=P(ge,me),Pe=Ie.next;!(Se=Pe.call(Ie)).done;){if(Ce=P(S(Se.value)),pe=Ce.next,(_e=pe.call(Ce)).done||(Be=pe.call(Ce)).done||!pe.call(Ce).done)throw TypeError("Expected sequence with length 2");se.push({key:C(_e.value),value:C(Be.value)})}else for(Ke in ge)p(ge,Ke)&&se.push({key:Ke,value:C(ge[Ke])});else re(se,typeof ge=="string"?ge.charAt(0)==="?"?ge.slice(1):ge:C(ge))},ie=q.prototype;if(k(ie,{append:function(ge,ye){fe(arguments.length,2);var se=ue(this);se.entries.push({key:C(ge),value:C(ye)}),se.updateURL()},delete:function(xe){fe(arguments.length,1);for(var ge=ue(this),ye=ge.entries,se=C(xe),me=0;me<ye.length;)ye[me].key===se?ye.splice(me,1):me++;ge.updateURL()},get:function(ge){fe(arguments.length,1);for(var ye=ue(this).entries,se=C(ge),me=0;me<ye.length;me++)if(ye[me].key===se)return ye[me].value;return null},getAll:function(ge){fe(arguments.length,1);for(var ye=ue(this).entries,se=C(ge),me=[],Ie=0;Ie<ye.length;Ie++)ye[Ie].key===se&&me.push(ye[Ie].value);return me},has:function(ge){fe(arguments.length,1);for(var ye=ue(this).entries,se=C(ge),me=0;me<ye.length;)if(ye[me++].key===se)return!0;return!1},set:function(ge,ye){fe(arguments.length,1);for(var se=ue(this),me=se.entries,Ie=!1,Pe=C(ge),Se=C(ye),Ce=0,pe;Ce<me.length;Ce++)pe=me[Ce],pe.key===Pe&&(Ie?me.splice(Ce--,1):(Ie=!0,pe.value=Se));Ie||me.push({key:Pe,value:Se}),se.updateURL()},sort:function(){var ge=ue(this),ye=ge.entries,se=ye.slice(),me,Ie,Pe;for(ye.length=0,Pe=0;Pe<se.length;Pe++){for(me=se[Pe],Ie=0;Ie<Pe;Ie++)if(ye[Ie].key>me.key){ye.splice(Ie,0,me);break}Ie===Pe&&ye.push(me)}ge.updateURL()},forEach:function(ge){for(var ye=ue(this).entries,se=v(ge,arguments.length>1?arguments[1]:void 0,3),me=0,Ie;me<ye.length;)Ie=ye[me++],se(Ie.value,Ie.key,this)},keys:function(){return new ke(this,"keys")},values:function(){return new ke(this,"values")},entries:function(){return new ke(this,"entries")}},{enumerable:!0}),x(ie,ae,ie.entries,{name:"entries"}),x(ie,"toString",function(){for(var ge=ue(this).entries,ye=[],se=0,me;se<ge.length;)me=ge[se++],ye.push(X(me.key)+"="+X(me.value));return ye.join("&")},{enumerable:!0}),E(q,K),d({global:!0,forced:!b},{URLSearchParams:q}),!b&&w(Y)){var we=function(xe){if(T(xe)){var ge=xe.body,ye;if(y(ge)===K)return ye=xe.headers?new Y(xe.headers):new Y,ye.has("content-type")||ye.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),M(xe,{body:A(0,String(ge)),headers:A(0,ye)})}return xe};if(w(j)&&d({global:!0,enumerable:!0,forced:!0},{fetch:function(ge){return j(ge,arguments.length>1?we(arguments[1]):{})}}),w(z)){var Me=function(ge){return g(this,Me,"Request"),new z(ge,arguments.length>1?we(arguments[1]):{})};$.constructor=Me,Me.prototype=$,d({global:!0,forced:!0},{Request:Me})}}s.exports={URLSearchParams:q,getState:ue}},4948:function(s,c,l){l(5454);var d=l(3085),f=l(69),b=l(4551),x=l(8576),k=l(1187),E=l(9482),m=l(6961),h=l(4500),g=l(2503),w=l(841),p=l(863).codeAt,v=l(7977),y=l(4845),S=l(1284),T=l(9336),C=l(3326),M=x.URL,A=T.URLSearchParams,P=T.getState,L=C.set,R=C.getterFor("URL"),j=Math.floor,z=Math.pow,$="Invalid authority",Y="Invalid scheme",ae="Invalid host",K="Invalid port",te=/[A-Za-z]/,G=/[\d+-.A-Za-z]/,ue=/\d/,J=/^0x/i,be=/^[0-7]+$/,de=/^\d+$/,ce=/^[\dA-Fa-f]+$/,V=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,Q=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Z=/[\t\n\r]/g,he,X=function(ve,ze){var Fe,Ge,Qe;if(ze.charAt(0)=="["){if(ze.charAt(ze.length-1)!="]"||(Fe=le(ze.slice(1,-1)),!Fe))return ae;ve.host=Fe}else if(ye(ve)){if(ze=v(ze),V.test(ze)||(Fe=re(ze),Fe===null))return ae;ve.host=Fe}else{if(ne.test(ze))return ae;for(Fe="",Ge=w(ze),Qe=0;Qe<Ge.length;Qe++)Fe+=xe(Ge[Qe],q);ve.host=Fe}},re=function(ve){var ze=ve.split("."),Fe,Ge,Qe,St,mt,dn,Qt;if(ze.length&&ze[ze.length-1]==""&&ze.pop(),Fe=ze.length,Fe>4)return ve;for(Ge=[],Qe=0;Qe<Fe;Qe++){if(St=ze[Qe],St=="")return ve;if(mt=10,St.length>1&&St.charAt(0)=="0"&&(mt=J.test(St)?16:8,St=St.slice(mt==8?1:2)),St==="")dn=0;else{if(!(mt==10?de:mt==8?be:ce).test(St))return ve;dn=parseInt(St,mt)}Ge.push(dn)}for(Qe=0;Qe<Fe;Qe++)if(dn=Ge[Qe],Qe==Fe-1){if(dn>=z(256,5-Fe))return null}else if(dn>255)return null;for(Qt=Ge.pop(),Qe=0;Qe<Ge.length;Qe++)Qt+=Ge[Qe]*z(256,3-Qe);return Qt},le=function(ve){var ze=[0,0,0,0,0,0,0,0],Fe=0,Ge=null,Qe=0,St,mt,dn,Qt,er,ri,Ze,Ar=function(){return ve.charAt(Qe)};if(Ar()==":"){if(ve.charAt(1)!=":")return;Qe+=2,Fe++,Ge=Fe}for(;Ar();){if(Fe==8)return;if(Ar()==":"){if(Ge!==null)return;Qe++,Fe++,Ge=Fe;continue}for(St=mt=0;mt<4&&ce.test(Ar());)St=St*16+parseInt(Ar(),16),Qe++,mt++;if(Ar()=="."){if(mt==0||(Qe-=mt,Fe>6))return;for(dn=0;Ar();){if(Qt=null,dn>0)if(Ar()=="."&&dn<4)Qe++;else return;if(!ue.test(Ar()))return;for(;ue.test(Ar());){if(er=parseInt(Ar(),10),Qt===null)Qt=er;else{if(Qt==0)return;Qt=Qt*10+er}if(Qt>255)return;Qe++}ze[Fe]=ze[Fe]*256+Qt,dn++,(dn==2||dn==4)&&Fe++}if(dn!=4)return;break}else if(Ar()==":"){if(Qe++,!Ar())return}else if(Ar())return;ze[Fe++]=St}if(Ge!==null)for(ri=Fe-Ge,Fe=7;Fe!=0&&ri>0;)Ze=ze[Fe],ze[Fe--]=ze[Ge+ri-1],ze[Ge+--ri]=Ze;else if(Fe!=8)return;return ze},fe=function(ve){for(var ze=null,Fe=1,Ge=null,Qe=0,St=0;St<8;St++)ve[St]!==0?(Qe>Fe&&(ze=Ge,Fe=Qe),Ge=null,Qe=0):(Ge===null&&(Ge=St),++Qe);return Qe>Fe&&(ze=Ge,Fe=Qe),ze},ke=function(ve){var ze,Fe,Ge,Qe;if(typeof ve=="number"){for(ze=[],Fe=0;Fe<4;Fe++)ze.unshift(ve%256),ve=j(ve/256);return ze.join(".")}else if(typeof ve=="object"){for(ze="",Ge=fe(ve),Fe=0;Fe<8;Fe++)Qe&&ve[Fe]===0||(Qe&&(Qe=!1),Ge===Fe?(ze+=Fe?":":"::",Qe=!0):(ze+=ve[Fe].toString(16),Fe<7&&(ze+=":")));return"["+ze+"]"}return ve},q={},ie=g({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),we=g({},ie,{"#":1,"?":1,"{":1,"}":1}),Me=g({},we,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),xe=function(ve,ze){var Fe=p(ve,0);return Fe>32&&Fe<127&&!h(ze,ve)?ve:encodeURIComponent(ve)},ge={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ye=function(ve){return h(ge,ve.scheme)},se=function(ve){return ve.username!=""||ve.password!=""},me=function(ve){return!ve.host||ve.cannotBeABaseURL||ve.scheme=="file"},Ie=function(ve,ze){var Fe;return ve.length==2&&te.test(ve.charAt(0))&&((Fe=ve.charAt(1))==":"||!ze&&Fe=="|")},Pe=function(ve){var ze;return ve.length>1&&Ie(ve.slice(0,2))&&(ve.length==2||(ze=ve.charAt(2))==="/"||ze==="\\"||ze==="?"||ze==="#")},Se=function(ve){var ze=ve.path,Fe=ze.length;Fe&&(ve.scheme!="file"||Fe!=1||!Ie(ze[0],!0))&&ze.pop()},Ce=function(ve){return ve==="."||ve.toLowerCase()==="%2e"},pe=function(ve){return ve=ve.toLowerCase(),ve===".."||ve==="%2e."||ve===".%2e"||ve==="%2e%2e"},_e={},Be={},Ke={},ht={},vt={},At={},nt={},qe={},ut={},Mt={},Ne={},Le={},Je={},it={},ct={},Xe={},Xn={},pr={},ft={},je={},bn={},Jt=function(ve,ze,Fe,Ge){var Qe=Fe||_e,St=0,mt="",dn=!1,Qt=!1,er=!1,ri,Ze,Ar,ma;for(Fe||(ve.scheme="",ve.username="",ve.password="",ve.host=null,ve.port=null,ve.path=[],ve.query=null,ve.fragment=null,ve.cannotBeABaseURL=!1,ze=ze.replace(Q,"")),ze=ze.replace(Z,""),ri=w(ze);St<=ri.length;){switch(Ze=ri[St],Qe){case _e:if(Ze&&te.test(Ze))mt+=Ze.toLowerCase(),Qe=Be;else{if(Fe)return Y;Qe=Ke;continue}break;case Be:if(Ze&&(G.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))mt+=Ze.toLowerCase();else if(Ze==":"){if(Fe&&(ye(ve)!=h(ge,mt)||mt=="file"&&(se(ve)||ve.port!==null)||ve.scheme=="file"&&!ve.host))return;if(ve.scheme=mt,Fe){ye(ve)&&ge[ve.scheme]==ve.port&&(ve.port=null);return}mt="",ve.scheme=="file"?Qe=it:ye(ve)&&Ge&&Ge.scheme==ve.scheme?Qe=ht:ye(ve)?Qe=qe:ri[St+1]=="/"?(Qe=vt,St++):(ve.cannotBeABaseURL=!0,ve.path.push(""),Qe=ft)}else{if(Fe)return Y;mt="",Qe=Ke,St=0;continue}break;case Ke:if(!Ge||Ge.cannotBeABaseURL&&Ze!="#")return Y;if(Ge.cannotBeABaseURL&&Ze=="#"){ve.scheme=Ge.scheme,ve.path=Ge.path.slice(),ve.query=Ge.query,ve.fragment="",ve.cannotBeABaseURL=!0,Qe=bn;break}Qe=Ge.scheme=="file"?it:At;continue;case ht:if(Ze=="/"&&ri[St+1]=="/")Qe=ut,St++;else{Qe=At;continue}break;case vt:if(Ze=="/"){Qe=Mt;break}else{Qe=pr;continue}case At:if(ve.scheme=Ge.scheme,Ze==he)ve.username=Ge.username,ve.password=Ge.password,ve.host=Ge.host,ve.port=Ge.port,ve.path=Ge.path.slice(),ve.query=Ge.query;else if(Ze=="/"||Ze=="\\"&&ye(ve))Qe=nt;else if(Ze=="?")ve.username=Ge.username,ve.password=Ge.password,ve.host=Ge.host,ve.port=Ge.port,ve.path=Ge.path.slice(),ve.query="",Qe=je;else if(Ze=="#")ve.username=Ge.username,ve.password=Ge.password,ve.host=Ge.host,ve.port=Ge.port,ve.path=Ge.path.slice(),ve.query=Ge.query,ve.fragment="",Qe=bn;else{ve.username=Ge.username,ve.password=Ge.password,ve.host=Ge.host,ve.port=Ge.port,ve.path=Ge.path.slice(),ve.path.pop(),Qe=pr;continue}break;case nt:if(ye(ve)&&(Ze=="/"||Ze=="\\"))Qe=ut;else if(Ze=="/")Qe=Mt;else{ve.username=Ge.username,ve.password=Ge.password,ve.host=Ge.host,ve.port=Ge.port,Qe=pr;continue}break;case qe:if(Qe=ut,Ze!="/"||mt.charAt(St+1)!="/")continue;St++;break;case ut:if(Ze!="/"&&Ze!="\\"){Qe=Mt;continue}break;case Mt:if(Ze=="@"){dn&&(mt="%40"+mt),dn=!0,Ar=w(mt);for(var Bh=0;Bh<Ar.length;Bh++){var Uy=Ar[Bh];if(Uy==":"&&!er){er=!0;continue}var Wy=xe(Uy,Me);er?ve.password+=Wy:ve.username+=Wy}mt=""}else if(Ze==he||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ye(ve)){if(dn&&mt=="")return $;St-=w(mt).length+1,mt="",Qe=Ne}else mt+=Ze;break;case Ne:case Le:if(Fe&&ve.scheme=="file"){Qe=Xe;continue}else if(Ze==":"&&!Qt){if(mt=="")return ae;if(ma=X(ve,mt),ma)return ma;if(mt="",Qe=Je,Fe==Le)return}else if(Ze==he||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ye(ve)){if(ye(ve)&&mt=="")return ae;if(Fe&&mt==""&&(se(ve)||ve.port!==null))return;if(ma=X(ve,mt),ma)return ma;if(mt="",Qe=Xn,Fe)return;continue}else Ze=="["?Qt=!0:Ze=="]"&&(Qt=!1),mt+=Ze;break;case Je:if(ue.test(Ze))mt+=Ze;else if(Ze==he||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ye(ve)||Fe){if(mt!=""){var Ci=parseInt(mt,10);if(Ci>65535)return K;ve.port=ye(ve)&&Ci===ge[ve.scheme]?null:Ci,mt=""}if(Fe)return;Qe=Xn;continue}else return K;break;case it:if(ve.scheme="file",Ze=="/"||Ze=="\\")Qe=ct;else if(Ge&&Ge.scheme=="file")if(Ze==he)ve.host=Ge.host,ve.path=Ge.path.slice(),ve.query=Ge.query;else if(Ze=="?")ve.host=Ge.host,ve.path=Ge.path.slice(),ve.query="",Qe=je;else if(Ze=="#")ve.host=Ge.host,ve.path=Ge.path.slice(),ve.query=Ge.query,ve.fragment="",Qe=bn;else{Pe(ri.slice(St).join(""))||(ve.host=Ge.host,ve.path=Ge.path.slice(),Se(ve)),Qe=pr;continue}else{Qe=pr;continue}break;case ct:if(Ze=="/"||Ze=="\\"){Qe=Xe;break}Ge&&Ge.scheme=="file"&&!Pe(ri.slice(St).join(""))&&(Ie(Ge.path[0],!0)?ve.path.push(Ge.path[0]):ve.host=Ge.host),Qe=pr;continue;case Xe:if(Ze==he||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!Fe&&Ie(mt))Qe=pr;else if(mt==""){if(ve.host="",Fe)return;Qe=Xn}else{if(ma=X(ve,mt),ma)return ma;if(ve.host=="localhost"&&(ve.host=""),Fe)return;mt="",Qe=Xn}continue}else mt+=Ze;break;case Xn:if(ye(ve)){if(Qe=pr,Ze!="/"&&Ze!="\\")continue}else if(!Fe&&Ze=="?")ve.query="",Qe=je;else if(!Fe&&Ze=="#")ve.fragment="",Qe=bn;else if(Ze!=he&&(Qe=pr,Ze!="/"))continue;break;case pr:if(Ze==he||Ze=="/"||Ze=="\\"&&ye(ve)||!Fe&&(Ze=="?"||Ze=="#")){if(pe(mt)?(Se(ve),Ze!="/"&&!(Ze=="\\"&&ye(ve))&&ve.path.push("")):Ce(mt)?Ze!="/"&&!(Ze=="\\"&&ye(ve))&&ve.path.push(""):(ve.scheme=="file"&&!ve.path.length&&Ie(mt)&&(ve.host&&(ve.host=""),mt=mt.charAt(0)+":"),ve.path.push(mt)),mt="",ve.scheme=="file"&&(Ze==he||Ze=="?"||Ze=="#"))for(;ve.path.length>1&&ve.path[0]==="";)ve.path.shift();Ze=="?"?(ve.query="",Qe=je):Ze=="#"&&(ve.fragment="",Qe=bn)}else mt+=xe(Ze,we);break;case ft:Ze=="?"?(ve.query="",Qe=je):Ze=="#"?(ve.fragment="",Qe=bn):Ze!=he&&(ve.path[0]+=xe(Ze,q));break;case je:!Fe&&Ze=="#"?(ve.fragment="",Qe=bn):Ze!=he&&(Ze=="'"&&ye(ve)?ve.query+="%27":Ze=="#"?ve.query+="%23":ve.query+=xe(Ze,q));break;case bn:Ze!=he&&(ve.fragment+=xe(Ze,ie));break}St++}},nn=function(ze){var Fe=m(this,nn,"URL"),Ge=arguments.length>1?arguments[1]:void 0,Qe=y(ze),St=L(Fe,{type:"URL"}),mt,dn;if(Ge!==void 0){if(Ge instanceof nn)mt=R(Ge);else if(dn=Jt(mt={},y(Ge)),dn)throw TypeError(dn)}if(dn=Jt(St,Qe,null,mt),dn)throw TypeError(dn);var Qt=St.searchParams=new A,er=P(Qt);er.updateSearchParams(St.query),er.updateURL=function(){St.query=String(Qt)||null},f||(Fe.href=xi.call(Fe),Fe.origin=Rn.call(Fe),Fe.protocol=pa.call(Fe),Fe.username=un.call(Fe),Fe.password=jy.call(Fe),Fe.host=Fy.call(Fe),Fe.hostname=Hy.call(Fe),Fe.port=Lh.call(Fe),Fe.pathname=zy.call(Fe),Fe.search=Qa.call(Fe),Fe.searchParams=Wc.call(Fe),Fe.hash=Bs.call(Fe))},Pi=nn.prototype,xi=function(){var ve=R(this),ze=ve.scheme,Fe=ve.username,Ge=ve.password,Qe=ve.host,St=ve.port,mt=ve.path,dn=ve.query,Qt=ve.fragment,er=ze+":";return Qe!==null?(er+="//",se(ve)&&(er+=Fe+(Ge?":"+Ge:"")+"@"),er+=ke(Qe),St!==null&&(er+=":"+St)):ze=="file"&&(er+="//"),er+=ve.cannotBeABaseURL?mt[0]:mt.length?"/"+mt.join("/"):"",dn!==null&&(er+="?"+dn),Qt!==null&&(er+="#"+Qt),er},Rn=function(){var ve=R(this),ze=ve.scheme,Fe=ve.port;if(ze=="blob")try{return new nn(ze.path[0]).origin}catch{return"null"}return ze=="file"||!ye(ve)?"null":ze+"://"+ke(ve.host)+(Fe!==null?":"+Fe:"")},pa=function(){return R(this).scheme+":"},un=function(){return R(this).username},jy=function(){return R(this).password},Fy=function(){var ve=R(this),ze=ve.host,Fe=ve.port;return ze===null?"":Fe===null?ke(ze):ke(ze)+":"+Fe},Hy=function(){var ve=R(this).host;return ve===null?"":ke(ve)},Lh=function(){var ve=R(this).port;return ve===null?"":String(ve)},zy=function(){var ve=R(this),ze=ve.path;return ve.cannotBeABaseURL?ze[0]:ze.length?"/"+ze.join("/"):""},Qa=function(){var ve=R(this).query;return ve?"?"+ve:""},Wc=function(){return R(this).searchParams},Bs=function(){var ve=R(this).fragment;return ve?"#"+ve:""},Gi=function(ve,ze){return{get:ve,set:ze,configurable:!0,enumerable:!0}};if(f&&k(Pi,{href:Gi(xi,function(ve){var ze=R(this),Fe=y(ve),Ge=Jt(ze,Fe);if(Ge)throw TypeError(Ge);P(ze.searchParams).updateSearchParams(ze.query)}),origin:Gi(Rn),protocol:Gi(pa,function(ve){var ze=R(this);Jt(ze,y(ve)+":",_e)}),username:Gi(un,function(ve){var ze=R(this),Fe=w(y(ve));if(!me(ze)){ze.username="";for(var Ge=0;Ge<Fe.length;Ge++)ze.username+=xe(Fe[Ge],Me)}}),password:Gi(jy,function(ve){var ze=R(this),Fe=w(y(ve));if(!me(ze)){ze.password="";for(var Ge=0;Ge<Fe.length;Ge++)ze.password+=xe(Fe[Ge],Me)}}),host:Gi(Fy,function(ve){var ze=R(this);ze.cannotBeABaseURL||Jt(ze,y(ve),Ne)}),hostname:Gi(Hy,function(ve){var ze=R(this);ze.cannotBeABaseURL||Jt(ze,y(ve),Le)}),port:Gi(Lh,function(ve){var ze=R(this);me(ze)||(ve=y(ve),ve==""?ze.port=null:Jt(ze,ve,Je))}),pathname:Gi(zy,function(ve){var ze=R(this);ze.cannotBeABaseURL||(ze.path=[],Jt(ze,y(ve),Xn))}),search:Gi(Qa,function(ve){var ze=R(this);ve=y(ve),ve==""?ze.query=null:(ve.charAt(0)=="?"&&(ve=ve.slice(1)),ze.query="",Jt(ze,ve,je)),P(ze.searchParams).updateSearchParams(ze.query)}),searchParams:Gi(Wc),hash:Gi(Bs,function(ve){var ze=R(this);if(ve=y(ve),ve==""){ze.fragment=null;return}ve.charAt(0)=="#"&&(ve=ve.slice(1)),ze.fragment="",Jt(ze,ve,bn)})}),E(Pi,"toJSON",function(){return xi.call(this)},{enumerable:!0}),E(Pi,"toString",function(){return xi.call(this)},{enumerable:!0}),M){var Rh=M.createObjectURL,$y=M.revokeObjectURL;Rh&&E(nn,"createObjectURL",function(ze){return Rh.apply(M,arguments)}),$y&&E(nn,"revokeObjectURL",function(ze){return $y.apply(M,arguments)})}S(nn,"URL"),d({global:!0,forced:!b,sham:!f},{URL:nn})},9801:function(){},3822:function(s,c,l){var d=l(2221);s.exports=d},1434:function(s,c,l){var d=l(5078);s.exports=d},6899:function(s,c,l){var d=l(98);s.exports=d},7710:function(s,c,l){var d=l(5739);l(162),s.exports=d},4486:function(s,c,l){var d=l(278);s.exports=d},4877:function(s,c,l){var d=l(1484);s.exports=d},7178:function(s,c,l){var d=l(7731);s.exports=d},5603:function(s,c,l){var d=l(3669);s.exports=d},1206:function(s,c,l){l(162);var d=l(6899),f=l(4696),b=Array.prototype,x={DOMTokenList:!0,NodeList:!0};s.exports=function(k){var E=k.forEach;return k===b||k instanceof Array&&E===b.forEach||x.hasOwnProperty(f(k))?d:E}},6174:function(s,c,l){var d=l(2604);s.exports=d},57:function(s,c,l){var d=l(263);s.exports=d},4741:function(s,c,l){var d=l(7663);s.exports=d},8368:function(s,c,l){var d=l(5063);s.exports=d},3739:function(s,c,l){var d=l(6813);s.exports=d},172:function(s,c,l){var d=l(6285);s.exports=d},4963:function(s,c,l){var d=l(3213);s.exports=d},7820:function(s,c,l){var d=l(3512);s.exports=d},8980:function(s,c,l){var d=l(8168);s.exports=d},5636:function(s,c,l){var d=l(8651);s.exports=d},6672:function(s,c,l){var d=l(3083);s.exports=d},5059:function(s,c,l){var d=l(2987);s.exports=d},3969:function(s,c,l){var d=l(2239);s.exports=d},6618:function(s,c,l){var d=l(3154);l(162),s.exports=d},5279:function(s,c,l){var d=l(6577);s.exports=d},9562:function(s,c,l){l(2906);var d=l(7545);s.exports=d.setTimeout},2285:function(s,c,l){var d=l(5008);l(162),s.exports=d},8535:function(s,c,l){var d=l(994);l(162),s.exports=d},652:function(s,c,l){var d=l(5668);s.exports=d},5668:function(s,c,l){l(4948),l(9801),l(9336);var d=l(7545);s.exports=d.URL},2534:function(s){s.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(s){s.exports=n},4960:function(){},6759:function(){},6272:function(){}},i={};function o(s){var c=i[s];if(c!==void 0)return c.exports;var l=i[s]={exports:{}};return r[s](l,l.exports,o),l.exports}(function(){o.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(c,{a:c}),c}})(),function(){o.d=function(s,c){for(var l in c)o.o(c,l)&&!o.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:c[l]})}}(),function(){o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){o.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)}}();var a={};return function(){o.d(a,{default:function(){return SMe}});var s=o(9131),c=o.n(s),l=o(1899),d=o.n(l),f=o(6562),b=o.n(f),x=o(1734),k=o.n(x),E=o(8005),m=o.n(E),h=o(6065),g=o.n(h),w=o(4496),p=o.n(w);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(H){var N=this;do{if(Element.prototype.matches.call(N,H))return N;N=N.parentElement||N.parentNode}while(N!==null&&N.nodeType===1);return null});/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(H){if("Element"in H){var N="classList",O="prototype",_=H.Element[O],I=Object,D=c()(String[O])||function(){return this.replace(/^\s+|\s+$/g,"")},B=d()(Array[O])||function(Te){for(var Ae=0,Oe=this.length;Ae<Oe;Ae++)if(Ae in this&&this[Ae]===Te)return Ae;return-1},F=function(Ae,Oe){this.name=Ae,this.code=DOMException[Ae],this.message=Oe},W=function(Ae,Oe){if(Oe==="")throw new F("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(Oe))throw new F("INVALID_CHARACTER_ERR","The token must not contain space characters.");return B.call(Ae,Oe)},U=function(Ae){for(var Oe=D.call(Ae.getAttribute("class")||""),De=Oe?Oe.split(/\s+/):[],$e=0,yt=De.length;$e<yt;$e++)this.push(De[$e]);this._updateClassName=function(){Ae.setAttribute("class",this.toString())}},ee=U[O]=[],oe=function(){return new U(this)};if(F[O]=Error[O],ee.item=function(Te){return this[Te]||null},ee.contains=function(Te){return~W(this,Te+"")},ee.add=function(){var Te=arguments,Ae=0,Oe=Te.length,De,$e=!1;do De=Te[Ae]+"",~W(this,De)||(this.push(De),$e=!0);while(++Ae<Oe);$e&&this._updateClassName()},ee.remove=function(){var Te=arguments,Ae=0,Oe=Te.length,De,$e=!1,yt;do for(De=Te[Ae]+"",yt=W(this,De);~yt;){var wt;b()(wt=this).call(wt,yt,1),$e=!0,yt=W(this,De)}while(++Ae<Oe);$e&&this._updateClassName()},ee.toggle=function(Te,Ae){var Oe=this.contains(Te),De=Oe?Ae!==!0&&"remove":Ae!==!1&&"add";return De&&this[De](Te),Ae===!0||Ae===!1?Ae:!Oe},ee.replace=function(Te,Ae){var Oe=W(Te+"");if(~Oe){var De;b()(De=this).call(De,Oe,1,Ae),this._updateClassName()}},ee.toString=function(){return this.join(" ")},k()){var Ee={get:oe,enumerable:!0,configurable:!0};try{k()(_,N,Ee)}catch(Te){(Te.number===void 0||Te.number===-2146823252)&&(Ee.enumerable=!1,k()(_,N,Ee))}}else I[O].__defineGetter__&&_.__defineGetter__(N,oe)}}(self),function(){var H=document.createElement("_");if(H.classList.add("c1","c2"),!H.classList.contains("c2")){var N=function(I){var D=DOMTokenList.prototype[I];DOMTokenList.prototype[I]=function(B){var F,W=arguments.length;for(F=0;F<W;F++)B=arguments[F],D.call(this,B)}};N("add"),N("remove")}if(H.classList.toggle("c3",!1),H.classList.contains("c3")){var O=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(_,I){return 1 in arguments&&!this.contains(_)==!I?I:O.call(this,_)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(_,I){var D=this.toString().split(" "),B=d()(D).call(D,_+"");~B&&(D=m()(D).call(D,B),this.remove.apply(this,D),this.add(I),this.add.apply(this,m()(D).call(D,1)))}),H=null}());/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */(function(){if(typeof window<"u"&&window.addEventListener){var H=g()(null),N,O,_=function(){clearTimeout(O),O=p()(N,100)},I=function(){},D=function(){var ee;window.addEventListener("resize",_,!1),window.addEventListener("orientationchange",_,!1),window.MutationObserver?(ee=new MutationObserver(_),ee.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),I=function(){try{ee.disconnect(),window.removeEventListener("resize",_,!1),window.removeEventListener("orientationchange",_,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",_,!1),I=function(){document.documentElement.removeEventListener("DOMSubtreeModified",_,!1),window.removeEventListener("resize",_,!1),window.removeEventListener("orientationchange",_,!1)})},B=function(ee){function oe(Oe){var De;return Oe.protocol!==void 0?De=Oe:(De=document.createElement("a"),De.href=Oe),De.protocol.replace(/:/g,"")+De.host}var Ee,Te,Ae;return window.XMLHttpRequest&&(Ee=new XMLHttpRequest,Te=oe(location),Ae=oe(ee),Ee.withCredentials===void 0&&Ae!==""&&Ae!==Te?Ee=XDomainRequest||void 0:Ee=XMLHttpRequest),Ee},F="http://www.w3.org/1999/xlink";N=function(){var ee,oe,Ee,Te,Ae,Oe=0,De,$e,yt,wt,It;function tt(){Oe-=1,Oe===0&&(I(),D())}function an(mr){return function(){H[mr.base]!==!0&&(mr.useEl.setAttributeNS(F,"xlink:href","#"+mr.hash),mr.useEl.hasAttribute("href")&&mr.useEl.setAttribute("href","#"+mr.hash))}}function ii(mr){return function(){var ga=document.body,zl=document.createElement("x"),Ki;mr.onload=null,zl.innerHTML=mr.responseText,Ki=zl.getElementsByTagName("svg")[0],Ki&&(Ki.setAttribute("aria-hidden","true"),Ki.style.position="absolute",Ki.style.width=0,Ki.style.height=0,Ki.style.overflow="hidden",ga.insertBefore(Ki,ga.firstChild)),tt()}}function Xi(mr){return function(){mr.onerror=null,mr.ontimeout=null,tt()}}for(I(),wt=document.getElementsByTagName("use"),Ae=0;Ae<wt.length;Ae+=1){try{oe=wt[Ae].getBoundingClientRect()}catch{oe=!1}Te=wt[Ae].getAttribute("href")||wt[Ae].getAttributeNS(F,"href")||wt[Ae].getAttribute("xlink:href"),Te&&Te.split?yt=Te.split("#"):yt=["",""],ee=yt[0],Ee=yt[1],De=oe&&oe.left===0&&oe.right===0&&oe.top===0&&oe.bottom===0,oe&&oe.width===0&&oe.height===0&&!De?(wt[Ae].hasAttribute("href")&&wt[Ae].setAttributeNS(F,"xlink:href",Te),ee.length&&(It=H[ee],It!==!0&&p()(an({useEl:wt[Ae],base:ee,hash:Ee}),0),It===void 0&&($e=B(ee),$e!==void 0&&(It=new $e,H[ee]=It,It.onload=ii(It),It.onerror=Xi(It),It.ontimeout=Xi(It),It.open("GET",ee),It.send(),Oe+=1)))):De?ee.length&&H[ee]&&p()(an({useEl:wt[Ae],base:ee,hash:Ee}),0):H[ee]===void 0?H[ee]=!0:H[ee].onload&&(H[ee].abort(),delete H[ee].onload,H[ee]=!0)}wt="",Oe+=1,tt()};var W;W=function(){window.removeEventListener("load",W,!1),O=p()(N,0)},document.readyState!=="complete"?window.addEventListener("load",W,!1):W()}})();var v=o(1845);function y(H,N){(N==null||N>H.length)&&(N=H.length);for(var O=0,_=new Array(N);O<N;O++)_[O]=H[O];return _}function S(H){if(v(H))return y(H)}var T=o(184),C=o(662),M=o(7172);function A(H){if(typeof T<"u"&&C(H)!=null||H["@@iterator"]!=null)return M(H)}var P=o(711);function L(H,N){var O;if(H){if(typeof H=="string")return y(H,N);var _=P(O=Object.prototype.toString.call(H)).call(O,8,-1);if(_==="Object"&&H.constructor&&(_=H.constructor.name),_==="Map"||_==="Set")return M(H);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return y(H,N)}}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(H){return S(H)||A(H)||L(H)||R()}var z=o(7077);function $(H,N,O){return N in H?z(H,N,{value:O,enumerable:!0,configurable:!0,writable:!0}):H[N]=O,H}function Y(H,N){if(!(H instanceof N))throw new TypeError("Cannot call a class as a function")}function ae(H,N){for(var O=0;O<N.length;O++){var _=N[O];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),z(H,_.key,_)}}function K(H,N,O){return N&&ae(H.prototype,N),O&&ae(H,O),H}var te=o(4426),G=o.n(te),ue=o(9406),J=o.n(ue),be=o(8189),de=o.n(be),ce=o(3972),V=o.n(ce),ne=o(2777),Q=o(961),Z=o.n(Q),he=o(5695),X=o.n(he),re=o(8592),le=o.n(re),fe=o(9052),ke=o.n(fe),q=o(2560),ie=o.n(q),we=o(2461),Me=o.n(we);function xe(H){if(v(H))return H}function ge(H,N){var O=H==null?null:typeof T<"u"&&C(H)||H["@@iterator"];if(O!=null){var _=[],I=!0,D=!1,B,F;try{for(O=O.call(H);!(I=(B=O.next()).done)&&(_.push(B.value),!(N&&_.length===N));I=!0);}catch(W){D=!0,F=W}finally{try{!I&&O.return!=null&&O.return()}finally{if(D)throw F}}return _}}function ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(H,N){return xe(H)||ge(H,N)||L(H,N)||ye()}var me=o(6397),Ie=o.n(me),Pe=o(7636),Se=o.n(Pe),Ce=o(789),pe=o.n(Ce),_e=o(4729),Be=o.n(_e),Ke=o(1610),ht=o.n(Ke),vt=o(3053),At=o.n(vt),nt,qe=["zoomIn","zoomOut","hand"],ut=["history","undo","redo","reset"],Mt=["delete","deleteAll"],Ne=J()(nt=[]).call(nt,qe,ut,Mt),Le={FILTER:"filter",COLOR:"color"},Je=["rect","circle","triangle"],it={CROPZONE:"cropzone"},ct={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Xe=mt("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),Xn={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},pr={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},ft={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},je={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur"},bn={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},Jt={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},nn=mt("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Pi={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},xi={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},Rn={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},pa={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},un={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},jy={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},Fy={realTimeEvent:!0,min:-360,max:360,value:0},Hy={min:5,max:30,value:12},Lh={realTimeEvent:!0,min:2,max:300,value:3},zy={realTimeEvent:!0,min:10,max:100,value:50},Qa={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},Wc={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Bs={realTimeEvent:!0,min:32,max:4088,value:800},Gi=2,Rh="tui-image-editor-",$y=Math.min,ve=Math.max,ze=!1,Fe=0;function Ge(H){return H.__fe_id||(Fe+=1,H.__fe_id=Fe),H.__fe_id}function Qe(H){return typeof H=="function"}function St(H,N,O){if(N>O){var _=[O,N];N=_[0],O=_[1]}return ve(N,$y(H,O))}function mt(){for(var H={},N=arguments.length,O=new Array(N),_=0;_<N;_++)O[_]=arguments[_];return le()(O,function(I){H[I]=I}),H}function dn(H,N){var O={},_=N.length,I=0,D;for(I=0;I<_;I+=1)D=N[I],O[D]=H[D];return O}function Qt(H){return Ie()(H,10)}function er(H){return H.replace(/-([a-z])/g,function(N,O){return O.toUpperCase()})}function ri(){return!!(window.File&&window.FileList&&window.FileReader)}function Ze(H,N){var O,_,I;if(H.length===4){var D;H=J()(D="".concat(H)).call(D,m()(H).call(H,1,4))}var B=Ie()(m()(H).call(H,1,3),16),F=Ie()(m()(H).call(H,3,5),16),W=Ie()(m()(H).call(H,5,7),16),U=N;return J()(O=J()(_=J()(I="rgba(".concat(B,", ")).call(I,F,", ")).call(_,W,", ")).call(O,U,")")}function Ar(){ze||(ze=!0,Be()("image-editor","UA-129999381-1"))}function ma(H,N){var O=document.getElementsByTagName("head"),_=se(O,1),I=_[0],D=document.createElement("link"),B=encodeURIComponent(H);D.setAttribute("rel","stylesheet"),D.setAttribute("type","text/css"),D.setAttribute("href","data:text/css;charset=UTF-8,".concat(B)),I.appendChild(D)}function Bh(H){return function(N){return H.querySelector(N)}}function Uy(H){var N=/data:(image\/.+);base64,/,O="",_,I,D;_=H.replace(N,function(F,W){return O=W,""}),_=atob(_);var B=_.length;for(I=new Uint8Array(B),D=0;D<B;D+=1)I[D]=_.charCodeAt(D);return new Blob([I],{type:O})}function Wy(H){return Number(H.toFixed(Gi))}function Ci(H){le()(H,function(N,O){H[O]=null})}function Yy(){var H,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(N.charAt(0)==="."){var _;return J()(_=".".concat(Rh).concat(O)).call(_,m()(N).call(N,1))}return J()(H="".concat(Rh).concat(O)).call(H,N)}function nCe(H,N){var O=N.originX,_=N.originY,I=H.getPointByOrigin(O,_),D=I.x,B=I.y;H.set({left:D,top:B,originX:O,originY:_}),H.setCoords()}function rCe(H){var N,O={};return Se()(N=Me()(H)).call(N,function(_){O[H[_]]=_}),O}function TE(H,N){H.customProps=H.customProps||{},Z()(H.customProps,N)}function jh(H,N){var O={};return ie()(N)&&(N=[N]),le()(N,function(_){O[_]=H.customProps[_]}),O}function iCe(H){return H.charAt(0).toUpperCase()+m()(H).call(H,1)}function Gy(H,N){return d()(H).call(H,N)>=0}function Rj(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ht()(H,"type")||Le.COLOR}function ME(H){var N=pe()(H),O=N===void 0?{}:N;return O.source?Le.FILTER:Le.COLOR}function Bj(H){return At()(H.get("type"),Je)>=0}function IE(H){if(Gy(Je,H))return"Shape";switch(H){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return jj(H)}}function oCe(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=N.useAlpha,_=O===void 0?!0:O,I=N.mode,D=ct.VINTAGE,B=ct.REMOVE_COLOR,F=ct.BLEND_COLOR,W=ct.SEPIA2,U=ct.COLOR_FILTER,ee=ct.REMOVE_WHITE,oe=ct.BLEND,Ee;switch(H){case D:Ee=W;break;case B:Ee=_?U:ee;break;case F:Ee=I==="add"?oe:I;break;default:Ee=H}return jj(Ee)}function aCe(H){var N=ft.LOAD_IMAGE;return typeof H=="string"?N===H:N===H.name}function sCe(H){var N,O,_=ft.FLIP_IMAGE,I=ft.ROTATE_IMAGE,D=ft.ADD_TEXT,B=ft.APPLY_FILTER,F=ft.REMOVE_FILTER,W=ft.CHANGE_SHAPE,U=ft.CHANGE_ICON_COLOR,ee=ft.CHANGE_TEXT_STYLE,oe=ft.CLEAR_OBJECTS,Ee=ft.ADD_IMAGE_OBJECT,Te=ft.REMOVE_OBJECT,Ae=ft.RESIZE_IMAGE,Oe=H.name,De=H.args,$e;switch(Oe){case _:$e={name:Oe,detail:De[1]==="reset"?De[1]:m()(N=De[1]).call(N,4)};break;case I:$e={name:Oe,detail:De[2]};break;case B:$e={name:Jt.APPLY_FILTER,detail:oCe(De[1],De[2])};break;case F:$e={name:Jt.REMOVE_FILTER,detail:"Remove"};break;case W:$e={name:Jt.CHANGE_SHAPE,detail:"Change"};break;case U:$e={name:Jt.CHANGE_ICON_COLOR,detail:"Change"};break;case ee:$e={name:Jt.CHANGE_TEXT_STYLE,detail:"Change"};break;case Te:$e={name:Jt.REMOVE_OBJECT,detail:De[2]};break;case oe:$e={name:Jt.CLEAR_OBJECTS,detail:"All"};break;case Ee:$e={name:Jt.ADD_IMAGE_OBJECT,detail:"Add"};break;case D:$e={name:Jt.ADD_TEXT};break;case Ae:$e={name:Jt.RESIZE,detail:J()(O="".concat(~~De[1].width,"x")).call(O,~~De[1].height)};break;default:$e={name:Oe};break}return De[1]==="mask"&&($e={name:Jt.LOAD_MASK_IMAGE,detail:"Apply"}),$e}function lCe(H){return H==="top"?"bottom":H==="left"?"right":H==="right"?"left":"top"}function jj(H){return H.replace(/[a-z]/,function(N){return N.toUpperCase()})}function cCe(H){var N=H.left,O=H.top,_=H.width,I=H.height,D=Wc.LEFT,B=Wc.TOP,F=Wc.WIDTH,W=Wc.HEIGHT;return N===D&&O===B&&_===F&&I===W}var uCe=mt("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Fj={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},dCe={UN_IMPLEMENTATION:function(N){return Fj.UN_IMPLEMENTATION+N},NO_COMPONENT_NAME:function(){return Fj.NO_COMPONENT_NAME}},Xy={types:Z()({},uCe),create:function(N){N=N.toLowerCase();for(var O=dCe[N],_=arguments.length,I=new Array(_>1?_-1:0),D=1;D<_;D++)I[D-1]=arguments[D];return O.apply(void 0,I)}},Hj=Xy.create,zj=Xy.types,fCe=function(){function H(N,O){Y(this,H),this.name=N.name,this.args=O,this.execute=N.execute,this.undo=N.undo,this.executeCallback=N.executeCallback||null,this.undoCallback=N.undoCallback||null,this.undoData={}}return K(H,[{key:"execute",value:function(){throw new Error(Hj(zj.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(Hj(zj.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return Me()(this.undoData).length>0}},{key:"setUndoData",value:function(O,_,I){return _&&(O=_),I?_||(_=O):(Z()(this.undoData,O),_=null),_}},{key:"setExecuteCallback",value:function(O){return this.executeCallback=O,this}},{key:"setUndoCallback",value:function(O){return this.undoCallback=O,this}}]),H}(),hCe=fCe,$j={};function pCe(H){var N=$j[H];if(N){for(var O=arguments.length,_=new Array(O>1?O-1:0),I=1;I<O;I++)_[I-1]=arguments[I];return new hCe(N,_)}return null}function mCe(H){$j[H.name]=H}var Bn={create:pCe,register:mCe},Uj=function(){function H(){Y(this,H),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return K(H,[{key:"_invokeExecution",value:function(O){var _=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var D=O.args;return D||(D=[]),O.execute.apply(O,j(D)).then(function(B){return _._isSilent||(_.pushUndoStack(O),_.fire(I?je.AFTER_REDO:je.EXECUTE_COMMAND,O)),_.unlock(),Qe(O.executeCallback)&&O.executeCallback(B),B}).catch(function(B){return _.unlock(),de().reject(B)})}},{key:"_invokeUndo",value:function(O){var _=this;this.lock();var I=O.args;return I||(I=[]),O.undo.apply(O,j(I)).then(function(D){return _.pushRedoStack(O),_.fire(je.AFTER_UNDO,O),_.unlock(),Qe(O.undoCallback)&&O.undoCallback(D),D}).catch(function(D){return _.unlock(),de().reject(D)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(je.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(je.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var O=this;this._isSilent=!0;for(var _=arguments.length,I=new Array(_),D=0;D<_;D++)I[D]=arguments[D];return this.execute.apply(this,J()(I).call(I,[this._isSilent])).then(function(){O._isSilent=!1})}},{key:"execute",value:function(){var O=this;if(this._isLocked)return de().reject(un.isLock);for(var _=arguments.length,I=new Array(_),D=0;D<_;D++)I[D]=arguments[D];var B=I[0];return ie()(B)&&(B=Bn.create.apply(Bn,I)),this._invokeExecution(B).then(function(F){return O.clearRedoStack(),F})}},{key:"undo",value:function(){var O=this._undoStack.pop(),_,I="";if(O&&this._isLocked&&(this.pushUndoStack(O,!0),O=null),O)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),_=this._invokeUndo(O);else{if(I=un.undo,this._isLocked){var D;I=J()(D="".concat(I," Because ")).call(D,un.isLock)}_=de().reject(I)}return _}},{key:"redo",value:function(){var O=this._redoStack.pop(),_,I="";if(O&&this._isLocked&&(this.pushRedoStack(O,!0),O=null),O)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),_=this._invokeExecution(O,!0);else{if(I=un.redo,this._isLocked){var D;I=J()(D="".concat(I," Because ")).call(D,un.isLock)}_=de().reject(I)}return _}},{key:"pushUndoStack",value:function(O,_){this._undoStack.push(O),_||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(O,_){this._redoStack.push(O),_||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),H}();ke().mixin(Uj);var gCe=Uj,vCe=o(5214),jl=o.n(vCe),yCe=function(H){var N,O,_,I,D,B,F,W=H.locale,U=H.biImage,ee=H.commonStyle,oe=H.headerStyle,Ee=H.loadButtonStyle,Te=H.downloadButtonStyle,Ae=H.submenuStyle;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=`
    <div class="tui-image-editor-main-container" style="`.concat(ee,`">
        <div class="tui-image-editor-header" style="`)).call(F,oe,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(B,U,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(D,Ee,`">
                    `)).call(I,W.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(_,Te,`">
                    `)).call(O,W.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(N,Ae,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},bCe=function(H){var N,O,_,I,D,B=H.locale,F=H.biImage,W=H.loadButtonStyle,U=H.downloadButtonStyle,ee=H.menuBarPosition;return J()(N=J()(O=J()(_=J()(I=J()(D=`
    <ul class="tui-image-editor-help-menu `.concat(lCe(ee),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(D,F,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(I,W,`">
                `)).call(_,B.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(O,U,`">
                `)).call(N,B.localize("Download"),`
            </button>
        </div>
    </div>
`)},wCe=o(899),Va=o.n(wCe),xCe=function(H){var N,O,_,I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e,yt,wt,It,tt,an,ii,Xi,mr,ga,zl,Ki,Uh,tb=H.subMenuLabelActive,nb=H.subMenuLabelNormal,rb=H.subMenuRangeTitle,ib=H.submenuPartitionVertical,ob=H.submenuPartitionHorizontal,ab=H.submenuCheckbox,sb=H.submenuRangePointer,lb=H.submenuRangeValue,cb=H.submenuColorpickerTitle,ub=H.submenuColorpickerButton,db=H.submenuRangeBar,fb=H.submenuRangeSubbar,hb=H.submenuDisabledRangePointer,pb=H.submenuDisabledRangeBar,mb=H.submenuDisabledRangeSubbar,gb=H.submenuIconSize,vb=H.menuIconSize,yb=H.biSize,va=H.menuIconStyle,Yc=H.submenuIconStyle;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee=J()(oe=J()(Ee=J()(Te=J()(Ae=J()(Oe=J()(De=J()($e=J()(yt=J()(wt=J()(It=J()(tt=J()(an=J()(ii=J()(Xi=J()(mr=J()(ga=J()(zl=J()(Ki=J()(Uh=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(tb,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(Uh,nb,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(Ki,rb,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(zl,ib,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(ga,ob,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(mr,ab,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Xi,sb,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(ii,db,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(an,fb,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(tt,hb,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(It,mb,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(wt,pb,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(yt,lb,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call($e,cb,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(De,ub,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(Oe,vb,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(Ae,gb,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(Te,yb,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(Ee,va.normal.color,`;
        stroke: `)).call(oe,va.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(ee,va.active.color,`;
        stroke: `)).call(U,va.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(W,va.hover.color,`;
        stroke: `)).call(F,va.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(B,va.disabled.color,`;
        stroke: `)).call(D,va.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(I,Yc.normal.color,`;
        stroke: `)).call(_,Yc.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(O,Yc.active.color,`;
        stroke: `)).call(N,Yc.active.color,`;
    }
`)},CCe={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},SCe=o(2534),kCe=function(){function H(N){Y(this,H),this.styles=this._changeToObject(Z()({},CCe,N)),ma(this._styleMaker()),this._loadDefaultSvgIcon()}return K(H,[{key:"getStyle",value:function(O){var _=null,I=O.replace(/\..+$/,""),D=this.styles[O];switch(O){case"common.bi":_=this.styles[O].image;break;case"menu.icon":_={active:this.styles["".concat(I,".activeIcon")],normal:this.styles["".concat(I,".normalIcon")],hover:this.styles["".concat(I,".hoverIcon")],disabled:this.styles["".concat(I,".disabledIcon")]};break;case"submenu.icon":_={active:this.styles["".concat(I,".activeIcon")],normal:this.styles["".concat(I,".normalIcon")]};break;case"submenu.label":_={active:this._makeCssText(this.styles["".concat(I,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(I,".normalLabel")])};break;case"submenu.partition":_={vertical:this._makeCssText(Z()({},D,{borderLeft:"1px solid ".concat(D.color)})),horizontal:this._makeCssText(Z()({},D,{borderBottom:"1px solid ".concat(D.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":D.backgroundColor=D.color,_=this._makeCssText(D);break;default:_=this._makeCssText(D);break}return _}},{key:"_styleMaker",value:function(){var O=this.getStyle("submenu.label"),_=this.getStyle("submenu.partition");return xCe({subMenuLabelActive:O.active,subMenuLabelNormal:O.normal,submenuPartitionVertical:_.vertical,submenuPartitionHorizontal:_.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(O){var _={};return le()(O,function(I,D){var B=D.match(/^(.+)\.([a-z]+)$/i),F=se(B,3),W=F[1],U=F[2];_[W]||(_[W]={}),_[W][U]=I}),_}},{key:"_makeCssText",value:function(O){var _=this,I=[];return le()(O,function(D,B){var F,W;d()(F=["backgroundImage"]).call(F,B)>-1&&D!=="none"&&(D="url(".concat(D,")")),I.push(J()(W="".concat(_._toUnderScore(B),": ")).call(W,D))}),I.join(";")}},{key:"_toUnderScore",value:function(O){return O.replace(/([A-Z])/g,function(_,I){return"-".concat(I.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var O=new DOMParser,_=SCe.replace(/data:image\/svg\+xml;base64,/,""),I=O.parseFromString(atob(_),"text/xml");document.body.appendChild(I.documentElement)}}},{key:"_makeIconClassName",value:function(O,_){var I=_?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),D=I[O],B=D.path,F=D.name;return B&&F?O:"".concat(O," use-default")}},{key:"_makeSvgIconPrefix",value:function(O,_){var I,D=_?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),B=D[O],F=B.path,W=B.name;return F&&W?J()(I="".concat(F,"#")).call(I,W,"-"):"#"}},{key:"_makeSvgItem",value:function(O,_,I){var D=this;return Va()(O).call(O,function(B){var F,W,U=D._makeSvgIconPrefix(B,I),ee=D._toUnderScore(_),oe=D._makeIconClassName(B,I);return J()(F=J()(W='<use xlink:href="'.concat(U,"ic-")).call(W,ee,'" class="')).call(F,oe,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(O,_){var I,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return J()(I='<svg class="svg_ic-'.concat(D?"submenu":"menu",'">')).call(I,this._makeSvgItem(O,_,D),"</svg>")}}]),H}(),ECe=kCe,TCe=o(9146),He=o.n(TCe),MCe=o(6623),Wj=o(4230);function OE(H,N){return OE=Wj||function(_,I){return _.__proto__=I,_},OE(H,N)}function fn(H,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=MCe(N&&N.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),N&&OE(H,N)}var ICe=o(3742);function Ky(H){"@babel/helpers - typeof";return typeof T=="function"&&typeof ICe=="symbol"?Ky=function(O){return typeof O}:Ky=function(O){return O&&typeof T=="function"&&O.constructor===T&&O!==T.prototype?"symbol":typeof O},Ky(H)}function qt(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function hn(H,N){if(N&&(Ky(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qt(H)}var Yj=o(9856);function bt(H){return bt=Wj?Yj:function(O){return O.__proto__||Yj(O)},bt(H)}var OCe=o(6092),Fh=o.n(OCe),ACe=o(4858),_Ce=o.n(ACe),DCe=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Gj=function(){function H(N,O){var _=O.defaultColor,I=_===void 0?"#7e7e7e":_,D=O.toggleDirection,B=D===void 0?"up":D,F=O.usageStatistics;Y(this,H),this.colorpickerElement=N,this.usageStatistics=F,this._show=!1,this._colorpickerElement=N,this._toggleDirection=B,this._makePickerButtonElement(I),this._makePickerLayerElement(N,N.getAttribute("title")),this._color=I,this.picker=_Ce().create({container:this.pickerElement,preset:DCe,color:I,usageStatistics:this.usageStatistics}),this._addEvent()}return K(H,[{key:"destroy",value:function(){var O=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",le()(this,function(_,I){O[I]=null})}},{key:"color",get:function(){return this._color},set:function(O){this._color=O,this._changeColorElement(O)}},{key:"_changeColorElement",value:function(O){O?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=O):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(O){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",O?this.colorElement.style.backgroundColor=O:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(O,_){var I=document.createElement("label"),D=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",I.innerHTML=_,D.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(D),O.appendChild(this.pickerControl),O.appendChild(this.colorElement),O.appendChild(I)}},{key:"_addEvent",value:function(){var O=this,_;this.picker.on("selectColor",function(I){O._changeColorElement(I.color),O._color=I.color,O.fire("change",I.color)}),this.eventHandler={pickerToggle:G()(_=this._pickerToggleEventHandler).call(_,this),pickerHide:function(){return O.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(O){var _=O.target,I=_&&this._isElementInColorPickerControl(_);(!I||I&&this._isPaletteButton(_))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),O.stopPropagation()}},{key:"_isPaletteButton",value:function(O){return O.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(O){for(var _=O;_!==document.body&&_;){if(_===this.pickerControl)return!0;_=_.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var O=this.pickerControl.style,_=this._colorpickerElement.clientWidth/2+2,I=this.pickerControl.offsetWidth/2-_,D=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(D=30),O.top="".concat(D,"px"),O.left="-".concat(I,"px")}}]),H}();ke().mixin(Gj);var Fl=Gj,NCe=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,Xj=function(){function H(N){var O,_,I,D,B,F,W,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,H),this._value=U.value||0,this.rangeElement=N.slider,this.rangeInputElement=N.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=U.min||0,this._max=U.max||100,this._useDecimal=U.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=U.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:G()(O=this._startChangingSlide).call(O,this),stopChangingSlide:G()(_=this._stopChangingSlide).call(_,this),changeSlide:G()(I=this._changeSlide).call(I,this),changeSlideFinally:G()(D=this._changeSlideFinally).call(D,this),changeInput:G()(B=this._changeInput).call(B,this),changeInputFinally:G()(F=this._changeValueWithInput).call(F,this,!0),changeInputWithArrow:G()(W=this._changeValueWithInputKeyEvent).call(W,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=U.value,this.trigger("change")}return K(H,[{key:"destroy",value:function(){var O=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",le()(this,function(_,I){O[I]=null})}},{key:"max",get:function(){return this._max},set:function(O){this._max=O,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(O){this._min=O,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(O){O=this._useDecimal?O:Qt(O);var _=O-this._min,I=_*this.rangeWidth/this._absMax;this.rangeWidth<I&&(I=this.rangeWidth),this.pointer.style.left="".concat(I,"px"),this.subbar.style.right="".concat(this.rangeWidth-I,"px"),this._value=O,this.rangeInputElement&&(this.rangeInputElement.value=O)}},{key:"trigger",value:function(O){this.fire(O,this._value)}},{key:"_getRangeWidth",value:function(){var O=function(I){return Qt(window.getComputedStyle(I,null).width)};return O(this.rangeElement)-O(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(O){var _,I=O.keyCode,D=O.target;if(!(d()(_=[Rn.ARROW_UP,Rn.ARROW_DOWN]).call(_,I)<0)){var B=Number(D.value);B=this._valueUpDownForKeyEvent(B,I);var F=B<this._min||B>this._max;if(!F){var W=St(B,this._min,this.max);this.value=W,this.fire("change",W,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(O,_){var I=this._useDecimal?.1:1;return _===Rn.ARROW_UP?O+=I:_===Rn.ARROW_DOWN&&(O-=I),O}},{key:"_changeInput",value:function(O){var _=this;clearTimeout(this._userInputTimer);var I=O.keyCode;if(I<Rn.DIGIT_0||I>Rn.DIGIT_9){O.preventDefault();return}this._userInputTimer=p()(function(){_._inputSetValue(O.target.value)},350)}},{key:"_inputSetValue",value:function(O){var _=this._useDecimal?Number(O):Qt(O);_=St(_,this._min,this.max),this.value=_,this.fire("change",_,!0)}},{key:"_changeValueWithInput",value:function(O,_){var I,D=_.keyCode,B=_.target;if(!(d()(I=[Rn.ARROW_UP,Rn.ARROW_DOWN]).call(I,D)>=0)){var F=this._filterForInputText(B.value),W=!F||isNaN(F);B.value=F,W||this._inputSetValue(F)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(O){var _=O.screenX,I=_-this.firstPosition,D=this.firstLeft+I;D=D>this.rangeWidth?this.rangeWidth:D,D=D<0?0:D,this.pointer.style.left="".concat(D,"px"),this.subbar.style.right="".concat(this.rangeWidth-D,"px");var B=D/this.rangeWidth,F=this._absMax*B+this._min,W=this._useDecimal?F:Qt(F),U=this.value!==W;U&&(this.value=W,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(O){if(O.stopPropagation(),O.target.className==="tui-image-editor-range"){var _=O.offsetX,I=_/this.rangeWidth,D=this._absMax*I+this._min;this.pointer.style.left="".concat(I*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-I)*this.rangeWidth,"px"),this.value=D,this.fire("change",D,!0)}}},{key:"_startChangingSlide",value:function(O){this.firstPosition=O.screenX,this.firstLeft=Qt(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(O){return O.replace(NCe,"$1$2$3")}}]),H}();ke().mixin(Xj);var jo=Xj,Kj=function(){function H(N,O){var _=O.locale,I=O.name,D=O.makeSvgIcon,B=O.menuBarPosition,F=O.templateHtml,W=O.usageStatistics;Y(this,H),this.subMenuElement=N,this.menuBarPosition=B,this.toggleDirection=B==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=W,this.eventHandler={},this._makeSubMenuElement({locale:_,name:I,makeSvgIcon:D,templateHtml:F})}return K(H,[{key:"selector",value:function(O){return this.subMenuElement.querySelector(O)}},{key:"colorPickerChangeShow",value:function(O){var _;Se()(_=this.colorPickerControls).call(_,function(I){O!==I&&I.hide()})}},{key:"getButtonType",value:function(O,_){return O.className.match(RegExp("(".concat(_.join("|"),")")))[0]}},{key:"changeClass",value:function(O,_,I){O.classList.remove(_),O.classList.add(I)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(O){var _=O.locale,I=O.name,D=O.iconStyle,B=O.makeSvgIcon,F=O.templateHtml,W=document.createElement("div");W.className="tui-image-editor-menu-".concat(I),W.innerHTML=F({locale:_,iconStyle:D,makeSvgIcon:B}),this.subMenuElement.appendChild(W)}},{key:"_onStartEditingInputBox",value:function(){this.fire(je.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(je.INPUT_BOX_EDITING_STOPPED)}}]),H}();ke().mixin(Kj);var qa=Kj,PCe=function(H){var N,O,_,I,D,B,F,W,U=H.locale,ee=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(ee(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(W,U.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(F,ee(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(B,U.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(D,ee(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(I,U.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(_,U.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(O,U.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(N,U.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function LCe(H){var N=RCe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function RCe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var BCe={stroke:"#ffbb3b",fill:"",strokeWidth:3},jCe=function(H){fn(O,H);var N=LCe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"shape",makeSvgIcon:F,menuBarPosition:W,templateHtml:PCe,usageStatistics:U}),D.type=null,D.options=BCe,D._els={shapeSelectButton:D.selector(".tie-shape-button"),shapeColorButton:D.selector(".tie-shape-color-button"),strokeRange:new jo({slider:D.selector(".tie-stroke-range"),input:D.selector(".tie-stroke-range-value")},Lh),fillColorpicker:new Fl(D.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:D.toggleDirection,usageStatistics:D.usageStatistics}),strokeColorpicker:new Fl(D.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:D.toggleDirection,usageStatistics:D.usageStatistics})},D.colorPickerControls.push(D._els.fillColorpicker),D.colorPickerControls.push(D._els.strokeColorpicker),D.colorPickerInputBoxes=[],D.colorPickerInputBoxes.push(D._els.fillColorpicker.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX)),D.colorPickerInputBoxes.push(D._els.strokeColorpicker.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX)),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W,U,ee,oe=this;this.eventHandler.shapeTypeSelected=G()(D=this._changeShapeHandler).call(D,this),this.actions=I,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",G()(B=this._changeStrokeRangeHandler).call(B,this)),this._els.fillColorpicker.on("change",G()(F=this._changeFillColorHandler).call(F,this)),this._els.strokeColorpicker.on("change",G()(W=this._changeStrokeColorHandler).call(W,this)),this._els.fillColorpicker.on("changeShow",G()(U=this.colorPickerChangeShow).call(U,this)),this._els.strokeColorpicker.on("changeShow",G()(ee=this.colorPickerChangeShow).call(ee,this)),Fh()(this.colorPickerInputBoxes,function(Ee){var Te,Ae;Ee.addEventListener(je.FOCUS,G()(Te=oe._onStartEditingInputBox).call(Te,oe)),Ee.addEventListener(je.BLUR,G()(Ae=oe._onStopEditingInputBox).call(Ae,oe))},this)}},{key:"_removeEvent",value:function(){var I=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),Fh()(this.colorPickerInputBoxes,function(D){var B,F;D.removeEventListener(je.FOCUS,G()(B=I._onStartEditingInputBox).call(B,I)),D.removeEventListener(je.BLUR,G()(F=I._onStopEditingInputBox).call(F,I))},this)}},{key:"setShapeStatus",value:function(I){var D=I.strokeWidth,B=I.strokeColor,F=I.fillColor;this._els.strokeRange.value=D,this._els.strokeColorpicker.color=B,this._els.fillColorpicker.color=F,this.options.stroke=B,this.options.fill=F,this.options.strokeWidth=D,this.actions.setDrawingShape(this.type,{strokeWidth:D})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(I){var D=I;D<=0&&(D=Lh.max),this._els.strokeRange.max=D}},{key:"setStrokeValue",value:function(I){this._els.strokeRange.value=I,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(I){var D=I.target.closest(".tui-image-editor-button");if(D){this.actions.stopDrawingMode(),this.actions.discardSelection();var B=this.getButtonType(D,["circle","triangle","rect"]);if(this.type===B){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=B,I.currentTarget.classList.add(B),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(I,D){this.options.strokeWidth=Qt(I),this.actions.changeShape({strokeWidth:I},!D),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(I){I=I||"transparent",this.options.fill=I,this.actions.changeShape({fill:I})}},{key:"_changeStrokeColorHandler",value:function(I){I=I||"transparent",this.options.stroke=I,this.actions.changeShape({stroke:I})}}]),O}(qa),FCe=jCe,HCe=function(H){var N,O,_,I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e,yt=H.locale,wt=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee=J()(oe=J()(Ee=J()(Te=J()(Ae=J()(Oe=J()(De=J()($e=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(wt(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call($e,yt.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(De,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(Oe,yt.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(Ae,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(Te,yt.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(Ee,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(oe,yt.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(ee,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(U,yt.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(W,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(F,yt.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(B,wt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(D,yt.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(I,wt(["normal","active"],"apply"),`
                <label>
                    `)).call(_,yt.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(O,wt(["normal","active"],"cancel"),`
                <label>
                    `)).call(N,yt.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function zCe(H){var N=$Ce();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function $Ce(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var UCe=function(H){fn(O,H);var N=zCe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"crop",makeSvgIcon:F,menuBarPosition:W,templateHtml:HCe,usageStatistics:U}),D.status="active",D._els={apply:D.selector(".tie-crop-button .apply"),cancel:D.selector(".tie-crop-button .cancel"),preset:D.selector(".tie-crop-preset-button")},D.defaultPresetButton=D._els.preset.querySelector(".preset-none"),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W=G()(D=this._applyEventHandler).call(D,this),U=G()(B=this._cancelEventHandler).call(B,this),ee=G()(F=this._cropzonePresetEventHandler).call(F,this);this.eventHandler={apply:W,cancel:U,cropzonePreset:ee},this.actions=I,this._els.apply.addEventListener("click",W),this._els.cancel.addEventListener("click",U),this._els.preset.addEventListener("click",ee)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(I){var D=I.target.closest(".tui-image-editor-button.preset");if(D){var B=D.className.match(/preset-[^\s]+/),F=se(B,1),W=F[0];this._setPresetButtonActive(D),this.actions.preset(W)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(I){I?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;le()(this._els.preset.querySelectorAll(".preset"),function(D){D.classList.remove("active")}),I&&I.classList.add("active")}}]),O}(qa),WCe=UCe,YCe=function(H){var N,O,_,I,D,B,F=H.locale,W=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(F.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(B,F.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(D,F.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(I,W(["normal","active"],"apply"),`
                <label>
                    `)).call(_,F.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(O,W(["normal","active"],"cancel"),`
                <label>
                    `)).call(N,F.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function GCe(H){var N=XCe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function XCe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var KCe=function(H){fn(O,H);var N=GCe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"resize",makeSvgIcon:F,menuBarPosition:W,templateHtml:YCe,usageStatistics:U}),D.status="active",D._lockState=!1,D._originalDimensions=null,D._els={widthRange:new jo({slider:D.selector(".tie-width-range"),input:D.selector(".tie-width-range-value")},Bs),heightRange:new jo({slider:D.selector(".tie-height-range"),input:D.selector(".tie-height-range-value")},Bs),lockAspectRatio:D.selector(".tie-lock-aspect-ratio"),apply:D.selector(".tie-resize-button .apply"),cancel:D.selector(".tie-resize-button .cancel")},D}return K(O,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var I=this.actions.getCurrentDimensions();this._originalDimensions=I,this.setWidthValue(I.width),this.setHeightValue(I.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(I){this._els.widthRange.min=this.calcMinValue(I.minWidth),this._els.heightRange.min=this.calcMinValue(I.minHeight),this._els.widthRange.max=this.calcMaxValue(I.maxWidth),this._els.heightRange.max=this.calcMaxValue(I.maxHeight)}},{key:"calcMaxValue",value:function(I){return I<=0&&(I=Bs.max),I}},{key:"calcMinValue",value:function(I){return I<=0&&(I=Bs.min),I}},{key:"setWidthValue",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=I,D&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=I,D&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W,U;this._els.widthRange.on("change",G()(D=this._changeWidthRangeHandler).call(D,this)),this._els.heightRange.on("change",G()(B=this._changeHeightRangeHandler).call(B,this)),this._els.lockAspectRatio.addEventListener("change",G()(F=this._changeLockAspectRatio).call(F,this));var ee=G()(W=this._applyEventHandler).call(W,this),oe=G()(U=this._cancelEventHandler).call(U,this);this.eventHandler={apply:ee,cancel:oe},this.actions=I,this._els.apply.addEventListener("click",ee),this._els.cancel.addEventListener("click",oe)}},{key:"_changeWidthRangeHandler",value:function(I){this.actions.preview("width",Qt(I),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(I){this.actions.preview("height",Qt(I),this._lockState)}},{key:"_changeLockAspectRatio",value:function(I){this._lockState=I.target.checked,this.actions.lockAspectRatio(this._lockState,Bs.min,Bs.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(I){I?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),O}(qa),ZCe=KCe,JCe=function(H){var N,O,_,I,D,B=H.locale,F=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(F(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(D,B.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(I,F(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(_,B.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(O,F(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(N,B.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function QCe(H){var N=VCe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function VCe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var qCe=function(H){fn(O,H);var N=QCe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"flip",makeSvgIcon:F,menuBarPosition:W,templateHtml:JCe,usageStatistics:U}),D.flipStatus=!1,D._els={flipButton:D.selector(".tie-flip-button")},D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),Ci(this)}},{key:"addEvent",value:function(I){var D;this.eventHandler.changeFlip=G()(D=this._changeFlip).call(D,this),this._actions=I,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(I){var D=this,B=I.target.closest(".tui-image-editor-button");if(B){var F=this.getButtonType(B,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&F==="resetFlip")return;this._actions.flip(F).then(function(W){var U=D._els.flipButton.classList;D.flipStatus=!1,U.remove("resetFlip"),le()(["flipX","flipY"],function(ee){U.remove(ee),W[ee]&&(U.add(ee),U.add("resetFlip"),D.flipStatus=!0)})})}}}]),O}(qa),eSe=qCe,tSe=function(H){var N,O,_=H.locale,I=H.makeSvgIcon;return J()(N=J()(O=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(I(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(O,I(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(N,_.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function nSe(H){var N=rSe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function rSe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var iSe=30,oSe=-30,aSe=function(H){fn(O,H);var N=nSe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"rotate",makeSvgIcon:F,menuBarPosition:W,templateHtml:tSe,usageStatistics:U}),D._value=0,D._els={rotateButton:D.selector(".tie-rotate-button"),rotateRange:new jo({slider:D.selector(".tie-rotate-range"),input:D.selector(".tie-rotate-range-value")},Fy)},D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),Ci(this)}},{key:"setRangeBarAngle",value:function(I,D){var B=D;I==="rotate"&&(B=Ie()(this._els.rotateRange.value,10)+D),this._setRangeBarRatio(B)}},{key:"_setRangeBarRatio",value:function(I){this._els.rotateRange.value=I}},{key:"addEvent",value:function(I){var D,B;this.eventHandler.rotationAngleChanged=G()(D=this._changeRotateForButton).call(D,this),this.actions=I,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",G()(B=this._changeRotateForRange).call(B,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(I,D){var B=Qt(I);this.actions.setAngle(B,!D),this._value=B}},{key:"_changeRotateForButton",value:function(I){var D=I.target.closest(".tui-image-editor-button"),B=this._els.rotateRange.value;if(D){var F=this.getButtonType(D,["counterclockwise","clockwise"]),W={clockwise:iSe,counterclockwise:oSe}[F],U=Ie()(B,10)+W,ee=U>=-360&&U<=360;ee&&this.actions.rotate(W)}}}]),O}(qa),sSe=aSe,lSe=function(H){var N,O,_,I,D,B,F,W,U,ee,oe,Ee,Te,Ae=H.locale,Oe=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee=J()(oe=J()(Ee=J()(Te=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(Oe(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(Te,Ae.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(Ee,Oe(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(oe,Ae.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(ee,Oe(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(U,Ae.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(W,Oe(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(F,Ae.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(B,Oe(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(D,Ae.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(I,Oe(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(_,Ae.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(O,Ae.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(N,Ae.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function cSe(H){var N=uSe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function uSe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var dSe=function(H){fn(O,H);var N=cSe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"text",makeSvgIcon:F,menuBarPosition:W,templateHtml:lSe,usageStatistics:U}),D.effect={bold:!1,italic:!1,underline:!1},D.align="tie-text-align-left",D._els={textEffectButton:D.selector(".tie-text-effect-button"),textAlignButton:D.selector(".tie-text-align-button"),textColorpicker:new Fl(D.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:D.toggleDirection,usageStatistics:D.usageStatistics}),textRange:new jo({slider:D.selector(".tie-text-range"),input:D.selector(".tie-text-range-value")},zy)},D.colorPickerInputBox=D._els.textColorpicker.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W,U,ee,oe=G()(D=this._setTextEffectHandler).call(D,this),Ee=G()(B=this._setTextAlignHandler).call(B,this);this.eventHandler={setTextEffect:oe,setTextAlign:Ee},this.actions=I,this._els.textEffectButton.addEventListener("click",oe),this._els.textAlignButton.addEventListener("click",Ee),this._els.textRange.on("change",G()(F=this._changeTextRnageHandler).call(F,this)),this._els.textColorpicker.on("change",G()(W=this._changeColorHandler).call(W,this)),this.colorPickerInputBox.addEventListener(je.FOCUS,G()(U=this._onStartEditingInputBox).call(U,this)),this.colorPickerInputBox.addEventListener(je.BLUR,G()(ee=this._onStopEditingInputBox).call(ee,this))}},{key:"_removeEvent",value:function(){var I,D,B=this.eventHandler,F=B.setTextEffect,W=B.setTextAlign;this._els.textEffectButton.removeEventListener("click",F),this._els.textAlignButton.removeEventListener("click",W),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(je.FOCUS,G()(I=this._onStartEditingInputBox).call(I,this)),this.colorPickerInputBox.removeEventListener(je.BLUR,G()(D=this._onStopEditingInputBox).call(D,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(I){this._els.textColorpicker.color=I}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(I){this._els.textRange.value=I}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=pe()(I),B=I.fontSize,F=I.fontStyle,W=I.fontWeight,U=I.textDecoration,ee=I.textAlign;this.textColor=D,this.fontSize=B,this.setEffectState("italic",F),this.setEffectState("bold",W),this.setEffectState("underline",U),this.setAlignState("tie-text-align-".concat(ee))}},{key:"setEffectState",value:function(I,D){var B=D==="italic"||D==="bold"||D==="underline",F=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(I));this.effect[I]=B,F.classList[B?"add":"remove"]("active")}},{key:"setAlignState",value:function(I){var D=this._els.textAlignButton;D.classList.remove(this.align),D.classList.add(I),this.align=I}},{key:"_setTextEffectHandler",value:function(I){var D=I.target.closest(".tui-image-editor-button");if(D){var B=D.className.match(/(bold|italic|underline)/),F=se(B,1),W=F[0],U={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[W];this.effect[W]=!this.effect[W],D.classList.toggle("active"),this.actions.changeTextStyle(U)}}},{key:"_setTextAlignHandler",value:function(I){var D=I.target.closest(".tui-image-editor-button");if(D){var B=this.getButtonType(D,["left","center","right"]),F="tie-text-align-".concat(B);I.currentTarget.classList.remove(this.align),this.align!==F&&I.currentTarget.classList.add(F),this.actions.changeTextStyle({textAlign:B}),this.align=F}}},{key:"_changeTextRnageHandler",value:function(I,D){this.actions.changeTextStyle({fontSize:I},!D)}},{key:"_changeColorHandler",value:function(I){I=I||"transparent",this.actions.changeTextStyle({fill:I})}}]),O}(qa),fSe=dSe,hSe=function(H){var N,O,_,I=H.locale,D=H.makeSvgIcon;return J()(N=J()(O=J()(_=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(D(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(_,I.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(O,D(["normal","active"],"apply"),`
                <label>
                    `)).call(N,I.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function pSe(H){var N=mSe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function mSe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var gSe=function(H){fn(O,H);var N=pSe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"mask",makeSvgIcon:F,menuBarPosition:W,templateHtml:hSe,usageStatistics:U}),D._els={applyButton:D.selector(".tie-mask-apply"),maskImageButton:D.selector(".tie-mask-image-file")},D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F=G()(D=this._loadMaskFile).call(D,this),W=G()(B=this._applyMask).call(B,this);this.eventHandler={loadMaskFile:F,applyMask:W},this.actions=I,this._els.maskImageButton.addEventListener("change",F),this._els.applyButton.addEventListener("click",W)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(I){var D;ri()||alert("This browser does not support file-api");var B=se(I.target.files,1),F=B[0];F&&(D=V().createObjectURL(F),this.actions.loadImageFromURL(D,F),this._els.applyButton.classList.add("active"))}}]),O}(qa),vSe=gSe,ySe=function(H){var N,O,_,I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e,yt,wt,It,tt=H.locale,an=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee=J()(oe=J()(Ee=J()(Te=J()(Ae=J()(Oe=J()(De=J()($e=J()(yt=J()(wt=J()(It=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(an(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(It,tt.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(wt,an(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(yt,tt.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call($e,an(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(De,tt.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(Oe,an(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(Ae,tt.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(Te,an(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(Ee,tt.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(oe,an(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(ee,tt.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(U,an(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(W,tt.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(F,an(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(B,tt.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(D,an(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(I,tt.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(_,an(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(O,tt.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(N,tt.localize("Color"),`"></div>
        </li>
    </ul>
`)};function bSe(H){var N=wSe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function wSe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var xSe=function(H){fn(O,H);var N=bSe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"icon",makeSvgIcon:F,menuBarPosition:W,templateHtml:ySe,usageStatistics:U}),D.iconType=null,D._iconMap={},D._els={registerIconButton:D.selector(".tie-icon-image-file"),addIconButton:D.selector(".tie-icon-add-button"),iconColorpicker:new Fl(D.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:D.toggleDirection,usageStatistics:D.usageStatistics})},D.colorPickerInputBox=D._els.iconColorpicker.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W,U,ee=G()(D=this._registerIconHandler).call(D,this),oe=G()(B=this._addIconHandler).call(B,this);this.eventHandler={registerIcon:ee,addIcon:oe},this.actions=I,this._els.iconColorpicker.on("change",G()(F=this._changeColorHandler).call(F,this)),this._els.registerIconButton.addEventListener("change",ee),this._els.addIconButton.addEventListener("click",oe),this.colorPickerInputBox.addEventListener(je.FOCUS,G()(W=this._onStartEditingInputBox).call(W,this)),this.colorPickerInputBox.addEventListener(je.BLUR,G()(U=this._onStopEditingInputBox).call(U,this))}},{key:"_removeEvent",value:function(){var I,D;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(je.FOCUS,G()(I=this._onStartEditingInputBox).call(I,this)),this.colorPickerInputBox.removeEventListener(je.BLUR,G()(D=this._onStopEditingInputBox).call(D,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var I=this;le()(jy,function(D,B){I.actions.registerDefaultIcons(B,D)})}},{key:"setIconPickerColor",value:function(I){this._els.iconColorpicker.color=I}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(I){I=I||"transparent",this.actions.changeColor(I)}},{key:"_addIconHandler",value:function(I){var D=I.target.closest(".tui-image-editor-button");if(D){var B=D.getAttribute("data-icontype"),F=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(B),this.iconType===B?this.changeStandbyMode():(this.actions.addIcon(B,F),this.iconType=B)}}},{key:"_registerIconHandler",value:function(I){var D;ri||alert("This browser does not support file-api");var B=se(I.target.files,1),F=B[0];F&&(D=V().createObjectURL(F),this.actions.registerCustomIcon(D,F))}}]),O}(qa),CSe=xSe,SSe=function(H){var N,O,_,I,D,B=H.locale,F=H.makeSvgIcon;return J()(N=J()(O=J()(_=J()(I=J()(D=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(F(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(D,B.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(I,F(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(_,B.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(O,B.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(N,B.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function kSe(H){var N=ESe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function ESe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var TSe=.7,MSe=function(H){fn(O,H);var N=kSe(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon,W=I.menuBarPosition,U=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"draw",makeSvgIcon:F,menuBarPosition:W,templateHtml:SSe,usageStatistics:U}),D._els={lineSelectButton:D.selector(".tie-draw-line-select-button"),drawColorPicker:new Fl(D.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:D.toggleDirection,usageStatistics:D.usageStatistics}),drawRange:new jo({slider:D.selector(".tie-draw-range"),input:D.selector(".tie-draw-range-value")},Hy)},D.type=null,D.color=D._els.drawColorPicker.color,D.width=D._els.drawRange.value,D.colorPickerInputBox=D._els.drawColorPicker.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),Ci(this)}},{key:"addEvent",value:function(I){var D,B,F,W,U;this.eventHandler.changeDrawType=G()(D=this._changeDrawType).call(D,this),this.actions=I,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",G()(B=this._changeDrawColor).call(B,this)),this._els.drawRange.on("change",G()(F=this._changeDrawRange).call(F,this)),this.colorPickerInputBox.addEventListener(je.FOCUS,G()(W=this._onStartEditingInputBox).call(W,this)),this.colorPickerInputBox.addEventListener(je.BLUR,G()(U=this._onStopEditingInputBox).call(U,this))}},{key:"_removeEvent",value:function(){var I,D;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(je.FOCUS,G()(I=this._onStartEditingInputBox).call(I,this)),this.colorPickerInputBox.removeEventListener(je.BLUR,G()(D=this._onStopEditingInputBox).call(D,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:Ze(this.color,TSe)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(I){var D=I.target.closest(".tui-image-editor-button");if(D){var B=this.getButtonType(D,["free","line"]);if(this.actions.discardSelection(),this.type===B){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=B,this._els.lineSelectButton.classList.add(B),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(I){this.color=I||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(I){this.width=I,this.type?this.setDrawMode():this.changeStartMode()}}]),O}(qa),ISe=MSe,OSe=o(9886),Zj=o.n(OSe),ASe=function(H){var N,O,_,I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e=H.locale;return J()(N=J()(O=J()(_=J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee=J()(oe=J()(Ee=J()(Te=J()(Ae=J()(Oe=J()(De=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat($e.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(De,$e.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(Oe,$e.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(Ae,$e.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(Te,$e.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(Ee,$e.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(oe,$e.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(ee,$e.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(U,$e.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(W,$e.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(F,$e.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(B,$e.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(D,$e.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(I,$e.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(_,$e.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(O,$e.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(N,$e.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function _Se(H){var N=DSe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function DSe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Jj="130px",NSe=["add","diff","subtract","multiply","screen","lighten","darken"],Qj=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],PSe={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},Vj=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],qj=["filterBlendColor","filterMultiplyColor","filterTintColor"],LSe=function(H){fn(O,H);var N=_Se(O);function O(_,I){var D,B=I.locale,F=I.menuBarPosition,W=I.usageStatistics;return Y(this,O),D=N.call(this,_,{locale:B,name:"filter",menuBarPosition:F,templateHtml:ASe,usageStatistics:W}),D.selectBoxShow=!1,D.checkedMap={},D._makeControlElement(),D}return K(O,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),Ci(this)}},{key:"_removeEvent",value:function(){var I=this,D;le()(Qj,function(B){var F=I.selector(".tie-".concat(B)),W=er(B);F.removeEventListener("change",I.eventHandler[W])}),le()(J()(D=[]).call(D,Vj,qj),function(B){I._els[B].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),Fh()(this.colorPickerInputBoxes,function(B){var F,W;B.removeEventListener(je.FOCUS,G()(F=I._onStartEditingInputBox).call(F,I)),B.removeEventListener(je.BLUR,G()(W=I._onStopEditingInputBox).call(W,I))},this)}},{key:"_destroyToolInstance",value:function(){var I,D=this;le()(J()(I=[]).call(I,Vj,qj),function(B){D._els[B].destroy()})}},{key:"addEvent",value:function(I){var D=this,B,F,W,U=I.applyFilter,ee=function(Te){var Ae;return G()(Ae=D._changeFilterState).call(Ae,D,U,Te)},oe=function(Te){return function(Ae,Oe){return D._changeFilterState(U,Te,Oe)}};this.eventHandler={changeBlendFilter:ee("blend"),blandTypeClick:function(Te){return Te.stopPropagation()}},le()(Qj,function(Ee){var Te=D.selector(".tie-".concat(Ee)),Ae=er(Ee);D.checkedMap[Ae]=Te,D.eventHandler[Ae]=ee(Ae),Te.addEventListener("change",D.eventHandler[Ae])}),this._els.removewhiteDistanceRange.on("change",oe("removeWhite")),this._els.colorfilterThresholdRange.on("change",oe("colorFilter")),this._els.pixelateRange.on("change",oe("pixelate")),this._els.noiseRange.on("change",oe("noise")),this._els.brightnessRange.on("change",oe("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",ee("multiply")),this._els.filterTintColor.on("change",ee("tint")),this._els.tintOpacity.on("change",oe("tint")),this._els.filterMultiplyColor.on("changeShow",G()(B=this.colorPickerChangeShow).call(B,this)),this._els.filterTintColor.on("changeShow",G()(F=this.colorPickerChangeShow).call(F,this)),this._els.filterBlendColor.on("changeShow",G()(W=this.colorPickerChangeShow).call(W,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),Fh()(this.colorPickerInputBoxes,function(Ee){var Te,Ae;Ee.addEventListener(je.FOCUS,G()(Te=D._onStartEditingInputBox).call(Te,D)),Ee.addEventListener(je.BLUR,G()(Ae=D._onStopEditingInputBox).call(Ae,D))},this)}},{key:"setFilterState",value:function(I){var D=I.type,B=I.options,F=I.action,W=this._getFilterNameFromOptions(D,B),U=F==="remove";U||this._setFilterState(W,B),this.checkedMap[W].checked=!U}},{key:"initFilterCheckBoxState",value:function(){le()(this.checkedMap,function(I){I.checked=!1},this)}},{key:"_setFilterState",value:function(I,D){I==="colorFilter"?this._els.colorfilterThresholdRange.value=D.distance:I==="removeWhite"?this._els.removewhiteDistanceRange.value=D.distance:I==="pixelate"?this._els.pixelateRange.value=D.blocksize:I==="brightness"?this._els.brightnessRange.value=D.brightness:I==="noise"?this._els.noiseRange.value=D.noise:I==="tint"?(this._els.tintOpacity.value=D.alpha,this._els.filterTintColor.color=D.color):I==="blend"?this._els.filterBlendColor.color=D.color:I==="multiply"&&(this._els.filterMultiplyColor.color=D.color)}},{key:"_getFilterNameFromOptions",value:function(I,D){var B=I;return I==="removeColor"?B=Zj()(D.useAlpha)?"removeWhite":"colorFilter":I==="blendColor"&&(B={add:"blend",multiply:"multiply",tint:"tint"}[D.mode]),B}},{key:"_changeFilterState",value:function(I,D){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,F=this.checkedMap[D].checked,W=PSe[D],U=this.checkedMap[D].closest(".tui-image-editor-checkbox-group");U&&(F?U.classList.remove("tui-image-editor-disabled"):U.classList.add("tui-image-editor-disabled")),I(F,W,this._getFilterOption(D),!B)}},{key:"_getFilterOption",value:function(I){var D={};switch(I){case"removeWhite":D.color="#FFFFFF",D.useAlpha=!1,D.distance=jl()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":D.color="#FFFFFF",D.distance=jl()(this._els.colorfilterThresholdRange.value);break;case"pixelate":D.blocksize=Qt(this._els.pixelateRange.value);break;case"noise":D.noise=Qt(this._els.noiseRange.value);break;case"brightness":D.brightness=jl()(this._els.brightnessRange.value);break;case"blend":D.mode="add",D.color=this._els.filterBlendColor.color,D.mode=this._els.blendType.value;break;case"multiply":D.mode="multiply",D.color=this._els.filterMultiplyColor.color;break;case"tint":D.mode="tint",D.color=this._els.filterTintColor.color,D.alpha=this._els.tintOpacity.value;break;case"blur":D.blur=this._els.blurRange.value;break}return D}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new jo({slider:this.selector(".tie-removewhite-distance-range")},Qa.removewhiteDistanceRange),brightnessRange:new jo({slider:this.selector(".tie-brightness-range")},Qa.brightnessRange),noiseRange:new jo({slider:this.selector(".tie-noise-range")},Qa.noiseRange),pixelateRange:new jo({slider:this.selector(".tie-pixelate-range")},Qa.pixelateRange),colorfilterThresholdRange:new jo({slider:this.selector(".tie-colorfilter-threshold-range")},Qa.colorfilterThresholdRange),filterTintColor:new Fl(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Fl(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Fl(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Qa.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(bn.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(I){var D=document.createElement("div"),B=document.createElement("label"),F=document.createElement("div");return F.id="tie-filter-tint-opacity",B.innerHTML="Opacity",D.appendChild(B),D.appendChild(F),I.appendChild(D),I.style.height=Jj,new jo({slider:F},Qa.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(I){var D=document.createElement("div"),B=document.createElement("select"),F=document.createElement("ul");return D.className="tui-image-editor-selectlist-wrap",F.className="tui-image-editor-selectlist",D.appendChild(B),D.appendChild(F),this._makeSelectOptionList(B),I.appendChild(D),I.style.height=Jj,this._drawSelectOptionList(B,F),this._pickerWithSelectboxForAddEvent(B,F),B}},{key:"_drawSelectOptionList",value:function(I,D){var B=I.querySelectorAll("option");le()(B,function(F){var W=document.createElement("li");W.innerHTML=F.innerHTML,W.setAttribute("data-item",F.value),D.appendChild(W)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(I,D){var B=this;D.addEventListener("click",function(F){var W=F.target.getAttribute("data-item"),U=document.createEvent("HTMLEvents");I.querySelector('[value="'.concat(W,'"]')).selected=!0,U.initEvent("change",!0,!0),I.dispatchEvent(U),B.selectBoxShow=!1,D.style.display="none"}),I.addEventListener("mousedown",function(F){F.preventDefault(),B.selectBoxShow=!B.selectBoxShow,D.style.display=B.selectBoxShow?"block":"none",D.setAttribute("data-selectitem",I.value),D.querySelector("[data-item='".concat(I.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(I){le()(NSe,function(D){var B=document.createElement("option");B.setAttribute("value",D),B.innerHTML=D.replace(/^[a-z]/,function(F){return F.toUpperCase()}),I.appendChild(B)})}}]),O}(qa),RSe=LSe,BSe=o(4383),jSe=o.n(BSe),FSe=function(){function H(N,O){var _=O.name;Y(this,H),this.name=_,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),N.appendChild(this.panelElement)}return K(H,[{key:"_makePanelElement",value:function(){var O=document.createElement("div");return O.className="tie-panel-".concat(this.name),O}},{key:"_makeListElement",value:function(){var O=document.createElement("ol");return O.className="".concat(this.name,"-list"),O}},{key:"makeListItemElement",value:function(O){var _=document.createElement("li");return _.innerHTML=O,_.className="".concat(this.name,"-item"),_.setAttribute("data-index",this.items.length),_}},{key:"pushListItemElement",value:function(O){this.listElement.appendChild(O),this.listElement.scrollTop+=O.offsetHeight,this.items.push(O)}},{key:"deleteListItemElement",value:function(O,_){for(var I=this.items,D=O;D<_;D+=1)this.listElement.removeChild(I[D]);b()(I).call(I,O,_-O+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(O,_){this.items[O]&&this.items[O].classList.add(_)}},{key:"removeClass",value:function(O,_){this.items[O]&&this.items[O].classList.remove(_)}},{key:"toggleClass",value:function(O,_){this.items[O]&&this.items[O].classList.toggle(_)}}]),H}(),HSe=FSe,zSe=function(H){var N,O,_,I=H.locale,D=H.makeSvgIcon,B=H.name,F=H.detail;return J()(N=J()(O=J()(_=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(D(["normal","active"],"history-".concat(B.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(_,I.localize(B),`
            `)).call(O,F?"(".concat(I.localize(F),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(N,D(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function $Se(H){var N=USe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function USe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var WSe="history-item",eF="selected-item",tF="disabled-item",YSe=function(H){fn(O,H);var N=$Se(O);function O(_,I){var D,B=I.locale,F=I.makeSvgIcon;return Y(this,O),D=N.call(this,_,{name:"history"}),_.classList.add("enabled"),D.locale=B,D.makeSvgIcon=F,D._eventHandler={},D._historyIndex=D.getListLength(),D}return K(O,[{key:"add",value:function(I){var D=I.name,B=I.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var F=zSe({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:D,detail:B}),W=this.makeListItemElement(F);this.pushListItemElement(W),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var I=this;this._eventHandler.history=function(D){return I._clickHistoryItem(D)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(I){var D=I.target,B=D.closest(".".concat(WSe));if(B){var F=jSe()(B.getAttribute("data-index"),10);if(F!==this._historyIndex){var W=Math.abs(F-this._historyIndex);F<this._historyIndex?this._actions.undo(W):this._actions.redo(W)}}}},{key:"_selectItem",value:function(I){for(var D=0;D<this.getListLength();D+=1)this.removeClass(D,eF),this.removeClass(D,tF),D>I&&this.addClass(D,tF);this.addClass(I,eF)}},{key:"destroy",value:function(){this.removeEvent(),Ci(this)}},{key:"addEvent",value:function(I){this._actions=I,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),O}(HSe),GSe=YSe,XSe=function(){function H(N){Y(this,H),this._locale=N}return K(H,[{key:"localize",value:function(O){return this._locale[O]||O}}]),H}(),KSe=XSe,ZSe={Shape:FCe,Crop:WCe,Resize:ZCe,Flip:eSe,Rotate:sSe,Text:fSe,Mask:vSe,Icon:CSe,Draw:ISe,Filter:RSe},JSe="1300",nF="history",QSe="tie-panel-history",Hh="on",zh={ZOOM_IN:"zoomIn",HAND:"hand"},rF=function(){function H(N,O,_){Y(this,H),this.options=this._initializeOption(O),this._actions=_,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new KSe(this.options.locale),this.theme=new ECe(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(N),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return K(H,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",Ci(this)}},{key:"setUiDefaultSelectionStyle",value:function(O){return Z()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},O)}},{key:"resizeEditor",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=O.uiSize,I=O.imageSize,D=I===void 0?this.imageSize:I;D!==this.imageSize&&(this.imageSize=D),_&&this._setUiSize(_);var B=this._getCanvasMaxDimension(),F=B.width,W=B.height,U=this._editorElement.style,ee=this.options.menuBarPosition;U.height="".concat(W,"px"),U.width="".concat(F,"px"),this._setEditorPosition(ee),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var oe=this._selectedElement.classList;ee==="top"&&this._selectedElement.offsetWidth<JSe?oe.add("tui-image-editor-top-optimization"):oe.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(O){var _=this._buttonElements[O].classList;_.toggle(Hh),O===zh.ZOOM_IN?this._buttonElements[zh.HAND].classList.remove(Hh):this._buttonElements[zh.ZOOM_IN].classList.remove(Hh)}},{key:"offZoomInButtonStatus",value:function(){var O=this._buttonElements[zh.ZOOM_IN].classList;O.remove(Hh)}},{key:"changeHandButtonStatus",value:function(O){var _=this._buttonElements[zh.HAND].classList;_[O?"add":"remove"](Hh)}},{key:"changeHelpButtonEnabled",value:function(O,_){var I=this._buttonElements[O].classList;I[_?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(O){return Z()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},O)}},{key:"_setUiSize",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,_=this._selectedElement.style;_.width=O.width,_.height=O.height}},{key:"_makeSubMenu",value:function(){var O=this;le()(this.options.menu,function(_){var I,D=ZSe[_.replace(/^[a-z]/,function(B){return B.toUpperCase()})];O._makeMenuElement(_),O._buttonElements[_]=O._menuBarElement.querySelector(".tie-btn-".concat(_)),O[_]=new D(O._subMenuElement,{locale:O._locale,makeSvgIcon:G()(I=O.theme.makeMenSvgIconSet).call(I,O.theme),menuBarPosition:O.options.menuBarPosition,usageStatistics:O.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var O,_,I;this.on(je.EXECUTE_COMMAND,G()(O=this._addHistory).call(O,this)),this.on(je.AFTER_UNDO,G()(_=this._selectPrevHistory).call(_,this)),this.on(je.AFTER_REDO,G()(I=this._selectNextHistory).call(I,this))}},{key:"_attachZoomEvent",value:function(){var O=this;this.on(je.HAND_STARTED,function(){O.offZoomInButtonStatus(),O.changeHandButtonStatus(!0)}),this.on(je.HAND_STOPPED,function(){return O.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(O){var _,I;O.nodeType?I=O:I=document.querySelector(O);var D=Bh(I);I.classList.add("tui-image-editor-container"),I.innerHTML=bCe({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+yCe({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=I,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=D(".tui-image-editor-main"),this._editorElementWrap=D(".tui-image-editor-wrap"),this._editorElement=D(".tui-image-editor"),this._helpMenuBarElement=D(".tui-image-editor-help-menu"),this._menuBarElement=D(".tui-image-editor-menu"),this._subMenuElement=D(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new GSe(this._buttonElements[nF],{locale:this._locale,makeSvgIcon:G()(_=this.theme.makeMenSvgIconSet).call(_,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var O=this;le()(qe,function(_){O.changeHelpButtonEnabled(_,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var O;return J()(O=[]).call(O,j(qe),[""],j(ut),[""],j(Mt))}},{key:"_addHelpMenus",value:function(){var O=this,_=this._makeHelpMenuWithPartition();le()(_,function(I){I?(O._makeMenuElement(I,["normal","disabled","hover"],"help"),O._buttonElements[I]=O._helpMenuBarElement.querySelector(".tie-btn-".concat(I))):O._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var O=document.createElement("li"),_=document.createElement("div");O.className=Yy("item"),_.className=Yy("icpartition"),O.appendChild(_),this._helpMenuBarElement.appendChild(O)}},{key:"_makeMenuElement",value:function(O){var _,I,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",F=document.createElement("li"),W=this.theme.makeMenSvgIconSet(D,O);this._addTooltipAttribute(F,O),F.className=J()(_=J()(I="tie-btn-".concat(O," ")).call(I,Yy("item")," ")).call(_,B),F.innerHTML=W,B==="normal"?this._menuBarElement.appendChild(F):this._helpMenuBarElement.appendChild(F)}},{key:"_addHelpActionEvent",value:function(){var O=this;le()(Ne,function(_){O.eventHandler[_]=function(I){return O._actions.main[_](I)},O._buttonElements[_].addEventListener("click",O.eventHandler[_])})}},{key:"_removeHelpActionEvent",value:function(){var O=this;le()(Ne,function(_){O._buttonElements[_].removeEventListener("click",O.eventHandler[_])})}},{key:"_addHistory",value:function(O){if(!aCe(O)){var _=typeof O=="string"?{name:O}:sCe(O);this._historyMenu.add(_)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(O){var _=O.target,I=_.closest(".".concat(QSe));if(!I){var D=this._buttonElements[nF].classList;D.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(O,_){O.setAttribute("tooltip-content",this._locale.localize(_.replace(/^[a-z]/g,function(I){return I.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var O=this;this.eventHandler.download=function(){return O._actions.main.download()},le()(this._buttonElements.download,function(_){_.addEventListener("click",O.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var O=this;le()(this._buttonElements.download,function(_){_.removeEventListener("click",O.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var O=this;this.eventHandler.loadImage=function(_){return O._actions.main.load(_.target.files[0])},le()(this._buttonElements.load,function(_){_.addEventListener("change",O.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var O=this;le()(this._buttonElements.load,function(_){_.removeEventListener("change",O.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(O){var _=this;this.eventHandler[O]=function(){return _.changeMenu(O)},this._buttonElements[O].addEventListener("click",this.eventHandler[O])}},{key:"_addSubMenuEvent",value:function(O){var _=this;this[O].addEvent(this._actions[O]),this[O].on(je.INPUT_BOX_EDITING_STARTED,function(){return _.fire(je.INPUT_BOX_EDITING_STARTED)}),this[O].on(je.INPUT_BOX_EDITING_STOPPED,function(){return _.fire(je.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var O=this;le()(this.options.menu,function(_){O._addMainMenuEvent(_),O._addSubMenuEvent(_)})}},{key:"_removeMainMenuEvent",value:function(){var O=this;le()(this.options.menu,function(_){O._buttonElements[_].removeEventListener("click",O.eventHandler[_]),O[_].off(je.INPUT_BOX_EDITING_STARTED),O[_].off(je.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var O=this;le()(this.options.menu,function(_){O[_].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var O=this,_=this._getLoadImage();_.path&&this._actions.main.initLoadImage(_.path,_.name).then(function(){O.activeMenuEvent()}),this._addLoadEvent();var I=document.createElement("div");I.className=Yy("grid-visual");var D=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;I.innerHTML=D,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(I)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(O){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(O,_,I),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(O,_,I){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),I&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===O&&_?this.submenu=null:(this._buttonElements[O].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(O)),this.submenu=O,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var O=document.createEvent("MouseEvents");O.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(O)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var O=this._editorContainerElement.style,_=O.maxWidth,I=O.maxHeight,D=jl()(_),B=jl()(I);return{width:D,height:B}}},{key:"_setEditorPosition",value:function(O){var _=this._getCanvasMaxDimension(),I=_.width,D=_.height,B=this._editorElement.style,F=0,W=0;this.submenu&&(O==="bottom"?D>this._editorElementWrap.scrollHeight-150?F=(D-this._editorElementWrap.scrollHeight)/2:F=150/2*-1:O==="top"?D>this._editorElementWrap.offsetHeight-150?F=150/2-(D-(this._editorElementWrap.offsetHeight-150))/2:F=150/2:O==="left"?I>this._editorElementWrap.offsetWidth-248?W=248/2-(I-(this._editorElementWrap.offsetWidth-248))/2:W=248/2:O==="right"&&(I>this._editorElementWrap.scrollWidth-248?W=(I-this._editorElementWrap.scrollWidth)/2:W=248/2*-1)),B.top="".concat(F,"px"),B.left="".concat(W,"px")}}]),H}();ke().mixin(rF);var VSe=rF,qSe=o(381),pd=o.n(qSe),iF=function(){function H(){Y(this,H),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return K(H,[{key:"imageToSVG",value:function(O,_,I){var D=this;I=this.checkoptions(I),this.loadImage(O,function(B){_(D.imagedataToSVG(D.getImgdata(B),I))},I)}},{key:"imagedataToSVG",value:function(O,_){_=this.checkoptions(_);var I=this.imagedataToTracedata(O,_);return this.getsvgstring(I,_)}},{key:"imageToTracedata",value:function(O,_,I){var D=this;I=this.checkoptions(I),this.loadImage(O,function(B){_(D.imagedataToTracedata(D.getImgdata(B),I))},I)}},{key:"imagedataToTracedata",value:function(O,_){_=this.checkoptions(_);var I=this.colorquantization(O,_),D;if(_.layering===0){D={layers:[],palette:I.palette,width:I.array[0].length-2,height:I.array.length-2};for(var B=0;B<I.palette.length;B+=1){var F=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(I,B),_.pathomit),_),_.ltres,_.qtres);D.layers.push(F)}}else{var W=this.layering(I);_.layercontainerid&&this.drawLayers(W,this.specpalette,_.scale,_.layercontainerid);var U=this.batchpathscan(W,_.pathomit),ee=this.batchinternodes(U,_);D={layers:this.batchtracelayers(ee,_.ltres,_.qtres),palette:I.palette,width:O.width,height:O.height}}return D}},{key:"checkoptions",value:function(O){O=O||{},typeof O=="string"&&(O=O.toLowerCase(),this.optionpresets[O]?O=this.optionpresets[O]:O={});for(var _=Me()(this.optionpresets.default),I=0;I<_.length;I+=1)O.hasOwnProperty(_[I])||(O[_[I]]=this.optionpresets.default[_[I]]);return O}},{key:"colorquantization",value:function(O,_){var I=[],D=0,B,F,W,U=[],ee=O.width*O.height,oe,Ee,Te,Ae,Oe;for(Ee=0;Ee<O.height+2;Ee+=1)for(I[Ee]=[],oe=0;oe<O.width+2;oe+=1)I[Ee][oe]=-1;for(_.pal?Oe=_.pal:_.colorsampling===0?Oe=this.generatepalette(_.numberofcolors):_.colorsampling===1?Oe=this.samplepalette(_.numberofcolors,O):Oe=this.samplepalette2(_.numberofcolors,O),_.blurradius>0&&(O=this.blur(O,_.blurradius,_.blurdelta)),Ae=0;Ae<_.colorquantcycles;Ae+=1){if(Ae>0)for(Te=0;Te<Oe.length;Te+=1)U[Te].n>0&&(Oe[Te]={r:Math.floor(U[Te].r/U[Te].n),g:Math.floor(U[Te].g/U[Te].n),b:Math.floor(U[Te].b/U[Te].n),a:Math.floor(U[Te].a/U[Te].n)}),U[Te].n/ee<_.mincolorratio&&Ae<_.colorquantcycles-1&&(Oe[Te]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(oe=0;oe<Oe.length;oe+=1)U[oe]={r:0,g:0,b:0,a:0,n:0};for(Ee=0;Ee<O.height;Ee+=1)for(oe=0;oe<O.width;oe+=1){for(D=(Ee*O.width+oe)*4,W=0,F=1024,Te=0;Te<Oe.length;Te+=1)B=Math.abs(Oe[Te].r-O.data[D])+Math.abs(Oe[Te].g-O.data[D+1])+Math.abs(Oe[Te].b-O.data[D+2])+Math.abs(Oe[Te].a-O.data[D+3]),B<F&&(F=B,W=Te);U[W].r+=O.data[D],U[W].g+=O.data[D+1],U[W].b+=O.data[D+2],U[W].a+=O.data[D+3],U[W].n+=1,I[Ee+1][oe+1]=W}}return{array:I,palette:Oe}}},{key:"samplepalette",value:function(O,_){for(var I,D=[],B=0;B<O;B+=1)I=Math.floor(Math.random()*_.data.length/4)*4,D.push({r:_.data[I],g:_.data[I+1],b:_.data[I+2],a:_.data[I+3]});return D}},{key:"samplepalette2",value:function(O,_){for(var I,D=[],B=Math.ceil(Math.sqrt(O)),F=Math.ceil(O/B),W=_.width/(B+1),U=_.height/(F+1),ee=0;ee<F;ee+=1)for(var oe=0;oe<B&&D.length!==O;oe+=1)I=Math.floor((ee+1)*U*_.width+(oe+1)*W)*4,D.push({r:_.data[I],g:_.data[I+1],b:_.data[I+2],a:_.data[I+3]});return D}},{key:"generatepalette",value:function(O){var _=[],I,D,B;if(O<8)for(var F=Math.floor(255/(O-1)),W=0;W<O;W+=1)_.push({r:W*F,g:W*F,b:W*F,a:255});else{var U=Math.floor(Math.pow(O,.3333333333333333)),ee=Math.floor(255/(U-1)),oe=O-U*U*U;for(I=0;I<U;I+=1)for(D=0;D<U;D+=1)for(B=0;B<U;B+=1)_.push({r:I*ee,g:D*ee,b:B*ee,a:255});for(I=0;I<oe;I+=1)_.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return _}},{key:"layering",value:function(O){var _=[],I=0,D=O.array.length,B=O.array[0].length,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e;for($e=0;$e<O.palette.length;$e+=1)for(_[$e]=[],De=0;De<D;De+=1)for(_[$e][De]=[],Oe=0;Oe<B;Oe+=1)_[$e][De][Oe]=0;for(De=1;De<D-1;De+=1)for(Oe=1;Oe<B-1;Oe+=1)I=O.array[De][Oe],F=O.array[De-1][Oe-1]===I?1:0,W=O.array[De-1][Oe]===I?1:0,U=O.array[De-1][Oe+1]===I?1:0,ee=O.array[De][Oe-1]===I?1:0,oe=O.array[De][Oe+1]===I?1:0,Ee=O.array[De+1][Oe-1]===I?1:0,Te=O.array[De+1][Oe]===I?1:0,Ae=O.array[De+1][Oe+1]===I?1:0,_[I][De+1][Oe+1]=1+oe*2+Ae*4+Te*8,ee||(_[I][De+1][Oe]=2+Te*4+Ee*8),W||(_[I][De][Oe+1]=0+U*2+oe*4+8),F||(_[I][De][Oe]=0+W*2+4+ee*8);return _}},{key:"layeringstep",value:function(O,_){var I=[],D=O.array.length,B=O.array[0].length,F,W;for(W=0;W<D;W+=1)for(I[W]=[],F=0;F<B;F+=1)I[W][F]=0;for(W=1;W<D;W+=1)for(F=1;F<B;F+=1)I[W][F]=(O.array[W-1][F-1]===_?1:0)+(O.array[W-1][F]===_?2:0)+(O.array[W][F-1]===_?8:0)+(O.array[W][F]===_?4:0);return I}},{key:"pathscan",value:function(O,_){for(var I=[],D=0,B=0,F=0,W=0,U=O[0].length,ee=O.length,oe=0,Ee=!0,Te=!1,Ae,Oe=0;Oe<ee;Oe+=1)for(var De=0;De<U;De+=1)if(O[Oe][De]===4||O[Oe][De]===11)for(F=De,W=Oe,I[D]={},I[D].points=[],I[D].boundingbox=[F,W,F,W],I[D].holechildren=[],Ee=!1,B=0,Te=O[Oe][De]===11,oe=1;!Ee;){if(I[D].points[B]={},I[D].points[B].x=F-1,I[D].points[B].y=W-1,I[D].points[B].t=O[W][F],F-1<I[D].boundingbox[0]&&(I[D].boundingbox[0]=F-1),F-1>I[D].boundingbox[2]&&(I[D].boundingbox[2]=F-1),W-1<I[D].boundingbox[1]&&(I[D].boundingbox[1]=W-1),W-1>I[D].boundingbox[3]&&(I[D].boundingbox[3]=W-1),Ae=this.pathscan_combined_lookup[O[W][F]][oe],O[W][F]=Ae[0],oe=Ae[1],F+=Ae[2],W+=Ae[3],F-1===I[D].points[0].x&&W-1===I[D].points[0].y)if(Ee=!0,I[D].points.length<_)I.pop();else{if(I[D].isholepath=!!Te,Te){for(var $e=0,yt=[-1,-1,U+1,ee+1],wt=0;wt<D;wt++)!I[wt].isholepath&&this.boundingboxincludes(I[wt].boundingbox,I[D].boundingbox)&&this.boundingboxincludes(yt,I[wt].boundingbox)&&($e=wt,yt=I[wt].boundingbox);I[$e].holechildren.push(D)}D+=1}B+=1}return I}},{key:"boundingboxincludes",value:function(O,_){return O[0]<_[0]&&O[1]<_[1]&&O[2]>_[2]&&O[3]>_[3]}},{key:"batchpathscan",value:function(O,_){var I=[];for(var D in O)O.hasOwnProperty(D)&&(I[D]=this.pathscan(O[D],_));return I}},{key:"internodes",value:function(O,_){var I=[],D=0,B=0,F=0,W=0,U=0,ee,oe;for(ee=0;ee<O.length;ee+=1)for(I[ee]={},I[ee].points=[],I[ee].boundingbox=O[ee].boundingbox,I[ee].holechildren=O[ee].holechildren,I[ee].isholepath=O[ee].isholepath,D=O[ee].points.length,oe=0;oe<D;oe+=1)B=(oe+1)%D,F=(oe+2)%D,W=(oe-1+D)%D,U=(oe-2+D)%D,_.rightangleenhance&&this.testrightangle(O[ee],U,W,oe,B,F)&&(I[ee].points.length>0&&(I[ee].points[I[ee].points.length-1].linesegment=this.getdirection(I[ee].points[I[ee].points.length-1].x,I[ee].points[I[ee].points.length-1].y,O[ee].points[oe].x,O[ee].points[oe].y)),I[ee].points.push({x:O[ee].points[oe].x,y:O[ee].points[oe].y,linesegment:this.getdirection(O[ee].points[oe].x,O[ee].points[oe].y,(O[ee].points[oe].x+O[ee].points[B].x)/2,(O[ee].points[oe].y+O[ee].points[B].y)/2)})),I[ee].points.push({x:(O[ee].points[oe].x+O[ee].points[B].x)/2,y:(O[ee].points[oe].y+O[ee].points[B].y)/2,linesegment:this.getdirection((O[ee].points[oe].x+O[ee].points[B].x)/2,(O[ee].points[oe].y+O[ee].points[B].y)/2,(O[ee].points[B].x+O[ee].points[F].x)/2,(O[ee].points[B].y+O[ee].points[F].y)/2)});return I}},{key:"testrightangle",value:function(O,_,I,D,B,F){return O.points[D].x===O.points[_].x&&O.points[D].x===O.points[I].x&&O.points[D].y===O.points[B].y&&O.points[D].y===O.points[F].y||O.points[D].y===O.points[_].y&&O.points[D].y===O.points[I].y&&O.points[D].x===O.points[B].x&&O.points[D].x===O.points[F].x}},{key:"getdirection",value:function(O,_,I,D){var B=8;return O<I?_<D?B=1:_>D?B=7:B=0:O>I?_<D?B=3:_>D?B=5:B=4:_<D?B=2:_>D?B=6:B=8,B}},{key:"batchinternodes",value:function(O,_){var I=[];for(var D in O)O.hasOwnProperty(D)&&(I[D]=this.internodes(O[D],_));return I}},{key:"tracepath",value:function(O,_,I){var D=0,B,F,W,U={};for(U.segments=[],U.boundingbox=O.boundingbox,U.holechildren=O.holechildren,U.isholepath=O.isholepath;D<O.points.length;){var ee;for(B=O.points[D].linesegment,F=-1,W=D+1;(O.points[W].linesegment===B||O.points[W].linesegment===F||F===-1)&&W<O.points.length-1;)O.points[W].linesegment!==B&&F===-1&&(F=O.points[W].linesegment),W+=1;W===O.points.length-1&&(W=0),U.segments=J()(ee=U.segments).call(ee,this.fitseq(O,_,I,D,W)),W>0?D=W:D=O.points.length}return U}},{key:"fitseq",value:function(O,_,I,D,B){var F;if(B>O.points.length||B<0)return[];var W=D,U=0,ee=!0,oe,Ee,Te,Ae=B-D;Ae<0&&(Ae+=O.points.length);for(var Oe=(O.points[B].x-O.points[D].x)/Ae,De=(O.points[B].y-O.points[D].y)/Ae,$e=(D+1)%O.points.length,yt;$e!=B;)yt=$e-D,yt<0&&(yt+=O.points.length),oe=O.points[D].x+Oe*yt,Ee=O.points[D].y+De*yt,Te=(O.points[$e].x-oe)*(O.points[$e].x-oe)+(O.points[$e].y-Ee)*(O.points[$e].y-Ee),Te>_&&(ee=!1),Te>U&&(W=$e,U=Te),$e=($e+1)%O.points.length;if(ee)return[{type:"L",x1:O.points[D].x,y1:O.points[D].y,x2:O.points[B].x,y2:O.points[B].y}];var wt=W;ee=!0,U=0;var It=(wt-D)/Ae,tt=(1-It)*(1-It),an=2*(1-It)*It,ii=It*It,Xi=(tt*O.points[D].x+ii*O.points[B].x-O.points[wt].x)/-an,mr=(tt*O.points[D].y+ii*O.points[B].y-O.points[wt].y)/-an;for($e=D+1;$e!=B;)It=($e-D)/Ae,tt=(1-It)*(1-It),an=2*(1-It)*It,ii=It*It,oe=tt*O.points[D].x+an*Xi+ii*O.points[B].x,Ee=tt*O.points[D].y+an*mr+ii*O.points[B].y,Te=(O.points[$e].x-oe)*(O.points[$e].x-oe)+(O.points[$e].y-Ee)*(O.points[$e].y-Ee),Te>I&&(ee=!1),Te>U&&(W=$e,U=Te),$e=($e+1)%O.points.length;if(ee)return[{type:"Q",x1:O.points[D].x,y1:O.points[D].y,x2:Xi,y2:mr,x3:O.points[B].x,y3:O.points[B].y}];var ga=wt;return J()(F=this.fitseq(O,_,I,D,ga)).call(F,this.fitseq(O,_,I,ga,B))}},{key:"batchtracepaths",value:function(O,_,I){var D=[];for(var B in O)O.hasOwnProperty(B)&&D.push(this.tracepath(O[B],_,I));return D}},{key:"batchtracelayers",value:function(O,_,I){var D=[];for(var B in O)O.hasOwnProperty(B)&&(D[B]=this.batchtracepaths(O[B],_,I));return D}},{key:"roundtodec",value:function(O,_){return Number(O.toFixed(_))}},{key:"svgpathstring",value:function(O,_,I,D){var B,F,W=O.layers[_],U=W[I],ee="",oe;if(D.linefilter&&U.segments.length<3)return ee;if(ee=J()(B="<path ".concat(D.desc?J()(F='desc="l '.concat(_," p ")).call(F,I,'" '):"")).call(B,this.tosvgcolorstr(O.palette[_],D),'d="'),D.roundcoords===-1){var Ee;for(ee+=J()(Ee="M ".concat(U.segments[0].x1*D.scale," ")).call(Ee,U.segments[0].y1*D.scale," "),oe=0;oe<U.segments.length;oe++){var Te,Ae;if(ee+=J()(Te=J()(Ae="".concat(U.segments[oe].type," ")).call(Ae,U.segments[oe].x2*D.scale," ")).call(Te,U.segments[oe].y2*D.scale," "),U.segments[oe].hasOwnProperty("x3")){var Oe;ee+=J()(Oe="".concat(U.segments[oe].x3*D.scale," ")).call(Oe,U.segments[oe].y3*D.scale," ")}}ee+="Z "}else{var De;for(ee+=J()(De="M ".concat(this.roundtodec(U.segments[0].x1*D.scale,D.roundcoords)," ")).call(De,this.roundtodec(U.segments[0].y1*D.scale,D.roundcoords)," "),oe=0;oe<U.segments.length;oe++){var $e,yt;if(ee+=J()($e=J()(yt="".concat(U.segments[oe].type," ")).call(yt,this.roundtodec(U.segments[oe].x2*D.scale,D.roundcoords)," ")).call($e,this.roundtodec(U.segments[oe].y2*D.scale,D.roundcoords)," "),U.segments[oe].hasOwnProperty("x3")){var wt;ee+=J()(wt="".concat(this.roundtodec(U.segments[oe].x3*D.scale,D.roundcoords)," ")).call(wt,this.roundtodec(U.segments[oe].y3*D.scale,D.roundcoords)," ")}}ee+="Z "}for(var It=0;It<U.holechildren.length;It++){var tt=W[U.holechildren[It]];if(D.roundcoords===-1){if(tt.segments[tt.segments.length-1].hasOwnProperty("x3")){var an;ee+=J()(an="M ".concat(tt.segments[tt.segments.length-1].x3*D.scale," ")).call(an,tt.segments[tt.segments.length-1].y3*D.scale," ")}else{var ii;ee+=J()(ii="M ".concat(tt.segments[tt.segments.length-1].x2*D.scale," ")).call(ii,tt.segments[tt.segments.length-1].y2*D.scale," ")}for(oe=tt.segments.length-1;oe>=0;oe--){var Xi;if(ee+="".concat(tt.segments[oe].type," "),tt.segments[oe].hasOwnProperty("x3")){var mr;ee+=J()(mr="".concat(tt.segments[oe].x2*D.scale," ")).call(mr,tt.segments[oe].y2*D.scale," ")}ee+=J()(Xi="".concat(tt.segments[oe].x1*D.scale," ")).call(Xi,tt.segments[oe].y1*D.scale," ")}}else{if(tt.segments[tt.segments.length-1].hasOwnProperty("x3")){var ga;ee+=J()(ga="M ".concat(this.roundtodec(tt.segments[tt.segments.length-1].x3*D.scale)," ")).call(ga,this.roundtodec(tt.segments[tt.segments.length-1].y3*D.scale)," ")}else{var zl;ee+=J()(zl="M ".concat(this.roundtodec(tt.segments[tt.segments.length-1].x2*D.scale)," ")).call(zl,this.roundtodec(tt.segments[tt.segments.length-1].y2*D.scale)," ")}for(oe=tt.segments.length-1;oe>=0;oe--){var Ki;if(ee+="".concat(tt.segments[oe].type," "),tt.segments[oe].hasOwnProperty("x3")){var Uh;ee+=J()(Uh="".concat(this.roundtodec(tt.segments[oe].x2*D.scale)," ")).call(Uh,this.roundtodec(tt.segments[oe].y2*D.scale)," ")}ee+=J()(Ki="".concat(this.roundtodec(tt.segments[oe].x1*D.scale)," ")).call(Ki,this.roundtodec(tt.segments[oe].y1*D.scale)," ")}}ee+="Z "}if(ee+='" />',D.lcpr||D.qcpr){for(oe=0;oe<U.segments.length;oe++){if(U.segments[oe].hasOwnProperty("x3")&&D.qcpr){var tb,nb,rb,ib,ob,ab,sb,lb,cb,ub,db,fb,hb,pb;ee+=J()(tb=J()(nb=J()(rb='<circle cx="'.concat(U.segments[oe].x2*D.scale,'" cy="')).call(rb,U.segments[oe].y2*D.scale,'" r="')).call(nb,D.qcpr,'" fill="cyan" stroke-width="')).call(tb,D.qcpr*.2,'" stroke="black" />'),ee+=J()(ib=J()(ob=J()(ab='<circle cx="'.concat(U.segments[oe].x3*D.scale,'" cy="')).call(ab,U.segments[oe].y3*D.scale,'" r="')).call(ob,D.qcpr,'" fill="white" stroke-width="')).call(ib,D.qcpr*.2,'" stroke="black" />'),ee+=J()(sb=J()(lb=J()(cb=J()(ub='<line x1="'.concat(U.segments[oe].x1*D.scale,'" y1="')).call(ub,U.segments[oe].y1*D.scale,'" x2="')).call(cb,U.segments[oe].x2*D.scale,'" y2="')).call(lb,U.segments[oe].y2*D.scale,'" stroke-width="')).call(sb,D.qcpr*.2,'" stroke="cyan" />'),ee+=J()(db=J()(fb=J()(hb=J()(pb='<line x1="'.concat(U.segments[oe].x2*D.scale,'" y1="')).call(pb,U.segments[oe].y2*D.scale,'" x2="')).call(hb,U.segments[oe].x3*D.scale,'" y2="')).call(fb,U.segments[oe].y3*D.scale,'" stroke-width="')).call(db,D.qcpr*.2,'" stroke="cyan" />')}if(!U.segments[oe].hasOwnProperty("x3")&&D.lcpr){var mb,gb,vb;ee+=J()(mb=J()(gb=J()(vb='<circle cx="'.concat(U.segments[oe].x2*D.scale,'" cy="')).call(vb,U.segments[oe].y2*D.scale,'" r="')).call(gb,D.lcpr,'" fill="white" stroke-width="')).call(mb,D.lcpr*.2,'" stroke="black" />')}}for(var It=0;It<U.holechildren.length;It++){var tt=W[U.holechildren[It]];for(oe=0;oe<tt.segments.length;oe++){if(tt.segments[oe].hasOwnProperty("x3")&&D.qcpr){var yb,va,Yc,$F,UF,WF,YF,GF,XF,KF,ZF,JF,QF,VF;ee+=J()(yb=J()(va=J()(Yc='<circle cx="'.concat(tt.segments[oe].x2*D.scale,'" cy="')).call(Yc,tt.segments[oe].y2*D.scale,'" r="')).call(va,D.qcpr,'" fill="cyan" stroke-width="')).call(yb,D.qcpr*.2,'" stroke="black" />'),ee+=J()($F=J()(UF=J()(WF='<circle cx="'.concat(tt.segments[oe].x3*D.scale,'" cy="')).call(WF,tt.segments[oe].y3*D.scale,'" r="')).call(UF,D.qcpr,'" fill="white" stroke-width="')).call($F,D.qcpr*.2,'" stroke="black" />'),ee+=J()(YF=J()(GF=J()(XF=J()(KF='<line x1="'.concat(tt.segments[oe].x1*D.scale,'" y1="')).call(KF,tt.segments[oe].y1*D.scale,'" x2="')).call(XF,tt.segments[oe].x2*D.scale,'" y2="')).call(GF,tt.segments[oe].y2*D.scale,'" stroke-width="')).call(YF,D.qcpr*.2,'" stroke="cyan" />'),ee+=J()(ZF=J()(JF=J()(QF=J()(VF='<line x1="'.concat(tt.segments[oe].x2*D.scale,'" y1="')).call(VF,tt.segments[oe].y2*D.scale,'" x2="')).call(QF,tt.segments[oe].x3*D.scale,'" y2="')).call(JF,tt.segments[oe].y3*D.scale,'" stroke-width="')).call(ZF,D.qcpr*.2,'" stroke="cyan" />')}if(!tt.segments[oe].hasOwnProperty("x3")&&D.lcpr){var qF,eH,tH;ee+=J()(qF=J()(eH=J()(tH='<circle cx="'.concat(tt.segments[oe].x2*D.scale,'" cy="')).call(tH,tt.segments[oe].y2*D.scale,'" r="')).call(eH,D.lcpr,'" fill="white" stroke-width="')).call(qF,D.lcpr*.2,'" stroke="black" />')}}}}return ee}},{key:"getsvgstring",value:function(O,_){var I,D,B;_=this.checkoptions(_);for(var F=O.width*_.scale,W=O.height*_.scale,U=J()(I="<svg ".concat(_.viewbox?J()(D='viewBox="0 0 '.concat(F," ")).call(D,W,'" '):J()(B='width="'.concat(F,'" height="')).call(B,W,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(I,this.versionnumber,'" >'),ee=0;ee<O.layers.length;ee+=1)for(var oe=0;oe<O.layers[ee].length;oe+=1)O.layers[ee][oe].isholepath||(U+=this.svgpathstring(O,ee,oe,_));return U+="</svg>",U}},{key:"compareNumbers",value:function(O,_){return O-_}},{key:"torgbastr",value:function(O){var _,I,D;return J()(_=J()(I=J()(D="rgba(".concat(O.r,",")).call(D,O.g,",")).call(I,O.b,",")).call(_,O.a,")")}},{key:"tosvgcolorstr",value:function(O,_){var I,D,B,F,W,U,ee;return J()(I=J()(D=J()(B=J()(F=J()(W=J()(U=J()(ee='fill="rgb('.concat(O.r,",")).call(ee,O.g,",")).call(U,O.b,')" stroke="rgb(')).call(W,O.r,",")).call(F,O.g,",")).call(B,O.b,')" stroke-width="')).call(D,_.strokewidth,'" opacity="')).call(I,O.a/255,'" ')}},{key:"appendSVGString",value:function(O,_){var I;_?(I=document.getElementById(_),I||(I=document.createElement("div"),I.id=_,document.body.appendChild(I))):(I=document.createElement("div"),document.body.appendChild(I)),I.innerHTML+=O}},{key:"blur",value:function(O,_,I){var D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe={width:O.width,height:O.height,data:[]};if(_=Math.floor(_),_<1)return O;_>5&&(_=5),I=Math.abs(I),I>1024&&(I=1024);var De=this.gks[_-1];for(B=0;B<O.height;B++)for(D=0;D<O.width;D++){for(ee=0,oe=0,Ee=0,Te=0,Ae=0,F=-_;F<_+1;F++)D+F>0&&D+F<O.width&&(U=(B*O.width+D+F)*4,ee+=O.data[U]*De[F+_],oe+=O.data[U+1]*De[F+_],Ee+=O.data[U+2]*De[F+_],Te+=O.data[U+3]*De[F+_],Ae+=De[F+_]);U=(B*O.width+D)*4,Oe.data[U]=Math.floor(ee/Ae),Oe.data[U+1]=Math.floor(oe/Ae),Oe.data[U+2]=Math.floor(Ee/Ae),Oe.data[U+3]=Math.floor(Te/Ae)}var $e=new Uint8ClampedArray(Oe.data);for(B=0;B<O.height;B++)for(D=0;D<O.width;D++){for(ee=0,oe=0,Ee=0,Te=0,Ae=0,F=-_;F<_+1;F++)B+F>0&&B+F<O.height&&(U=((B+F)*O.width+D)*4,ee+=$e[U]*De[F+_],oe+=$e[U+1]*De[F+_],Ee+=$e[U+2]*De[F+_],Te+=$e[U+3]*De[F+_],Ae+=De[F+_]);U=(B*O.width+D)*4,Oe.data[U]=Math.floor(ee/Ae),Oe.data[U+1]=Math.floor(oe/Ae),Oe.data[U+2]=Math.floor(Ee/Ae),Oe.data[U+3]=Math.floor(Te/Ae)}for(B=0;B<O.height;B++)for(D=0;D<O.width;D++)U=(B*O.width+D)*4,W=Math.abs(Oe.data[U]-O.data[U])+Math.abs(Oe.data[U+1]-O.data[U+1])+Math.abs(Oe.data[U+2]-O.data[U+2])+Math.abs(Oe.data[U+3]-O.data[U+3]),W>I&&(Oe.data[U]=O.data[U],Oe.data[U+1]=O.data[U+1],Oe.data[U+2]=O.data[U+2],Oe.data[U+3]=O.data[U+3]);return Oe}},{key:"loadImage",value:function(O,_,I){var D=new Image;I&&I.corsenabled&&(D.crossOrigin="Anonymous"),D.src=O,D.onload=function(){var B=document.createElement("canvas");B.width=D.width,B.height=D.height;var F=B.getContext("2d");F.drawImage(D,0,0),_(B)}}},{key:"getImgdata",value:function(O){var _=O.getContext("2d");return _.getImageData(0,0,O.width,O.height)}},{key:"drawLayers",value:function(O,_,I,D){I=I||1;var B,F,W,U,ee,oe;D?(oe=document.getElementById(D),oe||(oe=document.createElement("div"),oe.id=D,document.body.appendChild(oe))):(oe=document.createElement("div"),document.body.appendChild(oe));for(ee in O)if(O.hasOwnProperty(ee)){B=O[ee][0].length,F=O[ee].length;var Ee=document.createElement("canvas");Ee.width=B*I,Ee.height=F*I;var Te=Ee.getContext("2d");for(U=0;U<F;U+=1)for(W=0;W<B;W+=1)Te.fillStyle=this.torgbastr(_[O[ee][U][W]%_.length]),Te.fillRect(W*I,U*I,I,I);oe.appendChild(Ee)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),H}(),eke={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var N=this,O=function(){N.ui.submenu==="crop"&&(N.stopDrawingMode(),N.ui.changeMenu("crop"))},_=function(ee){N.ui.submenu==="rotate"&&N.ui.rotate.setRangeBarAngle("setAngle",ee)},I=function(ee){N.ui.submenu==="filter"&&pd()(N.ui).setFilterState(ee)},D=function(ee){return _(ee),I(ee),ee},B=function(){var ee=N._graphics.getZoomMode();N.stopDrawingMode(),ee!==xi.ZOOM?(N.startDrawingMode(nn.ZOOM),N._graphics.startZoomInMode()):N._graphics.endZoomInMode()},F=function(){var ee=N._graphics.getZoomMode();N.stopDrawingMode(),ee!==xi.HAND?(N.startDrawingMode(nn.ZOOM),N._graphics.startHandMode()):N._graphics.endHandMode()},W=function(){pd()(N.ui)&&pd()(N.ui).initFilterCheckBoxState()};return Z()({initLoadImage:function(ee,oe){return N.loadImageFromURL(ee,oe).then(function(Ee){O(),N.ui.initializeImgUrl=ee,N.ui.resizeEditor({imageSize:Ee}),N.clearUndoStack(),N._invoker.fire(je.EXECUTE_COMMAND,Jt.LOAD_IMAGE)})},undo:function(){N.isEmptyUndoStack()||(O(),N.deactivateAll(),N.undo().then(D))},redo:function(){N.isEmptyRedoStack()||(O(),N.deactivateAll(),N.redo().then(D))},reset:function(){O(),N.loadImageFromURL(N.ui.initializeImgUrl,"resetImage").then(function(ee){O(),W(),N.ui.resizeEditor({imageSize:ee}),N.clearUndoStack(),N._initHistory()})},delete:function(){N.ui.changeHelpButtonEnabled("delete",!1),O(),N.removeActiveObject(),N.activeObjectId=null},deleteAll:function(){O(),N.clearObjects(),N.ui.changeHelpButtonEnabled("delete",!1),N.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(ee){ri()||alert("This browser does not support file-api"),N.ui.initializeImgUrl=V().createObjectURL(ee),N.loadImageFromFile(ee).then(function(oe){O(),W(),N.clearUndoStack(),N.ui.activeMenuEvent(),N.ui.resizeEditor({imageSize:oe}),N._clearHistory(),N._invoker.fire(je.EXECUTE_COMMAND,Jt.LOAD_IMAGE)}).catch(function(oe){return de().reject(oe)})},download:function(){var ee=N.toDataURL(),oe=N.getImageName(),Ee,Te,Ae;ri()&&window.saveAs?(Ee=Uy(ee),Te=Ee.type.split("/")[1],oe.split(".").pop()!==Te&&(oe+=".".concat(Te)),saveAs(Ee,oe)):(Ae=window.open(),Ae.document.body.innerHTML="<img src='".concat(ee,"'>"))},history:function(ee){N.ui.toggleHistoryMenu(ee)},zoomIn:function(){N.ui.toggleZoomButtonStatus("zoomIn"),N.deactivateAll(),B()},zoomOut:function(){N._graphics.zoomOut()},hand:function(){N.ui.offZoomInButtonStatus(),N.ui.toggleZoomButtonStatus("hand"),N.deactivateAll(),F()}},this._commonAction())},_iconAction:function(){var N=this;return Z()({changeColor:function(_){N.activeObjectId&&N.changeIconColor(N.activeObjectId,_)},addIcon:function(_,I){N.startDrawingMode("ICON"),N.setDrawingIcon(_,I)},cancelAddIcon:function(){N.ui.icon.clearIconType(),N.changeSelectableAll(!0),N.changeCursor("default"),N.stopDrawingMode()},registerDefaultIcons:function(_,I){var D={};D[_]=I,N.registerIcons(D)},registerCustomIcon:function(_,I){var D=new iF;D.imageToSVG(_,function(B){var F=B.match(/path[^>]*d="([^"]*)"/),W=se(F,2),U=W[1],ee={};ee[I.name]=U,N.registerIcons(ee),N.addIcon(I.name,{left:100,top:100})},iF.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var N=this;return Z()({setDrawMode:function(_,I){N.stopDrawingMode(),_==="free"?N.startDrawingMode("FREE_DRAWING",I):N.startDrawingMode("LINE_DRAWING",I)},setColor:function(_){N.setBrush({color:_})}},this._commonAction())},_maskAction:function(){var N=this;return Z()({loadImageFromURL:function(_,I){return N.loadImageFromURL(N.toDataURL(),"FilterImage").then(function(){N.addImageObject(_).then(function(){V().revokeObjectURL(I)}),N._invoker.fire(je.EXECUTE_COMMAND,Jt.LOAD_MASK_IMAGE)})},applyFilter:function(){N.applyFilter("mask",{maskObjId:N.activeObjectId})}},this._commonAction())},_textAction:function(){var N=this;return Z()({changeTextStyle:function(_,I){N.activeObjectId&&N.changeTextStyle(N.activeObjectId,_,I)}},this._commonAction())},_rotateAction:function(){var N=this;return Z()({rotate:function(_,I){N.rotate(_,I),N.ui.resizeEditor(),N.ui.rotate.setRangeBarAngle("rotate",_)},setAngle:function(_,I){N.setAngle(_,I),N.ui.resizeEditor(),N.ui.rotate.setRangeBarAngle("setAngle",_)}},this._commonAction())},_shapeAction:function(){var N=this;return Z()({changeShape:function(_,I){N.activeObjectId&&N.changeShape(N.activeObjectId,_,I)},setDrawingShape:function(_){N.setDrawingShape(_)}},this._commonAction())},_cropAction:function(){var N=this;return Z()({crop:function(){var _=N.getCropzoneRect();_&&!cCe(_)&&N.crop(_).then(function(){N.stopDrawingMode(),N.ui.resizeEditor(),N.ui.changeMenu("crop"),N._invoker.fire(je.EXECUTE_COMMAND,Jt.CROP)}).catch(function(I){return de().reject(I)})},cancel:function(){N.stopDrawingMode(),N.ui.changeMenu("crop")},preset:function(_){switch(_){case"preset-square":N.setCropzoneRect(1/1);break;case"preset-3-2":N.setCropzoneRect(3/2);break;case"preset-4-3":N.setCropzoneRect(4/3);break;case"preset-5-4":N.setCropzoneRect(5/4);break;case"preset-7-5":N.setCropzoneRect(7/5);break;case"preset-16-9":N.setCropzoneRect(16/9);break;default:N.setCropzoneRect(),N.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var N=this;return Z()({getCurrentDimensions:function(){return N._graphics.getCurrentDimensions()},preview:function(_,I,D){var B=N._graphics.getCurrentDimensions(),F=function(){return B.width/B.height},W={};switch(_){case"width":W.width=I,D?W.height=I/F():W.height=B.height;break;case"height":W.height=I,D?W.width=I*F():W.width=B.width;break;default:W=B}N._graphics.resize(W).then(function(){N.ui.resizeEditor()}),D&&(N.ui.resize.setWidthValue(W.width),N.ui.resize.setHeightValue(W.height))},lockAspectRatio:function(_,I,D){var B=N._graphics.getCurrentDimensions(),F=B.width,W=B.height,U=F/W;if(_)if(F>W){var ee=D/U,oe=I*U;N.ui.resize.setLimit({minWidth:oe>I?oe:I,minHeight:I,maxWidth:D,maxHeight:ee<D?ee:D})}else{var Ee=D*U,Te=I/U;N.ui.resize.setLimit({minWidth:I,minHeight:Te>I?Te:I,maxWidth:Ee<D?Ee:D,maxHeight:D})}else N.ui.resize.setLimit({minWidth:I,minHeight:I,maxWidth:D,maxHeight:D})},resize:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;_||(_=N._graphics.getCurrentDimensions()),N.resize(_).then(function(){N._graphics.setOriginalDimensions(_),N.stopDrawingMode(),N.ui.resizeEditor(),N.ui.changeMenu("resize")}).catch(function(I){return de().reject(I)})},reset:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,I=N._graphics.getOriginalDimensions();N.ui.resize.setWidthValue(I.width,!0),N.ui.resize.setHeightValue(I.height,!0),N._graphics.resize(I).then(function(){_||(N.stopDrawingMode(),N.ui.resizeEditor(),N.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var N=this;return Z()({flip:function(_){return N[_]()}},this._commonAction())},_filterAction:function(){var N=this;return Z()({applyFilter:function(_,I,D,B){_?N.applyFilter(I,D,B):N.hasFilter(I)&&N.removeFilter(I)}},this._commonAction())},setReAction:function(){var N=this;this.on({undoStackChanged:function(_){_?(N.ui.changeHelpButtonEnabled("undo",!0),N.ui.changeHelpButtonEnabled("reset",!0)):(N.ui.changeHelpButtonEnabled("undo",!1),N.ui.changeHelpButtonEnabled("reset",!1)),N.ui.resizeEditor()},redoStackChanged:function(_){_?N.ui.changeHelpButtonEnabled("redo",!0):N.ui.changeHelpButtonEnabled("redo",!1),N.ui.resizeEditor()},objectActivated:function(_){var I,D;N.activeObjectId=_.id,N.ui.changeHelpButtonEnabled("delete",!0),N.ui.changeHelpButtonEnabled("deleteAll",!0),_.type==="cropzone"?N.ui.crop.changeApplyButtonStatus(!0):d()(I=["rect","circle","triangle"]).call(I,_.type)>-1?(N.stopDrawingMode(),N.ui.submenu!=="shape"&&N.ui.changeMenu("shape",!1,!1),N.ui.shape.setShapeStatus({strokeColor:_.stroke,strokeWidth:_.strokeWidth,fillColor:pe()(_)}),N.ui.shape.setMaxStrokeValue(Math.min(_.width,_.height))):_.type==="path"||_.type==="line"?N.ui.submenu!=="draw"&&(N.ui.changeMenu("draw",!1,!1),N.ui.draw.changeStandbyMode()):d()(D=["i-text","text"]).call(D,_.type)>-1?(N.ui.submenu!=="text"&&N.ui.changeMenu("text",!1,!1),N.ui.text.setTextStyleStateOnAction(_)):_.type==="icon"&&(N.stopDrawingMode(),N.ui.submenu!=="icon"&&N.ui.changeMenu("icon",!1,!1),N.ui.icon.setIconPickerColor(pe()(_)))},addText:function(_){var I=N.ui.text,D=I.textColor,B=I.fontSize,F=I.fontStyle,W=I.fontWeight,U=I.underline,ee="Noto Sans";N.addText("Double Click",{position:_.originPosition,styles:{fill:D,fontSize:B,fontFamily:ee,fontStyle:F,fontWeight:W,underline:U}}).then(function(){N.changeCursor("default")})},addObjectAfter:function(_){var I;_.type==="icon"?N.ui.icon.changeStandbyMode():d()(I=["rect","circle","triangle"]).call(I,_.type)>-1&&(N.ui.shape.setMaxStrokeValue(Math.min(_.width,_.height)),N.ui.shape.changeStandbyMode())},objectScaled:function(_){var I,D;if(d()(I=["i-text","text"]).call(I,_.type)>-1)N.ui.text.fontSize=Qt(_.fontSize);else if(d()(D=["rect","circle","triangle"]).call(D,_.type)>=0){var B=_.width,F=_.height,W=N.ui.shape.getStrokeValue();B<W&&N.ui.shape.setStrokeValue(B),F<W&&N.ui.shape.setStrokeValue(F)}},selectionCleared:function(){N.activeObjectId=null,N.ui.submenu==="text"?N.changeCursor("text"):Gy(["draw","crop","resize"],N.ui.submenu)||N.stopDrawingMode()}})},_historyAction:function(){var N=this;return{undo:function(_){return N.undo(_)},redo:function(_){return N.redo(_)}}},_commonAction:function(){var N=this,O,_,I,D,B=nn.TEXT,F=nn.CROPPER,W=nn.SHAPE,U=nn.ZOOM,ee=nn.RESIZE;return{modeChange:function(Ee){switch(Ee){case Pi.TEXT:N._changeActivateMode(B);break;case Pi.CROP:N.startDrawingMode(F);break;case Pi.SHAPE:N._changeActivateMode(W),N.setDrawingShape(N.ui.shape.type,N.ui.shape.options);break;case Pi.ZOOM:N.startDrawingMode(U);break;case Pi.RESIZE:N.startDrawingMode(ee);break}},deactivateAll:G()(O=this.deactivateAll).call(O,this),changeSelectableAll:G()(_=this.changeSelectableAll).call(_,this),discardSelection:G()(I=this.discardSelection).call(I,this),stopDrawingMode:G()(D=this.stopDrawingMode).call(D,this)}},mixin:function(N){Z()(N.prototype,this)}},tke=o(602),oF=o.n(tke),nke=o(5573),Zy=o.n(nke),rke=function(){function H(N,O){Y(this,H),this.name=N,this.graphics=O}return K(H,[{key:"fire",value:function(){for(var O=this.graphics,_=arguments.length,I=new Array(_),D=0;D<_;D++)I[D]=arguments[D];return this.graphics.fire.apply(O,I)}},{key:"setCanvasImage",value:function(O,_){this.graphics.setCanvasImage(O,_)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(O,_){this.graphics.setImageProperties(O,_)}},{key:"setCanvasCssDimension",value:function(O){this.graphics.setCanvasCssDimension(O)}},{key:"setCanvasBackstoreDimension",value:function(O){this.graphics.setCanvasBackstoreDimension(O)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),H}(),Fo=rke;function ike(H){var N=oke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function oke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var ake={padding:0,crossOrigin:"Anonymous"},ske=function(H){fn(O,H);var N=ike(O);function O(_){return Y(this,O),N.call(this,Xe.IMAGE_LOADER,_)}return K(O,[{key:"load",value:function(I,D){var B=this,F;if(!I&&!D){var W=this.getCanvas();W.backgroundImage=null,W.renderAll(),F=new(de())(function(U){B.setCanvasImage("",null),U()})}else F=this._setBackgroundImage(D).then(function(U){return B.setCanvasImage(I,U),B.adjustCanvasDimension(),U});return F}},{key:"_setBackgroundImage",value:function(I){var D=this;return I?new(de())(function(B,F){var W=D.getCanvas();W.setBackgroundImage(I,function(){var U=W.backgroundImage;U&&U.getElement()?B(U):F(un.loadingImageFailed)},ake)}):de().reject(un.loadImage)}}]),O}(Fo),lke=ske,cke="tl",uke="tr",dke="mt",fke="ml",hke="mr",pke="mb",mke="bl",gke="br",aF=[cke,uke,dke,fke,hke,pke,mke,gke],AE=function(){};function vke(H){return d()(aF).call(aF,H)>=0}function Jy(H,N){return H>N?"width":"height"}var yke=ne.fabric.util.createClass(ne.fabric.Rect,{initialize:function(N,O,_){O=Z()(O,_),O.type="cropzone",this.callSuper("initialize",O),this._addEventHandler(),this.canvas=N,this.options=O},canvasEventDelegation:function(N){var O,_="unregistered",I=this.canvasEventTrigger[N]!==AE;return I?_="registered":d()(O=[je.OBJECT_MOVED,je.OBJECT_SCALED]).call(O,N)<0&&(_="none"),_},canvasEventRegister:function(N,O){this.canvasEventTrigger[N]=O},_addEventHandler:function(){var N,O,_,I,D;this.canvasEventTrigger=(N={},$(N,je.OBJECT_MOVED,AE),$(N,je.OBJECT_SCALED,AE),N),this.on({moving:G()(O=this._onMoving).call(O,this),scaling:G()(_=this._onScaling).call(_,this)}),ne.fabric.util.addListener(document,"keydown",G()(I=this._onKeyDown).call(I,this)),ne.fabric.util.addListener(document,"keyup",G()(D=this._onKeyUp).call(D,this))},_renderCropzone:function(N){var O=7,_=7,I=this.flipX?-1:1,D=this.flipY?-1:1,B=I/this.scaleX,F=D/this.scaleY;N.scale(B,F),this._fillOuterRect(N,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(N),this._strokeBorder(N,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(N,"rgb(0, 0, 0)",{lineDashWidth:O}),this._strokeBorder(N,"rgb(255, 255, 255)",{lineDashWidth:O,lineDashOffset:_})),N.scale(1/B,1/F)},_render:function(N){this.callSuper("_render",N),this._renderCropzone(N)},_fillOuterRect:function(N,O){var _=this._getCoordinates(),I=_.x,D=_.y;N.save(),N.fillStyle=O,N.beginPath(),N.moveTo(I[0]-1,D[0]-1),N.lineTo(I[3]+1,D[0]-1),N.lineTo(I[3]+1,D[3]+1),N.lineTo(I[0]-1,D[3]+1),N.lineTo(I[0]-1,D[0]-1),N.closePath(),N.moveTo(I[1],D[1]),N.lineTo(I[1],D[2]),N.lineTo(I[2],D[2]),N.lineTo(I[2],D[1]),N.lineTo(I[1],D[1]),N.closePath(),pe()(N).call(N),N.restore()},_fillInnerRect:function(N){var O=this._getCoordinates(),_=O.x,I=O.y,D=this._caculateInnerPosition(_,(_[2]-_[1])/3),B=this._caculateInnerPosition(I,(I[2]-I[1])/3);N.save(),N.strokeStyle="rgba(255, 255, 255, 0.7)",N.lineWidth=this.options.lineWidth,N.beginPath(),N.moveTo(D[0],B[1]),N.lineTo(D[3],B[1]),N.moveTo(D[0],B[2]),N.lineTo(D[3],B[2]),N.moveTo(D[1],B[0]),N.lineTo(D[1],B[3]),N.moveTo(D[2],B[0]),N.lineTo(D[2],B[3]),N.stroke(),N.closePath(),N.restore()},_caculateInnerPosition:function(N,O){var _=[];return _[0]=N[1],_[1]=N[1]+O,_[2]=N[1]+O*2,_[3]=N[2],_},_getCoordinates:function(){var N,O,_=this.canvas,I=this.width,D=this.height,B=this.left,F=this.top,W=I/2,U=D/2,ee=_.getHeight(),oe=_.getWidth();return{x:Va()(N=[-(W+B),-W,W,W+(oe-B-I)]).call(N,Math.ceil),y:Va()(O=[-(U+F),-U,U,U+(ee-F-D)]).call(O,Math.ceil)}},_strokeBorder:function(N,O,_){var I=_.lineDashWidth,D=_.lineDashOffset,B=_.lineWidth,F=this.width/2,W=this.height/2;N.save(),N.strokeStyle=O,N.setLineDash&&N.setLineDash([I,I]),D&&(N.lineDashOffset=D),B&&(N.lineWidth=B),N.beginPath(),N.moveTo(-F,-W),N.lineTo(F,-W),N.lineTo(F,W),N.lineTo(-F,W),N.lineTo(-F,-W),N.stroke(),N.restore()},_onMoving:function(){var N=this.height,O=this.width,_=this.left,I=this.top,D=this.canvas.getWidth()-O,B=this.canvas.getHeight()-N;this.left=St(_,0,D),this.top=St(I,0,B),this.canvasEventTrigger[je.OBJECT_MOVED](this)},_onScaling:function(N){var O=N.transform.corner,_=this.canvas.getPointer(N.e),I=this._calcScalingSizeFromPointer(_,O);this.scale(1).set(I),this.canvasEventTrigger[je.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(N,O){var _=vke(O);return _&&this._resizeCropZone(N,O)},adjustRatioCropzoneSize:function(N){var O=N.width,_=N.height,I=N.leftMaker,D=N.topMaker,B=N.maxWidth,F=N.maxHeight,W=N.scaleTo;if(O=B?St(O,1,B):O,_=F?St(_,1,F):_,!this.presetRatio)return this._withShiftKey&&(O>_?_=O:_>O&&(O=_)),{width:O,height:_,left:I(O),top:D(_)};W==="width"?_=O/this.presetRatio:O=_*this.presetRatio;var U=Math.min(B/O,F/_);if(U<=1){var ee,oe=Va()(ee=[O,_]).call(ee,function(Te){return Te*U}),Ee=se(oe,2);O=Ee[0],_=Ee[1]}return{width:O,height:_,left:I(O),top:D(_)}},_getCropzoneRectInfo:function(){var N=this.canvas,O=N.width,_=N.height,I=this.getBoundingRect(!1,!0),D=I.top,B=I.left,F=I.width,W=I.height;return{rectTop:D,rectLeft:B,rectWidth:F,rectHeight:W,rectRight:B+F,rectBottom:D+W,canvasWidth:O,canvasHeight:_}},_resizeCropZone:function(N,O){var _=N.x,I=N.y,D=this._getCropzoneRectInfo(),B=D.rectWidth,F=D.rectHeight,W=D.rectTop,U=D.rectLeft,ee=D.rectBottom,oe=D.rectRight,Ee=D.canvasWidth,Te=D.canvasHeight,Ae={tl:{width:oe-_,height:ee-I,leftMaker:function(De){return oe-De},topMaker:function(De){return ee-De},maxWidth:oe,maxHeight:ee,scaleTo:Jy(U-_,W-I)},tr:{width:_-U,height:ee-I,leftMaker:function(){return U},topMaker:function(De){return ee-De},maxWidth:Ee-U,maxHeight:ee,scaleTo:Jy(_-oe,W-I)},mt:{width:B,height:ee-I,leftMaker:function(){return U},topMaker:function(De){return ee-De},maxWidth:Ee-U,maxHeight:ee,scaleTo:"height"},ml:{width:oe-_,height:F,leftMaker:function(De){return oe-De},topMaker:function(){return W},maxWidth:oe,maxHeight:Te-W,scaleTo:"width"},mr:{width:_-U,height:F,leftMaker:function(){return U},topMaker:function(){return W},maxWidth:Ee-U,maxHeight:Te-W,scaleTo:"width"},mb:{width:B,height:I-W,leftMaker:function(){return U},topMaker:function(){return W},maxWidth:Ee-U,maxHeight:Te-W,scaleTo:"height"},bl:{width:oe-_,height:I-W,leftMaker:function(De){return oe-De},topMaker:function(){return W},maxWidth:oe,maxHeight:Te-W,scaleTo:Jy(U-_,I-ee)},br:{width:_-U,height:I-W,leftMaker:function(){return U},topMaker:function(){return W},maxWidth:Ee-U,maxHeight:Te-W,scaleTo:Jy(_-oe,I-ee)}};return this.adjustRatioCropzoneSize(Ae[O])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(N){var O=N.keyCode;O===Rn.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(N){var O=N.keyCode;O===Rn.SHIFT&&(this._withShiftKey=!1)}}),bke=yke;function wke(H){var N=xke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function xke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Cke=10,Ske={presetRatio:null,top:-10,left:-10,height:1,width:1},kke=function(H){fn(O,H);var N=wke(O);function O(_){var I,D,B,F,W,U;return Y(this,O),U=N.call(this,Xe.CROPPER,_),U._cropzone=null,U._startX=null,U._startY=null,U._withShiftKey=!1,U._listeners={keydown:G()(I=U._onKeyDown).call(I,qt(U)),keyup:G()(D=U._onKeyUp).call(D,qt(U)),mousedown:G()(B=U._onFabricMouseDown).call(B,qt(U)),mousemove:G()(F=U._onFabricMouseMove).call(F,qt(U)),mouseup:G()(W=U._onFabricMouseUp).call(W,qt(U))},U}return K(O,[{key:"start",value:function(){if(!this._cropzone){var I=this.getCanvas();I.forEachObject(function(D){D.evented=!1}),this._cropzone=new bke(I,Z()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},pr,this.graphics.cropSelectionStyle)),I.discardActiveObject(),I.add(this._cropzone),I.on("mouse:down",this._listeners.mousedown),I.selection=!1,I.defaultCursor="crosshair",ne.fabric.util.addListener(document,"keydown",this._listeners.keydown),ne.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var I=this.getCanvas(),D=this._cropzone;D&&(I.remove(D),I.selection=!0,I.defaultCursor="default",I.off("mouse:down",this._listeners.mousedown),I.forEachObject(function(B){B.evented=!0}),this._cropzone=null,ne.fabric.util.removeListener(document,"keydown",this._listeners.keydown),ne.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(I){this._cropzone&&this._cropzone.set({visible:I})}},{key:"_onFabricMouseDown",value:function(I){var D=this.getCanvas();if(!I.target){D.selection=!1;var B=D.getPointer(I.e);this._startX=B.x,this._startY=B.y,D.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(I){var D=this.getCanvas(),B=D.getPointer(I.e),F=B.x,W=B.y,U=this._cropzone;Math.abs(F-this._startX)+Math.abs(W-this._startY)>Cke&&(D.remove(U),U.set(this._calcRectDimensionFromPoint(F,W,U.presetRatio)),D.add(U),D.setActiveObject(U))}},{key:"_calcRectDimensionFromPoint",value:function(I,D){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,F=this.getCanvas(),W=F.getWidth(),U=F.getHeight(),ee=this._startX,oe=this._startY,Ee=St(I,0,ee),Te=St(D,0,oe),Ae=St(I,ee,W)-Ee,Oe=St(D,oe,U)-Te;return this._withShiftKey&&!B?(Ae>Oe?Oe=Ae:Oe>Ae&&(Ae=Oe),ee>=I&&(Ee=ee-Ae),oe>=D&&(Te=oe-Oe)):B&&(Oe=Ae/B,ee>=I&&(Ee=St(ee-Ae,0,W)),oe>=D&&(Te=St(oe-Oe,0,U)),Te+Oe>U&&(Oe=U-Te,Ae=Oe*B,ee>=I&&(Ee=St(ee-Ae,0,W)),oe>=D&&(Te=St(oe-Oe,0,U)))),{left:Ee,top:Te,width:Ae,height:Oe}}},{key:"_onFabricMouseUp",value:function(){var I=this._cropzone,D=this._listeners,B=this.getCanvas();B.setActiveObject(I),B.off({"mouse:move":D.mousemove,"mouse:up":D.mouseup})}},{key:"getCroppedImageData",value:function(I){var D=this.getCanvas(),B=D.contains(this._cropzone);if(!I)return null;B&&D.remove(this._cropzone);var F={imageName:this.getImageName(),url:D.toDataURL(I)};return B&&D.add(this._cropzone),F}},{key:"getCropzoneRect",value:function(){var I=this._cropzone;return I.isValid()?{left:I.left,top:I.top,width:I.width,height:I.height}:null}},{key:"setCropzoneRect",value:function(I){var D=this.getCanvas(),B=this._cropzone;D.discardActiveObject(),D.selection=!1,D.remove(B),B.set(I?this._getPresetPropertiesForCropSize(I):Ske),D.add(B),D.selection=!0,I&&D.setActiveObject(B)}},{key:"_getPresetPropertiesForCropSize",value:function(I){var D,B,F=this.getCanvas(),W=F.getWidth(),U=F.getHeight(),ee=W>=U?W:U,oe=function(tt,an){return tt>an?an/tt:1},Ee=ee*I,Te=ee,Ae=oe(Ee,W),Oe=Va()(D=[Ee,Te]).call(D,function(It){return It*Ae}),De=se(Oe,2);Ee=De[0],Te=De[1];var $e=oe(Te,U),yt=Va()(B=[Ee,Te]).call(B,function(It){return Wy(It*$e)}),wt=se(yt,2);return Ee=wt[0],Te=wt[1],{presetRatio:I,top:(U-Te)/2,left:(W-Ee)/2,width:Ee,height:Te}}},{key:"_onKeyDown",value:function(I){I.keyCode===Rn.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(I){I.keyCode===Rn.SHIFT&&(this._withShiftKey=!1)}}]),O}(Fo),Eke=kke;function Tke(H){var N=Mke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function Mke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Ike=function(H){fn(O,H);var N=Tke(O);function O(_){return Y(this,O),N.call(this,Xe.FLIP,_)}return K(O,[{key:"getCurrentSetting",value:function(){var I=this.getCanvasImage();return{flipX:I.flipX,flipY:I.flipY}}},{key:"set",value:function(I){var D=this.getCurrentSetting(),B=D.flipX!==I.flipX,F=D.flipY!==I.flipY;return!B&&!F?de().reject(un.flip):(Z()(D,I),this.setImageProperties(D,!0),this._invertAngle(B,F),this._flipObjects(B,F),de().resolve({flipX:D.flipX,flipY:D.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(I,D){var B=this.getCanvasImage(),F=B.angle;I&&(F*=-1),D&&(F*=-1),B.rotate(jl()(F)).setCoords()}},{key:"_flipObjects",value:function(I,D){var B=this.getCanvas();I&&B.forEachObject(function(F){F.set({angle:jl()(F.angle*-1),flipX:!F.flipX,left:B.width-F.left}).setCoords()}),D&&B.forEachObject(function(F){F.set({angle:jl()(F.angle*-1),flipY:!F.flipY,top:B.height-F.top}).setCoords()}),B.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var I=this.getCurrentSetting();return this.set({flipX:!I.flipX,flipY:I.flipY})}},{key:"flipY",value:function(){var I=this.getCurrentSetting();return this.set({flipX:I.flipX,flipY:!I.flipY})}}]),O}(Fo),Oke=Ike;function Ake(H){var N=_ke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function _ke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Dke=function(H){fn(O,H);var N=Ake(O);function O(_){return Y(this,O),N.call(this,Xe.ROTATION,_)}return K(O,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(I){var D=this.getCurrentAngle()%360;I%=360;var B=this.getCanvasImage(),F=B.getCenterPoint();B.set({angle:I}).setCoords(),this.adjustCanvasDimension();var W=B.getCenterPoint();return this._rotateForEachObject(F,W,I-D),de().resolve(I)}},{key:"_rotateForEachObject",value:function(I,D,B){var F=this.getCanvas(),W={x:I.x-D.x,y:I.y-D.y};F.forEachObject(function(U){var ee=U.getCenterPoint(),oe=ne.fabric.util.degreesToRadians(B),Ee=ne.fabric.util.rotatePoint(ee,I,oe);U.set({left:Ee.x-W.x,top:Ee.y-W.y,angle:(U.angle+B)%360}),U.setCoords()}),F.renderAll()}},{key:"rotate",value:function(I){var D=this.getCurrentAngle();return this.setAngle(D+I)}}]),O}(Fo),Nke=Dke;function Pke(H){var N=Lke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function Lke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Rke=function(H){fn(O,H);var N=Pke(O);function O(_){var I;return Y(this,O),I=N.call(this,Xe.FREE_DRAWING,_),I.width=12,I.oColor=new ne.fabric.Color("rgba(0, 0, 0, 0.5)"),I}return K(O,[{key:"start",value:function(I){var D=this.getCanvas();D.isDrawingMode=!0,this.setBrush(I)}},{key:"setBrush",value:function(I){var D=this.getCanvas().freeDrawingBrush;I=I||{},this.width=I.width||this.width,I.color&&(this.oColor=new ne.fabric.Color(I.color)),D.width=this.width,D.color=this.oColor.toRgba()}},{key:"end",value:function(){var I=this.getCanvas();I.isDrawingMode=!1}}]),O}(Fo),Bke=Rke,sF=30,jke=2.7,Fke=1.7,lF=180,Hke=ne.fabric.util.createClass(ne.fabric.Line,{type:"line",initialize:function(N){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",N,O),this.arrowType=O.arrowType},_render:function(N){var O=this.calcLinePoints(),_=O.x1,I=O.y1,D=O.x2,B=O.y2,F={fromX:_,fromY:I,toX:D,toY:B};this.ctx=N,N.lineWidth=this.strokeWidth,this._renderBasicLinePath(F),this._drawDecoratorPath(F),this._renderStroke(N)},_renderBasicLinePath:function(N){var O=N.fromX,_=N.fromY,I=N.toX,D=N.toY;this.ctx.beginPath(),this.ctx.moveTo(O,_),this.ctx.lineTo(I,D)},_drawDecoratorPath:function(N){this._drawDecoratorPathType("head",N),this._drawDecoratorPathType("tail",N)},_drawDecoratorPathType:function(N,O){switch(this.arrowType[N]){case"triangle":this._drawTrianglePath(N,O);break;case"chevron":this._drawChevronPath(N,O);break}},_drawTrianglePath:function(N,O){var _=this.ctx.lineWidth*Fke;this._drawChevronPath(N,O,_),this.ctx.closePath()},_drawChevronPath:function(N,O,_){var I=this,D=O.fromX,B=O.fromY,F=O.toX,W=O.toY,U=this.ctx;_||(_=this.ctx.lineWidth*jke);var ee=N==="head"?[D,B]:[F,W],oe=se(ee,2),Ee=oe[0],Te=oe[1],Ae=N==="head"?[F,W]:[D,B],Oe=se(Ae,2),De=Oe[0],$e=Oe[1],yt=Math.atan2($e-Te,De-Ee)*lF/Math.PI,wt=function(tt){return I.getRotatePosition(_,tt,{x:Ee,y:Te})};U.moveTo.apply(U,j(wt(yt+sF))),U.lineTo(Ee,Te),U.lineTo.apply(U,j(wt(yt-sF)))},getRotatePosition:function(N,O,_){var I=O*Math.PI/lF,D=_.x,B=_.y;return[N*Math.cos(I)+D,N*Math.sin(I)+B]}}),zke=Hke;function $ke(H){var N=Uke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function Uke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Wke=function(H){fn(O,H);var N=$ke(O);function O(_){var I,D,B,F;return Y(this,O),F=N.call(this,Xe.LINE,_),F._width=12,F._oColor=new ne.fabric.Color("rgba(0, 0, 0, 0.5)"),F._listeners={mousedown:G()(I=F._onFabricMouseDown).call(I,qt(F)),mousemove:G()(D=F._onFabricMouseMove).call(D,qt(F)),mouseup:G()(B=F._onFabricMouseUp).call(B,qt(F))},F}return K(O,[{key:"setHeadOption",value:function(I){var D=I.arrowType,B=D===void 0?{head:null,tail:null}:D;this._arrowType=B}},{key:"start",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=this.getCanvas();D.defaultCursor="crosshair",D.selection=!1,this.setHeadOption(I),this.setBrush(I),D.forEachObject(function(B){B.set({evented:!1})}),D.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(I){var D=this.getCanvas().freeDrawingBrush;I=I||{},this._width=I.width||this._width,I.color&&(this._oColor=new ne.fabric.Color(I.color)),D.width=this._width,D.color=this._oColor.toRgba()}},{key:"end",value:function(){var I=this.getCanvas();I.defaultCursor="default",I.selection=!0,I.forEachObject(function(D){D.set({evented:!0})}),I.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(I){var D=this.getCanvas(),B=D.getPointer(I.e),F=B.x,W=B.y,U=[F,W,F,W];this._line=new zke(U,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(pa.SELECTION_STYLE),D.add(this._line),D.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(je.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(I){var D=this.getCanvas(),B=D.getPointer(I.e);this._line.set({x2:B.x,y2:B.y}),this._line.setCoords(),D.renderAll()}},{key:"_onFabricMouseUp",value:function(){var I=this.getCanvas();this.fire(je.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,I.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var I=this.graphics.createObjectProperties(this._line),D=this._line,B=D.x1,F=D.x2,W=D.y1,U=D.y2;return Z()({},I,{startPosition:{x:B,y:W},endPosition:{x:F,y:U}})}}]),O}(Fo),Yke=Wke;function Gke(H){var N=Xke();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function Xke(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Kke={fill:"#000000",left:0,top:0},Zke={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Jke=500,Qke=function(H){fn(O,H);var N=Gke(O);function O(_){var I,D,B,F,W,U;return Y(this,O),U=N.call(this,Xe.TEXT,_),U._defaultStyles=Kke,U._isSelected=!1,U._selectedObj={},U._editingObj={},U._listeners={mousedown:G()(I=U._onFabricMouseDown).call(I,qt(U)),select:G()(D=U._onFabricSelect).call(D,qt(U)),selectClear:G()(B=U._onFabricSelectClear).call(B,qt(U)),scaling:G()(F=U._onFabricScaling).call(F,qt(U)),textChanged:G()(W=U._onFabricTextChanged).call(W,qt(U))},U._textarea=null,U._ratio=1,U._lastClickTime=new Date().getTime(),U._editingObjInfos={},U.isPrevEditing=!1,U}return K(O,[{key:"start",value:function(){var I=this,D=this.getCanvas();D.selection=!1,D.defaultCursor="text",D.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),D.forEachObject(function(B){B.type==="i-text"&&I.adjustOriginPosition(B,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var I=this,D=this.getCanvas();D.selection=!0,D.defaultCursor="default",D.forEachObject(function(B){B.type==="i-text"&&(B.text===""?D.remove(B):I.adjustOriginPosition(B,"end"))}),D.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(I,D){var B="center",F="center";D==="start"&&(B="left",F="top");var W=I.getPointByOrigin(B,F),U=W.x,ee=W.y;I.set({left:U,top:ee,originX:B,originY:F}),I.setCoords()}},{key:"add",value:function(I,D){var B=this;return new(de())(function(F){var W,U=B.getCanvas(),ee=null,oe=pa.SELECTION_STYLE,Ee=B._defaultStyles;B._setInitPos(D.position),D.styles&&(Ee=Z()(Ee,D.styles)),Zj()(D.autofocus)||(D.autofocus=!0),ee=new ne.fabric.IText(I,Ee),oe=Z()({},oe,{originX:"left",originY:"top"}),ee.set(oe),ee.on({mouseup:G()(W=B._onFabricMouseUp).call(W,B)}),U.add(ee),D.autofocus&&(ee.enterEditing(),ee.selectAll()),U.getActiveObject()||U.setActiveObject(ee),B.isPrevEditing=!0,F(B.graphics.createObjectProperties(ee))})}},{key:"change",value:function(I,D){var B=this;return new(de())(function(F){I.set("text",D),B.getCanvas().renderAll(),F()})}},{key:"setStyle",value:function(I,D){var B=this;return new(de())(function(F){le()(D,function(W,U){I[U]===W&&U!=="fontSize"&&(D[U]=Zke[U]||"")},B),"textDecoration"in D&&Z()(D,B._getTextDecorationAdaptObject(D.textDecoration)),I.set(D),B.getCanvas().renderAll(),F()})}},{key:"getText",value:function(I){return I.text}},{key:"setSelectedInfo",value:function(I,D){this._selectedObj=I,this._isSelected=D}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var I=this.getCanvasElement(),D=Ie()(I.style.maxWidth,10),B=I.width;this._ratio=B/D}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(I){return{underline:I==="underline",linethrough:I==="line-through",overline:I==="overline"}}},{key:"_setInitPos",value:function(I){I=I||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=I.x,this._defaultStyles.top=I.y}},{key:"_onInput",value:function(){var I=this.getCanvasRatio(),D=this._editingObj,B=this._textarea.style;B.width="".concat(Math.ceil(D.width/I),"px"),B.height="".concat(Math.ceil(D.height/I),"px")}},{key:"_onKeyDown",value:function(){var I=this,D=this.getCanvasRatio(),B=this._editingObj,F=this._textarea.style;p()(function(){B.text(I._textarea.value),F.width="".concat(Math.ceil(B.width/D),"px"),F.height="".concat(Math.ceil(B.height/D),"px")},0)}},{key:"_onBlur",value:function(){var I=this.getCanvasRatio(),D=this._editingObj,B=this._editingObjInfos,F=this._textarea.value,W=D.width/I-B.width/I,U=D.height/I-B.height/I;if(I===1&&(W/=2,U/=2),this._textarea.style.display="none",D.set({left:B.left+W,top:B.top+U}),F.length){this.getCanvas().add(D);var ee={id:Ge(D),type:D.type,text:F};this.fire(je.TEXT_CHANGED,ee)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(I){var D=I.target;D.fontSize=D.fontSize*D.scaleY,D.scaleX=1,D.scaleY=1}},{key:"_onFabricTextChanged",value:function(I){this.fire(je.TEXT_CHANGED,I.target)}},{key:"_onFabricSelectClear",value:function(I){var D=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(I.target,!1),D&&D.text===""&&this.getCanvas().remove(D)}},{key:"_onFabricSelect",value:function(I){this.isPrevEditing=!0,this.setSelectedInfo(I.target,!0)}},{key:"_onFabricMouseDown",value:function(I){var D=I.target;if(!(D&&!D.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(I)}}},{key:"_fireAddText",value:function(I){var D=I.target,B=I.e||{},F=this.getCanvas().getPointer(B);D||this.fire(je.ADD_TEXT,{originPosition:{x:F.x,y:F.y},clientPosition:{x:B.clientX||0,y:B.clientY||0}})}},{key:"_onFabricMouseUp",value:function(I){var D=I.target,B=new Date().getTime();this._isDoubleClick(B)&&!D.isEditing&&D.enterEditing(),D.isEditing&&this.fire(je.TEXT_EDITING),this._lastClickTime=B}},{key:"_isDoubleClick",value:function(I){return I-this._lastClickTime<Jke}}]),O}(Fo),Vke=Qke;function qke(H){var N=eEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function eEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var tEe={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},nEe=function(H){fn(O,H);var N=qke(O);function O(_){var I,D,B,F;return Y(this,O),F=N.call(this,Xe.ICON,_),F._oColor="#000000",F._pathMap=tEe,F._type=null,F._iconColor=null,F._handlers={mousedown:G()(I=F._onFabricMouseDown).call(I,qt(F)),mousemove:G()(D=F._onFabricMouseMove).call(D,qt(F)),mouseup:G()(B=F._onFabricMouseUp).call(B,qt(F))},F}return K(O,[{key:"setStates",value:function(I,D){this._type=I,this._iconColor=D}},{key:"start",value:function(){var I=this.getCanvas();I.selection=!1,I.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var I=this.getCanvas();I.selection=!0,I.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(I,D){var B=this;return new(de())(function(F,W){var U=B.getCanvas(),ee=B._pathMap[I],oe=pa.SELECTION_STYLE,Ee=ee?B._createIcon(ee):null;B._icon=Ee,Ee||W(un.invalidParameters),Ee.set(Z()({type:"icon",fill:B._oColor},oe,D,B.graphics.controlStyle)),U.add(Ee).setActiveObject(Ee),F(B.graphics.createObjectProperties(Ee))})}},{key:"registerPaths",value:function(I){var D=this;le()(I,function(B,F){D._pathMap[F]=B},this)}},{key:"setColor",value:function(I,D){this._oColor=I,D&&D.get("type")==="icon"&&(D.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(I){return pe()(I)}},{key:"_createIcon",value:function(I){return new ne.fabric.Path(I)}},{key:"_onFabricMouseDown",value:function(I){var D=this,B=this.getCanvas();this._startPoint=B.getPointer(I.e);var F=this._startPoint,W=F.x,U=F.y;this.add(this._type,{left:W,top:U,fill:this._iconColor}).then(function(){D.fire(je.ADD_OBJECT,D.graphics.createObjectProperties(D._icon)),B.on("mouse:move",D._handlers.mousemove),B.on("mouse:up",D._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(I){var D=this.getCanvas();if(this._icon){var B=D.getPointer(I.e),F=(B.x-this._startPoint.x)/this._icon.width,W=(B.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(F*2),scaleY:Math.abs(W*2)}),this._icon.setCoords(),D.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var I=this.getCanvas();this.fire(je.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,I.off("mouse:down",this._handlers.mousedown),I.off("mouse:move",this._handlers.mousemove),I.off("mouse:up",this._handlers.mouseup)}}]),O}(Fo),rEe=nEe,iEe=ne.fabric.util.createClass(ne.fabric.Image.filters.BlendImage,{applyTo:function(N){if(this.mask){var O=N.canvasEl,_=O.width,I=O.height,D=this._createCanvasOfMask(_,I),B=O.getContext("2d"),F=D.getContext("2d"),W=B.getImageData(0,0,_,I);this._drawMask(F,O,B),this._mapData(F,W,_,I),N.imageData=W}},_createCanvasOfMask:function(N,O){var _=ne.fabric.util.createCanvasElement();return _.width=N,_.height=O,_},_drawMask:function(N){var O=this.mask,_=O.getElement(),I=O.angle,D=O.left,B=O.scaleX,F=O.scaleY,W=O.top;N.save(),N.translate(D,W),N.rotate(I*Math.PI/180),N.scale(B,F),N.drawImage(_,-_.width/2,-_.height/2),N.restore()},_mapData:function(N,O,_,I){for(var D=O.data,B=O.height,F=O.width,W=D,U=F*B*4,ee=N.getImageData(0,0,_,I).data,oe=0;oe<U;oe+=4)W[oe+3]=ee[oe]}}),oEe=iEe,aEe=ne.fabric.util.createClass(ne.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),sEe=aEe,lEe=ne.fabric.util.createClass(ne.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),cEe=lEe,uEe=ne.fabric.util.createClass(ne.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(N){N||(N={}),this.color=N.color||"#FFFFFF",this.threshold=N.threshold||45,this.x=N.x||null,this.y=N.y||null},applyTo:function(N){var O=N.canvasEl,_=O.getContext("2d"),I=_.getImageData(0,0,O.width,O.height),D=I.data,B=this.threshold,F=ne.fabric.Color.sourceFromHex(this.color),W,U;for(this.x&&this.y&&(F=this._getColor(I,this.x,this.y)),W=0,U=D.length;W<U;W+=4)this._isOutsideThreshold(D[W],F[0],B)||this._isOutsideThreshold(D[W+1],F[1],B)||this._isOutsideThreshold(D[W+2],F[2],B)||(D[W]=D[W+1]=D[W+2]=D[W+3]=0);_.putImageData(I,0,0)},_isOutsideThreshold:function(N,O,_){var I=N-O;return Math.abs(I)>_},_getColor:function(N,O,_){var I=[0,0,0,0],D=N.data,B=N.width,F=4,W=(B*_+O)*F;return I[0]=D[W],I[1]=D[W+1],I[2]=D[W+2],I[3]=D[W+3],I}}),dEe=uEe;function fEe(H){var N=hEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function hEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var Qy=ne.fabric.Image.filters;Qy.Mask=oEe,Qy.Sharpen=sEe,Qy.Emboss=cEe,Qy.ColorFilter=dEe;var pEe=function(H){fn(O,H);var N=fEe(O);function O(_){return Y(this,O),N.call(this,Xe.FILTER,_)}return K(O,[{key:"add",value:function(I,D){var B=this;return new(de())(function(F,W){var U=B._getSourceImage(),ee=B.getCanvas(),oe=B._getFilter(U,I);oe||(oe=B._createFilter(U,I,D)),oe||W(un.invalidParameters),B._changeFilterValues(oe,D),B._apply(U,function(){ee.renderAll(),F({type:I,action:"add",options:D})})})}},{key:"remove",value:function(I){var D=this;return new(de())(function(B,F){var W=D._getSourceImage(),U=D.getCanvas(),ee=D.getOptions(I);W.filters.length||F(un.unsupportedOperation),D._removeFilter(W,I),D._apply(W,function(){U.renderAll(),B({type:I,action:"remove",options:ee})})})}},{key:"hasFilter",value:function(I){return!!this._getFilter(this._getSourceImage(),I)}},{key:"getOptions",value:function(I){var D=this._getSourceImage(),B=this._getFilter(D,I);return B?Z()({},B.options):null}},{key:"_changeFilterValues",value:function(I,D){le()(D,function(B,F){X()(I[F])||(I[F]=B)}),le()(I.options,function(B,F){X()(D[F])||(I.options[F]=D[F])})}},{key:"_apply",value:function(I,D){I.filters.push();var B=I.applyFilters();B&&D()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(I,D,B){var F,W=this._getFabricFilterType(D),U=ne.fabric.Image.filters[W];return U&&(F=new U(B),F.options=B,I.filters.push(F)),F}},{key:"_getFilter",value:function(I,D){var B=null;if(I){var F=this._getFabricFilterType(D),W=I.filters.length,U,ee;for(ee=0;ee<W;ee+=1)if(U=I.filters[ee],U.type===F){B=U;break}}return B}},{key:"_removeFilter",value:function(I,D){var B,F=this._getFabricFilterType(D);I.filters=pd()(B=I.filters).call(B,function(W){return W.type!==F})}},{key:"_getFabricFilterType",value:function(I){return I.charAt(0).toUpperCase()+m()(I).call(I,1)}}]),O}(Fo),mEe=pEe,gEe=o(1801),js=o.n(gEe),cF={pixelate:"blocksize",blur:"blur"},_E={x:"width",y:"height"},vEe=rCe(cF),$h=null;function Vy(H){var N=jh(H,"patternSourceCanvas"),O=N.patternSourceCanvas,_=O.getObjects(),I=se(_,1),D=I[0];return D}function yEe(H){var N=H.angle,O=H.flipX,_=H.flipY,I=Vy(H),D=AEe(H),B=D.right,F=D.bottom,W=D.width,U=D.height,ee=(W-H.width)/2,oe=(U-H.height)/2,Ee=H.left-H.width/2-ee,Te=H.top-H.height/2-oe,Ae=W/2-ee,Oe=U/2-oe,De=Math.max(W,U)+Math.max(ee,oe),$e=bEe({shapeObj:H,left:Ae,top:Oe,width:W,height:U,cropX:Ee,cropY:Te,flipX:O,flipY:_,right:B,bottom:F}),yt=se($e,4);Ae=yt[0],Oe=yt[1],W=yt[2],U=yt[3],I.set({angle:O===_?-N:N,left:Ae,top:Oe,width:W,height:U,cropX:Ee,cropY:Te,flipX:O,flipY:_}),TE(I,{fillImageMaxSize:De})}function DE(H){var N;return Va()(N=H.filters).call(N,function(O){var _=Me()(O),I=se(_,1),D=I[0];return $({},vEe[D],O[D])})}function bEe(H){var N=H.shapeObj,O=H.left,_=H.top,I=H.width,D=H.height,B=H.cropX,F=H.cropY,W=H.flipX,U=H.flipY,ee=H.right,oe=H.bottom,Ee=function(It,tt,an,ii){return kEe({type:It,outDistance:tt,shapeObj:N,flipX:W,flipY:U,left:an,top:ii})},Te=I,Ae=D,Oe=xEe(Ee,{left:O,top:_,width:I,height:D,cropX:B,cropY:F}),De=se(Oe,4);O=De[0],_=De[1],I=De[2],D=De[3];var $e=wEe(Ee,{left:O,top:_,insideCanvasRealImageWidth:I,insideCanvasRealImageHeight:D,right:ee,bottom:oe,cropX:B,cropY:F,originalWidth:Te,originalHeight:Ae}),yt=se($e,4);return O=yt[0],_=yt[1],I=yt[2],D=yt[3],[O,_,I,D]}function wEe(H,N){var O=N.left,_=N.top,I=N.insideCanvasRealImageWidth,D=N.insideCanvasRealImageHeight,B=N.right,F=N.bottom,W=N.cropX,U=N.cropY,ee=N.originalWidth,oe=N.originalHeight,Ee=I,Te=D,Ae=$h,Oe=Ae.width,De=Ae.height;B>Oe&&W>0&&(Ee=ee-Math.abs(B-Oe)),F>De&&U>0&&(Te=oe-Math.abs(F-De));var $e={x:(I-Ee)/2,y:(D-Te)/2};return le()(["x","y"],function(yt){var wt=$e[yt];if(wt>0){var It=H(yt,wt,O,_),tt=se(It,2);O=tt[0],_=tt[1]}}),[O,_,Ee,Te]}function xEe(H,N){var O=N.left,_=N.top,I=N.width,D=N.height,B=N.cropX,F=N.cropY,W={width:I,height:D};return le()(["x","y"],function(U){var ee=U==="x"?B:F,oe=W[_E[U]],Ee=$h[_E[U]];if(oe>Ee){var Te=(oe-Ee)/2;W[_E[U]]=Ee;var Ae=H(U,Te,O,_),Oe=se(Ae,2);O=Oe[0],_=Oe[1]}if(ee<0){var De=H(U,ee,O,_),$e=se(De,2);O=$e[0],_=$e[1]}}),[O,_,W.width,W.height]}function uF(H,N,O){var _=dF(H),I=hF(_,H.angle,N);O.add(I);var D={fill:new ne.fabric.Pattern({source:O.getElement(),repeat:"no-repeat"})};return TE(D,{patternSourceCanvas:O}),D}function CEe(H){var N=H.getObjects(),O=se(N,1),_=O[0],I=jh(_,"fillImageMaxSize"),D=I.fillImageMaxSize;D=Math.max(1,D),H.setDimensions({width:D,height:D}),H.renderAll()}function SEe(H,N){var O=jh(H,"patternSourceCanvas"),_=O.patternSourceCanvas,I=_.getObjects(),D=se(I,1),B=D[0],F=DE(B);_.remove(B);var W=dF(N,!0),U=hF(W,N.angle,F);_.add(U)}function dF(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!$h||N)&&($h=H.toCanvasElement()),$h}function kEe(H){var N=H.type,O=H.shapeObj,_=H.outDistance,I=H.left,D=H.top,B=H.flipX,F=H.flipY,W=fF(O),U=[[1,2],[0,3],[0,3],[1,2]],ee=TEe(N,W,U),oe=MEe(N,W,ee),Ee=ee.startPointIndex,Te=EEe({outDistance:_,startPointIndex:Ee,flipX:B,flipY:F,reatAngles:oe});return[I+Te.left,D+Te.top]}function EEe(H){var N=H.outDistance,O=H.startPointIndex,_=H.flipX,I=H.flipY,D=H.reatAngles,B=N*Math.cos(D[0]*Math.PI/180),F=N*Math.cos(D[1]*Math.PI/180),W=O===2||O===3,U={top:W?B:F,left:W?F:B};return IEe(O,_,I)&&(U.left=U.left*-1),OEe(O,_,I)&&(U.top=U.top*-1),U}function TEe(H,N,O){var _=0,I=0;le()(N,function(W,U){W[H]<_&&(_=W[H],I=U)});var D=se(O[I],2),B=D[0],F=D[1];return{startPointIndex:I,endPointIndex1:B,endPointIndex2:F}}function MEe(H,N,O){var _,I=O.startPointIndex,D=O.endPointIndex1,B=O.endPointIndex2,F=H==="x"?180:270;return Va()(_=[D,B]).call(_,function(W){var U=N[I],ee=N[W],oe=U.y-ee.y,Ee=U.x-ee.x;return Math.atan2(oe,Ee)*180/Math.PI-F})}function IEe(H,N,O){return(!N&&O||!N&&!O)&&H===0||(N&&O||N&&!O)&&H===1||(!N&&!O||!N&&O)&&H===2||(N&&!O||N&&O)&&H===3}function OEe(H,N,O){return(N&&!O||!N&&!O)&&H===0||(!N&&!O||N&&!O)&&H===1||(N&&O||!N&&O)&&H===2||(!N&&O||N&&O)&&H===3}function fF(H){return[H.getPointByOrigin("left","top"),H.getPointByOrigin("right","top"),H.getPointByOrigin("left","bottom"),H.getPointByOrigin("right","bottom")]}function AEe(H){var N=fF(H),O=se(N,4),_=O[0],I=_.x,D=_.y,B=O[1],F=B.x,W=B.y,U=O[2],ee=U.x,oe=U.y,Ee=O[3],Te=Ee.x,Ae=Ee.y,Oe=Math.min(I,F,ee,Te),De=Math.min(D,W,oe,Ae),$e=Math.max(I,F,ee,Te),yt=Math.max(D,W,oe,Ae);return{left:Oe,top:De,right:$e,bottom:yt,width:$e-Oe,height:yt-De}}function hF(H,N,O){var _,I=new ne.fabric.Image(H);return le()(Z().apply(void 0,J()(_=[{}]).call(_,j(O))),function(D,B){var F=iCe(B),W=new ne.fabric.Image.filters[F]($({},cF[B],D));I.filters.push(W)}),I.applyFilters(),TE(I,{originalAngle:N,fillImageMaxSize:Math.max(I.width,I.height)}),js().adjustOriginToCenter(I),I}function _Ee(H){var N=DEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function DEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var pF=Z()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},Xn),NEe="rect",PEe=20,LEe=20;function mF(H,N,O){var _=pe()(H),I=Rj(pe()(H)),D=_;_.color&&(D=_.color);var B=null;if(I==="filter"){var F=O();B=uF(N,pd()(_),F)}else B={fill:D};return Z()({},H,B)}var REe=function(H){fn(O,H);var N=_Ee(O);function O(_){var I,D,B,F,W,U;return Y(this,O),U=N.call(this,Xe.SHAPE,_),U._shapeObj=null,U._type=NEe,U._options=Z()({},pF),U._isSelected=!1,U._startPoint={},U._withShiftKey=!1,U._handlers={mousedown:G()(I=U._onFabricMouseDown).call(I,qt(U)),mousemove:G()(D=U._onFabricMouseMove).call(D,qt(U)),mouseup:G()(B=U._onFabricMouseUp).call(B,qt(U)),keydown:G()(F=U._onKeyDown).call(F,qt(U)),keyup:G()(W=U._onKeyUp).call(W,qt(U))},U}return K(O,[{key:"start",value:function(){var I=this.getCanvas();this._isSelected=!1,I.defaultCursor="crosshair",I.selection=!1,I.uniformScaling=!0,I.on({"mouse:down":this._handlers.mousedown}),ne.fabric.util.addListener(document,"keydown",this._handlers.keydown),ne.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var I=this.getCanvas();this._isSelected=!1,I.defaultCursor="default",I.selection=!0,I.uniformScaling=!1,I.off({"mouse:down":this._handlers.mousedown}),ne.fabric.util.removeListener(document,"keydown",this._handlers.keydown),ne.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(I,D){this._type=I,D&&(this._options=Z()(this._options,D))}},{key:"add",value:function(I,D){var B=this;return new(de())(function(F){var W=B.getCanvas(),U=B._extendOptions(D),ee=B._createInstance(I,U),oe=B.graphics.createObjectProperties(ee);B._bindEventOnShape(ee),W.add(ee).setActiveObject(ee),B._resetPositionFillFilter(ee),F(oe)})}},{key:"change",value:function(I,D){var B=this;return new(de())(function(F,W){Bj(I)||W(un.unsupportedType);var U=Rj(pe()(D))==="filter",ee=B.graphics,oe=ee.canvasImage,Ee=ee.createStaticCanvas;I.set(U?mF(D,oe,Ee):D),U&&B._resetPositionFillFilter(I),B.getCanvas().renderAll(),F()})}},{key:"makeFillPropertyForUserEvent",value:function(I){var D=ME(I),B={};if(D===Le.FILTER){var F=Vy(I),W=DE(F);B.type=D,B.filter=W}else B.type=Le.COLOR,B.color=pe()(I)||"transparent";return B}},{key:"processForCopiedObject",value:function(I,D){if(this._bindEventOnShape(I),ME(I)==="filter"){var B=Vy(D),F=DE(B),W=this.graphics.createStaticCanvas();I.set(uF(this.graphics.canvasImage,F,W)),this._resetPositionFillFilter(I)}}},{key:"_createInstance",value:function(I,D){var B;switch(I){case"rect":B=new ne.fabric.Rect(D);break;case"circle":B=new ne.fabric.Ellipse(Z()({type:"circle"},D));break;case"triangle":B=new ne.fabric.Triangle(D);break;default:B={}}return B}},{key:"_extendOptions",value:function(I){var D=pa.SELECTION_STYLE,B=this.graphics,F=B.canvasImage,W=B.createStaticCanvas;return I=Z()({},pF,this._options,D,I),mF(I,F,W)}},{key:"_bindEventOnShape",value:function(I){var D=this,B=this.getCanvas();I.on({added:function(){D._shapeObj=this,js().setOrigins(D._shapeObj)},selected:function(){D._isSelected=!0,D._shapeObj=this,B.uniformScaling=!0,B.defaultCursor="default",js().setOrigins(D._shapeObj)},deselected:function(){D._isSelected=!1,D._shapeObj=null,B.defaultCursor="crosshair",B.uniformScaling=!1},modified:function(){var W=D._shapeObj;js().adjustOriginToCenter(W),js().setOrigins(W)},modifiedInGroup:function(W){D._fillFilterRePositionInGroupSelection(I,W)},moving:function(){D._resetPositionFillFilter(this)},rotating:function(){D._resetPositionFillFilter(this)},scaling:function(W){var U=B.getPointer(W.e),ee=D._shapeObj;B.setCursor("crosshair"),js().resize(ee,U,!0),D._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(I){if(I.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var D=this.getCanvas();this._startPoint=D.getPointer(I.e),D.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(I){var D=this,B=this.getCanvas(),F=B.getPointer(I.e),W=this._startPoint.x,U=this._startPoint.y,ee=W-F.x,oe=U-F.y,Ee=this._shapeObj;Ee?(this._shapeObj.set({isRegular:this._withShiftKey}),js().resize(Ee,F),B.renderAll(),this._resetPositionFillFilter(Ee)):this.add(this._type,{left:W,top:U,width:ee,height:oe}).then(function(Te){D.fire(je.ADD_OBJECT,Te)})}},{key:"_onFabricMouseUp",value:function(){var I=this,D=this.getCanvas(),B=this._startPoint.x,F=this._startPoint.y,W=this._shapeObj;W?W&&(js().adjustOriginToCenter(W),this.fire(je.OBJECT_ADDED,this.graphics.createObjectProperties(W))):this.add(this._type,{left:B,top:F,width:PEe,height:LEe}).then(function(U){I.fire(je.ADD_OBJECT,U)}),D.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(I){I.keyCode===Rn.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(I){I.keyCode===Rn.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(I){if(ME(I)==="filter"){var D=jh(I,"patternSourceCanvas"),B=D.patternSourceCanvas,F=Vy(I),W=jh(F,"originalAngle"),U=W.originalAngle;this.graphics.canvasImage.angle!==U&&SEe(I,this.graphics.canvasImage);var ee=I.originX,oe=I.originY;js().adjustOriginToCenter(I),I.width*=I.scaleX,I.height*=I.scaleY,I.rx*=I.scaleX,I.ry*=I.scaleY,I.scaleX=1,I.scaleY=1,yEe(I),nCe(I,{originX:ee,originY:oe}),CEe(B)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(I,D){(D.scaleX!==1||D.scaleY!==1)&&D.addWithUpdate();var B=I.angle,F=I.left,W=I.top;ne.fabric.util.addTransformToObject(I,D.calcTransformMatrix()),this._resetPositionFillFilter(I),I.set({angle:B,left:F,top:W})}}]),O}(Fo);function BEe(H){var N=jEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function jEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var NE=10,gF={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},PE={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},LE={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},qy=1,vF=je.ZOOM_CHANGED,FEe=je.ADD_TEXT,HEe=je.TEXT_EDITING,zEe=je.OBJECT_MODIFIED,yF=je.KEY_DOWN,bF=je.KEY_UP,$Ee=je.HAND_STARTED,UEe=je.HAND_STOPPED,WEe=function(H){fn(O,H);var N=BEe(O);function O(_){var I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De;Y(this,O),De=N.call(this,Xe.ZOOM,_),De.zoomArea=null,De._startPoint=null,De._centerPoints=[],De.zoomLevel=qy,De.zoomMode=xi.DEFAULT,De._listeners={startZoom:G()(I=De._onMouseDownWithZoomMode).call(I,qt(De)),moveZoom:G()(D=De._onMouseMoveWithZoomMode).call(D,qt(De)),stopZoom:G()(B=De._onMouseUpWithZoomMode).call(B,qt(De)),startHand:G()(F=De._onMouseDownWithHandMode).call(F,qt(De)),moveHand:G()(W=De._onMouseMoveWithHandMode).call(W,qt(De)),stopHand:G()(U=De._onMouseUpWithHandMode).call(U,qt(De)),zoomChanged:G()(ee=De._changeScrollState).call(ee,qt(De)),keydown:G()(oe=De._startHandModeWithSpaceBar).call(oe,qt(De)),keyup:G()(Ee=De._endHandModeWithSpaceBar).call(Ee,qt(De))};var $e=De.getCanvas();return De.aspectRatio=$e.width/$e.height,De._verticalScroll=new ne.fabric.Rect(gF),De._horizontalScroll=new ne.fabric.Rect(gF),$e.on(vF,De._listeners.zoomChanged),De.graphics.on(FEe,G()(Te=De._startTextEditingHandler).call(Te,qt(De))),De.graphics.on(HEe,G()(Ae=De._startTextEditingHandler).call(Ae,qt(De))),De.graphics.on(zEe,G()(Oe=De._stopTextEditingHandler).call(Oe,qt(De))),De}return K(O,[{key:"attachKeyboardZoomEvents",value:function(){ne.fabric.util.addListener(document,yF,this._listeners.keydown),ne.fabric.util.addListener(document,bF,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){ne.fabric.util.removeListener(document,yF,this._listeners.keydown),ne.fabric.util.removeListener(document,bF,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(I){this.withSpace||this.isTextEditing||I.keyCode===Rn.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(I){I.keyCode===Rn.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=xi.ZOOM;var I=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new ne.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),I.discardActiveObject(),I.add(this.zoomArea),I.on("mouse:down",this._listeners.startZoom),I.selection=!1,I.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=xi.DEFAULT;var I=this.getCanvas(),D=this._listeners,B=D.startZoom,F=D.moveZoom,W=D.stopZoom;I.selection=!0,I.defaultCursor="auto",I.off({"mouse:down":B,"mouse:move":F,"mouse:up":W}),this._changeObjectsEventedState(!0),I.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=xi.HAND;var I=this.getCanvas();this._changeObjectsEventedState(!1),I.discardActiveObject(),I.off("mouse:down",this._listeners.startHand),I.on("mouse:down",this._listeners.startHand),I.selection=!1,I.defaultCursor="grab",I.fire($Ee)}},{key:"endHandMode",value:function(){this.zoomMode=xi.DEFAULT;var I=this.getCanvas();this._changeObjectsEventedState(!0),I.off("mouse:down",this._listeners.startHand),I.selection=!0,I.defaultCursor="auto",this._startHandPoint=null,I.fire(UEe)}},{key:"_onMouseDownWithZoomMode",value:function(I){var D=I.target,B=I.e;if(!D){var F=this.getCanvas();F.selection=!1,this._startPoint=F.getPointer(B),this.zoomArea.set({width:0,height:0});var W=this._listeners,U=W.moveZoom,ee=W.stopZoom;F.on({"mouse:move":U,"mouse:up":ee})}}},{key:"_onMouseMoveWithZoomMode",value:function(I){var D=I.e,B=this.getCanvas(),F=B.getPointer(D),W=F.x,U=F.y,ee=this.zoomArea,oe=this._startPoint,Ee=Math.abs(W-oe.x),Te=Math.abs(U-oe.y);Ee+Te>NE&&(B.remove(ee),ee.set(this._calcRectDimensionFromPoint(W,U)),B.add(ee))}},{key:"_calcRectDimensionFromPoint",value:function(I,D){var B=this.getCanvas(),F=B.getWidth(),W=B.getHeight(),U=this._startPoint,ee=U.x,oe=U.y,Ee=Math.min,Te=Ee(ee,I),Ae=Ee(oe,D),Oe=St(I,ee,F)-Te,De=St(D,oe,W)-Ae;return{left:Te,top:Ae,width:Oe,height:De}}},{key:"_onMouseUpWithZoomMode",value:function(){var I=this.zoomLevel,D=this.zoomArea,B=this._listeners,F=B.moveZoom,W=B.stopZoom,U=this.getCanvas(),ee=this._getCenterPoint(),oe=ee.x,Ee=ee.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:oe,y:Ee,prevZoomLevel:I,zoomLevel:I+1}),I+=1,U.zoomToPoint({x:oe,y:Ee},I),this._fireZoomChanged(U,I),this.zoomLevel=I),U.off({"mouse:move":F,"mouse:up":W}),U.remove(D),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var I=this.zoomArea,D=I.left,B=I.top,F=I.width,W=I.height,U=this._startPoint,ee=U.x,oe=U.y,Ee=this.aspectRatio;return F<NE&&W<NE?{x:ee,y:oe}:F>W?{x:D+Ee*W/2,y:B+W/2}:{x:D+F/2,y:B+F/Ee/2}}},{key:"zoom",value:function(I){for(var D=I.x,B=I.y,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,W=this.getCanvas(),U=this._centerPoints,ee=U.length-1;ee>=0&&!(U[ee].zoomLevel<F);ee-=1){var oe=U.pop(),Ee=oe.x,Te=oe.y,Ae=oe.prevZoomLevel;W.zoomToPoint({x:Ee,y:Te},Ae),this.zoomLevel=Ae}W.zoomToPoint({x:D,y:B},F),this._isDefaultZoomLevel(F)||this._centerPoints.push({x:D,y:B,zoomLevel:F,prevZoomLevel:this.zoomLevel}),this.zoomLevel=F,this._fireZoomChanged(W,F)}},{key:"zoomOut",value:function(){var I=this._centerPoints;if(I.length){var D=this.getCanvas(),B=I.pop(),F=B.x,W=B.y,U=B.prevZoomLevel;this._isDefaultZoomLevel(U)?D.setViewportTransform([1,0,0,1,0,0]):D.zoomToPoint({x:F,y:W},U),this.zoomLevel=U,this._fireZoomChanged(D,this.zoomLevel)}}},{key:"resetZoom",value:function(){var I=this.getCanvas();I.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=qy,this._centerPoints=[],this._fireZoomChanged(I,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(I){var D=I.x,B=I.y,F=this._centerPoints;if(F.length){var W=this.getCanvas(),U=this.zoomLevel,ee=F.pop(),oe=ee.x,Ee=ee.y,Te=ee.prevZoomLevel,Ae=oe-D,Oe=Ee-B;W.zoomToPoint({x:oe,y:Ee},Te),W.zoomToPoint({x:Ae,y:Oe},U),F.push({x:Ae,y:Oe,prevZoomLevel:Te,zoomLevel:U}),this._fireZoomChanged(W,U)}}},{key:"_onMouseDownWithHandMode",value:function(I){var D=I.target,B=I.e;if(!D){var F=this.getCanvas();if(!(this.zoomLevel<=qy)){F.selection=!1,this._startHandPoint=F.getPointer(B);var W=this._listeners,U=W.moveHand,ee=W.stopHand;F.on({"mouse:move":U,"mouse:up":ee})}}}},{key:"_onMouseMoveWithHandMode",value:function(I){var D=I.e,B=this.getCanvas(),F=B.getPointer(D),W=F.x,U=F.y,ee=W-this._startHandPoint.x,oe=U-this._startHandPoint.y;this._movePointOfZoom({x:ee,y:oe})}},{key:"_onMouseUpWithHandMode",value:function(){var I=this.getCanvas(),D=this._listeners,B=D.moveHand,F=D.stopHand;I.off({"mouse:move":B,"mouse:up":F}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(I){var D=I.viewport,B=I.zoomLevel,F=this.getCanvas();if(F.remove(this._verticalScroll),F.remove(this._horizontalScroll),!this._isDefaultZoomLevel(B)){var W=F.width,U=F.height,ee=D.tl,oe=D.tr,Ee=D.bl,Te=oe.x-ee.x,Ae=Ee.y-ee.y,Oe=Te*Te/W,De=Ae*LE.SIZE,$e=St(ee.x+ee.x/W*Te,ee.x,oe.x-Oe),yt=Ae*LE.MARGIN,wt=Ae*LE.BORDER_RADIUS;this._horizontalScroll.set({left:$e,top:Ee.y-De-yt,width:Oe,height:De,rx:wt,ry:wt});var It=Te*PE.SIZE,tt=Ae*Ae/U,an=St(ee.y+ee.y/U*Ae,oe.y,Ee.y-tt),ii=Te*PE.MARGIN,Xi=Te*PE.BORDER_RADIUS;this._verticalScroll.set({left:oe.x-It-ii,top:an,width:It,height:tt,rx:Xi,ry:Xi}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,D=this.getCanvas();D.forEachObject(function(B){B.evented=I})}},{key:"_addScrollBar",value:function(){var I=this,D=this.getCanvas();D.add(this._horizontalScroll),D.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=p()(function(){D.remove(I._horizontalScroll),D.remove(I._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(I){return I===qy}},{key:"_fireZoomChanged",value:function(I,D){I.fire(vF,{viewport:I.calcViewportBoundaries(),zoomLevel:D})}},{key:"mode",get:function(){return this.zoomMode}}]),O}(Fo),YEe=WEe,wF=Xy.create,xF=Xy.types,GEe=function(){function H(N){Y(this,H),this.name=N}return K(H,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(wF(xF.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(wF(xF.UN_IMPLEMENTATION,"stop"))}}]),H}(),Hl=GEe;function XEe(H){var N=KEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function KEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var ZEe=function(H){fn(O,H);var N=XEe(O);function O(){return Y(this,O),N.call(this,nn.CROPPER)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.CROPPER);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.CROPPER);D.end()}}]),O}(Hl),JEe=ZEe;function QEe(H){var N=VEe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function VEe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var qEe=function(H){fn(O,H);var N=QEe(O);function O(){return Y(this,O),N.call(this,nn.FREE_DRAWING)}return K(O,[{key:"start",value:function(I,D){var B=I.getComponent(Xe.FREE_DRAWING);B.start(D)}},{key:"end",value:function(I){var D=I.getComponent(Xe.FREE_DRAWING);D.end()}}]),O}(Hl),eTe=qEe;function tTe(H){var N=nTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function nTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var rTe=function(H){fn(O,H);var N=tTe(O);function O(){return Y(this,O),N.call(this,nn.LINE_DRAWING)}return K(O,[{key:"start",value:function(I,D){var B=I.getComponent(Xe.LINE);B.start(D)}},{key:"end",value:function(I){var D=I.getComponent(Xe.LINE);D.end()}}]),O}(Hl),iTe=rTe;function oTe(H){var N=aTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function aTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var sTe=function(H){fn(O,H);var N=oTe(O);function O(){return Y(this,O),N.call(this,nn.SHAPE)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.SHAPE);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.SHAPE);D.end()}}]),O}(Hl),lTe=sTe;function cTe(H){var N=uTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function uTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var dTe=function(H){fn(O,H);var N=cTe(O);function O(){return Y(this,O),N.call(this,nn.TEXT)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.TEXT);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.TEXT);D.end()}}]),O}(Hl),fTe=dTe;function hTe(H){var N=pTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function pTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var mTe=function(H){fn(O,H);var N=hTe(O);function O(){return Y(this,O),N.call(this,nn.ICON)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.ICON);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.ICON);D.end()}}]),O}(Hl),gTe=mTe;function vTe(H){var N=yTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function yTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var bTe=function(H){fn(O,H);var N=vTe(O);function O(){return Y(this,O),N.call(this,nn.ZOOM)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.ZOOM);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.ZOOM);D.end()}}]),O}(Hl),wTe=bTe,CF=null;function SF(H){CF=H}function xTe(){return CF}function RE(H,N){var O;if(H.type==="activeSelection"){var _;O=Va()(_=H.getObjects()).call(_,function(I){var D=I.angle,B=I.left,F=I.top,W=I.scaleX,U=I.scaleY,ee=I.width,oe=I.height;ne.fabric.util.addTransformToObject(I,H.calcTransformMatrix());var Ee=N(I);return I.set({angle:D,left:B,top:F,width:ee,height:oe,scaleX:W,scaleY:U}),Ee})}else O=[N(H)];return O}function BE(H,N,O){return O?{id:H,width:N.width,height:N.height,top:N.top,left:N.left,angle:N.angle,scaleX:N.scaleX,scaleY:N.scaleY}:Z()({id:H},N)}function CTe(H){var N=STe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function STe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var kTe=function(H){fn(O,H);var N=CTe(O);function O(_){var I;return Y(this,O),I=N.call(this,Xe.RESIZE,_),I._dimensions=null,I._originalDimensions=null,I}return K(O,[{key:"getCurrentDimensions",value:function(){var I=this.getCanvasImage();if(!this._dimensions&&I){var D=I.width,B=I.height;this._dimensions={width:D,height:B}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(I){this._originalDimensions=I}},{key:"resize",value:function(I){var D=this.getCanvasImage(),B=D.width,F=D.height,W=D.scaleX,U=D.scaleY,ee=I.width,oe=I.height,Ee={scaleX:ee?ee/B:W,scaleY:oe?oe/F:U};return(W!==Ee.scaleX||U!==Ee.scaleY)&&(D.set(Ee).setCoords(),this._dimensions={width:D.width*D.scaleX,height:D.height*D.scaleY}),this.adjustCanvasDimensionBase(),de().resolve()}},{key:"start",value:function(){var I=this.getCurrentDimensions();this.setOriginalDimensions(I)}},{key:"end",value:function(){}}]),O}(Fo),ETe=kTe;function TTe(H){var N=MTe();return function(){var _=bt(H),I;if(N){var D=bt(this).constructor;I=He()(_,arguments,D)}else I=_.apply(this,arguments);return hn(this,I)}}function MTe(){if(typeof Reflect>"u"||!He()||He().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(He()(Boolean,[],function(){})),!0}catch{return!1}}var ITe=function(H){fn(O,H);var N=TTe(O);function O(){return Y(this,O),N.call(this,nn.RESIZE)}return K(O,[{key:"start",value:function(I){var D=I.getComponent(Xe.RESIZE);D.start()}},{key:"end",value:function(I){var D=I.getComponent(Xe.RESIZE);D.end()}}]),O}(Hl),OTe=ITe,ATe=1e3,_Te=800,eb=10,DTe={cssOnly:!0},NTe={backstoreOnly:!0},kF=function(){function H(N){var O,_,I,D,B,F,W,U,ee,oe,Ee,Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=Te.cssMaxWidth,Oe=Te.cssMaxHeight;Y(this,H),this.canvasImage=null,this.cssMaxWidth=Ae||ATe,this.cssMaxHeight=Oe||_Te,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=nn.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:G()(O=this._onMouseDown).call(O,this),onObjectAdded:G()(_=this._onObjectAdded).call(_,this),onObjectRemoved:G()(I=this._onObjectRemoved).call(I,this),onObjectMoved:G()(D=this._onObjectMoved).call(D,this),onObjectScaled:G()(B=this._onObjectScaled).call(B,this),onObjectModified:G()(F=this._onObjectModified).call(F,this),onObjectRotated:G()(W=this._onObjectRotated).call(W,this),onObjectSelected:G()(U=this._onObjectSelected).call(U,this),onPathCreated:G()(ee=this._onPathCreated).call(ee,this),onSelectionCleared:G()(oe=this._onSelectionCleared).call(oe,this),onSelectionCreated:G()(Ee=this._onSelectionCreated).call(Ee,this)},this._setObjectCachingToFalse(),this._setCanvasElement(N),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return K(H,[{key:"destroy",value:function(){var O=this._canvas.wrapperEl;this._canvas.clear(),O.parentNode.removeChild(O),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var O=this.getComponent(Xe.ZOOM);O.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var O=this.getComponent(Xe.ZOOM);O.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(O){var _,I=[];oF()(O)?I=O:I.push(O),(_=this._canvas).add.apply(_,j(I))}},{key:"contains",value:function(O){return this._canvas.contains(O)}},{key:"getObjects",value:function(){var O;return m()(O=this._canvas.getObjects()).call(O)}},{key:"getObject",value:function(O){return this._objects[O]}},{key:"remove",value:function(O){this._canvas.remove(O)}},{key:"removeAll",value:function(O){var _,I=this._canvas,D=m()(_=I.getObjects()).call(_);return I.remove.apply(I,j(this._canvas.getObjects())),O&&I.clear(),D}},{key:"removeObjectById",value:function(O){var _=[],I=this._canvas,D=this.getObject(O),B=D&&D.isType("group")&&!D.isEmpty();return B?(I.discardActiveObject(),D.forEachObject(function(F){_.push(F),I.remove(F)})):I.contains(D)&&(_.push(D),I.remove(D)),_}},{key:"getObjectId",value:function(O){var _=null;for(_ in this._objects)if(this._objects.hasOwnProperty(_)&&O===this._objects[_])return _;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var O=this.getActiveObject(),_=O.type,I=O.left,D=O.top,B=_==="activeSelection";if(B){var F=new ne.fabric.Group(j(O.getObjects()),{left:I,top:D});return this._addFabricObject(F)}return this.getObjectId(O)}},{key:"isReadyRemoveObject",value:function(){var O=this.getActiveObject();return O&&!O.isEditing}},{key:"getActiveObjects",value:function(){var O=this._canvas._activeObject;return O&&O.type==="activeSelection"?O:null}},{key:"getActiveSelectionFromObjects",value:function(O){var _=this.getCanvas();return new ne.fabric.ActiveSelection(O,{canvas:_})}},{key:"setActiveObject",value:function(O){this._canvas.setActiveObject(O)}},{key:"setCropSelectionStyle",value:function(O){this.cropSelectionStyle=O}},{key:"getComponent",value:function(O){return this._componentMap[O]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(O,_){if(this._isSameDrawingMode(O))return!0;this.stopDrawingMode();var I=this._getDrawingModeInstance(O);return I&&I.start&&(I.start(this,_),this._drawingMode=O),!!I}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(nn.NORMAL)){var O=this._getDrawingModeInstance(this.getDrawingMode());O&&O.end&&O.end(this),this._drawingMode=nn.NORMAL}}},{key:"zoom",value:function(O,_){var I=O.x,D=O.y,B=this.getComponent(Xe.ZOOM);B.zoom({x:I,y:D},_)}},{key:"getZoomMode",value:function(){var O=this.getComponent(Xe.ZOOM);return O.mode}},{key:"startZoomInMode",value:function(){var O=this.getComponent(Xe.ZOOM);O.startZoomInMode()}},{key:"endZoomInMode",value:function(){var O=this.getComponent(Xe.ZOOM);O.endZoomInMode()}},{key:"zoomOut",value:function(){var O=this.getComponent(Xe.ZOOM);O.zoomOut()}},{key:"startHandMode",value:function(){var O=this.getComponent(Xe.ZOOM);O.startHandMode()}},{key:"endHandMode",value:function(){var O=this.getComponent(Xe.ZOOM);O.endHandMode()}},{key:"resetZoom",value:function(){var O=this.getComponent(Xe.ZOOM);O.resetZoom()}},{key:"toDataURL",value:function(O){var _=this.getComponent(Xe.CROPPER);_.changeVisibility(!1);var I=this._canvas&&this._canvas.toDataURL(O);return _.changeVisibility(!0),I}},{key:"setCanvasImage",value:function(O,_){_&&Ge(_),this.imageName=O,this.canvasImage=_}},{key:"setCssMaxDimension",value:function(O){this.cssMaxWidth=O.width||this.cssMaxWidth,this.cssMaxHeight=O.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;O||(O=this.canvasImage);var _=O.getBoundingRect(),I=_.width,D=_.height,B=this._calcMaxDimension(I,D);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(B.width,"px"),"max-height":"".concat(B.height,"px")}),this.setCanvasBackstoreDimension({width:I,height:D}),this._canvas.centerObject(O)}},{key:"setCanvasCssDimension",value:function(O){this._canvas.setDimensions(O,DTe)}},{key:"setCanvasBackstoreDimension",value:function(O){this._canvas.setDimensions(O,NTe)}},{key:"setImageProperties",value:function(O,_){var I=this.canvasImage;I&&(I.set(O).setCoords(),_&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(O){var _,I=this,D=G()(_=this._callbackAfterLoadingImageObject).call(_,this);return new(de())(function(B){ne.fabric.Image.fromURL(O,function(F){D(F),B(I.createObjectProperties(F))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Xe.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(O){this.getComponent(Xe.CROPPER).setCropzoneRect(O)}},{key:"getCroppedImageData",value:function(O){return this.getComponent(Xe.CROPPER).getCroppedImageData(O)}},{key:"setBrush",value:function(O){var _=this._drawingMode,I=Xe.FREE_DRAWING;_===nn.LINE_DRAWING&&(I=Xe.LINE),this.getComponent(I).setBrush(O)}},{key:"setDrawingShape",value:function(O,_){this.getComponent(Xe.SHAPE).setStates(O,_)}},{key:"setIconStyle",value:function(O,_){this.getComponent(Xe.ICON).setStates(O,_)}},{key:"registerPaths",value:function(O){this.getComponent(Xe.ICON).registerPaths(O)}},{key:"changeCursor",value:function(O){var _=this.getCanvas();_.defaultCursor=O,_.renderAll()}},{key:"hasFilter",value:function(O){return this.getComponent(Xe.FILTER).hasFilter(O)}},{key:"setSelectionStyle",value:function(O){Z()(pa.SELECTION_STYLE,O)}},{key:"setObjectProperties",value:function(O,_){var I=this.getObject(O),D=Z()({},_);return I.set(D),I.setCoords(),this.getCanvas().renderAll(),D}},{key:"getObjectProperties",value:function(O,_){var I=this.getObject(O),D={};return ie()(_)?D[_]=I[_]:oF()(_)?Fh()(_,function(B){D[B]=I[B]}):Zy()(_,function(B,F){D[F]=I[F]}),D}},{key:"getObjectPosition",value:function(O,_,I){var D=this.getObject(O);return D?D.getPointByOrigin(_,I):null}},{key:"setObjectPosition",value:function(O,_){var I=this.getObject(O),D=_.x,B=_.y,F=_.originX,W=_.originY;if(!I)return!1;var U=I.getPointByOrigin(F,W),ee=I.getPointByOrigin("center","center"),oe=ee.x-U.x,Ee=ee.y-U.y;return I.set({left:D+oe,top:B+Ee}),I.setCoords(),!0}},{key:"getCanvasSize",value:function(){var O=this.getCanvasImage();return{width:O?O.width:0,height:O?O.height:0}}},{key:"createStaticCanvas",value:function(){var O=new ne.fabric.StaticCanvas;return O.set({enableRetinaScaling:!1}),O}},{key:"_getDrawingModeInstance",value:function(O){return this._drawingModeMap[O]}},{key:"_setObjectCachingToFalse",value:function(){ne.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(O){var _,I;O.nodeType?_=O:_=document.querySelector(O),_.nodeName.toUpperCase()!=="CANVAS"&&(I=document.createElement("canvas"),_.appendChild(I)),this._canvas=new ne.fabric.Canvas(I,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new JEe),this._register(this._drawingModeMap,new eTe),this._register(this._drawingModeMap,new iTe),this._register(this._drawingModeMap,new lTe),this._register(this._drawingModeMap,new fTe),this._register(this._drawingModeMap,new gTe),this._register(this._drawingModeMap,new wTe),this._register(this._drawingModeMap,new OTe)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new lke(this)),this._register(this._componentMap,new Eke(this)),this._register(this._componentMap,new Oke(this)),this._register(this._componentMap,new Nke(this)),this._register(this._componentMap,new Bke(this)),this._register(this._componentMap,new Yke(this)),this._register(this._componentMap,new Vke(this)),this._register(this._componentMap,new rEe(this)),this._register(this._componentMap,new mEe(this)),this._register(this._componentMap,new REe(this)),this._register(this._componentMap,new YEe(this)),this._register(this._componentMap,new ETe(this))}},{key:"_register",value:function(O,_){O[_.getName()]=_}},{key:"_isSameDrawingMode",value:function(O){return this.getDrawingMode()===O}},{key:"_calcMaxDimension",value:function(O,_){var I=this.cssMaxWidth/O,D=this.cssMaxHeight/_,B=Math.min(O,this.cssMaxWidth),F=Math.min(_,this.cssMaxHeight);return I<1&&I<D?(B=O*I,F=_*I):D<1&&D<I&&(B=O*D,F=_*D),{width:Math.floor(B),height:Math.floor(F)}}},{key:"_callbackAfterLoadingImageObject",value:function(O){var _=this.getCanvasImage().getCenterPoint();O.set(pa.SELECTION_STYLE),O.set({left:_.x,top:_.y,crossOrigin:"Anonymous"}),this.getCanvas().add(O).setActiveObject(O)}},{key:"_attachCanvasEvents",value:function(){var O=this._canvas,_=this._handler;O.on({"mouse:down":_.onMouseDown,"object:added":_.onObjectAdded,"object:removed":_.onObjectRemoved,"object:moving":_.onObjectMoved,"object:scaling":_.onObjectScaled,"object:modified":_.onObjectModified,"object:rotating":_.onObjectRotated,"path:created":_.onPathCreated,"selection:cleared":_.onSelectionCleared,"selection:created":_.onSelectionCreated,"selection:updated":_.onObjectSelected})}},{key:"_onMouseDown",value:function(O){var _=this,I=O.e,D=O.target,B=this._canvas.getPointer(I);if(D){var F=D.type,W=RE(D,function(U){return BE(_.getObjectId(U),U,F==="activeSelection")});SF(W)}this.fire(je.MOUSE_DOWN,I,B)}},{key:"_onObjectAdded",value:function(O){var _=O.target;_.isType("cropzone")||this._addFabricObject(_)}},{key:"_onObjectRemoved",value:function(O){var _=O.target;this._removeFabricObject(Ge(_))}},{key:"_onObjectMoved",value:function(O){var _=this;this._lazyFire(je.OBJECT_MOVED,function(I){return _.createObjectProperties(I)},O.target)}},{key:"_onObjectScaled",value:function(O){var _=this;this._lazyFire(je.OBJECT_SCALED,function(I){return _.createObjectProperties(I)},O.target)}},{key:"_onObjectModified",value:function(O){var _=O.target;if(_.type==="activeSelection"){var I=_.getObjects();Se()(I).call(I,function(D){return D.fire("modifiedInGroup",_)})}this.fire(je.OBJECT_MODIFIED,_,this.getObjectId(_))}},{key:"_onObjectRotated",value:function(O){var _=this;this._lazyFire(je.OBJECT_ROTATED,function(I){return _.createObjectProperties(I)},O.target)}},{key:"_lazyFire",value:function(O,_,I){var D=this,B=I&&I.canvasEventDelegation,F=B?I.canvasEventDelegation(O):"none";F==="unregistered"&&I.canvasEventRegister(O,function(W){D.fire(O,_(W))}),F==="none"&&this.fire(O,_(I))}},{key:"_onObjectSelected",value:function(O){var _=O.target,I=this.createObjectProperties(_);this.fire(je.OBJECT_ACTIVATED,I)}},{key:"_onPathCreated",value:function(O){var _=O.path.getCenterPoint(),I=_.x,D=_.y;O.path.set(Z()({left:I,top:D},pa.SELECTION_STYLE));var B=this.createObjectProperties(O.path);this.fire(je.ADD_OBJECT,B)}},{key:"_onSelectionCleared",value:function(){this.fire(je.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(O){var _=O.target,I=this.createObjectProperties(_);this.fire(je.OBJECT_ACTIVATED,I),this.fire(je.SELECTION_CREATED,O.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(O){this._canvas.forEachObject(function(_){_.selectable=O,_.hoverCursor=O?"move":"crosshair"})}},{key:"createObjectProperties",value:function(O){var _=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],I={id:Ge(O),type:O.type};if(Z()(I,dn(O,_)),Gy(["i-text","text"],O.type))Z()(I,this._createTextProperties(O,I));else if(Gy(["rect","triangle","circle"],O.type)){var D=this.getComponent(Xe.SHAPE);Z()(I,{fill:D.makeFillPropertyForUserEvent(O)})}return I}},{key:"_createTextProperties",value:function(O){var _=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],I={};return Z()(I,dn(O,_)),I}},{key:"_addFabricObject",value:function(O){var _=Ge(O);return this._objects[_]=O,_}},{key:"_removeFabricObject",value:function(O){delete this._objects[O]}},{key:"resetTargetObjectForCopyPaste",value:function(){var O=this.getActiveObject();O&&(this.targetObjectForCopyPaste=O)}},{key:"pasteObject",value:function(){var O=this;if(!this.targetObjectForCopyPaste)return de().resolve([]);var _=this.targetObjectForCopyPaste,I=_.type==="activeSelection",D=I?_.getObjects():[_],B=null;return this.discardSelection(),this._cloneObject(D).then(function(F){if(F.length>1)B=O.getActiveSelectionFromObjects(F);else{var W=se(F,1);B=W[0]}O.targetObjectForCopyPaste=B,O.setActiveObject(B)})}},{key:"_cloneObject",value:function(O){var _=this,I=Va()(O).call(O,function(D){return _._cloneObjectItem(D)});return de().all(I)}},{key:"_cloneObjectItem",value:function(O){var _=this;return this._copyFabricObjectForPaste(O).then(function(I){var D=_.createObjectProperties(I);return _.add(I),_.fire(je.ADD_OBJECT,D),I})}},{key:"_copyFabricObjectForPaste",value:function(O){var _=this,I=function(B,F){return F?B-eb:B+eb};return this._copyFabricObject(O).then(function(D){var B=D.left,F=D.top,W=D.width,U=D.height,ee=_.getCanvasSize(),oe=ee.width,Ee=ee.height,Te=B+W/2,Ae=F+U/2;return D.set(Z()({left:I(B,Te+eb>oe),top:I(F,Ae+eb>Ee)},pa.SELECTION_STYLE)),D})}},{key:"_copyFabricObject",value:function(O){var _=this;return new(de())(function(I){O.clone(function(D){var B=_.getComponent(Xe.SHAPE);Bj(D)&&B.processForCopiedObject(D,O),I(D)})})}},{key:"getCurrentDimensions",value:function(){var O=this.getComponent(Xe.RESIZE);return O.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var O=this.getComponent(Xe.RESIZE);return O.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(O){var _=this.getComponent(Xe.RESIZE);_.setOriginalDimensions(O)}},{key:"resize",value:function(O){var _=this.getComponent(Xe.RESIZE);return _.resize(O)}}]),H}();ke().mixin(kF);var PTe=kF,LTe=je.MOUSE_DOWN,RTe=je.OBJECT_MOVED,BTe=je.OBJECT_SCALED,jTe=je.OBJECT_ACTIVATED,FTe=je.OBJECT_ROTATED,EF=je.OBJECT_ADDED,HTe=je.OBJECT_MODIFIED,zTe=je.ADD_TEXT,$Te=je.ADD_OBJECT,UTe=je.TEXT_EDITING,WTe=je.TEXT_CHANGED,YTe=je.ICON_CREATE_RESIZE,GTe=je.ICON_CREATE_END,TF=je.SELECTION_CLEARED,MF=je.SELECTION_CREATED,XTe=je.ADD_OBJECT_AFTER,jE=function(){function H(N,O){var _,I,D,B,F,W,U,ee,oe,Ee,Te,Ae,Oe,De,$e,yt;if(Y(this,H),O=Z()({includeUI:!1,usageStatistics:!0},O),this.mode=null,this.activeObjectId=null,O.includeUI){var wt=O.includeUI;wt.usageStatistics=O.usageStatistics,this.ui=new VSe(N,wt,this.getActions()),O=this.ui.setUiDefaultSelectionStyle(O)}this._invoker=new gCe,this._graphics=new PTe(this.ui?this.ui.getEditorArea():N,{cssMaxWidth:O.cssMaxWidth,cssMaxHeight:O.cssMaxHeight}),this._handlers={keydown:G()(_=this._onKeyDown).call(_,this),mousedown:G()(I=this._onMouseDown).call(I,this),objectActivated:G()(D=this._onObjectActivated).call(D,this),objectMoved:G()(B=this._onObjectMoved).call(B,this),objectScaled:G()(F=this._onObjectScaled).call(F,this),objectRotated:G()(W=this._onObjectRotated).call(W,this),objectAdded:G()(U=this._onObjectAdded).call(U,this),objectModified:G()(ee=this._onObjectModified).call(ee,this),createdPath:this._onCreatedPath,addText:G()(oe=this._onAddText).call(oe,this),addObject:G()(Ee=this._onAddObject).call(Ee,this),textEditing:G()(Te=this._onTextEditing).call(Te,this),textChanged:G()(Ae=this._onTextChanged).call(Ae,this),iconCreateResize:G()(Oe=this._onIconCreateResize).call(Oe,this),iconCreateEnd:G()(De=this._onIconCreateEnd).call(De,this),selectionCleared:G()($e=this._selectionCleared).call($e,this),selectionCreated:G()(yt=this._selectionCreated).call(yt,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(O.selectionStyle,{applyCropSelectionStyle:O.applyCropSelectionStyle,applyGroupSelectionStyle:O.applyGroupSelectionStyle}),O.usageStatistics&&Ar(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),ne.fabric.enableGLFiltering=!1}return K(H,[{key:"_attachColorPickerInputBoxEvents",value:function(){var O=this;this.ui.on(je.INPUT_BOX_EDITING_STARTED,function(){O.isColorPickerInputBoxEditing=!0}),this.ui.on(je.INPUT_BOX_EDITING_STOPPED,function(){O.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(je.INPUT_BOX_EDITING_STARTED),this.ui.off(je.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(O,_){var I=_.applyCropSelectionStyle,D=_.applyGroupSelectionStyle;O&&this._graphics.setSelectionStyle(O),I&&this._graphics.setCropSelectionStyle(O),D&&this.on("selectionCreated",function(B){B.type==="activeSelection"&&B.set(O)})}},{key:"_attachInvokerEvents",value:function(){var O,_,I=this,D=je.UNDO_STACK_CHANGED,B=je.REDO_STACK_CHANGED,F=je.EXECUTE_COMMAND,W=je.AFTER_UNDO,U=je.AFTER_REDO,ee=je.HAND_STARTED,oe=je.HAND_STOPPED;if(this._invoker.on(D,G()(O=this.fire).call(O,this,D)),this._invoker.on(B,G()(_=this.fire).call(_,this,B)),this.ui){var Ee=this._graphics.getCanvas();this._invoker.on(F,function(Te){return I.ui.fire(F,Te)}),this._invoker.on(W,function(Te){return I.ui.fire(W,Te)}),this._invoker.on(U,function(Te){return I.ui.fire(U,Te)}),Ee.on(ee,function(){return I.ui.fire(ee)}),Ee.on(oe,function(){return I.ui.fire(oe)})}}},{key:"_attachGraphicsEvents",value:function(){var O;this._graphics.on((O={},$(O,LTe,this._handlers.mousedown),$(O,RTe,this._handlers.objectMoved),$(O,BTe,this._handlers.objectScaled),$(O,FTe,this._handlers.objectRotated),$(O,jTe,this._handlers.objectActivated),$(O,EF,this._handlers.objectAdded),$(O,HTe,this._handlers.objectModified),$(O,zTe,this._handlers.addText),$(O,$Te,this._handlers.addObject),$(O,UTe,this._handlers.textEditing),$(O,WTe,this._handlers.textChanged),$(O,YTe,this._handlers.iconCreateResize),$(O,GTe,this._handlers.iconCreateEnd),$(O,TF,this._handlers.selectionCleared),$(O,MF,this._handlers.selectionCreated),O))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(O){var _=O.ctrlKey,I=O.keyCode,D=O.metaKey,B=_||D;B&&(I===Rn.C?this._graphics.resetTargetObjectForCopyPaste():I===Rn.V?(this._graphics.pasteObject(),this.clearRedoStack()):I===Rn.Z?this.undo().catch(function(){}):I===Rn.Y&&this.redo().catch(function(){}));var F=I===Rn.BACKSPACE||I===Rn.DEL,W=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&W&&F&&(O.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var O=this._graphics.getActiveObjectIdForRemove();this.removeObject(O)}},{key:"_onMouseDown",value:function(O,_){this.fire(je.MOUSE_DOWN,O,_)}},{key:"_pushAddObjectCommand",value:function(O){var _=Bn.create(ft.ADD_OBJECT,this._graphics,O);this._invoker.pushUndoStack(_)}},{key:"_pushModifyObjectCommand",value:function(O){var _=this,I=O.type,D=RE(O,function(F){return BE(_._graphics.getObjectId(F),F,I==="activeSelection")}),B=Bn.create(ft.CHANGE_SELECTION,this._graphics,D);B.execute(this._graphics,D),this._invoker.pushUndoStack(B)}},{key:"_onObjectActivated",value:function(O){this.fire(je.OBJECT_ACTIVATED,O)}},{key:"_onObjectMoved",value:function(O){this.fire(je.OBJECT_MOVED,O)}},{key:"_onObjectScaled",value:function(O){this.fire(je.OBJECT_SCALED,O)}},{key:"_onObjectRotated",value:function(O){this.fire(je.OBJECT_ROTATED,O)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(ft.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(O){this._graphics.changeSelectableAll(O)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(O){for(var _,I,D,B=arguments.length,F=new Array(B>1?B-1:0),W=1;W<B;W++)F[W-1]=arguments[W];var U=J()(_=[this._graphics]).call(_,F);return(I=this._invoker).execute.apply(I,J()(D=[O]).call(D,j(U)))}},{key:"executeSilent",value:function(O){for(var _,I,D,B=arguments.length,F=new Array(B>1?B-1:0),W=1;W<B;W++)F[W-1]=arguments[W];var U=J()(_=[this._graphics]).call(_,F);return(I=this._invoker).executeSilent.apply(I,J()(D=[O]).call(D,j(U)))}},{key:"undo",value:function(){for(var O=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,I=de().resolve(),D=0;D<_;D+=1)I=I.then(function(){return O._invoker.undo()});return I}},{key:"redo",value:function(){for(var O=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,I=de().resolve(),D=0;D<_;D+=1)I=I.then(function(){return O._invoker.redo()});return I}},{key:"zoom",value:function(O){var _=O.x,I=O.y,D=O.zoomLevel;this._graphics.zoom({x:_,y:I},D)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(O,_){if(!O)return de().reject(un.invalidParameters);var I=V().createObjectURL(O);return _=_||O.name,this.loadImageFromURL(I,_).then(function(D){return V().revokeObjectURL(O),D})}},{key:"loadImageFromURL",value:function(O,_){return!_||!O?de().reject(un.invalidParameters):this.execute(ft.LOAD_IMAGE,_,O)}},{key:"addImageObject",value:function(O){return O?this.execute(ft.ADD_IMAGE_OBJECT,O):de().reject(un.invalidParameters)}},{key:"startDrawingMode",value:function(O,_){return this._graphics.startDrawingMode(O,_)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(O){var _=this._graphics.getCroppedImageData(O);return _?this.loadImageFromURL(_.url,_.imageName):de().reject(un.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(O){this._graphics.setCropzoneRect(O)}},{key:"_flip",value:function(O){return this.execute(ft.FLIP_IMAGE,O)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(O,_,I){var D=null;return I?D=this.executeSilent(ft.ROTATE_IMAGE,O,_):D=this.execute(ft.ROTATE_IMAGE,O,_),D}},{key:"rotate",value:function(O,_){return this._rotate("rotate",O,_)}},{key:"setAngle",value:function(O,_){return this._rotate("setAngle",O,_)}},{key:"setBrush",value:function(O){this._graphics.setBrush(O)}},{key:"setDrawingShape",value:function(O,_){this._graphics.setDrawingShape(O,_)}},{key:"setDrawingIcon",value:function(O,_){this._graphics.setIconStyle(O,_)}},{key:"addShape",value:function(O,_){return _=_||{},this._setPositions(_),this.execute(ft.ADD_SHAPE,O,_)}},{key:"changeShape",value:function(O,_,I){var D=I?"executeSilent":"execute";return this[D](ft.CHANGE_SHAPE,O,_)}},{key:"addText",value:function(O,_){return O=O||"",_=_||{},this.execute(ft.ADD_TEXT,O,_)}},{key:"changeText",value:function(O,_){return _=_||"",this.execute(ft.CHANGE_TEXT,O,_)}},{key:"changeTextStyle",value:function(O,_,I){var D=I?"executeSilent":"execute";return this[D](ft.CHANGE_TEXT_STYLE,O,_)}},{key:"_changeActivateMode",value:function(O){O!=="ICON"&&this.getDrawingMode()!==O&&this.startDrawingMode(O)}},{key:"_onTextChanged",value:function(O){this.fire(je.TEXT_CHANGED,O)}},{key:"_onIconCreateResize",value:function(O){this.fire(je.ICON_CREATE_RESIZE,O)}},{key:"_onIconCreateEnd",value:function(O){this.fire(je.ICON_CREATE_END,O)}},{key:"_onTextEditing",value:function(){this.fire(je.TEXT_EDITING)}},{key:"_onAddText",value:function(O){this.fire(je.ADD_TEXT,{originPosition:O.originPosition,clientPosition:O.clientPosition})}},{key:"_onAddObject",value:function(O){var _=this._graphics.getObject(O.id);this._invoker.fire(je.EXECUTE_COMMAND,IE(_.type)),this._pushAddObjectCommand(_)}},{key:"_onObjectAdded",value:function(O){this.fire(EF,O),this.fire(XTe,O)}},{key:"_onObjectModified",value:function(O){O.type!==it.CROPZONE&&(this._invoker.fire(je.EXECUTE_COMMAND,IE(O.type)),this._pushModifyObjectCommand(O))}},{key:"_selectionCleared",value:function(){this.fire(TF)}},{key:"_selectionCreated",value:function(O){this.fire(MF,O)}},{key:"registerIcons",value:function(O){this._graphics.registerPaths(O)}},{key:"changeCursor",value:function(O){this._graphics.changeCursor(O)}},{key:"addIcon",value:function(O,_){return _=_||{},this._setPositions(_),this.execute(ft.ADD_ICON,O,_)}},{key:"changeIconColor",value:function(O,_){return this.execute(ft.CHANGE_ICON_COLOR,O,_)}},{key:"removeObject",value:function(O){var _=this._graphics.getObject(O),I=_.type;return this.execute(ft.REMOVE_OBJECT,O,IE(I))}},{key:"hasFilter",value:function(O){return this._graphics.hasFilter(O)}},{key:"removeFilter",value:function(O){return this.execute(ft.REMOVE_FILTER,O)}},{key:"applyFilter",value:function(O,_,I){var D=I?"executeSilent":"execute";return this[D](ft.APPLY_FILTER,O,_)}},{key:"toDataURL",value:function(O){return this._graphics.toDataURL(O)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(O){return O?this.execute(ft.RESIZE_CANVAS_DIMENSION,O):de().reject(un.invalidParameters)}},{key:"destroy",value:function(){var O=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),le()(this,function(_,I){O[I]=null},this)}},{key:"_setPositions",value:function(O){var _=this._graphics.getCenter();X()(O.left)&&(O.left=_.left),X()(O.top)&&(O.top=_.top)}},{key:"setObjectProperties",value:function(O,_){return this.execute(ft.SET_OBJECT_PROPERTIES,O,_)}},{key:"setObjectPropertiesQuietly",value:function(O,_){this._graphics.setObjectProperties(O,_)}},{key:"getObjectProperties",value:function(O,_){var I=this._graphics.getObject(O);return I?this._graphics.getObjectProperties(O,_):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(O,_,I){return this._graphics.getObjectPosition(O,_,I)}},{key:"setObjectPosition",value:function(O,_){return this.execute(ft.SET_OBJECT_POSITION,O,_)}},{key:"resize",value:function(O){return this.execute(ft.RESIZE_IMAGE,O)}}]),H}();eke.mixin(jE),ke().mixin(jE);var KTe=jE,ZTe=Xe.ICON,JTe={name:ft.ADD_ICON,execute:function(N,O,_){var I=this,D=N.getComponent(ZTe);return D.add(O,_).then(function(B){return I.undoData.object=N.getObject(B.id),B})},undo:function(N){return N.remove(this.undoData.object),de().resolve()}};Bn.register(JTe);var QTe={name:ft.ADD_IMAGE_OBJECT,execute:function(N,O){var _=this;return N.addImageObject(O).then(function(I){return _.undoData.object=N.getObject(I.id),I})},undo:function(N){return N.remove(this.undoData.object),de().resolve()}};Bn.register(QTe);var VTe={name:ft.ADD_OBJECT,execute:function(N,O){return new(de())(function(_,I){N.contains(O)?I(un.addedObject):(N.add(O),_(O))})},undo:function(N,O){return new(de())(function(_,I){N.contains(O)?(N.remove(O),_(O)):I(un.noObject)})}};Bn.register(VTe);var qTe=Xe.SHAPE,eMe={name:ft.ADD_SHAPE,execute:function(N,O,_){var I=this,D=N.getComponent(qTe);return D.add(O,_).then(function(B){var F=B.id;return I.undoData.object=N.getObject(F),B})},undo:function(N){return N.remove(this.undoData.object),de().resolve()}};Bn.register(eMe);var tMe=Xe.TEXT,nMe={name:ft.ADD_TEXT,execute:function(N,O,_){var I=this,D=N.getComponent(tMe);if(this.undoData.object){var B=this.undoData.object;return new(de())(function(F,W){N.contains(B)?W(un.redo):(N.add(B),F(B))})}return D.add(O,_).then(function(F){var W=F.id,U=N.getObject(W);return I.undoData.object=U,SF(RE(U,function(){return BE(W,U,!1)})),F})},undo:function(N){return N.remove(this.undoData.object),de().resolve()}};Bn.register(nMe);var IF=Xe.FILTER,OF=null;function rMe(H,N,O){var _={};return H==="mask"&&(_.object=O.mask),_.options=N,_}var iMe={name:ft.APPLY_FILTER,execute:function(N,O,_,I){var D=N.getComponent(IF);if(O==="mask"){var B=N.getObject(_.maskObjId);if(!(B&&B.isType("image")))return de().reject(un.invalidParameters);Z()(_,{mask:B}),N.remove(_.mask)}if(!this.isRedo){var F=D.getOptions(O),W=rMe(O,F,_);OF=this.setUndoData(W,OF,I)}return D.add(O,_)},undo:function(N,O){var _=N.getComponent(IF);if(O==="mask"){var I=this.undoData.object;return N.add(I),N.setActiveObject(I),_.remove(O)}return this.undoData.options?_.add(O,this.undoData.options):_.remove(O)}};Bn.register(iMe);var AF=Xe.ICON,oMe={name:ft.CHANGE_ICON_COLOR,execute:function(N,O,_){var I=this;return new(de())(function(D,B){var F=N.getComponent(AF),W=N.getObject(O);W||B(un.noObject),I.undoData.object=W,I.undoData.color=F.getColor(W),F.setColor(_,W),D()})},undo:function(N){var O=N.getComponent(AF),_=this.undoData,I=_.object,D=_.color;return O.setColor(D,I),de().resolve()}};Bn.register(oMe);var _F=Xe.SHAPE,DF=null;function aMe(H,N){var O={object:N,options:{}};return Zy()(H,function(_,I){O.options[I]=N[I]}),O}var sMe={name:ft.CHANGE_SHAPE,execute:function(N,O,_,I){var D=N.getComponent(_F),B=N.getObject(O);if(!B)return de().reject(un.noObject);if(!this.isRedo){var F=aMe(_,B);DF=this.setUndoData(F,DF,I)}return D.change(B,_)},undo:function(N){var O=N.getComponent(_F),_=this.undoData,I=_.object,D=_.options;return O.change(I,D)}};Bn.register(sMe);var NF=Xe.TEXT,lMe={name:ft.CHANGE_TEXT,execute:function(N,O,_){var I=N.getComponent(NF),D=N.getObject(O);return D?(this.undoData.object=D,this.undoData.text=I.getText(D),I.change(D,_)):de().reject(un.noObject)},undo:function(N){var O=N.getComponent(NF),_=this.undoData,I=_.object,D=_.text;return O.change(I,D)}};Bn.register(lMe);var PF=Xe.TEXT,LF=null;function cMe(H,N){var O={object:N,styles:{}};return Zy()(H,function(_,I){var D=N[I];O.styles[I]=D}),O}var uMe={name:ft.CHANGE_TEXT_STYLE,execute:function(N,O,_,I){var D=N.getComponent(PF),B=N.getObject(O);if(!B)return de().reject(un.noObject);if(!this.isRedo){var F=cMe(_,B);LF=this.setUndoData(F,LF,I)}return D.setStyle(B,_)},undo:function(N){var O=N.getComponent(PF),_=this.undoData,I=_.object,D=_.styles;return O.setStyle(I,D)}};Bn.register(uMe);var dMe={name:ft.CLEAR_OBJECTS,execute:function(N){var O=this;return new(de())(function(_){O.undoData.objects=N.removeAll(),_()})},undo:function(N){return N.add(this.undoData.objects),de().resolve()}};Bn.register(dMe);var RF=Xe.FLIP,fMe={name:ft.FLIP_IMAGE,execute:function(N,O){var _=N.getComponent(RF);return this.undoData.setting=_.getCurrentSetting(),_[O]()},undo:function(N){var O=N.getComponent(RF);return O.set(this.undoData.setting)}};Bn.register(fMe);var BF=Xe.IMAGE_LOADER,hMe={name:ft.LOAD_IMAGE,execute:function(N,O,_){var I,D=N.getComponent(BF),B=D.getCanvasImage(),F=B?B.width:0,W=B?B.height:0,U=pd()(I=N.removeAll(!0)).call(I,function(ee){return ee.type!=="cropzone"});return Se()(U).call(U,function(ee){ee.evented=!0}),this.undoData={name:D.getImageName(),image:B,objects:U},D.load(O,_).then(function(ee){return{oldWidth:F,oldHeight:W,newWidth:ee.width,newHeight:ee.height}})},undo:function(N){var O=N.getComponent(BF),_=this.undoData,I=_.objects,D=_.name,B=_.image;return N.removeAll(!0),N.add(I),O.load(D,B)}};Bn.register(hMe);var jF=Xe.FILTER,pMe={name:ft.REMOVE_FILTER,execute:function(N,O){var _=N.getComponent(jF);return this.undoData.options=_.getOptions(O),_.remove(O)},undo:function(N,O){var _=N.getComponent(jF),I=this.undoData.options;return _.add(O,I)}};Bn.register(pMe);var mMe={name:ft.REMOVE_OBJECT,execute:function(N,O){var _=this;return new(de())(function(I,D){_.undoData.objects=N.removeObjectById(O),_.undoData.objects.length?I():D(un.noObject)})},undo:function(N){return N.add(this.undoData.objects),de().resolve()}};Bn.register(mMe);var gMe={name:ft.RESIZE_CANVAS_DIMENSION,execute:function(N,O){var _=this;return new(de())(function(I){_.undoData.size={width:N.cssMaxWidth,height:N.cssMaxHeight},N.setCssMaxDimension(O),N.adjustCanvasDimension(),I()})},undo:function(N){return N.setCssMaxDimension(this.undoData.size),N.adjustCanvasDimension(),de().resolve()}};Bn.register(gMe);var FF=Xe.ROTATION,HF=null;function vMe(H){return{angle:H.getCurrentAngle()}}var yMe={name:ft.ROTATE_IMAGE,execute:function(N,O,_,I){var D=N.getComponent(FF);if(!this.isRedo){var B=vMe(D);HF=this.setUndoData(B,HF,I)}return D[O](_)},undo:function(N){var O=N.getComponent(FF),_=se(this.args,3),I=_[1],D=_[2];return I==="setAngle"?O[I](this.undoData.angle):O.rotate(-D)}};Bn.register(yMe);var bMe={name:ft.SET_OBJECT_PROPERTIES,execute:function(N,O,_){var I=this,D=N.getObject(O);return D?(this.undoData.props={},Zy()(_,function(B,F){I.undoData.props[F]=D[F]}),N.setObjectProperties(O,_),de().resolve()):de().reject(un.noObject)},undo:function(N,O){var _=this.undoData.props;return N.setObjectProperties(O,_),de().resolve()}};Bn.register(bMe);var wMe={name:ft.SET_OBJECT_POSITION,execute:function(N,O,_){var I=N.getObject(O);return I?(this.undoData.objectId=O,this.undoData.props=N.getObjectProperties(O,["left","top"]),N.setObjectPosition(O,_),N.renderAll(),de().resolve()):de().reject(un.noObject)},undo:function(N){var O=this.undoData,_=O.objectId,I=O.props;return N.setObjectProperties(_,I),N.renderAll(),de().resolve()}};Bn.register(wMe);var xMe={name:ft.CHANGE_SELECTION,execute:function(N,O){return this.isRedo?Se()(O).call(O,function(_){N.setObjectProperties(_.id,_)}):this.undoData=xTe(),de().resolve()},undo:function(N){var O;return Se()(O=this.undoData).call(O,function(_){N.setObjectProperties(_.id,_)}),de().resolve()}};Bn.register(xMe);var zF=Xe.RESIZE,CMe={name:ft.RESIZE_IMAGE,execute:function(N,O){var _=N.getComponent(zF),I=_.getOriginalDimensions();return I||(I=_.getCurrentDimensions()),this.undoData.dimensions=I,_.resize(O)},undo:function(N){var O=N.getComponent(zF);return O.resize(this.undoData.dimensions)}};Bn.register(CMe);var SMe=KTe}(),a=a.default,a}()})}(lx)),lx.exports}var bQ=yQ();const wQ=ec(bQ),xQ=u.defineComponent({__name:"Editor",props:u.mergeModels({includeUi:{type:Boolean,default:!0},translator:{},container:{},options:{type:Object,default(){return{cssMaxWidth:700,cssMaxHeight:500}}},events:{type:Object,default(){return{}}}},{modelValue:{},modelModifiers:{}}),emits:u.mergeModels(["save","initialized"],["update:modelValue"]),setup(t,{emit:e}){const n={includeUI:{initMenu:""}},r=t,i=u.useModel(t,"modelValue"),o=e,a=u.useTemplateRef("el"),s=u.useTemplateRef("saveBtn");let c,l;const d=x=>{let k=r.events;Object.keys(k).forEach(E=>{if(/^on[A-Z]+/.test(E)){let m=E.substring(2);m=m.substring(0,1).toLocaleLowerCase()+m.substring(1),x(m,k[E])}})},f=()=>{const x=l;d((k,E)=>{x.on(k,(...m)=>{const h=r.events[k];h&&h(...m)})})},b=()=>{o("save",c)};return u.onMounted(()=>{let x=r.options;r.includeUi&&(x=Object.assign(n,r.options));const k=new wQ(a.value,x);l=k;const E=new dQ(a.value,k,null);c=E,a.value.querySelectorAll(".tui-image-editor-header-buttons")[0].appendChild(s.value),f(),i.value&&c.load(i.value),o("initialized",c),setTimeout(()=>{r.container&&E.setContainer(r.container.$el)},.1)}),u.onUnmounted(()=>{const x=l;d((k,E)=>{x.off(k)}),x.destroy(),l=null}),(x,k)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createElementVNode("div",{ref_key:"el",ref:a,style:{width:"100%",height:"100%"}},null,512),u.createElementVNode("button",{class:"tui-image-editor-save-btn",ref_key:"saveBtn",ref:s,onClick:b},"Save",512)],64))}});class h_{constructor(){We(this,"close","Close");We(this,"takePicture","Take picture");We(this,"save","Save");We(this,"clear","Clear");We(this,"flipCamera","Flip camera");We(this,"loadCameras","Load cameras")}}const ao=u.defineComponent({__name:"IconButton",props:{title:{type:String}},setup(t){return(e,n)=>(u.openBlock(),u.createBlock(cf,{text:t.title},{activator:u.withCtx(({props:r})=>[u.createVNode(dt,u.normalizeProps(u.guardReactiveProps({...r,...e.$attrs})),u.createSlots({_:2},[u.renderList(e.$slots,(i,o)=>({name:o,fn:u.withCtx(a=>[u.renderSlot(e.$slots,o,u.normalizeProps(u.guardReactiveProps(a)))])}))]),1040)]),_:3},8,["text"]))}});class CQ{constructor(){We(this,"data",null);We(this,"url","")}clear(){this.data=null,this.url=""}set(e,n){this.data=e,this.url=n}}const SQ=(t,e,n,r)=>{const i=e.width,o=e.height;(r===90||r===270)&&(e.width=o,e.height=i),r===90?n.translate(o,0):r===180?n.translate(i,o):r===270?n.translate(0,i):n.translate(0,0),n.rotate(r*Math.PI/180);const a=t.width;n.drawImage(t,-a/2,-a/2,i,o)},kQ=nl(u.defineComponent({__name:"WebCam",props:{rememberDevice:{type:Boolean,default:!0},preferCamerasWithLabel:{type:Array,default:["back","usb"]},classList:{type:String,default:""},constraints:{type:Object,default:{video:{width:{ideal:2560},height:{ideal:1440}},facingMode:"environment"}},tryToRotateImage:{type:Boolean,default:!0},imageType:{type:String,default:"image/jpeg"},rememberDeviceTokenName:{type:String,default:"_vwl_device_id"},autoStart:{type:Boolean,default:!0},audio:{type:Boolean,default:!1},shutterEffect:{type:Boolean,default:!0}},emits:["clear","stop","start","pause","resume","error","unsupported","init","photoTaken"],setup(t,{expose:e,emit:n}){const r=require("deviceorientation-js");class i{constructor(){We(this,"inited",!1);We(this,"videoStream")}}const o=t,a=n,s=new i,c=u.ref(""),l=u.ref([]),d=u.ref(null),f=u.ref(null),b=u.ref(null);function x(){s.inited||(!c.value&&o.autoStart&&k(),a("init",c.value),s.inited=!0)}function k(){if(c.value)h(c.value);else{const A=window.localStorage.getItem(o.rememberDeviceTokenName);if(A&&o.rememberDevice&&l.value.find(P=>P.deviceId===A))c.value=A;else if(l.value.length>1)for(const P of o.preferCamerasWithLabel){const L=l.value.find(R=>R.label.toLowerCase().indexOf(P)!==-1);if(L){c.value=L.deviceId;break}}!c.value&&l.value.length>0&&(c.value=l.value[0].deviceId)}a("start")}function E(){return new Promise(A=>{navigator.mediaDevices.enumerateDevices().then(P=>{for(let L=0;L!==P.length;++L){let R=P[L];R.deviceId&&R.kind==="videoinput"&&l.value.find(j=>j.deviceId===R.deviceId)===void 0&&l.value.push(R)}}).then(()=>{!s.inited&&l.value.length>0&&(!c.value&&o.autoStart&&k(),a("init",c.value),s.inited=!0),A(l.value)}).catch(P=>a("unsupported",P))})}function m(A){if(c.value!==A){c.value=A;return}S(),A&&h(A)}function h(A){navigator.mediaDevices.getUserMedia(g(A)).then(P=>{d.value.srcObject=P,o.rememberDevice&&window.localStorage.setItem(o.rememberDeviceTokenName,A)}).catch(P=>a("error",P))}function g(A=""){const L={...{video:null,audio:!1},...o.constraints};return A&&((typeof L.video!="object"||L.video===null)&&(L.video={}),L.video.deviceId={exact:A}),L}function w(){navigator.mediaDevices.getUserMedia(g()).then(A=>{A.getTracks().forEach(L=>{L.stop()}),E()}).catch(A=>a("error",A))}function p(){return A=>{let P=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return P?new Promise((L,R)=>{P.call(navigator,A,L,R)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}}function v(){navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=p()),w()}function y(){d.value.srcObject.getTracks().forEach(A=>{A.stop()})(d.value).srcObject=void 0,a("clear")}function S(){d.value.srcObject&&y(),a("stop")}function T(){var A;d.value.srcObject&&((A=d.value)==null||A.pause()),a("pause")}function C(){var A;d.value.srcObject&&((A=d.value)==null||A.play()),a("resume")}async function M(){let A=d.value,P=f.value;P.height=A.videoHeight,P.width=A.videoWidth;let L=P.getContext("2d");SQ(A,P,L,o.tryToRotateImage?r.getDeviceOrientation():0);let R=P.toDataURL(o.imageType);P.toBlob(j=>{var z;o.shutterEffect&&((z=b.value)==null||z.classList.add("on"),setTimeout(()=>{var $;($=b.value)==null||$.classList.remove("on")},30*2+45)),a("photoTaken",{blob:j,image_data_url:R})},o.imageType)}return u.onBeforeUnmount(()=>{S()}),u.onMounted(()=>{v(),r.init()}),u.watch(c,A=>{m(A)}),e({loadCameras:E,changeCamera:m,loadCamera:h,start:k,stop:S,pause:T,resume:C,init:x,takePhoto:M,cameras:l}),(A,P)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createElementVNode("video",u.mergeProps({class:["video",[{hidden:!c.value},...t.classList.split(" ")]],ref_key:"video",ref:d,autoplay:""},A.$attrs),null,16),u.createElementVNode("canvas",{ref_key:"canvas",ref:f,style:{display:"none"}},null,512),u.createElementVNode("div",{ref_key:"shutter",ref:b,class:"shutter"},null,512)],64))}}),[["__scopeId","data-v-3f480466"]]),p_=u.defineComponent({__name:"WebCamUI",props:{fullscreenState:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},translate:{type:h_,default:()=>new h_},save:{type:Function,default:null}},emits:["clear","stop","start","photoSave","pause","resume","error","unsupported","init","photoTaken","fullscreen","close"],setup(t,{emit:e}){class n{constructor(){We(this,"value",0)}}const r=u.useTemplateRef("webcam"),i=u.computed(()=>{var L;return((L=r.value)==null?void 0:L.cameras)||[]}),o=u.ref(""),a=u.ref(!1),s=u.ref(!1),c=u.ref(!1),l=new n,d=u.ref(new CQ),f=e,b=async()=>{var L;try{await((L=r.value)==null?void 0:L.takePhoto()),s.value=!0,setTimeout(()=>{s.value=!1},500)}catch{c.value=!0,setTimeout(()=>{c.value=!1},500)}},x=()=>{var L;return(L=r.value)==null?void 0:L.loadCameras()},k=L=>{o.value=L,f("init",L)},E=()=>{var L;(L=r.value)==null||L.changeCamera(o.value)},m=()=>{x().then(()=>{var L;if(i.value.length>1){let j=i.value.findIndex(z=>z.deviceId===o.value)+1;j>=i.value.length&&(j=0),o.value=i.value[j].deviceId,(L=r.value)==null||L.changeCamera(i.value[j].deviceId)}})},h=()=>{var L;(L=r.value)==null||L.stop()},g=()=>{h(),f("close")},w=()=>{f("clear")},p=()=>{f("stop")},v=()=>{f("start")},y=()=>{f("pause")},S=()=>{f("resume")},T=L=>{f("error",L)},C=L=>{f("unsupported",L)},M=L=>{var R;d.value.set(L.blob,L.image_data_url),(R=r.value)==null||R.pause()},A=()=>{f("photoTaken",d.value)},P=()=>{var L;d.value.clear(),(L=r.value)==null||L.resume()};return u.onMounted(()=>{i.value.length===0&&(l.value=setTimeout(()=>{x().then(L=>{var R;L.length>0&&(clearInterval(l.value),(R=r.value)==null||R.init())})},1e4))}),u.onBeforeUnmount(()=>{l.value&&clearInterval(l.value),h()}),(L,R)=>(u.openBlock(),u.createBlock(jn,{height:"100%",style:{display:"flex","flex-direction":"column"}},{default:u.withCtx(()=>[t.closable?(u.openBlock(),u.createBlock(Zr,{key:0,density:"compact",style:{"justify-content":"center"}},{prepend:u.withCtx(()=>[u.createVNode(dt,{disabled:""})]),append:u.withCtx(()=>[u.createVNode(ao,{title:t.translate.close,icon:"mdi-close",onClick:g},null,8,["title"])]),default:u.withCtx(()=>[u.createVNode(ao,{title:t.translate.loadCameras,density:"compact",size:"x-large",icon:"mdi-camera-retake",onClick:x},null,8,["title"]),u.createElementVNode("div",null,[u.createVNode(Xs,{"hide-details":"",density:"compact",items:i.value,"item-title":"label","item-value":"deviceId",modelValue:o.value,"onUpdate:modelValue":[R[0]||(R[0]=j=>o.value=j),E]},null,8,["items","modelValue"])]),i.value.length>1?(u.openBlock(),u.createBlock(ao,{key:0,title:t.translate.flipCamera,density:"compact",size:"x-large",icon:"mdi-camera-flip",onClick:m},null,8,["title"])):u.createCommentVNode("",!0)]),_:1})):u.createCommentVNode("",!0),u.createVNode(Mn),u.createVNode(Dr,{style:{overflow:"hidden",display:"flex","align-items":"center","justify-content":"center",padding:"0"},class:"webcam"},{default:u.withCtx(()=>[u.createVNode(kQ,{ref_key:"webcam",ref:r,onInit:k,onClear:w,onStop:p,onStart:v,onPause:y,onResume:S,onError:T,onUnsupported:C,onPhotoTaken:M,shutterEffect:a.value},null,8,["shutterEffect"])]),_:1}),u.createVNode(Mn),u.createVNode(ki,{style:{"justify-content":"center"}},{default:u.withCtx(()=>[d.value.url?(u.openBlock(),u.createElementBlock(u.Fragment,{key:0},[u.createVNode(ao,{title:t.translate.clear,variant:"flat",density:"compact",size:"x-large",icon:"mdi-arrow-left",onClick:P},null,8,["title"]),u.createVNode(ao,{title:t.translate.save,color:"primary",variant:"flat",density:"compact",size:"x-large",icon:"mdi-check-bold",onClick:A},null,8,["title"])],64)):(u.openBlock(),u.createBlock(ao,{key:1,title:t.translate.takePicture,color:"primary",variant:"flat",density:"compact",size:"x-large",icon:"mdi-image",onClick:b},null,8,["title"]))]),_:1})]),_:1}))}});class m_{constructor(){We(this,"loadImageError","An error occurred on load image.");We(this,"releaseFileHere","Release here...");We(this,"unsupportedFileTypeError","Unsupported file type.");We(this,"addFromLink","Add from link");We(this,"takePictureFromCamera","Take picture from camera");We(this,"save","Save");We(this,"cancel","Cancel");We(this,"edit","Edit Picture");We(this,"addFromLocalFile","Add from local file");We(this,"fullView","Full view");We(this,"close","Close");We(this,"paste","Paste")}}const EQ=Od("v-alert-title"),TQ=Re({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function MQ(t,e){return{iconSize:u.computed(()=>{const r=new Map(t.iconSizes),i=t.iconSize??e()??"default";return r.has(i)?r.get(i):i})}}const IQ=["success","info","warning","error"],OQ=Re({border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:jt,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>IQ.includes(t)},...Ot(),...ai(),...Uo(),...zo(),...TQ(),...iu(),...Pd(),...si(),...ln(),...wn(),...$o({variant:"flat"})},"VAlert"),Rm=et()({name:"VAlert",props:OQ(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Lt(t,"modelValue"),o=u.toRef(()=>{if(t.icon!==!1)return t.type?t.icon??`$${t.type}`:t.icon}),{iconSize:a}=MQ(t,()=>t.prominent?44:28),{themeClasses:s}=Jn(t),{colorClasses:c,colorStyles:l,variantClasses:d}=Ql(()=>({color:t.color??t.type,variant:t.variant})),{densityClasses:f}=bo(t),{dimensionStyles:b}=Wo(t),{elevationClasses:x}=Sa(t),{locationStyles:k}=Dd(t),{positionClasses:E}=Ld(t),{roundedClasses:m}=Si(t),{textColorClasses:h,textColorStyles:g}=Ji(()=>t.borderColor),{t:w}=ci(),p=u.toRef(()=>({"aria-label":w(t.closeLabel),onClick(v){i.value=!1,n("click:close",v)}}));return()=>{const v=!!(r.prepend||o.value),y=!!(r.title||t.title),S=!!(r.close||t.closable),T={density:t.density,icon:o.value,size:a.value};return i.value&&u.createVNode(t.tag,{class:u.normalizeClass(["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},s.value,c.value,f.value,x.value,E.value,m.value,d.value,t.class]),style:u.normalizeStyle([l.value,b.value,k.value,t.style]),role:"alert"},{default:()=>{var C,M;return[Jl(!1,"v-alert"),t.border&&u.createElementVNode("div",{key:"border",class:u.normalizeClass(["v-alert__border",h.value]),style:u.normalizeStyle(g.value)},null),v&&u.createElementVNode("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?u.createVNode(en,{key:"prepend-defaults",disabled:!o.value,defaults:{VIcon:{...T}}},r.prepend):u.createVNode(_t,u.mergeProps({key:"prepend-icon"},T),null)]),u.createElementVNode("div",{class:"v-alert__content"},[y&&u.createVNode(EQ,{key:"title"},{default:()=>{var A;return[((A=r.title)==null?void 0:A.call(r))??t.title]}}),((C=r.text)==null?void 0:C.call(r))??t.text,(M=r.default)==null?void 0:M.call(r)]),r.append&&u.createElementVNode("div",{key:"append",class:"v-alert__append"},[r.append()]),S&&u.createElementVNode("div",{key:"close",class:"v-alert__close"},[r.close?u.createVNode(en,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var A;return[(A=r.close)==null?void 0:A.call(r,{props:p.value})]}}):u.createVNode(dt,u.mergeProps({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},p.value),null)])]}})}}});function AQ(t){const e=u.shallowRef(t());let n=-1;function r(){clearInterval(n)}function i(){r(),u.nextTick(()=>e.value=t())}function o(a){const s=a?getComputedStyle(a):{transitionDuration:.2},c=parseFloat(s.transitionDuration)*1e3||200;if(r(),e.value<=0)return;const l=performance.now();n=window.setInterval(()=>{const d=performance.now()-l+c;e.value=Math.max(t()-d,0),e.value<=0&&r()},c)}return u.onScopeDispose(r),{clear:r,time:e,start:o,reset:i}}const g_=Re({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...iu({location:"bottom"}),...Pd(),...si(),...$o(),...wn(),...Sr($d({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ux=et()({name:"VSnackbar",props:g_(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Lt(t,"modelValue"),{positionClasses:i}=Ld(t),{scopeId:o}=ql(),{themeClasses:a}=Jn(t),{colorClasses:s,colorStyles:c,variantClasses:l}=Ql(t),{roundedClasses:d}=Si(t),f=AQ(()=>Number(t.timeout)),b=u.ref(),x=u.ref(),k=u.shallowRef(!1),E=u.shallowRef(0),m=u.ref(),h=u.inject(K0,void 0);wo(()=>!!h,()=>{const A=bU();u.watchEffect(()=>{m.value=A.mainStyles.value})}),u.watch(r,w),u.watch(()=>t.timeout,w),u.onMounted(()=>{r.value&&w()});let g=-1;function w(){f.reset(),window.clearTimeout(g);const A=Number(t.timeout);if(!r.value||A===-1)return;const P=Ab(x.value);f.start(P),g=window.setTimeout(()=>{r.value=!1},A)}function p(){f.reset(),window.clearTimeout(g)}function v(){k.value=!0,p()}function y(){k.value=!1,w()}function S(A){E.value=A.touches[0].clientY}function T(A){Math.abs(E.value-A.changedTouches[0].clientY)>50&&(r.value=!1)}function C(){k.value&&y()}const M=u.computed(()=>t.location.split(" ").reduce((A,P)=>(A[`v-snackbar--${P}`]=!0,A),{}));return st(()=>{const A=Ea.filterProps(t),P=!!(n.default||n.text||t.text);return u.createVNode(Ea,u.mergeProps({ref:b,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},M.value,i.value,t.class],style:[m.value,t.style]},A,{modelValue:r.value,"onUpdate:modelValue":L=>r.value=L,contentProps:u.mergeProps({class:["v-snackbar__wrapper",a.value,s.value,d.value,l.value],style:[c.value],onPointerenter:v,onPointerleave:y},A.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:S,onTouchend:T,onAfterLeave:C},o),{default:()=>{var L,R;return[Jl(!1,"v-snackbar"),t.timer&&!k.value&&u.createElementVNode("div",{key:"timer",class:"v-snackbar__timer"},[u.createVNode(Nd,{ref:x,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,modelValue:f.time.value},null)]),P&&u.createElementVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((L=n.text)==null?void 0:L.call(n))??t.text,(R=n.default)==null?void 0:R.call(n)]),n.actions&&u.createVNode(en,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[u.createElementVNode("div",{class:"v-snackbar__actions"},[n.actions({isActive:r})])]})]},activator:n.activator})}),qi({},b)}}),_Q={class:"text-white font-weight-bold pa-2",style:{"text-shadow":"0 0 8px #000"}},DQ=["src"],NQ=["src"],PQ={key:1,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},LQ={role:"presentation",style:{height:"50%",width:"50%"},viewBox:"0 0 24 24"},RQ={key:0,style:{width:"100%"}},BQ={style:{"margin-bottom":"5px",opacity:"0.8"}},jQ=nl(u.defineComponent({__name:"Field",props:u.mergeModels({card:{type:Object,default:()=>{}},translate:{type:m_,default:()=>new m_},readonly:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},initialValue:{type:String,default:""},camera:{type:Boolean,default:!1},link:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},paste:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,n=u.useAttrs(),r=u.useSlots(),i=u.useModel(t,"modelValue"),o=u.useTemplateRef("block"),a=u.useTemplateRef("fileInput"),s=u.useTemplateRef("image"),c=u.useTemplateRef("closeEditingEl"),l=u.useTemplateRef("saveEl"),d=u.ref(!1),f=u.ref(!1),b=u.ref(!1),x=u.ref(!1),k=u.ref(!1),E=u.ref({width:0,height:0}),m=u.ref(),h=u.computed(()=>e.loading||b.value),g=u.computed(()=>a.value),w=u.computed(()=>{let be=n.style||{};return{width:n.width,height:n.height,display:"flex",flexDirection:"column",...be}}),p=u.computed(()=>!h.value&&!e.readonly),v=u.ref(!1),y=(be="")=>{v.value=!1,d.value=!1,f.value=!1,E.value.width=0,E.value.height=0;let de=i.value||be;de&&(de.constructor==String?m.value=de:de.constructor==File&&sx(de).then(ce=>{m.value=ce}))},S=()=>{b.value=!0,setTimeout(()=>{i.value=void 0,y(e.initialValue),b.value=!1},.1)},T=u.ref(!1),C=u.ref(!1),M=new hQ(1e3,()=>{T.value=!1}),A=be=>{be.preventDefault(),T.value=!0,M.restart()},P=()=>{T.value=!1},L=be=>{be.preventDefault();const de=be.dataTransfer.files[0];T.value=!1,/^image\/(png|jpeg)$/.test(de.type)?sx(de).then(ce=>{setTimeout(V=>{i.value=V},100,ce)}):C.value=!0};y(e.initialValue);let R;u.watch(()=>i.value,()=>{y(e.initialValue)});function j(){d.value=!0}function z(){g.value.click()}async function $(){if(e.paste)try{const be=await navigator.clipboard.read();for(const de of be){const ce=de.types.filter(V=>V.startsWith("image/"));for(const V of ce)de.getType(V).then(ne=>{const Q=new FileReader;Q.onloadend=function(){i.value=Q.result},Q.readAsDataURL(ne)})}}catch{}}function Y(){k.value=!0}function ae(){var be;sx((be=g.value.files)==null?void 0:be.item(0)).then(de=>{setTimeout(ce=>{i.value=ce},100,de)})}function K(be){const de=new Image;de.onload=()=>{E.value.width=de.width,E.value.height=de.height},de.onerror=()=>{v.value=!0},de.src=s.value.src}function te(){f.value=!0,R.setVisibility(!1),setTimeout(()=>{R.toURL().then(be=>{i.value=be.value})},100)}function G(){x.value=!0}function ue(be){var he,X,re,le;R=be;const de=be.element.querySelectorAll(".tui-image-editor-header-buttons")[0],ce=be.element.querySelectorAll(".tui-image-editor-help-menu")[0],V=be.element.querySelectorAll(".tui-image-editor-header-logo")[0];(he=V.parentElement)==null||he.removeChild(V),(X=de.parentElement)==null||X.removeChild(de);const ne=(re=c.value)==null?void 0:re.$el,Q=(le=l.value)==null?void 0:le.$el,Z=fe=>{const ke=window.document.createElement("li");return ke.appendChild(fe),ke};ce.insertBefore(Z(ne),ce.children[0]),ce.appendChild(Z(Q)),ne.style.display="",Q.style.display=""}function J(be){x.value=!1,i.value=be.url}return u.onMounted(()=>{e.initialValue||$()}),(be,de)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createVNode(dt,{style:{display:"none",opacity:"0.7"},ref_key:"closeEditingEl",ref:c,icon:"mdi-arrow-left",density:"comfortable",onClick:de[0]||(de[0]=()=>d.value=!1),"tooltip-content":"Hello"},null,512),u.createVNode(dt,{style:{display:"none"},ref_key:"saveEl",ref:l,icon:"mdi-check",density:"comfortable",onClick:te},null,512),u.createVNode(ux,{color:"error",modelValue:C.value,"onUpdate:modelValue":de[1]||(de[1]=ce=>C.value=ce)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.translate.unsupportedFileTypeError),1)]),_:1},8,["modelValue"]),u.createElementVNode("div",{class:u.normalizeClass(["tui-image-editor-field",T.value?"dragging":"",u.unref(n).class||""]),onDragover:A,onDragleave:P,onDrop:L},[u.createElementVNode("input",{ref_key:"fileInput",ref:g,type:"file",accept:"image/*",style:{display:"none"},onChange:ae},null,544),u.createVNode(jn,{"min-height":"100%","min-width":"100%",style:{display:"flex","flex-direction":"column"},density:"compact"},{default:u.withCtx(()=>[u.createVNode(Dr,{style:{padding:"0"}},{default:u.withCtx(()=>[u.createVNode(Ea,{class:"align-center justify-center",contained:"",persistent:"",modelValue:T.value,"onUpdate:modelValue":de[2]||(de[2]=ce=>T.value=ce)},{default:u.withCtx(()=>[u.createElementVNode("div",_Q,u.toDisplayString(t.translate.releaseFileHere),1)]),_:1},8,["modelValue"]),h.value?(u.openBlock(),u.createElementBlock("div",{key:0,style:u.normalizeStyle(w.value)},[u.createVNode(Ea,{class:"align-center justify-center",contained:"","model-value":!0},{default:u.withCtx(()=>[u.createVNode(Qb,{color:"primary",indeterminate:"disable-shrink",size:"24",width:"4"})]),_:1})],4)):(u.openBlock(),u.createElementBlock("div",{key:1,style:u.normalizeStyle(`padding: 10px 10px ${p.value?"0":"10px"} 10px`)},[u.createVNode(jn,{variant:"flat",style:u.normalizeStyle(w.value)},u.createSlots({default:u.withCtx(()=>[u.createVNode(Dr,{style:{padding:"0"}},{default:u.withCtx(()=>[v.value?(u.openBlock(),u.createBlock(Rm,{key:0,type:"warning",density:"compact",style:{padding:"5px"}},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.translate.loadImageError),1)]),_:1})):u.renderSlot(be.$slots,"text",{key:1},void 0,!0)]),_:3}),u.createVNode(ki,{class:"justify-center text-center vertica"},{default:u.withCtx(()=>[E.value.width?(u.openBlock(),u.createElementBlock("div",RQ,[u.renderSlot(be.$slots,"dimensions",u.normalizeProps(u.guardReactiveProps(E.value)),()=>[u.createElementVNode("div",BQ,[u.createVNode(Gs,{color:"primary",variant:"flat",size:"small"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(E.value.width)+"x"+u.toDisplayString(E.value.height),1)]),_:1})])],!0)])):u.createCommentVNode("",!0)]),_:3})]),_:2},[m.value?{name:"append",fn:u.withCtx(()=>[u.createVNode(cf,{text:t.translate.fullView},{activator:u.withCtx(({props:ce})=>[u.createVNode(dt,u.mergeProps({icon:"mdi-arrow-expand",density:"comfortable"},ce),{default:u.withCtx(()=>[u.createVNode(_t,null,{default:u.withCtx(()=>de[12]||(de[12]=[u.createTextVNode("mdi-arrow-expand")])),_:1}),u.createVNode(eo,{activator:"parent",fullscreen:""},{default:u.withCtx(({isActive:V})=>[u.createVNode(jn,{class:"image-full bg-transparent"},{image:u.withCtx(()=>[u.createVNode(Xr,{onClick:ne=>V.value=!1},null,8,["onClick"]),u.createElementVNode("img",{src:m.value},null,8,DQ),u.createVNode(Xr,{onClick:ne=>V.value=!1},{default:u.withCtx(()=>[u.createVNode(dt,{icon:"mdi-close",class:"btn-close",density:"comfortable",onClick:ne=>V.value=!1},null,8,["onClick"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:2},1040)]),_:1},8,["text"])]),key:"0"}:void 0,v.value?void 0:{name:"image",fn:u.withCtx(()=>[m.value?u.renderSlot(be.$slots,"image",{key:0,src:m.value},()=>[u.createElementVNode("img",{ref:"image",src:m.value,onLoad:K,onError:de[3]||(de[3]=ce=>v.value=!0)},null,40,NQ)],!0):(u.openBlock(),u.createElementBlock("div",PQ,[(u.openBlock(),u.createElementBlock("svg",LQ,de[13]||(de[13]=[u.createElementVNode("title",null,"image-off",-1),u.createElementVNode("path",{d:"M21 17.2L6.8 3H19C20.1 3 21 3.9 21 5V17.2M20.7 22L19.7 21H5C3.9 21 3 20.1 3 19V4.3L2 3.3L3.3 2L22 20.7L20.7 22M16.8 18L12.9 14.1L11 16.5L8.5 13.5L5 18H16.8Z",style:{fill:"currentcolor",opacity:"0.5"}},null,-1)])))]))]),key:"1"}]),1032,["style"])],4))]),_:3}),p.value?(u.openBlock(),u.createBlock(ki,{key:0,style:{"justify-content":"center","align-items":"center"}},{default:u.withCtx(()=>[u.unref(r)["prepend-edit"]?u.renderSlot(be.$slots,"prepend-edit",{key:0,readonly:t.readonly},void 0,!0):u.createCommentVNode("",!0),t.readonly?u.createCommentVNode("",!0):(u.openBlock(),u.createElementBlock(u.Fragment,{key:1},[t.initialValue&&i.value?(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-restart",color:"primary",density:"comfortable",onClick:S})):u.createCommentVNode("",!0),m.value?(u.openBlock(),u.createBlock(ao,{key:1,icon:"mdi-pencil",color:"primary",density:"comfortable",onClick:j,title:t.translate.edit},null,8,["title"])):u.createCommentVNode("",!0),t.camera?(u.openBlock(),u.createBlock(ao,{key:2,icon:"mdi-camera",color:"primary",density:"comfortable",onClick:G,title:t.translate.takePictureFromCamera},null,8,["title"])):u.createCommentVNode("",!0),t.link?(u.openBlock(),u.createBlock(ao,{key:3,icon:"mdi-link-variant-plus",color:"primary",density:"comfortable",onClick:Y,title:t.translate.addFromLink},null,8,["title"])):u.createCommentVNode("",!0),t.upload?(u.openBlock(),u.createBlock(ao,{key:4,icon:"mdi-upload",color:"primary",density:"comfortable",onClick:z,title:t.translate.addFromLocalFile},null,8,["title"])):u.createCommentVNode("",!0),e.paste?(u.openBlock(),u.createBlock(ao,{key:5,icon:"mdi-content-paste",color:"primary",density:"comfortable",onClick:$,title:t.translate.paste},null,8,["title"])):u.createCommentVNode("",!0)],64)),u.unref(r)["append-edit"]?u.renderSlot(be.$slots,"append-edit",{key:2,readonly:t.readonly},void 0,!0):u.createCommentVNode("",!0)]),_:3})):u.createCommentVNode("",!0)]),_:3})],34),u.createVNode(eo,{modelValue:x.value,"onUpdate:modelValue":de[5]||(de[5]=ce=>x.value=ce),width:"auto",fullscreen:"",onClose:de[6]||(de[6]=ce=>x.value=!1)},{default:u.withCtx(()=>[u.createVNode(p_,{closable:"",onPhotoTaken:J,onClose:de[4]||(de[4]=ce=>x.value=!1)})]),_:1},8,["modelValue"]),u.createVNode(eo,{modelValue:k.value,"onUpdate:modelValue":de[8]||(de[8]=ce=>k.value=ce),onClose:de[9]||(de[9]=ce=>k.value=!1)},{default:u.withCtx(()=>[u.createVNode(jn,null,{default:u.withCtx(()=>[u.createVNode(Zr,{density:"compact"},{append:u.withCtx(()=>[u.createVNode(ao,{title:t.translate.close,icon:"mdi-close",onClick:de[7]||(de[7]=ce=>k.value=!1)},null,8,["title"])]),default:u.withCtx(()=>[u.createVNode(as,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.translate.addFromLink),1)]),_:1})]),_:1}),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(dt,null,{prepend:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-check-bold"})]),default:u.withCtx(()=>[u.createTextVNode(" "+u.toDisplayString(t.translate.save),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),u.createVNode(eo,{modelValue:d.value,"onUpdate:modelValue":de[11]||(de[11]=ce=>d.value=ce),width:"auto",fullscreen:!f.value},{default:u.withCtx(()=>[u.createVNode(Qb,{color:"primary",indeterminate:"disable-shrink",size:"24",width:"4"}),u.createVNode(jn,{ref:"block"},{default:u.withCtx(()=>[x.value?(u.openBlock(),u.createBlock(Zr,{key:0,density:"compact"},{append:u.withCtx(()=>[u.createVNode(ao,{title:t.translate.close,icon:"mdi-close",onClick:de[10]||(de[10]=ce=>x.value=!1)},null,8,["title"])]),_:1})):u.createCommentVNode("",!0),x.value?(u.openBlock(),u.createBlock(p_,{key:1,onPhotoTaken:J})):(u.openBlock(),u.createBlock(xQ,{key:2,"model-value":m.value,container:u.unref(o),onSave:te,onInitialized:ue},null,8,["model-value","container"]))]),_:1},512)]),_:1},8,["modelValue","fullscreen"])],64))}}),[["__scopeId","data-v-ee91ebc4"]]),FQ={class:"v-input-tui-image-editor-field--error--messages"},v_=u.defineComponent({__name:"Input",props:u.mergeModels({field:{type:Object,default:{}},readonly:{type:Boolean,default:!1},errorMessages:{type:Array},hideDetails:{type:Boolean},hint:{type:String},label:{type:String},error:{type:Boolean,default:!1},maxErrors:{type:Number},modelFile:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},initialValue:{type:String,default:""},link:{type:Boolean,default:!1},camera:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},paste:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,n=u.useSlots();u.useAttrs();const r=u.useModel(t,"modelValue"),i=u.computed(()=>e.error?!0:e.errorMessages?e.errorMessages.length>0:!1),o=u.computed(()=>{var s;return(s=e.errorMessages)!=null&&s.length?e.maxErrors?e.errorMessages.slice(0,e.maxErrors):e.errorMessages:[]}),a=u.computed({get(){return r.value},set(s){e.modelFile?new u_(s).toRaw().toBinary().then(c=>c.toBlob().then(l=>l.toFile().then(d=>r.value=d))):r.value=s}});return(s,c)=>(u.openBlock(),u.createBlock(Ta,{class:"v-input-tui-image-editor-field",hint:t.hint,label:t.label,error:i.value,"hide-details":""},{default:u.withCtx(()=>[u.createVNode(jQ,u.mergeProps({upload:t.upload,link:t.link,camera:t.camera,paste:t.paste,"initial-value":t.initialValue,width:"100%",height:"100%"},t.field,{readonly:t.readonly,modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=l=>a.value=l),loading:t.loading}),{text:u.withCtx(()=>[i.value?(u.openBlock(),u.createBlock(Rm,{key:0,tile:"",density:"compact",type:"error",variant:"outlined",style:{"background-color":"rgba(255, 255, 255, 0.8)"}},{prepend:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-close-circle",size:"small"})]),default:u.withCtx(()=>[u.createElementVNode("ol",FQ,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(o.value,l=>(u.openBlock(),u.createElementBlock("li",null,u.toDisplayString(l),1))),256))])]),_:1})):u.createCommentVNode("",!0),u.renderSlot(s.$slots,"text")]),actions:u.withCtx(()=>[u.unref(n).actions?(u.openBlock(),u.createBlock(Fd,{key:0},{default:u.withCtx(()=>[u.createVNode(bp,null,{default:u.withCtx(()=>[u.renderSlot(s.$slots,"actions")]),_:3})]),_:3})):u.createCommentVNode("",!0)]),_:3},16,["upload","link","camera","paste","initial-value","readonly","modelValue","loading"])]),_:3},8,["hint","label","error"]))}}),dx=u.defineComponent({__name:"TempVar",props:{define:{}},setup(t){return(e,n)=>u.renderSlot(e.$slots,"default",u.normalizeProps(u.guardReactiveProps(e.define)))}}),HQ=t=>(t.nodeType==Node.TEXT_NODE?t.nextElementSibling:t).parentElement,zQ=u.defineComponent({name:"NavigationDrawer",components:{TempVar:dx},props:{setup:{type:Function,default:()=>()=>{}},location:{type:String},density:{},closeIcon:{type:String,default:"mdi-close"},variant:{type:String,default:""},containerProps:{type:Object,default:()=>({})},toolbarProps:{type:Object,default:()=>({})},expandable:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},temporary:{type:Boolean,default:!1},title:{type:String,default:""},mainMenuTitle:{type:String,default:""},secondaryMenuTitle:{type:String,default:""},mainMenuUp:{type:Boolean,default:!1},secondaryMenuUp:{type:Boolean,default:!1},width:{},modelValue:{}},emits:["update:modelValue","open","close"],setup(t){t.setup&&t.setup()},data:t=>({isOpen:u.useModel(t,"modelValue"),root:u.useTemplateRef("root"),isExpanded:!1,isMainMenuOpen:!1,isSecondaryMenuOpen:!1,state:{closeChanging:!1,expandChanging:!1,windowOverflowToggler:!1}}),computed:{cIsOpen:{get(){return this.isOpen},set(t){this.state.closeChanging=!0,t||(this.isExpanded=!1),this.isOpen=t,this.$emit(t?"open":"close"),t?this.openCb():this.closeCb()}}},methods:{openCb(){var t;if(this.temporary){const e=(t=window.document.body.parentElement)==null?void 0:t.classList;this.state.windowOverflowToggler=!(e.contains("overflow-y-hidden")||e.contains("overflow-hidden")),this.state.windowOverflowToggler&&e.add("overflow-y-hidden")}},closeCb(){var t;this.state.windowOverflowToggler&&((t=window.document.body.parentElement)==null||t.classList.remove("overflow-y-hidden"))},hasHeader(){return this.expandable||this.closable||this.$slots.header||!1},mainMenuScope(){return{x:!0,parent:this.root,open:this.isMainMenuOpen,density:this.density,close:()=>this.isMainMenuOpen=!1,class:["vx-navigation-drawer__main-menu",this.mainMenuUp?"vx-navigation-drawer__main-menu__up":""],drawerUpStyle:{top:0,height:"100%",left:0}}},secondaryMenuScope(){return{x:!0,open:this.isSecondaryMenuOpen,density:this.density,close:()=>this.isSecondaryMenuOpen=!1,class:["vx-navigation-drawer__secondary-menu",this.secondaryMenuUp?"vx-navigation-drawer__secondary-menu__up":""],drawerUpStyle:{top:0,height:"100%"}}},parentWidth(){var t;return HQ((t=this.$parent)==null?void 0:t.$el).offsetWidth},getContainerProps(){let t={...this.$props.containerProps||{}};return this.location&&(t.location=this.location),t}},watch:{modelValue(t){t&&this.isExpanded&&(this.isExpanded=!1),this.state.closeChanging||(this.$emit(t?"open":"close"),t?this.openCb():this.closeCb()),this.state.closeChanging=!1}},mounted(){this.isOpen&&this.openCb()},unmounted(){this.closeCb()}});function $Q(t){let{rootEl:e,isSticky:n,layoutItemStyles:r}=t;const i=u.shallowRef(!1),o=u.shallowRef(0),a=u.computed(()=>{const l=typeof i.value=="boolean"?"top":i.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,i.value?{[l]:gt(o.value)}:{top:r.value.top}]});u.onMounted(()=>{u.watch(n,l=>{l?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),u.onBeforeUnmount(()=>{window.removeEventListener("scroll",c)});let s=0;function c(){const l=s>window.scrollY?"up":"down",d=e.value.getBoundingClientRect(),f=parseFloat(r.value.top??0),b=window.scrollY-Math.max(0,o.value-f),x=d.height+Math.max(o.value,f)-window.scrollY-window.innerHeight,k=parseFloat(getComputedStyle(e.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-f?(i.value="top",o.value=f):l==="up"&&i.value==="bottom"||l==="down"&&i.value==="top"?(o.value=window.scrollY+d.top-k,i.value=!0):l==="down"&&x<=0?(o.value=0,i.value="bottom"):l==="up"&&b<=0&&(k?i.value!=="top"&&(o.value=-b+k+f,i.value="top"):(o.value=d.top+b,i.value="top")),s=window.scrollY}return{isStuck:i,stickyStyles:a}}const UQ=100,WQ=20;function y_(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function b_(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const r=y_(e),i=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(i-r)*Math.abs(i),n===t.length-1&&(e*=.5)}return y_(e)*1e3}function YQ(){const t={};function e(i){Array.from(i.changedTouches).forEach(o=>{(t[o.identifier]??(t[o.identifier]=new ST(WQ))).push([i.timeStamp,o])})}function n(i){Array.from(i.changedTouches).forEach(o=>{delete t[o.identifier]})}function r(i){var l;const o=(l=t[i])==null?void 0:l.values().reverse();if(!o)throw new Error(`No samples for touch id ${i}`);const a=o[0],s=[],c=[];for(const d of o){if(a[0]-d[0]>UQ)break;s.push({t:d[0],d:d[1].clientX}),c.push({t:d[0],d:d[1].clientY})}return{x:b_(s),y:b_(c),get direction(){const{x:d,y:f}=this,[b,x]=[Math.abs(d),Math.abs(f)];return b>x&&d>=0?"right":b>x&&d<=0?"left":x>b&&f>=0?"down":x>b&&f<=0?"up":GQ()}}}return{addMovement:e,endTouch:n,getVelocity:r}}function GQ(){throw new Error}function XQ(t){let{el:e,isActive:n,isTemporary:r,width:i,touchless:o,position:a}=t;u.onMounted(()=>{window.addEventListener("touchstart",g,{passive:!0}),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",p,{passive:!0})}),u.onBeforeUnmount(()=>{window.removeEventListener("touchstart",g),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",p)});const s=u.computed(()=>["left","right"].includes(a.value)),{addMovement:c,endTouch:l,getVelocity:d}=YQ();let f=!1;const b=u.shallowRef(!1),x=u.shallowRef(0),k=u.shallowRef(0);let E;function m(y,S){return(a.value==="left"?y:a.value==="right"?document.documentElement.clientWidth-y:a.value==="top"?y:a.value==="bottom"?document.documentElement.clientHeight-y:Su())-(S?i.value:0)}function h(y){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const T=a.value==="left"?(y-k.value)/i.value:a.value==="right"?(document.documentElement.clientWidth-y-k.value)/i.value:a.value==="top"?(y-k.value)/i.value:a.value==="bottom"?(document.documentElement.clientHeight-y-k.value)/i.value:Su();return S?Rr(T):T}function g(y){if(o.value)return;const S=y.changedTouches[0].clientX,T=y.changedTouches[0].clientY,C=25,M=a.value==="left"?S<C:a.value==="right"?S>document.documentElement.clientWidth-C:a.value==="top"?T<C:a.value==="bottom"?T>document.documentElement.clientHeight-C:Su(),A=n.value&&(a.value==="left"?S<i.value:a.value==="right"?S>document.documentElement.clientWidth-i.value:a.value==="top"?T<i.value:a.value==="bottom"?T>document.documentElement.clientHeight-i.value:Su());(M||A||n.value&&r.value)&&(E=[S,T],k.value=m(s.value?S:T,n.value),x.value=h(s.value?S:T),f=k.value>-20&&k.value<80,l(y),c(y))}function w(y){const S=y.changedTouches[0].clientX,T=y.changedTouches[0].clientY;if(f){if(!y.cancelable){f=!1;return}const M=Math.abs(S-E[0]),A=Math.abs(T-E[1]);(s.value?M>A&&M>3:A>M&&A>3)?(b.value=!0,f=!1):(s.value?A:M)>3&&(f=!1)}if(!b.value)return;y.preventDefault(),c(y);const C=h(s.value?S:T,!1);x.value=Math.max(0,Math.min(1,C)),C>1?k.value=m(s.value?S:T,!0):C<0&&(k.value=m(s.value?S:T,!1))}function p(y){if(f=!1,!b.value)return;c(y),b.value=!1;const S=d(y.changedTouches[0].identifier),T=Math.abs(S.x),C=Math.abs(S.y);(s.value?T>C&&T>400:C>T&&C>3)?n.value=S.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||Su()):n.value=x.value>.5}const v=u.computed(()=>b.value?{transform:a.value==="left"?`translateX(calc(-100% + ${x.value*i.value}px))`:a.value==="right"?`translateX(calc(100% - ${x.value*i.value}px))`:a.value==="top"?`translateY(calc(-100% + ${x.value*i.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${x.value*i.value}px))`:Su(),transition:"none"}:void 0);return wo(b,()=>{var T,C;const y=((T=e.value)==null?void 0:T.style.transform)??null,S=((C=e.value)==null?void 0:C.style.transition)??null;u.watchEffect(()=>{var M,A,P,L;(A=e.value)==null||A.style.setProperty("transform",((M=v.value)==null?void 0:M.transform)||"none"),(L=e.value)==null||L.style.setProperty("transition",((P=v.value)==null?void 0:P.transition)||null)}),u.onScopeDispose(()=>{var M,A;(M=e.value)==null||M.style.setProperty("transform",y),(A=e.value)==null||A.style.setProperty("transition",S)})}),{isDragging:b,dragProgress:x,dragStyles:v}}function Su(){throw new Error}const KQ=["start","end","left","right","top","bottom"],ZQ=Re({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>KQ.includes(t)},sticky:Boolean,...Ho(),...Ot(),...QM(),...jd({mobile:null}),...zo(),...yU(),...si(),...ln({tag:"nav"}),...wn()},"VNavigationDrawer"),JQ=et()({name:"VNavigationDrawer",props:ZQ(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{isRtl:o}=Bi(),{themeClasses:a}=Jn(t),{borderClasses:s}=Ca(t),{backgroundColorClasses:c,backgroundColorStyles:l}=li(()=>t.color),{elevationClasses:d}=Sa(t),{displayClasses:f,mobile:b}=Us(t),{roundedClasses:x}=Si(t),k=VT(),E=Lt(t,"modelValue",null,K=>!!K),{ssrBootStyles:m}=S0(),{scopeId:h}=ql(),g=u.ref(),w=u.shallowRef(!1),{runOpenDelay:p,runCloseDelay:v}=VM(t,K=>{w.value=K}),y=u.computed(()=>t.rail&&t.expandOnHover&&w.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),S=u.computed(()=>jb(t.location,o.value)),T=u.toRef(()=>t.persistent),C=u.computed(()=>!t.permanent&&(b.value||t.temporary)),M=u.computed(()=>t.sticky&&!C.value&&S.value!=="bottom");wo(()=>t.expandOnHover&&t.rail!=null,()=>{u.watch(w,K=>r("update:rail",!K))}),wo(()=>!t.disableResizeWatcher,()=>{u.watch(C,K=>!t.permanent&&u.nextTick(()=>E.value=!K))}),wo(()=>!t.disableRouteWatcher&&!!k,()=>{u.watch(k.currentRoute,()=>C.value&&(E.value=!1))}),u.watch(()=>t.permanent,K=>{K&&(E.value=!0)}),t.modelValue==null&&!C.value&&(E.value=t.permanent||!b.value);const{isDragging:A,dragProgress:P}=XQ({el:g,isActive:E,isTemporary:C,width:y,touchless:u.toRef(()=>t.touchless),position:S}),L=u.computed(()=>{const K=C.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):y.value;return A.value?K*P.value:K}),{layoutItemStyles:R,layoutItemScrimStyles:j}=wU({id:t.name,order:u.computed(()=>parseInt(t.order,10)),position:S,layoutSize:L,elementSize:y,active:u.readonly(E),disableTransitions:u.toRef(()=>A.value),absolute:u.computed(()=>t.absolute||M.value&&typeof z.value!="string")}),{isStuck:z,stickyStyles:$}=$Q({rootEl:g,isSticky:M,layoutItemStyles:R}),Y=li(()=>typeof t.scrim=="string"?t.scrim:null),ae=u.computed(()=>({...A.value?{opacity:P.value*.2,transition:"none"}:void 0,...j.value}));return Zi({VList:{bgColor:"transparent"}}),st(()=>{const K=i.image||t.image;return u.createElementVNode(u.Fragment,null,[u.createVNode(t.tag,u.mergeProps({ref:g,onMouseenter:p,onMouseleave:v,class:["v-navigation-drawer",`v-navigation-drawer--${S.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":w.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":C.value,"v-navigation-drawer--persistent":T.value,"v-navigation-drawer--active":E.value,"v-navigation-drawer--sticky":M.value},a.value,c.value,s.value,f.value,d.value,x.value,t.class],style:[l.value,R.value,m.value,$.value,t.style]},h,n),{default:()=>{var te,G,ue;return[K&&u.createElementVNode("div",{key:"image",class:"v-navigation-drawer__img"},[i.image?u.createVNode(en,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},i.image):u.createVNode(gp,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),i.prepend&&u.createElementVNode("div",{class:"v-navigation-drawer__prepend"},[(te=i.prepend)==null?void 0:te.call(i)]),u.createElementVNode("div",{class:"v-navigation-drawer__content"},[(G=i.default)==null?void 0:G.call(i)]),i.append&&u.createElementVNode("div",{class:"v-navigation-drawer__append"},[(ue=i.append)==null?void 0:ue.call(i)])]}}),u.createVNode(u.Transition,{name:"fade-transition"},{default:()=>[C.value&&(A.value||E.value)&&!!t.scrim&&u.createElementVNode("div",u.mergeProps({class:["v-navigation-drawer__scrim",Y.backgroundColorClasses.value],style:[ae.value,Y.backgroundColorStyles.value],onClick:()=>{T.value||(E.value=!1)}},h),null)]})])}),{isStuck:z}}}),QQ={key:3,class:"vx-navigation-drawer__top"},VQ={key:4,class:"vx-navigation-drawer__content"},qQ={key:6,class:"vx-navigation-drawer__bottom"};function eV(t,e,n,r,i,o){const a=u.resolveComponent("NavigationDrawer",!0),s=u.resolveComponent("TempVar");return u.openBlock(),u.createBlock(JQ,u.mergeProps({ref:"root",modelValue:t.cIsOpen,"onUpdate:modelValue":e[4]||(e[4]=c=>t.cIsOpen=c),class:["vx-navigation-drawer",t.isExpanded?"vx-navigation-drawer--expanded":"",t.variant?"vx-navigation-drawer--variant-"+t.variant:""],width:t.isExpanded?t.parentWidth():t.width,temporary:t.temporary},t.getContainerProps()),{default:u.withCtx(()=>[t.isMainMenuOpen?(u.openBlock(),u.createBlock(s,{key:0,define:{mm:t.mainMenuScope()}},{default:u.withCtx(({mm:c})=>[t.$slots.mainMenu?(u.openBlock(),u.createBlock(a,{key:0,variant:"menu","close-icon":"mdi-arrow-left",location:"left",style:u.normalizeStyle(c.drawerUpStyle),onClose:c.close,modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,title:t.mainMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"mainMenu",u.normalizeProps(u.guardReactiveProps(c)),void 0,!0)]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"mainMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)),void 0,!0)]),_:3},8,["define"])):t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(s,{key:1,define:{sms:t.secondaryMenuScope()}},{default:u.withCtx(({sms:c})=>[t.$slots.secondaryMenu?(u.openBlock(),u.createBlock(a,{key:0,"close-icon":"mdi-arrow-left",location:"right",variant:"menu",style:u.normalizeStyle(c.drawerUpStyle),onClose:l=>c.close(),modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,title:t.secondaryMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"secondaryMenu",u.normalizeProps(u.guardReactiveProps(c)),void 0,!0)]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"secondaryMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)),void 0,!0)]),_:3},8,["define"])):u.createCommentVNode("",!0),t.hasHeader&&!(t.isMainMenuOpen&&t.mainMenuUp)&&!(t.isSecondaryMenuOpen&&t.secondaryMenuUp)?(u.openBlock(),u.createElementBlock(u.Fragment,{key:2},[u.renderSlot(t.$slots,"prependHeader",{},void 0,!0),t.title||t.$slots.header||t.$slots.prependToolbar||t.$slots.appendToolbar||t.$slots.secondaryMenuContainer||t.$slots.secondaryMenu||t.expandable||t.closable?(u.openBlock(),u.createBlock(Zr,u.mergeProps({key:0,density:t.density},t.toolbarProps),u.createSlots({append:u.withCtx(()=>[u.renderSlot(t.$slots,"prependRightToolbarActions",{},void 0,!0),(t.$slots.secondaryMenuContainer||t.$slots.secondaryMenu)&&!t.isMainMenuOpen?(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-dots-vertical",onClick:e[1]||(e[1]=c=>t.isSecondaryMenuOpen=!t.isSecondaryMenuOpen)})):u.createCommentVNode("",!0),t.expandable?(u.openBlock(),u.createBlock(dt,{key:1,icon:t.isExpanded?"mdi-arrow-collapse":"mdi-arrow-expand",onClick:e[2]||(e[2]=c=>t.isExpanded=!t.isExpanded)},null,8,["icon"])):u.createCommentVNode("",!0),t.closable&&!t.isMainMenuOpen&&!t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(dt,{key:2,icon:t.closeIcon,onClick:e[3]||(e[3]=c=>t.cIsOpen=!1)},null,8,["icon"])):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"appendRightToolbarActions",{},void 0,!0)]),default:u.withCtx(()=>[u.renderSlot(t.$slots,"prependToolbar",{},void 0,!0),t.$slots.header?u.renderSlot(t.$slots,"header",{key:0},void 0,!0):t.title?(u.openBlock(),u.createBlock(as,{key:1,title:t.title},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.title),1)]),_:1},8,["title"])):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"appendToolbar",{},void 0,!0)]),_:2},[t.$slots.mainMenu||t.$slots.mainMenuContainer||t.$slots.prependLeftToolbarActions||t.$slots.appendLeftToolbarActions?{name:"prepend",fn:u.withCtx(()=>[u.renderSlot(t.$slots,"prependLeftToolbarActions",{},void 0,!0),t.isMainMenuOpen?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-menu",onClick:e[0]||(e[0]=c=>t.isMainMenuOpen=!t.isMainMenuOpen)})),u.renderSlot(t.$slots,"appendLeftToolbarActions",{},void 0,!0)]),key:"0"}:void 0]),1040,["density"])):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"appendHeader",{},void 0,!0),u.createVNode(Mn)],64)):u.createCommentVNode("",!0),t.$slots.top?(u.openBlock(),u.createElementBlock("div",QQ,[u.renderSlot(t.$slots,"top",{},void 0,!0)])):u.createCommentVNode("",!0),t.$slots.default?(u.openBlock(),u.createElementBlock("div",VQ,[u.renderSlot(t.$slots,"default",{},void 0,!0)])):t.$slots.body?(u.openBlock(),u.createBlock(Dr,{key:5,class:"vx-navigation-drawer__content"},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"body",{},void 0,!0)]),_:3})):u.createCommentVNode("",!0),t.$slots.bottom?(u.openBlock(),u.createElementBlock("div",qQ,[u.renderSlot(t.$slots,"bottom",{},void 0,!0)])):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"portals",{},void 0,!0)]),_:3},16,["modelValue","class","width","temporary"])}const xf=nl(zQ,[["render",eV],["__scopeId","data-v-c220509a"]]),ku={closeChanging:!1,windowOverflowToggler:!1},tV=u.defineComponent({name:"Dialog",components:{TempVar:dx,NavigationDrawer:xf},props:{setup:{type:Function,default:()=>()=>{}},direction:{type:String,default:"left"},density:{},closeIcon:{type:String,default:"mdi-close"},containerProps:{type:Object,default:()=>({})},toolbarProps:{type:Object,default:()=>({})},expandable:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},title:{type:String,default:""},mainMenuTitle:{type:String,default:""},secondaryMenuTitle:{type:String,default:""},mainMenuUp:{type:Boolean,default:!1},secondaryMenuUp:{type:Boolean,default:!1},modelValue:{}},emits:["update:modelValue","open","close"],setup(t,{slots:e}){t.setup&&t.setup()},data:t=>({isOpen:u.useModel(t,"modelValue"),isExpanded:!1,isMainMenuOpen:!1,isSecondaryMenuOpen:!1}),computed:{cIsOpen:{get(){return this.isOpen},set(t){ku.closeChanging=!0,this.isOpen=t,this.$emit(t?"open":"close"),t?this.openCb():this.closeCb()}}},methods:{computed:u.computed,openCb(){var e;const t=(e=window.document.body.parentElement)==null?void 0:e.classList;ku.windowOverflowToggler=!t.contains("overflow-hidden"),ku.windowOverflowToggler&&t.add("overflow-hidden")},closeCb(){var t;ku.windowOverflowToggler&&((t=window.document.body.parentElement)==null||t.classList.remove("overflow-hidden"))},hasHeader(){return this.expandable||this.closable||this.$slots.header||!1},mainMenuScope(){return{x:!0,open:this.isMainMenuOpen,density:this.density,close:()=>this.isMainMenuOpen=!1,class:["vx-dialog-drawer__main-menu",this.mainMenuUp?"vx-dialog-drawer__main-menu__up":""],drawerUpStyle:{top:0,height:"100%"}}},secondaryMenuScope(){return{x:!0,open:this.isSecondaryMenuOpen,density:this.density,close:()=>this.isSecondaryMenuOpen=!1,class:["vx-dialog-drawer__secondary-menu",this.secondaryMenuUp?"vx-dialog-drawer__secondary-menu__up":""],drawerUpStyle:{top:0,height:"100%"}}},activatorScope(){const t=this;return{isActive:u.computed({set(e){t.cIsOpen=e},get(){return t.cIsOpen}})}}},watch:{modelValue(t){t&&this.isExpanded&&(this.isExpanded=!1),ku.closeChanging||(this.$emit(t?"open":"close"),t?this.openCb():this.closeCb()),ku.closeChanging=!1}},mounted(){this.isOpen&&this.openCb()}}),nV={key:3};function rV(t,e,n,r,i,o){const a=xf,s=u.resolveComponent("TempVar");return u.openBlock(),u.createBlock(eo,u.mergeProps({modelValue:t.cIsOpen,"onUpdate:modelValue":e[4]||(e[4]=c=>t.cIsOpen=c),class:["vx-dialog",t.isExpanded?"vx-dialog-expanded":""]},t.containerProps,{fullscreen:t.isExpanded,scrollable:""}),u.createSlots({default:u.withCtx(()=>[u.createVNode(jn,null,{default:u.withCtx(()=>[t.isMainMenuOpen?(u.openBlock(),u.createBlock(s,{key:0,define:{mm:t.mainMenuScope()}},{default:u.withCtx(({mm:c})=>[t.$slots.mainMenu?(u.openBlock(),u.createBlock(a,{key:0,variant:"menu","close-icon":"mdi-arrow-left",location:"left",style:u.normalizeStyle(c.drawerUpStyle),onClose:c.close,modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,title:t.mainMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"mainMenu",u.normalizeProps(u.guardReactiveProps(c)))]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"mainMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)))]),_:3},8,["define"])):t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(s,{key:1,define:{s:t.secondaryMenuScope()}},{default:u.withCtx(({s:c})=>[t.$slots.secondaryMenu?(u.openBlock(),u.createBlock(a,{key:0,variant:"menu","close-icon":"mdi-arrow-left",location:"right",style:u.normalizeStyle(c.drawerUpStyle),onClose:l=>c.close(),modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,title:t.secondaryMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"secondaryMenu",u.normalizeProps(u.guardReactiveProps(c)))]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"secondaryMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)))]),_:3},8,["define"])):u.createCommentVNode("",!0),t.hasHeader&&!(t.isMainMenuOpen&&t.mainMenuUp)&&!(t.isSecondaryMenuOpen&&t.secondaryMenuUp)?(u.openBlock(),u.createElementBlock(u.Fragment,{key:2},[u.renderSlot(t.$slots,"prependHeader"),u.createVNode(Zr,u.mergeProps({density:t.density},t.toolbarProps),u.createSlots({append:u.withCtx(()=>[u.renderSlot(t.$slots,"prependRightToolbarActions"),(t.$slots.secondaryMenuContainer||t.$slots.secondaryMenu)&&!t.isMainMenuOpen?(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-dots-vertical",onClick:e[1]||(e[1]=c=>t.isSecondaryMenuOpen=!t.isSecondaryMenuOpen)})):u.createCommentVNode("",!0),t.expandable?(u.openBlock(),u.createBlock(dt,{key:1,icon:t.isExpanded?"mdi-arrow-collapse":"mdi-arrow-expand",onClick:e[2]||(e[2]=c=>t.isExpanded=!t.isExpanded)},null,8,["icon"])):u.createCommentVNode("",!0),t.closable&&!t.isMainMenuOpen&&!t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(dt,{key:2,icon:t.closeIcon,onClick:e[3]||(e[3]=c=>t.cIsOpen=!1)},null,8,["icon"])):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"appendRightToolbarActions")]),default:u.withCtx(()=>[u.renderSlot(t.$slots,"prependToolbar"),t.$slots.header?u.renderSlot(t.$slots,"header",{key:0}):t.title?(u.openBlock(),u.createBlock(as,{key:1},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.title),1)]),_:1})):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"appendToolbar")]),_:2},[t.$slots.mainMenu||t.$slots.mainMenuContainer||t.$slots.prependLeftToolbarActions||t.$slots.appendLeftToolbarActions?{name:"prepend",fn:u.withCtx(()=>[u.renderSlot(t.$slots,"prependLeftToolbarActions"),t.isMainMenuOpen?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-menu",onClick:e[0]||(e[0]=c=>t.isMainMenuOpen=!t.isMainMenuOpen)})),u.renderSlot(t.$slots,"appendLeftToolbarActions")]),key:"0"}:void 0]),1040,["density"]),u.renderSlot(t.$slots,"appendHeader"),u.createVNode(Mn)],64)):u.createCommentVNode("",!0),t.$slots.top?(u.openBlock(),u.createElementBlock("div",nV,[u.renderSlot(t.$slots,"top")])):u.createCommentVNode("",!0),t.$slots.body?(u.openBlock(),u.createBlock(Dr,{key:4,style:{"background-color":"rgba(var(--v-theme-background))"}},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"body",u.normalizeProps(u.guardReactiveProps(t.activatorScope())))]),_:3})):u.renderSlot(t.$slots,"default",{key:5}),t.$slots.bottom?(u.openBlock(),u.createElementBlock(u.Fragment,{key:6},[u.createVNode(Mn),u.createVNode(ki,null,{default:u.withCtx(()=>[u.renderSlot(t.$slots,"bottom",{isActive:t.computed({set(c){t.cIsOpen=c},get(){return t.cIsOpen}})})]),_:3})],64)):u.createCommentVNode("",!0),u.renderSlot(t.$slots,"portals")]),_:3})]),_:2},[t.$slots.activator?{name:"activator",fn:u.withCtx(c=>[u.renderSlot(t.$slots,"activator",u.normalizeProps(u.guardReactiveProps(c??{})))]),key:"0"}:void 0]),1040,["modelValue","class","fullscreen"])}const fx=nl(tV,[["render",rV]]);function hx(t,e){return u.getCurrentScope()?(u.onScopeDispose(t,e),!0):!1}const w_=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const iV=Object.prototype.toString,oV=t=>iV.call(t)==="[object Object]";function px(t){return Array.isArray(t)?t:[t]}function aV(t){return u.getCurrentInstance()}function sV(t,e=!0,n){aV()?u.onMounted(t,n):e?t():u.nextTick(t)}function lV(t,e,n){return u.watch(t,e,{...n,immediate:!0})}const x_=w_?window:void 0,cV=w_?window.document:void 0;function Eu(t){var e;const n=u.toValue(t);return(e=n==null?void 0:n.$el)!==null&&e!==void 0?e:n}function C_(...t){const e=[],n=()=>{e.forEach(s=>s()),e.length=0},r=(s,c,l,d)=>(s.addEventListener(c,l,d),()=>s.removeEventListener(c,l,d)),i=u.computed(()=>{const s=px(u.toValue(t[0])).filter(c=>c!=null);return s.every(c=>typeof c!="string")?s:void 0}),o=lV(()=>{var s,c;return[(s=(c=i.value)===null||c===void 0?void 0:c.map(l=>Eu(l)))!==null&&s!==void 0?s:[x_].filter(l=>l!=null),px(u.toValue(i.value?t[1]:t[0])),px(u.unref(i.value?t[2]:t[1])),u.toValue(i.value?t[3]:t[2])]},([s,c,l,d])=>{if(n(),!(s!=null&&s.length)||!(c!=null&&c.length)||!(l!=null&&l.length))return;const f=oV(d)?{...d}:d;e.push(...s.flatMap(b=>c.flatMap(x=>l.map(k=>r(b,x,k,f)))))},{flush:"post"}),a=()=>{o(),n()};return hx(n),a}function uV(){const t=u.shallowRef(!1),e=u.getCurrentInstance();return e&&u.onMounted(()=>{t.value=!0},e),t}function S_(t){const e=uV();return u.computed(()=>(e.value,!!t()))}function dV(t,e,n={}){const{window:r=x_,...i}=n;let o;const a=S_(()=>r&&"ResizeObserver"in r),s=()=>{o&&(o.disconnect(),o=void 0)},c=u.watch(u.computed(()=>{const d=u.toValue(t);return Array.isArray(d)?d.map(f=>Eu(f)):[Eu(d)]}),d=>{if(s(),a.value&&r){o=new ResizeObserver(e);for(const f of d)f&&o.observe(f,i)}},{immediate:!0,flush:"post"}),l=()=>{s(),c()};return hx(l),{isSupported:a,stop:l}}const k_=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function fV(t,e={}){const{document:n=cV,autoExit:r=!1}=e,i=u.computed(()=>{var g;return(g=Eu(t))!==null&&g!==void 0?g:n==null?void 0:n.documentElement}),o=u.shallowRef(!1),a=u.computed(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(g=>n&&g in n||i.value&&g in i.value)),s=u.computed(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(g=>n&&g in n||i.value&&g in i.value)),c=u.computed(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(g=>n&&g in n||i.value&&g in i.value)),l=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(g=>n&&g in n),d=S_(()=>i.value&&n&&a.value!==void 0&&s.value!==void 0&&c.value!==void 0),f=()=>l?(n==null?void 0:n[l])===i.value:!1,b=()=>{if(c.value){if(n&&n[c.value]!=null)return n[c.value];{const g=i.value;if((g==null?void 0:g[c.value])!=null)return!!g[c.value]}}return!1};async function x(){if(!(!d.value||!o.value)){if(s.value)if((n==null?void 0:n[s.value])!=null)await n[s.value]();else{const g=i.value;(g==null?void 0:g[s.value])!=null&&await g[s.value]()}o.value=!1}}async function k(){if(!d.value||o.value)return;b()&&await x();const g=i.value;a.value&&(g==null?void 0:g[a.value])!=null&&(await g[a.value](),o.value=!0)}async function E(){await(o.value?x():k())}const m=()=>{const g=b();(!g||g&&f())&&(o.value=g)},h={capture:!1,passive:!0};return C_(n,k_,m,h),C_(()=>Eu(i),k_,m,h),sV(m,!1),r&&hx(x),{isSupported:d,isFullscreen:o,enter:k,exit:x,toggle:E}}const mx={closeChanging:!1},hV=u.defineComponent({name:"Card",components:{TempVar:dx,NavigationDrawer:xf},props:{direction:{type:String,default:"left"},density:{},closeIcon:{type:String,default:"mdi-close"},containerProps:{type:Object,default:()=>({})},toolbarProps:{type:Object,default:()=>({})},expandable:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},title:{type:String,default:""},mainMenuTitle:{type:String,default:""},secondaryMenuTitle:{type:String,default:""},mainMenuUp:{type:Boolean,default:!1},secondaryMenuUp:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},expandWidth:{},cardProps:{type:Object,default:()=>({})},fullscreen:{type:Boolean,default:!1}},emits:["update:modelValue","open","close"],data(t){const e=u.useTemplateRef("root"),{toggle:n}=fV(e);return{root:e,isOpen:u.useModel(t,"modelValue"),isExpanded:!1,isMainMenuOpen:!1,isSecondaryMenuOpen:!1,fullScreenValue:!1,_toggleFullScreen:n}},computed:{cIsOpen:{get(){return this.isOpen},set(t){mx.closeChanging=!0,this.isOpen=t,this.$emit(t?"open":"close")}},cFullScreen:{get(){return this.fullScreenValue},set(t){this.fullScreenValue=!0}}},methods:{hasHeader(){return this.expandable||this.fullscreen||this.closable||this.$slots.header||!1},mainMenuScope(){return{x:!0,open:this.isMainMenuOpen,density:this.density,close:()=>this.isMainMenuOpen=!1,class:["vx-card-drawer__main-menu",this.mainMenuUp?"vx-card-drawer__main-menu__up":""],drawerUpStyle:{height:"100%"}}},secondaryMenuScope(){return{x:!0,open:this.isSecondaryMenuOpen,density:this.density,close:()=>this.isSecondaryMenuOpen=!1,class:["vx-card-drawer__secondary-menu",this.secondaryMenuUp?"vx-card-drawer__secondary-menu__up":""],drawerUpStyle:{height:"100%"}}},toggleFullScreen(){this.fullScreenValue=!this.fullScreenValue,this._toggleFullScreen()}},watch:{modelValue(t){t&&this.isExpanded&&(this.isExpanded=!1),mx.closeChanging||this.$emit(t?"open":"close"),mx.closeChanging=!1}}}),pV={key:3};function mV(t,e,n,r,i,o){const a=xf,s=u.resolveComponent("TempVar");return t.cIsOpen?(u.openBlock(),u.createBlock(jn,u.mergeProps({key:0,ref:"root",fullscreen:t.fullScreenValue},t.cardProps),{default:u.withCtx(()=>[t.isMainMenuOpen?(u.openBlock(),u.createBlock(s,{key:0,define:{s:t.mainMenuScope()}},{default:u.withCtx(({s:c})=>[t.$slots.mainMenu?(u.openBlock(),u.createBlock(a,{key:0,variant:"menu","close-icon":"mdi-arrow-left",location:"left",style:u.normalizeStyle(c.drawerUpStyle),onClose:c.close,modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,expandable:"",title:t.mainMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"mainMenu",u.normalizeProps(u.guardReactiveProps(c)))]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"mainMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)))]),_:3},8,["define"])):t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(s,{key:1,define:{s:t.secondaryMenuScope()}},{default:u.withCtx(({s:c})=>[t.$slots.secondaryMenu?(u.openBlock(),u.createBlock(a,{key:0,variant:"menu","close-icon":"mdi-arrow-left",location:"right",style:u.normalizeStyle(c.drawerUpStyle),onClose:l=>c.close(),modelValue:c.open,"onUpdate:modelValue":l=>c.open=l,temporary:"",closable:"",density:t.density,title:t.secondaryMenuTitle},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"secondaryMenu",u.normalizeProps(u.guardReactiveProps(c)))]),_:2},1032,["style","onClose","modelValue","onUpdate:modelValue","density","title"])):u.renderSlot(t.$slots,"secondaryMenuContainer",u.normalizeProps(u.mergeProps({key:1},c)))]),_:3},8,["define"])):u.createCommentVNode("",!0),t.hasHeader&&!(t.isMainMenuOpen&&t.mainMenuUp)&&!(t.isSecondaryMenuOpen&&t.secondaryMenuUp)?(u.openBlock(),u.createElementBlock(u.Fragment,{key:2},[u.renderSlot(t.$slots,"prependHeader"),u.createVNode(Zr,u.mergeProps({density:t.density},t.toolbarProps),u.createSlots({append:u.withCtx(()=>[u.createVNode(Ws,{"hide-on-leave":""},{default:u.withCtx(()=>[(t.$slots.secondaryMenuContainer||t.$slots.secondaryMenu)&&!t.isMainMenuOpen?(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-dots-vertical",onClick:e[1]||(e[1]=c=>t.isSecondaryMenuOpen=!t.isSecondaryMenuOpen)})):u.createCommentVNode("",!0)]),_:1}),u.createVNode(Ws,{"hide-on-leave":""},{default:u.withCtx(()=>[t.expandable&&!t.fullScreenValue?(u.openBlock(),u.createBlock(dt,{key:0,icon:t.isExpanded?"mdi-arrow-collapse":"mdi-arrow-expand",onClick:e[2]||(e[2]=c=>t.isExpanded=!t.isExpanded)},null,8,["icon"])):u.createCommentVNode("",!0)]),_:1}),u.createVNode(Ws,{"hide-on-leave":""},{default:u.withCtx(()=>[t.fullscreen?(u.openBlock(),u.createBlock(dt,{key:0,icon:t.fullScreenValue?"mdi-fullscreen-exit":"mdi-fullscreen",onClick:t.toggleFullScreen},null,8,["icon","onClick"])):u.createCommentVNode("",!0)]),_:1}),u.createVNode(Ws,{"hide-on-leave":""},{default:u.withCtx(()=>[t.closable&&!t.isMainMenuOpen&&!t.isSecondaryMenuOpen?(u.openBlock(),u.createBlock(dt,{key:0,icon:t.closeIcon,onClick:e[3]||(e[3]=c=>t.cIsOpen=!1)},null,8,["icon"])):u.createCommentVNode("",!0)]),_:1})]),default:u.withCtx(()=>[t.$slots.header?u.renderSlot(t.$slots,"header",{key:0}):t.title?(u.openBlock(),u.createBlock(as,{key:1},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(t.title),1)]),_:1})):u.createCommentVNode("",!0)]),_:2},[t.$slots.mainMenu||t.$slots.mainMenuContainer?{name:"prepend",fn:u.withCtx(()=>[u.createVNode(Ws,{"hide-on-leave":""},{default:u.withCtx(()=>[t.isMainMenuOpen?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(dt,{key:0,icon:"mdi-menu",onClick:e[0]||(e[0]=c=>t.isMainMenuOpen=!t.isMainMenuOpen)}))]),_:1})]),key:"0"}:void 0]),1040,["density"]),u.renderSlot(t.$slots,"appendHeader"),u.createVNode(Mn)],64)):u.createCommentVNode("",!0),t.$slots.top?(u.openBlock(),u.createElementBlock("div",pV,[u.renderSlot(t.$slots,"top")])):u.createCommentVNode("",!0),t.$slots.body?(u.openBlock(),u.createBlock(Dr,{key:4,style:{"background-color":"rgba(var(--v-theme-background))"}},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"body")]),_:3})):u.renderSlot(t.$slots,"default",{key:5}),t.$slots.bottom?(u.openBlock(),u.createBlock(ki,{key:6},{default:u.withCtx(()=>[u.renderSlot(t.$slots,"bottom")]),_:3})):u.createCommentVNode("",!0)]),_:3},16,["fullscreen"])):u.createCommentVNode("",!0)}const gV=nl(hV,[["render",mV]]),E_=Symbol.for("vuetify:v-window"),T_=Symbol.for("vuetify:v-window-group"),M_=Re({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ot(),...ln(),...wn()},"VWindow"),gx=et()({name:"VWindow",directives:{vTouch:J0},props:M_(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t),{isRtl:i}=Bi(),{t:o}=ci(),a=cp(t,T_),s=u.ref(),c=u.computed(()=>i.value?!t.reverse:t.reverse),l=u.shallowRef(!1),d=u.computed(()=>{const p=t.direction==="vertical"?"y":"x",y=(c.value?!l.value:l.value)?"-reverse":"";return`v-window-${p}${y}-transition`}),f=u.shallowRef(0),b=u.ref(void 0),x=u.computed(()=>a.items.value.findIndex(p=>a.selected.value.includes(p.id)));u.watch(x,(p,v)=>{const y=a.items.value.length,S=y-1;y<=2?l.value=p<v:p===S&&v===0?l.value=!0:p===0&&v===S?l.value=!1:l.value=p<v}),u.provide(E_,{transition:d,isReversed:l,transitionCount:f,transitionHeight:b,rootRef:s});const k=u.toRef(()=>t.continuous||x.value!==0),E=u.toRef(()=>t.continuous||x.value!==a.items.value.length-1);function m(){k.value&&a.prev()}function h(){E.value&&a.next()}const g=u.computed(()=>{const p=[],v={icon:i.value?t.nextIcon:t.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:a.prev,"aria-label":o("$vuetify.carousel.prev")};p.push(k.value?n.prev?n.prev({props:v}):u.createVNode(dt,v,null):u.createElementVNode("div",null,null));const y={icon:i.value?t.prevIcon:t.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:a.next,"aria-label":o("$vuetify.carousel.next")};return p.push(E.value?n.next?n.next({props:y}):u.createVNode(dt,y,null):u.createElementVNode("div",null,null)),p}),w=u.computed(()=>t.touch===!1?t.touch:{...{left:()=>{c.value?m():h()},right:()=>{c.value?h():m()},start:v=>{let{originalEvent:y}=v;y.stopPropagation()}},...t.touch===!0?{}:t.touch});return st(()=>u.withDirectives(u.createVNode(t.tag,{ref:s,class:u.normalizeClass(["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover","v-window--vertical-arrows":!!t.verticalArrows},r.value,t.class]),style:u.normalizeStyle(t.style)},{default:()=>{var p,v;return[u.createElementVNode("div",{class:"v-window__container",style:{height:b.value}},[(p=n.default)==null?void 0:p.call(n,{group:a}),t.showArrows!==!1&&u.createElementVNode("div",{class:u.normalizeClass(["v-window__controls",{"v-window__controls--left":t.verticalArrows==="left"||t.verticalArrows===!0},{"v-window__controls--right":t.verticalArrows==="right"}])},[g.value])]),(v=n.additional)==null?void 0:v.call(n,{group:a})]}}),[[J0,w.value]])),{group:a}}}),I_=Re({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ot(),...Zb(),...eI()},"VWindowItem"),vx=et()({name:"VWindowItem",directives:{vTouch:J0},props:I_(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=u.inject(E_),i=Jb(t,T_),{isBooted:o}=S0();if(!r||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=u.shallowRef(!1),s=u.computed(()=>o.value&&(r.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function c(){!a.value||!r||(a.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function l(){var k;a.value||!r||(a.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=gt((k=r.rootRef.value)==null?void 0:k.clientHeight)),r.transitionCount.value+=1)}function d(){c()}function f(k){a.value&&u.nextTick(()=>{!s.value||!a.value||!r||(r.transitionHeight.value=gt(k.clientHeight))})}const b=u.computed(()=>{const k=r.isReversed.value?t.reverseTransition:t.transition;return s.value?{name:typeof k!="string"?r.transition.value:k,onBeforeEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:l,onAfterLeave:c,onLeaveCancelled:d,onEnter:f}:!1}),{hasContent:x}=tI(t,i.isSelected);return st(()=>u.createVNode(Yo,{transition:b.value,disabled:!o.value},{default:()=>{var k;return[u.withDirectives(u.createElementVNode("div",{class:u.normalizeClass(["v-window-item",i.selectedClass.value,t.class]),style:u.normalizeStyle(t.style)},[x.value&&((k=n.default)==null?void 0:k.call(n))]),[[u.vShow,i.isSelected.value]])]}})),{groupItem:i}}});function vV(){function t(n){var i,o;return[...((i=n.dataTransfer)==null?void 0:i.items)??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean).length>0||[...((o=n.dataTransfer)==null?void 0:o.files)??[]].length>0}async function e(n){var o,a;const r=[],i=[...((o=n.dataTransfer)==null?void 0:o.items)??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean);if(i.length)for(const s of i){const c=await O_(s,A_(".",s));r.push(...c.map(l=>l.file))}else r.push(...((a=n.dataTransfer)==null?void 0:a.files)??[]);return r}return{handleDrop:e,hasFilesOrFolders:t}}function O_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,r)=>{t.isFile?t.file(o=>n([{file:o,path:e}]),r):t.isDirectory&&t.createReader().readEntries(async o=>{const a=[];for(const s of o)a.push(...await O_(s,A_(e,s)));n(a)})})}function A_(t,e){return e.isDirectory?`${t}/${e.name}`:t}const yV=Re({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(Number(t))},...Wd({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:t=>t.multiple?[]:null,validator:t=>Zn(t).every(e=>e!=null&&typeof e=="object")},...Sp({clearable:!0})},"VFileInput"),bV=et()({name:"VFileInput",inheritAttrs:!1,props:yV(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{t:o}=ci(),a=Lt(t,"modelValue",t.modelValue,j=>Zn(j),j=>!t.multiple&&Array.isArray(j)?j[0]:j),{isFocused:s,focus:c,blur:l}=Ud(t),d=u.computed(()=>typeof t.showSize!="boolean"?t.showSize:void 0),f=u.computed(()=>(a.value??[]).reduce((j,z)=>{let{size:$=0}=z;return j+$},0)),b=u.computed(()=>xT(f.value,d.value)),x=u.computed(()=>(a.value??[]).map(j=>{const{name:z="",size:$=0}=j;return t.showSize?`${z} (${xT($,d.value)})`:z})),k=u.computed(()=>{var z;const j=((z=a.value)==null?void 0:z.length)??0;return t.showSize?o(t.counterSizeString,j,b.value):o(t.counterString,j)}),E=u.ref(),m=u.ref(),h=u.ref(),g=u.toRef(()=>s.value||t.active),w=u.computed(()=>["plain","underlined"].includes(t.variant)),p=u.shallowRef(!1),{handleDrop:v,hasFilesOrFolders:y}=vV();function S(){var j;h.value!==document.activeElement&&((j=h.value)==null||j.focus()),s.value||c()}function T(j){var z;(z=h.value)==null||z.click()}function C(j){r("mousedown:control",j)}function M(j){var z;(z=h.value)==null||z.click(),r("click:control",j)}function A(j){j.stopPropagation(),S(),u.nextTick(()=>{a.value=[],ep(t["onClick:clear"],j)})}function P(j){j.preventDefault(),j.stopImmediatePropagation(),p.value=!0}function L(j){j.preventDefault(),p.value=!1}async function R(j){if(j.preventDefault(),j.stopImmediatePropagation(),p.value=!1,!h.value||!y(j))return;const z=new DataTransfer;for(const $ of await v(j))z.items.add($);h.value.files=z.files,h.value.dispatchEvent(new Event("change",{bubbles:!0}))}return u.watch(a,j=>{(!Array.isArray(j)||!j.length)&&h.value&&(h.value.value="")}),st(()=>{const j=!!(i.counter||t.counter),z=!!(j||i.details),[$,Y]=Cd(n),{modelValue:ae,...K}=Ta.filterProps(t),te=au.filterProps(t);return u.createVNode(Ta,u.mergeProps({ref:E,modelValue:t.multiple?a.value:a.value[0],class:["v-file-input",{"v-file-input--chips":!!t.chips,"v-file-input--dragging":p.value,"v-file-input--hide":t.hideInput,"v-input--plain-underlined":w.value},t.class],style:t.style,"onClick:prepend":T},$,K,{centerAffix:!w.value,focused:s.value}),{...i,default:G=>{let{id:ue,isDisabled:J,isDirty:be,isReadonly:de,isValid:ce,hasDetails:V}=G;return u.createVNode(au,u.mergeProps({ref:m,prependIcon:t.prependIcon,onMousedown:C,onClick:M,"onClick:clear":A,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},te,{id:ue.value,active:g.value||be.value,dirty:be.value||t.dirty,disabled:J.value,focused:s.value,details:V.value,error:ce.value===!1,onDragover:P,onDrop:R}),{...i,default:ne=>{var he;let{props:{class:Q,...Z}}=ne;return u.createElementVNode(u.Fragment,null,[u.createElementVNode("input",u.mergeProps({ref:h,type:"file",readonly:de.value,disabled:J.value,multiple:t.multiple,name:t.name,onClick:X=>{X.stopPropagation(),de.value&&X.preventDefault(),S()},onChange:X=>{if(!X.target)return;const re=X.target;a.value=[...re.files??[]]},onDragleave:L,onFocus:S,onBlur:l},Z,Y),null),u.createElementVNode("div",{class:u.normalizeClass(Q)},[!!((he=a.value)!=null&&he.length)&&!t.hideInput&&(i.selection?i.selection({fileNames:x.value,totalBytes:f.value,totalBytesReadable:b.value}):t.chips?x.value.map(X=>u.createVNode(Gs,{key:X,size:"small",text:X},null)):x.value.join(", "))])])}})},details:z?G=>{var ue,J;return u.createElementVNode(u.Fragment,null,[(ue=i.details)==null?void 0:ue.call(i,G),j&&u.createElementVNode(u.Fragment,null,[u.createElementVNode("span",null,null),u.createVNode(m0,{active:!!((J=a.value)!=null&&J.length),value:k.value,disabled:t.disabled},i.counter)])])}:void 0})}),qi({},E,m,h)}}),wV=Re({...Ot(),...w9()},"VForm"),__=et()({name:"VForm",props:wV(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=x9(t),o=u.ref();function a(c){c.preventDefault(),i.reset()}function s(c){const l=c,d=i.validate();l.then=d.then.bind(d),l.catch=d.catch.bind(d),l.finally=d.finally.bind(d),r("submit",l),l.defaultPrevented||d.then(f=>{var x;let{valid:b}=f;b&&((x=o.value)==null||x.submit())}),l.preventDefault()}return st(()=>{var c;return u.createElementVNode("form",{ref:o,class:u.normalizeClass(["v-form",t.class]),style:u.normalizeStyle(t.style),novalidate:!0,onReset:a,onSubmit:s},[(c=n.default)==null?void 0:c.call(n,i)])}),qi(i,o)}}),xV=Re({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Sr(g_(),["modelValue"])},"VSnackbarQueue"),CV=et()({name:"VSnackbarQueue",props:xV(),emits:{"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const{t:i}=ci(),o=u.shallowRef(!1),a=u.shallowRef(!1),s=u.shallowRef();u.watch(()=>t.modelValue.length,(b,x)=>{!a.value&&b>x&&l()}),u.watch(o,b=>{b&&(a.value=!0)});function c(){t.modelValue.length?l():(s.value=void 0,a.value=!1)}function l(){const[b,...x]=t.modelValue;n("update:modelValue",x),s.value=typeof b=="string"?{text:b}:b,u.nextTick(()=>{o.value=!0})}function d(){o.value=!1}const f=u.computed(()=>({color:typeof t.closable=="string"?t.closable:void 0,text:i(t.closeText)}));st(()=>{const b=!!(t.closable||r.actions),{modelValue:x,...k}=ux.filterProps(t);return u.createElementVNode(u.Fragment,null,[a.value&&!!s.value&&(r.default?u.createVNode(en,{defaults:{VSnackbar:s.value}},{default:()=>[r.default({item:s.value})]}):u.createVNode(ux,u.mergeProps(k,s.value,{modelValue:o.value,"onUpdate:modelValue":E=>o.value=E,onAfterLeave:c}),{text:r.text?()=>{var E;return(E=r.text)==null?void 0:E.call(r,{item:s.value})}:void 0,actions:b?()=>u.createElementVNode(u.Fragment,null,[r.actions?u.createVNode(en,{defaults:{VBtn:f.value}},{default:()=>[r.actions({item:s.value,props:{onClick:d}})]}):u.createVNode(dt,u.mergeProps(f.value,{onClick:d}),null)]):void 0}))])})}}),yx=Symbol.for("vuetify:v-tabs"),SV=Re({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Sr(n0({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),D_=et()({name:"VTab",props:SV(),setup(t,e){let{slots:n,attrs:r}=e;const{textColorClasses:i,textColorStyles:o}=Ji(()=>t.sliderColor),a=u.ref(),s=u.ref(),c=u.computed(()=>t.direction==="horizontal"),l=u.computed(()=>{var f,b;return((b=(f=a.value)==null?void 0:f.group)==null?void 0:b.isSelected.value)??!1});function d(f){var x,k;let{value:b}=f;if(b){const E=(k=(x=a.value)==null?void 0:x.$el.parentElement)==null?void 0:k.querySelector(".v-tab--selected .v-tab__slider"),m=s.value;if(!E||!m)return;const h=getComputedStyle(E).color,g=E.getBoundingClientRect(),w=m.getBoundingClientRect(),p=c.value?"x":"y",v=c.value?"X":"Y",y=c.value?"right":"bottom",S=c.value?"width":"height",T=g[p],C=w[p],M=T>C?g[y]-w[y]:g[p]-w[p],A=Math.sign(M)>0?c.value?"right":"bottom":Math.sign(M)<0?c.value?"left":"top":"center",L=(Math.abs(M)+(Math.sign(M)<0?g[S]:w[S]))/Math.max(g[S],w[S])||0,R=g[S]/w[S]||0,j=1.5;Zl(m,{backgroundColor:[h,"currentcolor"],transform:[`translate${v}(${M}px) scale${v}(${R})`,`translate${v}(${M/j}px) scale${v}(${(L-1)/j+1})`,"none"],transformOrigin:Array(3).fill(A)},{duration:225,easing:Ad})}}return st(()=>{const f=dt.filterProps(t);return u.createVNode(dt,u.mergeProps({symbol:yx,ref:a,class:["v-tab",t.class],style:t.style,tabindex:l.value?0:-1,role:"tab","aria-selected":String(l.value),active:!1},f,r,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>{var b;return u.createElementVNode(u.Fragment,null,[((b=n.default)==null?void 0:b.call(n))??t.text,!t.hideSlider&&u.createElementVNode("div",{ref:s,class:u.normalizeClass(["v-tab__slider",i.value]),style:u.normalizeStyle(o.value)},null)])}})}),qi({},a)}}),kV=Re({...Sr(M_(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),EV=et()({name:"VTabsWindow",props:kV(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=u.inject(yx,null),i=Lt(t,"modelValue"),o=u.computed({get(){var a;return i.value!=null||!r?i.value:(a=r.items.value.find(s=>r.selected.value.includes(s.id)))==null?void 0:a.value},set(a){i.value=a}});return st(()=>{const a=gx.filterProps(t);return u.createVNode(gx,u.mergeProps({_as:"VTabsWindow"},a,{modelValue:o.value,"onUpdate:modelValue":s=>o.value=s,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),n)}),{}}}),TV=Re({...I_()},"VTabsWindowItem"),MV=et()({name:"VTabsWindowItem",props:TV(),setup(t,e){let{slots:n}=e;return st(()=>{const r=vx.filterProps(t);return u.createVNode(vx,u.mergeProps({_as:"VTabsWindowItem"},r,{class:["v-tabs-window-item",t.class],style:t.style}),n)}),{}}});function IV(t){return t?t.map(e=>Qh(e)?e:{text:e,value:e}):[]}const OV=Re({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...b0({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ai(),...ln()},"VTabs"),AV=et()({name:"VTabs",props:OV(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=Lt(t,"modelValue"),o=u.computed(()=>IV(t.items)),{densityClasses:a}=bo(t),{backgroundColorClasses:s,backgroundColorStyles:c}=li(()=>t.bgColor),{scopeId:l}=ql();return Zi({VTab:{color:u.toRef(()=>t.color),direction:u.toRef(()=>t.direction),stacked:u.toRef(()=>t.stacked),fixed:u.toRef(()=>t.fixedTabs),sliderColor:u.toRef(()=>t.sliderColor),hideSlider:u.toRef(()=>t.hideSlider)}}),st(()=>{const d=Tp.filterProps(t),f=!!(r.window||t.items.length>0);return u.createElementVNode(u.Fragment,null,[u.createVNode(Tp,u.mergeProps(d,{modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},a.value,s.value,t.class],style:[{"--v-tabs-height":gt(t.height)},c.value,t.style],role:"tablist",symbol:yx},l,n),{default:()=>{var b;return[((b=r.default)==null?void 0:b.call(r))??o.value.map(x=>{var k;return((k=r.tab)==null?void 0:k.call(r,{item:x}))??u.createVNode(D_,u.mergeProps(x,{key:x.text,value:x.value}),{default:r[`tab.${x.value}`]?()=>{var E;return(E=r[`tab.${x.value}`])==null?void 0:E.call(r,{item:x})}:void 0})})]}}),f&&u.createVNode(EV,u.mergeProps({modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,key:"tabs-window"},l),{default:()=>{var b;return[o.value.map(x=>{var k;return((k=r.item)==null?void 0:k.call(r,{item:x}))??u.createVNode(MV,{value:x.value},{default:()=>{var E;return(E=r[`item.${x.value}`])==null?void 0:E.call(r,{item:x})}})}),(b=r.window)==null?void 0:b.call(r)]}})])}),{}}}),_V=Re({withBackground:Boolean,...Ot(),...wn(),...ln()},"VThemeProvider"),N_=et()({name:"VThemeProvider",props:_V(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Jn(t);return()=>{var i;return t.withBackground?u.createVNode(t.tag,{class:u.normalizeClass(["v-theme-provider",r.value,t.class]),style:u.normalizeStyle(t.style)},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}}):(i=n.default)==null?void 0:i.call(n)}}});var P_={};/*!
  * shared v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Da(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const L_={};function DV(t){L_[t]||(L_[t]=!0,Da(t))}const fs=typeof window<"u";let so,dc;if(P_.NODE_ENV!=="production"){const t=fs&&window.performance;t&&t.mark&&t.measure&&t.clearMarks&&t.clearMeasures&&(so=e=>{t.mark(e)},dc=(e,n,r)=>{t.measure(e,n,r),t.clearMarks(n),t.clearMarks(r)})}const NV=/\{([0-9a-zA-Z]+)\}/g;function Bm(t,...e){return e.length===1&&rn(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(NV,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const hs=(t,e=!1)=>e?Symbol.for(t):Symbol(t),PV=(t,e,n)=>LV({l:t,k:e,s:n}),LV=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),jr=t=>typeof t=="number"&&isFinite(t),RV=t=>bx(t)==="[object Date]",jm=t=>bx(t)==="[object RegExp]",Fm=t=>on(t)&&Object.keys(t).length===0,Fr=Object.assign,BV=Object.create,xn=(t=null)=>BV(t);let R_;const fc=()=>R_||(R_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:xn());function B_(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function j_(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function jV(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,i,o)=>`${i}="${j_(o)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,i,o)=>`${i}='${j_(o)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(P_.NODE_ENV!=="production"&&Da("Potentially dangerous event handlers detected in translation. Consider removing onclick, onerror, etc. from your translation messages."),t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const FV=Object.prototype.hasOwnProperty;function Vo(t,e){return FV.call(t,e)}const wr=Array.isArray,Un=t=>typeof t=="function",pt=t=>typeof t=="string",xr=t=>typeof t=="boolean",rn=t=>t!==null&&typeof t=="object",HV=t=>rn(t)&&Un(t.then)&&Un(t.catch),F_=Object.prototype.toString,bx=t=>F_.call(t),on=t=>bx(t)==="[object Object]",zV=t=>t==null?"":wr(t)||on(t)&&t.toString===F_?JSON.stringify(t,null,2):String(t);function wx(t,e=""){return t.reduce((n,r,i)=>i===0?n+r:n+e+r,"")}const H_=2;function $V(t,e=0,n=t.length){const r=t.split(/\r?\n/);let i=0;const o=[];for(let a=0;a<r.length;a++)if(i+=r[a].length+1,i>=e){for(let s=a-H_;s<=a+H_||n>i;s++){if(s<0||s>=r.length)continue;const c=s+1;o.push(`${c}${" ".repeat(3-String(c).length)}|  ${r[s]}`);const l=r[s].length;if(s===a){const d=e-(i-l)+1,f=Math.max(1,n>i?l-d:n-e);o.push("   |  "+" ".repeat(d)+"^".repeat(f))}else if(s>a){if(n>i){const d=Math.max(Math.min(n-i,l),1);o.push("   |  "+"^".repeat(d))}i+=l+1}}break}return o.join(`
`)}function UV(){const t=new Map;return{events:t,on(n,r){const i=t.get(n);i&&i.push(r)||t.set(n,[r])},off(n,r){const i=t.get(n);i&&i.splice(i.indexOf(r)>>>0,1)},emit(n,r){(t.get(n)||[]).slice().map(i=>i(r)),(t.get("*")||[]).slice().map(i=>i(n,r))}}}const Hm=t=>!rn(t)||wr(t);function zm(t,e){if(Hm(t)||Hm(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:i}=n.pop();Object.keys(r).forEach(o=>{o!=="__proto__"&&(rn(r[o])&&!rn(i[o])&&(i[o]=Array.isArray(r[o])?[]:xn()),Hm(i[o])||Hm(r[o])?i[o]=r[o]:n.push({src:r[o],des:i[o]}))})}}var xx={};function WV(t,e,n){return{line:t,column:e,offset:n}}function Cx(t,e,n){return{start:t,end:e}}const Ft={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},YV=17,GV={[Ft.EXPECTED_TOKEN]:"Expected token: '{0}'",[Ft.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Ft.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Ft.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Ft.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Ft.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Ft.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Ft.EMPTY_PLACEHOLDER]:"Empty placeholder",[Ft.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Ft.INVALID_LINKED_FORMAT]:"Invalid linked format",[Ft.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Ft.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Ft.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Ft.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Ft.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Ft.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Tu(t,e,n={}){const{domain:r,messages:i,args:o}=n,a=xx.NODE_ENV!=="production"?Bm((i||GV)[t]||"",...o||[]):t,s=new SyntaxError(String(a));return s.code=t,e&&(s.location=e),s.domain=r,s}function XV(t){throw t}const KV=/<\/?[\w\s="/.':;#-\/]+>/,ZV=t=>KV.test(t),ps=" ",JV="\r",Ii=`
`,QV="\u2028",VV="\u2029";function qV(t){const e=t;let n=0,r=1,i=1,o=0;const a=S=>e[S]===JV&&e[S+1]===Ii,s=S=>e[S]===Ii,c=S=>e[S]===VV,l=S=>e[S]===QV,d=S=>a(S)||s(S)||c(S)||l(S),f=()=>n,b=()=>r,x=()=>i,k=()=>o,E=S=>a(S)||c(S)||l(S)?Ii:e[S],m=()=>E(n),h=()=>E(n+o);function g(){return o=0,d(n)&&(r++,i=0),a(n)&&n++,n++,i++,e[n]}function w(){return a(n+o)&&o++,o++,e[n+o]}function p(){n=0,r=1,i=1,o=0}function v(S=0){o=S}function y(){const S=n+o;for(;S!==n;)g();o=0}return{index:f,line:b,column:x,peekOffset:k,charAt:E,currentChar:m,currentPeek:h,next:g,peek:w,reset:p,resetPeek:v,skipToPeek:y}}const rl=void 0,eq=".",z_="'",tq="tokenizer";function nq(t,e={}){const n=e.location!==!1,r=qV(t),i=()=>r.index(),o=()=>WV(r.line(),r.column(),r.index()),a=o(),s=i(),c={currentType:13,offset:s,startLoc:a,endLoc:a,lastType:13,lastOffset:s,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:d}=e;function f(q,ie,we,...Me){const xe=l();if(ie.column+=we,ie.offset+=we,d){const ge=n?Cx(xe.startLoc,ie):null,ye=Tu(q,ge,{domain:tq,args:Me});d(ye)}}function b(q,ie,we){q.endLoc=o(),q.currentType=ie;const Me={type:ie};return n&&(Me.loc=Cx(q.startLoc,q.endLoc)),we!=null&&(Me.value=we),Me}const x=q=>b(q,13);function k(q,ie){return q.currentChar()===ie?(q.next(),ie):(f(Ft.EXPECTED_TOKEN,o(),0,ie),"")}function E(q){let ie="";for(;q.currentPeek()===ps||q.currentPeek()===Ii;)ie+=q.currentPeek(),q.peek();return ie}function m(q){const ie=E(q);return q.skipToPeek(),ie}function h(q){if(q===rl)return!1;const ie=q.charCodeAt(0);return ie>=97&&ie<=122||ie>=65&&ie<=90||ie===95}function g(q){if(q===rl)return!1;const ie=q.charCodeAt(0);return ie>=48&&ie<=57}function w(q,ie){const{currentType:we}=ie;if(we!==2)return!1;E(q);const Me=h(q.currentPeek());return q.resetPeek(),Me}function p(q,ie){const{currentType:we}=ie;if(we!==2)return!1;E(q);const Me=q.currentPeek()==="-"?q.peek():q.currentPeek(),xe=g(Me);return q.resetPeek(),xe}function v(q,ie){const{currentType:we}=ie;if(we!==2)return!1;E(q);const Me=q.currentPeek()===z_;return q.resetPeek(),Me}function y(q,ie){const{currentType:we}=ie;if(we!==7)return!1;E(q);const Me=q.currentPeek()===".";return q.resetPeek(),Me}function S(q,ie){const{currentType:we}=ie;if(we!==8)return!1;E(q);const Me=h(q.currentPeek());return q.resetPeek(),Me}function T(q,ie){const{currentType:we}=ie;if(!(we===7||we===11))return!1;E(q);const Me=q.currentPeek()===":";return q.resetPeek(),Me}function C(q,ie){const{currentType:we}=ie;if(we!==9)return!1;const Me=()=>{const ge=q.currentPeek();return ge==="{"?h(q.peek()):ge==="@"||ge==="|"||ge===":"||ge==="."||ge===ps||!ge?!1:ge===Ii?(q.peek(),Me()):A(q,!1)},xe=Me();return q.resetPeek(),xe}function M(q){E(q);const ie=q.currentPeek()==="|";return q.resetPeek(),ie}function A(q,ie=!0){const we=(xe=!1,ge="")=>{const ye=q.currentPeek();return ye==="{"||ye==="@"||!ye?xe:ye==="|"?!(ge===ps||ge===Ii):ye===ps?(q.peek(),we(!0,ps)):ye===Ii?(q.peek(),we(!0,Ii)):!0},Me=we();return ie&&q.resetPeek(),Me}function P(q,ie){const we=q.currentChar();return we===rl?rl:ie(we)?(q.next(),we):null}function L(q){const ie=q.charCodeAt(0);return ie>=97&&ie<=122||ie>=65&&ie<=90||ie>=48&&ie<=57||ie===95||ie===36}function R(q){return P(q,L)}function j(q){const ie=q.charCodeAt(0);return ie>=97&&ie<=122||ie>=65&&ie<=90||ie>=48&&ie<=57||ie===95||ie===36||ie===45}function z(q){return P(q,j)}function $(q){const ie=q.charCodeAt(0);return ie>=48&&ie<=57}function Y(q){return P(q,$)}function ae(q){const ie=q.charCodeAt(0);return ie>=48&&ie<=57||ie>=65&&ie<=70||ie>=97&&ie<=102}function K(q){return P(q,ae)}function te(q){let ie="",we="";for(;ie=Y(q);)we+=ie;return we}function G(q){let ie="";for(;;){const we=q.currentChar();if(we==="{"||we==="}"||we==="@"||we==="|"||!we)break;if(we===ps||we===Ii)if(A(q))ie+=we,q.next();else{if(M(q))break;ie+=we,q.next()}else ie+=we,q.next()}return ie}function ue(q){m(q);let ie="",we="";for(;ie=z(q);)we+=ie;return q.currentChar()===rl&&f(Ft.UNTERMINATED_CLOSING_BRACE,o(),0),we}function J(q){m(q);let ie="";return q.currentChar()==="-"?(q.next(),ie+=`-${te(q)}`):ie+=te(q),q.currentChar()===rl&&f(Ft.UNTERMINATED_CLOSING_BRACE,o(),0),ie}function be(q){return q!==z_&&q!==Ii}function de(q){m(q),k(q,"'");let ie="",we="";for(;ie=P(q,be);)ie==="\\"?we+=ce(q):we+=ie;const Me=q.currentChar();return Me===Ii||Me===rl?(f(Ft.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,o(),0),Me===Ii&&(q.next(),k(q,"'")),we):(k(q,"'"),we)}function ce(q){const ie=q.currentChar();switch(ie){case"\\":case"'":return q.next(),`\\${ie}`;case"u":return V(q,ie,4);case"U":return V(q,ie,6);default:return f(Ft.UNKNOWN_ESCAPE_SEQUENCE,o(),0,ie),""}}function V(q,ie,we){k(q,ie);let Me="";for(let xe=0;xe<we;xe++){const ge=K(q);if(!ge){f(Ft.INVALID_UNICODE_ESCAPE_SEQUENCE,o(),0,`\\${ie}${Me}${q.currentChar()}`);break}Me+=ge}return`\\${ie}${Me}`}function ne(q){return q!=="{"&&q!=="}"&&q!==ps&&q!==Ii}function Q(q){m(q);let ie="",we="";for(;ie=P(q,ne);)we+=ie;return we}function Z(q){let ie="",we="";for(;ie=R(q);)we+=ie;return we}function he(q){const ie=we=>{const Me=q.currentChar();return Me==="{"||Me==="@"||Me==="|"||Me==="("||Me===")"||!Me||Me===ps?we:(we+=Me,q.next(),ie(we))};return ie("")}function X(q){m(q);const ie=k(q,"|");return m(q),ie}function re(q,ie){let we=null;switch(q.currentChar()){case"{":return ie.braceNest>=1&&f(Ft.NOT_ALLOW_NEST_PLACEHOLDER,o(),0),q.next(),we=b(ie,2,"{"),m(q),ie.braceNest++,we;case"}":return ie.braceNest>0&&ie.currentType===2&&f(Ft.EMPTY_PLACEHOLDER,o(),0),q.next(),we=b(ie,3,"}"),ie.braceNest--,ie.braceNest>0&&m(q),ie.inLinked&&ie.braceNest===0&&(ie.inLinked=!1),we;case"@":return ie.braceNest>0&&f(Ft.UNTERMINATED_CLOSING_BRACE,o(),0),we=le(q,ie)||x(ie),ie.braceNest=0,we;default:{let xe=!0,ge=!0,ye=!0;if(M(q))return ie.braceNest>0&&f(Ft.UNTERMINATED_CLOSING_BRACE,o(),0),we=b(ie,1,X(q)),ie.braceNest=0,ie.inLinked=!1,we;if(ie.braceNest>0&&(ie.currentType===4||ie.currentType===5||ie.currentType===6))return f(Ft.UNTERMINATED_CLOSING_BRACE,o(),0),ie.braceNest=0,fe(q,ie);if(xe=w(q,ie))return we=b(ie,4,ue(q)),m(q),we;if(ge=p(q,ie))return we=b(ie,5,J(q)),m(q),we;if(ye=v(q,ie))return we=b(ie,6,de(q)),m(q),we;if(!xe&&!ge&&!ye)return we=b(ie,12,Q(q)),f(Ft.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,we.value),m(q),we;break}}return we}function le(q,ie){const{currentType:we}=ie;let Me=null;const xe=q.currentChar();switch((we===7||we===8||we===11||we===9)&&(xe===Ii||xe===ps)&&f(Ft.INVALID_LINKED_FORMAT,o(),0),xe){case"@":return q.next(),Me=b(ie,7,"@"),ie.inLinked=!0,Me;case".":return m(q),q.next(),b(ie,8,".");case":":return m(q),q.next(),b(ie,9,":");default:return M(q)?(Me=b(ie,1,X(q)),ie.braceNest=0,ie.inLinked=!1,Me):y(q,ie)||T(q,ie)?(m(q),le(q,ie)):S(q,ie)?(m(q),b(ie,11,Z(q))):C(q,ie)?(m(q),xe==="{"?re(q,ie)||Me:b(ie,10,he(q))):(we===7&&f(Ft.INVALID_LINKED_FORMAT,o(),0),ie.braceNest=0,ie.inLinked=!1,fe(q,ie))}}function fe(q,ie){let we={type:13};if(ie.braceNest>0)return re(q,ie)||x(ie);if(ie.inLinked)return le(q,ie)||x(ie);switch(q.currentChar()){case"{":return re(q,ie)||x(ie);case"}":return f(Ft.UNBALANCED_CLOSING_BRACE,o(),0),q.next(),b(ie,3,"}");case"@":return le(q,ie)||x(ie);default:{if(M(q))return we=b(ie,1,X(q)),ie.braceNest=0,ie.inLinked=!1,we;if(A(q))return b(ie,0,G(q));break}}return we}function ke(){const{currentType:q,offset:ie,startLoc:we,endLoc:Me}=c;return c.lastType=q,c.lastOffset=ie,c.lastStartLoc=we,c.lastEndLoc=Me,c.offset=i(),c.startLoc=o(),r.currentChar()===rl?b(c,13):fe(r,c)}return{nextToken:ke,currentOffset:i,currentPosition:o,context:l}}const rq="parser",iq=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function oq(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function aq(t={}){const e=t.location!==!1,{onError:n}=t;function r(h,g,w,p,...v){const y=h.currentPosition();if(y.offset+=p,y.column+=p,n){const S=e?Cx(w,y):null,T=Tu(g,S,{domain:rq,args:v});n(T)}}function i(h,g,w){const p={type:h};return e&&(p.start=g,p.end=g,p.loc={start:w,end:w}),p}function o(h,g,w,p){e&&(h.end=g,h.loc&&(h.loc.end=w))}function a(h,g){const w=h.context(),p=i(3,w.offset,w.startLoc);return p.value=g,o(p,h.currentOffset(),h.currentPosition()),p}function s(h,g){const w=h.context(),{lastOffset:p,lastStartLoc:v}=w,y=i(5,p,v);return y.index=parseInt(g,10),h.nextToken(),o(y,h.currentOffset(),h.currentPosition()),y}function c(h,g){const w=h.context(),{lastOffset:p,lastStartLoc:v}=w,y=i(4,p,v);return y.key=g,h.nextToken(),o(y,h.currentOffset(),h.currentPosition()),y}function l(h,g){const w=h.context(),{lastOffset:p,lastStartLoc:v}=w,y=i(9,p,v);return y.value=g.replace(iq,oq),h.nextToken(),o(y,h.currentOffset(),h.currentPosition()),y}function d(h){const g=h.nextToken(),w=h.context(),{lastOffset:p,lastStartLoc:v}=w,y=i(8,p,v);return g.type!==11?(r(h,Ft.UNEXPECTED_EMPTY_LINKED_MODIFIER,w.lastStartLoc,0),y.value="",o(y,p,v),{nextConsumeToken:g,node:y}):(g.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Na(g)),y.value=g.value||"",o(y,h.currentOffset(),h.currentPosition()),{node:y})}function f(h,g){const w=h.context(),p=i(7,w.offset,w.startLoc);return p.value=g,o(p,h.currentOffset(),h.currentPosition()),p}function b(h){const g=h.context(),w=i(6,g.offset,g.startLoc);let p=h.nextToken();if(p.type===8){const v=d(h);w.modifier=v.node,p=v.nextConsumeToken||h.nextToken()}switch(p.type!==9&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(p)),p=h.nextToken(),p.type===2&&(p=h.nextToken()),p.type){case 10:p.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(p)),w.key=f(h,p.value||"");break;case 4:p.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(p)),w.key=c(h,p.value||"");break;case 5:p.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(p)),w.key=s(h,p.value||"");break;case 6:p.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(p)),w.key=l(h,p.value||"");break;default:{r(h,Ft.UNEXPECTED_EMPTY_LINKED_KEY,g.lastStartLoc,0);const v=h.context(),y=i(7,v.offset,v.startLoc);return y.value="",o(y,v.offset,v.startLoc),w.key=y,o(w,v.offset,v.startLoc),{nextConsumeToken:p,node:w}}}return o(w,h.currentOffset(),h.currentPosition()),{node:w}}function x(h){const g=h.context(),w=g.currentType===1?h.currentOffset():g.offset,p=g.currentType===1?g.endLoc:g.startLoc,v=i(2,w,p);v.items=[];let y=null;do{const C=y||h.nextToken();switch(y=null,C.type){case 0:C.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(C)),v.items.push(a(h,C.value||""));break;case 5:C.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(C)),v.items.push(s(h,C.value||""));break;case 4:C.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(C)),v.items.push(c(h,C.value||""));break;case 6:C.value==null&&r(h,Ft.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Na(C)),v.items.push(l(h,C.value||""));break;case 7:{const M=b(h);v.items.push(M.node),y=M.nextConsumeToken||null;break}}}while(g.currentType!==13&&g.currentType!==1);const S=g.currentType===1?g.lastOffset:h.currentOffset(),T=g.currentType===1?g.lastEndLoc:h.currentPosition();return o(v,S,T),v}function k(h,g,w,p){const v=h.context();let y=p.items.length===0;const S=i(1,g,w);S.cases=[],S.cases.push(p);do{const T=x(h);y||(y=T.items.length===0),S.cases.push(T)}while(v.currentType!==13);return y&&r(h,Ft.MUST_HAVE_MESSAGES_IN_PLURAL,w,0),o(S,h.currentOffset(),h.currentPosition()),S}function E(h){const g=h.context(),{offset:w,startLoc:p}=g,v=x(h);return g.currentType===13?v:k(h,w,p,v)}function m(h){const g=nq(h,Fr({},t)),w=g.context(),p=i(0,w.offset,w.startLoc);return e&&p.loc&&(p.loc.source=h),p.body=E(g),t.onCacheKey&&(p.cacheKey=t.onCacheKey(h)),w.currentType!==13&&r(g,Ft.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,h[w.offset]||""),o(p,g.currentOffset(),g.currentPosition()),p}return{parse:m}}function Na(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function sq(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:o=>(n.helpers.add(o),o)}}function $_(t,e){for(let n=0;n<t.length;n++)Sx(t[n],e)}function Sx(t,e){switch(t.type){case 1:$_(t.cases,e),e.helper("plural");break;case 2:$_(t.items,e);break;case 6:{Sx(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function lq(t,e={}){const n=sq(t);n.helper("normalize"),t.body&&Sx(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function cq(t){const e=t.body;return e.type===2?U_(e):e.cases.forEach(n=>U_(n)),t}function U_(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=wx(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const uq="minifier";function Mu(t){switch(t.t=t.type,t.type){case 0:{const e=t;Mu(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Mu(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Mu(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Mu(e.key),e.k=e.key,delete e.key,e.modifier&&(Mu(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:if(xx.NODE_ENV!=="production")throw Tu(Ft.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:uq,args:[t.type]})}delete t.type}const dq="parser";function fq(t,e){const{filename:n,breakLineCode:r,needIndent:i}=e,o=e.location!==!1,a={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const s=()=>a;function c(E,m){a.code+=E}function l(E,m=!0){const h=m?r:"";c(i?h+"  ".repeat(E):h)}function d(E=!0){const m=++a.indentLevel;E&&l(m)}function f(E=!0){const m=--a.indentLevel;E&&l(m)}function b(){l(a.indentLevel)}return{context:s,push:c,indent:d,deindent:f,newline:b,helper:E=>`_${E}`,needIndent:()=>a.needIndent}}function hq(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Iu(t,e.key),e.modifier?(t.push(", "),Iu(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function pq(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const i=e.items.length;for(let o=0;o<i&&(Iu(t,e.items[o]),o!==i-1);o++)t.push(", ");t.deindent(r()),t.push("])")}function mq(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const i=e.cases.length;for(let o=0;o<i&&(Iu(t,e.cases[o]),o!==i-1);o++)t.push(", ");t.deindent(r()),t.push("])")}}function gq(t,e){e.body?Iu(t,e.body):t.push("null")}function Iu(t,e){const{helper:n}=t;switch(e.type){case 0:gq(t,e);break;case 1:mq(t,e);break;case 2:pq(t,e);break;case 6:hq(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:if(xx.NODE_ENV!=="production")throw Tu(Ft.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:dq,args:[e.type]})}}const vq=(t,e={})=>{const n=pt(e.mode)?e.mode:"normal",r=pt(e.filename)?e.filename:"message.intl";e.sourceMap;const i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],s=fq(t,{filename:r,breakLineCode:i,needIndent:o});s.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),s.indent(o),a.length>0&&(s.push(`const { ${wx(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),s.newline()),s.push("return "),Iu(s,t),s.deindent(o),s.push("}"),delete t.helpers;const{code:c,map:l}=s.context();return{ast:t,code:c,map:l?l.toJSON():void 0}};function yq(t,e={}){const n=Fr({},e),r=!!n.jit,i=!!n.minify,o=n.optimize==null?!0:n.optimize,s=aq(n).parse(t);return r?(o&&cq(s),i&&Mu(s),{ast:s,code:""}):(lq(s,n),vq(s,n))}var An={};function bq(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fc().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fc().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function qo(t){return rn(t)&&kx(t)===0&&(Vo(t,"b")||Vo(t,"body"))}const W_=["b","body"];function wq(t){return il(t,W_)}const Y_=["c","cases"];function xq(t){return il(t,Y_,[])}const G_=["s","static"];function Cq(t){return il(t,G_)}const X_=["i","items"];function Sq(t){return il(t,X_,[])}const K_=["t","type"];function kx(t){return il(t,K_)}const Z_=["v","value"];function $m(t,e){const n=il(t,Z_);if(n!=null)return n;throw Cf(e)}const J_=["m","modifier"];function kq(t){return il(t,J_)}const Q_=["k","key"];function Eq(t){const e=il(t,Q_);if(e)return e;throw Cf(6)}function il(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(Vo(t,i)&&t[i]!=null)return t[i]}return n}const V_=[...W_,...Y_,...G_,...X_,...Q_,...J_,...Z_,...K_];function Cf(t){return new Error(`unhandled node type: ${t}`)}function Ex(t){return n=>Tq(n,t)}function Tq(t,e){const n=wq(e);if(n==null)throw Cf(0);if(kx(n)===1){const o=xq(n);return t.plural(o.reduce((a,s)=>[...a,q_(t,s)],[]))}else return q_(t,n)}function q_(t,e){const n=Cq(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=Sq(e).reduce((i,o)=>[...i,Tx(t,o)],[]);return t.normalize(r)}}function Tx(t,e){const n=kx(e);switch(n){case 3:return $m(e,n);case 9:return $m(e,n);case 4:{const r=e;if(Vo(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Vo(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Cf(n)}case 5:{const r=e;if(Vo(r,"i")&&jr(r.i))return t.interpolate(t.list(r.i));if(Vo(r,"index")&&jr(r.index))return t.interpolate(t.list(r.index));throw Cf(n)}case 6:{const r=e,i=kq(r),o=Eq(r);return t.linked(Tx(t,o),i?Tx(t,i):void 0,t.type)}case 7:return $m(e,n);case 8:return $m(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Mq="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function Iq(t,e){e&&ZV(t)&&Da(Bm(Mq,{source:t}))}const Oq=t=>t;let Um=xn();function Aq(t,e={}){let n=!1;const r=e.onError||XV;return e.onError=i=>{n=!0,r(i)},{...yq(t,e),detectError:n}}function _q(t,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&pt(t)){const n=xr(e.warnHtmlMessage)?e.warnHtmlMessage:!0;An.NODE_ENV!=="production"&&Iq(t,n);const i=(e.onCacheKey||Oq)(t),o=Um[i];if(o)return o;const{ast:a,detectError:s}=Aq(t,{...e,location:An.NODE_ENV!=="production",jit:!0}),c=Ex(a);return s?c:Um[i]=c}else{if(An.NODE_ENV!=="production"&&!qo(t))return Da(`the message that is resolve with key '${e.key}' is not supported for jit compilation`),()=>t;const n=t.cacheKey;if(n){const r=Um[n];return r||(Um[n]=Ex(t))}else return Ex(t)}}let Sf=null;function Dq(t){Sf=t}function Nq(t,e,n){Sf&&Sf.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const Pq=Lq("function:translate");function Lq(t){return e=>Sf&&Sf.emit(t,e)}const hi={INVALID_ARGUMENT:YV,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},Rq=24;function ms(t){return Tu(t,null,An.NODE_ENV!=="production"?{messages:Bq}:void 0)}const Bq={[hi.INVALID_ARGUMENT]:"Invalid arguments",[hi.INVALID_DATE_ARGUMENT]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[hi.INVALID_ISO_DATE_ARGUMENT]:"The argument provided is not a valid ISO date string",[hi.NOT_SUPPORT_NON_STRING_MESSAGE]:"Not support non-string message",[hi.NOT_SUPPORT_LOCALE_PROMISE_VALUE]:"cannot support promise value",[hi.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION]:"cannot support async function",[hi.NOT_SUPPORT_LOCALE_TYPE]:"cannot support locale type"};function Mx(t,e){return e.locale!=null?eD(e.locale):eD(t.locale)}let Ix;function eD(t){if(pt(t))return t;if(Un(t)){if(t.resolvedOnce&&Ix!=null)return Ix;if(t.constructor.name==="Function"){const e=t();if(HV(e))throw ms(hi.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ix=e}else throw ms(hi.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ms(hi.NOT_SUPPORT_LOCALE_TYPE)}function jq(t,e,n){return[...new Set([n,...wr(e)?e:rn(e)?Object.keys(e):pt(e)?[e]:[n]])]}function tD(t,e,n){const r=pt(n)?n:Ym,i=t;i.__localeChainCache||(i.__localeChainCache=new Map);let o=i.__localeChainCache.get(r);if(!o){o=[];let a=[n];for(;wr(a);)a=nD(o,a,e);const s=wr(e)||!on(e)?e:e.default?e.default:null;a=pt(s)?[s]:s,wr(a)&&nD(o,a,!1),i.__localeChainCache.set(r,o)}return o}function nD(t,e,n){let r=!0;for(let i=0;i<e.length&&xr(r);i++){const o=e[i];pt(o)&&(r=Fq(t,e[i],n))}return r}function Fq(t,e,n){let r;const i=e.split("-");do{const o=i.join("-");r=Hq(t,o,n),i.splice(-1,1)}while(i.length&&r===!0);return r}function Hq(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const i=e.replace(/!/g,"");t.push(i),(wr(n)||on(n))&&n[i]&&(r=n[i])}return r}const ol=[];ol[0]={w:[0],i:[3,0],"[":[4],o:[7]},ol[1]={w:[1],".":[2],"[":[4],o:[7]},ol[2]={w:[2],i:[3,0],0:[3,0]},ol[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},ol[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},ol[5]={"'":[4,0],o:8,l:[5,0]},ol[6]={'"':[4,0],o:8,l:[6,0]};const zq=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function $q(t){return zq.test(t)}function Uq(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function Wq(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Yq(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:$q(e)?Uq(e):"*"+e}function Gq(t){const e=[];let n=-1,r=0,i=0,o,a,s,c,l,d,f;const b=[];b[0]=()=>{a===void 0?a=s:a+=s},b[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},b[2]=()=>{b[0](),i++},b[3]=()=>{if(i>0)i--,r=4,b[0]();else{if(i=0,a===void 0||(a=Yq(a),a===!1))return!1;b[1]()}};function x(){const k=t[n+1];if(r===5&&k==="'"||r===6&&k==='"')return n++,s="\\"+k,b[0](),!0}for(;r!==null;)if(n++,o=t[n],!(o==="\\"&&x())){if(c=Wq(o),f=ol[r],l=f[c]||f.l||8,l===8||(r=l[0],l[1]!==void 0&&(d=b[l[1]],d&&(s=o,d()===!1))))return;if(r===7)return e}}const rD=new Map;function Xq(t,e){return rn(t)?t[e]:null}function Kq(t,e){if(!rn(t))return null;let n=rD.get(e);if(n||(n=Gq(e),n&&rD.set(e,n)),!n)return null;const r=n.length;let i=t,o=0;for(;o<r;){const a=n[o];if(V_.includes(a)&&qo(i))return null;const s=i[a];if(s===void 0||Un(i))return null;i=s,o++}return i}const $i={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7},Zq=8,Jq={[$i.NOT_FOUND_KEY]:"Not found '{key}' key in '{locale}' locale messages.",[$i.FALLBACK_TO_TRANSLATE]:"Fall back to translate '{key}' key with '{target}' locale.",[$i.CANNOT_FORMAT_NUMBER]:"Cannot format a number value due to not supported Intl.NumberFormat.",[$i.FALLBACK_TO_NUMBER_FORMAT]:"Fall back to number format '{key}' key with '{target}' locale.",[$i.CANNOT_FORMAT_DATE]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[$i.FALLBACK_TO_DATE_FORMAT]:"Fall back to datetime format '{key}' key with '{target}' locale.",[$i.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER]:"This project is using Custom Message Compiler, which is an experimental feature. It may receive breaking changes or be removed in the future."};function hc(t,...e){return Bm(Jq[t],...e)}const Qq="11.1.11",Wm=-1,Ym="en-US",Gm="",iD=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Vq(){return{upper:(t,e)=>e==="text"&&pt(t)?t.toUpperCase():e==="vnode"&&rn(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&pt(t)?t.toLowerCase():e==="vnode"&&rn(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&pt(t)?iD(t):e==="vnode"&&rn(t)&&"__v_isVNode"in t?iD(t.children):t}}let oD;function qq(t){oD=t}let aD;function eee(t){aD=t}let sD;function tee(t){sD=t}let lD=null;const nee=t=>{lD=t},ree=()=>lD;let cD=null;const uD=t=>{cD=t},iee=()=>cD;let dD=0;function oee(t={}){const e=Un(t.onWarn)?t.onWarn:Da,n=pt(t.version)?t.version:Qq,r=pt(t.locale)||Un(t.locale)?t.locale:Ym,i=Un(r)?Ym:r,o=wr(t.fallbackLocale)||on(t.fallbackLocale)||pt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:i,a=on(t.messages)?t.messages:Ox(i),s=on(t.datetimeFormats)?t.datetimeFormats:Ox(i),c=on(t.numberFormats)?t.numberFormats:Ox(i),l=Fr(xn(),t.modifiers,Vq()),d=t.pluralRules||xn(),f=Un(t.missing)?t.missing:null,b=xr(t.missingWarn)||jm(t.missingWarn)?t.missingWarn:!0,x=xr(t.fallbackWarn)||jm(t.fallbackWarn)?t.fallbackWarn:!0,k=!!t.fallbackFormat,E=!!t.unresolving,m=Un(t.postTranslation)?t.postTranslation:null,h=on(t.processor)?t.processor:null,g=xr(t.warnHtmlMessage)?t.warnHtmlMessage:!0,w=!!t.escapeParameter,p=Un(t.messageCompiler)?t.messageCompiler:oD;An.NODE_ENV!=="production"&&Un(t.messageCompiler)&&DV(hc($i.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER));const v=Un(t.messageResolver)?t.messageResolver:aD||Xq,y=Un(t.localeFallbacker)?t.localeFallbacker:sD||jq,S=rn(t.fallbackContext)?t.fallbackContext:void 0,T=t,C=rn(T.__datetimeFormatters)?T.__datetimeFormatters:new Map,M=rn(T.__numberFormatters)?T.__numberFormatters:new Map,A=rn(T.__meta)?T.__meta:{};dD++;const P={version:n,cid:dD,locale:r,fallbackLocale:o,messages:a,modifiers:l,pluralRules:d,missing:f,missingWarn:b,fallbackWarn:x,fallbackFormat:k,unresolving:E,postTranslation:m,processor:h,warnHtmlMessage:g,escapeParameter:w,messageCompiler:p,messageResolver:v,localeFallbacker:y,fallbackContext:S,onWarn:e,__meta:A};return P.datetimeFormats=s,P.numberFormats=c,P.__datetimeFormatters=C,P.__numberFormatters=M,An.NODE_ENV!=="production"&&(P.__v_emitter=T.__v_emitter!=null?T.__v_emitter:void 0),(An.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__)&&Nq(P,n,A),P}const Ox=t=>({[t]:xn()});function Xm(t,e){return t instanceof RegExp?t.test(e):t}function fD(t,e){return t instanceof RegExp?t.test(e):t}function Ax(t,e,n,r,i){const{missing:o,onWarn:a}=t;if(An.NODE_ENV!=="production"){const s=t.__v_emitter;s&&s.emit("missing",{locale:n,key:e,type:i,groupId:`${i}:${e}`})}if(o!==null){const s=o(t,n,e,i);return pt(s)?s:e}else return An.NODE_ENV!=="production"&&fD(r,e)&&a(hc($i.NOT_FOUND_KEY,{key:e,locale:n})),e}function kf(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function hD(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function aee(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(hD(t,e[r]))return!0;return!1}const pD=typeof Intl<"u",mD={dateTimeFormat:pD&&typeof Intl.DateTimeFormat<"u",numberFormat:pD&&typeof Intl.NumberFormat<"u"};function gD(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:i,onWarn:o,localeFallbacker:a}=t,{__datetimeFormatters:s}=t;if(An.NODE_ENV!=="production"&&!mD.dateTimeFormat)return o(hc($i.CANNOT_FORMAT_DATE)),Gm;const[c,l,d,f]=_x(...e),b=xr(d.missingWarn)?d.missingWarn:t.missingWarn,x=xr(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn,k=!!d.part,E=Mx(t,d),m=a(t,i,E);if(!pt(c)||c==="")return new Intl.DateTimeFormat(E,f).format(l);let h={},g,w=null,p=E,v=null;const y="datetime format";for(let C=0;C<m.length;C++){if(g=v=m[C],An.NODE_ENV!=="production"&&E!==g&&Xm(x,c)&&o(hc($i.FALLBACK_TO_DATE_FORMAT,{key:c,target:g})),An.NODE_ENV!=="production"&&E!==g){const M=t.__v_emitter;M&&M.emit("fallback",{type:y,key:c,from:p,to:v,groupId:`${y}:${c}`})}if(h=n[g]||{},w=h[c],on(w))break;Ax(t,c,g,b,y),p=v}if(!on(w)||!pt(g))return r?Wm:c;let S=`${g}__${c}`;Fm(f)||(S=`${S}__${JSON.stringify(f)}`);let T=s.get(S);return T||(T=new Intl.DateTimeFormat(g,Fr({},w,f)),s.set(S,T)),k?T.formatToParts(l):T.format(l)}const vD=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function _x(...t){const[e,n,r,i]=t,o=xn();let a=xn(),s;if(pt(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw ms(hi.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();s=new Date(l);try{s.toISOString()}catch{throw ms(hi.INVALID_ISO_DATE_ARGUMENT)}}else if(RV(e)){if(isNaN(e.getTime()))throw ms(hi.INVALID_DATE_ARGUMENT);s=e}else if(jr(e))s=e;else throw ms(hi.INVALID_ARGUMENT);return pt(n)?o.key=n:on(n)&&Object.keys(n).forEach(c=>{vD.includes(c)?a[c]=n[c]:o[c]=n[c]}),pt(r)?o.locale=r:on(r)&&(a=r),on(i)&&(a=i),[o.key||"",s,o,a]}function yD(t,e,n){const r=t;for(const i in n){const o=`${e}__${i}`;r.__datetimeFormatters.has(o)&&r.__datetimeFormatters.delete(o)}}function bD(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:i,onWarn:o,localeFallbacker:a}=t,{__numberFormatters:s}=t;if(An.NODE_ENV!=="production"&&!mD.numberFormat)return o(hc($i.CANNOT_FORMAT_NUMBER)),Gm;const[c,l,d,f]=Dx(...e),b=xr(d.missingWarn)?d.missingWarn:t.missingWarn,x=xr(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn,k=!!d.part,E=Mx(t,d),m=a(t,i,E);if(!pt(c)||c==="")return new Intl.NumberFormat(E,f).format(l);let h={},g,w=null,p=E,v=null;const y="number format";for(let C=0;C<m.length;C++){if(g=v=m[C],An.NODE_ENV!=="production"&&E!==g&&Xm(x,c)&&o(hc($i.FALLBACK_TO_NUMBER_FORMAT,{key:c,target:g})),An.NODE_ENV!=="production"&&E!==g){const M=t.__v_emitter;M&&M.emit("fallback",{type:y,key:c,from:p,to:v,groupId:`${y}:${c}`})}if(h=n[g]||{},w=h[c],on(w))break;Ax(t,c,g,b,y),p=v}if(!on(w)||!pt(g))return r?Wm:c;let S=`${g}__${c}`;Fm(f)||(S=`${S}__${JSON.stringify(f)}`);let T=s.get(S);return T||(T=new Intl.NumberFormat(g,Fr({},w,f)),s.set(S,T)),k?T.formatToParts(l):T.format(l)}const wD=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Dx(...t){const[e,n,r,i]=t,o=xn();let a=xn();if(!jr(e))throw ms(hi.INVALID_ARGUMENT);const s=e;return pt(n)?o.key=n:on(n)&&Object.keys(n).forEach(c=>{wD.includes(c)?a[c]=n[c]:o[c]=n[c]}),pt(r)?o.locale=r:on(r)&&(a=r),on(i)&&(a=i),[o.key||"",s,o,a]}function xD(t,e,n){const r=t;for(const i in n){const o=`${e}__${i}`;r.__numberFormatters.has(o)&&r.__numberFormatters.delete(o)}}const see=t=>t,lee=t=>"",cee="text",uee=t=>t.length===0?"":wx(t),dee=zV;function CD(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function fee(t){const e=jr(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(jr(t.named.count)||jr(t.named.n))?jr(t.named.count)?t.named.count:jr(t.named.n)?t.named.n:e:e}function hee(t,e){e.count||(e.count=t),e.n||(e.n=t)}function pee(t={}){const e=t.locale,n=fee(t),r=rn(t.pluralRules)&&pt(e)&&Un(t.pluralRules[e])?t.pluralRules[e]:CD,i=rn(t.pluralRules)&&pt(e)&&Un(t.pluralRules[e])?CD:void 0,o=h=>h[r(n,h.length,i)],a=t.list||[],s=h=>a[h],c=t.named||xn();jr(t.pluralIndex)&&hee(n,c);const l=h=>c[h];function d(h,g){const w=Un(t.messages)?t.messages(h,!!g):rn(t.messages)?t.messages[h]:!1;return w||(t.parent?t.parent.message(h):lee)}const f=h=>t.modifiers?t.modifiers[h]:see,b=on(t.processor)&&Un(t.processor.normalize)?t.processor.normalize:uee,x=on(t.processor)&&Un(t.processor.interpolate)?t.processor.interpolate:dee,k=on(t.processor)&&pt(t.processor.type)?t.processor.type:cee,m={list:s,named:l,plural:o,linked:(h,...g)=>{const[w,p]=g;let v="text",y="";g.length===1?rn(w)?(y=w.modifier||y,v=w.type||v):pt(w)&&(y=w||y):g.length===2&&(pt(w)&&(y=w||y),pt(p)&&(v=p||v));const S=d(h,!0)(m),T=v==="vnode"&&wr(S)&&y?S[0]:S;return y?f(y)(T,v):T},message:d,type:k,interpolate:x,normalize:b,values:Fr(xn(),a,c)};return m}const SD=()=>"",Eo=t=>Un(t);function kD(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:i,messageCompiler:o,fallbackLocale:a,messages:s}=t,[c,l]=Nx(...e),d=xr(l.missingWarn)?l.missingWarn:t.missingWarn,f=xr(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,b=xr(l.escapeParameter)?l.escapeParameter:t.escapeParameter,x=!!l.resolvedMessage,k=pt(l.default)||xr(l.default)?xr(l.default)?o?c:()=>c:l.default:n?o?c:()=>c:null,E=n||k!=null&&(pt(k)||Un(k)),m=Mx(t,l);b&&mee(l);let[h,g,w]=x?[c,m,s[m]||xn()]:ED(t,c,m,a,f,d),p=h,v=c;if(!x&&!(pt(p)||qo(p)||Eo(p))&&E&&(p=k,v=p),!x&&(!(pt(p)||qo(p)||Eo(p))||!pt(g)))return i?Wm:c;if(An.NODE_ENV!=="production"&&pt(p)&&t.messageCompiler==null)return Da(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${c}'.`),c;let y=!1;const S=()=>{y=!0},T=Eo(p)?p:TD(t,c,g,p,v,S);if(y)return p;const C=bee(t,g,w,l),M=pee(C),A=gee(t,T,M);let P=r?r(A,c):A;if(b&&pt(P)&&(P=jV(P)),An.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__){const L={timestamp:Date.now(),key:pt(c)?c:Eo(p)?p.key:"",locale:g||(Eo(p)?p.locale:""),format:pt(p)?p:Eo(p)?p.source:"",message:P};L.meta=Fr({},t.__meta,ree()||{}),Pq(L)}return P}function mee(t){wr(t.list)?t.list=t.list.map(e=>pt(e)?B_(e):e):rn(t.named)&&Object.keys(t.named).forEach(e=>{pt(t.named[e])&&(t.named[e]=B_(t.named[e]))})}function ED(t,e,n,r,i,o){const{messages:a,onWarn:s,messageResolver:c,localeFallbacker:l}=t,d=l(t,r,n);let f=xn(),b,x=null,k=n,E=null;const m="translate";for(let h=0;h<d.length;h++){if(b=E=d[h],An.NODE_ENV!=="production"&&n!==b&&!hD(n,b)&&Xm(i,e)&&s(hc($i.FALLBACK_TO_TRANSLATE,{key:e,target:b})),An.NODE_ENV!=="production"&&n!==b){const v=t.__v_emitter;v&&v.emit("fallback",{type:m,key:e,from:k,to:E,groupId:`${m}:${e}`})}f=a[b]||xn();let g=null,w,p;if(An.NODE_ENV!=="production"&&fs&&(g=window.performance.now(),w="intlify-message-resolve-start",p="intlify-message-resolve-end",so&&so(w)),(x=c(f,e))===null&&(x=f[e]),An.NODE_ENV!=="production"&&fs){const v=window.performance.now(),y=t.__v_emitter;y&&g&&x&&y.emit("message-resolve",{type:"message-resolve",key:e,message:x,time:v-g,groupId:`${m}:${e}`}),w&&p&&so&&dc&&(so(p),dc("intlify message resolve",w,p))}if(pt(x)||qo(x)||Eo(x))break;if(!aee(b,d)){const v=Ax(t,e,b,o,m);v!==e&&(x=v)}k=E}return[x,b,f]}function TD(t,e,n,r,i,o){const{messageCompiler:a,warnHtmlMessage:s}=t;if(Eo(r)){const b=r;return b.locale=b.locale||n,b.key=b.key||e,b}if(a==null){const b=()=>r;return b.locale=n,b.key=e,b}let c=null,l,d;An.NODE_ENV!=="production"&&fs&&(c=window.performance.now(),l="intlify-message-compilation-start",d="intlify-message-compilation-end",so&&so(l));const f=a(r,vee(t,n,i,r,s,o));if(An.NODE_ENV!=="production"&&fs){const b=window.performance.now(),x=t.__v_emitter;x&&c&&x.emit("message-compilation",{type:"message-compilation",message:r,time:b-c,groupId:`translate:${e}`}),l&&d&&so&&dc&&(so(d),dc("intlify message compilation",l,d))}return f.locale=n,f.key=e,f.source=r,f}function gee(t,e,n){let r=null,i,o;An.NODE_ENV!=="production"&&fs&&(r=window.performance.now(),i="intlify-message-evaluation-start",o="intlify-message-evaluation-end",so&&so(i));const a=e(n);if(An.NODE_ENV!=="production"&&fs){const s=window.performance.now(),c=t.__v_emitter;c&&r&&c.emit("message-evaluation",{type:"message-evaluation",value:a,time:s-r,groupId:`translate:${e.key}`}),i&&o&&so&&dc&&(so(o),dc("intlify message evaluation",i,o))}return a}function Nx(...t){const[e,n,r]=t,i=xn();if(!pt(e)&&!jr(e)&&!Eo(e)&&!qo(e))throw ms(hi.INVALID_ARGUMENT);const o=jr(e)?String(e):(Eo(e),e);return jr(n)?i.plural=n:pt(n)?i.default=n:on(n)&&!Fm(n)?i.named=n:wr(n)&&(i.list=n),jr(r)?i.plural=r:pt(r)?i.default=r:on(r)&&Fr(i,r),[o,i]}function vee(t,e,n,r,i,o){return{locale:e,key:n,warnHtmlMessage:i,onError:a=>{if(o&&o(a),An.NODE_ENV!=="production"){const s=yee(r),c=`Message compilation error: ${a.message}`,l=a.location&&s&&$V(s,a.location.start.offset,a.location.end.offset),d=t.__v_emitter;d&&s&&d.emit("compile-error",{message:s,error:a.message,start:a.location&&a.location.start.offset,end:a.location&&a.location.end.offset,groupId:`translate:${n}`}),console.error(l?`${c}
${l}`:c)}else throw a},onCacheKey:a=>PV(e,n,a)}}function yee(t){if(pt(t))return t;if(t.loc&&t.loc.source)return t.loc.source}function bee(t,e,n,r){const{modifiers:i,pluralRules:o,messageResolver:a,fallbackLocale:s,fallbackWarn:c,missingWarn:l,fallbackContext:d}=t,b={locale:e,modifiers:i,pluralRules:o,messages:(x,k)=>{let E=a(n,x);if(E==null&&(d||k)){const[,,m]=ED(d||t,x,e,s,c,l);E=a(m,x)}if(pt(E)||qo(E)){let m=!1;const g=TD(t,x,e,E,x,()=>{m=!0});return m?SD:g}else return Eo(E)?E:SD}};return t.processor&&(b.processor=t.processor),r.list&&(b.list=r.list),r.named&&(b.named=r.named),jr(r.plural)&&(b.pluralIndex=r.plural),b}bq();var lo={};const wee="11.1.11";function xee(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(fc().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(fc().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fc().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fc().__INTLIFY_PROD_DEVTOOLS__=!1)}const Qr={UNEXPECTED_RETURN_TYPE:Rq,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function Ef(t,...e){return Tu(t,null,lo.NODE_ENV!=="production"?{messages:Cee,args:e}:void 0)}const Cee={[Qr.UNEXPECTED_RETURN_TYPE]:"Unexpected return type in composer",[Qr.INVALID_ARGUMENT]:"Invalid argument",[Qr.MUST_BE_CALL_SETUP_TOP]:"Must be called at the top of a `setup` function",[Qr.NOT_INSTALLED]:"Need to install with `app.use` function",[Qr.UNEXPECTED_ERROR]:"Unexpected error",[Qr.REQUIRED_VALUE]:"Required in value: {0}",[Qr.INVALID_VALUE]:"Invalid value",[Qr.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN]:"Cannot setup vue-devtools plugin",[Qr.NOT_INSTALLED_WITH_PROVIDE]:"Need to install with `provide` function",[Qr.NOT_COMPATIBLE_LEGACY_VUE_I18N]:"Not compatible legacy VueI18n.",[Qr.NOT_AVAILABLE_COMPOSITION_IN_LEGACY]:"Not available Compostion API in Legacy API mode. Please make sure that the legacy API mode is working properly"},Px=hs("__translateVNode"),Lx=hs("__datetimeParts"),Rx=hs("__numberParts"),Bx=hs("__enableEmitter"),jx=hs("__disableEmitter"),See=hs("__setPluralRules"),MD=hs("__injectWithOption"),Fx=hs("__dispose"),Pa={FALLBACK_TO_ROOT:Zq,NOT_FOUND_PARENT_SCOPE:9,IGNORE_OBJ_FLATTEN:10,DEPRECATE_LEGACY_MODE:11,DEPRECATE_TRANSLATE_CUSTOME_DIRECTIVE:12,DUPLICATE_USE_I18N_CALLING:13},kee={[Pa.FALLBACK_TO_ROOT]:"Fall back to {type} '{key}' with root locale.",[Pa.NOT_FOUND_PARENT_SCOPE]:"Not found parent scope. use the global scope.",[Pa.IGNORE_OBJ_FLATTEN]:"Ignore object flatten: '{key}' key has an string value",[Pa.DEPRECATE_LEGACY_MODE]:`Legacy API mode has been deprecated in v11. Use Composition API mode instead.
About how to use the Composition API mode, see https://vue-i18n.intlify.dev/guide/advanced/composition.html`,[Pa.DEPRECATE_TRANSLATE_CUSTOME_DIRECTIVE]:"'v-t' has been deprecated in v11. Use translate APIs ('t' or '$t') instead.",[Pa.DUPLICATE_USE_I18N_CALLING]:"Duplicate `useI18n` calling by local scope. Please don't call it on local scope, due to it does not work properly in component."};function Km(t,...e){return Bm(kee[t],...e)}function Tf(t){if(!rn(t)||qo(t))return t;for(const e in t)if(Vo(t,e))if(!e.includes("."))rn(t[e])&&Tf(t[e]);else{const n=e.split("."),r=n.length-1;let i=t,o=!1;for(let a=0;a<r;a++){if(n[a]==="__proto__")throw new Error(`unsafe key: ${n[a]}`);if(n[a]in i||(i[n[a]]=xn()),!rn(i[n[a]])){lo.NODE_ENV!=="production"&&Da(Km(Pa.IGNORE_OBJ_FLATTEN,{key:n[a]})),o=!0;break}i=i[n[a]]}if(o||(qo(i)?V_.includes(n[r])||delete t[e]:(i[n[r]]=t[e],delete t[e])),!qo(i)){const a=i[n[r]];rn(a)&&Tf(a)}}return t}function ID(t,e){const{messages:n,__i18n:r,messageResolver:i,flatJson:o}=e,a=on(n)?n:wr(r)?xn():{[t]:xn()};if(wr(r)&&r.forEach(s=>{if("locale"in s&&"resource"in s){const{locale:c,resource:l}=s;c?(a[c]=a[c]||xn(),zm(l,a[c])):zm(l,a)}else pt(s)&&zm(JSON.parse(s),a)}),i==null&&o)for(const s in a)Vo(a,s)&&Tf(a[s]);return a}function OD(t){return t.type}function Eee(t,e,n){let r=rn(e.messages)?e.messages:xn();"__i18nGlobal"in n&&(r=ID(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const i=Object.keys(r);i.length&&i.forEach(o=>{t.mergeLocaleMessage(o,r[o])});{if(rn(e.datetimeFormats)){const o=Object.keys(e.datetimeFormats);o.length&&o.forEach(a=>{t.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if(rn(e.numberFormats)){const o=Object.keys(e.numberFormats);o.length&&o.forEach(a=>{t.mergeNumberFormat(a,e.numberFormats[a])})}}}function AD(t){return u.createVNode(u.Text,null,t,0)}const _D="__INTLIFY_META__",DD=()=>[],Tee=()=>!1;let ND=0;function PD(t){return(e,n,r,i)=>t(n,r,u.getCurrentInstance()||void 0,i)}const Mee=()=>{const t=u.getCurrentInstance();let e=null;return t&&(e=OD(t)[_D])?{[_D]:e}:null};function Iee(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,i=t.flatJson,o=fs?u.ref:u.shallowRef;let a=xr(t.inheritLocale)?t.inheritLocale:!0;const s=o(e&&a?e.locale.value:pt(t.locale)?t.locale:Ym),c=o(e&&a?e.fallbackLocale.value:pt(t.fallbackLocale)||wr(t.fallbackLocale)||on(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s.value),l=o(ID(s.value,t)),d=o(on(t.datetimeFormats)?t.datetimeFormats:{[s.value]:{}}),f=o(on(t.numberFormats)?t.numberFormats:{[s.value]:{}});let b=e?e.missingWarn:xr(t.missingWarn)||jm(t.missingWarn)?t.missingWarn:!0,x=e?e.fallbackWarn:xr(t.fallbackWarn)||jm(t.fallbackWarn)?t.fallbackWarn:!0,k=e?e.fallbackRoot:xr(t.fallbackRoot)?t.fallbackRoot:!0,E=!!t.fallbackFormat,m=Un(t.missing)?t.missing:null,h=Un(t.missing)?PD(t.missing):null,g=Un(t.postTranslation)?t.postTranslation:null,w=e?e.warnHtmlMessage:xr(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter;const v=e?e.modifiers:on(t.modifiers)?t.modifiers:{};let y=t.pluralRules||e&&e.pluralRules,S;S=(()=>{r&&uD(null);const se={version:wee,locale:s.value,fallbackLocale:c.value,messages:l.value,modifiers:v,pluralRules:y,missing:h===null?void 0:h,missingWarn:b,fallbackWarn:x,fallbackFormat:E,unresolving:!0,postTranslation:g===null?void 0:g,warnHtmlMessage:w,escapeParameter:p,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};se.datetimeFormats=d.value,se.numberFormats=f.value,se.__datetimeFormatters=on(S)?S.__datetimeFormatters:void 0,se.__numberFormatters=on(S)?S.__numberFormatters:void 0,lo.NODE_ENV!=="production"&&(se.__v_emitter=on(S)?S.__v_emitter:void 0);const me=oee(se);return r&&uD(me),me})(),kf(S,s.value,c.value);function C(){return[s.value,c.value,l.value,d.value,f.value]}const M=u.computed({get:()=>s.value,set:se=>{S.locale=se,s.value=se}}),A=u.computed({get:()=>c.value,set:se=>{S.fallbackLocale=se,c.value=se,kf(S,s.value,se)}}),P=u.computed(()=>l.value),L=u.computed(()=>d.value),R=u.computed(()=>f.value);function j(){return Un(g)?g:null}function z(se){g=se,S.postTranslation=se}function $(){return m}function Y(se){se!==null&&(h=PD(se)),m=se,S.missing=h}function ae(se,me){return se!=="translate"||!me.resolvedMessage}const K=(se,me,Ie,Pe,Se,Ce)=>{C();let pe;try{lo.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__,r||(S.fallbackContext=e?iee():void 0),pe=se(S)}finally{lo.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__,r||(S.fallbackContext=void 0)}if(Ie!=="translate exists"&&jr(pe)&&pe===Wm||Ie==="translate exists"&&!pe){const[_e,Be]=me();if(lo.NODE_ENV!=="production"&&e&&pt(_e)&&ae(Ie,Be)&&(k&&(Xm(x,_e)||fD(b,_e))&&Da(Km(Pa.FALLBACK_TO_ROOT,{key:_e,type:Ie})),lo.NODE_ENV!=="production")){const{__v_emitter:Ke}=S;Ke&&k&&Ke.emit("fallback",{type:Ie,key:_e,to:"global",groupId:`${Ie}:${_e}`})}return e&&k?Pe(e):Se(_e)}else{if(Ce(pe))return pe;throw Ef(Qr.UNEXPECTED_RETURN_TYPE)}};function te(...se){return K(me=>Reflect.apply(kD,null,[me,...se]),()=>Nx(...se),"translate",me=>Reflect.apply(me.t,me,[...se]),me=>me,me=>pt(me))}function G(...se){const[me,Ie,Pe]=se;if(Pe&&!rn(Pe))throw Ef(Qr.INVALID_ARGUMENT);return te(me,Ie,Fr({resolvedMessage:!0},Pe||{}))}function ue(...se){return K(me=>Reflect.apply(gD,null,[me,...se]),()=>_x(...se),"datetime format",me=>Reflect.apply(me.d,me,[...se]),()=>Gm,me=>pt(me)||wr(me))}function J(...se){return K(me=>Reflect.apply(bD,null,[me,...se]),()=>Dx(...se),"number format",me=>Reflect.apply(me.n,me,[...se]),()=>Gm,me=>pt(me)||wr(me))}function be(se){return se.map(me=>pt(me)||jr(me)||xr(me)?AD(String(me)):me)}const ce={normalize:be,interpolate:se=>se,type:"vnode"};function V(...se){return K(me=>{let Ie;const Pe=me;try{Pe.processor=ce,Ie=Reflect.apply(kD,null,[Pe,...se])}finally{Pe.processor=null}return Ie},()=>Nx(...se),"translate",me=>me[Px](...se),me=>[AD(me)],me=>wr(me))}function ne(...se){return K(me=>Reflect.apply(bD,null,[me,...se]),()=>Dx(...se),"number format",me=>me[Rx](...se),DD,me=>pt(me)||wr(me))}function Q(...se){return K(me=>Reflect.apply(gD,null,[me,...se]),()=>_x(...se),"datetime format",me=>me[Lx](...se),DD,me=>pt(me)||wr(me))}function Z(se){y=se,S.pluralRules=y}function he(se,me){return K(()=>{if(!se)return!1;const Ie=pt(me)?me:s.value,Pe=le(Ie),Se=S.messageResolver(Pe,se);return qo(Se)||Eo(Se)||pt(Se)},()=>[se],"translate exists",Ie=>Reflect.apply(Ie.te,Ie,[se,me]),Tee,Ie=>xr(Ie))}function X(se){let me=null;const Ie=tD(S,c.value,s.value);for(let Pe=0;Pe<Ie.length;Pe++){const Se=l.value[Ie[Pe]]||{},Ce=S.messageResolver(Se,se);if(Ce!=null){me=Ce;break}}return me}function re(se){const me=X(se);return me??(e?e.tm(se)||{}:{})}function le(se){return l.value[se]||{}}function fe(se,me){if(i){const Ie={[se]:me};for(const Pe in Ie)Vo(Ie,Pe)&&Tf(Ie[Pe]);me=Ie[se]}l.value[se]=me,S.messages=l.value}function ke(se,me){l.value[se]=l.value[se]||{};const Ie={[se]:me};if(i)for(const Pe in Ie)Vo(Ie,Pe)&&Tf(Ie[Pe]);me=Ie[se],zm(me,l.value[se]),S.messages=l.value}function q(se){return d.value[se]||{}}function ie(se,me){d.value[se]=me,S.datetimeFormats=d.value,yD(S,se,me)}function we(se,me){d.value[se]=Fr(d.value[se]||{},me),S.datetimeFormats=d.value,yD(S,se,me)}function Me(se){return f.value[se]||{}}function xe(se,me){f.value[se]=me,S.numberFormats=f.value,xD(S,se,me)}function ge(se,me){f.value[se]=Fr(f.value[se]||{},me),S.numberFormats=f.value,xD(S,se,me)}ND++,e&&fs&&(u.watch(e.locale,se=>{a&&(s.value=se,S.locale=se,kf(S,s.value,c.value))}),u.watch(e.fallbackLocale,se=>{a&&(c.value=se,S.fallbackLocale=se,kf(S,s.value,c.value))}));const ye={id:ND,locale:M,fallbackLocale:A,get inheritLocale(){return a},set inheritLocale(se){a=se,se&&e&&(s.value=e.locale.value,c.value=e.fallbackLocale.value,kf(S,s.value,c.value))},get availableLocales(){return Object.keys(l.value).sort()},messages:P,get modifiers(){return v},get pluralRules(){return y||{}},get isGlobal(){return r},get missingWarn(){return b},set missingWarn(se){b=se,S.missingWarn=b},get fallbackWarn(){return x},set fallbackWarn(se){x=se,S.fallbackWarn=x},get fallbackRoot(){return k},set fallbackRoot(se){k=se},get fallbackFormat(){return E},set fallbackFormat(se){E=se,S.fallbackFormat=E},get warnHtmlMessage(){return w},set warnHtmlMessage(se){w=se,S.warnHtmlMessage=se},get escapeParameter(){return p},set escapeParameter(se){p=se,S.escapeParameter=se},t:te,getLocaleMessage:le,setLocaleMessage:fe,mergeLocaleMessage:ke,getPostTranslationHandler:j,setPostTranslationHandler:z,getMissingHandler:$,setMissingHandler:Y,[See]:Z};return ye.datetimeFormats=L,ye.numberFormats=R,ye.rt=G,ye.te=he,ye.tm=re,ye.d=ue,ye.n=J,ye.getDateTimeFormat=q,ye.setDateTimeFormat=ie,ye.mergeDateTimeFormat=we,ye.getNumberFormat=Me,ye.setNumberFormat=xe,ye.mergeNumberFormat=ge,ye[MD]=n,ye[Px]=V,ye[Lx]=Q,ye[Rx]=ne,lo.NODE_ENV!=="production"&&(ye[Bx]=se=>{S.__v_emitter=se},ye[jx]=()=>{S.__v_emitter=void 0}),ye}function LD(t,e){}const Hx={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function Oee({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,i)=>[...r,...i.type===u.Fragment?i.children:[i]],[]):e.reduce((n,r)=>{const i=t[r];return i&&(n[r]=i()),n},xn())}function RD(){return u.Fragment}Fr({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>jr(t)||!isNaN(t)}},Hx);function Aee(t){return wr(t)&&!pt(t[0])}function BD(t,e,n,r){const{slots:i,attrs:o}=e;return()=>{const a={part:!0};let s=xn();t.locale&&(a.locale=t.locale),pt(t.format)?a.key=t.format:rn(t.format)&&(pt(t.format.key)&&(a.key=t.format.key),s=Object.keys(t.format).reduce((b,x)=>n.includes(x)?Fr(xn(),b,{[x]:t.format[x]}):b,xn()));const c=r(t.value,a,s);let l=[a.key];wr(c)?l=c.map((b,x)=>{const k=i[b.type],E=k?k({[b.type]:b.value,index:x,parts:c}):[b.value];return Aee(E)&&(E[0].key=`${b.type}-${x}`),E}):pt(c)&&(l=[c]);const d=Fr(xn(),o),f=pt(t.tag)||rn(t.tag)?t.tag:RD();return u.h(f,d,l)}}Fr({value:{type:Number,required:!0},format:{type:[String,Object]}},Hx);const _ee=hs("global-vue-i18n");function Zm(t={}){const e=u.getCurrentInstance();if(e==null)throw Ef(Qr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ef(Qr.NOT_INSTALLED);const n=Dee(e),r=Pee(n),i=OD(e),o=Nee(t,i);if(o==="global")return Eee(r,t,i),r;if(o==="parent"){let c=Lee(n,e,t.__useComponent);return c==null&&(lo.NODE_ENV!=="production"&&Da(Km(Pa.NOT_FOUND_PARENT_SCOPE)),c=r),c}const a=n;let s=a.__getInstance(e);if(s==null){const c=Fr({},t);"__i18n"in i&&(c.__i18n=i.__i18n),r&&(c.__root=r),s=Iee(c),a.__composerExtend&&(s[Fx]=a.__composerExtend(s)),Bee(a,e,s),a.__setInstance(e,s)}else lo.NODE_ENV!=="production"&&o==="local"&&Da(Km(Pa.DUPLICATE_USE_I18N_CALLING));return s}function Dee(t){const e=u.inject(t.isCE?_ee:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ef(t.isCE?Qr.NOT_INSTALLED_WITH_PROVIDE:Qr.UNEXPECTED_ERROR);return e}function Nee(t,e){return Fm(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Pee(t){return t.mode==="composition"?t.global:t.global.__composer}function Lee(t,e,n=!1){let r=null;const i=e.root;let o=Ree(e,n);for(;o!=null;){const a=t;if(t.mode==="composition")r=a.__getInstance(o);else if(__VUE_I18N_LEGACY_API__){const s=a.__getInstance(o);s!=null&&(r=s.__composer,n&&r&&!r[MD]&&(r=null))}if(r!=null||i===o)break;o=o.parent}return r}function Ree(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Bee(t,e,n){let r=null;u.onMounted(()=>{if(lo.NODE_ENV!=="production"&&e.vnode.el){e.vnode.el.__VUE_I18N__=n,r=UV();const i=n;i[Bx]&&i[Bx](r),r.on("*",LD)}},e),u.onUnmounted(()=>{const i=n;lo.NODE_ENV!=="production"&&e.vnode.el&&e.vnode.el.__VUE_I18N__&&(r&&r.off("*",LD),i[jx]&&i[jx](),delete e.vnode.el.__VUE_I18N__),t.__deleteInstance(e);const o=i[Fx];o&&(o(),delete i[Fx])},e)}if(Fr({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Hx),xee(),qq(_q),eee(Kq),tee(tD),lo.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__){const t=fc();t.__INTLIFY__=!0,Dq(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const jD={back:"Voltar",save:"Salvar",apply:"Aplicar",undo:"Desfazer",redo:"Refazer",move:"Mover",changeOrder:"Alterar ordem",select:"Selecionar",home:"Incio",preview:"Pr-visualizar",help:"Ajuda",pleaseEnterTheCode:"Por favor insira o cdigo",script:"Script",scriptResult:"Resultado de Script",showDetail:"Ver detalhes",insertTextBlockBefore:"Inserir bloco de texto antes",insertTextBlockAfter:"Inserir bloco de texto depois",copy:"Copiar",paste:"Colar",copyOrPasteContent:"Copiar ou colar contedo",copyContent:"Copia o contedo para a rea de Transferncia",pasteContent:"Cola o contedo da rea de Transferncia",copiedToClipboard:"Copiado para a rea de Transferncia",pastedFromClipboard:"Colado da rea de Transferncia",invalidContent:"Este no  um contedo vlido",pastedIsEmpty:"Nada a ser colado",tools:"Ferramentas",preFormattedText:"Texto pr-formatado",expand:"Expandir",collapse:"Diminuir",close:"Fechar"},FD={back:"Back",save:"Save",apply:"Apply",undo:"Undo",redo:"Redo",move:"Move",changeOrder:"Change order",select:"Select",home:"Home",preview:"Preview",help:"Help",pleaseEnterTheCode:"Please enter the code",script:"Script",scriptResult:"Script Result",showDetail:"Show detail",insertTextBlockBefore:"Insert text block before",insertTextBlockAfter:"Insert text block after",preFormattedText:"Pre formatted text",expand:"Expand",collapse:"Collapse"};function ea(t){return Zm({messages:{en:FD,en_US:FD,pt:jD,pt_BR:jD}})}function Vr(t){this.content=t}Vr.prototype={constructor:Vr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Vr(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Vr(n)},addToStart:function(t,e){return new Vr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Vr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Vr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Vr.from(t),t.size?new Vr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Vr.from(t),t.size?new Vr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Vr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}},Vr.from=function(t){if(t instanceof Vr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Vr(e)};function HD(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){let a=HD(i.content,o.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function zD(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let a=t.child(--i),s=e.child(--o),c=a.nodeSize;if(a==s){n-=c,r-=c;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let l=0,d=Math.min(a.text.length,s.text.length);for(;l<d&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let l=zD(a.content,s.content,n-1,r-1);if(l)return l}n-=c,r-=c}}class rt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let a=0,s=0;s<n;a++){let c=this.content[a],l=s+c.nodeSize;if(l>e&&r(c,i+s,o||null,a)!==!1&&c.content.size){let d=s+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",a=!0;return this.nodesBetween(e,n,(s,c)=>{let l=s.isText?s.text.slice(Math.max(e,c)-c,n-c):s.isLeaf?i?typeof i=="function"?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&r&&(a?a=!1:o+=r),o+=l},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new rt(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,a=0;a<n;o++){let s=this.content[o],c=a+s.nodeSize;c>e&&((a<e||c>n)&&(s.isText?s=s.cut(Math.max(0,e-a),Math.min(s.text.length,n-a)):s=s.cut(Math.max(0,e-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=c}return new rt(r,i)}cutByIndex(e,n){return e==n?rt.empty:e==0&&n==this.content.length?this:new rt(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new rt(i,o)}addToStart(e){return new rt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new rt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return HD(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return zD(this,e,n,r)}findIndex(e){if(e==0)return Jm(0,e);if(e==this.size)return Jm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?Jm(n+1,o):Jm(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return rt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new rt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return rt.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new rt(n||e,r)}static from(e){if(!e)return rt.empty;if(e instanceof rt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new rt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}rt.empty=new rt([],0);const zx={index:0,offset:0};function Jm(t,e){return zx.index=t,zx.offset=e,zx}function Qm(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Qm(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Qm(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class Sn{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Qm(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Sn.none;if(e instanceof Sn)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}Sn.none=[];class Vm extends Error{}class Ct{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=UD(this.content,e+this.openStart,n);return r&&new Ct(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Ct($D(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Ct.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ct(rt.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new Ct(e,r,i)}}Ct.empty=new Ct(rt.empty,0,0);function $D(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:a,offset:s}=t.findIndex(n);if(i==e||o.isText){if(s!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy($D(o.content,e-i-1,n-i-1)))}function UD(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),a=t.maybeChild(i);if(o==e||a.isText)return t.cut(0,e).append(n).append(t.cut(e));let s=UD(a.content,e-o-1,n);return s&&t.replaceChild(i,a.copy(s))}function jee(t,e,n){if(n.openStart>t.depth)throw new Vm("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Vm("Inconsistent open depths");return WD(t,e,n,0)}function WD(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let a=WD(t,e,n,r+1);return o.copy(o.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,s=a.content;return mc(a,s.cut(0,t.parentOffset).append(n.content).append(s.cut(e.parentOffset)))}else{let{start:a,end:s}=Fee(n,t);return mc(o,GD(t,a,s,e,r))}else return mc(o,qm(t,e,r))}function YD(t,e){if(!e.type.compatibleContent(t.type))throw new Vm("Cannot join "+e.type.name+" onto "+t.type.name)}function $x(t,e,n){let r=t.node(n);return YD(r,e.node(n)),r}function pc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Mf(t,e,n,r){let i=(e||t).node(n),o=0,a=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(pc(t.nodeAfter,r),o++));for(let s=o;s<a;s++)pc(i.child(s),r);e&&e.depth==n&&e.textOffset&&pc(e.nodeBefore,r)}function mc(t,e){return t.type.checkContent(e),t.copy(e)}function GD(t,e,n,r,i){let o=t.depth>i&&$x(t,e,i+1),a=r.depth>i&&$x(n,r,i+1),s=[];return Mf(null,t,i,s),o&&a&&e.index(i)==n.index(i)?(YD(o,a),pc(mc(o,GD(t,e,n,r,i+1)),s)):(o&&pc(mc(o,qm(t,e,i+1)),s),Mf(e,n,i,s),a&&pc(mc(a,qm(n,r,i+1)),s)),Mf(r,null,i,s),new rt(s)}function qm(t,e,n){let r=[];if(Mf(null,t,n,r),t.depth>n){let i=$x(t,e,n+1);pc(mc(i,qm(t,e,n+1)),r)}return Mf(e,null,n,r),new rt(r)}function Fee(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(rt.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class If{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Sn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let s=r;r=i,i=s}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new eg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let a=e;;){let{index:s,offset:c}=a.content.findIndex(o),l=o-c;if(r.push(a,s,i+c),!l||(a=a.child(s),a.isText))break;o=l-1,i+=c+1}return new If(n,r,o)}static resolveCached(e,n){let r=XD.get(e);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==n)return a}else XD.set(e,r=new Hee);let i=r.elts[r.i]=If.resolve(e,n);return r.i=(r.i+1)%zee,i}}class Hee{constructor(){this.elts=[],this.i=0}}const zee=12,XD=new WeakMap;class eg{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $ee=Object.create(null);let gc=class UE{constructor(e,n,r,i=Sn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||rt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Qm(this.attrs,n||e.defaultAttrs||$ee)&&Sn.sameSet(this.marks,r||Sn.none)}copy(e=null){return e==this.content?this:new UE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new UE(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ct.empty;let i=this.resolve(e),o=this.resolve(n),a=r?0:i.sharedDepth(n),s=i.start(a),l=i.node(a).content.cut(i.pos-s,o.pos-s);return new Ct(l,i.depth-a,o.depth-a)}replace(e,n,r){return jee(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return If.resolveCached(this,e)}resolveNoCache(e){return If.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),KD(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=rt.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),s=a&&a.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Sn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Sn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=rt.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};gc.prototype.text=void 0;class tg extends gc{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):KD(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tg(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function KD(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class vc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Uee(e,n);if(r.next==null)return vc.empty;let i=ZD(r);r.next&&r.err("Unexpected trailing text");let o=Jee(Zee(i));return Qee(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(a,s){let c=a.matchFragment(e,r);if(c&&(!n||c.validEnd))return rt.from(s.map(l=>l.createAndFill()));for(let l=0;l<a.next.length;l++){let{type:d,next:f}=a.next[l];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let b=o(f,s.concat(d));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let s=i;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:c}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in n)&&(!i.type||c.validEnd)&&(r.push({match:s.contentMatch,type:s,via:i}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}vc.empty=new vc(!0);class Uee{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ZD(t){let e=[];do e.push(Wee(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Wee(t){let e=[];do e.push(Yee(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Yee(t){let e=Kee(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Gee(t,e);else break;return e}function JD(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Gee(t,e){let n=JD(t),r=n;return t.eat(",")&&(t.next!="}"?r=JD(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Xee(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let a=n[o];a.isInGroup(e)&&i.push(a)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Kee(t){if(t.eat("(")){let e=ZD(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Xee(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Zee(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(a,s,c){let l={term:c,to:s};return e[a].push(l),l}function i(a,s){a.forEach(c=>c.to=s)}function o(a,s){if(a.type=="choice")return a.exprs.reduce((c,l)=>c.concat(o(l,s)),[]);if(a.type=="seq")for(let c=0;;c++){let l=o(a.exprs[c],s);if(c==a.exprs.length-1)return l;i(l,s=n())}else if(a.type=="star"){let c=n();return r(s,c),i(o(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=n();return i(o(a.expr,s),c),i(o(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(s)].concat(o(a.expr,s));if(a.type=="range"){let c=s;for(let l=0;l<a.min;l++){let d=n();i(o(a.expr,c),d),c=d}if(a.max==-1)i(o(a.expr,c),c);else for(let l=a.min;l<a.max;l++){let d=n();r(c,d),i(o(a.expr,c),d),c=d}return[r(c)]}else{if(a.type=="name")return[r(s,void 0,a.value)];throw new Error("Unknown expr type")}}}}function QD(t,e){return e-t}function VD(t,e){let n=[];return r(e),n.sort(QD);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let a=0;a<o.length;a++){let{term:s,to:c}=o[a];!s&&n.indexOf(c)==-1&&r(c)}}}function Jee(t){let e=Object.create(null);return n(VD(t,0));function n(r){let i=[];r.forEach(a=>{t[a].forEach(({term:s,to:c})=>{if(!s)return;let l;for(let d=0;d<i.length;d++)i[d][0]==s&&(l=i[d][1]);VD(t,c).forEach(d=>{l||i.push([s,l=[]]),l.indexOf(d)==-1&&l.push(d)})})});let o=e[r.join(",")]=new vc(r.indexOf(t.length-1)>-1);for(let a=0;a<i.length;a++){let s=i[a][1].sort(QD);o.next.push({type:i[a][0],next:e[s.join(",")]||n(s)})}return o}}function Qee(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,a=[];for(let s=0;s<i.next.length;s++){let{type:c,next:l}=i.next[s];a.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(l)==-1&&r.push(l)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function qD(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function eN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function tN(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function nN(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new qee(t,r,e[r]);return n}class ng{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=nN(e,r.attrs),this.defaultAttrs=qD(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:eN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gc(this,this.computeAttrs(e),rt.from(n),Sn.setFrom(r))}createChecked(e=null,n,r){return n=rt.from(n),this.checkContent(n),new gc(this,this.computeAttrs(e),n,Sn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=rt.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(rt.empty,!0);return o?new gc(this,e,n.append(o),Sn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){tN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Sn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,a)=>r[o]=new ng(o,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}function Vee(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class qee{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Vee(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class rg{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=nN(e,i.attrs),this.excluded=null;let o=qD(this.attrs);this.instance=o?new Sn(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Sn(this,eN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new rg(o,i++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){tN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ete{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Vr.from(e.nodes),n.marks=Vr.from(e.marks||{}),this.nodes=ng.compile(this.spec.nodes,this),this.marks=rg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=vc.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?rN(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:rN(this,a.split(" "))}this.nodeFromJSON=i=>gc.fromJSON(this,i),this.markFromJSON=i=>Sn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ng){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new tg(r,r.defaultAttrs,e,Sn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function rN(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],a=o;if(o)n.push(o);else for(let s in t.marks){let c=t.marks[s];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function tte(t){return t.tag!=null}function nte(t){return t.style!=null}let Ux=class WE{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(tte(i))this.tags.push(i);else if(nte(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new sN(this,n,!1);return r.addAll(e,Sn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new sN(this,n,!0);return r.addAll(e,Sn.none,n.from,n.to),Ct.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(ote(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],s=a.style;if(!(s.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||s.length>e.length&&(s.charCodeAt(e.length)!=61||s.slice(e.length+1)!=n))){if(a.getAttrs){let c=a.getAttrs(n);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let s=n[a];if((s.priority==null?50:s.priority)<o)break}n.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=lN(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=lN(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new WE(e,WE.schemaRules(e)))}};const iN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},rte={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oN={ol:!0,ul:!0},Of=1,Wx=2,ig=4;function aN(t,e,n){return e!=null?(e?Of:0)|(e==="full"?Wx:0):t&&t.whitespace=="pre"?Of|Wx:n&-5}class og{constructor(e,n,r,i,o,a){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=Sn.none,this.match=o||(a&ig?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(rt.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Of)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=rt.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(rt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!iN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sN{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,a=aN(null,n.preserveWhitespace,0)|(r?ig:0);i?o=new og(i.type,i.attrs,Sn.none,!0,n.topMatch||i.type.contentMatch,a):r?o=new og(null,null,Sn.none,!0,null,a):o=new og(e.schema.topNodeType,null,Sn.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Wx?"full":this.localPreserveWS||(i.options&Of)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],s=e.previousSibling;(!a||s&&s.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),s;oN.hasOwnProperty(a)&&this.parser.normalizeLists&&ite(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));e:if(c?c.ignore:rte.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let l,d=this.needsBlock;if(iN.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),l=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=c&&c.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),l&&this.sync(o),this.needsBlock=d}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,c,l,c.consuming===!1?s:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let s=void 0;;){let c=this.parser.matchStyle(o,a,this,s);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(l=>!c.clearMark(l)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)s=c;else break}}return n}addElementByRule(e,n,r,i){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,n.attrs||null,r,n.preserveWhitespace);c&&(o=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let s=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}o&&this.sync(s)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let a=r?e.childNodes[r]:e.firstChild,s=i==null?null:e.childNodes[i];a!=s;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let a=this.open,s=0;a>=0;a--){let c=this.nodes[a],l=c.findWrapping(e);if(l&&(!i||i.length>l.length+s)&&(i=l,o=c,!l.length))break;if(c.solid){if(r)break;s+=2}}if(!i)return null;this.sync(o);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let a=Sn.none;for(let s of i.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):cN(s.type,e.type))&&(a=s.addToSet(a));return o.content.push(e.mark(a)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let s=aN(e,o,a.options);a.options&ig&&a.content.length==0&&(s|=ig);let c=Sn.none;return r=r.filter(l=>(a.type?a.type.allowsMarkType(l.type):cN(l.type,e))?(c=l.addToSet(c),!1):!0),this.nodes.push(new og(e,n,c,i,null,s)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Of)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(s,c)=>{for(;s>=0;s--){let l=n[s];if(l==""){if(s==n.length-1||s==0)continue;for(;c>=o;c--)if(a(s-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!d||d.name!=l&&!d.isInGroup(l))return!1;c--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ite(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&oN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function ote(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function lN(t){let e={};for(let n in t)e[n]=t[n];return e}function cN(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],a=s=>{o.push(s);for(let c=0;c<s.edgeCount;c++){let{type:l,next:d}=s.edge(c);if(l==e||o.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}const uN=65535,dN=Math.pow(2,16);function ate(t,e){return t+e*dN}function fN(t){return t&uN}function ste(t){return(t-(t&uN))/dN}const hN=1,pN=2,ag=4,mN=8;class Yx{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&mN)>0}get deletedBefore(){return(this.delInfo&(hN|ag))>0}get deletedAfter(){return(this.delInfo&(pN|ag))>0}get deletedAcross(){return(this.delInfo&ag)>0}}class co{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&co.empty)return co.empty}recover(e){let n=0,r=fN(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+ste(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let c=this.ranges[s]-(this.inverted?i:0);if(c>e)break;let l=this.ranges[s+o],d=this.ranges[s+a],f=c+l;if(e<=f){let b=l?e==c?-1:e==f?1:n:n,x=c+i+(b<0?0:d);if(r)return x;let k=e==(n<0?c:f)?null:ate(s/3,e-c),E=e==c?pN:e==f?hN:ag;return(n<0?e!=c:e!=f)&&(E|=mN),new Yx(x,E,k)}i+=d-l}return r?e+i:new Yx(e+i,0,null)}touches(e,n){let r=0,i=fN(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let c=this.ranges[s]-(this.inverted?r:0);if(c>e)break;let l=this.ranges[s+o],d=c+l;if(e<=d&&s==i*3)return!0;r+=this.ranges[s+a]-l}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],s=a-(this.inverted?o:0),c=a+(this.inverted?0:o),l=this.ranges[i+n],d=this.ranges[i+r];e(s,s+l,c,c+d),o+=d-l}}invert(){return new co(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?co.empty:new co(e<0?[0,-e,0]:[0,0,e])}}co.empty=new co([]);class sg{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new sg(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new sg;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],s=a.mapResult(e,n);if(s.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this._maps[c].recover(s.recover);continue}}i|=s.delInfo,e=s.pos}return r?e:new Yx(e,i,null)}}const Gx=Object.create(null);class pi{getMap(){return co.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Gx[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Gx)throw new RangeError("Duplicate use of step JSON ID "+e);return Gx[e]=n,n.prototype.jsonID=e,n}}class Er{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Er(e,null)}static fail(e){return new Er(null,e)}static fromReplace(e,n,r,i){try{return Er.ok(e.replace(n,r,i))}catch(o){if(o instanceof Vm)return Er.fail(o.message);throw o}}}function Xx(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Xx(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return rt.fromArray(r)}class al extends pi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Ct(Xx(n.content,(a,s)=>!a.isAtom||!s.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Er.fromReplace(e,this.from,this.to,o)}invert(){return new ta(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new al(n.pos,r.pos,this.mark)}merge(e){return e instanceof al&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new al(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new al(n.from,n.to,e.markFromJSON(n.mark))}}pi.jsonID("addMark",al);class ta extends pi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ct(Xx(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Er.fromReplace(e,this.from,this.to,r)}invert(){return new al(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ta(n.pos,r.pos,this.mark)}merge(e){return e instanceof ta&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ta(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ta(n.from,n.to,e.markFromJSON(n.mark))}}pi.jsonID("removeMark",ta);class sl extends pi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Er.fromReplace(e,this.pos,this.pos+1,new Ct(rt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new sl(this.pos,n.marks[i]);return new sl(this.pos,this.mark)}}return new yc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new sl(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new sl(n.pos,e.markFromJSON(n.mark))}}pi.jsonID("addNodeMark",sl);class yc extends pi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Er.fromReplace(e,this.pos,this.pos+1,new Ct(rt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new sl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yc(n.pos,e.markFromJSON(n.mark))}}pi.jsonID("removeNodeMark",yc);class Hr extends pi{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Kx(e,this.from,this.to)?Er.fail("Structure replace would overwrite content"):Er.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new co([this.from,this.to-this.from,this.slice.size])}invert(e){return new Hr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Hr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Hr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ct.empty:new Ct(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Hr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ct.empty:new Ct(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Hr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Hr(n.from,n.to,Ct.fromJSON(e,n.slice),!!n.structure)}}pi.jsonID("replace",Hr);class zr extends pi{constructor(e,n,r,i,o,a,s=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=s}apply(e){if(this.structure&&(Kx(e,this.from,this.gapFrom)||Kx(e,this.gapTo,this.to)))return Er.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Er.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Er.fromReplace(e,this.from,this.to,r):Er.fail("Content does not fit in gap")}getMap(){return new co([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new zr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new zr(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zr(n.from,n.to,n.gapFrom,n.gapTo,Ct.fromJSON(e,n.slice),n.insert,!!n.structure)}}pi.jsonID("replaceAround",zr);function Kx(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function lte(t,e,n,r){let i=[],o=[],a,s;t.doc.nodesBetween(e,n,(c,l,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let b=Math.max(l,e),x=Math.min(l+c.nodeSize,n),k=r.addToSet(f);for(let E=0;E<f.length;E++)f[E].isInSet(k)||(a&&a.to==b&&a.mark.eq(f[E])?a.to=x:i.push(a=new ta(b,x,f[E])));s&&s.to==b?s.to=x:o.push(s=new al(b,x,r))}}),i.forEach(c=>t.step(c)),o.forEach(c=>t.step(c))}function cte(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(a,s)=>{if(!a.isInline)return;o++;let c=null;if(r instanceof rg){let l=a.marks,d;for(;d=r.isInSet(l);)(c||(c=[])).push(d),l=d.removeFromSet(l)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let l=Math.min(s+a.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],b;for(let x=0;x<i.length;x++){let k=i[x];k.step==o-1&&f.eq(i[x].style)&&(b=k)}b?(b.to=l,b.step=o):i.push({style:f,from:Math.max(s,e),to:l,step:o})}}}),i.forEach(a=>t.step(new ta(a.from,a.to,a.style)))}function Zx(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),a=[],s=e+1;for(let c=0;c<o.childCount;c++){let l=o.child(c),d=s+l.nodeSize,f=r.matchType(l.type);if(!f)a.push(new Hr(s,d,Ct.empty));else{r=f;for(let b=0;b<l.marks.length;b++)n.allowsMarkType(l.marks[b].type)||t.step(new ta(s,d,l.marks[b]));if(i&&l.isText&&n.whitespace!="pre"){let b,x=/\r?\n|\r/g,k;for(;b=x.exec(l.text);)k||(k=new Ct(rt.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new Hr(s+b.index,s+b.index+b[0].length,k))}}s=d}if(!r.validEnd){let c=r.fillBefore(rt.empty,!0);t.replace(s,s,new Ct(c,0,0))}for(let c=a.length-1;c>=0;c--)t.step(a[c])}function ute(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ou(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),a=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,a,n))return r;if(r==0||i.type.spec.isolating||!ute(i,o,a))break}return null}function dte(t,e,n){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),s=i.after(o+1),c=a,l=s,d=rt.empty,f=0;for(let k=o,E=!1;k>n;k--)E||r.index(k)>0?(E=!0,d=rt.from(r.node(k).copy(d)),f++):c--;let b=rt.empty,x=0;for(let k=o,E=!1;k>n;k--)E||i.after(k+1)<i.end(k)?(E=!0,b=rt.from(i.node(k).copy(b)),x++):l++;t.step(new zr(c,l,a,s,new Ct(d.append(b),f,x),d.size-f,!0))}function Jx(t,e,n=null,r=t){let i=fte(t,e),o=i&&hte(r,e);return o?i.map(gN).concat({type:e,attrs:n}).concat(o.map(gN)):null}function gN(t){return{type:t,attrs:null}}function fte(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return n.canReplaceWith(r,i,a)?o:null}function hte(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let l=r;c&&l<i;l++)c=c.matchType(n.child(l).type);return!c||!c.validEnd?null:a}function pte(t,e,n){let r=rt.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let s=n[a].type.contentMatch.matchFragment(r);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=rt.from(n[a].type.create(n[a].attrs,r))}let i=e.start,o=e.end;t.step(new zr(i,o,i,o,new Ct(r,0,0),n.length,!0))}function mte(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(a,s)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&gte(t.doc,t.mapping.slice(o).map(s),r)){let l=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!k?l=!1:!x&&k&&(l=!0)}l===!1&&yN(t,a,s,o),Zx(t,t.mapping.slice(o).map(s,1),r,void 0,l===null);let d=t.mapping.slice(o),f=d.map(s,1),b=d.map(s+a.nodeSize,1);return t.step(new zr(f,b,f+1,b-1,new Ct(rt.from(r.create(c,null,a.marks)),0,0),1,!0)),l===!0&&vN(t,a,s,o),!1}})}function vN(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let c=t.mapping.slice(r).map(n+1+o+a.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function yN(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+o);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function gte(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function vte(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new zr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Ct(rt.from(a),0,0),1,!0))}function gs(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,d=n-2;l>o;l--,d--){let f=i.node(l),b=i.index(l);if(f.type.spec.isolating)return!1;let x=f.content.cutByIndex(b,f.childCount),k=r&&r[d+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let E=r&&r[d]||f;if(!f.canReplace(b+1,f.childCount)||!E.type.validContent(x))return!1}let s=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(s,s,c?c.type:i.node(o+1).type)}function yte(t,e,n=1,r){let i=t.doc.resolve(e),o=rt.empty,a=rt.empty;for(let s=i.depth,c=i.depth-n,l=n-1;s>c;s--,l--){o=rt.from(i.node(s).copy(o));let d=r&&r[l];a=rt.from(d?d.type.create(d.attrs,a):i.node(s).copy(a))}t.step(new Hr(e,e,new Ct(o.append(a),n,n),!0))}function ll(t,e){let n=t.resolve(e),r=n.index();return bN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function bte(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),a=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function bN(t,e){return!!(t&&e&&!t.isLeaf&&bte(t,e))}function lg(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,a,s=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):n>0?(o=r.node(i+1),s++,a=r.node(i).maybeChild(s)):(o=r.node(i).maybeChild(s-1),a=r.node(i+1)),o&&!o.isTextblock&&bN(o,a)&&r.node(i).canReplace(s,s+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function wte(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),a=o.node().type;if(i&&a.inlineContent){let d=a.whitespace=="pre",f=!!a.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let s=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);yN(t,d.node(),d.before(),s)}a.inlineContent&&Zx(t,e+n-1,a,o.node().contentMatchAt(o.index()),r==null);let c=t.mapping.slice(s),l=c.map(e-n);if(t.step(new Hr(l,c.map(e+n,-1),Ct.empty,!0)),r===!0){let d=t.doc.resolve(l);vN(t,d.node(),d.before(),t.steps.length)}return t}function xte(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function cg(t,e,n=e,r=Ct.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return wN(i,o,r)?new Hr(e,n,r):new Cte(i,o,r).fit()}function wN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Cte{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=rt.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=rt.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,s=i.depth;for(;a&&s&&o.childCount==1;)o=o.firstChild.content,a--,s--;let c=new Ct(o,a,s);return e>-1?new zr(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Hr(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Qx(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let s=this.depth;s>=0;s--){let{type:c,match:l}=this.frontier[s],d,f=null;if(n==1&&(a?l.matchType(a.type)||(f=l.fillBefore(rt.from(a),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:s,parent:o,inject:f};if(n==2&&a&&(d=l.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:s,parent:o,wrap:d};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qx(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ct(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qx(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new Ct(Af(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Ct(Af(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let a=this.unplaced,s=r?r.content:a.content,c=a.openStart-e,l=0,d=[],{match:f,type:b}=this.frontier[n];if(i){for(let E=0;E<i.childCount;E++)d.push(i.child(E));f=f.matchFragment(i)}let x=s.size+e-(a.content.size-a.openEnd);for(;l<s.childCount;){let E=s.child(l),m=f.matchType(E.type);if(!m)break;l++,(l>1||c==0||E.content.size)&&(f=m,d.push(xN(E.mark(b.allowedMarks(E.marks)),l==1?c:0,l==s.childCount?x:-1)))}let k=l==s.childCount;k||(x=-1),this.placed=_f(this.placed,n,rt.from(d)),this.frontier[n].match=f,k&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,m=s;E<x;E++){let h=m.lastChild;this.frontier.push({type:h.type,match:h.contentMatchAt(h.childCount)}),m=h.content}this.unplaced=k?e==0?Ct.empty:new Ct(Af(a.content,e-1,1),e-1,x<0?a.openEnd:e-1):new Ct(Af(a.content,e,l),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Vx(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=Vx(e,n,i,r,o);if(a){for(let s=n-1;s>=0;s--){let{match:c,type:l}=this.frontier[s],d=Vx(e,s,l,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:a,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=_f(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=_f(this.placed,this.depth,rt.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(rt.empty,!0);n.childCount&&(this.placed=_f(this.placed,this.frontier.length,n))}}function Af(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Af(t.firstChild.content,e-1,n)))}function _f(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(_f(t.lastChild.content,e-1,n)))}function Qx(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,xN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(rt.empty,!0)))),t.copy(r)}function Vx(t,e,n,r,i){let o=t.node(e),a=i?t.indexAfter(e):t.index(e);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!Ste(n,o.content,a)?s:null}function Ste(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kte(t){return t.spec.defining||t.spec.definingForContent}function Ete(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(wN(i,o,r))return t.step(new Hr(e,n,r));let a=SN(i,t.doc.resolve(n));a[a.length-1]==0&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let b=i.depth,x=i.pos-1;b>0;b--,x--){let k=i.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(b)>-1?s=b:i.before(b)==x&&a.splice(1,0,-b)}let c=a.indexOf(s),l=[],d=r.openStart;for(let b=r.content,x=0;;x++){let k=b.firstChild;if(l.push(k),x==r.openStart)break;b=k.content}for(let b=d-1;b>=0;b--){let x=l[b],k=kte(x.type);if(k&&!x.sameMarkup(i.node(Math.abs(s)-1)))d=b;else if(k||!x.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let x=(b+d+1)%(r.openStart+1),k=l[x];if(k)for(let E=0;E<a.length;E++){let m=a[(E+c)%a.length],h=!0;m<0&&(h=!1,m=-m);let g=i.node(m-1),w=i.index(m-1);if(g.canReplaceWith(w,w,k.type,k.marks))return t.replace(i.before(m),h?o.after(m):n,new Ct(CN(r.content,0,r.openStart,x),x,r.openEnd))}}let f=t.steps.length;for(let b=a.length-1;b>=0&&(t.replace(e,n,r),!(t.steps.length>f));b--){let x=a[b];x<0||(e=i.before(x),n=o.after(x))}}function CN(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(CN(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(t).append(t);t=a.append(o.matchFragment(a).fillBefore(rt.empty,!0))}return t}function Tte(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=xte(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Ct(rt.from(r),0,0))}function Mte(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=SN(r,i);for(let a=0;a<o.length;a++){let s=o[a],c=a==o.length-1;if(c&&s==0||r.node(s).type.contentMatch.validEnd)return t.delete(r.start(s),i.end(s));if(s>0&&(c||r.node(s-1).canReplace(r.index(s-1),i.indexAfter(s-1))))return t.delete(r.before(s),i.after(s))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function SN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Au extends pi{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Er.fromReplace(e,this.pos,this.pos+1,new Ct(rt.from(i),0,n.isLeaf?0:1))}getMap(){return co.empty}invert(e){return new Au(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Au(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Au(n.pos,n.attr,n.value)}}pi.jsonID("attr",Au);class Df extends pi{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Er.ok(r)}getMap(){return co.empty}invert(e){return new Df(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Df(n.attr,n.value)}}pi.jsonID("docAttr",Df);let _u=class extends Error{};_u=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},_u.prototype=Object.create(Error.prototype),_u.prototype.constructor=_u,_u.prototype.name="TransformError";class Ite{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new sg}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new _u(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ct.empty){let i=cg(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Ct(rt.from(r),0,0))}delete(e,n){return this.replace(e,n,Ct.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Ete(this,e,n,r),this}replaceRangeWith(e,n,r){return Tte(this,e,n,r),this}deleteRange(e,n){return Mte(this,e,n),this}lift(e,n){return dte(this,e,n),this}join(e,n=1){return wte(this,e,n),this}wrap(e,n){return pte(this,e,n),this}setBlockType(e,n=e,r,i=null){return mte(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return vte(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Au(e,n,r)),this}setDocAttribute(e,n){return this.step(new Df(e,n)),this}addNodeMark(e,n){return this.step(new sl(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Sn)n.isInSet(r.marks)&&this.step(new yc(e,n));else{let i=r.marks,o,a=[];for(;o=n.isInSet(i);)a.push(new yc(e,o)),i=o.removeFromSet(i);for(let s=a.length-1;s>=0;s--)this.step(a[s])}return this}split(e,n=1,r){return yte(this,e,n,r),this}addMark(e,n,r){return lte(this,e,n,r),this}removeMark(e,n,r){return cte(this,e,n,r),this}clearIncompatible(e,n,r){return Zx(this,e,n,r),this}}const qx=Object.create(null);class yn{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Ote(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ct.empty){let r=n.content.lastChild,i=null;for(let s=0;s<n.openEnd;s++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:c,$to:l}=a[s],d=e.mapping.slice(o);e.replaceRange(d.map(c.pos),d.map(l.pos),s?Ct.empty:n),s==0&&TN(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:s}=i[o],c=e.mapping.slice(r),l=c.map(a.pos),d=c.map(s.pos);o?e.deleteRange(l,d):(e.replaceRangeWith(l,d,n),TN(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _n(e):Du(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=n<0?Du(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Du(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new To(e.node(0))}static atStart(e){return Du(e,e,0,0,1)||new To(e)}static atEnd(e){return Du(e,e,e.content.size,e.childCount,-1)||new To(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=qx[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in qx)throw new RangeError("Duplicate use of selection JSON ID "+e);return qx[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _n.between(this.$anchor,this.$head).getBookmark()}}yn.prototype.visible=!0;class Ote{constructor(e,n){this.$from=e,this.$to=n}}let kN=!1;function EN(t){!kN&&!t.parent.inlineContent&&(kN=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _n extends yn{constructor(e,n=e){EN(e),EN(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return yn.near(r);let i=e.resolve(n.map(this.anchor));return new _n(i.parent.inlineContent?i:r,r)}replace(e,n=Ct.empty){if(super.replace(e,n),n==Ct.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _n&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ug(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _n(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=yn.findFrom(n,r,!0)||yn.findFrom(n,-r,!0);if(o)n=o.$head;else return yn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(yn.findFrom(e,-r,!0)||yn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _n(e,n)}}yn.jsonID("text",_n);class ug{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ug(e.map(this.anchor),e.map(this.head))}resolve(e){return _n.between(e.resolve(this.anchor),e.resolve(this.head))}}class Cn extends yn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?yn.near(o):new Cn(o)}content(){return new Ct(rt.from(this.node),0,0)}eq(e){return e instanceof Cn&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new eC(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Cn(e.resolve(n.anchor))}static create(e,n){return new Cn(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Cn.prototype.visible=!1,yn.jsonID("node",Cn);class eC{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new ug(r,r):new eC(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Cn.isSelectable(r)?new Cn(n):yn.near(n)}}class To extends yn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ct.empty){if(n==Ct.empty){e.delete(0,e.doc.content.size);let r=yn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new To(e)}map(e){return new To(e)}eq(e){return e instanceof To}getBookmark(){return Ate}}yn.jsonID("all",To);const Ate={map(){return this},resolve(t){return new To(t)}};function Du(t,e,n,r,i,o=!1){if(e.inlineContent)return _n.create(t,n);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let s=e.child(a);if(s.isAtom){if(!o&&Cn.isSelectable(s))return Cn.create(t,n-(i<0?s.nodeSize:0))}else{let c=Du(t,s,n+i,i<0?s.childCount:0,i,o);if(c)return c}n+=s.nodeSize*i}return null}function TN(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Hr||i instanceof zr))return;let o=t.mapping.maps[r],a;o.forEach((s,c,l,d)=>{a==null&&(a=d)}),t.setSelection(yn.near(t.doc.resolve(a),n))}function MN(t,e){return!e||!t?t:t.bind(e)}class dg{constructor(e,n,r){this.name=e,this.init=MN(n.init,r),this.apply=MN(n.apply,r)}}new dg("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new dg("selection",{init(t,e){return t.selection||yn.atStart(e.doc)},apply(t){return t.selection}}),new dg("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new dg("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}});function IN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=IN(i,e,{})),n[r]=i}return n}class cl{constructor(e){this.spec=e,this.props={},e.props&&IN(e.props,this,this.props),this.key=e.key?e.key.key:ON("plugin")}getState(e){return e[this.key]}}const tC=Object.create(null);function ON(t){return t in tC?t+"$"+ ++tC[t]:(tC[t]=0,t+"$")}class ul{constructor(e="key"){this.key=ON(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nC=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function AN(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const _N=(t,e,n)=>{let r=AN(t,n);if(!r)return!1;let i=rC(r);if(!i){let a=r.blockRange(),s=a&&Ou(a);return s==null?!1:(e&&e(t.tr.lift(a,s).scrollIntoView()),!0)}let o=i.nodeBefore;if(HN(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Nu(o,"end")||Cn.isSelectable(o)))for(let a=r.depth;;a--){let s=cg(t.doc,r.before(a),r.after(a),Ct.empty);if(s&&s.slice.size<s.to-s.from){if(e){let c=t.tr.step(s);c.setSelection(Nu(o,"end")?yn.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Cn.create(c.doc,i.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},_te=(t,e,n)=>{let r=AN(t,n);if(!r)return!1;let i=rC(r);return i?DN(t,i,e):!1},Dte=(t,e,n)=>{let r=PN(t,n);if(!r)return!1;let i=iC(r);return i?DN(t,i,e):!1};function DN(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let a=e.nodeAfter,s=a,c=e.pos+1;for(;!s.isTextblock;c++){if(s.type.spec.isolating)return!1;let d=s.firstChild;if(!d)return!1;s=d}let l=cg(t.doc,o,c,Ct.empty);if(!l||l.from!=o||l instanceof Hr&&l.slice.size>=c-o)return!1;if(n){let d=t.tr.step(l);d.setSelection(_n.create(d.doc,o)),n(d.scrollIntoView())}return!0}function Nu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const NN=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=rC(r)}let a=o&&o.nodeBefore;return!a||!Cn.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Cn.create(t.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function rC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function PN(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const LN=(t,e,n)=>{let r=PN(t,n);if(!r)return!1;let i=iC(r);if(!i)return!1;let o=i.nodeAfter;if(HN(t,i,e,1))return!0;if(r.parent.content.size==0&&(Nu(o,"start")||Cn.isSelectable(o))){let a=cg(t.doc,r.before(),r.after(),Ct.empty);if(a&&a.slice.size<a.to-a.from){if(e){let s=t.tr.step(a);s.setSelection(Nu(o,"start")?yn.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Cn.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},RN=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=iC(r)}let a=o&&o.nodeAfter;return!a||!Cn.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Cn.create(t.doc,o.pos)).scrollIntoView()),!0)};function iC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Nte=(t,e)=>{let n=t.selection,r=n instanceof Cn,i;if(r){if(n.node.isTextblock||!ll(t.doc,n.from))return!1;i=n.from}else if(i=lg(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Cn.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Pte=(t,e)=>{let n=t.selection,r;if(n instanceof Cn){if(n.node.isTextblock||!ll(t.doc,n.to))return!1;r=n.to}else if(r=lg(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Lte=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Ou(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},BN=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function oC(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Rte=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=oC(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let s=n.after(),c=t.tr.replaceWith(s,s,a.createAndFill());c.setSelection(yn.near(c.doc.resolve(s),1)),e(c.scrollIntoView())}return!0},jN=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof To||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=oC(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=t.tr.insert(a,o.createAndFill());s.setSelection(_n.create(s.doc,a+1)),e(s.scrollIntoView())}return!0},FN=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(gs(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ou(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Bte(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Cn&&e.selection.node.isBlock)return!r.parentOffset||!gs(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],a,s,c=!1,l=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){c=r.end(x)==r.pos+(r.depth-x),l=r.start(x)==r.pos-(r.depth-x),s=oC(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),o.unshift(c&&s?{type:s}:null),a=x;break}else{if(x==1)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof _n||e.selection instanceof To)&&d.deleteSelection();let f=d.mapping.map(r.pos),b=gs(d.doc,f,o.length,o);if(b||(o[0]=s?{type:s}:null,b=gs(d.doc,f,o.length,o)),!b)return!1;if(d.split(f,o.length,o),!c&&l&&r.node(a).type!=s){let x=d.mapping.map(r.before(a)),k=d.doc.resolve(x);s&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,s)&&d.setNodeMarkup(d.mapping.map(r.before(a)),s)}return n&&n(d.scrollIntoView()),!0}}const jte=Bte(),Fte=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Cn.create(t.doc,i))),!0)};function Hte(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ll(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function HN(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,a,s,c=i.type.spec.isolating||o.type.spec.isolating;if(!c&&Hte(t,e,n))return!0;let l=!c&&e.parent.canReplace(e.index(),e.index()+1);if(l&&(a=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){let x=e.pos+o.nodeSize,k=rt.empty;for(let h=a.length-1;h>=0;h--)k=rt.from(a[h].create(null,k));k=rt.from(i.copy(k));let E=t.tr.step(new zr(e.pos-1,x,e.pos,x,new Ct(k,1,0),a.length,!0)),m=E.doc.resolve(x+2*a.length);m.nodeAfter&&m.nodeAfter.type==i.type&&ll(E.doc,m.pos)&&E.join(m.pos),n(E.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&c?null:yn.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),b=f&&Ou(f);if(b!=null&&b>=e.depth)return n&&n(t.tr.lift(f,b).scrollIntoView()),!0;if(l&&Nu(o,"start",!0)&&Nu(i,"end")){let x=i,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let E=o,m=1;for(;!E.isTextblock;E=E.firstChild)m++;if(x.canReplace(x.childCount,x.childCount,E.content)){if(n){let h=rt.empty;for(let w=k.length-1;w>=0;w--)h=rt.from(k[w].copy(h));let g=t.tr.step(new zr(e.pos-k.length,e.pos+o.nodeSize,e.pos+m,e.pos+o.nodeSize-m,new Ct(h,k.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function zN(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(_n.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const zte=zN(-1),$te=zN(1);function Ute(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&Jx(a,t,e);return s?(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0):!1}}function $N(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(a,s,(c,l)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(l),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:s},$to:{pos:c}}=n.selection.ranges[a];o.setBlockType(s,c,t,e)}r(o.scrollIntoView())}return!0}}function aC(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}aC(nC,_N,NN),aC(nC,LN,RN),aC(BN,jN,FN,jte),typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Wte(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o);if(!a)return!1;let s=r?n.tr:null;return Yte(s,a,t,e)?(r&&r(s.scrollIntoView()),!0):!1}}function Yte(t,e,n,r=null){let i=!1,o=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);o=new eg(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new eg(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let s=Jx(o,n,r,e);return s?(t&&Gte(t,e,s,i,n),!0):!1}function Gte(t,e,n,r,i){let o=rt.empty;for(let d=n.length-1;d>=0;d--)o=rt.from(n[d].type.create(n[d].attrs,o));t.step(new zr(e.start-(r?2:0),e.end,e.start,e.end,new Ct(o,0,0),n.length,!0));let a=0;for(let d=0;d<n.length;d++)n[d].type==i&&(a=d+1);let s=n.length-a,c=e.start+n.length-(r?2:0),l=e.parent;for(let d=e.startIndex,f=e.endIndex,b=!0;d<f;d++,b=!1)!b&&gs(t.doc,c,s)&&(t.split(c,s),c+=2*s),c+=l.child(d).nodeSize;return t}function Xte(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Kte(e,n,t,o):Zte(e,n,o):!0:!1}}function Kte(t,e,n,r){let i=t.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new zr(o-1,a,o,a,new Ct(rt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new eg(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const s=Ou(r);if(s==null)return!1;i.lift(r,s);let c=i.doc.resolve(i.mapping.map(o,-1)-1);return ll(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function Zte(t,e,n){let r=t.tr,i=n.parent;for(let x=n.end,k=n.endIndex-1,E=n.startIndex;k>E;k--)x-=i.child(k).nodeSize,r.delete(x-1,x+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=n.startIndex==0,c=n.endIndex==i.childCount,l=o.node(-1),d=o.index(-1);if(!l.canReplace(d+(s?0:1),d+1,a.content.append(c?rt.empty:rt.from(i))))return!1;let f=o.pos,b=f+a.nodeSize;return r.step(new zr(f-(s?1:0),b+(c?1:0),f+1,b-1,new Ct((s?rt.empty:rt.from(i.copy(rt.empty))).append(c?rt.empty:rt.from(i.copy(rt.empty))),s?0:1,c?0:1),s?0:1)),e(r.scrollIntoView()),!0}function Jte(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let s=o.parent,c=s.child(a-1);if(c.type!=t)return!1;if(n){let l=c.lastChild&&c.lastChild.type==s.type,d=rt.from(l?t.create():null),f=new Ct(rt.from(t.create(null,rt.from(s.type.create(null,d)))),l?3:1,0),b=o.start,x=o.end;n(e.tr.step(new zr(b-(l?3:1),x,b,x,f,1,!0)).scrollIntoView())}return!0}}var Qte=Object.defineProperty,UN=(t,e)=>{for(var n in e)Qte(t,n,{get:e[n],enumerable:!0})};function WN(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var Vte=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,s])=>[a,(...l)=>{const d=s(...l)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a=[],s=!!t,c=t||i.tr,l=()=>(!s&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,b])=>[f,(...k)=>{const E=this.buildProps(c,e),m=b(...k)(E);return a.push(m),d}])),run:l};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([s,c])=>[s,(...l)=>c(...l)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a={tr:t,editor:r,view:o,state:WN({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([s,c])=>[s,(...l)=>c(...l)(a)]))}};return a}};function qte(t,e){const n=new Ite(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var YN=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&YN(r)}return t};function fg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return YN(n)}function Nf(t,e,n){if(t instanceof gc||t instanceof rt)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return rt.fromArray(t.map(s=>e.nodeFromJSON(s)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Nf("",e,n)}if(i){if(n.errorOnInvalidContent){let a=!1,s="";const c=new ete({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(a=!0,s=typeof l=="string"?l:l.outerHTML,null)}]}})});if(n.slice?Ux.fromSchema(c).parseSlice(fg(t),n.parseOptions):Ux.fromSchema(c).parse(fg(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const o=Ux.fromSchema(e);return n.slice?o.parseSlice(fg(t),n.parseOptions).content:o.parse(fg(t),n.parseOptions)}return Nf("",e,n)}function ene(t,e,n={},r={}){return Nf(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function tne(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function nne(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function sC(t){return e=>nne(e.$from,t)}function Pf(t,e,n){return t.config[e]===void 0&&t.parent?Pf(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Pf(t.parent,e,n):null}):t.config[e]}function rne(t){return typeof t=="function"}function Lf(t,e=void 0,...n){return rne(t)?e?t.bind(e)(...n):t(...n):t}function ine(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function lC(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const s=o?String(o).split(" "):[],c=r[i]?r[i].split(" "):[],l=s.filter(d=>!c.includes(d));r[i]=[...c,...l].join(" ")}else if(i==="style"){const s=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],l=new Map;c.forEach(d=>{const[f,b]=d.split(":").map(x=>x.trim());l.set(f,b)}),s.forEach(d=>{const[f,b]=d.split(":").map(x=>x.trim());l.set(f,b)}),r[i]=Array.from(l.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=o}),r},{})}function one(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:a={}}=n||{};let s="";return t.nodesBetween(r,i,(c,l,d,f)=>{var b;c.isBlock&&l>r&&(s+=o);const x=a==null?void 0:a[c.type.name];if(x)return d&&(s+=x({node:c,pos:l,parent:d,index:f,range:e})),!1;c.isText&&(s+=(b=c==null?void 0:c.text)==null?void 0:b.slice(Math.max(r,l)-l,i-l))}),s}function ane(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function dl(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function sne(t,e){const n=dl(e,t.schema),{from:r,to:i,empty:o}=t.selection,a=[];o?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const s=a.find(c=>c.type.name===n.name);return s?{...s.attrs}:{}}function mi(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function GN(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function lne(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function cne(t){const e=lne(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,a)=>a!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function une(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((s,c)=>{a.push({from:s,to:c})});else{const{from:s,to:c}=n[o];if(s===void 0||c===void 0)return;a.push({from:s,to:c})}a.forEach(({from:s,to:c})=>{const l=e.slice(o).map(s,-1),d=e.slice(o).map(c),f=e.invert().map(l,-1),b=e.invert().map(d);r.push({oldRange:{from:f,to:b},newRange:{from:l,to:d}})})}),cne(r)}function dne(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function hg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:dne(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function XN(t,e,n={}){return t.find(r=>r.type===e&&hg(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function KN(t,e,n={}){return!!XN(t,e,n)}function ZN(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!XN([...i.node.marks],e,n)))return;let a=i.index,s=t.start()+i.offset,c=a+1,l=s+i.node.nodeSize;for(;a>0&&KN([...t.parent.child(a-1).marks],e,n);)a-=1,s-=t.parent.child(a).nodeSize;for(;c<t.parent.childCount&&KN([...t.parent.child(c).marks],e,n);)l+=t.parent.child(c).nodeSize,c+=1;return{from:s,to:l}}function pg(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function fne(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?dl(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>hg(f.attrs,n,{strict:!1}));let a=0;const s=[];if(i.forEach(({$from:f,$to:b})=>{const x=f.pos,k=b.pos;t.doc.nodesBetween(x,k,(E,m)=>{if(!E.isText&&!E.marks.length)return;const h=Math.max(x,m),g=Math.min(k,m+E.nodeSize),w=g-h;a+=w,s.push(...E.marks.map(p=>({mark:p,from:h,to:g})))})}),a===0)return!1;const c=s.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>hg(f.mark.attrs,n,{strict:!1})).reduce((f,b)=>f+b.to-b.from,0),l=s.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,b)=>f+b.to-b.from,0);return(c>0?c+l:c)>=a}function cC(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,a=e?mi(e,t.schema):null,s=[];t.doc.nodesBetween(r,i,(f,b)=>{if(f.isText)return;const x=Math.max(r,b),k=Math.min(i,b+f.nodeSize);s.push({node:f,from:x,to:k})});const c=i-r,l=s.filter(f=>a?a.name===f.node.type.name:!0).filter(f=>hg(f.node.attrs,n,{strict:!1}));return o?!!l.length:l.reduce((f,b)=>f+b.to-b.from,0)>=c}function JN(t,e){const{nodeExtensions:n}=ine(e),r=n.find(a=>a.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Lf(Pf(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function QN(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(QN(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function VN(t){return t instanceof _n}function bc(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function hne(t,e=null){if(!e)return null;const n=yn.atStart(t),r=yn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?_n.create(t,bc(0,i,o),bc(t.content.size,i,o)):_n.create(t,bc(e,i,o),bc(e,i,o))}function pne(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Hr||i instanceof zr))return;const o=t.mapping.maps[r];let a=0;o.forEach((s,c,l,d)=>{a===0&&(a=d)}),t.setSelection(yn.near(t.doc.resolve(a),n))}var qN=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}};function mne(t){return Object.prototype.toString.call(t).slice(8,-1)}function mg(t){return mne(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function eP(t,e){const n={...t};return mg(t)&&mg(e)&&Object.keys(e).forEach(r=>{mg(e[r])&&mg(t[r])?n[r]=eP(t[r],e[r]):n[r]=e[r]}),n}var tP=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Lf(Pf(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Lf(Pf(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>eP(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},gne={};UN(gne,{ClipboardTextSerializer:()=>vne,Commands:()=>Ere,Delete:()=>Tre,Drop:()=>Mre,Editable:()=>Ire,FocusEvents:()=>Ore,Keymap:()=>Are,Paste:()=>_re,Tabindex:()=>Dre,focusEventsPluginKey:()=>sP});var Mo=class cH extends tP{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new cH(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},vne=Mo.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new cl({key:new ul("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,a=Math.min(...o.map(d=>d.$from.pos)),s=Math.max(...o.map(d=>d.$to.pos)),c=ane(n);return one(r,{from:a,to:s},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),nP={};UN(nP,{blur:()=>yne,clearContent:()=>bne,clearNodes:()=>wne,command:()=>xne,createParagraphNear:()=>Cne,cut:()=>Sne,deleteCurrentNode:()=>kne,deleteNode:()=>Ene,deleteRange:()=>Tne,deleteSelection:()=>Mne,enter:()=>Ine,exitCode:()=>One,extendMarkRange:()=>Ane,first:()=>_ne,focus:()=>Dne,forEach:()=>Nne,insertContent:()=>Pne,insertContentAt:()=>Rne,joinBackward:()=>Fne,joinDown:()=>jne,joinForward:()=>Hne,joinItemBackward:()=>zne,joinItemForward:()=>$ne,joinTextblockBackward:()=>Une,joinTextblockForward:()=>Wne,joinUp:()=>Bne,keyboardShortcut:()=>Gne,lift:()=>Xne,liftEmptyBlock:()=>Kne,liftListItem:()=>Zne,newlineInCode:()=>Jne,resetAttributes:()=>Qne,scrollIntoView:()=>Vne,selectAll:()=>qne,selectNodeBackward:()=>ere,selectNodeForward:()=>tre,selectParentNode:()=>nre,selectTextblockEnd:()=>rre,selectTextblockStart:()=>ire,setContent:()=>ore,setMark:()=>sre,setMeta:()=>lre,setNode:()=>cre,setNodeSelection:()=>ure,setTextSelection:()=>dre,sinkListItem:()=>fre,splitBlock:()=>hre,splitListItem:()=>pre,toggleList:()=>mre,toggleMark:()=>gre,toggleNode:()=>vre,toggleWrap:()=>yre,undoInputRule:()=>bre,unsetAllMarks:()=>wre,unsetMark:()=>xre,updateAttributes:()=>Cre,wrapIn:()=>Sre,wrapInList:()=>kre});var yne=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),bne=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),wne=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:a})=>{t.doc.nodesBetween(o.pos,a.pos,(s,c)=>{if(s.type.isText)return;const{doc:l,mapping:d}=e,f=l.resolve(d.map(c)),b=l.resolve(d.map(c+s.nodeSize)),x=f.blockRange(b);if(!x)return;const k=Ou(x);if(s.type.isTextblock){const{defaultType:E}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(x.start,E)}(k||k===0)&&e.lift(x,k)})}),!0},xne=t=>e=>t(e),Cne=()=>({state:t,dispatch:e})=>jN(t,e),Sne=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,o.content),r.setSelection(new _n(r.doc.resolve(Math.max(a-1,0)))),!0},kne=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const s=i.before(o),c=i.after(o);t.delete(s,c).scrollIntoView()}return!0}return!1},Ene=t=>({tr:e,state:n,dispatch:r})=>{const i=mi(t,n.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const c=o.before(a),l=o.after(a);e.delete(c,l).scrollIntoView()}return!0}return!1},Tne=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Mne=()=>({state:t,dispatch:e})=>nC(t,e),Ine=()=>({commands:t})=>t.keyboardShortcut("Enter"),One=()=>({state:t,dispatch:e})=>Rte(t,e),Ane=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=dl(t,r.schema),{doc:a,selection:s}=n,{$from:c,from:l,to:d}=s;if(i){const f=ZN(c,o,e);if(f&&f.from<=l&&f.to>=d){const b=_n.create(a,f.from,f.to);n.setSelection(b)}}return!0},_ne=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function rP(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function gg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Dne=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{(gg()||rP())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!VN(n.state.selection))return a(),!0;const s=hne(i.doc,t)||n.state.selection,c=n.state.selection.eq(s);return o&&(c||i.setSelection(s),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},Nne=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Pne=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Lne=t=>!("type"in t),Rne=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var a;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let s;const c=m=>{o.emit("contentError",{editor:o,error:m,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},l={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Nf(e,o.schema,{parseOptions:l,errorOnInvalidContent:!0})}catch(m){c(m)}try{s=Nf(e,o.schema,{parseOptions:l,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(m){return c(m),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},b=!0,x=!0;if((Lne(s)?s:[s]).forEach(m=>{m.check(),b=b?m.isText&&m.marks.length===0:!1,x=x?m.isBlock:!1}),d===f&&x){const{parent:m}=r.doc.resolve(d);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}let E;if(b){if(Array.isArray(e))E=e.map(m=>m.text||"").join("");else if(e instanceof rt){let m="";e.forEach(h=>{h.text&&(m+=h.text)}),E=m}else typeof e=="object"&&e&&e.text?E=e.text:E=e;r.insertText(E,d,f)}else{E=s;const m=r.doc.resolve(d),h=m.node(),g=m.parentOffset===0,w=h.isText||h.isTextblock,p=h.content.size>0;g&&w&&p&&(d=Math.max(0,d-1)),r.replaceWith(d,f,E)}n.updateSelection&&pne(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:E}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:E})}return!0},Bne=()=>({state:t,dispatch:e})=>Nte(t,e),jne=()=>({state:t,dispatch:e})=>Pte(t,e),Fne=()=>({state:t,dispatch:e})=>_N(t,e),Hne=()=>({state:t,dispatch:e})=>LN(t,e),zne=()=>({state:t,dispatch:e,tr:n})=>{try{const r=lg(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},$ne=()=>({state:t,dispatch:e,tr:n})=>{try{const r=lg(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Une=()=>({state:t,dispatch:e})=>_te(t,e),Wne=()=>({state:t,dispatch:e})=>Dte(t,e);function iP(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Yne(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<e.length-1;s+=1){const c=e[s];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))gg()||iP()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Gne=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Yne(t).split(/-(?!$)/),a=o.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),s=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,s))});return c==null||c.steps.forEach(l=>{const d=l.map(r.mapping);d&&i&&r.maybeStep(d)}),!0},Xne=(t,e={})=>({state:n,dispatch:r})=>{const i=mi(t,n.schema);return cC(n,i,e)?Lte(n,r):!1},Kne=()=>({state:t,dispatch:e})=>FN(t,e),Zne=t=>({state:e,dispatch:n})=>{const r=mi(t,e.schema);return Xte(r)(e,n)},Jne=()=>({state:t,dispatch:e})=>BN(t,e);function oP(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Qne=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=GN(typeof t=="string"?t:t.name,r.schema);return s?(s==="node"&&(o=mi(t,r.schema)),s==="mark"&&(a=dl(t,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(l,d)=>{o&&o===l.type&&n.setNodeMarkup(d,void 0,oP(l.attrs,e)),a&&l.marks.length&&l.marks.forEach(f=>{a===f.type&&n.addMark(d,d+l.nodeSize,a.create(oP(f.attrs,e)))})})}),!0):!1},Vne=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),qne=()=>({tr:t,dispatch:e})=>{if(e){const n=new To(t.doc);t.setSelection(n)}return!0},ere=()=>({state:t,dispatch:e})=>NN(t,e),tre=()=>({state:t,dispatch:e})=>RN(t,e),nre=()=>({state:t,dispatch:e})=>Fte(t,e),rre=()=>({state:t,dispatch:e})=>$te(t,e),ire=()=>({state:t,dispatch:e})=>zte(t,e),ore=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:a,commands:s})=>{const{doc:c}=o;if(r.preserveWhitespace!=="full"){const l=ene(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&o.replaceWith(0,c.content.size,l).setMeta("preventUpdate",!n),!0}return a&&o.setMeta("preventUpdate",!n),s.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function are(t,e,n){var r;const{selection:i}=e;let o=null;if(VN(i)&&(o=i.$cursor),o){const s=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(s)||!s.some(l=>l.type.excludes(n)))}const{ranges:a}=i;return a.some(({$from:s,$to:c})=>{let l=s.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(s.pos,c.pos,(d,f,b)=>{if(l)return!1;if(d.isInline){const x=!b||b.type.allowsMarkType(n),k=!!n.isInSet(d.marks)||!d.marks.some(E=>E.type.excludes(n));l=x&&k}return!l}),l})}var sre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:a,ranges:s}=o,c=dl(t,r.schema);if(i)if(a){const l=sne(r,c);n.addStoredMark(c.create({...l,...e}))}else s.forEach(l=>{const d=l.$from.pos,f=l.$to.pos;r.doc.nodesBetween(d,f,(b,x)=>{const k=Math.max(x,d),E=Math.min(x+b.nodeSize,f);b.marks.find(h=>h.type===c)?b.marks.forEach(h=>{c===h.type&&n.addMark(k,E,c.create({...h.attrs,...e}))}):n.addMark(k,E,c.create(e))})});return are(r,n,c)},lre=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),cre=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=mi(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:s})=>$N(o,{...a,...e})(n)?!0:s.clearNodes()).command(({state:s})=>$N(o,{...a,...e})(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ure=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=bc(t,0,r.content.size),o=Cn.create(r,i);e.setSelection(o)}return!0},dre=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,a=_n.atStart(r).from,s=_n.atEnd(r).to,c=bc(i,a,s),l=bc(o,a,s),d=_n.create(r,c,l);e.setSelection(d)}return!0},fre=t=>({state:e,dispatch:n})=>{const r=mi(t,e.schema);return Jte(r)(e,n)};function aP(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var hre=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:a}=e,{$from:s,$to:c}=o,l=i.extensionManager.attributes,d=pg(l,s.node().type.name,s.node().attrs);if(o instanceof Cn&&o.node.isBlock)return!s.parentOffset||!gs(a,s.pos)?!1:(r&&(t&&aP(n,i.extensionManager.splittableMarks),e.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,b=s.depth===0?void 0:tne(s.node(-1).contentMatchAt(s.indexAfter(-1)));let x=f&&b?[{type:b,attrs:d}]:void 0,k=gs(e.doc,e.mapping.map(s.pos),1,x);if(!x&&!k&&gs(e.doc,e.mapping.map(s.pos),1,b?[{type:b}]:void 0)&&(k=!0,x=b?[{type:b,attrs:d}]:void 0),r){if(k&&(o instanceof _n&&e.deleteSelection(),e.split(e.mapping.map(s.pos),1,x),b&&!f&&!s.parentOffset&&s.parent.type!==b)){const E=e.mapping.map(s.before()),m=e.doc.resolve(E);s.node(-1).canReplaceWith(m.index(),m.index()+1,b)&&e.setNodeMarkup(e.mapping.map(s.before()),b)}t&&aP(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return k},pre=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var a;const s=mi(t,r.schema),{$from:c,$to:l}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(l))return!1;const f=c.node(-1);if(f.type!==s)return!1;const b=o.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==s||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let h=rt.empty;const g=c.index(-1)?1:c.index(-2)?2:3;for(let T=c.depth-g;T>=c.depth-3;T-=1)h=rt.from(c.node(T).copy(h));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,p={...pg(b,c.node().type.name,c.node().attrs),...e},v=((a=s.contentMatch.defaultType)==null?void 0:a.createAndFill(p))||void 0;h=h.append(rt.from(s.createAndFill(null,v)||void 0));const y=c.before(c.depth-(g-1));n.replace(y,c.after(-w),new Ct(h,4-g,0));let S=-1;n.doc.nodesBetween(y,n.doc.content.size,(T,C)=>{if(S>-1)return!1;T.isTextblock&&T.content.size===0&&(S=C+1)}),S>-1&&n.setSelection(_n.near(n.doc.resolve(S))),n.scrollIntoView()}return!0}const x=l.pos===c.end()?f.contentMatchAt(0).defaultType:null,k={...pg(b,f.type.name,f.attrs),...e},E={...pg(b,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,l.pos);const m=x?[{type:s,attrs:k},{type:x,attrs:E}]:[{type:s,attrs:k}];if(!gs(n.doc,c.pos,2))return!1;if(i){const{selection:h,storedMarks:g}=r,{splittableMarks:w}=o.extensionManager,p=g||h.$to.parentOffset&&h.$from.marks();if(n.split(c.pos,2,m).scrollIntoView(),!p||!i)return!0;const v=p.filter(y=>w.includes(y.type.name));n.ensureMarks(v)}return!0},uC=(t,e)=>{const n=sC(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ll(t.doc,n.pos)&&t.join(n.pos),!0},dC=(t,e)=>{const n=sC(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ll(t.doc,r)&&t.join(r),!0},mre=(t,e,n,r={})=>({editor:i,tr:o,state:a,dispatch:s,chain:c,commands:l,can:d})=>{const{extensions:f,splittableMarks:b}=i.extensionManager,x=mi(t,a.schema),k=mi(e,a.schema),{selection:E,storedMarks:m}=a,{$from:h,$to:g}=E,w=h.blockRange(g),p=m||E.$to.parentOffset&&E.$from.marks();if(!w)return!1;const v=sC(y=>JN(y.type.name,f))(E);if(w.depth>=1&&v&&w.depth-v.depth<=1){if(v.node.type===x)return l.liftListItem(k);if(JN(v.node.type.name,f)&&x.validContent(v.node.content)&&s)return c().command(()=>(o.setNodeMarkup(v.pos,x),!0)).command(()=>uC(o,x)).command(()=>dC(o,x)).run()}return!n||!p||!s?c().command(()=>d().wrapInList(x,r)?!0:l.clearNodes()).wrapInList(x,r).command(()=>uC(o,x)).command(()=>dC(o,x)).run():c().command(()=>{const y=d().wrapInList(x,r),S=p.filter(T=>b.includes(T.type.name));return o.ensureMarks(S),y?!0:l.clearNodes()}).wrapInList(x,r).command(()=>uC(o,x)).command(()=>dC(o,x)).run()},gre=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,a=dl(t,r.schema);return fne(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,e)},vre=(t,e,n={})=>({state:r,commands:i})=>{const o=mi(t,r.schema),a=mi(e,r.schema),s=cC(r,o,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),s?i.setNode(a,c):i.setNode(o,{...c,...n})},yre=(t,e={})=>({state:n,commands:r})=>{const i=mi(t,n.schema);return cC(n,i,e)?r.lift(i):r.wrapIn(i,e)},bre=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const a=t.tr,s=o.transform;for(let c=s.steps.length-1;c>=0;c-=1)a.step(s.steps[c].invert(s.docs[c]));if(o.text){const c=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,t.schema.text(o.text,c))}else a.delete(o.from,o.to)}return!0}}return!1},wre=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},xre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:s}=n,c=dl(t,r.schema),{$from:l,empty:d,ranges:f}=s;if(!i)return!0;if(d&&a){let{from:b,to:x}=s;const k=(o=l.marks().find(m=>m.type===c))==null?void 0:o.attrs,E=ZN(l,c,k);E&&(b=E.from,x=E.to),n.removeMark(b,x,c)}else f.forEach(b=>{n.removeMark(b.$from.pos,b.$to.pos,c)});return n.removeStoredMark(c),!0},Cre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=GN(typeof t=="string"?t:t.name,r.schema);return s?(s==="node"&&(o=mi(t,r.schema)),s==="mark"&&(a=dl(t,r.schema)),i&&n.selection.ranges.forEach(c=>{const l=c.$from.pos,d=c.$to.pos;let f,b,x,k;n.selection.empty?r.doc.nodesBetween(l,d,(E,m)=>{o&&o===E.type&&(x=Math.max(m,l),k=Math.min(m+E.nodeSize,d),f=m,b=E)}):r.doc.nodesBetween(l,d,(E,m)=>{m<l&&o&&o===E.type&&(x=Math.max(m,l),k=Math.min(m+E.nodeSize,d),f=m,b=E),m>=l&&m<=d&&(o&&o===E.type&&n.setNodeMarkup(m,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(h=>{if(a===h.type){const g=Math.max(m,l),w=Math.min(m+E.nodeSize,d);n.addMark(g,w,a.create({...h.attrs,...e}))}}))}),b&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(E=>{a===E.type&&n.addMark(x,k,a.create({...E.attrs,...e}))}))}),!0):!1},Sre=(t,e={})=>({state:n,dispatch:r})=>{const i=mi(t,n.schema);return Ute(i,e)(n,r)},kre=(t,e={})=>({state:n,dispatch:r})=>{const i=mi(t,n.schema);return Wte(i,e)(n,r)},Ere=Mo.create({name:"commands",addCommands(){return{...nP}}}),Tre=Mo.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var a,s,c,l;if((l=(c=(s=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:s.filterTransaction)==null?void 0:c.call(s,t))!=null?l:t.getMeta("y-sync$"))return;const d=qte(t.before,[t,...e]);une(d).forEach(x=>{d.mapping.mapResult(x.oldRange.from).deletedAfter&&d.mapping.mapResult(x.oldRange.to).deletedBefore&&d.before.nodesBetween(x.oldRange.from,x.oldRange.to,(k,E)=>{const m=E+k.nodeSize-2,h=x.oldRange.from<=E&&m<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:E,to:m,newFrom:d.mapping.map(E),newTo:d.mapping.map(m),deletedRange:x.oldRange,newRange:x.newRange,partial:!h,editor:this.editor,transaction:t,combinedTransform:d})})});const b=d.mapping;d.steps.forEach((x,k)=>{var E,m;if(x instanceof ta){const h=b.slice(k).map(x.from,-1),g=b.slice(k).map(x.to),w=b.invert().map(h,-1),p=b.invert().map(g),v=(E=d.doc.nodeAt(h-1))==null?void 0:E.marks.some(S=>S.eq(x.mark)),y=(m=d.doc.nodeAt(g))==null?void 0:m.marks.some(S=>S.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:w,to:p},newRange:{from:h,to:g},partial:!!(y||v),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),Mre=Mo.create({name:"drop",addProseMirrorPlugins(){return[new cl({key:new ul("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Ire=Mo.create({name:"editable",addProseMirrorPlugins(){return[new cl({key:new ul("editable"),props:{editable:()=>this.editor.options.editable}})]}}),sP=new ul("focusEvents"),Ore=Mo.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new cl({key:sP,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Are=Mo.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:s})=>{const{selection:c,doc:l}=s,{empty:d,$anchor:f}=c,{pos:b,parent:x}=f,k=f.parent.isTextblock&&b>0?s.doc.resolve(b-1):f,E=k.parent.type.spec.isolating,m=f.pos-f.parentOffset,h=E&&k.parent.childCount===1?m===f.pos:yn.atStart(l).from===b;return!d||!x.type.isTextblock||x.textContent.length||!h||h&&f.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return gg()||iP()?o:i},addProseMirrorPlugins(){return[new cl({key:new ul("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(E=>E.getMeta("composition")))return;const r=t.some(E=>E.docChanged)&&!e.doc.eq(n.doc),i=t.some(E=>E.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:a,to:s}=e.selection,c=yn.atStart(e.doc).from,l=yn.atEnd(e.doc).to;if(o||!(a===c&&s===l)||!QN(n.doc))return;const b=n.tr,x=WN({state:n,transaction:b}),{commands:k}=new Vte({editor:this.editor,state:x});if(k.clearNodes(),!!b.steps.length)return b}})]}}),_re=Mo.create({name:"paste",addProseMirrorPlugins(){return[new cl({key:new ul("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Dre=Mo.create({name:"tabindex",addProseMirrorPlugins(){return[new cl({key:new ul("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function fC(t){return new qN({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Lf(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Nre(t){return new qN({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Lf(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),c=a.doc.resolve(n.from).blockRange(),l=c&&Jx(c,t.type,o);if(!l)return null;if(a.wrap(c,l),t.keepMarks&&t.editor){const{selection:f,storedMarks:b}=e,{splittableMarks:x}=t.editor.extensionManager,k=b||f.$to.parentOffset&&f.$from.marks();if(k){const E=k.filter(m=>x.includes(m.type.name));a.ensureMarks(E)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const d=a.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&ll(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&a.join(n.from-1)},undoable:t.undoable})}var Pu=class uH extends tP{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new uH(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Pre=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,o,a,s;const{view:c}=this.editor,l=t.target,d=l.nodeType===3?(e=l.parentElement)==null?void 0:e.closest("[data-drag-handle]"):l.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(l)||!d)return;let f=0,b=0;if(this.dom!==d){const g=this.dom.getBoundingClientRect(),w=d.getBoundingClientRect(),p=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,v=(a=t.offsetY)!=null?a:(o=t.nativeEvent)==null?void 0:o.offsetY;f=w.x-g.x+p,b=w.y-g.y+v}const x=this.dom.cloneNode(!0);try{const g=this.dom.getBoundingClientRect();x.style.width=`${Math.round(g.width)}px`,x.style.height=`${Math.round(g.height)}px`,x.style.boxSizing="border-box",x.style.pointerEvents="none"}catch{}let k=null;try{k=document.createElement("div"),k.style.position="absolute",k.style.top="-9999px",k.style.left="-9999px",k.style.pointerEvents="none",k.appendChild(x),document.body.appendChild(k),(s=t.dataTransfer)==null||s.setDragImage(x,f,b)}finally{k&&setTimeout(()=>{try{k==null||k.remove()}catch{}},0)}const E=this.getPos();if(typeof E!="number")return;const m=Cn.create(c.state.doc,E),h=c.state.tr.setSelection(m);c.dispatch(h)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const i=t.type.startsWith("drag"),o=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!i)return!0;const{isEditable:s}=this.editor,{isDragging:c}=this,l=!!this.node.type.spec.draggable,d=Cn.isSelectable(this.node),f=t.type==="copy",b=t.type==="paste",x=t.type==="cut",k=t.type==="mousedown";if(!l&&d&&i&&t.target===this.dom&&t.preventDefault(),l&&i&&!c&&t.target===this.dom)return t.preventDefault(),!1;if(l&&s&&!c&&k){const E=n.closest("[data-drag-handle]");E&&(this.dom===E||this.dom.contains(E))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||o||f||b||x||k&&d)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(gg()||rP())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}},Lre=Pu.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,lC(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>fC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),lP=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},Rre=/^\s*>\s$/,Bre=Pu.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return lP("blockquote",{...lC(this.options.HTMLAttributes,t),children:lP("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Nre({find:Rre,type:this.type})]}});const jre=Symbol("vx$portal");function Fre(){var n;const t=(n=u.getCurrentInstance())==null?void 0:n.appContext.app;if(!t)return null;const e=t.config.globalProperties;return e.vx$portals??(e.vx$portals={})}function Hre(t){return u.provide(jre,t),t}function zre(){return{modelValue:{type:Object},loading:{type:Object,default:!1},data:Object,tag:String,attrs:{type:Object},id:String,name:String,...Ot()}}const{defineComponent:$re}=Cb,hC=(t,e)=>{if(t)for(let n=0;n<t.length;n++){let r=t[n];if(r&&(typeof r=="string"&&(r=new Function("args",r)),r(e)===!1))break}};function cP(t){const e=t.options??{},n={Vue:Cb,window};if(e.data){const r=e.data;Object.keys(e.data).forEach(i=>{n[i]=Reflect.get(r,i)})}return n.vx$scope=n,n}function pC(t){var l;const e={...t};e.options??(e.options={});const n=e.options;let{mounted:r,unmounted:i,setup:o}=n;r||(r=[]),i||(i=[]),o||(o=[]);const a=cP(e);(((l=e.options)==null?void 0:l.resetScroll)||!1)&&r.push(({locals:d})=>{var f;(f=d.element)==null||f.scrollIntoView({behavior:"smooth",block:"start"})});const c={componentDefinition:e,element:null,skipUnmountHandlers:!1,componentInstance:null,nodes:[]};return $re({setup(){return c.componentInstance=u.getCurrentInstance(),hC(o,{data:a,locals:c}),a},mounted(){this.$nextTick(()=>{const d=this.$el;if(d){c.element=d;const f=[];let b=d;if(b.nodeType==Node.TEXT_NODE){let x=b;for(;x&&x.data==""&&(b=x.nextSibling,(b==null?void 0:b.nodeType)==Node.TEXT_NODE);)x=b;for(;b&&!(b.nodeType==Node.TEXT_NODE&&(x=b,x.data==""));)f.push(b),b=b.nextSibling;c.nodes=f}else{const x=d;x.style&&x.style.height&&(x.style.height=this.$el.style.height),c.nodes=[d]}}hC(r,{data:a,locals:c})})},unmounted(){c.skipUnmountHandlers||hC(i,{data:a,locals:c})},template:e.template})}const uP=u.defineComponent({__name:"Portal",props:u.mergeModels(zre(),{modelValue:{},modelModifiers:{},loading:{},loadingModifiers:{}}),emits:u.mergeModels(["mounted","unmounted","setup","preContentUpdate","postContentUpdate","change"],["update:modelValue","update:loading"]),setup(t,{expose:e,emit:n}){const r=u.useTemplateRef("containerEl"),i=t,o=n,a={id:i.id,class:i.class,style:i.style,"vx-portal":i.name||"",...i.attrs||{}},s=u.useModel(t,"modelValue"),c=u.useModel(t,"loading"),l=u.shallowRef(null),d=u.useSlots(),f=u.ref(!0),b=cP({options:{data:i.data||{}}}),x='<slot v-bind="vx$scope"></slot>',k=(v={})=>{v.mounted||(v.mounted=[]),v.unmounted||(v.unmounted=[]),v.setup||(v.setup=[]),v.data??(v.data={});const y=v.data;if(i.data){const S=i.data;Object.keys(i.data).forEach(T=>{y[T]=Reflect.get(S,T)})}return v},E=s.value?s.value:d.default?x:null,m=Fre(),h=Hre({name:i.name||"",content:s,containerElement:null,elements:[]});let g=!1;const w=v=>{const y={portal:h,contentArg:v};o("preContentUpdate",y);let S={template:"",options:{}};if(v)if(typeof v=="string")S.template=v;else{const P=v;S.template=P.template,S.options=P.options??{}}else v==null&&(S.template=void 0);if(S.template===void 0)if(!E)S.template="";else if(typeof E==="string")S.template=E;else{const L=v;S.template=L.template||"",S.options=L.options??{}}if(!S.template){S.template="",s.value!==S.template&&(g=!0,s.value=S.template),f.value=!1,l.value=null,y.content=S,o("postContentUpdate",y),o("change",y);return}s.value!==S.template&&(g=!0,s.value=S.template);const T={},C=S.options;if(C.data){const P=C.data;Object.keys(P).forEach(L=>{T[L]=Reflect.get(P,L)})}const M={...S.options,data:T};f.value=!0,k(M);const A=[];A.push(({locals:P})=>{r.value&&(h.containerElement=r.value),h.elements=P.nodes}),S.template===x&&A.push(({locals:P})=>{var L;if(((L=h.elements)==null?void 0:L.length)==1&&(h==null?void 0:h.elements[0]).tagName==="TEMPLATE"){let R="";return h.elements[0].childNodes.forEach(j=>{j.nodeType===Node.ELEMENT_NODE?R+=j.outerHTML:j.nodeType===Node.TEXT_NODE&&(R+=j.textContent)}),P.skipUnmountHandlers=!0,setTimeout(()=>{w(R)},1),!1}}),M.setup||(M.setup=[]),M.setup.unshift(P=>{P.data.vx$portal=h,o("setup",{...y,...P})}),M.mounted||(M.mounted=[]),M.mounted.unshift(...A),M.mounted.push(P=>o("mounted",{...y,...P})),M.unmounted||(M.unmounted=[]),M.unmounted.push(P=>o("unmounted",{...y,...P})),M.mounted.push(P=>{new Promise(L=>{L(!0),y.content=S,o("postContentUpdate",{...y,...P}),o("change",{...y,...P})})}),l.value=pC({template:S.template,options:M})},p=v=>{c.value=!1,w(v)};return e(h),u.watch(s,v=>{if(g){g=!1;return}p(v)}),u.onMounted(()=>{i.name&&m&&(m[i.name]=h),p(null)}),u.onUnmounted(()=>{i.name&&m&&delete m[i.name]}),(v,y)=>c.value?u.renderSlot(v.$slots,"loading",{key:0}):f.value?(u.openBlock(),u.createElementBlock(u.Fragment,{key:1},[i.tag?(u.openBlock(),u.createBlock(u.resolveDynamicComponent(i.tag),u.mergeProps({key:0},a,{ref:"containerEl"}),{default:u.withCtx(()=>[f.value?(u.openBlock(),u.createBlock(u.resolveDynamicComponent(l.value),{key:0},{default:u.withCtx(()=>[u.renderSlot(v.$slots,"default",u.normalizeProps(u.guardReactiveProps(u.unref(b))))]),_:3})):u.createCommentVNode("",!0)]),_:3},16)):(u.openBlock(),u.createElementBlock(u.Fragment,{key:1},[f.value?(u.openBlock(),u.createBlock(u.resolveDynamicComponent(l.value),{key:0},{default:u.withCtx(()=>[u.renderSlot(v.$slots,"default",u.normalizeProps(u.guardReactiveProps(u.unref(b))))]),_:3})):u.createCommentVNode("",!0)],64))],64)):u.createCommentVNode("",!0)}});var Ure=Object.defineProperty,Wre=(t,e,n)=>e in t?Ure(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dP=(t,e,n)=>Wre(t,typeof e!="symbol"?e+"":e,n);function qr(t){this.content=t}qr.prototype={constructor:qr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new qr(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new qr(n)},addToStart:function(t,e){return new qr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new qr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new qr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=qr.from(t),t.size?new qr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=qr.from(t),t.size?new qr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=qr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}},qr.from=function(t){if(t instanceof qr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new qr(e)};function fP(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){let a=fP(i.content,o.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function hP(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let a=t.child(--i),s=e.child(--o),c=a.nodeSize;if(a==s){n-=c,r-=c;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let l=0,d=Math.min(a.text.length,s.text.length);for(;l<d&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let l=hP(a.content,s.content,n-1,r-1);if(l)return l}n-=c,r-=c}}class Ye{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let a=0,s=0;s<n;a++){let c=this.content[a],l=s+c.nodeSize;if(l>e&&r(c,i+s,o||null,a)!==!1&&c.content.size){let d=s+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",a=!0;return this.nodesBetween(e,n,(s,c)=>{let l=s.isText?s.text.slice(Math.max(e,c)-c,n-c):s.isLeaf?i?typeof i=="function"?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&r&&(a?a=!1:o+=r),o+=l},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Ye(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,a=0;a<n;o++){let s=this.content[o],c=a+s.nodeSize;c>e&&((a<e||c>n)&&(s.isText?s=s.cut(Math.max(0,e-a),Math.min(s.text.length,n-a)):s=s.cut(Math.max(0,e-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=c}return new Ye(r,i)}cutByIndex(e,n){return e==n?Ye.empty:e==0&&n==this.content.length?this:new Ye(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ye(i,o)}addToStart(e){return new Ye([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ye(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return fP(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return hP(this,e,n,r)}findIndex(e,n=-1){if(e==0)return vg(0,e);if(e==this.size)return vg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),a=i+o.nodeSize;if(a>=e)return a==e||n>0?vg(r+1,a):vg(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ye.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ye(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ye.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Ye(n||e,r)}static from(e){if(!e)return Ye.empty;if(e instanceof Ye)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ye([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ye.empty=new Ye([],0);const mC={index:0,offset:0};function vg(t,e){return mC.index=t,mC.offset=e,mC}function yg(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!yg(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!yg(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let kn=class YE{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&yg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return YE.none;if(e instanceof YE)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};kn.none=[];class bg extends Error{}class lt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=mP(this.content,e+this.openStart,n);return r&&new lt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new lt(pP(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return lt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new lt(Ye.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new lt(e,r,i)}}lt.empty=new lt(Ye.empty,0,0);function pP(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:a,offset:s}=t.findIndex(n);if(i==e||o.isText){if(s!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(pP(o.content,e-i-1,n-i-1)))}function mP(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),a=t.maybeChild(i);if(o==e||a.isText)return t.cut(0,e).append(n).append(t.cut(e));let s=mP(a.content,e-o-1,n);return s&&t.replaceChild(i,a.copy(s))}function Yre(t,e,n){if(n.openStart>t.depth)throw new bg("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new bg("Inconsistent open depths");return gP(t,e,n,0)}function gP(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let a=gP(t,e,n,r+1);return o.copy(o.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,s=a.content;return xc(a,s.cut(0,t.parentOffset).append(n.content).append(s.cut(e.parentOffset)))}else{let{start:a,end:s}=Gre(n,t);return xc(o,yP(t,a,s,e,r))}else return xc(o,wg(t,e,r))}function vP(t,e){if(!e.type.compatibleContent(t.type))throw new bg("Cannot join "+e.type.name+" onto "+t.type.name)}function gC(t,e,n){let r=t.node(n);return vP(r,e.node(n)),r}function wc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Rf(t,e,n,r){let i=(e||t).node(n),o=0,a=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(wc(t.nodeAfter,r),o++));for(let s=o;s<a;s++)wc(i.child(s),r);e&&e.depth==n&&e.textOffset&&wc(e.nodeBefore,r)}function xc(t,e){return t.type.checkContent(e),t.copy(e)}function yP(t,e,n,r,i){let o=t.depth>i&&gC(t,e,i+1),a=r.depth>i&&gC(n,r,i+1),s=[];return Rf(null,t,i,s),o&&a&&e.index(i)==n.index(i)?(vP(o,a),wc(xc(o,yP(t,e,n,r,i+1)),s)):(o&&wc(xc(o,wg(t,e,i+1)),s),Rf(e,n,i,s),a&&wc(xc(a,wg(n,r,i+1)),s)),Rf(r,null,i,s),new Ye(s)}function wg(t,e,n){let r=[];if(Rf(null,t,n,r),t.depth>n){let i=gC(t,e,n+1);wc(xc(i,wg(t,e,n+1)),r)}return Rf(e,null,n,r),new Ye(r)}function Gre(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)r=e.node(i).copy(Ye.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class Bf{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return kn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let s=r;r=i,i=s}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new xg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let a=e;;){let{index:s,offset:c}=a.content.findIndex(o),l=o-c;if(r.push(a,s,i+c),!l||(a=a.child(s),a.isText))break;o=l-1,i+=c+1}return new Bf(n,r,o)}static resolveCached(e,n){let r=bP.get(e);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==n)return a}else bP.set(e,r=new Xre);let i=r.elts[r.i]=Bf.resolve(e,n);return r.i=(r.i+1)%Kre,i}}class Xre{constructor(){this.elts=[],this.i=0}}const Kre=12,bP=new WeakMap;class xg{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Zre=Object.create(null);let vs=class GE{constructor(e,n,r,i=kn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&yg(this.attrs,n||e.defaultAttrs||Zre)&&kn.sameSet(this.marks,r||kn.none)}copy(e=null){return e==this.content?this:new GE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new GE(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return lt.empty;let i=this.resolve(e),o=this.resolve(n),a=r?0:i.sharedDepth(n),s=i.start(a),c=i.node(a).content.cut(i.pos-s,o.pos-s);return new lt(c,i.depth-a,o.depth-a)}replace(e,n,r){return Yre(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Bf.resolveCached(this,e)}resolveNoCache(e){return Bf.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wP(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ye.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),s=a&&a.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ye.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};vs.prototype.text=void 0;class Cg extends vs{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Cg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Cg(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wP(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Cc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Jre(e,n);if(r.next==null)return Cc.empty;let i=xP(r);r.next&&r.err("Unexpected trailing text");let o=rie(nie(i));return iie(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(a,s){let c=a.matchFragment(e,r);if(c&&(!n||c.validEnd))return Ye.from(s.map(l=>l.createAndFill()));for(let l=0;l<a.next.length;l++){let{type:d,next:f}=a.next[l];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let b=o(f,s.concat(d));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let s=i;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:c}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in n)&&(!i.type||c.validEnd)&&(r.push({match:s.contentMatch,type:s,via:i}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}Cc.empty=new Cc(!0);class Jre{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function xP(t){let e=[];do e.push(Qre(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Qre(t){let e=[];do e.push(Vre(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Vre(t){let e=tie(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=qre(t,e);else break;return e}function CP(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function qre(t,e){let n=CP(t),r=n;return t.eat(",")&&(t.next!="}"?r=CP(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function eie(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let a=n[o];a.isInGroup(e)&&i.push(a)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function tie(t){if(t.eat("(")){let e=xP(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=eie(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nie(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(a,s,c){let l={term:c,to:s};return e[a].push(l),l}function i(a,s){a.forEach(c=>c.to=s)}function o(a,s){if(a.type=="choice")return a.exprs.reduce((c,l)=>c.concat(o(l,s)),[]);if(a.type=="seq")for(let c=0;;c++){let l=o(a.exprs[c],s);if(c==a.exprs.length-1)return l;i(l,s=n())}else if(a.type=="star"){let c=n();return r(s,c),i(o(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=n();return i(o(a.expr,s),c),i(o(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(s)].concat(o(a.expr,s));if(a.type=="range"){let c=s;for(let l=0;l<a.min;l++){let d=n();i(o(a.expr,c),d),c=d}if(a.max==-1)i(o(a.expr,c),c);else for(let l=a.min;l<a.max;l++){let d=n();r(c,d),i(o(a.expr,c),d),c=d}return[r(c)]}else{if(a.type=="name")return[r(s,void 0,a.value)];throw new Error("Unknown expr type")}}}}function SP(t,e){return e-t}function kP(t,e){let n=[];return r(e),n.sort(SP);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let a=0;a<o.length;a++){let{term:s,to:c}=o[a];!s&&n.indexOf(c)==-1&&r(c)}}}function rie(t){let e=Object.create(null);return n(kP(t,0));function n(r){let i=[];r.forEach(a=>{t[a].forEach(({term:s,to:c})=>{if(!s)return;let l;for(let d=0;d<i.length;d++)i[d][0]==s&&(l=i[d][1]);kP(t,c).forEach(d=>{l||i.push([s,l=[]]),l.indexOf(d)==-1&&l.push(d)})})});let o=e[r.join(",")]=new Cc(r.indexOf(t.length-1)>-1);for(let a=0;a<i.length;a++){let s=i[a][1].sort(SP);o.next.push({type:i[a][0],next:e[s.join(",")]||n(s)})}return o}}function iie(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,a=[];for(let s=0;s<i.next.length;s++){let{type:c,next:l}=i.next[s];a.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(l)==-1&&r.push(l)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function EP(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function TP(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function MP(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function IP(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new aie(t,r,e[r]);return n}let OP=class dH{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=IP(e,r.attrs),this.defaultAttrs=EP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Cc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:TP(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new vs(this,this.computeAttrs(e),Ye.from(n),kn.setFrom(r))}createChecked(e=null,n,r){return n=Ye.from(n),this.checkContent(n),new vs(this,this.computeAttrs(e),n,kn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ye.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(Ye.empty,!0);return o?new vs(this,e,n.append(o),kn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){MP(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:kn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,a)=>r[o]=new dH(o,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function oie(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class aie{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?oie(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Sg{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=IP(e,i.attrs),this.excluded=null;let o=EP(this.attrs);this.instance=o?new kn(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kn(this,TP(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new Sg(o,i++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){MP(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class AP{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=qr.from(e.nodes),n.marks=qr.from(e.marks||{}),this.nodes=OP.compile(this.spec.nodes,this),this.marks=Sg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=Cc.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?_P(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:_P(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof OP){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Cg(r,r.defaultAttrs,e,kn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return vs.fromJSON(this,e)}markFromJSON(e){return kn.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function _P(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],a=o;if(o)n.push(o);else for(let s in t.marks){let c=t.marks[s];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sie(t){return t.tag!=null}function lie(t){return t.style!=null}class fl{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(sie(i))this.tags.push(i);else if(lie(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new LP(this,n,!1);return r.addAll(e,kn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new LP(this,n,!0);return r.addAll(e,kn.none,n.from,n.to),lt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(die(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],s=a.style;if(!(s.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||s.length>e.length&&(s.charCodeAt(e.length)!=61||s.slice(e.length+1)!=n))){if(a.getAttrs){let c=a.getAttrs(n);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let s=n[a];if((s.priority==null?50:s.priority)<o)break}n.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=RP(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=RP(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new fl(e,fl.schemaRules(e)))}}const DP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cie={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},NP={ol:!0,ul:!0},jf=1,vC=2,kg=4;function PP(t,e,n){return e!=null?(e?jf:0)|(e==="full"?vC:0):t&&t.whitespace=="pre"?jf|vC:n&-5}class Eg{constructor(e,n,r,i,o,a){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=kn.none,this.match=o||(a&kg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ye.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&jf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=Ye.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ye.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!DP.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class LP{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,a=PP(null,n.preserveWhitespace,0)|(r?kg:0);i?o=new Eg(i.type,i.attrs,kn.none,!0,n.topMatch||i.type.contentMatch,a):r?o=new Eg(null,null,kn.none,!0,null,a):o=new Eg(e.schema.topNodeType,null,kn.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&vC?"full":this.localPreserveWS||(i.options&jf)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],s=e.previousSibling;(!a||s&&s.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),s;NP.hasOwnProperty(a)&&this.parser.normalizeLists&&uie(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));e:if(c?c.ignore:cie.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let l,d=this.needsBlock;if(DP.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),l=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=c&&c.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),l&&this.sync(o),this.needsBlock=d}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,c,l,c.consuming===!1?s:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let s=void 0;;){let c=this.parser.matchStyle(o,a,this,s);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(l=>!c.clearMark(l)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)s=c;else break}}return n}addElementByRule(e,n,r,i){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(a,n.attrs||null,r,n.preserveWhitespace);c&&(o=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let s=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}o&&this.sync(s)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let a=r?e.childNodes[r]:e.firstChild,s=i==null?null:e.childNodes[i];a!=s;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let a=this.open,s=0;a>=0;a--){let c=this.nodes[a],l=c.findWrapping(e);if(l&&(!i||i.length>l.length+s)&&(i=l,o=c,!l.length))break;if(c.solid){if(r)break;s+=2}}if(!i)return null;this.sync(o);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let a=kn.none;for(let s of i.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):BP(s.type,e.type))&&(a=s.addToSet(a));return o.content.push(e.mark(a)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let s=PP(e,o,a.options);a.options&kg&&a.content.length==0&&(s|=kg);let c=kn.none;return r=r.filter(l=>(a.type?a.type.allowsMarkType(l.type):BP(l.type,e))?(c=l.addToSet(c),!1):!0),this.nodes.push(new Eg(e,n,c,i,null,s)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=jf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(s,c)=>{for(;s>=0;s--){let l=n[s];if(l==""){if(s==n.length-1||s==0)continue;for(;c>=o;c--)if(a(s-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!d||d.name!=l&&!d.isInGroup(l))return!1;c--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function uie(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&NP.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function die(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function RP(t){let e={};for(let n in t)e[n]=t[n];return e}function BP(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],a=s=>{o.push(s);for(let c=0;c<s.edgeCount;c++){let{type:l,next:d}=s.edge(c);if(l==e||o.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}class hl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=yC(n).createDocumentFragment());let i=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let s=0,c=0;for(;s<o.length&&c<a.marks.length;){let l=a.marks[c];if(!this.marks[l.type.name]){c++;continue}if(!l.eq(o[s][0])||l.type.spec.spanning===!1)break;s++,c++}for(;s<o.length;)i=o.pop()[1];for(;c<a.marks.length;){let l=a.marks[c++],d=this.serializeMark(l,a.isInline,n);d&&(o.push([l,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Tg(yC(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Tg(yC(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Tg(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new hl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=jP(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return jP(e.marks)}}function jP(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function yC(t){return t.document||window.document}const FP=new WeakMap;function fie(t){let e=FP.get(t);return e===void 0&&FP.set(t,e=hie(t)),e}function hie(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Tg(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=fie(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let s,c=n?t.createElementNS(n,i):t.createElement(i),l=e[1],d=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){d=2;for(let f in l)if(l[f]!=null){let b=f.indexOf(" ");b>0?c.setAttributeNS(f.slice(0,b),f.slice(b+1),l[f]):c.setAttribute(f,l[f])}}for(let f=d;f<e.length;f++){let b=e[f];if(b===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:x,contentDOM:k}=Tg(t,b,n,r);if(c.appendChild(x),k){if(s)throw new RangeError("Multiple content holes");s=k}}}return{dom:c,contentDOM:s}}const HP=65535,zP=Math.pow(2,16);function pie(t,e){return t+e*zP}function $P(t){return t&HP}function mie(t){return(t-(t&HP))/zP}const UP=1,WP=2,Mg=4,YP=8;class bC{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&YP)>0}get deletedBefore(){return(this.delInfo&(UP|Mg))>0}get deletedAfter(){return(this.delInfo&(WP|Mg))>0}get deletedAcross(){return(this.delInfo&Mg)>0}}class uo{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&uo.empty)return uo.empty}recover(e){let n=0,r=$P(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+mie(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let c=this.ranges[s]-(this.inverted?i:0);if(c>e)break;let l=this.ranges[s+o],d=this.ranges[s+a],f=c+l;if(e<=f){let b=l?e==c?-1:e==f?1:n:n,x=c+i+(b<0?0:d);if(r)return x;let k=e==(n<0?c:f)?null:pie(s/3,e-c),E=e==c?WP:e==f?UP:Mg;return(n<0?e!=c:e!=f)&&(E|=YP),new bC(x,E,k)}i+=d-l}return r?e+i:new bC(e+i,0,null)}touches(e,n){let r=0,i=$P(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let c=this.ranges[s]-(this.inverted?r:0);if(c>e)break;let l=this.ranges[s+o],d=c+l;if(e<=d&&s==i*3)return!0;r+=this.ranges[s+a]-l}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],s=a-(this.inverted?o:0),c=a+(this.inverted?0:o),l=this.ranges[i+n],d=this.ranges[i+r];e(s,s+l,c,c+d),o+=d-l}}invert(){return new uo(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?uo.empty:new uo(e<0?[0,-e,0]:[0,0,e])}}uo.empty=new uo([]);class Ff{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ff(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ff;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],s=a.mapResult(e,n);if(s.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this._maps[c].recover(s.recover);continue}}i|=s.delInfo,e=s.pos}return r?e:new bC(e,i,null)}}const wC=Object.create(null);class gi{getMap(){return uo.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wC[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wC)throw new RangeError("Duplicate use of step JSON ID "+e);return wC[e]=n,n.prototype.jsonID=e,n}}class Tr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Tr(e,null)}static fail(e){return new Tr(null,e)}static fromReplace(e,n,r,i){try{return Tr.ok(e.replace(n,r,i))}catch(o){if(o instanceof bg)return Tr.fail(o.message);throw o}}}function xC(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(xC(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return Ye.fromArray(r)}class pl extends gi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new lt(xC(n.content,(a,s)=>!a.isAtom||!s.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Tr.fromReplace(e,this.from,this.to,o)}invert(){return new na(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pl(n.pos,r.pos,this.mark)}merge(e){return e instanceof pl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pl(n.from,n.to,e.markFromJSON(n.mark))}}gi.jsonID("addMark",pl);class na extends gi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new lt(xC(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Tr.fromReplace(e,this.from,this.to,r)}invert(){return new pl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new na(n.pos,r.pos,this.mark)}merge(e){return e instanceof na&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new na(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new na(n.from,n.to,e.markFromJSON(n.mark))}}gi.jsonID("removeMark",na);class ml extends gi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Tr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Tr.fromReplace(e,this.pos,this.pos+1,new lt(Ye.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ml(this.pos,n.marks[i]);return new ml(this.pos,this.mark)}}return new Sc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ml(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ml(n.pos,e.markFromJSON(n.mark))}}gi.jsonID("addNodeMark",ml);class Sc extends gi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Tr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Tr.fromReplace(e,this.pos,this.pos+1,new lt(Ye.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ml(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Sc(n.pos,e.markFromJSON(n.mark))}}gi.jsonID("removeNodeMark",Sc);class $r extends gi{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&CC(e,this.from,this.to)?Tr.fail("Structure replace would overwrite content"):Tr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new uo([this.from,this.to-this.from,this.slice.size])}invert(e){return new $r(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new $r(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof $r)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?lt.empty:new lt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $r(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?lt.empty:new lt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $r(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $r(n.from,n.to,lt.fromJSON(e,n.slice),!!n.structure)}}gi.jsonID("replace",$r);class Ur extends gi{constructor(e,n,r,i,o,a,s=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=s}apply(e){if(this.structure&&(CC(e,this.from,this.gapFrom)||CC(e,this.gapTo,this.to)))return Tr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Tr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Tr.fromReplace(e,this.from,this.to,r):Tr.fail("Content does not fit in gap")}getMap(){return new uo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ur(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Ur(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ur(n.from,n.to,n.gapFrom,n.gapTo,lt.fromJSON(e,n.slice),n.insert,!!n.structure)}}gi.jsonID("replaceAround",Ur);function CC(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function gie(t,e,n,r){let i=[],o=[],a,s;t.doc.nodesBetween(e,n,(c,l,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let b=Math.max(l,e),x=Math.min(l+c.nodeSize,n),k=r.addToSet(f);for(let E=0;E<f.length;E++)f[E].isInSet(k)||(a&&a.to==b&&a.mark.eq(f[E])?a.to=x:i.push(a=new na(b,x,f[E])));s&&s.to==b?s.to=x:o.push(s=new pl(b,x,r))}}),i.forEach(c=>t.step(c)),o.forEach(c=>t.step(c))}function vie(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(a,s)=>{if(!a.isInline)return;o++;let c=null;if(r instanceof Sg){let l=a.marks,d;for(;d=r.isInSet(l);)(c||(c=[])).push(d),l=d.removeFromSet(l)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let l=Math.min(s+a.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],b;for(let x=0;x<i.length;x++){let k=i[x];k.step==o-1&&f.eq(i[x].style)&&(b=k)}b?(b.to=l,b.step=o):i.push({style:f,from:Math.max(s,e),to:l,step:o})}}}),i.forEach(a=>t.step(new na(a.from,a.to,a.style)))}function SC(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),a=[],s=e+1;for(let c=0;c<o.childCount;c++){let l=o.child(c),d=s+l.nodeSize,f=r.matchType(l.type);if(!f)a.push(new $r(s,d,lt.empty));else{r=f;for(let b=0;b<l.marks.length;b++)n.allowsMarkType(l.marks[b].type)||t.step(new na(s,d,l.marks[b]));if(i&&l.isText&&n.whitespace!="pre"){let b,x=/\r?\n|\r/g,k;for(;b=x.exec(l.text);)k||(k=new lt(Ye.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new $r(s+b.index,s+b.index+b[0].length,k))}}s=d}if(!r.validEnd){let c=r.fillBefore(Ye.empty,!0);t.replace(s,s,new lt(c,0,0))}for(let c=a.length-1;c>=0;c--)t.step(a[c])}function yie(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Lu(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),i=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(i,o,e))return n;if(n==0||r.type.spec.isolating||!yie(r,i,o))break}return null}function bie(t,e,n){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),s=i.after(o+1),c=a,l=s,d=Ye.empty,f=0;for(let k=o,E=!1;k>n;k--)E||r.index(k)>0?(E=!0,d=Ye.from(r.node(k).copy(d)),f++):c--;let b=Ye.empty,x=0;for(let k=o,E=!1;k>n;k--)E||i.after(k+1)<i.end(k)?(E=!0,b=Ye.from(i.node(k).copy(b)),x++):l++;t.step(new Ur(c,l,a,s,new lt(d.append(b),f,x),d.size-f,!0))}function kC(t,e,n=null,r=t){let i=wie(t,e),o=i&&xie(r,e);return o?i.map(GP).concat({type:e,attrs:n}).concat(o.map(GP)):null}function GP(t){return{type:t,attrs:null}}function wie(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return n.canReplaceWith(r,i,a)?o:null}function xie(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let s=(a.length?a[a.length-1]:e).contentMatch;for(let c=r;s&&c<i;c++)s=s.matchType(n.child(c).type);return!s||!s.validEnd?null:a}function Cie(t,e,n){let r=Ye.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let s=n[a].type.contentMatch.matchFragment(r);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ye.from(n[a].type.create(n[a].attrs,r))}let i=e.start,o=e.end;t.step(new Ur(i,o,i,o,new lt(r,0,0),n.length,!0))}function Sie(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(a,s)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&kie(t.doc,t.mapping.slice(o).map(s),r)){let l=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!k?l=!1:!x&&k&&(l=!0)}l===!1&&KP(t,a,s,o),SC(t,t.mapping.slice(o).map(s,1),r,void 0,l===null);let d=t.mapping.slice(o),f=d.map(s,1),b=d.map(s+a.nodeSize,1);return t.step(new Ur(f,b,f+1,b-1,new lt(Ye.from(r.create(c,null,a.marks)),0,0),1,!0)),l===!0&&XP(t,a,s,o),!1}})}function XP(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let c=t.mapping.slice(r).map(n+1+o+a.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function KP(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+o);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function kie(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Eie(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ur(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new lt(Ye.from(a),0,0),1,!0))}function ys(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,d=n-2;l>o;l--,d--){let f=i.node(l),b=i.index(l);if(f.type.spec.isolating)return!1;let x=f.content.cutByIndex(b,f.childCount),k=r&&r[d+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let E=r&&r[d]||f;if(!f.canReplace(b+1,f.childCount)||!E.type.validContent(x))return!1}let s=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(s,s,c?c.type:i.node(o+1).type)}function Tie(t,e,n=1,r){let i=t.doc.resolve(e),o=Ye.empty,a=Ye.empty;for(let s=i.depth,c=i.depth-n,l=n-1;s>c;s--,l--){o=Ye.from(i.node(s).copy(o));let d=r&&r[l];a=Ye.from(d?d.type.create(d.attrs,a):i.node(s).copy(a))}t.step(new $r(e,e,new lt(o.append(a),n,n),!0))}function gl(t,e){let n=t.resolve(e),r=n.index();return ZP(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Mie(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),a=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function ZP(t,e){return!!(t&&e&&!t.isLeaf&&Mie(t,e))}function Ig(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,a,s=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):n>0?(o=r.node(i+1),s++,a=r.node(i).maybeChild(s)):(o=r.node(i).maybeChild(s-1),a=r.node(i+1)),o&&!o.isTextblock&&ZP(o,a)&&r.node(i).canReplace(s,s+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Iie(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),a=o.node().type;if(i&&a.inlineContent){let d=a.whitespace=="pre",f=!!a.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let s=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);KP(t,d.node(),d.before(),s)}a.inlineContent&&SC(t,e+n-1,a,o.node().contentMatchAt(o.index()),r==null);let c=t.mapping.slice(s),l=c.map(e-n);if(t.step(new $r(l,c.map(e+n,-1),lt.empty,!0)),r===!0){let d=t.doc.resolve(l);XP(t,d.node(),d.before(),t.steps.length)}return t}function Oie(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function JP(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let a=r.depth;a>=0;a--){let s=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(s>0?1:0),l=r.node(a),d=!1;if(o==1)d=l.canReplace(c,c,i);else{let f=l.contentMatchAt(c).findWrapping(i.firstChild.type);d=f&&l.canReplaceWith(c,c,f[0])}if(d)return s==0?r.pos:s<0?r.before(a+1):r.after(a+1)}return null}function Og(t,e,n=e,r=lt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return QP(i,o,r)?new $r(e,n,r):new Aie(i,o,r).fit()}function QP(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Aie{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ye.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ye.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,s=i.depth;for(;a&&s&&o.childCount==1;)o=o.firstChild.content,a--,s--;let c=new lt(o,a,s);return e>-1?new Ur(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new $r(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=EC(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let s=this.depth;s>=0;s--){let{type:c,match:l}=this.frontier[s],d,f=null;if(n==1&&(a?l.matchType(a.type)||(f=l.fillBefore(Ye.from(a),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:s,parent:o,inject:f};if(n==2&&a&&(d=l.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:s,parent:o,wrap:d};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=EC(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new lt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=EC(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new lt(Hf(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new lt(Hf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let a=this.unplaced,s=r?r.content:a.content,c=a.openStart-e,l=0,d=[],{match:f,type:b}=this.frontier[n];if(i){for(let E=0;E<i.childCount;E++)d.push(i.child(E));f=f.matchFragment(i)}let x=s.size+e-(a.content.size-a.openEnd);for(;l<s.childCount;){let E=s.child(l),m=f.matchType(E.type);if(!m)break;l++,(l>1||c==0||E.content.size)&&(f=m,d.push(VP(E.mark(b.allowedMarks(E.marks)),l==1?c:0,l==s.childCount?x:-1)))}let k=l==s.childCount;k||(x=-1),this.placed=zf(this.placed,n,Ye.from(d)),this.frontier[n].match=f,k&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,m=s;E<x;E++){let h=m.lastChild;this.frontier.push({type:h.type,match:h.contentMatchAt(h.childCount)}),m=h.content}this.unplaced=k?e==0?lt.empty:new lt(Hf(a.content,e-1,1),e-1,x<0?a.openEnd:e-1):new lt(Hf(a.content,e,l),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!TC(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=TC(e,n,i,r,o);if(a){for(let s=n-1;s>=0;s--){let{match:c,type:l}=this.frontier[s],d=TC(e,s,l,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:a,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=zf(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=zf(this.placed,this.depth,Ye.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Ye.empty,!0);e.childCount&&(this.placed=zf(this.placed,this.frontier.length,e))}}function Hf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Hf(t.firstChild.content,e-1,n)))}function zf(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(zf(t.lastChild.content,e-1,n)))}function EC(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function VP(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,VP(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ye.empty,!0)))),t.copy(r)}function TC(t,e,n,r,i){let o=t.node(e),a=i?t.indexAfter(e):t.index(e);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!_ie(n,o.content,a)?s:null}function _ie(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Die(t){return t.spec.defining||t.spec.definingForContent}function Nie(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(QP(i,o,r))return t.step(new $r(e,n,r));let a=eL(i,t.doc.resolve(n));a[a.length-1]==0&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let b=i.depth,x=i.pos-1;b>0;b--,x--){let k=i.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(b)>-1?s=b:i.before(b)==x&&a.splice(1,0,-b)}let c=a.indexOf(s),l=[],d=r.openStart;for(let b=r.content,x=0;;x++){let k=b.firstChild;if(l.push(k),x==r.openStart)break;b=k.content}for(let b=d-1;b>=0;b--){let x=l[b],k=Die(x.type);if(k&&!x.sameMarkup(i.node(Math.abs(s)-1)))d=b;else if(k||!x.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let x=(b+d+1)%(r.openStart+1),k=l[x];if(k)for(let E=0;E<a.length;E++){let m=a[(E+c)%a.length],h=!0;m<0&&(h=!1,m=-m);let g=i.node(m-1),w=i.index(m-1);if(g.canReplaceWith(w,w,k.type,k.marks))return t.replace(i.before(m),h?o.after(m):n,new lt(qP(r.content,0,r.openStart,x),x,r.openEnd))}}let f=t.steps.length;for(let b=a.length-1;b>=0&&(t.replace(e,n,r),!(t.steps.length>f));b--){let x=a[b];x<0||(e=i.before(x),n=o.after(x))}}function qP(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(qP(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(t).append(t);t=a.append(o.matchFragment(a).fillBefore(Ye.empty,!0))}return t}function Pie(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Oie(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new lt(Ye.from(r),0,0))}function Lie(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=eL(r,i);for(let a=0;a<o.length;a++){let s=o[a],c=a==o.length-1;if(c&&s==0||r.node(s).type.contentMatch.validEnd)return t.delete(r.start(s),i.end(s));if(s>0&&(c||r.node(s-1).canReplace(r.index(s-1),i.indexAfter(s-1))))return t.delete(r.before(s),i.after(s))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function eL(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Ru extends gi{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Tr.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Tr.fromReplace(e,this.pos,this.pos+1,new lt(Ye.from(i),0,n.isLeaf?0:1))}getMap(){return uo.empty}invert(e){return new Ru(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ru(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ru(n.pos,n.attr,n.value)}}gi.jsonID("attr",Ru);class $f extends gi{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Tr.ok(r)}getMap(){return uo.empty}invert(e){return new $f(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new $f(n.attr,n.value)}}gi.jsonID("docAttr",$f);let Bu=class extends Error{};Bu=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},Bu.prototype=Object.create(Error.prototype),Bu.prototype.constructor=Bu,Bu.prototype.name="TransformError";class MC{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ff}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Bu(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=lt.empty){let i=Og(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new lt(Ye.from(r),0,0))}delete(e,n){return this.replace(e,n,lt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Nie(this,e,n,r),this}replaceRangeWith(e,n,r){return Pie(this,e,n,r),this}deleteRange(e,n){return Lie(this,e,n),this}lift(e,n){return bie(this,e,n),this}join(e,n=1){return Iie(this,e,n),this}wrap(e,n){return Cie(this,e,n),this}setBlockType(e,n=e,r,i=null){return Sie(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Eie(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ru(e,n,r)),this}setDocAttribute(e,n){return this.step(new $f(e,n)),this}addNodeMark(e,n){return this.step(new ml(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof kn)n.isInSet(r.marks)&&this.step(new Sc(e,n));else{let i=r.marks,o,a=[];for(;o=n.isInSet(i);)a.push(new Sc(e,o)),i=o.removeFromSet(i);for(let s=a.length-1;s>=0;s--)this.step(a[s])}return this}split(e,n=1,r){return Tie(this,e,n,r),this}addMark(e,n,r){return gie(this,e,n,r),this}removeMark(e,n,r){return vie(this,e,n,r),this}clearIncompatible(e,n,r){return SC(this,e,n,r),this}}const IC=Object.create(null);class Dt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new tL(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=lt.empty){let r=n.content.lastChild,i=null;for(let s=0;s<n.openEnd;s++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:c,$to:l}=a[s],d=e.mapping.slice(o);e.replaceRange(d.map(c.pos),d.map(l.pos),s?lt.empty:n),s==0&&iL(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:s}=i[o],c=e.mapping.slice(r),l=c.map(a.pos),d=c.map(s.pos);o?e.deleteRange(l,d):(e.replaceRangeWith(l,d,n),iL(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Et(e):ju(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=n<0?ju(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):ju(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new fo(e.node(0))}static atStart(e){return ju(e,e,0,0,1)||new fo(e)}static atEnd(e){return ju(e,e,e.content.size,e.childCount,-1)||new fo(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=IC[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in IC)throw new RangeError("Duplicate use of selection JSON ID "+e);return IC[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Et.between(this.$anchor,this.$head).getBookmark()}}Dt.prototype.visible=!0;class tL{constructor(e,n){this.$from=e,this.$to=n}}let nL=!1;function rL(t){!nL&&!t.parent.inlineContent&&(nL=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Et extends Dt{constructor(e,n=e){rL(e),rL(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Dt.near(r);let i=e.resolve(n.map(this.anchor));return new Et(i.parent.inlineContent?i:r,r)}replace(e,n=lt.empty){if(super.replace(e,n),n==lt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Et&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ag(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Et(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Dt.findFrom(n,r,!0)||Dt.findFrom(n,-r,!0);if(o)n=o.$head;else return Dt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Dt.findFrom(e,-r,!0)||Dt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Et(e,n)}}Dt.jsonID("text",Et);class Ag{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ag(e.map(this.anchor),e.map(this.head))}resolve(e){return Et.between(e.resolve(this.anchor),e.resolve(this.head))}}class kt extends Dt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Dt.near(o):new kt(o)}content(){return new lt(Ye.from(this.node),0,0)}eq(e){return e instanceof kt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new OC(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new kt(e.resolve(n.anchor))}static create(e,n){return new kt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}kt.prototype.visible=!1,Dt.jsonID("node",kt);class OC{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ag(r,r):new OC(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&kt.isSelectable(r)?new kt(n):Dt.near(n)}}class fo extends Dt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=lt.empty){if(n==lt.empty){e.delete(0,e.doc.content.size);let r=Dt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new fo(e)}map(e){return new fo(e)}eq(e){return e instanceof fo}getBookmark(){return Rie}}Dt.jsonID("all",fo);const Rie={map(){return this},resolve(t){return new fo(t)}};function ju(t,e,n,r,i,o=!1){if(e.inlineContent)return Et.create(t,n);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let s=e.child(a);if(s.isAtom){if(!o&&kt.isSelectable(s))return kt.create(t,n-(i<0?s.nodeSize:0))}else{let c=ju(t,s,n+i,i<0?s.childCount:0,i,o);if(c)return c}n+=s.nodeSize*i}return null}function iL(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof $r||i instanceof Ur))return;let o=t.mapping.maps[r],a;o.forEach((s,c,l,d)=>{a==null&&(a=d)}),t.setSelection(Dt.near(t.doc.resolve(a),n))}const oL=1,aL=2,sL=4;class Bie extends MC{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|oL)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&oL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=aL,this}ensureMarks(e){return kn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&aL)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(n);o=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(Dt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=sL,this}get scrolledIntoView(){return(this.updated&sL)>0}}function lL(t,e){return!e||!t?t:t.bind(e)}class Uf{constructor(e,n,r){this.name=e,this.init=lL(n.init,r),this.apply=lL(n.apply,r)}}const jie=[new Uf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Uf("selection",{init(t,e){return t.selection||Dt.atStart(e.doc)},apply(t){return t.selection}}),new Uf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Uf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class AC{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=jie.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Uf(r.key,r.spec.state,r))})}}class Fu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let s=this.config.plugins[a];if(s.spec.appendTransaction){let c=i?i[a].n:0,l=i?i[a].state:this,d=c<n.length&&s.spec.appendTransaction.call(s,c?n.slice(c):n,l,r);if(d&&r.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),o=!0}i&&(i[a]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Bie(this)}static create(e){let n=new AC(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fu(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new AC(this.schema,e.plugins),r=n.fields,i=new Fu(n);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new AC(e.schema,e.plugins),o=new Fu(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=vs.fromJSON(e.schema,n.doc);else if(a.name=="selection")o.selection=Dt.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let s in r){let c=r[s],l=c.spec.state;if(c.key==a.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(n,s)){o[a.name]=l.fromJSON.call(c,e,n[s],o);return}}o[a.name]=a.init(e,o)}}),o}}function cL(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=cL(i,e,{})),n[r]=i}return n}class En{constructor(e){this.spec=e,this.props={},e.props&&cL(e.props,this,this.props),this.key=e.key?e.key.key:uL("plugin")}getState(e){return e[this.key]}}const _C=Object.create(null);function uL(t){return t in _C?t+"$"+ ++_C[t]:(_C[t]=0,t+"$")}class qn{constructor(e="key"){this.key=uL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ei=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Hu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let DC=null;const bs=function(t,e,n){let r=DC||(DC=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Fie=function(){DC=null},kc=function(t,e,n,r){return n&&(dL(t,e,n,r,-1)||dL(t,e,n,r,1))},Hie=/^(img|br|input|textarea|hr)$/i;function dL(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Io(t))){let a=t.parentNode;if(!a||a.nodeType!=1||Wf(t)||Hie.test(t.nodeName)||t.contentEditable=="false")return!1;e=ei(t)+(i<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=a,e=i<0?Io(t):0}else return!1}}function Io(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function zie(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Io(t)}else if(t.parentNode&&!Wf(t))e=ei(t),t=t.parentNode;else return null}}function $ie(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Wf(t))e=ei(t)+1,t=t.parentNode;else return null}}function Uie(t,e,n){for(let r=e==0,i=e==Io(t);r||i;){if(t==n)return!0;let o=ei(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Io(t)}}function Wf(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const _g=function(t){return t.focusNode&&kc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ec(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Wie(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Yie(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Io(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Io(r.startContainer),r.startOffset)}}}const La=typeof navigator<"u"?navigator:null,fL=typeof document<"u"?document:null,vl=La&&La.userAgent||"",NC=/Edge\/(\d+)/.exec(vl),hL=/MSIE \d/.exec(vl),PC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vl),Ui=!!(hL||PC||NC),yl=hL?document.documentMode:PC?+PC[1]:NC?+NC[1]:0,Oo=!Ui&&/gecko\/(\d+)/i.test(vl);Oo&&+(/Firefox\/(\d+)/.exec(vl)||[0,0])[1];const LC=!Ui&&/Chrome\/(\d+)/.exec(vl),vi=!!LC,pL=LC?+LC[1]:0,Oi=!Ui&&!!La&&/Apple Computer/.test(La.vendor),zu=Oi&&(/Mobile\/\w+/.test(vl)||!!La&&La.maxTouchPoints>2),Ao=zu||(La?/Mac/.test(La.platform):!1),Gie=La?/Win/.test(La.platform):!1,ws=/Android \d/.test(vl),Yf=!!fL&&"webkitFontSmoothing"in fL.documentElement.style,Xie=Yf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Kie(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function xs(t,e){return typeof t=="number"?t:t[e]}function Zie(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function mL(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=Hu(a);continue}let s=a,c=s==o.body,l=c?Kie(o):Zie(s),d=0,f=0;if(e.top<l.top+xs(r,"top")?f=-(l.top-e.top+xs(i,"top")):e.bottom>l.bottom-xs(r,"bottom")&&(f=e.bottom-e.top>l.bottom-l.top?e.top+xs(i,"top")-l.top:e.bottom-l.bottom+xs(i,"bottom")),e.left<l.left+xs(r,"left")?d=-(l.left-e.left+xs(i,"left")):e.right>l.right-xs(r,"right")&&(d=e.right-l.right+xs(i,"right")),d||f)if(c)o.defaultView.scrollBy(d,f);else{let x=s.scrollLeft,k=s.scrollTop;f&&(s.scrollTop+=f),d&&(s.scrollLeft+=d);let E=s.scrollLeft-x,m=s.scrollTop-k;e={left:e.left-E,top:e.top-m,right:e.right-E,bottom:e.bottom-m}}let b=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(b))break;a=b=="absolute"?a.offsetParent:Hu(a)}}function Jie(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let s=t.root.elementFromPoint(o,a);if(!s||s==t.dom||!t.dom.contains(s))continue;let c=s.getBoundingClientRect();if(c.top>=n-20){r=s,i=c.top;break}}return{refDOM:r,refTop:i,stack:gL(t.dom)}}function gL(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Hu(r));return e}function Qie({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;vL(n,r==0?0:r-e)}function vL(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let $u=null;function Vie(t){if(t.setActive)return t.setActive();if($u)return t.focus($u);let e=gL(t);t.focus($u==null?{get preventScroll(){return $u={preventScroll:!0},!0}}:void 0),$u||($u=!1,vL(e,0))}function yL(t,e){let n,r=2e8,i,o=0,a=e.top,s=e.top,c,l;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let b;if(d.nodeType==1)b=d.getClientRects();else if(d.nodeType==3)b=bs(d).getClientRects();else continue;for(let x=0;x<b.length;x++){let k=b[x];if(k.top<=a&&k.bottom>=s){a=Math.max(k.bottom,a),s=Math.min(k.top,s);let E=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(E<r){n=d,r=E,i=E&&n.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,d.nodeType==1&&E&&(o=f+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!c&&k.left<=e.left&&k.right>=e.left&&(c=d,l={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!n&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=f+1)}}return!n&&c&&(n=c,i=l,r=0),n&&n.nodeType==3?qie(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:yL(n,i)}function qie(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=bl(r,1);if(o.top!=o.bottom&&RC(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function RC(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eoe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function toe(t,e,n){let{node:r,offset:i}=yL(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function noe(t,e,n,r){let i=-1;for(let o=e,a=!1;o!=t.dom;){let s=t.docView.nearestDesc(o,!0),c;if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((c=s.dom.getBoundingClientRect()).width||c.height)&&(s.node.isBlock&&s.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(s.dom.nodeName)&&(!a&&c.left>r.left||c.top>r.top?i=s.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=s.posAfter),a=!0),!s.contentDOM&&i<0&&!s.node.isText))return(s.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?s.posBefore:s.posAfter;o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function bL(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let a=t.childNodes[o];if(a.nodeType==1){let s=a.getClientRects();for(let c=0;c<s.length;c++){let l=s[c];if(RC(e,l))return bL(a,e,l)}}if((o=(o+1)%r)==i)break}return t}function roe(t,e){let n=t.dom.ownerDocument,r,i=0,o=Yie(n,e.left,e.top);o&&({node:r,offset:i}=o);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),s;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let l=t.dom.getBoundingClientRect();if(!RC(e,l)||(a=bL(t.dom,e,l),!a))return null}if(Oi)for(let l=a;r&&l;l=Hu(l))l.draggable&&(r=void 0);if(a=eoe(a,e),r){if(Oo&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let l;Yf&&i&&r.nodeType==1&&(l=r.childNodes[i-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=noe(t,r,i,e))}s==null&&(s=toe(t,a,e));let c=t.docView.nearestDesc(a,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function wL(t){return t.top<t.bottom||t.left<t.right}function bl(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(wL(r))return r}return Array.prototype.find.call(n,wL)||t.getBoundingClientRect()}const ioe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xL(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),a=Yf||Oo;if(r.nodeType==3)if(a&&(ioe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let s=bl(bs(r,i,i),n);if(Oo&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=bl(bs(r,i-1,i-1),-1);if(c.top==s.top){let l=bl(bs(r,i,i+1),-1);if(l.top!=s.top)return Gf(l,l.left<c.left)}}return s}else{let s=i,c=i,l=n<0?1:-1;return n<0&&!i?(c++,l=-1):n>=0&&i==r.nodeValue.length?(s--,l=1):n<0?s--:c++,Gf(bl(bs(r,s,c),l),l<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Io(r))){let s=r.childNodes[i-1];if(s.nodeType==1)return BC(s.getBoundingClientRect(),!1)}if(o==null&&i<Io(r)){let s=r.childNodes[i];if(s.nodeType==1)return BC(s.getBoundingClientRect(),!0)}return BC(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Io(r))){let s=r.childNodes[i-1],c=s.nodeType==3?bs(s,Io(s)-(a?0:1)):s.nodeType==1&&(s.nodeName!="BR"||!s.nextSibling)?s:null;if(c)return Gf(bl(c,1),!1)}if(o==null&&i<Io(r)){let s=r.childNodes[i];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let c=s?s.nodeType==3?bs(s,0,a?0:1):s.nodeType==1?s:null:null;if(c)return Gf(bl(c,-1),!0)}return Gf(bl(r.nodeType==3?bs(r):r,-n),n>=0)}function Gf(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function BC(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function CL(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ooe(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return CL(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let s=t.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.contentDOM||s.dom;break}o=s.dom.parentNode}let a=xL(t,i.pos,1);for(let s=o.firstChild;s;s=s.nextSibling){let c;if(s.nodeType==1)c=s.getClientRects();else if(s.nodeType==3)c=bs(s,0,s.nodeValue.length).getClientRects();else continue;for(let l=0;l<c.length;l++){let d=c[l];if(d.bottom>d.top+1&&(n=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const aoe=/[\u0590-\u08ac]/;function soe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=t.domSelection();return s?!aoe.test(r.parent.textContent)||!s.modify?n=="left"||n=="backward"?o:a:CL(t,e,()=>{let{focusNode:c,focusOffset:l,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),b=s.caretBidiLevel;s.modify("move",n,"character");let x=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:k,focusOffset:E}=t.domSelectionRange(),m=k&&!x.contains(k.nodeType==1?k:k.parentNode)||c==k&&l==E;try{s.collapse(d,f),c&&(c!=d||l!=f)&&s.extend&&s.extend(c,l)}catch{}return b!=null&&(s.caretBidiLevel=b),m}):r.pos==r.start()||r.pos==r.end()}let SL=null,kL=null,EL=!1;function loe(t,e,n){return SL==e&&kL==n?EL:(SL=e,kL=n,EL=n=="up"||n=="down"?ooe(t,e,n):soe(t,e,n))}const _o=0,TL=1,Tc=2,Ra=3;class Xf{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=_o,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>ei(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!n||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let s=i.children[a];if(s.size){i=s;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],s=o+a.size;if(s>e||a instanceof OL){i=e-o;break}o=s}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof ML&&o.side>=0;r--);if(n<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&n&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?ei(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?ei(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,s=0;;s++){let c=this.children[s],l=a+c.size;if(i==-1&&e<=l){let d=a+c.border;if(e>=d&&n<=l-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=a;for(let f=s;f>0;f--){let b=this.children[f-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){i=ei(b.dom)+1;break}e-=b.size}i==-1&&(i=0)}if(i>-1&&(l>n||s==this.children.length-1)){n=l;for(let d=s+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=ei(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=l}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),a=Math.max(e,n);for(let x=0,k=0;x<this.children.length;x++){let E=this.children[x],m=k+E.size;if(o>k&&a<m)return E.setSelection(e-k-E.border,n-k-E.border,r,i);k=m}let s=this.domFromPos(e,e?-1:1),c=n==e?s:this.domFromPos(n,n?-1:1),l=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((Oo||Oi)&&e==n){let{node:x,offset:k}=s;if(x.nodeType==3){if(f=!!(k&&x.nodeValue[k-1]==`
`),f&&k==x.nodeValue.length)for(let E=x,m;E;E=E.parentNode){if(m=E.nextSibling){m.nodeName=="BR"&&(s=c={node:m.parentNode,offset:ei(m)+1});break}let h=E.pmViewDesc;if(h&&h.node&&h.node.isBlock)break}}else{let E=x.childNodes[k-1];f=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Oo&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let x=d.focusNode.childNodes[d.focusOffset];x&&x.contentEditable=="false"&&(i=!0)}if(!(i||f&&Oi)&&kc(s.node,s.offset,d.anchorNode,d.anchorOffset)&&kc(c.node,c.offset,d.focusNode,d.focusOffset))return;let b=!1;if((l.extend||e==n)&&!(f&&Oo)){l.collapse(s.node,s.offset);try{e!=n&&l.extend(c.node,c.offset),b=!0}catch{}}if(!b){if(e>n){let k=s;s=c,c=k}let x=document.createRange();x.setEnd(c.node,c.offset),x.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let s=r+o.border,c=a-o.border;if(e>=s&&n<=c){this.dirty=e==r||n==a?Tc:TL,e==s&&n==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ra:o.markDirty(e-s,n-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Tc:Ra}r=a}this.dirty=Tc}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Tc:TL;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class ML extends Xf{constructor(e,n,r,i){let o,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(a.nodeType!=1){let s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==_o&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class coe extends Xf{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Mc extends Xf{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],a=o&&o(n,i,r);return(!a||!a.dom)&&(a=hl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Mc(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Ra||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ra&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=_o){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_o}}slice(e,n,r){let i=Mc.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;n<a&&(o=FC(o,n,a,r)),e>0&&(o=FC(o,0,e,r));for(let s=0;s<o.length;s++)o[s].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class wl extends Xf{constructor(e,n,r,i,o,a,s,c,l){super(e,[],o,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=s}static create(e,n,r,i,o,a){let s=o.nodeViews[n.type.name],c,l=s&&s(n,o,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=l&&l.dom,f=l&&l.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=hl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let b=d;return d=DL(d,r,n),l?c=new uoe(e,n,r,i,d,f||null,b,l,o,a+1):n.isText?new Dg(e,n,r,i,d,b,o):new wl(e,n,r,i,d,f||null,b,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ye.empty)}return e}matchesNode(e,n,r){return this.dirty==_o&&e.eq(this.node)&&Ng(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,a=o&&o.pos>-1?o:null,s=o&&o.pos<0,c=new foe(this,a&&a.node,e);moe(this.node,this.innerDeco,(l,d,f)=>{l.spec.marks?c.syncToMarks(l.spec.marks,r,e):l.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?kn.none:this.node.child(d).marks,r,e),c.placeWidget(l,e,i)},(l,d,f,b)=>{c.syncToMarks(l.marks,r,e);let x;c.findNodeMatch(l,d,f,b)||s&&e.state.selection.from>i&&e.state.selection.to<i+l.nodeSize&&(x=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(l,d,f,x,e)||c.updateNextNode(l,d,f,e,b,i)||c.addNode(l,d,f,e,i),i+=l.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Tc)&&(a&&this.protectLocalComposition(e,a),AL(this.contentDOM,this.children,e),zu&&goe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Et)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,s=voe(this.node.content,a,r-n,i-n);return s<0?null:{node:o,pos:s,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new coe(this,o,n,i);e.input.compositionNodes.push(a),this.children=FC(this.children,r,r+i.length,e,a)}update(e,n,r,i){return this.dirty==Ra||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=_o}updateOuterDeco(e){if(Ng(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=_L(this.dom,this.nodeDOM,jC(this.outerDeco,this.node,n),jC(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function IL(t,e,n,r,i){DL(r,e,t);let o=new wl(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Dg extends wl{constructor(e,n,r,i,o,a,s){super(e,n,r,i,o,null,a,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ra||this.dirty!=_o&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_o||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=_o,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Dg(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ra)}get domAtom(){return!1}isText(e){return this.node.text==e}}class OL extends Xf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_o&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uoe extends wl{constructor(e,n,r,i,o,a,s,c,l,d){super(e,n,r,i,o,a,s,l,d),this.spec=c}update(e,n,r,i){if(this.dirty==Ra)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function AL(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let a=e[o],s=a.dom;if(s.parentNode==t){for(;s!=r;)r=NL(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(s,r);if(a instanceof Mc){let c=r?r.previousSibling:t.lastChild;AL(a.contentDOM,a.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=NL(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Kf=function(t){t&&(this.nodeName=t)};Kf.prototype=Object.create(null);const Ic=[new Kf];function jC(t,e,n){if(t.length==0)return Ic;let r=n?Ic[0]:new Kf,i=[r];for(let o=0;o<t.length;o++){let a=t[o].type.attrs;if(a){a.nodeName&&i.push(r=new Kf(a.nodeName));for(let s in a){let c=a[s];c!=null&&(n&&i.length==1&&i.push(r=new Kf(e.isInline?"span":"div")),s=="class"?r.class=(r.class?r.class+" ":"")+c:s=="style"?r.style=(r.style?r.style+";":"")+c:s!="nodeName"&&(r[s]=c))}}}return i}function _L(t,e,n,r){if(n==Ic&&r==Ic)return e;let i=e;for(let o=0;o<r.length;o++){let a=r[o],s=n[o];if(o){let c;s&&s.nodeName==a.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),s=Ic[0]),i=c}doe(i,s||Ic[0],a)}return i}function doe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function DL(t,e,n){return _L(t,t,Ic,jC(e,n,t.nodeType!=1))}function Ng(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function NL(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class foe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hoe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=_o,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let l=this.top.children[c];if(l.matchesMark(e[o])&&!this.isLocked(l.dom)){s=c;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let c=Mc.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))o=this.top.children.indexOf(a,this.index);else for(let s=this.index,c=Math.min(this.top.children.length,s+5);s<c;s++){let l=this.top.children[s];if(l.matchesNode(e,n,r)&&!this.preMatch.matched.has(l)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let a=this.top.children[i];return a.dirty==Ra&&a.dom==a.contentDOM&&(a.dirty=Tc),a.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,a){for(let s=this.index;s<this.top.children.length;s++){let c=this.top.children[s];if(c instanceof wl){let l=this.preMatch.matched.get(c);if(l!=null&&l!=o)return!1;let d=c.dom,f,b=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Ra&&Ng(n,c.outerDeco));if(!b&&c.update(e,n,r,i))return this.destroyBetween(this.index,s),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!b&&(f=this.recreateWrapper(c,e,n,r,i,a)))return this.destroyBetween(this.index,s),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Tc,f.updateChildren(i,a+1),f.dirty=_o),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ng(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let s=wl.create(this.top,n,r,i,o,a);if(s.contentDOM){s.children=e.children,e.children=[];for(let c of s.children)c.parent=s}return e.destroy(),s}addNode(e,n,r,i,o){let a=wl.create(this.top,e,n,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new ML(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Mc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Dg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Oi||vi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new OL(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hoe(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,a=[];e:for(;i>0;){let s;for(;;)if(r){let l=n.children[r-1];if(l instanceof Mc)n=l,r=l.children.length;else{s=l,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=s.node;if(c){if(c!=t.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}function poe(t,e){return t.type.side-e.type.side}function moe(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let l=0;l<t.childCount;l++){let d=t.child(l);r(d,i,e.forChild(o,d),l),o+=d.nodeSize}return}let a=0,s=[],c=null;for(let l=0;;){let d,f;for(;a<i.length&&i[a].to==o;){let m=i[a++];m.widget&&(d?(f||(f=[d])).push(m):d=m)}if(d)if(f){f.sort(poe);for(let m=0;m<f.length;m++)n(f[m],l,!!c)}else n(d,l,!!c);let b,x;if(c)x=-1,b=c,c=null;else if(l<t.childCount)x=l,b=t.child(l++);else break;for(let m=0;m<s.length;m++)s[m].to<=o&&s.splice(m--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);let k=o+b.nodeSize;if(b.isText){let m=k;a<i.length&&i[a].from<m&&(m=i[a].from);for(let h=0;h<s.length;h++)s[h].to<m&&(m=s[h].to);m<k&&(c=b.cut(m-o),b=b.cut(0,m-o),k=m,x=-1)}else for(;a<i.length&&i[a].to<k;)a++;let E=b.isInline&&!b.isLeaf?s.filter(m=>!m.inline):s.slice();r(b,E,e.forChild(o,b),x),o=k}}function goe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function voe(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let a=t.child(i++),s=o;if(o+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<t.childCount;){let l=t.child(i++);if(o+=l.nodeSize,!l.isText)break;c+=l.text}if(o>=n){if(o>=r&&c.slice(r-e.length-s,r-s)==e)return r-e.length;let l=s<r?c.lastIndexOf(e,r-s-1):-1;if(l>=0&&l+e.length+s>=n)return s+l;if(n==r&&c.length>=r+e.length-s&&c.slice(r-s,r-s+e.length)==e)return r}}return-1}function FC(t,e,n,r,i){let o=[];for(let a=0,s=0;a<t.length;a++){let c=t[a],l=s,d=s+=c.size;l>=n||d<=e?o.push(c):(l<e&&o.push(c.slice(0,e-l,r)),i&&(o.push(i),i=void 0),d>n&&o.push(c.slice(n-l,c.size,r)))}return o}function HC(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let s=r.resolve(a),c,l;if(_g(n)){for(c=a;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&kt.isSelectable(f)&&i.parent&&!(f.isInline&&Uie(n.focusNode,n.focusOffset,i.dom))){let b=i.posBefore;l=new kt(a==b?s:r.resolve(b))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=a,b=a;for(let x=0;x<n.rangeCount;x++){let k=n.getRangeAt(x);f=Math.min(f,t.docView.posFromDOM(k.startContainer,k.startOffset,1)),b=Math.max(b,t.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(f<0)return null;[c,a]=b==t.state.selection.anchor?[b,f]:[f,b],s=r.resolve(a)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!l){let f=e=="pointer"||t.state.selection.head<s.pos&&!o?1:-1;l=$C(t,d,s,f)}return l}function PL(t){return t.editable?t.hasFocus():zL(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Cs(t,e=!1){let n=t.state.selection;if(jL(t,n),!!PL(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&vi){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&kc(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)boe(t);else{let{anchor:r,head:i}=n,o,a;LL&&!(n instanceof Et)&&(n.$from.parent.inlineContent||(o=RL(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=RL(t,n.to))),t.docView.setSelection(r,i,t,e),LL&&(o&&BL(o),a&&BL(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yoe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const LL=Oi||vi&&pL<63;function RL(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Oi&&i&&i.contentEditable=="false")return zC(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return zC(i);if(o)return zC(o)}}function zC(t){return t.contentEditable="true",Oi&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function BL(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yoe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!PL(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function boe(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,ei(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Ui&&yl<=11&&(n.disabled=!0,n.disabled=!1)}function jL(t,e){if(e instanceof kt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(FL(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else FL(t)}function FL(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $C(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Et.between(e,n,r)}function HL(t){return t.editable&&!t.hasFocus()?!1:zL(t)}function zL(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function woe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return kc(e.node,e.offset,n.anchorNode,n.anchorOffset)}function UC(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Dt.findFrom(o,e)}function xl(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function $L(t,e,n){let r=t.state.selection;if(r instanceof Et)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return xl(t,new Et(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=UC(t.state,e);return i&&i instanceof kt?xl(t,i):!1}else if(!(Ao&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let s=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=t.docView.descAt(s))&&!a.contentDOM?kt.isSelectable(o)?xl(t,new kt(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Yf?xl(t,new Et(t.state.doc.resolve(e<0?s:s+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof kt&&r.node.isInline)return xl(t,new Et(e>0?r.$to:r.$from));{let i=UC(t.state,e);return i?xl(t,i):!1}}}function Pg(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Zf(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Uu(t,e){return e<0?xoe(t):Coe(t)}function xoe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(Oo&&n.nodeType==1&&r<Pg(n)&&Zf(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let s=n.childNodes[r-1];if(Zf(s,-1))i=n,o=--r;else if(s.nodeType==3)n=s,r=n.nodeValue.length;else break}}else{if(UL(n))break;{let s=n.previousSibling;for(;s&&Zf(s,-1);)i=n.parentNode,o=ei(s),s=s.previousSibling;if(s)n=s,r=Pg(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?WC(t,n,r):i&&WC(t,i,o)}function Coe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Pg(n),o,a;for(;;)if(r<i){if(n.nodeType!=1)break;let s=n.childNodes[r];if(Zf(s,1))o=n,a=++r;else break}else{if(UL(n))break;{let s=n.nextSibling;for(;s&&Zf(s,1);)o=s.parentNode,a=ei(s)+1,s=s.nextSibling;if(s)n=s,r=0,i=Pg(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&WC(t,o,a)}function UL(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Soe(t,e){for(;t&&e==t.childNodes.length&&!Wf(t);)e=ei(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function koe(t,e){for(;t&&!e&&!Wf(t);)e=ei(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function WC(t,e,n){if(e.nodeType!=3){let o,a;(a=Soe(e,n))?(e=a,n=0):(o=koe(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(_g(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Cs(t)},50)}function WL(t,e){let n=t.state.doc.resolve(e);if(!(vi||Gie)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(i.left-r.left)>1)return i.left<r.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(i.left-r.left)>1)return i.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function YL(t,e,n){let r=t.state.selection;if(r instanceof Et&&!r.empty||n.indexOf("s")>-1||Ao&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=UC(t.state,e);if(a&&a instanceof kt)return xl(t,a)}if(!i.parent.inlineContent){let a=e<0?i:o,s=r instanceof fo?Dt.near(a,e):Dt.findFrom(a,e);return s?xl(t,s):!1}return!1}function GL(t,e){if(!(t.state.selection instanceof Et))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let a=t.state.tr;return e<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),t.dispatch(a),!0}return!1}function XL(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Eoe(t){if(!Oi||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;XL(t,r,"true"),setTimeout(()=>XL(t,r,"false"),20)}return!1}function Toe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Moe(t,e){let n=e.keyCode,r=Toe(e);if(n==8||Ao&&n==72&&r=="c")return GL(t,-1)||Uu(t,-1);if(n==46&&!e.shiftKey||Ao&&n==68&&r=="c")return GL(t,1)||Uu(t,1);if(n==13||n==27)return!0;if(n==37||Ao&&n==66&&r=="c"){let i=n==37?WL(t,t.state.selection.from)=="ltr"?-1:1:-1;return $L(t,i,r)||Uu(t,i)}else if(n==39||Ao&&n==70&&r=="c"){let i=n==39?WL(t,t.state.selection.from)=="ltr"?1:-1:1;return $L(t,i,r)||Uu(t,i)}else{if(n==38||Ao&&n==80&&r=="c")return YL(t,-1,r)||Uu(t,-1);if(n==40||Ao&&n==78&&r=="c")return Eoe(t)||YL(t,1,r)||Uu(t,1);if(r==(Ao?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function YC(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let x=r.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let a=t.someProp("clipboardSerializer")||hl.fromSchema(t.state.schema),s=tR(),c=s.createElement("div");c.appendChild(a.serializeFragment(r,{document:s}));let l=c.firstChild,d,f=0;for(;l&&l.nodeType==1&&(d=qL[l.nodeName.toLowerCase()]);){for(let x=d.length-1;x>=0;x--){let k=s.createElement(d[x]);for(;c.firstChild;)k.appendChild(c.firstChild);c.appendChild(k),f++}l=c.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let b=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:b,slice:e}}function KL(t,e,n,r,i){let o=i.parent.type.spec.code,a,s;if(!n&&!e)return null;let c=!!e&&(r||o||!n);if(c){if(t.someProp("transformPastedText",b=>{e=b(e,o||r,t)}),o)return s=new lt(Ye.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",b=>{s=b(s,t,!0)}),s;let f=t.someProp("clipboardTextParser",b=>b(e,i,r,t));if(f)s=f;else{let b=i.marks(),{schema:x}=t.state,k=hl.fromSchema(x);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let m=a.appendChild(document.createElement("p"));E&&m.appendChild(k.serializeNode(x.text(E,b)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),a=_oe(n),Yf&&Doe(a);let l=a&&a.querySelector("[data-pm-slice]"),d=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let b=a.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;a=b}if(s||(s=(t.someProp("clipboardParser")||t.someProp("domParser")||fl.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Ioe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)s=Noe(VL(s,+d[1],+d[2]),d[4]);else if(s=lt.maxOpen(Ooe(s.content,i),!0),s.openStart||s.openEnd){let f=0,b=0;for(let x=s.content.firstChild;f<s.openStart&&!x.type.spec.isolating;f++,x=x.firstChild);for(let x=s.content.lastChild;b<s.openEnd&&!x.type.spec.isolating;b++,x=x.lastChild);s=VL(s,f,b)}return t.someProp("transformPasted",f=>{s=f(s,t,c)}),s}const Ioe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ooe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let s=r.findWrapping(a.type),c;if(!s)return o=null;if(c=o.length&&i.length&&JL(s,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=QL(o[o.length-1],i.length));let l=ZL(a,s);o.push(l),r=r.matchType(l.type),i=s}}),o)return Ye.from(o)}return t}function ZL(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ye.from(t));return t}function JL(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=JL(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ye.from(ZL(n,t,i+1))))}}function QL(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,QL(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ye.empty,!0);return t.copy(n.append(r))}function GC(t,e,n,r,i,o){let a=e<0?t.firstChild:t.lastChild,s=a.content;return t.childCount>1&&(o=0),i<r-1&&(s=GC(s,e,n,r,i+1,o)),i>=n&&(s=e<0?a.contentMatchAt(0).fillBefore(s,o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(Ye.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(s))}function VL(t,e,n){return e<t.openStart&&(t=new lt(GC(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new lt(GC(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const qL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let eR=null;function tR(){return eR||(eR=document.implementation.createHTMLDocument("title"))}let XC=null;function Aoe(t){let e=window.trustedTypes;return e?(XC||(XC=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),XC.createHTML(t)):t}function _oe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&qL[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=Aoe(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Doe(t){let e=t.querySelectorAll(vi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Noe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:a}=t;for(let s=r.length-2;s>=0;s-=2){let c=n.nodes[r[s]];if(!c||c.hasRequiredAttrs())break;i=Ye.from(c.create(r[s+1],i)),o++,a++}return new lt(i,o,a)}const Ai={},_i={},Poe={touchstart:!0,touchmove:!0};class Loe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Roe(t){for(let e in Ai){let n=Ai[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{joe(t,r)&&!ZC(t,r)&&(t.editable||!(r.type in _i))&&n(t,r)},Poe[e]?{passive:!0}:void 0)}Oi&&t.dom.addEventListener("input",()=>null),KC(t)}function Cl(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Boe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function KC(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ZC(t,r))})}function ZC(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function joe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Foe(t,e){!ZC(t,e)&&Ai[e.type]&&(t.editable||!(e.type in _i))&&Ai[e.type](t,e)}_i.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!rR(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ws&&vi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),zu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Ec(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Moe(t,n)?n.preventDefault():Cl(t,"key")},_i.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)},_i.keypress=(t,e)=>{let n=e;if(rR(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ao&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Et)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",a=>a(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Lg(t){return{left:t.clientX,top:t.clientY}}function Hoe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function JC(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(t.someProp(e,s=>a>o.depth?s(t,n,o.nodeAfter,o.before(a),i,!0):s(t,n,o.node(a),o.before(a),i,!1)))return!0;return!1}function Wu(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function zoe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&kt.isSelectable(r)?(Wu(t,new kt(n)),!0):!1}function $oe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof kt&&(r=n.node);let o=t.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let s=a>o.depth?o.nodeAfter:o.node(a);if(kt.isSelectable(s)){r&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(a);break}}return i!=null?(Wu(t,kt.create(t.state.doc,i)),!0):!1}function Uoe(t,e,n,r,i){return JC(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?$oe(t,n):zoe(t,n))}function Woe(t,e,n,r){return JC(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Yoe(t,e,n,r){return JC(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Goe(t,n,r)}function Goe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Wu(t,Et.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),s=i.before(o);if(a.inlineContent)Wu(t,Et.create(r,s+1,s+1+a.content.size));else if(kt.isSelectable(a))Wu(t,kt.create(r,s));else continue;return!0}}function QC(t){return Rg(t)}const nR=Ao?"metaKey":"ctrlKey";Ai.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=QC(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Hoe(n,t.input.lastClick)&&!n[nR]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let a=t.posAtCoords(Lg(n));a&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Xoe(t,a,n,!!r)):(o=="doubleClick"?Woe:Yoe)(t,a.pos,a.inside,n)?n.preventDefault():Cl(t,"pointer"))};class Xoe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[nR],this.allowDefault=r.shiftKey;let o,a;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),a=n.inside;else{let d=e.state.doc.resolve(n.pos);o=d.parent,a=d.depth?d.before():0}const s=i?null:r.target,c=s?e.docView.nearestDesc(s,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:l}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||l instanceof kt&&l.from<=a&&l.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Oo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Cl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Cs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Lg(e))),this.updateAllowDefault(e),this.allowDefault||!n?Cl(this.view,"pointer"):Uoe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Oi&&this.mightDrag&&!this.mightDrag.node.isAtom||vi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Wu(this.view,Dt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Cl(this.view,"pointer")}move(e){this.updateAllowDefault(e),Cl(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ai.touchstart=t=>{t.input.lastTouch=Date.now(),QC(t),Cl(t,"pointer")},Ai.touchmove=t=>{t.input.lastTouch=Date.now(),Cl(t,"pointer")},Ai.contextmenu=t=>QC(t);function rR(t,e){return t.composing?!0:Oi&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Koe=ws?5e3:-1;_i.compositionstart=_i.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Et&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Rg(t,!0),t.markCursor=null;else if(Rg(t,!e.selection.empty),Oo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){let s=t.domSelection();s&&s.collapse(a,a.nodeValue.length);break}else i=a,o=-1}}t.input.composing=!0}iR(t,Koe)},_i.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,iR(t,20))};function iR(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Rg(t),e))}function oR(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Joe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Zoe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=zie(e.focusNode,e.focusOffset),r=$ie(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function Joe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Rg(t,e=!1){if(!(ws&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),oR(t),e||t.docView&&t.docView.dirty){let n=HC(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Qoe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Jf=Ui&&yl<15||zu&&Xie<604;Ai.copy=_i.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Jf?null:n.clipboardData,a=r.content(),{dom:s,text:c}=YC(t,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",c)):Qoe(t,s),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Voe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function qoe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Qf(t,r.value,null,i,e):Qf(t,r.textContent,r.innerHTML,i,e)},50)}function Qf(t,e,n,r,i){let o=KL(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,o||lt.empty)))return!0;if(!o)return!1;let a=Voe(o),s=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function aR(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_i.paste=(t,e)=>{let n=e;if(t.composing&&!ws)return;let r=Jf?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Qf(t,aR(r),r.getData("text/html"),i,n)?n.preventDefault():qoe(t,n)};class sR{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const eae=Ao?"altKey":"ctrlKey";function lR(t,e){return t.someProp("dragCopies",r=>!r(e))??!e[eae]}Ai.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Lg(n)),a;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof kt?i.to-1:i.to))){if(r&&r.mightDrag)a=kt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(a=kt.create(t.state.doc,f.posBefore))}}let s=(a||t.state.selection).content(),{dom:c,text:l,slice:d}=YC(t,s);(!n.dataTransfer.files.length||!vi||pL>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Jf?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Jf||n.dataTransfer.setData("text/plain",l),t.dragging=new sR(d,lR(t,n),a)},Ai.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},_i.dragover=_i.dragenter=(t,e)=>e.preventDefault(),_i.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Lg(n));if(!i)return;let o=t.state.doc.resolve(i.pos),a=r&&r.slice;a?t.someProp("transformPasted",k=>{a=k(a,t,!1)}):a=KL(t,aR(n.dataTransfer),Jf?null:n.dataTransfer.getData("text/html"),!1,o);let s=!!(r&&lR(t,n));if(t.someProp("handleDrop",k=>k(t,n,a||lt.empty,s))){n.preventDefault();return}if(!a)return;n.preventDefault();let c=a?JP(t.state.doc,o.pos,a):o.pos;c==null&&(c=o.pos);let l=t.state.tr;if(s){let{node:k}=r;k?k.replace(l):l.deleteSelection()}let d=l.mapping.map(c),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,b=l.doc;if(f?l.replaceRangeWith(d,d,a.content.firstChild):l.replaceRange(d,d,a),l.doc.eq(b))return;let x=l.doc.resolve(d);if(f&&kt.isSelectable(a.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new kt(x));else{let k=l.mapping.map(c);l.mapping.maps[l.mapping.maps.length-1].forEach((E,m,h,g)=>k=g),l.setSelection($C(t,x,l.doc.resolve(k)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))},Ai.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Cs(t)},20))},Ai.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Ai.beforeinput=(t,e)=>{if(vi&&ws&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Ec(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in _i)Ai[t]=_i[t];function Vf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Bg{constructor(e,n){this.toDOM=e,this.spec=n||Oc,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:a}=e.mapResult(n.from+i,this.side<0?-1:1);return a?null:new Wr(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Bg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Vf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Sl{constructor(e,n){this.attrs=e,this.spec=n||Oc}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new Wr(o,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Sl&&Vf(this.attrs,e.attrs)&&Vf(this.spec,e.spec)}static is(e){return e.type instanceof Sl}destroy(){}}class VC{constructor(e,n){this.attrs=e,this.spec=n||Oc}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let a=e.mapResult(n.to+i,-1);return a.deleted||a.pos<=o.pos?null:new Wr(o.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof VC&&Vf(this.attrs,e.attrs)&&Vf(this.spec,e.spec)}destroy(){}}class Wr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Wr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Wr(e,e,new Bg(n,r))}static inline(e,n,r,i){return new Wr(e,n,new Sl(r,i))}static node(e,n,r,i){return new Wr(e,n,new VC(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Sl}get widget(){return this.type instanceof Bg}}const Yu=[],Oc={};class Dn{constructor(e,n){this.local=e.length?e:Yu,this.children=n.length?n:Yu}static create(e,n){return n.length?jg(n,e,0,Oc):yi}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let a=0;a<this.local.length;a++){let s=this.local[a];s.from<=n&&s.to>=e&&(!o||o(s.spec))&&r.push(s.copy(s.from+i,s.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let s=this.children[a]+1;this.children[a+2].findInner(e-s,n-s,r,i+s,o)}}map(e,n,r){return this==yi||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Oc)}mapInner(e,n,r,i,o){let a;for(let s=0;s<this.local.length;s++){let c=this.local[s].map(e,r,i);c&&c.type.valid(n,c)?(a||(a=[])).push(c):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?tae(this.children,a||[],e,n,r,i,o):a?new Dn(a.sort(Ac),Yu):yi}add(e,n){return n.length?this==yi?Dn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((s,c)=>{let l=c+r,d;if(d=uR(n,s,l)){for(i||(i=this.children.slice());o<i.length&&i[o]<c;)o+=3;i[o]==c?i[o+2]=i[o+2].addInner(s,d,l+1):i.splice(o,0,c,c+s.nodeSize,jg(d,s,l+1,Oc)),o+=3}});let a=cR(o?dR(n):n,-r);for(let s=0;s<a.length;s++)a[s].type.valid(e,a[s])||a.splice(s--,1);return new Dn(a.length?this.local.concat(a).sort(Ac):this.local,i||this.children)}remove(e){return e.length==0||this==yi?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,s=r[o]+n,c=r[o+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>s&&f.to<c&&(e[d]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let l=r[o+2].removeInner(a,s+1);l!=yi?r[o+2]=l:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let s=0;s<i.length;s++)i[s].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(s--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Dn(i,r):yi}forChild(e,n){if(this==yi)return this;if(n.isLeaf)return Dn.empty;let r,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(r=this.children[s+2]);break}let o=e+1,a=o+n.content.size;for(let s=0;s<this.local.length;s++){let c=this.local[s];if(c.from<a&&c.to>o&&c.type instanceof Sl){let l=Math.max(o,c.from)-o,d=Math.min(a,c.to)-o;l<d&&(i||(i=[])).push(c.copy(l,d))}}if(i){let s=new Dn(i.sort(Ac),Yu);return r?new kl([s,r]):s}return r||yi}eq(e){if(this==e)return!0;if(!(e instanceof Dn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return qC(this.localsInner(e))}localsInner(e){if(this==yi)return Yu;if(e.inlineContent||!this.local.some(Sl.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Sl||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Dn.empty=new Dn([],[]),Dn.removeOverlap=qC;const yi=Dn.empty;class kl{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Oc));return kl.from(r)}forChild(e,n){if(n.isLeaf)return Dn.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=yi&&(o instanceof kl?r=r.concat(o.members):r.push(o))}return kl.from(r)}eq(e){if(!(e instanceof kl)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let a=0;a<o.length;a++)n.push(o[a])}}return n?qC(r?n:n.sort(Ac)):Yu}static from(e){switch(e.length){case 0:return yi;case 1:return e[0];default:return new kl(e.every(n=>n instanceof Dn)?e:e.reduce((n,r)=>n.concat(r instanceof Dn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function tae(t,e,n,r,i,o,a){let s=t.slice();for(let l=0,d=o;l<n.maps.length;l++){let f=0;n.maps[l].forEach((b,x,k,E)=>{let m=E-k-(x-b);for(let h=0;h<s.length;h+=3){let g=s[h+1];if(g<0||b>g+d-f)continue;let w=s[h]+d-f;x>=w?s[h+1]=b<=w?-2:-1:b>=d&&m&&(s[h]+=m,s[h+1]+=m)}f+=m}),d=n.maps[l].map(d,-1)}let c=!1;for(let l=0;l<s.length;l+=3)if(s[l+1]<0){if(s[l+1]==-2){c=!0,s[l+1]=-1;continue}let d=n.map(t[l]+o),f=d-i;if(f<0||f>=r.content.size){c=!0;continue}let b=n.map(t[l+1]+o,-1),x=b-i,{index:k,offset:E}=r.content.findIndex(f),m=r.maybeChild(k);if(m&&E==f&&E+m.nodeSize==x){let h=s[l+2].mapInner(n,m,d+1,t[l]+o+1,a);h!=yi?(s[l]=f,s[l+1]=x,s[l+2]=h):(s[l+1]=-2,c=!0)}else c=!0}if(c){let l=nae(s,t,e,n,i,o,a),d=jg(l,r,0,a);e=d.local;for(let f=0;f<s.length;f+=3)s[f+1]<0&&(s.splice(f,3),f-=3);for(let f=0,b=0;f<d.children.length;f+=3){let x=d.children[f];for(;b<s.length&&s[b]<x;)b+=3;s.splice(b,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Dn(e.sort(Ac),s)}function cR(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Wr(i.from+e,i.to+e,i.type))}return n}function nae(t,e,n,r,i,o,a){function s(c,l){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(r,i,l);f?n.push(f):a.onRemove&&a.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)s(c.children[d+2],c.children[d]+l+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&s(t[c+2],e[c]+o+1);return n}function uR(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,a;o<t.length;o++)(a=t[o])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),t[o]=null);return i}function dR(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function jg(t,e,n,r){let i=[],o=!1;e.forEach((s,c)=>{let l=uR(t,s,c+n);if(l){o=!0;let d=jg(l,s,n+c+1,r);d!=yi&&i.push(c,c+s.nodeSize,d)}});let a=cR(o?dR(t):t,-n).sort(Ac);for(let s=0;s<a.length;s++)a[s].type.valid(e,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new Dn(a,i):yi}function Ac(t,e){return t.from-e.from||t.to-e.to}function qC(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),fR(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),fR(e,i,r.copy(o.from,r.to)));break}}}return e}function fR(t,e,n){for(;e<t.length&&Ac(n,t[e])>0;)e++;t.splice(e,0,n)}function eS(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=yi&&e.push(r)}),t.cursorWrapper&&e.push(Dn.create(t.state.doc,[t.cursorWrapper.deco])),kl.from(e)}const rae={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iae=Ui&&yl<=11;class oae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class aae{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new oae,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ui&&yl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),iae&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rae)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(HL(this.view)){if(this.suppressingSelectionUpdates)return Cs(this.view);if(Ui&&yl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&kc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Hu(o))n.add(o);for(let o=e.anchorNode;o;o=Hu(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&HL(e)&&!this.ignoreSelectionChange(r),o=-1,a=-1,s=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],c);f&&(o=o<0?f.from:Math.min(f.from,o),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(s=!0))}if(Oo&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,b]=d;f.parentNode&&f.parentNode.parentNode==b.parentNode?b.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let b of d){let x=b.parentNode;x&&x.nodeName=="LI"&&(!f||cae(e,f)!=x)&&b.remove()}}}let l=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&_g(r)&&(l=HC(e))&&l.eq(Dt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Cs(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,a),sae(e)),this.handleDOMChange(o,a,s,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Cs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Ui&&yl<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:b}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let a=i&&i.parentNode==e.target?ei(i)+1:0,s=r.localPosFromDOM(e.target,a,-1),c=o&&o.parentNode==e.target?ei(o):e.target.childNodes.length,l=r.localPosFromDOM(e.target,c,1);return{from:s,to:l}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let hR=new WeakMap,pR=!1;function sae(t){if(!hR.has(t)&&(hR.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Oo,pR)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),pR=!0}}function mR(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return kc(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function lae(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return mR(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?mR(t,n):null}function cae(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function uae(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:a,to:s}=t.docView.parseRange(e,n),c=t.domSelectionRange(),l,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(l=[{node:d,offset:c.anchorOffset}],_g(c)||l.push({node:c.focusNode,offset:c.focusOffset})),vi&&t.input.lastKeyCode===8)for(let m=o;m>i;m--){let h=r.childNodes[m-1],g=h.pmViewDesc;if(h.nodeName=="BR"&&!g){o=m;break}if(!g||g.size)break}let f=t.state.doc,b=t.someProp("domParser")||fl.fromSchema(t.state.schema),x=f.resolve(a),k=null,E=b.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:i,to:o,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:dae,context:x});if(l&&l[0].pos!=null){let m=l[0].pos,h=l[1]&&l[1].pos;h==null&&(h=m),k={anchor:m+a,head:h+a}}return{doc:E,sel:k,from:a,to:s}}function dae(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Oi&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Oi&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fae=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function hae(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=HC(t,T);if(C&&!t.state.selection.eq(C)){if(vi&&ws&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",A=>A(t,Ec(13,"Enter"))))return;let M=t.state.tr.setSelection(C);T=="pointer"?M.setMeta("pointer",!0):T=="key"&&M.scrollIntoView(),o&&M.setMeta("composition",o),t.dispatch(M)}return}let a=t.state.doc.resolve(e),s=a.sharedDepth(n);e=a.before(s+1),n=t.state.doc.resolve(n).after(s+1);let c=t.state.selection,l=uae(t,e,n),d=t.state.doc,f=d.slice(l.from,l.to),b,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(b=t.state.selection.to,x="end"):(b=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let k=gae(f.content,l.doc.content,l.from,b,x);if(k&&t.input.domChangeCount++,(zu&&t.input.lastIOSEnter>Date.now()-225||ws)&&i.some(T=>T.nodeType==1&&!fae.test(T.nodeName))&&(!k||k.endA>=k.endB)&&t.someProp("handleKeyDown",T=>T(t,Ec(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!k)if(r&&c instanceof Et&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))k={start:c.from,endA:c.to,endB:c.to};else{if(l.sel){let T=gR(t,t.state.doc,l.sel);if(T&&!T.eq(t.state.selection)){let C=t.state.tr.setSelection(T);o&&C.setMeta("composition",o),t.dispatch(C)}}return}t.state.selection.from<t.state.selection.to&&k.start==k.endB&&t.state.selection instanceof Et&&(k.start>t.state.selection.from&&k.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?k.start=t.state.selection.from:k.endA<t.state.selection.to&&k.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(k.endB+=t.state.selection.to-k.endA,k.endA=t.state.selection.to)),Ui&&yl<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>l.from&&l.doc.textBetween(k.start-l.from-1,k.start-l.from+1)==" "&&(k.start--,k.endA--,k.endB--);let E=l.doc.resolveNoCache(k.start-l.from),m=l.doc.resolveNoCache(k.endB-l.from),h=d.resolve(k.start),g=E.sameParent(m)&&E.parent.inlineContent&&h.end()>=k.endA,w;if((zu&&t.input.lastIOSEnter>Date.now()-225&&(!g||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!g&&E.pos<l.doc.content.size&&(!E.sameParent(m)||!E.parent.inlineContent)&&!/\S/.test(l.doc.textBetween(E.pos,m.pos,"",""))&&(w=Dt.findFrom(l.doc.resolve(E.pos+1),1,!0))&&w.head>E.pos)&&t.someProp("handleKeyDown",T=>T(t,Ec(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>k.start&&mae(d,k.start,k.endA,E,m)&&t.someProp("handleKeyDown",T=>T(t,Ec(8,"Backspace")))){ws&&vi&&t.domObserver.suppressSelectionUpdates();return}vi&&k.endB==k.start&&(t.input.lastChromeDelete=Date.now()),ws&&!g&&E.start()!=m.start()&&m.parentOffset==0&&E.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==k.endA&&(k.endB-=2,m=l.doc.resolveNoCache(k.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Ec(13,"Enter"))})},20));let p=k.start,v=k.endA,y=T=>{let C=T||t.state.tr.replace(p,v,l.doc.slice(k.start-l.from,k.endB-l.from));if(l.sel){let M=gR(t,C.doc,l.sel);M&&!(vi&&t.composing&&M.empty&&(k.start!=k.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==p||M.head==C.mapping.map(v)-1)||Ui&&M.empty&&M.head==p)&&C.setSelection(M)}return o&&C.setMeta("composition",o),C.scrollIntoView()},S;if(g){if(E.pos==m.pos){Ui&&yl<=11&&E.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Cs(t),20));let T=y(t.state.tr.delete(p,v)),C=d.resolve(k.start).marksAcross(d.resolve(k.endA));C&&T.ensureMarks(C),t.dispatch(T)}else if(k.endA==k.endB&&(S=pae(E.parent.content.cut(E.parentOffset,m.parentOffset),h.parent.content.cut(h.parentOffset,k.endA-h.start())))){let T=y(t.state.tr);S.type=="add"?T.addMark(p,v,S.mark):T.removeMark(p,v,S.mark),t.dispatch(T)}else if(E.parent.child(E.index()).isText&&E.index()==m.index()-(m.textOffset?0:1)){let T=E.parent.textBetween(E.parentOffset,m.parentOffset),C=()=>y(t.state.tr.insertText(T,p,v));t.someProp("handleTextInput",M=>M(t,p,v,T,C))||t.dispatch(C())}}else t.dispatch(y())}function gR(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:$C(t,e.resolve(n.anchor),e.resolve(n.head))}function pae(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,a,s,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)o=n[d].removeFromSet(o);if(i.length==1&&o.length==0)s=i[0],a="add",c=d=>d.mark(s.addToSet(d.marks));else if(i.length==0&&o.length==1)s=o[0],a="remove",c=d=>d.mark(s.removeFromSet(d.marks));else return null;let l=[];for(let d=0;d<e.childCount;d++)l.push(c(e.child(d)));if(Ye.from(l).eq(t))return{mark:s,type:a}}function mae(t,e,n,r,i){if(n-e<=i.pos-r.pos||tS(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let s=o.nodeAfter;return s!=null&&n==e+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=t.resolve(tS(o,!0,!0));return!a.parent.isTextblock||a.pos>n||tS(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function tS(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function gae(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a,b:s}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,o-Math.min(a,s));r-=a+c-o}if(a<o&&t.size<e.size){let c=r<=o&&r>=a?o-r:0;o-=c,o&&o<e.size&&vR(e.textBetween(o-1,o+1))&&(o+=c?1:-1),s=o+(s-a),a=o}else if(s<o){let c=r<=o&&r>=s?o-r:0;o-=c,o&&o<t.size&&vR(t.textBetween(o-1,o+1))&&(o+=c?1:-1),a=o+(a-s),s=o}return{start:o,endA:a,endB:s}}function vR(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class yR{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Loe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(SR),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xR(this),wR(this),this.nodeViews=CR(this),this.docView=IL(this.state.doc,bR(this),eS(this),this.dom,this),this.domObserver=new aae(this,(r,i,o,a)=>hae(this,r,i,o,a)),this.domObserver.start(),Roe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&KC(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(SR),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(oR(this),a=!0),this.state=e;let s=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=CR(this);yae(x,this.nodeViews)&&(this.nodeViews=x,o=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&KC(this),this.editable=xR(this),wR(this);let c=eS(this),l=bR(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,l,c);(f||!e.selection.eq(i.selection))&&(a=!0);let b=d=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Jie(this);if(a){this.domObserver.stop();let x=f&&(Ui||vi)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&vae(i.selection,e.selection);if(f){let k=vi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Zoe(this)),(o||!this.docView.update(e.doc,l,c,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=IL(e.doc,l,c,this.dom,this)),k&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&woe(this))?Cs(this,x):(jL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():b&&Qie(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))&&!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof kt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&mL(this,n.getBoundingClientRect(),e)}else mL(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new sR(e.slice,e.move,i<0?void 0:kt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let s=this.directPlugins[a].props[e];if(s!=null&&(i=n?n(s):s))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let s=o[a].props[e];if(s!=null&&(i=n?n(s):s))return i}}hasFocus(){if(Ui){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vie(this.dom),Cs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return roe(this,e)}coordsAtPos(e,n=1){return xL(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return loe(this,n||this.state,e)}pasteHTML(e,n){return Qf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Qf(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return YC(this,e)}destroy(){this.docView&&(Boe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],eS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Fie())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Foe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Oi&&this.root.nodeType===11&&Wie(this.dom.ownerDocument)==this.dom&&lae(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}yR.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function bR(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Wr.node(0,t.state.doc.content.size,e)]}function wR(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Wr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function xR(t){return!t.someProp("editable",e=>e(t.state)===!1)}function vae(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function CR(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function yae(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function SR(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var El={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bae=typeof navigator<"u"&&/Mac/.test(navigator.platform),wae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ti=0;ti<10;ti++)El[48+ti]=El[96+ti]=String(ti);for(var ti=1;ti<=24;ti++)El[ti+111]="F"+ti;for(var ti=65;ti<=90;ti++)El[ti]=String.fromCharCode(ti+32),Fg[ti]=String.fromCharCode(ti);for(var nS in El)Fg.hasOwnProperty(nS)||(Fg[nS]=El[nS]);function xae(t){var e=bae&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wae&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Fg:El)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Cae=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Sae=typeof navigator<"u"&&/Win/.test(navigator.platform);function kae(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<e.length-1;s++){let c=e[s];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))Cae?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Eae(t){let e=Object.create(null);for(let n in t)e[kae(n)]=t[n];return e}function rS(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Tae(t){return new En({props:{handleKeyDown:iS(t)}})}function iS(t){let e=Eae(t);return function(n,r){let i=xae(r),o,a=e[rS(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let s=e[rS(i,r,!1)];if(s&&s(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Sae&&r.ctrlKey&&r.altKey)&&(o=El[r.keyCode])&&o!=i){let s=e[rS(o,r)];if(s&&s(n.state,n.dispatch,n))return!0}}return!1}}const Hg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function kR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const ER=(t,e,n)=>{let r=kR(t,n);if(!r)return!1;let i=oS(r);if(!i){let a=r.blockRange(),s=a&&Lu(a);return s==null?!1:(e&&e(t.tr.lift(a,s).scrollIntoView()),!0)}let o=i.nodeBefore;if(PR(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Gu(o,"end")||kt.isSelectable(o)))for(let a=r.depth;;a--){let s=Og(t.doc,r.before(a),r.after(a),lt.empty);if(s&&s.slice.size<s.to-s.from){if(e){let c=t.tr.step(s);c.setSelection(Gu(o,"end")?Dt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):kt.create(c.doc,i.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Mae=(t,e,n)=>{let r=kR(t,n);if(!r)return!1;let i=oS(r);return i?TR(t,i,e):!1},Iae=(t,e,n)=>{let r=IR(t,n);if(!r)return!1;let i=aS(r);return i?TR(t,i,e):!1};function TR(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let a=e.nodeAfter,s=a,c=e.pos+1;for(;!s.isTextblock;c++){if(s.type.spec.isolating)return!1;let d=s.firstChild;if(!d)return!1;s=d}let l=Og(t.doc,o,c,lt.empty);if(!l||l.from!=o||l instanceof $r&&l.slice.size>=c-o)return!1;if(n){let d=t.tr.step(l);d.setSelection(Et.create(d.doc,o)),n(d.scrollIntoView())}return!0}function Gu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const MR=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=oS(r)}let a=o&&o.nodeBefore;return!a||!kt.isSelectable(a)?!1:(e&&e(t.tr.setSelection(kt.create(t.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function oS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function IR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const OR=(t,e,n)=>{let r=IR(t,n);if(!r)return!1;let i=aS(r);if(!i)return!1;let o=i.nodeAfter;if(PR(t,i,e,1))return!0;if(r.parent.content.size==0&&(Gu(o,"start")||kt.isSelectable(o))){let a=Og(t.doc,r.before(),r.after(),lt.empty);if(a&&a.slice.size<a.to-a.from){if(e){let s=t.tr.step(a);s.setSelection(Gu(o,"start")?Dt.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):kt.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},AR=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=aS(r)}let a=o&&o.nodeAfter;return!a||!kt.isSelectable(a)?!1:(e&&e(t.tr.setSelection(kt.create(t.doc,o.pos)).scrollIntoView()),!0)};function aS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Oae=(t,e)=>{let n=t.selection,r=n instanceof kt,i;if(r){if(n.node.isTextblock||!gl(t.doc,n.from))return!1;i=n.from}else if(i=Ig(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(kt.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Aae=(t,e)=>{let n=t.selection,r;if(n instanceof kt){if(n.node.isTextblock||!gl(t.doc,n.to))return!1;r=n.to}else if(r=Ig(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},_ae=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Lu(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},_R=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function sS(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Dae=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=sS(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let s=n.after(),c=t.tr.replaceWith(s,s,a.createAndFill());c.setSelection(Dt.near(c.doc.resolve(s),1)),e(c.scrollIntoView())}return!0},DR=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof fo||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=sS(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=t.tr.insert(a,o.createAndFill());s.setSelection(Et.create(s.doc,a+1)),e(s.scrollIntoView())}return!0},NR=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ys(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Lu(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Nae(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof kt&&e.selection.node.isBlock)return!r.parentOffset||!ys(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],a,s,c=!1,l=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){c=r.end(x)==r.pos+(r.depth-x),l=r.start(x)==r.pos-(r.depth-x),s=sS(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),o.unshift(c&&s?{type:s}:null),a=x;break}else{if(x==1)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof Et||e.selection instanceof fo)&&d.deleteSelection();let f=d.mapping.map(r.pos),b=ys(d.doc,f,o.length,o);if(b||(o[0]=s?{type:s}:null,b=ys(d.doc,f,o.length,o)),!b)return!1;if(d.split(f,o.length,o),!c&&l&&r.node(a).type!=s){let x=d.mapping.map(r.before(a)),k=d.doc.resolve(x);s&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,s)&&d.setNodeMarkup(d.mapping.map(r.before(a)),s)}return n&&n(d.scrollIntoView()),!0}}const Pae=Nae(),Lae=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(kt.create(t.doc,i))),!0)};function Rae(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||gl(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function PR(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,a,s,c=i.type.spec.isolating||o.type.spec.isolating;if(!c&&Rae(t,e,n))return!0;let l=!c&&e.parent.canReplace(e.index(),e.index()+1);if(l&&(a=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){let x=e.pos+o.nodeSize,k=Ye.empty;for(let h=a.length-1;h>=0;h--)k=Ye.from(a[h].create(null,k));k=Ye.from(i.copy(k));let E=t.tr.step(new Ur(e.pos-1,x,e.pos,x,new lt(k,1,0),a.length,!0)),m=E.doc.resolve(x+2*a.length);m.nodeAfter&&m.nodeAfter.type==i.type&&gl(E.doc,m.pos)&&E.join(m.pos),n(E.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&c?null:Dt.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),b=f&&Lu(f);if(b!=null&&b>=e.depth)return n&&n(t.tr.lift(f,b).scrollIntoView()),!0;if(l&&Gu(o,"start",!0)&&Gu(i,"end")){let x=i,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let E=o,m=1;for(;!E.isTextblock;E=E.firstChild)m++;if(x.canReplace(x.childCount,x.childCount,E.content)){if(n){let h=Ye.empty;for(let w=k.length-1;w>=0;w--)h=Ye.from(k[w].copy(h));let g=t.tr.step(new Ur(e.pos-k.length,e.pos+o.nodeSize,e.pos+m,e.pos+o.nodeSize-m,new lt(h,k.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function LR(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(Et.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const Bae=LR(-1),jae=LR(1);function Fae(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&kC(a,t,e);return s?(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0):!1}}function RR(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(a,s,(c,l)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(l),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:s},$to:{pos:c}}=n.selection.ranges[a];o.setBlockType(s,c,t,e)}r(o.scrollIntoView())}return!0}}function lS(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}lS(Hg,ER,MR),lS(Hg,OR,AR),lS(_R,DR,NR,Pae),typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Hae(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o);if(!a)return!1;let s=r?n.tr:null;return zae(s,a,t,e)?(r&&r(s.scrollIntoView()),!0):!1}}function zae(t,e,n,r=null){let i=!1,o=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);o=new xg(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new xg(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let s=kC(o,n,r,e);return s?(t&&$ae(t,e,s,i,n),!0):!1}function $ae(t,e,n,r,i){let o=Ye.empty;for(let d=n.length-1;d>=0;d--)o=Ye.from(n[d].type.create(n[d].attrs,o));t.step(new Ur(e.start-(r?2:0),e.end,e.start,e.end,new lt(o,0,0),n.length,!0));let a=0;for(let d=0;d<n.length;d++)n[d].type==i&&(a=d+1);let s=n.length-a,c=e.start+n.length-(r?2:0),l=e.parent;for(let d=e.startIndex,f=e.endIndex,b=!0;d<f;d++,b=!1)!b&&ys(t.doc,c,s)&&(t.split(c,s),c+=2*s),c+=l.child(d).nodeSize;return t}function Uae(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Wae(e,n,t,o):Yae(e,n,o):!0:!1}}function Wae(t,e,n,r){let i=t.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new Ur(o-1,a,o,a,new lt(Ye.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new xg(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const s=Lu(r);if(s==null)return!1;i.lift(r,s);let c=i.doc.resolve(i.mapping.map(o,-1)-1);return gl(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function Yae(t,e,n){let r=t.tr,i=n.parent;for(let x=n.end,k=n.endIndex-1,E=n.startIndex;k>E;k--)x-=i.child(k).nodeSize,r.delete(x-1,x+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=n.startIndex==0,c=n.endIndex==i.childCount,l=o.node(-1),d=o.index(-1);if(!l.canReplace(d+(s?0:1),d+1,a.content.append(c?Ye.empty:Ye.from(i))))return!1;let f=o.pos,b=f+a.nodeSize;return r.step(new Ur(f-(s?1:0),b+(c?1:0),f+1,b-1,new lt((s?Ye.empty:Ye.from(i.copy(Ye.empty))).append(c?Ye.empty:Ye.from(i.copy(Ye.empty))),s?0:1,c?0:1),s?0:1)),e(r.scrollIntoView()),!0}function Gae(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let s=o.parent,c=s.child(a-1);if(c.type!=t)return!1;if(n){let l=c.lastChild&&c.lastChild.type==s.type,d=Ye.from(l?t.create():null),f=new lt(Ye.from(t.create(null,Ye.from(s.type.create(null,d)))),l?3:1,0),b=o.start,x=o.end;n(e.tr.step(new Ur(b-(l?3:1),x,b,x,f,1,!0)).scrollIntoView())}return!0}}var Xae=Object.defineProperty,BR=(t,e)=>{for(var n in e)Xae(t,n,{get:e[n],enumerable:!0})};function zg(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var $g=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,s])=>[a,(...c)=>{const l=s(...c)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),l}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a=[],s=!!t,c=t||i.tr,l=()=>(!s&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,b])=>[f,(...x)=>{const k=this.buildProps(c,e),E=b(...x)(k);return a.push(E),d}])),run:l};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,s])=>[a,(...c)=>s(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a={tr:t,editor:r,view:o,state:zg({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([s,c])=>[s,(...l)=>c(...l)(a)]))}};return a}},Kae=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function jR(t,e){const n=new MC(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var FR=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&FR(r)}return t};function Ug(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return FR(n)}function qf(t,e,n){if(t instanceof vs||t instanceof Ye)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ye.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),qf("",e,n)}if(i){if(n.errorOnInvalidContent){let a=!1,s="";const c=new AP({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(a=!0,s=typeof l=="string"?l:l.outerHTML,null)}]}})});if(n.slice?fl.fromSchema(c).parseSlice(Ug(t),n.parseOptions):fl.fromSchema(c).parse(Ug(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const o=fl.fromSchema(e);return n.slice?o.parseSlice(Ug(t),n.parseOptions).content:o.parse(Ug(t),n.parseOptions)}return qf("",e,n)}function cS(t,e,n={},r={}){return qf(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function Zae(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Jae(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function HR(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Wg(t){return e=>HR(e.$from,t)}function Tt(t,e,n){return t.config[e]===void 0&&t.parent?Tt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Tt(t.parent,e,n):null}):t.config[e]}function uS(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Tt(e,"addExtensions",n);return r?[e,...uS(r())]:e}).flat(10)}function dS(t,e){const n=hl.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function zR(t){return typeof t=="function"}function mn(t,e=void 0,...n){return zR(t)?e?t.bind(e)(...n):t(...n):t}function Qae(t={}){return Object.keys(t).length===0&&t.constructor===Object}function eh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function $R(t){const e=[],{nodeExtensions:n,markExtensions:r}=eh(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage,extensions:i},c=Tt(a,"addGlobalAttributes",s);c&&c().forEach(l=>{l.types.forEach(d=>{Object.entries(l.attributes).forEach(([f,b])=>{e.push({type:d,name:f,attribute:{...o,...b}})})})})}),i.forEach(a=>{const s={name:a.name,options:a.options,storage:a.storage},c=Tt(a,"addAttributes",s);if(!c)return;const l=c();Object.entries(l).forEach(([d,f])=>{const b={...o,...f};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:a.name,name:d,attribute:b})})}),e}function gn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],s=r[i]?r[i].split(" "):[],c=a.filter(l=>!s.includes(l));r[i]=[...s,...c].join(" ")}else if(i==="style"){const a=o?o.split(";").map(l=>l.trim()).filter(Boolean):[],s=r[i]?r[i].split(";").map(l=>l.trim()).filter(Boolean):[],c=new Map;s.forEach(l=>{const[d,f]=l.split(":").map(b=>b.trim());c.set(d,f)}),a.forEach(l=>{const[d,f]=l.split(":").map(b=>b.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([l,d])=>`${l}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Yg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>gn(n,r),{})}function Vae(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function UR(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,a)=>{const s=a.attribute.parseHTML?a.attribute.parseHTML(n):Vae(n.getAttribute(a.name));return s==null?o:{...o,[a.name]:s}},{});return{...r,...i}}}}function WR(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Qae(n)?!1:n!=null))}function YR(t,e){var n;const r=$R(t),{nodeExtensions:i,markExtensions:o}=eh(t),a=(n=i.find(l=>Tt(l,"topNode")))==null?void 0:n.name,s=Object.fromEntries(i.map(l=>{const d=r.filter(h=>h.type===l.name),f={name:l.name,options:l.options,storage:l.storage,editor:e},b=t.reduce((h,g)=>{const w=Tt(g,"extendNodeSchema",f);return{...h,...w?w(l):{}}},{}),x=WR({...b,content:mn(Tt(l,"content",f)),marks:mn(Tt(l,"marks",f)),group:mn(Tt(l,"group",f)),inline:mn(Tt(l,"inline",f)),atom:mn(Tt(l,"atom",f)),selectable:mn(Tt(l,"selectable",f)),draggable:mn(Tt(l,"draggable",f)),code:mn(Tt(l,"code",f)),whitespace:mn(Tt(l,"whitespace",f)),linebreakReplacement:mn(Tt(l,"linebreakReplacement",f)),defining:mn(Tt(l,"defining",f)),isolating:mn(Tt(l,"isolating",f)),attrs:Object.fromEntries(d.map(h=>{var g,w;return[h.name,{default:(g=h==null?void 0:h.attribute)==null?void 0:g.default,validate:(w=h==null?void 0:h.attribute)==null?void 0:w.validate}]}))}),k=mn(Tt(l,"parseHTML",f));k&&(x.parseDOM=k.map(h=>UR(h,d)));const E=Tt(l,"renderHTML",f);E&&(x.toDOM=h=>E({node:h,HTMLAttributes:Yg(h,d)}));const m=Tt(l,"renderText",f);return m&&(x.toText=m),[l.name,x]})),c=Object.fromEntries(o.map(l=>{const d=r.filter(m=>m.type===l.name),f={name:l.name,options:l.options,storage:l.storage,editor:e},b=t.reduce((m,h)=>{const g=Tt(h,"extendMarkSchema",f);return{...m,...g?g(l):{}}},{}),x=WR({...b,inclusive:mn(Tt(l,"inclusive",f)),excludes:mn(Tt(l,"excludes",f)),group:mn(Tt(l,"group",f)),spanning:mn(Tt(l,"spanning",f)),code:mn(Tt(l,"code",f)),attrs:Object.fromEntries(d.map(m=>{var h,g;return[m.name,{default:(h=m==null?void 0:m.attribute)==null?void 0:h.default,validate:(g=m==null?void 0:m.attribute)==null?void 0:g.validate}]}))}),k=mn(Tt(l,"parseHTML",f));k&&(x.parseDOM=k.map(m=>UR(m,d)));const E=Tt(l,"renderHTML",f);return E&&(x.toDOM=m=>E({mark:m,HTMLAttributes:Yg(m,d)})),[l.name,x]}));return new AP({topNode:a,nodes:s,marks:c})}function qae(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function fS(t){return t.sort((e,n)=>{const r=Tt(e,"priority")||100,i=Tt(n,"priority")||100;return r>i?-1:r<i?1:0})}function hS(t){const e=fS(uS(t)),n=qae(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function ese(t,e){const n=hS(t);return YR(n,e)}function GR(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:a={}}=n||{};let s="";return t.nodesBetween(r,i,(c,l,d,f)=>{var b;c.isBlock&&l>r&&(s+=o);const x=a==null?void 0:a[c.type.name];if(x)return d&&(s+=x({node:c,pos:l,parent:d,index:f,range:e})),!1;c.isText&&(s+=(b=c==null?void 0:c.text)==null?void 0:b.slice(Math.max(r,l)-l,i-l))}),s}function XR(t,e){const n={from:0,to:t.content.size};return GR(t,n,e)}function pS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Ss(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function KR(t,e){const n=Ss(e,t.schema),{from:r,to:i,empty:o}=t.selection,a=[];o?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const s=a.find(c=>c.type.name===n.name);return s?{...s.attrs}:{}}function Mr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function tse(t,e){const n=Mr(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,s=>{o.push(s)});const a=o.reverse().find(s=>s.type.name===n.name);return a?{...a.attrs}:{}}function Gg(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function ZR(t,e){const n=Gg(typeof e=="string"?e:e.name,t.schema);return n==="node"?tse(t,e):n==="mark"?KR(t,e):{}}function nse(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function rse(t){const e=nse(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function JR(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((s,c)=>{a.push({from:s,to:c})});else{const{from:s,to:c}=n[o];if(s===void 0||c===void 0)return;a.push({from:s,to:c})}a.forEach(({from:s,to:c})=>{const l=e.slice(o).map(s,-1),d=e.slice(o).map(c),f=e.invert().map(l,-1),b=e.invert().map(d);r.push({oldRange:{from:f,to:b},newRange:{from:l,to:d}})})}),rse(r)}function mS(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Xg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:mS(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function QR(t,e,n={}){return t.find(r=>r.type===e&&Xg(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function VR(t,e,n={}){return!!QR(t,e,n)}function Kg(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(l=>l.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(l=>l.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!QR([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,s=o+1,c=a+i.node.nodeSize;for(;o>0&&VR([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;s<t.parent.childCount&&VR([...t.parent.child(s).marks],e,n);)c+=t.parent.child(s).nodeSize,s+=1;return{from:a,to:c}}function gS(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),a=Kg(o,i.type);a&&r.push({mark:i,...a})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:o,to:o+i.nodeSize,mark:a})))}),r}var ise=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,a=null;for(;o>0&&a===null;){const s=i.node(o);(s==null?void 0:s.type.name)===e?a=s:o-=1}return[a,o]};function vS(t,e){return e.nodes[t]||e.marks[t]||null}function Zg(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var ose=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,a,s)=>{var c,l;const d=((l=(c=i.type.spec).toText)==null?void 0:l.call(c,{node:i,pos:o,parent:a,index:s}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-o))}),n};function yS(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ss(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Xg(d.attrs,n,{strict:!1}));let a=0;const s=[];if(i.forEach(({$from:d,$to:f})=>{const b=d.pos,x=f.pos;t.doc.nodesBetween(b,x,(k,E)=>{if(!k.isText&&!k.marks.length)return;const m=Math.max(b,E),h=Math.min(x,E+k.nodeSize),g=h-m;a+=g,s.push(...k.marks.map(w=>({mark:w,from:m,to:h})))})}),a===0)return!1;const c=s.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Xg(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),l=s.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(c>0?c+l:c)>=a}function Tl(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,a=e?Mr(e,t.schema):null,s=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const b=Math.max(r,f),x=Math.min(i,f+d.nodeSize);s.push({node:d,from:b,to:x})});const c=i-r,l=s.filter(d=>a?a.name===d.node.type.name:!0).filter(d=>Xg(d.node.attrs,n,{strict:!1}));return o?!!l.length:l.reduce((d,f)=>d+f.to-f.from,0)>=c}function ase(t,e,n={}){if(!e)return Tl(t,null,n)||yS(t,null,n);const r=Gg(e,t.schema);return r==="node"?Tl(t,e,n):r==="mark"?yS(t,e,n):!1}var sse=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Wg(s=>s.type.name===e)(t.selection);if(!o)return!1;const a=t.doc.resolve(o.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},lse=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function qR(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function eB(t,e){const{nodeExtensions:n}=eh(e),r=n.find(a=>a.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=mn(Tt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Jg(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Jg(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function tB(t){return t instanceof kt}function bS(t){return t instanceof Et}function ks(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function nB(t,e,n){const r=t.state.doc.content.size,i=ks(e,0,r),o=ks(n,0,r),a=t.coordsAtPos(i),s=t.coordsAtPos(o,-1),c=Math.min(a.top,s.top),l=Math.max(a.bottom,s.bottom),d=Math.min(a.left,s.left),f=Math.max(a.right,s.right),b=f-d,x=l-c,k={top:c,bottom:l,left:d,right:f,width:b,height:x,x:d,y:c};return{...k,toJSON:()=>k}}function rB(t,e=null){if(!e)return null;const n=Dt.atStart(t),r=Dt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?Et.create(t,ks(0,i,o),ks(t.content.size,i,o)):Et.create(t,ks(e,i,o),ks(e,i,o))}function cse(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof $r||i instanceof Ur))return;const o=t.mapping.maps[r];let a=0;o.forEach((s,c,l,d)=>{a===0&&(a=d)}),t.setSelection(Dt.near(t.doc.resolve(a),n))}var Qg=class{constructor(t){this.find=t.find,this.handler=t.handler}},use=(t,e)=>{if(mS(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Vg(t){var e;const{editor:n,from:r,to:i,text:o,rules:a,plugin:s}=t,{view:c}=n;if(c.composing)return!1;const l=c.state.doc.resolve(r);if(l.parent.type.spec.code||(e=l.nodeBefore||l.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let d=!1;const f=ose(l)+o;return a.forEach(b=>{if(d)return;const x=use(f,b.find);if(!x)return;const k=c.state.tr,E=zg({state:c.state,transaction:k}),m={from:r-(x[0].length-o.length),to:i},{commands:h,chain:g,can:w}=new $g({editor:n,state:E});b.handler({state:E,range:m,match:x,commands:h,chain:g,can:w})===null||!k.steps.length||(k.setMeta(s,{transform:k,from:r,to:i,text:o}),c.dispatch(k),d=!0)}),d}function dse(t){const{editor:e,rules:n}=t,r=new En({state:{init(){return null},apply(i,o,a){const s=i.getMeta(r);if(s)return s;const c=i.getMeta("applyInputRules");return c&&setTimeout(()=>{let{text:l}=c;typeof l=="string"?l=l:l=dS(Ye.from(l),a.schema);const{from:d}=c,f=d+l.length;Vg({editor:e,from:d,to:f,text:l,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,a,s){return Vg({editor:e,from:o,to:a,text:s,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Vg({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Vg({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function fse(t){return Object.prototype.toString.call(t).slice(8,-1)}function qg(t){return fse(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function iB(t,e){const n={...t};return qg(t)&&qg(e)&&Object.keys(e).forEach(r=>{qg(e[r])&&qg(t[r])?n[r]=iB(t[r],e[r]):n[r]=e[r]}),n}var wS=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...mn(Tt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mn(Tt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>iB(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ra=class fH extends wS{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new fH(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!o.find(s=>(s==null?void 0:s.type.name)===n.name))return!1;const a=o.find(s=>(s==null?void 0:s.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function hse(t){return typeof t=="number"}var pse=class{constructor(t){this.find=t.find,this.handler=t.handler}},mse=(t,e,n)=>{if(mS(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function gse(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:a,dropEvent:s}=t,{commands:c,chain:l,can:d}=new $g({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(b,x)=>{var k,E,m,h,g;if((E=(k=b.type)==null?void 0:k.spec)!=null&&E.code||!(b.isText||b.isTextblock||b.isInline))return;const w=(g=(h=(m=b.content)==null?void 0:m.size)!=null?h:b.nodeSize)!=null?g:0,p=Math.max(r,x),v=Math.min(i,x+w);if(p>=v)return;const y=b.isText?b.text||"":b.textBetween(p-x,v-x,void 0,"");mse(y,o.find,a).forEach(S=>{if(S.index===void 0)return;const T=p+S.index+1,C=T+S[0].length,M={from:n.tr.mapping.map(T),to:n.tr.mapping.map(C)},A=o.handler({state:n,range:M,match:S,commands:c,chain:l,can:d,pasteEvent:a,dropEvent:s});f.push(A)})}),f.every(b=>b!==null)}var ev=null,vse=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function yse(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,s;try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}const c=({state:l,from:d,to:f,rule:b,pasteEvt:x})=>{const k=l.tr,E=zg({state:l,transaction:k});if(!(!gse({editor:e,state:E,from:Math.max(d-1,0),to:f.b-1,rule:b,pasteEvent:x,dropEvent:s})||!k.steps.length)){try{s=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{s=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(l=>new En({view(d){const f=x=>{var k;r=(k=d.dom.parentElement)!=null&&k.contains(x.target)?d.dom.parentElement:null,r&&(ev=e)},b=()=>{ev&&(ev=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,s=f,!o){const b=ev;b!=null&&b.isEditable&&setTimeout(()=>{const x=b.state.selection;x&&b.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(d,f)=>{var b;const x=(b=f.clipboardData)==null?void 0:b.getData("text/html");return a=f,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,b)=>{const x=d[0],k=x.getMeta("uiEvent")==="paste"&&!i,E=x.getMeta("uiEvent")==="drop"&&!o,m=x.getMeta("applyPasteRules"),h=!!m;if(!k&&!E&&!h)return;if(h){let{text:p}=m;typeof p=="string"?p=p:p=dS(Ye.from(p),b.schema);const{from:v}=m,y=v+p.length,S=vse(p);return c({rule:l,state:b,from:v,to:{b:y},pasteEvt:S})}const g=f.doc.content.findDiffStart(b.doc.content),w=f.doc.content.findDiffEnd(b.doc.content);if(!(!hse(g)||!w||g===w.b))return c({rule:l,state:b,from:g,to:w,pasteEvt:a})}}))}var tv=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=hS(t),this.schema=YR(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:vS(e.name,this.schema)},r=Tt(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return fS([...this.extensions].reverse()).map(e=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:t,type:vS(e.name,this.schema)},r=[],i=Tt(e,"addKeyboardShortcuts",n);let o={};if(e.type==="mark"&&Tt(e,"exitable",n)&&(o.ArrowRight=()=>ra.handleExit({editor:t,mark:e})),i){const d=Object.fromEntries(Object.entries(i()).map(([f,b])=>[f,()=>b({editor:t})]));o={...o,...d}}const a=Tae(o);r.push(a);const s=Tt(e,"addInputRules",n);if(qR(e,t.options.enableInputRules)&&s){const d=s();if(d&&d.length){const f=dse({editor:t,rules:d}),b=Array.isArray(f)?f:[f];r.push(...b)}}const c=Tt(e,"addPasteRules",n);if(qR(e,t.options.enablePasteRules)&&c){const d=c();if(d&&d.length){const f=yse({editor:t,rules:d});r.push(...f)}}const l=Tt(e,"addProseMirrorPlugins",n);if(l){const d=l();r.push(...d)}return r}).flat()}get attributes(){return $R(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=eh(this.extensions);return Object.fromEntries(e.filter(n=>!!Tt(n,"addNodeView")).map(n=>{const r=this.attributes.filter(s=>s.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Mr(n.name,this.schema)},o=Tt(n,"addNodeView",i);if(!o)return[];const a=(s,c,l,d,f)=>{const b=Yg(s,r);return o()({node:s,view:c,getPos:l,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:b})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=eh(this.extensions);return Object.fromEntries(e.filter(n=>!!Tt(n,"addMarkView")).map(n=>{const r=this.attributes.filter(s=>s.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ss(n.name,this.schema)},o=Tt(n,"addMarkView",i);if(!o)return[];const a=(s,c,l)=>{const d=Yg(s,r);return o()({mark:s,view:c,inline:l,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{Dle(s,t,f)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:vS(e.name,this.schema)};e.type==="mark"&&((n=mn(Tt(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Tt(e,"onBeforeCreate",r),o=Tt(e,"onCreate",r),a=Tt(e,"onUpdate",r),s=Tt(e,"onSelectionUpdate",r),c=Tt(e,"onTransaction",r),l=Tt(e,"onFocus",r),d=Tt(e,"onBlur",r),f=Tt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),a&&this.editor.on("update",a),s&&this.editor.on("selectionUpdate",s),c&&this.editor.on("transaction",c),l&&this.editor.on("focus",l),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};tv.resolve=hS,tv.sort=fS,tv.flatten=uS;var bse={};BR(bse,{ClipboardTextSerializer:()=>oB,Commands:()=>dB,Delete:()=>fB,Drop:()=>hB,Editable:()=>pB,FocusEvents:()=>gB,Keymap:()=>vB,Paste:()=>yB,Tabindex:()=>bB,focusEventsPluginKey:()=>mB});var Zt=class hH extends wS{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new hH(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},oB=Zt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new En({key:new qn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,a=Math.min(...o.map(l=>l.$from.pos)),s=Math.max(...o.map(l=>l.$to.pos)),c=pS(n);return GR(r,{from:a,to:s},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),aB={};BR(aB,{blur:()=>wse,clearContent:()=>xse,clearNodes:()=>Cse,command:()=>Sse,createParagraphNear:()=>kse,cut:()=>Ese,deleteCurrentNode:()=>Tse,deleteNode:()=>Mse,deleteRange:()=>Ise,deleteSelection:()=>Ose,enter:()=>Ase,exitCode:()=>_se,extendMarkRange:()=>Dse,first:()=>Nse,focus:()=>Pse,forEach:()=>Lse,insertContent:()=>Rse,insertContentAt:()=>jse,joinBackward:()=>zse,joinDown:()=>Hse,joinForward:()=>$se,joinItemBackward:()=>Use,joinItemForward:()=>Wse,joinTextblockBackward:()=>Yse,joinTextblockForward:()=>Gse,joinUp:()=>Fse,keyboardShortcut:()=>Kse,lift:()=>Zse,liftEmptyBlock:()=>Jse,liftListItem:()=>Qse,newlineInCode:()=>Vse,resetAttributes:()=>qse,scrollIntoView:()=>ele,selectAll:()=>tle,selectNodeBackward:()=>nle,selectNodeForward:()=>rle,selectParentNode:()=>ile,selectTextblockEnd:()=>ole,selectTextblockStart:()=>ale,setContent:()=>sle,setMark:()=>cle,setMeta:()=>ule,setNode:()=>dle,setNodeSelection:()=>fle,setTextSelection:()=>hle,sinkListItem:()=>ple,splitBlock:()=>mle,splitListItem:()=>gle,toggleList:()=>vle,toggleMark:()=>yle,toggleNode:()=>ble,toggleWrap:()=>wle,undoInputRule:()=>xle,unsetAllMarks:()=>Cle,unsetMark:()=>Sle,updateAttributes:()=>kle,wrapIn:()=>Ele,wrapInList:()=>Tle});var wse=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),xse=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Cse=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:a})=>{t.doc.nodesBetween(o.pos,a.pos,(s,c)=>{if(s.type.isText)return;const{doc:l,mapping:d}=e,f=l.resolve(d.map(c)),b=l.resolve(d.map(c+s.nodeSize)),x=f.blockRange(b);if(!x)return;const k=Lu(x);if(s.type.isTextblock){const{defaultType:E}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(x.start,E)}(k||k===0)&&e.lift(x,k)})}),!0},Sse=t=>e=>t(e),kse=()=>({state:t,dispatch:e})=>DR(t,e),Ese=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,o.content),r.setSelection(new Et(r.doc.resolve(Math.max(a-1,0)))),!0},Tse=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),s=i.after(o);t.delete(a,s).scrollIntoView()}return!0}return!1},Mse=t=>({tr:e,state:n,dispatch:r})=>{const i=Mr(t,n.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const s=o.before(a),c=o.after(a);e.delete(s,c).scrollIntoView()}return!0}return!1},Ise=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Ose=()=>({state:t,dispatch:e})=>Hg(t,e),Ase=()=>({commands:t})=>t.keyboardShortcut("Enter"),_se=()=>({state:t,dispatch:e})=>Dae(t,e),Dse=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ss(t,r.schema),{doc:a,selection:s}=n,{$from:c,from:l,to:d}=s;if(i){const f=Kg(c,o,e);if(f&&f.from<=l&&f.to>=d){const b=Et.create(a,f.from,f.to);n.setSelection(b)}}return!0},Nse=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function sB(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function nv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Pse=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{(nv()||sB())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!bS(n.state.selection))return a(),!0;const s=rB(i.doc,t)||n.state.selection,c=n.state.selection.eq(s);return o&&(c||i.setSelection(s),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},Lse=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Rse=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Bse=t=>!("type"in t),jse=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var a;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let s;const c=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},l={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{qf(e,o.schema,{parseOptions:l,errorOnInvalidContent:!0})}catch(E){c(E)}try{s=qf(e,o.schema,{parseOptions:l,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(E){return c(E),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},b=!0,x=!0;if((Bse(s)?s:[s]).forEach(E=>{E.check(),b=b?E.isText&&E.marks.length===0:!1,x=x?E.isBlock:!1}),d===f&&x){const{parent:E}=r.doc.resolve(d);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(d-=1,f+=1)}let k;if(b){if(Array.isArray(e))k=e.map(E=>E.text||"").join("");else if(e instanceof Ye){let E="";e.forEach(m=>{m.text&&(E+=m.text)}),k=E}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,d,f)}else{k=s;const E=r.doc.resolve(d),m=E.node(),h=E.parentOffset===0,g=m.isText||m.isTextblock,w=m.content.size>0;h&&g&&w&&(d=Math.max(0,d-1)),r.replaceWith(d,f,k)}n.updateSelection&&cse(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:k})}return!0},Fse=()=>({state:t,dispatch:e})=>Oae(t,e),Hse=()=>({state:t,dispatch:e})=>Aae(t,e),zse=()=>({state:t,dispatch:e})=>ER(t,e),$se=()=>({state:t,dispatch:e})=>OR(t,e),Use=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ig(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Wse=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ig(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Yse=()=>({state:t,dispatch:e})=>Mae(t,e),Gse=()=>({state:t,dispatch:e})=>Iae(t,e);function lB(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Xse(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<e.length-1;s+=1){const c=e[s];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))nv()||lB()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Kse=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Xse(t).split(/-(?!$)/),a=o.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),s=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,s))});return c==null||c.steps.forEach(l=>{const d=l.map(r.mapping);d&&i&&r.maybeStep(d)}),!0},Zse=(t,e={})=>({state:n,dispatch:r})=>{const i=Mr(t,n.schema);return Tl(n,i,e)?_ae(n,r):!1},Jse=()=>({state:t,dispatch:e})=>NR(t,e),Qse=t=>({state:e,dispatch:n})=>{const r=Mr(t,e.schema);return Uae(r)(e,n)},Vse=()=>({state:t,dispatch:e})=>_R(t,e);function cB(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var qse=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=Gg(typeof t=="string"?t:t.name,r.schema);return s?(s==="node"&&(o=Mr(t,r.schema)),s==="mark"&&(a=Ss(t,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(l,d)=>{o&&o===l.type&&n.setNodeMarkup(d,void 0,cB(l.attrs,e)),a&&l.marks.length&&l.marks.forEach(f=>{a===f.type&&n.addMark(d,d+l.nodeSize,a.create(cB(f.attrs,e)))})})}),!0):!1},ele=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),tle=()=>({tr:t,dispatch:e})=>{if(e){const n=new fo(t.doc);t.setSelection(n)}return!0},nle=()=>({state:t,dispatch:e})=>MR(t,e),rle=()=>({state:t,dispatch:e})=>AR(t,e),ile=()=>({state:t,dispatch:e})=>Lae(t,e),ole=()=>({state:t,dispatch:e})=>jae(t,e),ale=()=>({state:t,dispatch:e})=>Bae(t,e),sle=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:a,commands:s})=>{const{doc:c}=o;if(r.preserveWhitespace!=="full"){const l=cS(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&o.replaceWith(0,c.content.size,l).setMeta("preventUpdate",!n),!0}return a&&o.setMeta("preventUpdate",!n),s.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function lle(t,e,n){var r;const{selection:i}=e;let o=null;if(bS(i)&&(o=i.$cursor),o){const s=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(s)||!s.some(c=>c.type.excludes(n)))}const{ranges:a}=i;return a.some(({$from:s,$to:c})=>{let l=s.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(s.pos,c.pos,(d,f,b)=>{if(l)return!1;if(d.isInline){const x=!b||b.type.allowsMarkType(n),k=!!n.isInSet(d.marks)||!d.marks.some(E=>E.type.excludes(n));l=x&&k}return!l}),l})}var cle=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:a,ranges:s}=o,c=Ss(t,r.schema);if(i)if(a){const l=KR(r,c);n.addStoredMark(c.create({...l,...e}))}else s.forEach(l=>{const d=l.$from.pos,f=l.$to.pos;r.doc.nodesBetween(d,f,(b,x)=>{const k=Math.max(x,d),E=Math.min(x+b.nodeSize,f);b.marks.find(m=>m.type===c)?b.marks.forEach(m=>{c===m.type&&n.addMark(k,E,c.create({...m.attrs,...e}))}):n.addMark(k,E,c.create(e))})});return lle(r,n,c)},ule=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),dle=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Mr(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:s})=>RR(o,{...a,...e})(n)?!0:s.clearNodes()).command(({state:s})=>RR(o,{...a,...e})(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fle=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=ks(t,0,r.content.size),o=kt.create(r,i);e.setSelection(o)}return!0},hle=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,a=Et.atStart(r).from,s=Et.atEnd(r).to,c=ks(i,a,s),l=ks(o,a,s),d=Et.create(r,c,l);e.setSelection(d)}return!0},ple=t=>({state:e,dispatch:n})=>{const r=Mr(t,e.schema);return Gae(r)(e,n)};function uB(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var mle=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:a}=e,{$from:s,$to:c}=o,l=i.extensionManager.attributes,d=Zg(l,s.node().type.name,s.node().attrs);if(o instanceof kt&&o.node.isBlock)return!s.parentOffset||!ys(a,s.pos)?!1:(r&&(t&&uB(n,i.extensionManager.splittableMarks),e.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,b=s.depth===0?void 0:Zae(s.node(-1).contentMatchAt(s.indexAfter(-1)));let x=f&&b?[{type:b,attrs:d}]:void 0,k=ys(e.doc,e.mapping.map(s.pos),1,x);if(!x&&!k&&ys(e.doc,e.mapping.map(s.pos),1,b?[{type:b}]:void 0)&&(k=!0,x=b?[{type:b,attrs:d}]:void 0),r){if(k&&(o instanceof Et&&e.deleteSelection(),e.split(e.mapping.map(s.pos),1,x),b&&!f&&!s.parentOffset&&s.parent.type!==b)){const E=e.mapping.map(s.before()),m=e.doc.resolve(E);s.node(-1).canReplaceWith(m.index(),m.index()+1,b)&&e.setNodeMarkup(e.mapping.map(s.before()),b)}t&&uB(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return k},gle=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var a;const s=Mr(t,r.schema),{$from:c,$to:l}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(l))return!1;const f=c.node(-1);if(f.type!==s)return!1;const b=o.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==s||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let h=Ye.empty;const g=c.index(-1)?1:c.index(-2)?2:3;for(let T=c.depth-g;T>=c.depth-3;T-=1)h=Ye.from(c.node(T).copy(h));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,p={...Zg(b,c.node().type.name,c.node().attrs),...e},v=((a=s.contentMatch.defaultType)==null?void 0:a.createAndFill(p))||void 0;h=h.append(Ye.from(s.createAndFill(null,v)||void 0));const y=c.before(c.depth-(g-1));n.replace(y,c.after(-w),new lt(h,4-g,0));let S=-1;n.doc.nodesBetween(y,n.doc.content.size,(T,C)=>{if(S>-1)return!1;T.isTextblock&&T.content.size===0&&(S=C+1)}),S>-1&&n.setSelection(Et.near(n.doc.resolve(S))),n.scrollIntoView()}return!0}const x=l.pos===c.end()?f.contentMatchAt(0).defaultType:null,k={...Zg(b,f.type.name,f.attrs),...e},E={...Zg(b,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,l.pos);const m=x?[{type:s,attrs:k},{type:x,attrs:E}]:[{type:s,attrs:k}];if(!ys(n.doc,c.pos,2))return!1;if(i){const{selection:h,storedMarks:g}=r,{splittableMarks:w}=o.extensionManager,p=g||h.$to.parentOffset&&h.$from.marks();if(n.split(c.pos,2,m).scrollIntoView(),!p||!i)return!0;const v=p.filter(y=>w.includes(y.type.name));n.ensureMarks(v)}return!0},xS=(t,e)=>{const n=Wg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&gl(t.doc,n.pos)&&t.join(n.pos),!0},CS=(t,e)=>{const n=Wg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&gl(t.doc,r)&&t.join(r),!0},vle=(t,e,n,r={})=>({editor:i,tr:o,state:a,dispatch:s,chain:c,commands:l,can:d})=>{const{extensions:f,splittableMarks:b}=i.extensionManager,x=Mr(t,a.schema),k=Mr(e,a.schema),{selection:E,storedMarks:m}=a,{$from:h,$to:g}=E,w=h.blockRange(g),p=m||E.$to.parentOffset&&E.$from.marks();if(!w)return!1;const v=Wg(y=>eB(y.type.name,f))(E);if(w.depth>=1&&v&&w.depth-v.depth<=1){if(v.node.type===x)return l.liftListItem(k);if(eB(v.node.type.name,f)&&x.validContent(v.node.content)&&s)return c().command(()=>(o.setNodeMarkup(v.pos,x),!0)).command(()=>xS(o,x)).command(()=>CS(o,x)).run()}return!n||!p||!s?c().command(()=>d().wrapInList(x,r)?!0:l.clearNodes()).wrapInList(x,r).command(()=>xS(o,x)).command(()=>CS(o,x)).run():c().command(()=>{const y=d().wrapInList(x,r),S=p.filter(T=>b.includes(T.type.name));return o.ensureMarks(S),y?!0:l.clearNodes()}).wrapInList(x,r).command(()=>xS(o,x)).command(()=>CS(o,x)).run()},yle=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,a=Ss(t,r.schema);return yS(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,e)},ble=(t,e,n={})=>({state:r,commands:i})=>{const o=Mr(t,r.schema),a=Mr(e,r.schema),s=Tl(r,o,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),s?i.setNode(a,c):i.setNode(o,{...c,...n})},wle=(t,e={})=>({state:n,commands:r})=>{const i=Mr(t,n.schema);return Tl(n,i,e)?r.lift(i):r.wrapIn(i,e)},xle=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const a=t.tr,s=o.transform;for(let c=s.steps.length-1;c>=0;c-=1)a.step(s.steps[c].invert(s.docs[c]));if(o.text){const c=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,t.schema.text(o.text,c))}else a.delete(o.from,o.to)}return!0}}return!1},Cle=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Sle=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:s}=n,c=Ss(t,r.schema),{$from:l,empty:d,ranges:f}=s;if(!i)return!0;if(d&&a){let{from:b,to:x}=s;const k=(o=l.marks().find(m=>m.type===c))==null?void 0:o.attrs,E=Kg(l,c,k);E&&(b=E.from,x=E.to),n.removeMark(b,x,c)}else f.forEach(b=>{n.removeMark(b.$from.pos,b.$to.pos,c)});return n.removeStoredMark(c),!0},kle=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=Gg(typeof t=="string"?t:t.name,r.schema);return s?(s==="node"&&(o=Mr(t,r.schema)),s==="mark"&&(a=Ss(t,r.schema)),i&&n.selection.ranges.forEach(c=>{const l=c.$from.pos,d=c.$to.pos;let f,b,x,k;n.selection.empty?r.doc.nodesBetween(l,d,(E,m)=>{o&&o===E.type&&(x=Math.max(m,l),k=Math.min(m+E.nodeSize,d),f=m,b=E)}):r.doc.nodesBetween(l,d,(E,m)=>{m<l&&o&&o===E.type&&(x=Math.max(m,l),k=Math.min(m+E.nodeSize,d),f=m,b=E),m>=l&&m<=d&&(o&&o===E.type&&n.setNodeMarkup(m,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(h=>{if(a===h.type){const g=Math.max(m,l),w=Math.min(m+E.nodeSize,d);n.addMark(g,w,a.create({...h.attrs,...e}))}}))}),b&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(E=>{a===E.type&&n.addMark(x,k,a.create({...E.attrs,...e}))}))}),!0):!1},Ele=(t,e={})=>({state:n,dispatch:r})=>{const i=Mr(t,n.schema);return Fae(i,e)(n,r)},Tle=(t,e={})=>({state:n,dispatch:r})=>{const i=Mr(t,n.schema);return Hae(i,e)(n,r)},dB=Zt.create({name:"commands",addCommands(){return{...aB}}}),fB=Zt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var a,s,c,l;if((l=(c=(s=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:s.filterTransaction)==null?void 0:c.call(s,t))!=null?l:t.getMeta("y-sync$"))return;const d=jR(t.before,[t,...e]);JR(d).forEach(b=>{d.mapping.mapResult(b.oldRange.from).deletedAfter&&d.mapping.mapResult(b.oldRange.to).deletedBefore&&d.before.nodesBetween(b.oldRange.from,b.oldRange.to,(x,k)=>{const E=k+x.nodeSize-2,m=b.oldRange.from<=k&&E<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:k,to:E,newFrom:d.mapping.map(k),newTo:d.mapping.map(E),deletedRange:b.oldRange,newRange:b.newRange,partial:!m,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((b,x)=>{var k,E;if(b instanceof na){const m=f.slice(x).map(b.from,-1),h=f.slice(x).map(b.to),g=f.invert().map(m,-1),w=f.invert().map(h),p=(k=d.doc.nodeAt(m-1))==null?void 0:k.marks.some(y=>y.eq(b.mark)),v=(E=d.doc.nodeAt(h))==null?void 0:E.marks.some(y=>y.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:g,to:w},newRange:{from:m,to:h},partial:!!(v||p),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),hB=Zt.create({name:"drop",addProseMirrorPlugins(){return[new En({key:new qn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pB=Zt.create({name:"editable",addProseMirrorPlugins(){return[new En({key:new qn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mB=new qn("focusEvents"),gB=Zt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new En({key:mB,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),vB=Zt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:s,doc:c}=a,{empty:l,$anchor:d}=s,{pos:f,parent:b}=d,x=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,k=x.parent.type.spec.isolating,E=d.pos-d.parentOffset,m=k&&x.parent.childCount===1?E===d.pos:Dt.atStart(c).from===f;return!l||!b.type.isTextblock||b.textContent.length||!m||m&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return nv()||lB()?i:r},addProseMirrorPlugins(){return[new En({key:new qn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(x=>x.getMeta("composition")))return;const r=t.some(x=>x.docChanged)&&!e.doc.eq(n.doc),i=t.some(x=>x.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:a,to:s}=e.selection,c=Dt.atStart(e.doc).from,l=Dt.atEnd(e.doc).to;if(o||!(a===c&&s===l)||!Jg(n.doc))return;const d=n.tr,f=zg({state:n,transaction:d}),{commands:b}=new $g({editor:this.editor,state:f});if(b.clearNodes(),!!d.steps.length)return d}})]}}),yB=Zt.create({name:"paste",addProseMirrorPlugins(){return[new En({key:new qn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),bB=Zt.create({name:"tabindex",addProseMirrorPlugins(){return[new En({key:new qn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Mle=class vd{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new vd(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new vd(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new vd(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,a=this.pos+r+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const s=this.resolvedPos.doc.resolve(a);if(!i&&s.depth<=this.depth)return;const c=new vd(s,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new vd(s,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,a=Object.keys(n);for(let s=0;s<a.length;s+=1){const c=a[s];if(o[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&o.every(s=>n[s]===a.node.attrs[s])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},Ile=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Ole(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Ale=class extends Kae{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=rB(e,this.options.autofocus);this.editorState=Fu.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Ole(Ile,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.editorState=this.state.apply(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=zR(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[pB,oB.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),dB,gB,vB,bB,hB,yB,fB].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new tv(n,this)}createCommandManager(){this.commandManager=new $g({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=cS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=cS(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new yR(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(l=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(l)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const a=n.findLast(l=>l.getMeta("focus")||l.getMeta("blur")),s=a==null?void 0:a.getMeta("focus"),c=a==null?void 0:a.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:a}),c&&this.emit("blur",{editor:this,event:c.event,transaction:a}),!(t.getMeta("preventUpdate")||!n.some(l=>l.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return ZR(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return ase(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return dS(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return XR(this.state.doc,{blockSeparator:e,textSerializers:{...pS(this.schema),...n}})}get isEmpty(){return Jg(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Mle(e,this)}get $doc(){return this.$pos(0)}};function _c(t){return new Qg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=mn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],s=r[0];if(a){const c=s.search(/\S/),l=n.from+s.indexOf(a),d=l+a.length;if(gS(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(x=>x===t.type&&x!==b.mark.type)).filter(b=>b.to>l).length)return null;d<n.to&&o.delete(d,n.to),l>n.from&&o.delete(n.from+c,l);const f=n.from+c+a.length;o.addMark(n.from+c,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function wB(t){return new Qg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=mn(t.getAttributes,void 0,r)||{},{tr:o}=e,a=n.from;let s=n.to;const c=t.type.create(i);if(r[1]){const l=r[0].lastIndexOf(r[1]);let d=a+l;d>s?d=s:s=d+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,a+r[0].length-1),o.replaceWith(d,s,c)}else if(r[0]){const l=t.type.isInline?a:a-1;o.insert(l,t.type.create(i)).delete(o.mapping.map(a),o.mapping.map(s))}o.scrollIntoView()}})}function SS(t){return new Qg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=mn(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Xu(t){return new Qg({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=mn(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),s=a.doc.resolve(n.from).blockRange(),c=s&&kC(s,t.type,o);if(!c)return null;if(a.wrap(s,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:b}=t.editor.extensionManager,x=f||d.$to.parentOffset&&d.$from.marks();if(x){const k=x.filter(E=>b.includes(E.type.name));a.ensureMarks(k)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const l=a.doc.resolve(n.from-1).nodeBefore;l&&l.type===t.type&&gl(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,l))&&a.join(n.from-1)}})}function _le(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof kt){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function Dle(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,a=t;i.descendants((s,c)=>{const l=o.mapping.map(c),d=o.mapping.map(c)+s.nodeSize;let f=null;if(s.marks.forEach(x=>{if(x!==a)return!1;f=x}),!f)return;let b=!1;if(Object.keys(n).forEach(x=>{n[x]!==f.attrs[x]&&(b=!0)}),b){const x=t.type.create({...t.attrs,...n});o.removeMark(l,d,t.type),o.addMark(l,d,x)}}),o.docChanged&&e.view.dispatch(o)}var Ir=class pH extends wS{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new pH(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Nle=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,o,a,s;const{view:c}=this.editor,l=t.target,d=l.nodeType===3?(e=l.parentElement)==null?void 0:e.closest("[data-drag-handle]"):l.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(l)||!d)return;let f=0,b=0;if(this.dom!==d){const g=this.dom.getBoundingClientRect(),w=d.getBoundingClientRect(),p=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,v=(a=t.offsetY)!=null?a:(o=t.nativeEvent)==null?void 0:o.offsetY;f=w.x-g.x+p,b=w.y-g.y+v}const x=this.dom.cloneNode(!0);try{const g=this.dom.getBoundingClientRect();x.style.width=`${Math.round(g.width)}px`,x.style.height=`${Math.round(g.height)}px`,x.style.boxSizing="border-box",x.style.pointerEvents="none"}catch{}let k=null;try{k=document.createElement("div"),k.style.position="absolute",k.style.top="-9999px",k.style.left="-9999px",k.style.pointerEvents="none",k.appendChild(x),document.body.appendChild(k),(s=t.dataTransfer)==null||s.setDragImage(x,f,b)}finally{k&&setTimeout(()=>{try{k==null||k.remove()}catch{}},0)}const E=this.getPos();if(typeof E!="number")return;const m=kt.create(c.state.doc,E),h=c.state.tr.setSelection(m);c.dispatch(h)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const r=t.type.startsWith("drag"),i=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!r)return!0;const{isEditable:o}=this.editor,{isDragging:a}=this,s=!!this.node.type.spec.draggable,c=kt.isSelectable(this.node),l=t.type==="copy",d=t.type==="paste",f=t.type==="cut",b=t.type==="mousedown";if(!s&&c&&r&&t.target===this.dom&&t.preventDefault(),s&&r&&!a&&t.target===this.dom)return t.preventDefault(),!1;if(s&&o&&!a&&b){const x=n.closest("[data-drag-handle]");x&&(this.dom===x||this.dom.contains(x))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(a||i||l||d||f||b&&c)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(nv()||sB())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(e=>e.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function Ml(t){return new pse({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=mn(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:a}=e,s=r[r.length-1],c=r[0];let l=n.to;if(s){const d=c.search(/\S/),f=n.from+c.indexOf(s),b=f+s.length;if(gS(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(k=>k===t.type&&k!==x.mark.type)).filter(x=>x.to>f).length)return null;b<n.to&&a.delete(b,n.to),f>n.from&&a.delete(n.from+d,f),l=n.from+d+s.length,a.addMark(n.from+d,l,t.type.create(o||{})),a.removeStoredMark(t.type)}}})}function xB(t){return u.customRef((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}var Ple=class extends Ale{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=xB(this.view.state),this.reactiveExtensionStorage=xB(this.extensionStorage),this.on("beforeTransaction",({nextState:e})=>{this.reactiveState.value=e,this.reactiveExtensionStorage.value=this.extensionStorage}),u.markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){const n=super.registerPlugin(t,e);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(t){const e=super.unregisterPlugin(t);return this.reactiveState&&e&&(this.reactiveState.value=e),e}},Lle=u.defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=u.ref(),n=u.getCurrentInstance();return u.watchEffect(()=>{const r=t.editor;r&&r.options.element&&e.value&&u.nextTick(()=>{var i;if(!e.value||!((i=r.options.element)!=null&&i.firstChild))return;const o=u.unref(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),u.onBeforeUnmount(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return u.h("div",{ref:t=>{this.rootEl=t}})}}),Rle=u.defineComponent({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return u.h(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),Ble=u.defineComponent({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return u.h(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(t=this.$slots).default)==null?void 0:e.call(t))}}),jle=(t={})=>{const e=u.shallowRef();return u.onMounted(()=>{e.value=new Ple(t)}),u.onBeforeUnmount(()=>{var n,r,i;const o=(n=e.value)==null?void 0:n.options.element,a=o==null?void 0:o.cloneNode(!0);(r=o==null?void 0:o.parentNode)==null||r.replaceChild(a,o),(i=e.value)==null||i.destroy()}),e},Fle=class{constructor(t,{props:e={},editor:n}){this.editor=n,this.component=u.markRaw(t),this.el=document.createElement("div"),this.props=u.reactive(e),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var t,e,n,r;return(e=(t=this.renderedComponent.vNode)==null?void 0:t.component)!=null&&e.exposed?this.renderedComponent.vNode.component.exposed:(r=(n=this.renderedComponent.vNode)==null?void 0:n.component)==null?void 0:r.proxy}renderComponent(){let t=u.h(this.component,this.props);return this.editor.appContext&&(t.appContext=this.editor.appContext),typeof document<"u"&&this.el&&u.render(t,this.el),{vNode:t,destroy:()=>{this.el&&u.render(null,this.el),this.el=null,t=null},el:this.el?this.el.firstElementChild:null}}updateProps(t={}){Object.entries(t).forEach(([e,n])=>{this.props[e]=n}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}};u.defineComponent({name:"MarkViewContent",props:{as:{type:String,default:"span"}},render(){return u.h(this.as,{style:{whiteSpace:"inherit"},"data-mark-view-content":""})}});var Hle={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0},view:{type:Object,required:!0},innerDecorations:{type:Object,required:!0},HTMLAttributes:{type:Object,required:!0}},zle=class extends Nle{mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(r={})=>this.updateAttributes(r),deleteNode:()=>this.deleteNode()},e=this.onDragStart.bind(this);this.decorationClasses=u.ref(this.getDecorationClasses());const n=u.defineComponent({extends:{...this.component},props:Object.keys(t),template:this.component.template,setup:r=>{var i,o;return u.provide("onDragStart",e),u.provide("decorationClasses",this.decorationClasses),(o=(i=this.component).setup)==null?void 0:o.call(i,r,{expose:()=>{}})},__scopeId:this.component.__scopeId,__cssModules:this.component.__cssModules,__name:this.component.__name,__file:this.component.__file});this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new Fle(n,{editor:this.editor,props:t})}get dom(){if(!this.renderer.element||!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=i=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(i)};if(typeof this.options.update=="function"){const i=this.node,o=this.decorations,a=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:t,newDecorations:e,oldInnerDecorations:a,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t.type!==this.node.type?!1:(t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element&&this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element&&this.renderer.element.classList.remove("ProseMirror-selectednode")}getDecorationClasses(){return this.decorations.map(t=>t.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}};function $le(t,e){return n=>{if(!n.editor.contentComponent)return{};const r=typeof t=="function"&&"__vccOpts"in t?t.__vccOpts:t;return new zle(r,n,e)}}const kS="en",ES=200,Ule=ES-80,CB=20,SB=1e5,TS=16,rv=6,iv=10,ov=2,Wle=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#000000","#333333","#666666","#999999","#CCCCCC","#D5D5D4","#E8E8E8","#EEEEEE"],kB="Roboto",av="default",Yle=[{title:"editor.default",value:av,default:!0}],Gle=[8,10,12,14,16,18,20,24,30,36,48,60,72],Ku="default";var sv=(t=>(t[t["size-small"]=200]="size-small",t[t["size-medium"]=500]="size-medium",t["size-large"]="100%",t))(sv||{}),lv=(t=>(t[t["size-small"]=480]="size-small",t[t["size-medium"]=640]="size-medium",t["size-large"]="100%",t))(lv||{});const Xle={image:["float-left","float-none","float-right","divider","image-size-small","image-size-medium","image-size-large","divider","textAlign","divider","image","image-aspect-ratio","image-caption","remove"],text:["bold","italic","underline","strike","divider","color","highlight","textAlign","divider","link"],link:["bold","italic","underline","strike","divider","color","highlight","textAlign","divider","link","unlink","link-open"],video:["video-size-small","video-size-medium","video-size-large","divider","video","remove"],table:["table-add-column-before","table-add-column-after","table-delete-column","divider","table-add-row-before","table-add-row-after","table-delete-row","divider","table-merge-or-split-cells","divider","table-delete-table","divider"]},Kle=u.reactive({extensions:[]});function cv(){return{state:Kle}}var EB=typeof global=="object"&&global&&global.Object===Object&&global,Zle=typeof self=="object"&&self&&self.Object===Object&&self,ia=EB||Zle||Function("return this")(),Do=ia.Symbol,TB=Object.prototype,Jle=TB.hasOwnProperty,Qle=TB.toString,th=Do?Do.toStringTag:void 0;function Vle(t){var e=Jle.call(t,th),n=t[th];try{t[th]=void 0;var r=!0}catch{}var i=Qle.call(t);return r&&(e?t[th]=n:delete t[th]),i}var qle=Object.prototype,ece=qle.toString;function tce(t){return ece.call(t)}var nce="[object Null]",rce="[object Undefined]",MB=Do?Do.toStringTag:void 0;function Dc(t){return t==null?t===void 0?rce:nce:MB&&MB in Object(t)?Vle(t):tce(t)}function Ba(t){return t!=null&&typeof t=="object"}var ice="[object Symbol]";function uv(t){return typeof t=="symbol"||Ba(t)&&Dc(t)==ice}function MS(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var oa=Array.isArray,IB=Do?Do.prototype:void 0,OB=IB?IB.toString:void 0;function AB(t){if(typeof t=="string")return t;if(oa(t))return MS(t,AB)+"";if(uv(t))return OB?OB.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var oce=/\s/;function ace(t){for(var e=t.length;e--&&oce.test(t.charAt(e)););return e}var sce=/^\s+/;function lce(t){return t&&t.slice(0,ace(t)+1).replace(sce,"")}function Es(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _B=NaN,cce=/^[-+]0x[0-9a-f]+$/i,uce=/^0b[01]+$/i,dce=/^0o[0-7]+$/i,fce=parseInt;function DB(t){if(typeof t=="number")return t;if(uv(t))return _B;if(Es(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Es(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=lce(t);var n=uce.test(t);return n||dce.test(t)?fce(t.slice(2),n?2:8):cce.test(t)?_B:+t}function IS(t){return t}var hce="[object AsyncFunction]",pce="[object Function]",mce="[object GeneratorFunction]",gce="[object Proxy]";function NB(t){if(!Es(t))return!1;var e=Dc(t);return e==pce||e==mce||e==hce||e==gce}var OS=ia["__core-js_shared__"],PB=function(){var t=/[^.]+$/.exec(OS&&OS.keys&&OS.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vce(t){return!!PB&&PB in t}var yce=Function.prototype,bce=yce.toString;function Nc(t){if(t!=null){try{return bce.call(t)}catch{}try{return t+""}catch{}}return""}var wce=/[\\^$.*+?()[\]{}|]/g,xce=/^\[object .+?Constructor\]$/,Cce=Function.prototype,Sce=Object.prototype,kce=Cce.toString,Ece=Sce.hasOwnProperty,Tce=RegExp("^"+kce.call(Ece).replace(wce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mce(t){if(!Es(t)||vce(t))return!1;var e=NB(t)?Tce:xce;return e.test(Nc(t))}function Ice(t,e){return t==null?void 0:t[e]}function Pc(t,e){var n=Ice(t,e);return Mce(n)?n:void 0}var AS=Pc(ia,"WeakMap");function Oce(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Ace=800,_ce=16,Dce=Date.now;function Nce(t){var e=0,n=0;return function(){var r=Dce(),i=_ce-(r-n);if(n=r,i>0){if(++e>=Ace)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Pce(t){return function(){return t}}var dv=function(){try{var t=Pc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Lce=dv?function(t,e){return dv(t,"toString",{configurable:!0,enumerable:!1,value:Pce(e),writable:!0})}:IS,LB=Nce(Lce);function Rce(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Bce(t,e,n,r){for(var i=t.length,o=n+-1;++o<i;)if(e(t[o],o,t))return o;return-1}function jce(t){return t!==t}function Fce(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Hce(t,e,n){return e===e?Fce(t,e,n):Bce(t,jce,n)}function zce(t,e){var n=t==null?0:t.length;return!!n&&Hce(t,e,0)>-1}var $ce=9007199254740991,Uce=/^(?:0|[1-9]\d*)$/;function RB(t,e){var n=typeof t;return e=e??$ce,!!e&&(n=="number"||n!="symbol"&&Uce.test(t))&&t>-1&&t%1==0&&t<e}function BB(t,e,n){e=="__proto__"&&dv?dv(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function _S(t,e){return t===e||t!==t&&e!==e}var Wce=Object.prototype,Yce=Wce.hasOwnProperty;function jB(t,e,n){var r=t[e];(!(Yce.call(t,e)&&_S(r,n))||n===void 0&&!(e in t))&&BB(t,e,n)}function Gce(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],c=void 0;c===void 0&&(c=t[s]),i?BB(n,s,c):jB(n,s,c)}return n}var FB=Math.max;function HB(t,e,n){return e=FB(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=FB(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Oce(t,this,s)}}function Xce(t,e){return LB(HB(t,e,IS),t+"")}var Kce=9007199254740991;function DS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Kce}function NS(t){return t!=null&&DS(t.length)&&!NB(t)}var Zce=Object.prototype;function zB(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Zce;return t===n}function Jce(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Qce="[object Arguments]";function $B(t){return Ba(t)&&Dc(t)==Qce}var UB=Object.prototype,Vce=UB.hasOwnProperty,qce=UB.propertyIsEnumerable,PS=$B(function(){return arguments}())?$B:function(t){return Ba(t)&&Vce.call(t,"callee")&&!qce.call(t,"callee")};function eue(){return!1}var WB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,YB=WB&&typeof module=="object"&&module&&!module.nodeType&&module,tue=YB&&YB.exports===WB,GB=tue?ia.Buffer:void 0,nue=GB?GB.isBuffer:void 0,fv=nue||eue,rue="[object Arguments]",iue="[object Array]",oue="[object Boolean]",aue="[object Date]",sue="[object Error]",lue="[object Function]",cue="[object Map]",uue="[object Number]",due="[object Object]",fue="[object RegExp]",hue="[object Set]",pue="[object String]",mue="[object WeakMap]",gue="[object ArrayBuffer]",vue="[object DataView]",yue="[object Float32Array]",bue="[object Float64Array]",wue="[object Int8Array]",xue="[object Int16Array]",Cue="[object Int32Array]",Sue="[object Uint8Array]",kue="[object Uint8ClampedArray]",Eue="[object Uint16Array]",Tue="[object Uint32Array]",Pn={};Pn[yue]=Pn[bue]=Pn[wue]=Pn[xue]=Pn[Cue]=Pn[Sue]=Pn[kue]=Pn[Eue]=Pn[Tue]=!0,Pn[rue]=Pn[iue]=Pn[gue]=Pn[oue]=Pn[vue]=Pn[aue]=Pn[sue]=Pn[lue]=Pn[cue]=Pn[uue]=Pn[due]=Pn[fue]=Pn[hue]=Pn[pue]=Pn[mue]=!1;function Mue(t){return Ba(t)&&DS(t.length)&&!!Pn[Dc(t)]}function hv(t){return function(e){return t(e)}}var XB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nh=XB&&typeof module=="object"&&module&&!module.nodeType&&module,Iue=nh&&nh.exports===XB,LS=Iue&&EB.process,Zu=function(){try{var t=nh&&nh.require&&nh.require("util").types;return t||LS&&LS.binding&&LS.binding("util")}catch{}}(),KB=Zu&&Zu.isTypedArray,ZB=KB?hv(KB):Mue,Oue=Object.prototype,Aue=Oue.hasOwnProperty;function JB(t,e){var n=oa(t),r=!n&&PS(t),i=!n&&!r&&fv(t),o=!n&&!r&&!i&&ZB(t),a=n||r||i||o,s=a?Jce(t.length,String):[],c=s.length;for(var l in t)(e||Aue.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||RB(l,c)))&&s.push(l);return s}function QB(t,e){return function(n){return t(e(n))}}var _ue=QB(Object.keys,Object),Due=Object.prototype,Nue=Due.hasOwnProperty;function Pue(t){if(!zB(t))return _ue(t);var e=[];for(var n in Object(t))Nue.call(t,n)&&n!="constructor"&&e.push(n);return e}function VB(t){return NS(t)?JB(t):Pue(t)}function Lue(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Rue=Object.prototype,Bue=Rue.hasOwnProperty;function jue(t){if(!Es(t))return Lue(t);var e=zB(t),n=[];for(var r in t)r=="constructor"&&(e||!Bue.call(t,r))||n.push(r);return n}function Fue(t){return NS(t)?JB(t,!0):jue(t)}var Hue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zue=/^\w*$/;function RS(t,e){if(oa(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||uv(t)?!0:zue.test(t)||!Hue.test(t)||e!=null&&t in Object(e)}var rh=Pc(Object,"create");function $ue(){this.__data__=rh?rh(null):{},this.size=0}function Uue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Wue="__lodash_hash_undefined__",Yue=Object.prototype,Gue=Yue.hasOwnProperty;function Xue(t){var e=this.__data__;if(rh){var n=e[t];return n===Wue?void 0:n}return Gue.call(e,t)?e[t]:void 0}var Kue=Object.prototype,Zue=Kue.hasOwnProperty;function Jue(t){var e=this.__data__;return rh?e[t]!==void 0:Zue.call(e,t)}var Que="__lodash_hash_undefined__";function Vue(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rh&&e===void 0?Que:e,this}function Lc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lc.prototype.clear=$ue,Lc.prototype.delete=Uue,Lc.prototype.get=Xue,Lc.prototype.has=Jue,Lc.prototype.set=Vue;function que(){this.__data__=[],this.size=0}function pv(t,e){for(var n=t.length;n--;)if(_S(t[n][0],e))return n;return-1}var ede=Array.prototype,tde=ede.splice;function nde(t){var e=this.__data__,n=pv(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tde.call(e,n,1),--this.size,!0}function rde(t){var e=this.__data__,n=pv(e,t);return n<0?void 0:e[n][1]}function ide(t){return pv(this.__data__,t)>-1}function ode(t,e){var n=this.__data__,r=pv(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ts(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ts.prototype.clear=que,Ts.prototype.delete=nde,Ts.prototype.get=rde,Ts.prototype.has=ide,Ts.prototype.set=ode;var ih=Pc(ia,"Map");function ade(){this.size=0,this.__data__={hash:new Lc,map:new(ih||Ts),string:new Lc}}function sde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function mv(t,e){var n=t.__data__;return sde(e)?n[typeof e=="string"?"string":"hash"]:n.map}function lde(t){var e=mv(this,t).delete(t);return this.size-=e?1:0,e}function cde(t){return mv(this,t).get(t)}function ude(t){return mv(this,t).has(t)}function dde(t,e){var n=mv(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ms(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ms.prototype.clear=ade,Ms.prototype.delete=lde,Ms.prototype.get=cde,Ms.prototype.has=ude,Ms.prototype.set=dde;var fde="Expected a function";function BS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(fde);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(BS.Cache||Ms),n}BS.Cache=Ms;var hde=500;function pde(t){var e=BS(t,function(r){return n.size===hde&&n.clear(),r}),n=e.cache;return e}var mde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gde=/\\(\\)?/g,vde=pde(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(mde,function(n,r,i,o){e.push(i?o.replace(gde,"$1"):r||n)}),e});function yde(t){return t==null?"":AB(t)}function gv(t,e){return oa(t)?t:RS(t,e)?[t]:vde(yde(t))}function oh(t){if(typeof t=="string"||uv(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function jS(t,e){e=gv(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[oh(e[n++])];return n&&n==r?t:void 0}function bde(t,e,n){var r=t==null?void 0:jS(t,e);return r===void 0?n:r}function FS(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var qB=Do?Do.isConcatSpreadable:void 0;function wde(t){return oa(t)||PS(t)||!!(qB&&t&&t[qB])}function e4(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=wde),i||(i=[]);++o<a;){var s=t[o];n(s)?FS(i,s):r||(i[i.length]=s)}return i}function xde(t){var e=t==null?0:t.length;return e?e4(t):[]}function Cde(t){return LB(HB(t,void 0,xde),t+"")}var t4=QB(Object.getPrototypeOf,Object),Sde="[object Object]",kde=Function.prototype,Ede=Object.prototype,n4=kde.toString,Tde=Ede.hasOwnProperty,Mde=n4.call(Object);function Ide(t){if(!Ba(t)||Dc(t)!=Sde)return!1;var e=t4(t);if(e===null)return!0;var n=Tde.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&n4.call(n)==Mde}function Ode(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function Ade(){this.__data__=new Ts,this.size=0}function _de(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Dde(t){return this.__data__.get(t)}function Nde(t){return this.__data__.has(t)}var Pde=200;function Lde(t,e){var n=this.__data__;if(n instanceof Ts){var r=n.__data__;if(!ih||r.length<Pde-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ms(r)}return n.set(t,e),this.size=n.size,this}function ja(t){var e=this.__data__=new Ts(t);this.size=e.size}ja.prototype.clear=Ade,ja.prototype.delete=_de,ja.prototype.get=Dde,ja.prototype.has=Nde,ja.prototype.set=Lde;var r4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,i4=r4&&typeof module=="object"&&module&&!module.nodeType&&module,Rde=i4&&i4.exports===r4,o4=Rde?ia.Buffer:void 0;o4&&o4.allocUnsafe;function Bde(t,e){return t.slice()}function jde(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function a4(){return[]}var Fde=Object.prototype,Hde=Fde.propertyIsEnumerable,s4=Object.getOwnPropertySymbols,l4=s4?function(t){return t==null?[]:(t=Object(t),jde(s4(t),function(e){return Hde.call(t,e)}))}:a4,zde=Object.getOwnPropertySymbols,$de=zde?function(t){for(var e=[];t;)FS(e,l4(t)),t=t4(t);return e}:a4;function c4(t,e,n){var r=e(t);return oa(t)?r:FS(r,n(t))}function u4(t){return c4(t,VB,l4)}function d4(t){return c4(t,Fue,$de)}var HS=Pc(ia,"DataView"),zS=Pc(ia,"Promise"),$S=Pc(ia,"Set"),f4="[object Map]",Ude="[object Object]",h4="[object Promise]",p4="[object Set]",m4="[object WeakMap]",g4="[object DataView]",Wde=Nc(HS),Yde=Nc(ih),Gde=Nc(zS),Xde=Nc($S),Kde=Nc(AS),aa=Dc;(HS&&aa(new HS(new ArrayBuffer(1)))!=g4||ih&&aa(new ih)!=f4||zS&&aa(zS.resolve())!=h4||$S&&aa(new $S)!=p4||AS&&aa(new AS)!=m4)&&(aa=function(t){var e=Dc(t),n=e==Ude?t.constructor:void 0,r=n?Nc(n):"";if(r)switch(r){case Wde:return g4;case Yde:return f4;case Gde:return h4;case Xde:return p4;case Kde:return m4}return e});var Zde=Object.prototype,Jde=Zde.hasOwnProperty;function Qde(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Jde.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var vv=ia.Uint8Array;function US(t){var e=new t.constructor(t.byteLength);return new vv(e).set(new vv(t)),e}function Vde(t,e){var n=US(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var qde=/\w*$/;function efe(t){var e=new t.constructor(t.source,qde.exec(t));return e.lastIndex=t.lastIndex,e}var v4=Do?Do.prototype:void 0,y4=v4?v4.valueOf:void 0;function tfe(t){return y4?Object(y4.call(t)):{}}function nfe(t,e){var n=US(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}var rfe="[object Boolean]",ife="[object Date]",ofe="[object Map]",afe="[object Number]",sfe="[object RegExp]",lfe="[object Set]",cfe="[object String]",ufe="[object Symbol]",dfe="[object ArrayBuffer]",ffe="[object DataView]",hfe="[object Float32Array]",pfe="[object Float64Array]",mfe="[object Int8Array]",gfe="[object Int16Array]",vfe="[object Int32Array]",yfe="[object Uint8Array]",bfe="[object Uint8ClampedArray]",wfe="[object Uint16Array]",xfe="[object Uint32Array]";function Cfe(t,e,n){var r=t.constructor;switch(e){case dfe:return US(t);case rfe:case ife:return new r(+t);case ffe:return Vde(t);case hfe:case pfe:case mfe:case gfe:case vfe:case yfe:case bfe:case wfe:case xfe:return nfe(t);case ofe:return new r;case afe:case cfe:return new r(t);case sfe:return efe(t);case lfe:return new r;case ufe:return tfe(t)}}var Sfe="[object Map]";function kfe(t){return Ba(t)&&aa(t)==Sfe}var b4=Zu&&Zu.isMap,Efe=b4?hv(b4):kfe,Tfe="[object Set]";function Mfe(t){return Ba(t)&&aa(t)==Tfe}var w4=Zu&&Zu.isSet,Ife=w4?hv(w4):Mfe,x4="[object Arguments]",Ofe="[object Array]",Afe="[object Boolean]",_fe="[object Date]",Dfe="[object Error]",C4="[object Function]",Nfe="[object GeneratorFunction]",Pfe="[object Map]",Lfe="[object Number]",S4="[object Object]",Rfe="[object RegExp]",Bfe="[object Set]",jfe="[object String]",Ffe="[object Symbol]",Hfe="[object WeakMap]",zfe="[object ArrayBuffer]",$fe="[object DataView]",Ufe="[object Float32Array]",Wfe="[object Float64Array]",Yfe="[object Int8Array]",Gfe="[object Int16Array]",Xfe="[object Int32Array]",Kfe="[object Uint8Array]",Zfe="[object Uint8ClampedArray]",Jfe="[object Uint16Array]",Qfe="[object Uint32Array]",Nn={};Nn[x4]=Nn[Ofe]=Nn[zfe]=Nn[$fe]=Nn[Afe]=Nn[_fe]=Nn[Ufe]=Nn[Wfe]=Nn[Yfe]=Nn[Gfe]=Nn[Xfe]=Nn[Pfe]=Nn[Lfe]=Nn[S4]=Nn[Rfe]=Nn[Bfe]=Nn[jfe]=Nn[Ffe]=Nn[Kfe]=Nn[Zfe]=Nn[Jfe]=Nn[Qfe]=!0,Nn[Dfe]=Nn[C4]=Nn[Hfe]=!1;function yv(t,e,n,r,i,o){var a;if(n&&(a=i?n(t,r,i,o):n(t)),a!==void 0)return a;if(!Es(t))return t;var s=oa(t);if(s)a=Qde(t);else{var c=aa(t),l=c==C4||c==Nfe;if(fv(t))return Bde(t);if(c==S4||c==x4||l&&!i)a={};else{if(!Nn[c])return i?t:{};a=Cfe(t,c)}}o||(o=new ja);var d=o.get(t);if(d)return d;o.set(t,a),Ife(t)?t.forEach(function(x){a.add(yv(x,e,n,x,t,o))}):Efe(t)&&t.forEach(function(x,k){a.set(k,yv(x,e,n,k,t,o))});var f=d4,b=s?void 0:f(t);return Rce(b||t,function(x,k){b&&(k=x,x=t[k]),jB(a,k,yv(x,e,n,k,t,o))}),a}var Vfe="__lodash_hash_undefined__";function qfe(t){return this.__data__.set(t,Vfe),this}function ehe(t){return this.__data__.has(t)}function ah(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ms;++e<n;)this.add(t[e])}ah.prototype.add=ah.prototype.push=qfe,ah.prototype.has=ehe;function the(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function k4(t,e){return t.has(e)}var nhe=1,rhe=2;function E4(t,e,n,r,i,o){var a=n&nhe,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(t),d=o.get(e);if(l&&d)return l==e&&d==t;var f=-1,b=!0,x=n&rhe?new ah:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var k=t[f],E=e[f];if(r)var m=a?r(E,k,f,e,t,o):r(k,E,f,t,e,o);if(m!==void 0){if(m)continue;b=!1;break}if(x){if(!the(e,function(h,g){if(!k4(x,g)&&(k===h||i(k,h,n,r,o)))return x.push(g)})){b=!1;break}}else if(!(k===E||i(k,E,n,r,o))){b=!1;break}}return o.delete(t),o.delete(e),b}function ihe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function ohe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ahe=1,she=2,lhe="[object Boolean]",che="[object Date]",uhe="[object Error]",dhe="[object Map]",fhe="[object Number]",hhe="[object RegExp]",phe="[object Set]",mhe="[object String]",ghe="[object Symbol]",vhe="[object ArrayBuffer]",yhe="[object DataView]",T4=Do?Do.prototype:void 0,WS=T4?T4.valueOf:void 0;function bhe(t,e,n,r,i,o,a){switch(n){case yhe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case vhe:return!(t.byteLength!=e.byteLength||!o(new vv(t),new vv(e)));case lhe:case che:case fhe:return _S(+t,+e);case uhe:return t.name==e.name&&t.message==e.message;case hhe:case mhe:return t==e+"";case dhe:var s=ihe;case phe:var c=r&ahe;if(s||(s=ohe),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=she,a.set(t,e);var d=E4(s(t),s(e),r,i,o,a);return a.delete(t),d;case ghe:if(WS)return WS.call(t)==WS.call(e)}return!1}var whe=1,xhe=Object.prototype,Che=xhe.hasOwnProperty;function She(t,e,n,r,i,o){var a=n&whe,s=u4(t),c=s.length,l=u4(e),d=l.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var b=s[f];if(!(a?b in e:Che.call(e,b)))return!1}var x=o.get(t),k=o.get(e);if(x&&k)return x==e&&k==t;var E=!0;o.set(t,e),o.set(e,t);for(var m=a;++f<c;){b=s[f];var h=t[b],g=e[b];if(r)var w=a?r(g,h,b,e,t,o):r(h,g,b,t,e,o);if(!(w===void 0?h===g||i(h,g,n,r,o):w)){E=!1;break}m||(m=b=="constructor")}if(E&&!m){var p=t.constructor,v=e.constructor;p!=v&&"constructor"in t&&"constructor"in e&&!(typeof p=="function"&&p instanceof p&&typeof v=="function"&&v instanceof v)&&(E=!1)}return o.delete(t),o.delete(e),E}var khe=1,M4="[object Arguments]",I4="[object Array]",bv="[object Object]",Ehe=Object.prototype,O4=Ehe.hasOwnProperty;function The(t,e,n,r,i,o){var a=oa(t),s=oa(e),c=a?I4:aa(t),l=s?I4:aa(e);c=c==M4?bv:c,l=l==M4?bv:l;var d=c==bv,f=l==bv,b=c==l;if(b&&fv(t)){if(!fv(e))return!1;a=!0,d=!1}if(b&&!d)return o||(o=new ja),a||ZB(t)?E4(t,e,n,r,i,o):bhe(t,e,c,n,r,i,o);if(!(n&khe)){var x=d&&O4.call(t,"__wrapped__"),k=f&&O4.call(e,"__wrapped__");if(x||k){var E=x?t.value():t,m=k?e.value():e;return o||(o=new ja),i(E,m,n,r,o)}}return b?(o||(o=new ja),She(t,e,n,r,i,o)):!1}function wv(t,e,n,r,i){return t===e?!0:t==null||e==null||!Ba(t)&&!Ba(e)?t!==t&&e!==e:The(t,e,n,r,wv,i)}var Mhe=1,Ihe=2;function Ohe(t,e,n,r){var i=n.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var s=a[0],c=t[s],l=a[1];if(a[2]){if(c===void 0&&!(s in t))return!1}else{var d=new ja,f;if(!(f===void 0?wv(l,c,Mhe|Ihe,r,d):f))return!1}}return!0}function A4(t){return t===t&&!Es(t)}function Ahe(t){for(var e=VB(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,A4(i)]}return e}function _4(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function _he(t){var e=Ahe(t);return e.length==1&&e[0][2]?_4(e[0][0],e[0][1]):function(n){return n===t||Ohe(n,t,e)}}function Dhe(t,e){return t!=null&&e in Object(t)}function Nhe(t,e,n){e=gv(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=oh(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&DS(i)&&RB(a,i)&&(oa(t)||PS(t)))}function Phe(t,e){return t!=null&&Nhe(t,e,Dhe)}var Lhe=1,Rhe=2;function Bhe(t,e){return RS(t)&&A4(e)?_4(oh(t),e):function(n){var r=bde(n,t);return r===void 0&&r===e?Phe(n,t):wv(e,r,Lhe|Rhe)}}function jhe(t){return function(e){return e==null?void 0:e[t]}}function Fhe(t){return function(e){return jS(e,t)}}function Hhe(t){return RS(t)?jhe(oh(t)):Fhe(t)}function zhe(t){return typeof t=="function"?t:t==null?IS:typeof t=="object"?oa(t)?Bhe(t[0],t[1]):_he(t):Hhe(t)}var YS=function(){return ia.Date.now()},$he="Expected a function",Uhe=Math.max,Whe=Math.min;function Yhe(t,e,n){var r,i,o,a,s,c,l=0,d=!1,f=!1,b=!0;if(typeof t!="function")throw new TypeError($he);e=DB(e)||0,Es(n)&&(d=!!n.leading,f="maxWait"in n,o=f?Uhe(DB(n.maxWait)||0,e):o,b="trailing"in n?!!n.trailing:b);function x(y){var S=r,T=i;return r=i=void 0,l=y,a=t.apply(T,S),a}function k(y){return l=y,s=setTimeout(h,e),d?x(y):a}function E(y){var S=y-c,T=y-l,C=e-S;return f?Whe(C,o-T):C}function m(y){var S=y-c,T=y-l;return c===void 0||S>=e||S<0||f&&T>=o}function h(){var y=YS();if(m(y))return g(y);s=setTimeout(h,E(y))}function g(y){return s=void 0,b&&r?x(y):(r=i=void 0,a)}function w(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function p(){return s===void 0?a:g(YS())}function v(){var y=YS(),S=m(y);if(r=arguments,i=this,c=y,S){if(s===void 0)return k(c);if(f)return clearTimeout(s),s=setTimeout(h,e),x(c)}return s===void 0&&(s=setTimeout(h,e)),a}return v.cancel=w,v.flush=p,v}function GS(t){return Ba(t)&&NS(t)}var Ghe=200;function Xhe(t,e,n,r){var i=-1,o=zce,a=!0,s=t.length,c=[],l=e.length;if(!s)return c;n&&(e=MS(e,hv(n))),e.length>=Ghe&&(o=k4,a=!1,e=new ah(e));e:for(;++i<s;){var d=t[i],f=n==null?d:n(d);if(d=d!==0?d:0,a&&f===f){for(var b=l;b--;)if(e[b]===f)continue e;c.push(d)}else o(e,f,r)||c.push(d)}return c}function D4(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Khe=Xce(function(t,e){var n=D4(e);return GS(n)&&(n=void 0),GS(t)?Xhe(t,e4(e,1,GS,!0),zhe(n)):[]});function Zhe(t,e){return e.length<2?t:jS(t,Ode(e,0,-1))}function Jhe(t,e){return wv(t,e)}function Qhe(t,e){return e=gv(e,t),t=Zhe(t,e),t==null||delete t[oh(D4(e))]}function Vhe(t){return Ide(t)?void 0:t}var qhe=1,epe=2,tpe=4,npe=Cde(function(t,e){var n={};if(t==null)return n;var r=!1;e=MS(e,function(o){return o=gv(o,t),r||(r=o.length>1),o}),Gce(t,d4(t),n),r&&(n=yv(n,qhe|epe|tpe,Vhe));for(var i=e.length;i--;)Qhe(n,e[i]);return n}),rpe="Expected a function";function Ju(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(rpe);return Es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Yhe(t,e,{leading:r,maxWait:e,trailing:i})}function ipe(t,e,n){return t<e?e:t>n?n:t}const XS=t=>typeof t=="number",sh=t=>typeof t=="string",Qu=t=>typeof t=="boolean",ope=t=>typeof t=="function",lh=(t,e="px")=>{if(!t)return t;const n=XS(t)?String(t):t,r=Number.parseFloat(n),i=n.match(/[a-zA-Z%]+$/),o=i?i[0]:e;return Number.isNaN(r)?t:r+o};function ape(t,e){const{extensions:n=[]}=t.extensionManager??{};return!!n.find(r=>r.name===e)}const N4=(t,e)=>{const{schema:n}=t,r=n.marks[e],i=n.nodes[e];return r?t.isActive(r.name):i?t.isActive(i.name):!1};function P4(t,e){const{state:n}=cv(),r=u.computed(()=>Qu(u.unref(t))?av:sh(n.defaultMarkdownTheme)&&n.defaultMarkdownTheme?n.defaultMarkdownTheme:av),i=u.computed(()=>({[`markdown-theme-${u.unref(r)}`]:!!sh(u.unref(r))}));function o(a){!Qu(u.unref(t))&&u.unref(t)!==a&&(e==null||e(a))}return u.watch(r,a=>o(a)),u.watch(t,a=>{a&&sh(a)&&n.defaultMarkdownTheme!==a&&(n.defaultMarkdownTheme=a)}),n.defaultMarkdownTheme&&o(n.defaultMarkdownTheme),{markdownThemeStyle:i}}function L4(t){return u.getCurrentScope()?(u.onScopeDispose(t),!0):!1}const Vu=new WeakMap,spe=(...t)=>{var e;const n=t[0],r=(e=u.getCurrentInstance())==null?void 0:e.proxy;if(r==null&&!u.hasInjectionContext())throw new Error("injectLocal must be called in setup");return r&&Vu.has(r)&&n in Vu.get(r)?Vu.get(r)[n]:u.inject(...t)};function lpe(t,e){var n;const r=(n=u.getCurrentInstance())==null?void 0:n.proxy;if(r==null)throw new Error("provideLocal must be called in setup");Vu.has(r)||Vu.set(r,Object.create(null));const i=Vu.get(r);return i[t]=e,u.provide(t,e)}function cpe(t,e){const n=Symbol(t.name||"InjectionState"),r=void 0;return[(...i)=>{const o=t(...i);return lpe(n,o),o},()=>spe(n,r)]}const R4=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const upe=Object.prototype.toString,dpe=t=>upe.call(t)==="[object Object]";function KS(t){return Array.isArray(t)?t:[t]}function fpe(t){return u.getCurrentInstance()}function hpe(t,e=!0,n){fpe()?u.onMounted(t,n):e?t():u.nextTick(t)}function ppe(t,e,n){return u.watch(t,e,{...n,immediate:!0})}const mpe=R4?window:void 0,gpe=R4?window.document:void 0;function ZS(t){var e;const n=u.toValue(t);return(e=n==null?void 0:n.$el)!=null?e:n}function B4(...t){const e=[],n=()=>{e.forEach(s=>s()),e.length=0},r=(s,c,l,d)=>(s.addEventListener(c,l,d),()=>s.removeEventListener(c,l,d)),i=u.computed(()=>{const s=KS(u.toValue(t[0])).filter(c=>c!=null);return s.every(c=>typeof c!="string")?s:void 0}),o=ppe(()=>{var s,c;return[(c=(s=i.value)==null?void 0:s.map(l=>ZS(l)))!=null?c:[mpe].filter(l=>l!=null),KS(u.toValue(i.value?t[1]:t[0])),KS(u.unref(i.value?t[2]:t[1])),u.toValue(i.value?t[3]:t[2])]},([s,c,l,d])=>{if(n(),!(s!=null&&s.length)||!(c!=null&&c.length)||!(l!=null&&l.length))return;const f=dpe(d)?{...d}:d;e.push(...s.flatMap(b=>c.flatMap(x=>l.map(k=>r(b,x,k,f)))))},{flush:"post"}),a=()=>{o(),n()};return L4(n),a}function vpe(){const t=u.shallowRef(!1),e=u.getCurrentInstance();return e&&u.onMounted(()=>{t.value=!0},e),t}function ype(t){const e=vpe();return u.computed(()=>(e.value,!!t()))}const j4=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function bpe(t,e={}){const{document:n=gpe,autoExit:r=!1}=e,i=u.computed(()=>{var g;return(g=ZS(t))!=null?g:n==null?void 0:n.documentElement}),o=u.shallowRef(!1),a=u.computed(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(g=>n&&g in n||i.value&&g in i.value)),s=u.computed(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(g=>n&&g in n||i.value&&g in i.value)),c=u.computed(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(g=>n&&g in n||i.value&&g in i.value)),l=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(g=>n&&g in n),d=ype(()=>i.value&&n&&a.value!==void 0&&s.value!==void 0&&c.value!==void 0),f=()=>l?(n==null?void 0:n[l])===i.value:!1,b=()=>{if(c.value){if(n&&n[c.value]!=null)return n[c.value];{const g=i.value;if((g==null?void 0:g[c.value])!=null)return!!g[c.value]}}return!1};async function x(){if(!(!d.value||!o.value)){if(s.value)if((n==null?void 0:n[s.value])!=null)await n[s.value]();else{const g=i.value;(g==null?void 0:g[s.value])!=null&&await g[s.value]()}o.value=!1}}async function k(){if(!d.value||o.value)return;b()&&await x();const g=i.value;a.value&&(g==null?void 0:g[a.value])!=null&&(await g[a.value](),o.value=!0)}async function E(){await(o.value?x():k())}const m=()=>{const g=b();(!g||g&&f())&&(o.value=g)},h={capture:!1,passive:!0};return B4(n,j4,m,h),B4(()=>ZS(i),j4,m,h),hpe(m,!1),r&&L4(x),{isSupported:d,isFullscreen:o,enter:k,exit:x,toggle:E}}const[wpe,JS]=cpe(()=>{const{state:t}=cv(),e=u.reactive({extensions:t.extensions??[],defaultLang:kS,defaultMarkdownTheme:av,isFullscreen:!1,color:void 0,highlight:void 0}),n=u.computed(()=>e.isFullscreen);function r(){e.isFullscreen=!e.isFullscreen}return u.watchEffect(()=>{e.extensions=t.extensions,e.defaultLang=t.defaultLang,e.defaultMarkdownTheme=t.defaultMarkdownTheme}),{state:e,isFullscreen:n,toggleFullscreen:r}}),F4="[vuetify-pro-tiptap]";class QS{static warn(e){console.warn(`${F4}: ${e}`)}static error(e){console.error(`${F4}: ${e}`)}}function xpe(t){return t=t||new Map,{all:t,on(e,n){const r=t.get(e);r?r.push(n):t.set(e,[n])},off(e,n){const r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit(e,n){let r=t.get(e);r&&r.slice().map(i=>{i(n)}),r=t.get("*"),r&&r.slice().map(i=>{i(e,n)})}}}const Cpe={"editor.remove":"Entfernen","editor.words":"WRTER","editor.characters":"ZEICHEN","editor.default":"Standard","editor.size.small.tooltip":"Klein","editor.size.medium.tooltip":"Mittel","editor.size.large.tooltip":"Gro","editor.bold.tooltip":"Fett","editor.italic.tooltip":"Kursiv","editor.underline.tooltip":"Unterstrichen","editor.strike.tooltip":"Durchgestrichen","editor.color.tooltip":"Farbe","editor.highlight.tooltip":"Hervorheben","editor.heading.tooltip":"berschriften","editor.heading.h1.tooltip":"berschrift 1","editor.heading.h2.tooltip":"berschrift 2","editor.heading.h3.tooltip":"berschrift 3","editor.heading.h4.tooltip":"berschrift 4","editor.heading.h5.tooltip":"berschrift 5","editor.heading.h6.tooltip":"berschrift 6","editor.paragraph.tooltip":"Absatz","editor.textalign.tooltip":"Ausrichten","editor.textalign.left.tooltip":"Links","editor.textalign.center.tooltip":"Zentriert","editor.textalign.right.tooltip":"Rechts","editor.textalign.justify.tooltip":"Blocksatz","editor.fontFamily.tooltip":"Schriftart","editor.fontSize.tooltip":"Schriftgre","editor.superscript.tooltip":"Hochgestellt","editor.subscript.tooltip":"Tiefgestellt","editor.bulletlist.tooltip":"Aufzhlungsliste","editor.orderedlist.tooltip":"Nummerierte Liste","editor.tasklist.tooltip":"Aufgabenliste","editor.indent.tooltip":"Einzug","editor.outdent.tooltip":"Ausrcken","editor.link.tooltip":"Link","editor.link.unlink.tooltip":"Link entfernen","editor.link.open":"Link ffnen","editor.link.dialog.title":"Link einfgen","editor.link.dialog.link":"Link","editor.link.dialog.openInNewTab":"In neuem Tab ffnen","editor.link.dialog.button.apply":"Anwenden","editor.markdownTheme.tooltip":"Thema","editor.image.tooltip":"Bild","editor.image.float.left.tooltip":"Links ausrichten","editor.image.float.none.tooltip":"Keine Ausrichtung","editor.image.float.right.tooltip":"Rechts ausrichten","editor.image.dialog.title":"Bild einfgen","editor.image.dialog.tab.url":"URL","editor.image.dialog.tab.upload":"Hochladen","editor.image.dialog.form.link":"Link","editor.image.dialog.form.alt":"Alt","editor.image.dialog.form.aspectRatio":"Original-Seitenverhltnis beibehalten","editor.image.dialog.form.file":"Datei","editor.image.dialog.form.caption":"Etikett","editor.image.dialog.form.captionDisabled":"Etikett deaktiviert","editor.image.dialog.button.apply":"Anwenden","editor.video.tooltip":"Video","editor.video.dialog.title":"Video einfgen","editor.video.dialog.link":"Link","editor.video.dialog.button.apply":"Anwenden","editor.table.tooltip":"Tabelle","editor.table.menu.insert_table":"Tabelle einfgen","editor.table.menu.insert_table.with_header_row":"Mit Kopfzeile","editor.table.menu.add_column_before":"Spalte davor einfgen","editor.table.menu.add_column_after":"Spalte danach einfgen","editor.table.menu.delete_column":"Spalte lschen","editor.table.menu.add_row_before":"Zeile davor einfgen","editor.table.menu.add_row_after":"Zeile danach einfgen","editor.table.menu.delete_row":"Zeile lschen","editor.table.menu.merge_or_split_cells":"Zellen zusammenfhren oder teilen","editor.table.menu.delete_table":"Tabelle lschen","editor.blockquote.tooltip":"Zitat","editor.horizontalrule.tooltip":"Horizontale Linie","editor.code.tooltip":"Code","editor.codeblock.tooltip":"Codeblock","editor.clear.tooltip":"Formatierung lschen","editor.undo.tooltip":"Rckgngig","editor.redo.tooltip":"Wiederholen","editor.fullscreen.tooltip.fullscreen":"Vollbild","editor.fullscreen.tooltip.exit":"Vollbild beenden"},Spe={"editor.remove":"Remove","editor.words":"WORDS","editor.characters":"CHARACTERS","editor.default":"default","editor.size.small.tooltip":"Small","editor.size.medium.tooltip":"Medium","editor.size.large.tooltip":"Cover","editor.bold.tooltip":"Bold","editor.italic.tooltip":"Italic","editor.underline.tooltip":"Underline","editor.strike.tooltip":"Strike","editor.color.tooltip":"Color","editor.highlight.tooltip":"Highlight","editor.heading.tooltip":"Headings","editor.heading.h1.tooltip":"Heading 1","editor.heading.h2.tooltip":"Heading 2","editor.heading.h3.tooltip":"Heading 3","editor.heading.h4.tooltip":"Heading 4","editor.heading.h5.tooltip":"Heading 5","editor.heading.h6.tooltip":"Heading 6","editor.paragraph.tooltip":"Paragraph","editor.textalign.tooltip":"Align","editor.textalign.left.tooltip":"Left","editor.textalign.center.tooltip":"Center","editor.textalign.right.tooltip":"Right","editor.textalign.justify.tooltip":"Justify","editor.fontFamily.tooltip":"Font family","editor.fontSize.tooltip":"Font size","editor.superscript.tooltip":"Superscript","editor.subscript.tooltip":"Subscript","editor.bulletlist.tooltip":"Bullet List","editor.orderedlist.tooltip":"Ordered List","editor.tasklist.tooltip":"Task List","editor.indent.tooltip":"Indent","editor.outdent.tooltip":"Outdent","editor.link.tooltip":"Link","editor.link.unlink.tooltip":"Unlink","editor.link.open":"Open link","editor.link.dialog.title":"Insert link","editor.link.dialog.link":"link","editor.link.dialog.openInNewTab":"Open in new tab","editor.link.dialog.button.apply":"apply","editor.markdownTheme.tooltip":"Theme","editor.image.tooltip":"Image","editor.image.float.left.tooltip":"Float left","editor.image.float.none.tooltip":"Float none","editor.image.float.right.tooltip":"Float right","editor.image.dialog.title":"Insert image","editor.image.dialog.tab.url":"url","editor.image.dialog.tab.upload":"upload","editor.image.dialog.form.link":"Link","editor.image.dialog.form.alt":"Alt","editor.image.dialog.form.aspectRatio":"Lock original aspect ratio","editor.image.dialog.form.file":"File","editor.image.dialog.form.caption":"Label","editor.image.dialog.form.captionDisabled":"Label disabled","editor.image.dialog.button.apply":"apply","editor.video.tooltip":"Video","editor.video.dialog.title":"Insert video","editor.video.dialog.link":"link","editor.video.dialog.button.apply":"apply","editor.table.tooltip":"Table","editor.table.menu.insert_table":"Insert Table","editor.table.menu.insert_table.with_header_row":"With header row","editor.table.menu.add_column_before":"Add Column Before","editor.table.menu.add_column_after":"Add Column After","editor.table.menu.delete_column":"Delete Column","editor.table.menu.add_row_before":"Add Row Before","editor.table.menu.add_row_after":"Add Row After","editor.table.menu.delete_row":"Delete Row","editor.table.menu.merge_or_split_cells":"Merge Or Split Cells","editor.table.menu.delete_table":"Delete Table","editor.blockquote.tooltip":"Blockquote","editor.horizontalrule.tooltip":"Horizontal Rule","editor.code.tooltip":"Code","editor.codeblock.tooltip":"Code Block","editor.clear.tooltip":"Clear Format","editor.undo.tooltip":"Undo","editor.redo.tooltip":"Redo","editor.fullscreen.tooltip.fullscreen":"Fullscreen","editor.fullscreen.tooltip.exit":"Fullscreen Exit"},kpe={"editor.remove":"Supprimer","editor.words":"MOTS","editor.characters":"CARACTRES","editor.default":"par dfaut","editor.size.small.tooltip":"Petit","editor.size.medium.tooltip":"Moyen","editor.size.large.tooltip":"Couverture","editor.bold.tooltip":"Gras","editor.italic.tooltip":"Italique","editor.underline.tooltip":"Soulign","editor.strike.tooltip":"Barr","editor.color.tooltip":"Couleur","editor.highlight.tooltip":"Surligner","editor.heading.tooltip":"Titres","editor.heading.h1.tooltip":"Titre 1","editor.heading.h2.tooltip":"Titre 2","editor.heading.h3.tooltip":"Titre 3","editor.heading.h4.tooltip":"Titre 4","editor.heading.h5.tooltip":"Titre 5","editor.heading.h6.tooltip":"Titre 6","editor.paragraph.tooltip":"Paragraphe","editor.textalign.tooltip":"Aligner","editor.textalign.left.tooltip":"Gauche","editor.textalign.center.tooltip":"Centre","editor.textalign.right.tooltip":"Droite","editor.textalign.justify.tooltip":"Justifier","editor.fontFamily.tooltip":"Police","editor.fontSize.tooltip":"Taille de police","editor.superscript.tooltip":"Exposant","editor.subscript.tooltip":"Indice","editor.bulletlist.tooltip":"Liste  puces","editor.orderedlist.tooltip":"Liste numrote","editor.tasklist.tooltip":"Liste de tches","editor.indent.tooltip":"Indenter","editor.outdent.tooltip":"Dsindenter","editor.link.tooltip":"Lien","editor.link.unlink.tooltip":"Supprimer le lien","editor.link.open":"Ouvrir le lien","editor.link.dialog.title":"Insrer un lien","editor.link.dialog.link":"lien","editor.link.dialog.openInNewTab":"Ouvrir dans un nouvel onglet","editor.link.dialog.button.apply":"appliquer","editor.markdownTheme.tooltip":"Thme","editor.image.tooltip":"Image","editor.image.float.left.tooltip":"Aligner  gauche","editor.image.float.none.tooltip":"Sans alignement","editor.image.float.right.tooltip":"Aligner  droite","editor.image.dialog.title":"Insrer une image","editor.image.dialog.tab.url":"url","editor.image.dialog.tab.upload":"tlverser","editor.image.dialog.form.link":"Lien","editor.image.dialog.form.alt":"Texte alternatif","editor.image.dialog.form.aspectRatio":"Conserver les proportions","editor.image.dialog.form.file":"Fichier","editor.image.dialog.form.caption":"tiquette","editor.image.dialog.form.captionDisabled":"Libell dsactiv","editor.image.dialog.button.apply":"appliquer","editor.video.tooltip":"Vido","editor.video.dialog.title":"Insrer une vido","editor.video.dialog.link":"lien","editor.video.dialog.button.apply":"appliquer","editor.table.tooltip":"Tableau","editor.table.menu.insert_table":"Insrer un tableau","editor.table.menu.insert_table.with_header_row":"Avec ligne den-tte","editor.table.menu.add_column_before":"Ajouter une colonne avant","editor.table.menu.add_column_after":"Ajouter une colonne aprs","editor.table.menu.delete_column":"Supprimer la colonne","editor.table.menu.add_row_before":"Ajouter une ligne avant","editor.table.menu.add_row_after":"Ajouter une ligne aprs","editor.table.menu.delete_row":"Supprimer la ligne","editor.table.menu.merge_or_split_cells":"Fusionner ou diviser les cellules","editor.table.menu.delete_table":"Supprimer le tableau","editor.blockquote.tooltip":"Citation","editor.horizontalrule.tooltip":"Ligne horizontale","editor.code.tooltip":"Code","editor.codeblock.tooltip":"Bloc de code","editor.clear.tooltip":"Effacer le formatage","editor.undo.tooltip":"Annuler","editor.redo.tooltip":"Rtablir","editor.fullscreen.tooltip.fullscreen":"Plein cran","editor.fullscreen.tooltip.exit":"Quitter le plein cran"},Epe={"editor.remove":"Rimuovi","editor.words":"Parole","editor.characters":"Caratteri","editor.default":"Predefinito","editor.size.small.tooltip":"Piccolo","editor.size.medium.tooltip":"Medio","editor.size.large.tooltip":"Grande","editor.bold.tooltip":"Grassetto","editor.italic.tooltip":"Corsivo","editor.underline.tooltip":"Sottolineato","editor.strike.tooltip":"Barrato","editor.color.tooltip":"Colore","editor.highlight.tooltip":"Evidenzia","editor.heading.tooltip":"Intestazioni","editor.heading.h1.tooltip":"Intestzione 1","editor.heading.h2.tooltip":"Intestzione 2","editor.heading.h3.tooltip":"Intestzione 3","editor.heading.h4.tooltip":"Intestazione 4","editor.heading.h5.tooltip":"Intestazione 5","editor.heading.h6.tooltip":"Intestazione 6","editor.paragraph.tooltip":"Paragrafo","editor.textalign.tooltip":"Allineamento","editor.textalign.left.tooltip":"Sinistra","editor.textalign.center.tooltip":"Centro","editor.textalign.right.tooltip":"Destra","editor.textalign.justify.tooltip":"Giustificato","editor.fontFamily.tooltip":"Tipo carattere","editor.fontSize.tooltip":"Dimensione carattere","editor.superscript.tooltip":"Apice","editor.subscript.tooltip":"Pedice","editor.bulletlist.tooltip":"Elenco puntato","editor.orderedlist.tooltip":"Elenco numerato","editor.tasklist.tooltip":"Elenco attivit","editor.indent.tooltip":"Aumenta rientro","editor.outdent.tooltip":"Riduci rientro","editor.link.tooltip":"Aggiungi collegamento","editor.link.unlink.tooltip":"Rimuovi collegamento","editor.link.open":"Apri collegamento","editor.link.dialog.title":"Inserisci collegamento","editor.link.dialog.link":"Collegamento","editor.link.dialog.openInNewTab":"Apri in una nuova finestra","editor.link.dialog.button.apply":"Applica","editor.markdownTheme.tooltip":"Tema","editor.image.tooltip":"Immagine","editor.image.float.left.tooltip":"Allinea a sinistra","editor.image.float.none.tooltip":"Nessun allineamento","editor.image.float.right.tooltip":"Allinea a destra","editor.image.dialog.title":"Inserisci immagine","editor.image.dialog.tab.url":"URL","editor.image.dialog.tab.upload":"Carica","editor.image.dialog.form.link":"Collegamento","editor.image.dialog.form.alt":"Alt","editor.image.dialog.form.aspectRatio":"Blocca le proporzioni originali","editor.image.dialog.form.file":"File","editor.image.dialog.form.caption":"Etichetta","editor.image.dialog.form.captionDisabled":"Etichetta disabilitata","editor.image.dialog.button.apply":"Applica","editor.video.tooltip":"Video","editor.video.dialog.title":"Inserisci video","editor.video.dialog.link":"Collegamento","editor.video.dialog.button.apply":"Applica","editor.table.tooltip":"Tabella","editor.table.menu.insert_table":"Inserisci tabella","editor.table.menu.insert_table.with_header_row":"Con riga intestazione","editor.table.menu.add_column_before":"Aggiungi colonna prima","editor.table.menu.add_column_after":"Aggiungi colonna dopo","editor.table.menu.delete_column":"Elimina colonna","editor.table.menu.add_row_before":"Aggiungi riga prima","editor.table.menu.add_row_after":"Aggiungi riga dopo","editor.table.menu.delete_row":"Elimina riga","editor.table.menu.merge_or_split_cells":"Unisci o dividi celle","editor.table.menu.delete_table":"Elimina tabella","editor.blockquote.tooltip":"Citazione","editor.horizontalrule.tooltip":"Linea orizzontale","editor.code.tooltip":"Codice","editor.codeblock.tooltip":"Blocco di codice","editor.clear.tooltip":"Rimuovi formattazione","editor.undo.tooltip":"Annulla","editor.redo.tooltip":"Ripristina","editor.fullscreen.tooltip.fullscreen":"Schermo intero","editor.fullscreen.tooltip.exit":"Esci da schermo intero"},Tpe={"editor.remove":"Verwijderen","editor.words":"WOORDEN","editor.characters":"KARAKTERS","editor.default":"standaard","editor.size.small.tooltip":"Klein","editor.size.medium.tooltip":"Middelmatig","editor.size.large.tooltip":"Cover","editor.bold.tooltip":"Dikgedrukt","editor.italic.tooltip":"Cursief","editor.underline.tooltip":"Onderstreept","editor.strike.tooltip":"Doorgetrokken","editor.color.tooltip":"Kleur","editor.highlight.tooltip":"Markeren","editor.heading.tooltip":"Koppen","editor.heading.h1.tooltip":"Kop 1","editor.heading.h2.tooltip":"Kop 2","editor.heading.h3.tooltip":"Kop 3","editor.heading.h4.tooltip":"Kop 4","editor.heading.h5.tooltip":"Kop 5","editor.heading.h6.tooltip":"Kop 6","editor.paragraph.tooltip":"Paragraaf","editor.textalign.tooltip":"Uitlijnen","editor.textalign.left.tooltip":"Links","editor.textalign.center.tooltip":"Midden","editor.textalign.right.tooltip":"Rechts","editor.textalign.justify.tooltip":"Justify","editor.fontFamily.tooltip":"Font familie","editor.fontSize.tooltip":"Font grootte","editor.superscript.tooltip":"Superscript","editor.subscript.tooltip":"Subscript","editor.bulletlist.tooltip":"Ongenummerde lijst","editor.orderedlist.tooltip":"Genummerde lijst","editor.tasklist.tooltip":"Takenlijst","editor.indent.tooltip":"Inspringing vergroten","editor.outdent.tooltip":"Inspringing verkleinen","editor.link.tooltip":"Link","editor.link.unlink.tooltip":"Link verwijderen","editor.link.open":"Link openen","editor.link.dialog.title":"Link invoegen","editor.link.dialog.link":"link","editor.link.dialog.openInNewTab":"Openen in nieuw tabblad","editor.link.dialog.button.apply":"Toepassen","editor.markdownTheme.tooltip":"Thema","editor.image.tooltip":"Afbeelding","editor.image.float.left.tooltip":"Zweef links","editor.image.float.none.tooltip":"Niet zweven","editor.image.float.right.tooltip":"Zweef rechts","editor.image.dialog.title":"Afbeelding invoegen","editor.image.dialog.tab.url":"URL","editor.image.dialog.tab.upload":"Upload","editor.image.dialog.form.link":"Link","editor.image.dialog.form.alt":"Alt","editor.image.dialog.form.aspectRatio":"Originele aspect ratio vastzetten","editor.image.dialog.form.file":"Bestand","editor.image.dialog.form.caption":"Label","editor.image.dialog.form.captionDisabled":"Label uitgeschakeld","editor.image.dialog.button.apply":"Toepassen","editor.video.tooltip":"Video","editor.video.dialog.title":"Video invoegen","editor.video.dialog.link":"link","editor.video.dialog.button.apply":"Toepassen","editor.table.tooltip":"Tabel","editor.table.menu.insert_table":"Tabel invoegen","editor.table.menu.insert_table.with_header_row":"Met kop rij","editor.table.menu.add_column_before":"Kolom ervoor invoegen","editor.table.menu.add_column_after":"Kolom erna invoegen","editor.table.menu.delete_column":"Kolom verwijderen","editor.table.menu.add_row_before":"Rij ervoor invoegen","editor.table.menu.add_row_after":"Rij erna invoegen","editor.table.menu.delete_row":"Rij verwijderen","editor.table.menu.merge_or_split_cells":"Cellen samenvoegen/splitsen","editor.table.menu.delete_table":"Tabel verwijderen","editor.blockquote.tooltip":"Citaatblok","editor.horizontalrule.tooltip":"Horizontale lijn","editor.code.tooltip":"Code","editor.codeblock.tooltip":"Code blok","editor.clear.tooltip":"Formattering verwijderen","editor.undo.tooltip":"Stap terug","editor.redo.tooltip":"Stap verder","editor.fullscreen.tooltip.fullscreen":"Volledig scherm","editor.fullscreen.tooltip.exit":"Volledig scherm verlaten"},Mpe={"editor.remove":"Remover","editor.words":"Palavras","editor.characters":"Caracteres","editor.default":"Padro","editor.size.small.tooltip":"Pequeno","editor.size.medium.tooltip":"Mdio","editor.size.large.tooltip":"Grande","editor.bold.tooltip":"Negrito","editor.italic.tooltip":"Itlico","editor.underline.tooltip":"Sublinhado","editor.strike.tooltip":"Tachado","editor.color.tooltip":"Cor","editor.highlight.tooltip":"Destacar","editor.heading.tooltip":"Cabealhos","editor.heading.h1.tooltip":"Cabealho 1","editor.heading.h2.tooltip":"Cabealho 2","editor.heading.h3.tooltip":"Cabealho 3","editor.heading.h4.tooltip":"Cabealho 4","editor.heading.h5.tooltip":"Cabealho 5","editor.heading.h6.tooltip":"Cabealho 6","editor.paragraph.tooltip":"Pargrafo","editor.textalign.tooltip":"Alinhamento","editor.textalign.left.tooltip":"Esquerda","editor.textalign.center.tooltip":"Centro","editor.textalign.right.tooltip":"Direita","editor.textalign.justify.tooltip":"Justificado","editor.fontFamily.tooltip":"Fonte","editor.fontSize.tooltip":"Tamanho da fonte","editor.superscript.tooltip":"Sobrescrito","editor.subscript.tooltip":"Subscrito","editor.bulletlist.tooltip":"Lista com marcadores","editor.orderedlist.tooltip":"Lista numerada","editor.tasklist.tooltip":"Lista de tarefas","editor.indent.tooltip":"Aumentar recuo","editor.outdent.tooltip":"Diminuir recuo","editor.link.tooltip":"Adicionar link","editor.link.unlink.tooltip":"Remover link","editor.link.open":"Abrir link","editor.link.dialog.title":"Inserir link","editor.link.dialog.link":"Link","editor.link.dialog.openInNewTab":"Abrir em nova aba","editor.link.dialog.button.apply":"Aplicar","editor.markdownTheme.tooltip":"Tema","editor.image.tooltip":"Imagem","editor.image.float.left.tooltip":"Alinhar  esquerda","editor.image.float.none.tooltip":"Sem alinhamento","editor.image.float.right.tooltip":"Alinhar  direita","editor.image.dialog.title":"Inserir imagem","editor.image.dialog.tab.url":"URL","editor.image.dialog.tab.upload":"Carregar","editor.image.dialog.form.link":"Link","editor.image.dialog.form.alt":"Texto alternativo","editor.image.dialog.form.aspectRatio":"Bloquear proporo original","editor.image.dialog.form.file":"Arquivo","editor.image.dialog.form.caption":"Legenda","editor.image.dialog.form.captionDisabled":"Sem legenda","editor.image.dialog.button.apply":"Aplicar","editor.video.tooltip":"Vdeo","editor.video.dialog.title":"Inserir vdeo","editor.video.dialog.link":"Link","editor.video.dialog.button.apply":"Aplicar","editor.table.tooltip":"Tabela","editor.table.menu.insert_table":"Inserir tabela","editor.table.menu.insert_table.with_header_row":"Com linha de cabealho","editor.table.menu.add_column_before":"Adicionar coluna antes","editor.table.menu.add_column_after":"Adicionar coluna depois","editor.table.menu.delete_column":"Excluir coluna","editor.table.menu.add_row_before":"Adicionar linha antes","editor.table.menu.add_row_after":"Adicionar linha depois","editor.table.menu.delete_row":"Excluir linha","editor.table.menu.merge_or_split_cells":"Mesclar ou dividir clulas","editor.table.menu.delete_table":"Excluir tabela","editor.blockquote.tooltip":"Citao","editor.horizontalrule.tooltip":"Linha horizontal","editor.code.tooltip":"Cdigo","editor.codeblock.tooltip":"Bloco de cdigo","editor.clear.tooltip":"Remover formatao","editor.undo.tooltip":"Desfazer","editor.redo.tooltip":"Refazer","editor.fullscreen.tooltip.fullscreen":"Tela cheia","editor.fullscreen.tooltip.exit":"Sair da tela cheia"},Ipe={"editor.remove":"Kaldr","editor.words":"Kelime","editor.characters":"Karakter","editor.default":"varsaylan","editor.size.small.tooltip":"Kk","editor.size.medium.tooltip":"Orta","editor.size.large.tooltip":"Kapak","editor.bold.tooltip":"Kaln","editor.italic.tooltip":"talik","editor.underline.tooltip":"Alt izili","editor.strike.tooltip":"st izili","editor.color.tooltip":"Renk","editor.highlight.tooltip":"Vurgula","editor.heading.tooltip":"Balklar","editor.heading.h1.tooltip":"Balk 1","editor.heading.h2.tooltip":"Balk 2","editor.heading.h3.tooltip":"Balk 3","editor.heading.h4.tooltip":"Balk 4","editor.heading.h5.tooltip":"Balk 5","editor.heading.h6.tooltip":"Balk 6","editor.paragraph.tooltip":"Paragraf","editor.textalign.tooltip":"Hizala","editor.textalign.left.tooltip":"Sola","editor.textalign.center.tooltip":"Ortala","editor.textalign.right.tooltip":"Saa","editor.textalign.justify.tooltip":"ki Yana Yasla","editor.fontFamily.tooltip":"Yaz Tipi","editor.fontSize.tooltip":"Yaz Boyutu","editor.superscript.tooltip":"st Simge","editor.subscript.tooltip":"Alt Simge","editor.bulletlist.tooltip":"Noktal Liste","editor.orderedlist.tooltip":"Numaral Liste","editor.tasklist.tooltip":"Grev Listesi","editor.indent.tooltip":"Girinti","editor.outdent.tooltip":"knt","editor.link.tooltip":"Balant","editor.link.unlink.tooltip":"Balanty Kaldr","editor.link.open":"Balanty A","editor.link.dialog.title":"Balant Ekle","editor.link.dialog.link":"balant","editor.link.dialog.openInNewTab":"Yeni sekmede a","editor.link.dialog.button.apply":"Uygula","editor.markdownTheme.tooltip":"Tema","editor.image.tooltip":"Resim","editor.image.float.left.tooltip":"Sola Yasla","editor.image.float.none.tooltip":"Hizalamay Kaldr","editor.image.float.right.tooltip":"Saa Yasla","editor.image.dialog.title":"Resim Ekle","editor.image.dialog.tab.url":"URL","editor.image.dialog.tab.upload":"Ykle","editor.image.dialog.form.link":"Balant","editor.image.dialog.form.alt":"Alternatif Metin","editor.image.dialog.form.aspectRatio":"Orijinal En/Boy Orann Koru","editor.image.dialog.form.file":"Dosya","editor.image.dialog.form.caption":"Label","editor.image.dialog.form.captionDisabled":"","editor.image.dialog.button.apply":"Uygula","editor.video.tooltip":"Video","editor.video.dialog.title":"Video Ekle","editor.video.dialog.link":"balant","editor.video.dialog.button.apply":"Uygula","editor.table.tooltip":"Tablo","editor.table.menu.insert_table":"Tablo Ekle","editor.table.menu.insert_table.with_header_row":"Balk Satryla","editor.table.menu.add_column_before":"nce Stun Ekle","editor.table.menu.add_column_after":"Sonra Stun Ekle","editor.table.menu.delete_column":"Stunu Sil","editor.table.menu.add_row_before":"nce Satr Ekle","editor.table.menu.add_row_after":"Sonra Satr Ekle","editor.table.menu.delete_row":"Satr Sil","editor.table.menu.merge_or_split_cells":"Hcreleri Birletir veya Ayr","editor.table.menu.delete_table":"Tabloyu Sil","editor.blockquote.tooltip":"Alnt","editor.horizontalrule.tooltip":"Yatay izgi","editor.code.tooltip":"Kod","editor.codeblock.tooltip":"Kod Blou","editor.clear.tooltip":"Biimlendirmeyi Temizle","editor.undo.tooltip":"Geri Al","editor.redo.tooltip":"leri Al","editor.fullscreen.tooltip.fullscreen":"Tam Ekran","editor.fullscreen.tooltip.exit":"Tam Ekrandan k"},Ope={"editor.remove":"","editor.words":"","editor.characters":"","editor.default":"","editor.size.small.tooltip":"","editor.size.medium.tooltip":"","editor.size.large.tooltip":"","editor.bold.tooltip":"","editor.italic.tooltip":"","editor.underline.tooltip":"","editor.strike.tooltip":"","editor.color.tooltip":"","editor.highlight.tooltip":"","editor.heading.tooltip":"","editor.heading.h1.tooltip":" 1","editor.heading.h2.tooltip":" 2","editor.heading.h3.tooltip":" 3","editor.heading.h4.tooltip":" 4","editor.heading.h5.tooltip":" 5","editor.heading.h6.tooltip":" 6","editor.paragraph.tooltip":"","editor.textalign.tooltip":"","editor.textalign.left.tooltip":"","editor.textalign.center.tooltip":"","editor.textalign.right.tooltip":"","editor.textalign.justify.tooltip":"","editor.fontFamily.tooltip":"","editor.fontSize.tooltip":"","editor.superscript.tooltip":"","editor.subscript.tooltip":"","editor.bulletlist.tooltip":"","editor.orderedlist.tooltip":"","editor.tasklist.tooltip":"","editor.indent.tooltip":"","editor.outdent.tooltip":"","editor.link.tooltip":"","editor.link.unlink.tooltip":"","editor.link.open":"","editor.link.dialog.title":"","editor.link.dialog.link":"","editor.link.dialog.openInNewTab":"","editor.link.dialog.button.apply":"","editor.markdownTheme.tooltip":"","editor.image.tooltip":"","editor.image.float.left.tooltip":"","editor.image.float.none.tooltip":"","editor.image.float.right.tooltip":"","editor.image.dialog.title":"","editor.image.dialog.tab.url":"","editor.image.dialog.tab.upload":"","editor.image.dialog.form.link":"","editor.image.dialog.form.alt":"","editor.image.dialog.form.aspectRatio":"","editor.image.dialog.form.file":"","editor.image.dialog.form.caption":"","editor.image.dialog.form.captionDisabled":"","editor.image.dialog.button.apply":"","editor.video.tooltip":"","editor.video.dialog.title":"","editor.video.dialog.link":"","editor.video.dialog.button.apply":"","editor.table.tooltip":"","editor.table.menu.insert_table":"","editor.table.menu.insert_table.with_header_row":"","editor.table.menu.add_column_before":"","editor.table.menu.add_column_after":"","editor.table.menu.delete_column":"","editor.table.menu.add_row_before":"","editor.table.menu.add_row_after":"","editor.table.menu.delete_row":"","editor.table.menu.merge_or_split_cells":"","editor.table.menu.delete_table":"","editor.blockquote.tooltip":"","editor.horizontalrule.tooltip":"","editor.code.tooltip":"","editor.codeblock.tooltip":"","editor.clear.tooltip":"","editor.undo.tooltip":"","editor.redo.tooltip":"","editor.fullscreen.tooltip.fullscreen":"","editor.fullscreen.tooltip.exit":""},Ape={nl:Tpe,tr:Ipe,zhHans:Ope,en:Spe,de:Cpe,fr:kpe,it:Epe,pt:Mpe},_pe={lang:kS,fallbackLang:kS,message:Ape};class Dpe{constructor(){dP(this,"emitter",xpe()),dP(this,"_locale",_pe)}get lang(){return this._locale.lang}set lang(e){this.isLangSupported(e)?this._locale.lang=e:(QS.warn(`Can't find the current language "${e}", Using fallback language "${this._locale.fallbackLang}" instead.`),this._locale.lang=this._locale.fallbackLang),this.emitter.emit("lang",this._locale.lang)}get fallbackLang(){return this._locale.fallbackLang}set fallbackLang(e){if(!this.isLangSupported(e)){QS.warn(`Can't find the fallback language "${e}", Using language "${this._locale.fallbackLang}" by default`);return}this._locale.fallbackLang=e}get message(){return this._locale.message}set message(e){this._locale.message=e}loadLangMessage(e){return this.message[e]||{}}isLangSupported(e){return Object.keys(this.message).includes(e)}setLang(e){this.lang=e}setFallbackLang(e){this.fallbackLang=e}registerWatchLang(e){return this.emitter.on("lang",e),{unsubscribe:()=>this.emitter.off("lang",e)}}setMessage(e,n){this.message[e]=n}buildI18nHandler(e){const n=e||this.lang,r=this.loadLangMessage(n),i=this.loadLangMessage(this.fallbackLang);return o=>r[o]||i[o]||o}}const Fa=new Dpe,Is=()=>{const t=u.ref(Fa.lang),e=u.computed(()=>Fa.buildI18nHandler(u.unref(t)));return u.watchEffect(n=>{const r=Fa.registerWatchLang(i=>{t.value=i});n(()=>r.unsubscribe())}),{lang:t,t:e}},H4=["top","right","bottom","left"],z4=["start","end"],$4=H4.reduce((t,e)=>t.concat(e,e+"-"+z4[0],e+"-"+z4[1]),[]),Ha=Math.min,Di=Math.max,xv=Math.round,za=t=>({x:t,y:t}),Npe={left:"right",right:"left",bottom:"top",top:"bottom"},Ppe={start:"end",end:"start"};function VS(t,e,n){return Di(t,Ha(e,n))}function Os(t,e){return typeof t=="function"?t(e):t}function No(t){return t.split("-")[0]}function sa(t){return t.split("-")[1]}function U4(t){return t==="x"?"y":"x"}function qS(t){return t==="y"?"height":"width"}const Lpe=new Set(["top","bottom"]);function $a(t){return Lpe.has(No(t))?"y":"x"}function ek(t){return U4($a(t))}function W4(t,e,n){n===void 0&&(n=!1);const r=sa(t),i=ek(t),o=qS(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Sv(a)),[a,Sv(a)]}function Rpe(t){const e=Sv(t);return[Cv(t),e,Cv(e)]}function Cv(t){return t.replace(/start|end/g,e=>Ppe[e])}const Y4=["left","right"],G4=["right","left"],Bpe=["top","bottom"],jpe=["bottom","top"];function Fpe(t,e,n){switch(t){case"top":case"bottom":return n?e?G4:Y4:e?Y4:G4;case"left":case"right":return e?Bpe:jpe;default:return[]}}function Hpe(t,e,n,r){const i=sa(t);let o=Fpe(No(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(Cv)))),o}function Sv(t){return t.replace(/left|right|bottom|top/g,e=>Npe[e])}function zpe(t){return{top:0,right:0,bottom:0,left:0,...t}}function tk(t){return typeof t!="number"?zpe(t):{top:t,right:t,bottom:t,left:t}}function qu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function X4(t,e,n){let{reference:r,floating:i}=t;const o=$a(e),a=ek(e),s=qS(a),c=No(e),l=o==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,b=r[s]/2-i[s]/2;let x;switch(c){case"top":x={x:d,y:r.y-i.height};break;case"bottom":x={x:d,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-i.width,y:f};break;default:x={x:r.x,y:r.y}}switch(sa(e)){case"start":x[a]-=b*(n&&l?-1:1);break;case"end":x[a]+=b*(n&&l?-1:1);break}return x}const $pe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=X4(l,r,c),b=r,x={},k=0;for(let E=0;E<s.length;E++){const{name:m,fn:h}=s[E],{x:g,y:w,data:p,reset:v}=await h({x:d,y:f,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:l,platform:a,elements:{reference:t,floating:e}});d=g??d,f=w??f,x={...x,[m]:{...x[m],...p}},v&&k<=50&&(k++,typeof v=="object"&&(v.placement&&(b=v.placement),v.rects&&(l=v.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):v.rects),{x:d,y:f}=X4(l,b,c)),E=-1)}return{x:d,y:f,placement:b,strategy:i,middlewareData:x}};async function ed(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:b=!1,padding:x=0}=Os(e,t),k=tk(x),E=s[b?f==="floating"?"reference":"floating":f],m=qu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:d,strategy:c})),h=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,g=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),w=await(o.isElement==null?void 0:o.isElement(g))?await(o.getScale==null?void 0:o.getScale(g))||{x:1,y:1}:{x:1,y:1},p=qu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:h,offsetParent:g,strategy:c}):h);return{top:(m.top-p.top+k.top)/w.y,bottom:(p.bottom-m.bottom+k.bottom)/w.y,left:(m.left-p.left+k.left)/w.x,right:(p.right-m.right+k.right)/w.x}}const Upe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=e,{element:l,padding:d=0}=Os(t,e)||{};if(l==null)return{};const f=tk(d),b={x:n,y:r},x=ek(i),k=qS(x),E=await a.getDimensions(l),m=x==="y",h=m?"top":"left",g=m?"bottom":"right",w=m?"clientHeight":"clientWidth",p=o.reference[k]+o.reference[x]-b[x]-o.floating[k],v=b[x]-o.reference[x],y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let S=y?y[w]:0;(!S||!await(a.isElement==null?void 0:a.isElement(y)))&&(S=s.floating[w]||o.floating[k]);const T=p/2-v/2,C=S/2-E[k]/2-1,M=Ha(f[h],C),A=Ha(f[g],C),P=M,L=S-E[k]-A,R=S/2-E[k]/2+T,j=VS(P,R,L),z=!c.arrow&&sa(i)!=null&&R!==j&&o.reference[k]/2-(R<P?M:A)-E[k]/2<0,$=z?R<P?R-P:R-L:0;return{[x]:b[x]+$,data:{[x]:j,centerOffset:R-j-$,...z&&{alignmentOffset:$}},reset:z}}});function Wpe(t,e,n){return(t?[...n.filter(r=>sa(r)===t),...n.filter(r=>sa(r)!==t)]:n.filter(r=>No(r)===r)).filter(r=>t?sa(r)===t||(e?Cv(r)!==r:!1):!0)}const Ype=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:a,placement:s,platform:c,elements:l}=e,{crossAxis:d=!1,alignment:f,allowedPlacements:b=$4,autoAlignment:x=!0,...k}=Os(t,e),E=f!==void 0||b===$4?Wpe(f||null,x,b):b,m=await ed(e,k),h=((n=a.autoPlacement)==null?void 0:n.index)||0,g=E[h];if(g==null)return{};const w=W4(g,o,await(c.isRTL==null?void 0:c.isRTL(l.floating)));if(s!==g)return{reset:{placement:E[0]}};const p=[m[No(g)],m[w[0]],m[w[1]]],v=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:p}],y=E[h+1];if(y)return{data:{index:h+1,overflows:v},reset:{placement:y}};const S=v.map(C=>{const M=sa(C.placement);return[C.placement,M&&d?C.overflows.slice(0,2).reduce((A,P)=>A+P,0):C.overflows[0],C.overflows]}).sort((C,M)=>C[1]-M[1]),T=((i=S.filter(C=>C[2].slice(0,sa(C[0])?2:3).every(M=>M<=0))[0])==null?void 0:i[0])||S[0][0];return T!==s?{data:{index:h+1,overflows:v},reset:{placement:T}}:{}}}},Gpe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:E=!0,...m}=Os(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const h=No(i),g=$a(s),w=No(s)===s,p=await(c.isRTL==null?void 0:c.isRTL(l.floating)),v=b||(w||!E?[Sv(s)]:Rpe(s)),y=k!=="none";!b&&y&&v.push(...Hpe(s,E,k,p));const S=[s,...v],T=await ed(e,m),C=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&C.push(T[h]),f){const R=W4(i,a,p);C.push(T[R[0]],T[R[1]])}if(M=[...M,{placement:i,overflows:C}],!C.every(R=>R<=0)){var A,P;const R=(((A=o.flip)==null?void 0:A.index)||0)+1,j=S[R];if(j&&(!(f==="alignment"&&g!==$a(j))||M.every($=>$a($.placement)===g?$.overflows[0]>0:!0)))return{data:{index:R,overflows:M},reset:{placement:j}};let z=(P=M.filter($=>$.overflows[0]<=0).sort(($,Y)=>$.overflows[1]-Y.overflows[1])[0])==null?void 0:P.placement;if(!z)switch(x){case"bestFit":{var L;const $=(L=M.filter(Y=>{if(y){const ae=$a(Y.placement);return ae===g||ae==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ae=>ae>0).reduce((ae,K)=>ae+K,0)]).sort((Y,ae)=>Y[1]-ae[1])[0])==null?void 0:L[0];$&&(z=$);break}case"initialPlacement":z=s;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function K4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Z4(t){return H4.some(e=>t[e]>=0)}const Xpe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Os(t,e);switch(r){case"referenceHidden":{const o=await ed(e,{...i,elementContext:"reference"}),a=K4(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Z4(a)}}}case"escaped":{const o=await ed(e,{...i,altBoundary:!0}),a=K4(o,n.floating);return{data:{escapedOffsets:a,escaped:Z4(a)}}}default:return{}}}}};function J4(t){const e=Ha(...t.map(o=>o.left)),n=Ha(...t.map(o=>o.top)),r=Di(...t.map(o=>o.right)),i=Di(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function Kpe(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>qu(J4(i)))}const Zpe=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:a}=e,{padding:s=2,x:c,y:l}=Os(t,e),d=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=Kpe(d),b=qu(J4(d)),x=tk(s);function k(){if(f.length===2&&f[0].left>f[1].right&&c!=null&&l!=null)return f.find(m=>c>m.left-x.left&&c<m.right+x.right&&l>m.top-x.top&&l<m.bottom+x.bottom)||b;if(f.length>=2){if($a(n)==="y"){const M=f[0],A=f[f.length-1],P=No(n)==="top",L=M.top,R=A.bottom,j=P?M.left:A.left,z=P?M.right:A.right,$=z-j,Y=R-L;return{top:L,bottom:R,left:j,right:z,width:$,height:Y,x:j,y:L}}const m=No(n)==="left",h=Di(...f.map(M=>M.right)),g=Ha(...f.map(M=>M.left)),w=f.filter(M=>m?M.left===g:M.right===h),p=w[0].top,v=w[w.length-1].bottom,y=g,S=h,T=S-y,C=v-p;return{top:p,bottom:v,left:y,right:S,width:T,height:C,x:y,y:p}}return b}const E=await o.getElementRects({reference:{getBoundingClientRect:k},floating:r.floating,strategy:a});return i.reference.x!==E.reference.x||i.reference.y!==E.reference.y||i.reference.width!==E.reference.width||i.reference.height!==E.reference.height?{reset:{rects:E}}:{}}}},Jpe=new Set(["left","top"]);async function Qpe(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=No(n),s=sa(n),c=$a(n)==="y",l=Jpe.has(a)?-1:1,d=o&&c?-1:1,f=Os(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:k}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof k=="number"&&(x=s==="end"?k*-1:k),c?{x:x*d,y:b*l}:{x:b*l,y:x*d}}const Vpe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,c=await Qpe(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},qpe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:h,y:g}=m;return{x:h,y:g}}},...c}=Os(t,e),l={x:n,y:r},d=await ed(e,c),f=$a(No(i)),b=U4(f);let x=l[b],k=l[f];if(o){const m=b==="y"?"top":"left",h=b==="y"?"bottom":"right",g=x+d[m],w=x-d[h];x=VS(g,x,w)}if(a){const m=f==="y"?"top":"left",h=f==="y"?"bottom":"right",g=k+d[m],w=k-d[h];k=VS(g,k,w)}const E=s.fn({...e,[b]:x,[f]:k});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:o,[f]:a}}}}}},eme=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:c=()=>{},...l}=Os(t,e),d=await ed(e,l),f=No(i),b=sa(i),x=$a(i)==="y",{width:k,height:E}=o.floating;let m,h;f==="top"||f==="bottom"?(m=f,h=b===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(h=f,m=b==="end"?"top":"bottom");const g=E-d.top-d.bottom,w=k-d.left-d.right,p=Ha(E-d[m],g),v=Ha(k-d[h],w),y=!e.middlewareData.shift;let S=p,T=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=g),y&&!b){const M=Di(d.left,0),A=Di(d.right,0),P=Di(d.top,0),L=Di(d.bottom,0);x?T=k-2*(M!==0||A!==0?M+A:Di(d.left,d.right)):S=E-2*(P!==0||L!==0?P+L:Di(d.top,d.bottom))}await c({...e,availableWidth:T,availableHeight:S});const C=await a.getDimensions(s.floating);return k!==C.width||E!==C.height?{reset:{rects:!0}}:{}}}};function kv(){return typeof window<"u"}function td(t){return Q4(t)?(t.nodeName||"").toLowerCase():"#document"}function ho(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function As(t){var e;return(e=(Q4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Q4(t){return kv()?t instanceof Node||t instanceof ho(t).Node:!1}function la(t){return kv()?t instanceof Element||t instanceof ho(t).Element:!1}function Ua(t){return kv()?t instanceof HTMLElement||t instanceof ho(t).HTMLElement:!1}function V4(t){return!kv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ho(t).ShadowRoot}const tme=new Set(["inline","contents"]);function ch(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ca(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!tme.has(i)}const nme=new Set(["table","td","th"]);function rme(t){return nme.has(td(t))}const ime=[":popover-open",":modal"];function Ev(t){return ime.some(e=>{try{return t.matches(e)}catch{return!1}})}const ome=["transform","translate","scale","rotate","perspective"],ame=["transform","translate","scale","rotate","perspective","filter"],sme=["paint","layout","strict","content"];function nk(t){const e=rk(),n=la(t)?ca(t):t;return ome.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ame.some(r=>(n.willChange||"").includes(r))||sme.some(r=>(n.contain||"").includes(r))}function lme(t){let e=Il(t);for(;Ua(e)&&!nd(e);){if(nk(e))return e;if(Ev(e))return null;e=Il(e)}return null}function rk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const cme=new Set(["html","body","#document"]);function nd(t){return cme.has(td(t))}function ca(t){return ho(t).getComputedStyle(t)}function Tv(t){return la(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Il(t){if(td(t)==="html")return t;const e=t.assignedSlot||t.parentNode||V4(t)&&t.host||As(t);return V4(e)?e.host:e}function q4(t){const e=Il(t);return nd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ua(e)&&ch(e)?e:q4(e)}function e5(t,e,n){var r;e===void 0&&(e=[]);const i=q4(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=ho(i);return o?(ik(a),e.concat(a,a.visualViewport||[],ch(i)?i:[],[])):e.concat(i,e5(i,[]))}function ik(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function t5(t){const e=ca(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ua(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=xv(n)!==o||xv(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function n5(t){return la(t)?t:t.contextElement}function rd(t){const e=n5(t);if(!Ua(e))return za(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=t5(e);let a=(o?xv(n.width):n.width)/r,s=(o?xv(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const ume=za(0);function r5(t){const e=ho(t);return!rk()||!e.visualViewport?ume:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dme(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ho(t)?!1:e}function uh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=n5(t);let a=za(1);e&&(r?la(r)&&(a=rd(r)):a=rd(t));const s=dme(o,n,r)?r5(o):za(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(o){const b=ho(o),x=r&&la(r)?ho(r):r;let k=b,E=ik(k);for(;E&&r&&x!==k;){const m=rd(E),h=E.getBoundingClientRect(),g=ca(E),w=h.left+(E.clientLeft+parseFloat(g.paddingLeft))*m.x,p=h.top+(E.clientTop+parseFloat(g.paddingTop))*m.y;c*=m.x,l*=m.y,d*=m.x,f*=m.y,c+=w,l+=p,k=ho(E),E=ik(k)}}return qu({width:d,height:f,x:c,y:l})}function ok(t,e){const n=Tv(t).scrollLeft;return e?e.left+n:uh(As(t)).left+n}function i5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:ok(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function fme(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=As(r),s=e?Ev(e.floating):!1;if(r===a||s&&o)return n;let c={scrollLeft:0,scrollTop:0},l=za(1);const d=za(0),f=Ua(r);if((f||!f&&!o)&&((td(r)!=="body"||ch(a))&&(c=Tv(r)),Ua(r))){const x=uh(r);l=rd(r),d.x=x.x+r.clientLeft,d.y=x.y+r.clientTop}const b=a&&!f&&!o?i5(a,c,!0):za(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+d.x+b.x,y:n.y*l.y-c.scrollTop*l.y+d.y+b.y}}function hme(t){return Array.from(t.getClientRects())}function pme(t){const e=As(t),n=Tv(t),r=t.ownerDocument.body,i=Di(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Di(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ok(t);const s=-n.scrollTop;return ca(r).direction==="rtl"&&(a+=Di(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function mme(t,e){const n=ho(t),r=As(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const l=rk();(!l||l&&e==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}const gme=new Set(["absolute","fixed"]);function vme(t,e){const n=uh(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Ua(t)?rd(t):za(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:a,height:s,x:c,y:l}}function o5(t,e,n){let r;if(e==="viewport")r=mme(t,n);else if(e==="document")r=pme(As(t));else if(la(e))r=vme(e,n);else{const i=r5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return qu(r)}function a5(t,e){const n=Il(t);return n===e||!la(n)||nd(n)?!1:ca(n).position==="fixed"||a5(n,e)}function yme(t,e){const n=e.get(t);if(n)return n;let r=e5(t,[]).filter(s=>la(s)&&td(s)!=="body"),i=null;const o=ca(t).position==="fixed";let a=o?Il(t):t;for(;la(a)&&!nd(a);){const s=ca(a),c=nk(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&i&&gme.has(i.position)||ch(a)&&!c&&a5(t,a))?r=r.filter(l=>l!==a):i=s,a=Il(a)}return e.set(t,r),r}function bme(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Ev(e)?[]:yme(e,this._c):[].concat(n),r],a=o[0],s=o.reduce((c,l)=>{const d=o5(e,l,i);return c.top=Di(d.top,c.top),c.right=Ha(d.right,c.right),c.bottom=Ha(d.bottom,c.bottom),c.left=Di(d.left,c.left),c},o5(e,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function wme(t){const{width:e,height:n}=t5(t);return{width:e,height:n}}function xme(t,e,n){const r=Ua(e),i=As(e),o=n==="fixed",a=uh(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const c=za(0);function l(){c.x=ok(i)}if(r||!r&&!o)if((td(e)!=="body"||ch(i))&&(s=Tv(e)),r){const x=uh(e,!0,o,e);c.x=x.x+e.clientLeft,c.y=x.y+e.clientTop}else i&&l();o&&!r&&i&&l();const d=i&&!r&&!o?i5(i,s):za(0),f=a.left+s.scrollLeft-c.x-d.x,b=a.top+s.scrollTop-c.y-d.y;return{x:f,y:b,width:a.width,height:a.height}}function ak(t){return ca(t).position==="static"}function s5(t,e){if(!Ua(t)||ca(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return As(t)===n&&(n=n.ownerDocument.body),n}function l5(t,e){const n=ho(t);if(Ev(t))return n;if(!Ua(t)){let i=Il(t);for(;i&&!nd(i);){if(la(i)&&!ak(i))return i;i=Il(i)}return n}let r=s5(t,e);for(;r&&rme(r)&&ak(r);)r=s5(r,e);return r&&nd(r)&&ak(r)&&!nk(r)?n:r||lme(t)||n}const Cme=async function(t){const e=this.getOffsetParent||l5,n=this.getDimensions,r=await n(t.floating);return{reference:xme(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Sme(t){return ca(t).direction==="rtl"}const kme={convertOffsetParentRelativeRectToViewportRelativeRect:fme,getDocumentElement:As,getClippingRect:bme,getOffsetParent:l5,getElementRects:Cme,getClientRects:hme,getDimensions:wme,getScale:rd,isElement:la,isRTL:Sme},c5=Vpe,u5=Ype,d5=qpe,f5=Gpe,h5=eme,p5=Xpe,m5=Upe,g5=Zpe,v5=(t,e,n)=>{const r=new Map,i={platform:kme,...n},o={...i.platform,_c:r};return $pe(t,e,{...i,platform:o})};var sk,lk;if(typeof WeakMap<"u"){let t=new WeakMap;sk=e=>t.get(e),lk=(e,n)=>(t.set(e,n),n)}else{const t=[];let e=0;sk=n=>{for(let r=0;r<t.length;r+=2)if(t[r]==n)return t[r+1]},lk=(n,r)=>(e==10&&(e=0),t[e++]=n,t[e++]=r)}var cr=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,a=i+1;for(let s=1;o<this.width&&this.map[e+s]==n;s++)o++;for(let s=1;a<this.height&&this.map[e+this.width*s]==n;s++)a++;return{left:r,top:i,right:o,bottom:a}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:a}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:a==this.height)?null:this.map[r+this.width*(n<0?o-1:a)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:a,right:s,top:c,bottom:l}=this.findCell(e);return{left:Math.min(n,a),top:Math.min(i,c),right:Math.max(r,s),bottom:Math.max(o,l)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,a=this.map[o];n[a]||(n[a]=!0,!(i==t.left&&i&&this.map[o-1]==a||r==t.top&&r&&this.map[o-this.width]==a)&&e.push(a))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let a=e+t*this.width;const s=(t+1)*this.width;for(;a<s&&this.map[a]<i;)a++;return a==s?o-1:this.map[a]}i=o}}static get(t){return sk(t)||lk(t,Eme(t))}};function Eme(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Tme(t),n=t.childCount,r=[];let i=0,o=null;const a=[];for(let l=0,d=e*n;l<d;l++)r[l]=0;for(let l=0,d=0;l<n;l++){const f=t.child(l);d++;for(let k=0;;k++){for(;i<r.length&&r[i]!=0;)i++;if(k==f.childCount)break;const E=f.child(k),{colspan:m,rowspan:h,colwidth:g}=E.attrs;for(let w=0;w<h;w++){if(w+l>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:d,n:h-w});break}const p=i+w*e;for(let v=0;v<m;v++){r[p+v]==0?r[p+v]=d:(o||(o=[])).push({type:"collision",row:l,pos:d,n:m-v});const y=g&&g[v];if(y){const S=(p+v)%e*2,T=a[S];T==null||T!=y&&a[S+1]==1?(a[S]=y,a[S+1]=1):T==y&&a[S+1]++}}}i+=m,d+=E.nodeSize}const b=(l+1)*e;let x=0;for(;i<b;)r[i++]==0&&x++;x&&(o||(o=[])).push({type:"missing",row:l,n:x}),d++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const s=new cr(e,n,r,o);let c=!1;for(let l=0;!c&&l<a.length;l+=2)a[l]!=null&&a[l+1]<n&&(c=!0);return c&&Mme(s,a,t),s}function Tme(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let a=0;a<r;a++){const s=t.child(a);for(let c=0;c<s.childCount;c++){const l=s.child(c);a+l.attrs.rowspan>r&&(o+=l.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const s=i.child(a);o+=s.attrs.colspan,s.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Mme(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const a=n.nodeAt(o);if(!a)throw new RangeError(`No cell with offset ${o} found`);let s=null;const c=a.attrs;for(let l=0;l<c.colspan;l++){const d=(i+l)%t.width,f=e[d*2];f!=null&&(!c.colwidth||c.colwidth[l]!=f)&&((s||(s=Ime(c)))[l]=f)}s&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:s})}}function Ime(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function bi(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Ol=new qn("selectingCells");function id(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Ome(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function ua(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Mv(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=id(e.$head)||Ame(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Ame(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function ck(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function _me(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function uk(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function y5(t,e,n){const r=t.node(-1),i=cr.get(r),o=t.start(-1),a=i.nextCell(t.pos-o,e,n);return a==null?null:t.node(0).resolve(o+a)}function Rc(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function b5(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Dme(t,e,n){const r=bi(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Tn=class Fs extends Dt{constructor(e,n=e){const r=e.node(-1),i=cr.get(r),o=e.start(-1),a=i.rectBetween(e.pos-o,n.pos-o),s=e.node(0),c=i.cellsInRect(a).filter(d=>d!=n.pos-o);c.unshift(n.pos-o);const l=c.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const b=o+d+1;return new tL(s.resolve(b),s.resolve(b+f.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(ck(r)&&ck(i)&&uk(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Fs.rowSelection(r,i):o&&this.isColSelection()?Fs.colSelection(r,i):new Fs(r,i)}return Et.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=cr.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},a=[];for(let c=i.top;c<i.bottom;c++){const l=[];for(let d=c*n.width+i.left,f=i.left;f<i.right;f++,d++){const b=n.map[d];if(o[b])continue;o[b]=!0;const x=n.findCell(b);let k=e.nodeAt(b);if(!k)throw RangeError(`No cell with offset ${b} found`);const E=i.left-x.left,m=x.right-i.right;if(E>0||m>0){let h=k.attrs;if(E>0&&(h=Rc(h,0,E)),m>0&&(h=Rc(h,h.colspan-m,m)),x.left<i.left){if(k=k.type.createAndFill(h),!k)throw RangeError(`Could not create cell with attrs ${JSON.stringify(h)}`)}else k=k.type.create(h,k.content)}if(x.top<i.top||x.bottom>i.bottom){const h={...k.attrs,rowspan:Math.min(x.bottom,i.bottom)-Math.max(x.top,i.top)};x.top<i.top?k=k.type.createAndFill(h):k=k.type.create(h,k.content)}l.push(k)}a.push(e.child(c).copy(Ye.from(l)))}const s=this.isColSelection()&&this.isRowSelection()?e:a;return new lt(Ye.from(s),1,1)}replace(e,n=lt.empty){const r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:s,$to:c}=i[a],l=e.mapping.slice(r);e.replace(l.map(s.pos),l.map(c.pos),a?lt.empty:n)}const o=Dt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new lt(Ye.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=cr.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<o.length;a++)e(n.nodeAt(o[a]),i+o[a])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=cr.get(r),o=e.start(-1),a=i.findCell(e.pos-o),s=i.findCell(n.pos-o),c=e.node(0);return a.top<=s.top?(a.top>0&&(e=c.resolve(o+i.map[a.left])),s.bottom<i.height&&(n=c.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))):(s.top>0&&(n=c.resolve(o+i.map[s.left])),a.bottom<i.height&&(e=c.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))),new Fs(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=cr.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,s)==n.width}eq(e){return e instanceof Fs&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=cr.get(r),o=e.start(-1),a=i.findCell(e.pos-o),s=i.findCell(n.pos-o),c=e.node(0);return a.left<=s.left?(a.left>0&&(e=c.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(n=c.resolve(o+i.map[i.width*(s.top+1)-1]))):(s.left>0&&(n=c.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(e=c.resolve(o+i.map[i.width*(a.top+1)-1]))),new Fs(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Fs(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Fs(e.resolve(n),e.resolve(r))}getBookmark(){return new Nme(this.$anchorCell.pos,this.$headCell.pos)}};Tn.prototype.visible=!1,Dt.jsonID("cell",Tn);var Nme=class mH{constructor(e,n){this.anchor=e,this.head=n}map(e){return new mH(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&uk(n,r)?new Tn(n,r):Dt.near(r,1)}};function Pme(t){if(!(t.selection instanceof Tn))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Wr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Dn.create(t.doc,e)}function Lme({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function Rme({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&e.parentOffset===0}function Bme(t,e,n){const r=(e||t).selection,i=(e||t).doc;let o,a;if(r instanceof kt&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")o=Tn.create(i,r.from);else if(a=="row"){const s=i.resolve(r.from+1);o=Tn.rowSelection(s,s)}else if(!n){const s=cr.get(r.node),c=r.from+1,l=c+s.map[s.width*s.height-1];o=Tn.create(i,c+1,l)}}else r instanceof Et&&Lme(r)?o=Et.create(i,r.from):r instanceof Et&&Rme(r)&&(o=Et.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}var jme=new qn("fix-tables");function w5(t,e,n,r){const i=t.childCount,o=e.childCount;e:for(let a=0,s=0;a<o;a++){const c=e.child(a);for(let l=s,d=Math.min(i,a+3);l<d;l++)if(t.child(l)==c){s=l+1,n+=c.nodeSize;continue e}r(c,n),s<i&&t.child(s).sameMarkup(c)?w5(t.child(s),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function x5(t,e){let n;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(n=Fme(t,i,o,n))};return e?e.doc!=t.doc&&w5(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Fme(t,e,n,r){const i=cr.get(e);if(!i.problems)return r;r||(r=t.tr);const o=[];for(let c=0;c<i.height;c++)o.push(0);for(let c=0;c<i.problems.length;c++){const l=i.problems[c];if(l.type=="collision"){const d=e.nodeAt(l.pos);if(!d)continue;const f=d.attrs;for(let b=0;b<f.rowspan;b++)o[l.row+b]+=l.n;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,Rc(f,f.colspan-l.n,l.n))}else if(l.type=="missing")o[l.row]+=l.n;else if(l.type=="overlong_rowspan"){const d=e.nodeAt(l.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-l.n})}else if(l.type=="colwidth mismatch"){const d=e.nodeAt(l.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,{...d.attrs,colwidth:l.colwidth})}else if(l.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let a,s;for(let c=0;c<o.length;c++)o[c]&&(a==null&&(a=c),s=c);for(let c=0,l=n+1;c<i.height;c++){const d=e.child(c),f=l+d.nodeSize,b=o[c];if(b>0){let x="cell";d.firstChild&&(x=d.firstChild.type.spec.tableRole);const k=[];for(let m=0;m<b;m++){const h=bi(t.schema)[x].createAndFill();h&&k.push(h)}const E=(c==0||a==c-1)&&s==c?l+1:f-1;r.insert(r.mapping.map(E),k)}l=f}return r.setMeta(jme,{fixTables:!0})}function Wa(t){const e=t.selection,n=Mv(t),r=n.node(-1),i=n.start(-1),o=cr.get(r);return{...e instanceof Tn?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function C5(t,{map:e,tableStart:n,table:r},i){let o=i>0?-1:0;Dme(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let a=0;a<e.height;a++){const s=a*e.width+i;if(i>0&&i<e.width&&e.map[s-1]==e.map[s]){const c=e.map[s],l=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,b5(l.attrs,i-e.colCount(c))),a+=l.attrs.rowspan-1}else{const c=o==null?bi(r.type.schema).cell:r.nodeAt(e.map[s+o]).type,l=e.positionAt(a,i,r);t.insert(t.mapping.map(n+l),c.createAndFill())}}return t}function Hme(t,e){if(!ua(t))return!1;if(e){const n=Wa(t);e(C5(t.tr,n,n.left))}return!0}function zme(t,e){if(!ua(t))return!1;if(e){const n=Wa(t);e(C5(t.tr,n,n.right))}return!0}function $me(t,{map:e,table:n,tableStart:r},i){const o=t.mapping.maps.length;for(let a=0;a<e.height;){const s=a*e.width+i,c=e.map[s],l=n.nodeAt(c),d=l.attrs;if(i>0&&e.map[s-1]==c||i<e.width-1&&e.map[s+1]==c)t.setNodeMarkup(t.mapping.slice(o).map(r+c),null,Rc(d,i-e.colCount(c)));else{const f=t.mapping.slice(o).map(r+c);t.delete(f,f+l.nodeSize)}a+=d.rowspan}}function Ume(t,e){if(!ua(t))return!1;if(e){const n=Wa(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;$me(r,n,i),i!=n.left;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=cr.get(o)}e(r)}return!0}function Wme(t,e,n){var r;const i=bi(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=e.nodeAt(t.map[o+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function S5(t,{map:e,tableStart:n,table:r},i){var o;let a=n;for(let l=0;l<i;l++)a+=r.child(l).nodeSize;const s=[];let c=i>0?-1:0;Wme(e,r,i+c)&&(c=i==0||i==e.height?null:0);for(let l=0,d=e.width*i;l<e.width;l++,d++)if(i>0&&i<e.height&&e.map[d]==e.map[d-e.width]){const f=e.map[d],b=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,{...b,rowspan:b.rowspan+1}),l+=b.colspan-1}else{const f=c==null?bi(r.type.schema).cell:(o=r.nodeAt(e.map[d+c*e.width]))==null?void 0:o.type,b=f==null?void 0:f.createAndFill();b&&s.push(b)}return t.insert(a,bi(r.type.schema).row.create(null,s)),t}function Yme(t,e){if(!ua(t))return!1;if(e){const n=Wa(t);e(S5(t.tr,n,n.top))}return!0}function Gme(t,e){if(!ua(t))return!1;if(e){const n=Wa(t);e(S5(t.tr,n,n.bottom))}return!0}function Xme(t,{map:e,table:n,tableStart:r},i){let o=0;for(let l=0;l<i;l++)o+=n.child(l).nodeSize;const a=o+n.child(i).nodeSize,s=t.mapping.maps.length;t.delete(o+r,a+r);const c=new Set;for(let l=0,d=i*e.width;l<e.width;l++,d++){const f=e.map[d];if(!c.has(f)){if(c.add(f),i>0&&f==e.map[d-e.width]){const b=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(s).map(f+r),null,{...b,rowspan:b.rowspan-1}),l+=b.colspan-1}else if(i<e.height&&f==e.map[d+e.width]){const b=n.nodeAt(f),x=b.attrs,k=b.type.create({...x,rowspan:b.attrs.rowspan-1},b.content),E=e.positionAt(i+1,l,n);t.insert(t.mapping.slice(s).map(r+E),k),l+=x.colspan-1}}}}function Kme(t,e){if(!ua(t))return!1;if(e){const n=Wa(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;Xme(r,n,i),i!=n.top;i--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=cr.get(n.table)}e(r)}return!0}function k5(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function Zme({width:t,height:e,map:n},r){let i=r.top*t+r.left,o=i,a=(r.bottom-1)*t+r.left,s=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[o]==n[o-1]||r.right<t&&n[s]==n[s+1])return!0;o+=t,s+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[a]==n[a+t])return!0;i++,a++}return!1}function E5(t,e){const n=t.selection;if(!(n instanceof Tn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Wa(t),{map:i}=r;if(Zme(i,r))return!1;if(e){const o=t.tr,a={};let s=Ye.empty,c,l;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const b=i.map[d*i.width+f],x=r.table.nodeAt(b);if(!(a[b]||!x))if(a[b]=!0,c==null)c=b,l=x;else{k5(x)||(s=s.append(x.content));const k=o.mapping.map(b+r.tableStart);o.delete(k,k+x.nodeSize)}}if(c==null||l==null)return!0;if(o.setNodeMarkup(c+r.tableStart,null,{...b5(l.attrs,l.attrs.colspan,r.right-r.left-l.attrs.colspan),rowspan:r.bottom-r.top}),s.size){const d=c+1+l.content.size,f=k5(l)?c+1:d;o.replaceWith(f+r.tableStart,d+r.tableStart,s)}o.setSelection(new Tn(o.doc.resolve(c+r.tableStart))),e(o)}return!0}function T5(t,e){const n=bi(t.schema);return Jme(({node:r})=>n[r.type.spec.tableRole])(t,e)}function Jme(t){return(e,n)=>{var r;const i=e.selection;let o,a;if(i instanceof Tn){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,a=i.$anchorCell.pos}else{if(o=Ome(i.$from),!o)return!1;a=(r=id(i.$from))==null?void 0:r.pos}if(o==null||a==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let s=o.attrs;const c=[],l=s.colwidth;s.rowspan>1&&(s={...s,rowspan:1}),s.colspan>1&&(s={...s,colspan:1});const d=Wa(e),f=e.tr;for(let x=0;x<d.right-d.left;x++)c.push(l?{...s,colwidth:l&&l[x]?[l[x]]:null}:s);let b;for(let x=d.top;x<d.bottom;x++){let k=d.map.positionAt(x,d.left,d.table);x==d.top&&(k+=o.nodeSize);for(let E=d.left,m=0;E<d.right;E++,m++)E==d.left&&x==d.top||f.insert(b=f.mapping.map(k+d.tableStart,1),t({node:o,row:x,col:E}).createAndFill(c[m]))}f.setNodeMarkup(a,t({node:o,row:d.top,col:d.left}),c[0]),i instanceof Tn&&f.setSelection(new Tn(f.doc.resolve(i.$anchorCell.pos),b?f.doc.resolve(b):void 0)),n(f)}return!0}}function Qme(t,e){return function(n,r){if(!ua(n))return!1;const i=Mv(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const o=n.tr;n.selection instanceof Tn?n.selection.forEachCell((a,s)=>{a.attrs[t]!==e&&o.setNodeMarkup(s,null,{...a.attrs,[t]:e})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(o)}return!0}}function Vme(t){return function(e,n){if(!ua(e))return!1;if(n){const r=bi(e.schema),i=Wa(e),o=e.tr,a=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),s=a.map(c=>i.table.nodeAt(c));for(let c=0;c<a.length;c++)s[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+a[c],r.cell,s[c].attrs);if(o.steps.length==0)for(let c=0;c<a.length;c++)o.setNodeMarkup(i.tableStart+a[c],r.header_cell,s[c].attrs);n(o)}return!0}}function M5(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function dh(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Vme(t):function(n,r){if(!ua(n))return!1;if(r){const i=bi(n.schema),o=Wa(n),a=n.tr,s=M5("row",o,i),c=M5("column",o,i),l=(t==="column"?s:t==="row"&&c)?1:0,d=t=="column"?{left:0,top:l,right:1,bottom:o.map.height}:t=="row"?{left:l,top:0,right:o.map.width,bottom:1}:o,f=t=="column"?c?i.cell:i.header_cell:t=="row"?s?i.cell:i.header_cell:i.cell;o.map.cellsInRect(d).forEach(b=>{const x=b+o.tableStart,k=a.doc.nodeAt(x);k&&a.setNodeMarkup(x,f,k.attrs)}),r(a)}return!0}}dh("row",{useDeprecatedLogic:!0}),dh("column",{useDeprecatedLogic:!0});var qme=dh("cell",{useDeprecatedLogic:!0});function ege(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const o=t.node(-1).child(r),a=o.lastChild;if(a)return i-1-a.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function I5(t){return function(e,n){if(!ua(e))return!1;const r=ege(Mv(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Et.between(i,_me(i))).scrollIntoView())}return!0}}function tge(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Iv(t,e){const n=t.selection;if(!(n instanceof Tn))return!1;if(e){const r=t.tr,i=bi(t.schema).cell.createAndFill().content;n.forEachCell((o,a)=>{o.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+o.nodeSize-1),new lt(i,0,0))}),r.docChanged&&e(r)}return!0}function nge(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,a=i.type.schema,s=[];if(o=="row")for(let c=0;c<e.childCount;c++){let l=e.child(c).content;const d=c?0:Math.max(0,n-1),f=c<e.childCount-1?0:Math.max(0,r-1);(d||f)&&(l=dk(bi(a).row,new lt(l,d,f)).content),s.push(l)}else if(o=="cell"||o=="header_cell")s.push(n||r?dk(bi(a).row,new lt(e,n,r)).content:e);else return null;return rge(a,s)}function rge(t,e){const n=[];for(let i=0;i<e.length;i++){const o=e[i];for(let a=o.childCount-1;a>=0;a--){const{rowspan:s,colspan:c}=o.child(a).attrs;for(let l=i;l<i+s;l++)n[l]=(n[l]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ye.empty),n[i]<r){const o=bi(t).cell.createAndFill(),a=[];for(let s=n[i];s<r;s++)a.push(o);e[i]=e[i].append(Ye.from(a))}return{height:e.length,width:r,rows:e}}function dk(t,e){const n=t.createAndFill();return new MC(n).replace(0,n.content.size,e).doc}function ige({width:t,height:e,rows:n},r,i){if(t!=r){const o=[],a=[];for(let s=0;s<n.length;s++){const c=n[s],l=[];for(let d=o[s]||0,f=0;d<r;f++){let b=c.child(f%c.childCount);d+b.attrs.colspan>r&&(b=b.type.createChecked(Rc(b.attrs,b.attrs.colspan,d+b.attrs.colspan-r),b.content)),l.push(b),d+=b.attrs.colspan;for(let x=1;x<b.attrs.rowspan;x++)o[s+x]=(o[s+x]||0)+b.attrs.colspan}a.push(Ye.from(l))}n=a,t=r}if(e!=i){const o=[];for(let a=0,s=0;a<i;a++,s++){const c=[],l=n[s%e];for(let d=0;d<l.childCount;d++){let f=l.child(d);a+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),c.push(f)}o.push(Ye.from(c))}n=o,e=i}return{width:t,height:e,rows:n}}function oge(t,e,n,r,i,o,a){const s=t.doc.type.schema,c=bi(s);let l,d;if(i>e.width)for(let f=0,b=0;f<e.height;f++){const x=n.child(f);b+=x.nodeSize;const k=[];let E;x.lastChild==null||x.lastChild.type==c.cell?E=l||(l=c.cell.createAndFill()):E=d||(d=c.header_cell.createAndFill());for(let m=e.width;m<i;m++)k.push(E);t.insert(t.mapping.slice(a).map(b-1+r),k)}if(o>e.height){const f=[];for(let k=0,E=(e.height-1)*e.width;k<Math.max(e.width,i);k++){const m=k>=e.width?!1:n.nodeAt(e.map[E+k]).type==c.header_cell;f.push(m?d||(d=c.header_cell.createAndFill()):l||(l=c.cell.createAndFill()))}const b=c.row.create(null,Ye.from(f)),x=[];for(let k=e.height;k<o;k++)x.push(b);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),x)}return!!(l||d)}function O5(t,e,n,r,i,o,a,s){if(a==0||a==e.height)return!1;let c=!1;for(let l=i;l<o;l++){const d=a*e.width+l,f=e.map[d];if(e.map[d-e.width]==f){c=!0;const b=n.nodeAt(f),{top:x,left:k}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(s).map(f+r),null,{...b.attrs,rowspan:a-x}),t.insert(t.mapping.slice(s).map(e.positionAt(a,k,n)),b.type.createAndFill({...b.attrs,rowspan:x+b.attrs.rowspan-a})),l+=b.attrs.colspan-1}}return c}function A5(t,e,n,r,i,o,a,s){if(a==0||a==e.width)return!1;let c=!1;for(let l=i;l<o;l++){const d=l*e.width+a,f=e.map[d];if(e.map[d-1]==f){c=!0;const b=n.nodeAt(f),x=e.colCount(f),k=t.mapping.slice(s).map(f+r);t.setNodeMarkup(k,null,Rc(b.attrs,a-x,b.attrs.colspan-(a-x))),t.insert(k+b.nodeSize,b.type.createAndFill(Rc(b.attrs,0,a-x))),l+=b.attrs.rowspan-1}}return c}function _5(t,e,n,r,i){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let a=cr.get(o);const{top:s,left:c}=r,l=c+i.width,d=s+i.height,f=t.tr;let b=0;function x(){if(o=n?f.doc.nodeAt(n-1):f.doc,!o)throw new Error("No table found");a=cr.get(o),b=f.mapping.maps.length}oge(f,a,o,n,l,d,b)&&x(),O5(f,a,o,n,c,l,s,b)&&x(),O5(f,a,o,n,c,l,d,b)&&x(),A5(f,a,o,n,s,d,c,b)&&x(),A5(f,a,o,n,s,d,l,b)&&x();for(let k=s;k<d;k++){const E=a.positionAt(k,c,o),m=a.positionAt(k,l,o);f.replace(f.mapping.slice(b).map(E+n),f.mapping.slice(b).map(m+n),new lt(i.rows[k-s],0,0))}x(),f.setSelection(new Tn(f.doc.resolve(n+a.positionAt(s,c,o)),f.doc.resolve(n+a.positionAt(d-1,l-1,o)))),e(f)}var age=iS({ArrowLeft:Av("horiz",-1),ArrowRight:Av("horiz",1),ArrowUp:Av("vert",-1),ArrowDown:Av("vert",1),"Shift-ArrowLeft":_v("horiz",-1),"Shift-ArrowRight":_v("horiz",1),"Shift-ArrowUp":_v("vert",-1),"Shift-ArrowDown":_v("vert",1),Backspace:Iv,"Mod-Backspace":Iv,Delete:Iv,"Mod-Delete":Iv});function Ov(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Av(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof Tn)return Ov(n,r,Dt.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const a=D5(i,t,e);if(a==null)return!1;if(t=="horiz")return Ov(n,r,Dt.near(n.doc.resolve(o.head+e),e));{const s=n.doc.resolve(a),c=y5(s,t,e);let l;return c?l=Dt.near(c,1):e<0?l=Dt.near(n.doc.resolve(s.before(-1)),-1):l=Dt.near(n.doc.resolve(s.after(-1)),1),Ov(n,r,l)}}}function _v(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let a;if(o instanceof Tn)a=o;else{const c=D5(i,t,e);if(c==null)return!1;a=new Tn(n.doc.resolve(c))}const s=y5(a.$headCell,t,e);return s?Ov(n,r,new Tn(a.$anchorCell,s)):!1}}function sge(t,e){const n=t.state.doc,r=id(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Tn(r))),!0):!1}function lge(t,e,n){if(!ua(t.state))return!1;let r=nge(n);const i=t.state.selection;if(i instanceof Tn){r||(r={width:1,height:1,rows:[Ye.from(dk(bi(t.state.schema).cell,n))]});const o=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),s=cr.get(o).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=ige(r,s.right-s.left,s.bottom-s.top),_5(t.state,t.dispatch,a,s,r),!0}else if(r){const o=Mv(t.state),a=o.start(-1);return _5(t.state,t.dispatch,a,cr.get(o.node(-1)).findCell(o.pos-a),r),!0}else return!1}function cge(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=N5(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Tn)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=id(t.state.selection.$anchor))!=null&&((n=fk(t,e))==null?void 0:n.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(c,l){let d=fk(t,l);const f=Ol.getState(t.state)==null;if(!d||!uk(c,d))if(f)d=c;else return;const b=new Tn(c,d);if(f||!t.state.selection.eq(b)){const x=t.state.tr.setSelection(b);f&&x.setMeta(Ol,c.pos),t.dispatch(x)}}function a(){t.root.removeEventListener("mouseup",a),t.root.removeEventListener("dragstart",a),t.root.removeEventListener("mousemove",s),Ol.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Ol,-1))}function s(c){const l=c,d=Ol.getState(t.state);let f;if(d!=null)f=t.state.doc.resolve(d);else if(N5(t,l.target)!=r&&(f=fk(t,e),!f))return a();f&&o(f,l)}t.root.addEventListener("mouseup",a),t.root.addEventListener("dragstart",a),t.root.addEventListener("mousemove",s)}function D5(t,e,n){if(!(t.state.selection instanceof Et))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const a=r.before(i),s=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(s)?a:null}}return null}function N5(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function fk(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?id(t.state.doc.resolve(n.pos)):null}var uge=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),hk(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,hk(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function hk(t,e,n,r,i,o){var a;let s=0,c=!0,l=e.firstChild;const d=t.firstChild;if(d){for(let f=0,b=0;f<d.childCount;f++){const{colspan:x,colwidth:k}=d.child(f).attrs;for(let E=0;E<x;E++,b++){const m=i==b?o:k&&k[E],h=m?m+"px":"";if(s+=m||r,m||(c=!1),l)l.style.width!=h&&(l.style.width=h),l=l.nextSibling;else{const g=document.createElement("col");g.style.width=h,e.appendChild(g)}}}for(;l;){const f=l.nextSibling;(a=l.parentNode)==null||a.removeChild(l),l=f}c?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var po=new qn("tableColumnResizing");function dge({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=uge,lastColumnResizable:i=!0}={}){const o=new En({key:po,state:{init(a,s){var c,l;const d=(l=(c=o.spec)==null?void 0:c.props)==null?void 0:l.nodeViews,f=bi(s.schema).table.name;return r&&d&&(d[f]=(b,x)=>new r(b,n,x)),new fge(-1,!1)},apply(a,s){return s.apply(a)}},props:{attributes:a=>{const s=po.getState(a);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,s)=>{hge(a,s,t,i)},mouseleave:a=>{pge(a)},mousedown:(a,s)=>{mge(a,s,e,n)}},decorations:a=>{const s=po.getState(a);if(s&&s.activeHandle>-1)return wge(a,s.activeHandle)},nodeViews:{}}});return o}var fge=class xb{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(po);if(r&&r.setHandle!=null)return new xb(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new xb(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return ck(e.doc.resolve(i))||(i=-1),new xb(i,n.dragging)}return n}};function hge(t,e,n,r){if(!t.editable)return;const i=po.getState(t.state);if(i&&!i.dragging){const o=vge(e.target);let a=-1;if(o){const{left:s,right:c}=o.getBoundingClientRect();e.clientX-s<=n?a=P5(t,e,"left",n):c-e.clientX<=n&&(a=P5(t,e,"right",n))}if(a!=i.activeHandle){if(!r&&a!==-1){const s=t.state.doc.resolve(a),c=s.node(-1),l=cr.get(c),d=s.start(-1);if(l.colCount(s.pos-d)+s.nodeAfter.attrs.colspan-1==l.width-1)return}R5(t,a)}}}function pge(t){if(!t.editable)return;const e=po.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&R5(t,-1)}function mge(t,e,n,r){var i;if(!t.editable)return!1;const o=(i=t.dom.ownerDocument.defaultView)!=null?i:window,a=po.getState(t.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const s=t.state.doc.nodeAt(a.activeHandle),c=gge(t,a.activeHandle,s.attrs);t.dispatch(t.state.tr.setMeta(po,{setDragging:{startX:e.clientX,startWidth:c}}));function l(f){o.removeEventListener("mouseup",l),o.removeEventListener("mousemove",d);const b=po.getState(t.state);b!=null&&b.dragging&&(yge(t,b.activeHandle,L5(b.dragging,f,n)),t.dispatch(t.state.tr.setMeta(po,{setDragging:null})))}function d(f){if(!f.which)return l(f);const b=po.getState(t.state);if(b&&b.dragging){const x=L5(b.dragging,f,n);B5(t,b.activeHandle,x,r)}}return B5(t,a.activeHandle,c,r),o.addEventListener("mouseup",l),o.addEventListener("mousemove",d),e.preventDefault(),!0}function gge(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=t.domAtPos(e);let a=o.node.childNodes[o.offset].offsetWidth,s=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],s--);return a/s}function vge(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function P5(t,e,n,r){const i=n=="right"?-r:r,o=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:a}=o,s=id(t.state.doc.resolve(a));if(!s)return-1;if(n=="right")return s.pos;const c=cr.get(s.node(-1)),l=s.start(-1),d=c.map.indexOf(s.pos-l);return d%c.width==0?-1:l+c.map[d-1]}function L5(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function R5(t,e){t.dispatch(t.state.tr.setMeta(po,{setHandle:e}))}function yge(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),o=cr.get(i),a=r.start(-1),s=o.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let l=0;l<o.height;l++){const d=l*o.width+s;if(l&&o.map[d]==o.map[d-o.width])continue;const f=o.map[d],b=i.nodeAt(f).attrs,x=b.colspan==1?0:s-o.colCount(f);if(b.colwidth&&b.colwidth[x]==n)continue;const k=b.colwidth?b.colwidth.slice():bge(b.colspan);k[x]=n,c.setNodeMarkup(a+f,null,{...b,colwidth:k})}c.docChanged&&t.dispatch(c)}function B5(t,e,n,r){const i=t.state.doc.resolve(e),o=i.node(-1),a=i.start(-1),s=cr.get(o).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;let c=t.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&hk(o,c.firstChild,c,r,s,n)}function bge(t){return Array(t).fill(0)}function wge(t,e){var n;const r=[],i=t.doc.resolve(e),o=i.node(-1);if(!o)return Dn.empty;const a=cr.get(o),s=i.start(-1),c=a.colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;for(let l=0;l<a.height;l++){const d=c+l*a.width;if((c==a.width-1||a.map[d]!=a.map[d+1])&&(l==0||a.map[d]!=a.map[d-a.width])){const f=a.map[d],b=s+f+o.nodeAt(f).nodeSize-1,x=document.createElement("div");x.className="column-resize-handle",(n=po.getState(t))!=null&&n.dragging&&r.push(Wr.node(s+f,s+f+o.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(Wr.widget(b,x))}}return Dn.create(t.doc,r)}function xge({allowTableNodeSelection:t=!1}={}){return new En({key:Ol,state:{init(){return null},apply(e,n){const r=e.getMeta(Ol);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:o}=e.mapping.mapResult(n);return i?null:o}},props:{decorations:Pme,handleDOMEvents:{mousedown:cge},createSelectionBetween(e){return Ol.getState(e.state)!=null?e.state.selection:null},handleTripleClick:sge,handleKeyDown:age,handlePaste:lge},appendTransaction(e,n,r){return Bme(r,x5(r,n),t)}})}function Cge(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),o=Math.max(t.right,e.right)-i,a=r-n,s=i,c=n;return new DOMRect(s,c,o,a)}var Sge=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:a,getReferencedVirtualElement:s,options:c}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:d,state:f,from:b,to:x})=>{const{doc:k,selection:E}=f,{empty:m}=E,h=!k.textBetween(b,x).length&&bS(f.selection),g=this.element.contains(document.activeElement);return!(!(d.hasFocus()||g)||m||h||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:d})=>{var f;if(this.preventHide){this.preventHide=!1;return}d!=null&&d.relatedTarget&&(f=this.element.parentNode)!=null&&f.contains(d.relatedTarget)||(d==null?void 0:d.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(d,f)=>{const b=!(f!=null&&f.selection.eq(d.state.selection)),x=!(f!=null&&f.doc.eq(d.state.doc));!b&&!x||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(d,b,x,f)},this.updateDelay))},this.updateHandler=(d,f,b,x)=>{const{composing:k}=d;if(!(k||!f&&!b)){if(!this.getShouldShow(x)){this.hide();return}this.updatePosition(),this.show()}};var l;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=a,this.scrollTarget=(l=c==null?void 0:c.scrollTarget)!=null?l:window,this.getReferencedVirtualElement=s,this.floatingUIOptions={...this.floatingUIOptions,...c},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(f5(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(d5(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(c5(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(m5(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(h5(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(u5(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(p5(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(g5(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t;const{selection:e}=this.editor.state,n=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(n)return n;const r=nB(this.view,e.from,e.to);let i={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(e instanceof kt){let o=this.view.nodeDOM(e.from);const a=o.dataset.nodeViewWrapper?o:o.querySelector("[data-node-view-wrapper]");a&&(o=a),o&&(i={getBoundingClientRect:()=>o.getBoundingClientRect(),getClientRects:()=>[o.getBoundingClientRect()]})}if(e instanceof Tn){const{$anchorCell:o,$headCell:a}=e,s=o?o.pos:a.pos,c=a?a.pos:o.pos,l=this.view.nodeDOM(s),d=this.view.nodeDOM(c);if(!l||!d)return;const f=l===d?l.getBoundingClientRect():Cge(l.getBoundingClientRect(),d.getBoundingClientRect());i={getBoundingClientRect:()=>f,getClientRects:()=>[f]}}return i}updatePosition(){const t=this.virtualElement;t&&v5(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!(e!=null&&e.selection.eq(t.state.selection)),o=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(s=>s.$from.pos)),a=Math.max(...i.map(s=>s.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:a})}show(){var t,e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(e=(t=this.appendTo)!=null?t:this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},j5=t=>new En({key:typeof t.pluginKey=="string"?new qn(t.pluginKey):t.pluginKey,view:e=>new Sge({view:e,...t})});Zt.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[j5({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var kge=u.defineComponent({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},resizeDelay:{type:Number,default:void 0},options:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null},getReferencedVirtualElement:{type:Function,default:void 0}},setup(t,{slots:e}){const n=u.ref(null);return u.onMounted(()=>{const{editor:r,options:i,pluginKey:o,resizeDelay:a,shouldShow:s,getReferencedVirtualElement:c,updateDelay:l}=t;n.value&&(n.value.style.visibility="hidden",n.value.style.position="absolute",n.value.remove(),r.registerPlugin(j5({editor:r,element:n.value,options:i,pluginKey:o,resizeDelay:a,shouldShow:s,getReferencedVirtualElement:c,updateDelay:l})))}),u.onBeforeUnmount(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return u.h(u.Teleport,{to:"body"},u.h("div",{ref:n},(r=e.default)==null?void 0:r.call(e)))}}}),Ege=class{constructor({editor:t,element:e,view:n,options:r,shouldShow:i}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:o,state:a})=>{const{selection:s}=a,{$anchor:c,empty:l}=s,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent&&c.parent.childCount===0&&!this.getTextContent(c.parent);return!(!o.hasFocus()||!l||!d||!f||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(o,a,s,c)=>{const{composing:l}=o;if(!(l||!a&&!s)){if(!this.getShouldShow(c)){this.hide();return}this.updatePosition(),this.show()}},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var a;if(this.preventHide){this.preventHide=!1;return}o!=null&&o.relatedTarget&&(a=this.element.parentNode)!=null&&a.contains(o.relatedTarget)||(o==null?void 0:o.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=t,this.element=e,this.view=n,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}getTextContent(t){return XR(t,{textSerializers:pS(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(f5(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(d5(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(c5(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(m5(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(h5(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(u5(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(p5(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(g5(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(s=>s.$from.pos)),a=Math.max(...i.map(s=>s.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:a})}updatePosition(){const{selection:t}=this.editor.state,e=nB(this.view,t.from,t.to);v5({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:n,y:r,strategy:i})=>{this.element.style.width="max-content",this.element.style.position=i,this.element.style.left=`${n}px`,this.element.style.top=`${r}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!(e!=null&&e.selection.eq(t.state.selection)),r=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,n,r,e)}show(){var t;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(t=this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},F5=t=>new En({key:typeof t.pluginKey=="string"?new qn(t.pluginKey):t.pluginKey,view:e=>new Ege({view:e,...t})});Zt.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[F5({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,shouldShow:this.options.shouldShow})]:[]}}),u.defineComponent({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},options:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=u.ref(null);return u.onMounted(()=>{const{pluginKey:r,editor:i,options:o,shouldShow:a}=t;n.value&&(n.value.style.visibility="hidden",n.value.style.position="absolute",n.value.remove(),i.registerPlugin(F5({pluginKey:r,editor:i,element:n.value,options:o,shouldShow:a})))}),u.onBeforeUnmount(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return u.h(u.Teleport,{to:"body"},u.h("div",{ref:n},(r=e.default)==null?void 0:r.call(e)))}}});const Tge=u.defineComponent({__name:"BubbleMenu",props:{editor:{},shouldShow:{}},setup(t){const e=t,{t:n}=Is(),r=u.computed(()=>{var o,a;const s=e.editor.state.selection;if(s.to===s.from||s.empty)return;const c=N4(e.editor,"link"),l=N4(e.editor,"table"),d=((o=s.node)==null?void 0:o.type.name)==="image",f=((a=s.node)==null?void 0:a.type.name)==="video",b=s instanceof Et;if(l)return"table";if(c)return"link";if(d)return"image";if(f)return"video";if(b)return"text"});function i(o){var a,s;if(!o)return[];const{extensions:c=[]}=e.editor.extensionManager,l=c.find(b=>b.name==="base-kit");if(!l)return[];const{button:d}=((a=l.options)==null?void 0:a.bubble)??{};if(!d)return[];const f=d({editor:e.editor,extension:l,t:u.unref(n)});return o?((s=u.unref(f))==null?void 0:s[o])??[]:[]}return(o,a)=>{const s=Mn,c=Zr,l=Dr,d=jn;return u.openBlock(),u.createBlock(u.unref(kge),{editor:o.editor,"should-show":e.shouldShow},{default:u.withCtx(()=>[u.createVNode(d,{class:"vuetify-pro-tiptap-editor__menu-bubble"},{default:u.withCtx(()=>[u.createVNode(l,{class:"d-flex pa-0"},{default:u.withCtx(()=>[u.createVNode(c,{density:"compact",flat:"",height:"auto",class:"py-1 ps-1"},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(i(r.value),(f,b)=>(u.openBlock(),u.createElementBlock(u.Fragment,{key:b},[f.type==="divider"?(u.openBlock(),u.createBlock(s,{key:0,vertical:"",class:"mx-1 me-2"})):(u.openBlock(),u.createBlock(u.resolveDynamicComponent(f.component),u.mergeProps({key:1,ref_for:!0},f.componentProps,{editor:o.editor}),u.createSlots({_:2},[u.renderList(f.componentSlots,(x,k,E)=>({name:`${k}`,fn:u.withCtx(m=>[(u.openBlock(),u.createBlock(u.resolveDynamicComponent(x),u.mergeProps({ref_for:!0},m==null?void 0:m.props),null,16))])}))]),1040,["editor"]))],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["editor","should-show"])}}}),Mge=u.defineComponent({__name:"TiptapToolbar",props:{editor:{}},setup(t){const e=t,{t:n}=Is();function r(){return[...e.editor.extensionManager.extensions].sort((i,o)=>{const a=i.options.sort??-1,s=o.options.sort??-1;return a-s}).reduce((i,o)=>{const{button:a,divider:s=!1,spacer:c=!1}=o.options;if(!a||!ope(a))return i;const l=a({editor:e.editor,extension:o,t:u.unref(n)});if(Array.isArray(l)){const d=l.map((f,b)=>({button:f,divider:b===l.length-1?s:!1,spacer:b===0?c:!1}));return[...i,...d]}return[...i,{button:l,divider:s,spacer:c}]},[])}return(i,o)=>{const a=Xr,s=Mn,c=Zr;return u.openBlock(),u.createBlock(c,u.mergeProps(i.$attrs,{density:"compact",flat:"",height:"auto",class:"py-1 ps-1"}),{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(r(),(l,d)=>(u.openBlock(),u.createElementBlock(u.Fragment,{key:d},[l.spacer?(u.openBlock(),u.createBlock(a,{key:0})):u.createCommentVNode("",!0),(u.openBlock(),u.createBlock(u.resolveDynamicComponent(l.button.component),u.mergeProps({ref_for:!0},l.button.componentProps,{editor:i.editor}),u.createSlots({_:2},[u.renderList(l.button.componentSlots,(f,b,x)=>({name:`${b}`,fn:u.withCtx(k=>[(u.openBlock(),u.createBlock(u.resolveDynamicComponent(f),u.mergeProps({ref_for:!0},k==null?void 0:k.props),null,16))])}))]),1040,["editor"])),l.divider?(u.openBlock(),u.createBlock(s,{key:1,vertical:"",class:"mx-1 me-2"})):u.createCommentVNode("",!0)],64))),128))]),_:1},16)}}}),Ige={class:"text-overline me-4"},Oge={class:"text-overline"},Age=u.defineComponent({__name:"VuetifyTiptap",props:{modelValue:{default:""},markdownTheme:{type:[String,Boolean],default:void 0},output:{default:"html"},dark:{type:Boolean,default:void 0},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!0},flat:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},label:{default:void 0},hideToolbar:{type:Boolean,default:!1},disableToolbar:{type:Boolean,default:!1},hideBubble:{type:Boolean,default:!1},bubbleShouldShow:{},removeDefaultWrapper:{type:Boolean,default:!1},maxWidth:{default:void 0},minHeight:{default:void 0},maxHeight:{default:void 0},extensions:{default:()=>[]},editorClass:{default:void 0},errorMessages:{default:()=>[]}},emits:["enter","change","update:modelValue","update:markdownTheme"],setup(t,{expose:e,emit:n}){const r=t,i=n,o=u.useAttrs(),a=oi.useTheme(),{state:s,isFullscreen:c}=wpe(),{markdownThemeStyle:l}=P4(u.computed(()=>r.markdownTheme),w=>{i("update:markdownTheme",w)}),d=u.computed(()=>{const w=Khe(r.extensions,s.extensions,"name");return[...s.extensions.map((p,v)=>{const y=r.extensions.find(S=>S.name===p.name);return y?p.configure(y.options):p}),...w].map((p,v)=>p.configure({sort:v}))}),f=jle({content:r.modelValue,editorProps:{handleKeyDown:Ju(function(w,p){return p.key==="Enter"&&o.enter&&!p.shiftKey?(i("enter"),!0):!1},ES)},onUpdate:Ju(({editor:w})=>{const p=m(w,r.output);i("update:modelValue",p),i("change",{editor:w,output:p})},ES),extensions:u.unref(d),autofocus:!1,editable:!r.disabled,injectCSS:!0}),{t:b}=Is(),x=u.computed(()=>Qu(r.dark)?r.dark:Qu(a.current.value.dark)?a.current.value.dark:!1),k=u.computed(()=>[{__dark:u.unref(x),...u.unref(l)},r.editorClass]),E=u.computed(()=>{const w=lh(r.maxWidth),p={maxWidth:w,width:w?"100%":void 0,margin:w?"0 auto":void 0,backgroundColor:u.unref(x)?"#1E1E1E":"#FFFFFF"};if(u.unref(c))return{height:"100%",overflowY:"auto",...p};const v=lh(r.minHeight),y=lh(r.maxHeight);return{minHeight:v,maxHeight:y,overflowY:"auto",...p}});function m(w,p){return r.removeDefaultWrapper?p==="html"?w.isEmpty?"":w.getHTML():p==="json"?w.isEmpty?{}:w.getJSON():p==="text"?w.isEmpty?"":w.getText():"":p==="html"?w.getHTML():p==="json"?w.getJSON():p==="text"?w.getText():""}const h=Ju(w=>{if(!f.value)return;const p=m(f.value,r.output);if(Jhe(p,w))return;const{from:v,to:y}=f.value.state.selection;f.value.commands.setContent(w,{emitUpdate:!1}),f.value.commands.setTextSelection({from:v,to:y})},Ule),g=w=>{var p;return(p=f.value)==null?void 0:p.setEditable(!w)};return u.watch(()=>r.modelValue,h),u.watch(()=>r.disabled,g),u.provide("disableToolbar",u.toRef(()=>r.disableToolbar)),e({editor:f}),(w,p)=>{const v=uM,y=Mn,S=Xr,T=Zr,C=jn,M=Ta,A=N_;return u.unref(f)?(u.openBlock(),u.createElementBlock("div",{key:0,class:u.normalizeClass(["vuetify-pro-tiptap",{dense:w.dense}])},[u.createVNode(A,{theme:x.value?"dark":"light"},{default:u.withCtx(()=>[u.createVNode(M,{class:"pt-0","hide-details":"auto","error-messages":w.errorMessages},{default:u.withCtx(()=>[u.createVNode(C,u.mergeProps({flat:w.flat,outlined:w.outlined,color:x.value?"grey-darken-4":"grey-lighten-4"},w.$attrs,{style:{borderColor:w.errorMessages?"#ff5252":void 0,width:"100%"},class:["vuetify-pro-tiptap-editor",{"vuetify-pro-tiptap-editor--fullscreen":u.unref(c)}]}),{default:u.withCtx(()=>[w.label&&!u.unref(c)?(u.openBlock(),u.createElementBlock(u.Fragment,{key:0},[u.createVNode(v,{class:u.normalizeClass(x.value?"bg-grey-darken-3":"bg-grey-lighten-3")},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(w.label),1)]),_:1},8,["class"]),u.createVNode(y)],64)):u.createCommentVNode("",!0),w.hideToolbar?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(Mge,{key:1,class:"vuetify-pro-tiptap-editor__toolbar",editor:u.unref(f)},null,8,["editor"])),w.hideBubble?u.createCommentVNode("",!0):(u.openBlock(),u.createBlock(Tge,{key:2,editor:u.unref(f),"should-show":w.bubbleShouldShow},null,8,["editor","should-show"])),u.renderSlot(w.$slots,"editor",u.normalizeProps(u.guardReactiveProps({editor:u.unref(f),props:{class:"vuetify-pro-tiptap-editor__content","data-testid":"value"}})),()=>[u.createVNode(u.unref(Lle),{class:u.normalizeClass(["vuetify-pro-tiptap-editor__content",k.value]),style:u.normalizeStyle(E.value),editor:u.unref(f),"data-testid":"value"},null,8,["class","style","editor"])]),u.renderSlot(w.$slots,"bottom",u.normalizeProps(u.guardReactiveProps({editor:u.unref(f)})),()=>[u.createVNode(T,{class:"px-4",density:"compact",flat:""},{default:u.withCtx(()=>[u.createVNode(S),u.unref(ape)(u.unref(f),"characterCount")?(u.openBlock(),u.createElementBlock(u.Fragment,{key:0},[u.createElementVNode("span",Ige,u.toDisplayString(u.unref(f).storage.characterCount.words())+" "+u.toDisplayString(u.unref(b)("editor.words")),1),u.createElementVNode("span",Oge,u.toDisplayString(u.unref(f).storage.characterCount.characters())+" "+u.toDisplayString(u.unref(b)("editor.characters")),1)],64)):u.createCommentVNode("",!0)]),_:1})])]),_:3},16,["flat","outlined","color","style","class"])]),_:3},8,["error-messages"])]),_:3},8,["theme"])],2)):u.createCommentVNode("",!0)}}});function _ge(t,e,n){if(typeof window>"u")throw new Error("getHTMLFromFragment can only be used in a browser environment\nIf you want to use this in a Node environment, use the `@tiptap/html/server` import instead.");const r=hl.fromSchema(e).serializeFragment(t.content,{document:window.document});return new XMLSerializer().serializeToString(r)}function Dge(t,e){if(typeof window>"u")throw new Error("generateHTML can only be used in a browser environment\nIf you want to use this in a Node environment, use the `@tiptap/html/server` import instead.");const n=ese(e),r=vs.fromJSON(n,t);return _ge(r,n)}function Nge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pk={exports:{}},Wn={},mk={exports:{}},Bc={};function H5(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function Pge(t,e,n){}function Lge(t,e,n){}var Rge=/javascript\s*\:/img;function Bge(t,e){return Rge.test(e)?"":e}Bc.whiteList=H5(),Bc.getDefaultWhiteList=H5,Bc.onAttr=Pge,Bc.onIgnoreAttr=Lge,Bc.safeAttrValue=Bge;var jge={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},fh=jge;function Fge(t,e){t=fh.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,o=0,a="";function s(){if(!r){var d=fh.trim(t.slice(i,o)),f=d.indexOf(":");if(f!==-1){var b=fh.trim(d.slice(0,f)),x=fh.trim(d.slice(f+1));if(b){var k=e(i,a.length,b,x,d);k&&(a+=k+"; ")}}}i=o+1}for(;o<n;o++){var c=t[o];if(c==="/"&&t[o+1]==="*"){var l=t.indexOf("*/",o+2);if(l===-1)break;o=l+1,i=o+1,r=!1}else c==="("?r=!0:c===")"?r=!1:c===";"?r||s():c===`
`&&s()}return fh.trim(a)}var Hge=Fge,Dv=Bc,zge=Hge;function z5(t){return t==null}function $ge(t){var e={};for(var n in t)e[n]=t[n];return e}function $5(t){t=$ge(t||{}),t.whiteList=t.whiteList||Dv.whiteList,t.onAttr=t.onAttr||Dv.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Dv.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Dv.safeAttrValue,this.options=t}$5.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,o=n.onIgnoreAttr,a=n.safeAttrValue,s=zge(t,function(c,l,d,f,b){var x=r[d],k=!1;if(x===!0?k=x:typeof x=="function"?k=x(f):x instanceof RegExp&&(k=x.test(f)),k!==!0&&(k=!1),f=a(d,f),!!f){var E={position:l,sourcePosition:c,source:b,isWhite:k};if(k){var m=i(d,f,E);return z5(m)?d+":"+f:m}else{var m=o(d,f,E);if(!z5(m))return m}}});return s};var Uge=$5;(function(t,e){var n=Bc,r=Uge;function i(a,s){var c=new r(s);return c.process(a)}e=t.exports=i,e.FilterCSS=r;for(var o in n)e[o]=n[o];typeof window<"u"&&(window.filterCSS=t.exports)})(mk,mk.exports);var gk=mk.exports,vk={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},Wge=gk.FilterCSS,Yge=gk.getDefaultWhiteList,Nv=vk;function U5(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var W5=new Wge;function Gge(t,e,n){}function Xge(t,e,n){}function Kge(t,e,n){}function Zge(t,e,n){}function Y5(t){return t.replace(Qge,"&lt;").replace(Vge,"&gt;")}function Jge(t,e,n,r){if(n=q5(n),e==="href"||e==="src"){if(n=Nv.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(Pv.lastIndex=0,Pv.test(n))return""}else if(e==="style"){if(G5.lastIndex=0,G5.test(n)||(X5.lastIndex=0,X5.test(n)&&(Pv.lastIndex=0,Pv.test(n))))return"";r!==!1&&(r=r||W5,n=r.process(n))}return n=e3(n),n}var Qge=/</g,Vge=/>/g,qge=/"/g,eve=/&quot;/g,tve=/&#([a-zA-Z0-9]*);?/gim,nve=/&colon;?/gim,rve=/&newline;?/gim,Pv=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,G5=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,X5=/u\s*r\s*l\s*\(.*/gi;function K5(t){return t.replace(qge,"&quot;")}function Z5(t){return t.replace(eve,'"')}function J5(t){return t.replace(tve,function(e,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function Q5(t){return t.replace(nve,":").replace(rve," ")}function V5(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return Nv.trim(e)}function q5(t){return t=Z5(t),t=J5(t),t=Q5(t),t=V5(t),t}function e3(t){return t=K5(t),t=Y5(t),t}function ive(){return""}function ove(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(a){return n?!0:Nv.indexOf(t,a)!==-1}var i=[],o=!1;return{onIgnoreTag:function(a,s,c){if(r(a))if(c.isClosing){var l="[/removed]",d=c.position+l.length;return i.push([o!==!1?o:c.position,d]),o=!1,l}else return o||(o=c.position),"[removed]";else return e(a,s,c)},remove:function(a){var s="",c=0;return Nv.forEach(i,function(l){s+=a.slice(c,l[0]),c=l[1]}),s+=a.slice(c),s}}}function ave(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function sve(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Wn.whiteList=U5(),Wn.getDefaultWhiteList=U5,Wn.onTag=Gge,Wn.onIgnoreTag=Xge,Wn.onTagAttr=Kge,Wn.onIgnoreTagAttr=Zge,Wn.safeAttrValue=Jge,Wn.escapeHtml=Y5,Wn.escapeQuote=K5,Wn.unescapeQuote=Z5,Wn.escapeHtmlEntities=J5,Wn.escapeDangerHtml5Entities=Q5,Wn.clearNonPrintableCharacter=V5,Wn.friendlyAttrValue=q5,Wn.escapeAttrValue=e3,Wn.onIgnoreTagStripAll=ive,Wn.StripTagBody=ove,Wn.stripCommentTag=ave,Wn.stripBlankChar=sve,Wn.attributeWrapSign='"',Wn.cssFilter=W5,Wn.getDefaultCSSWhiteList=Yge;var Lv={},Al=vk;function lve(t){var e=Al.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Al.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function cve(t){return t.slice(0,2)==="</"}function uve(t,e,n){var r="",i=0,o=!1,a=!1,s=0,c=t.length,l="",d="";e:for(s=0;s<c;s++){var f=t.charAt(s);if(o===!1){if(f==="<"){o=s;continue}}else if(a===!1){if(f==="<"){r+=n(t.slice(i,s)),o=s,i=s;continue}if(f===">"||s===c-1){r+=n(t.slice(i,o)),d=t.slice(o,s+1),l=lve(d),r+=e(o,r.length,l,d,cve(d)),i=s+1,o=!1;continue}if(f==='"'||f==="'")for(var b=1,x=t.charAt(s-b);x.trim()===""||x==="=";){if(x==="="){a=f;continue e}x=t.charAt(s-++b)}}else if(f===a){a=!1;continue}}return i<c&&(r+=n(t.substr(i))),r}var dve=/[^a-zA-Z0-9\\_:.-]/gim;function fve(t,e){var n=0,r=0,i=[],o=!1,a=t.length;function s(b,x){if(b=Al.trim(b),b=b.replace(dve,"").toLowerCase(),!(b.length<1)){var k=e(b,x||"");k&&i.push(k)}}for(var c=0;c<a;c++){var l=t.charAt(c),d,f;if(o===!1&&l==="="){o=t.slice(n,c),n=c+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:pve(t,c+1);continue}if(o!==!1&&c===r){if(f=t.indexOf(l,c+1),f===-1)break;d=Al.trim(t.slice(r+1,f)),s(o,d),o=!1,c=f,n=c+1;continue}if(/\s|\n|\t/.test(l))if(t=t.replace(/\s|\n|\t/g," "),o===!1)if(f=hve(t,c),f===-1){d=Al.trim(t.slice(n,c)),s(d),o=!1,n=c+1;continue}else{c=f-1;continue}else if(f=mve(t,c-1),f===-1){d=Al.trim(t.slice(n,c)),d=t3(d),s(o,d),o=!1,n=c+1;continue}else continue}return n<t.length&&(o===!1?s(t.slice(n)):s(o,t3(Al.trim(t.slice(n))))),Al.trim(i.join(" "))}function hve(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function pve(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function mve(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function gve(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function t3(t){return gve(t)?t.substr(1,t.length-2):t}Lv.parseTag=uve,Lv.parseAttr=fve;var vve=gk.FilterCSS,Po=Wn,n3=Lv,yve=n3.parseTag,bve=n3.parseAttr,Rv=vk;function Bv(t){return t==null}function wve(t){var e=Rv.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Rv.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=Rv.trim(t.slice(0,-1))),{html:t,closing:n}}function xve(t){var e={};for(var n in t)e[n]=t[n];return e}function Cve(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function r3(t){t=xve(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Po.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Cve(t.whiteList||t.allowList):t.whiteList=Po.whiteList,this.attributeWrapSign=t.singleQuotedAttributeValue===!0?"'":Po.attributeWrapSign,t.onTag=t.onTag||Po.onTag,t.onTagAttr=t.onTagAttr||Po.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Po.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Po.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Po.safeAttrValue,t.escapeHtml=t.escapeHtml||Po.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new vve(t.css))}r3.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,o=n.onIgnoreTag,a=n.onTagAttr,s=n.onIgnoreTagAttr,c=n.safeAttrValue,l=n.escapeHtml,d=e.attributeWrapSign,f=e.cssFilter;n.stripBlankChar&&(t=Po.stripBlankChar(t)),n.allowCommentTag||(t=Po.stripCommentTag(t));var b=!1;n.stripIgnoreTagBody&&(b=Po.StripTagBody(n.stripIgnoreTagBody,o),o=b.onIgnoreTag);var x=yve(t,function(k,E,m,h,g){var w={sourcePosition:k,position:E,isClosing:g,isWhite:Object.prototype.hasOwnProperty.call(r,m)},p=i(m,h,w);if(!Bv(p))return p;if(w.isWhite){if(w.isClosing)return"</"+m+">";var v=wve(h),y=r[m],S=bve(v.html,function(T,C){var M=Rv.indexOf(y,T)!==-1,A=a(m,T,C,M);return Bv(A)?M?(C=c(m,T,C,f),C?T+"="+d+C+d:T):(A=s(m,T,C,M),Bv(A)?void 0:A):A});return h="<"+m,S&&(h+=" "+S),v.closing&&(h+=" /"),h+=">",h}else return p=o(m,h,w),Bv(p)?l(h):p},l);return b&&(x=b.remove(x)),x};var Sve=r3;(function(t,e){var n=Wn,r=Lv,i=Sve;function o(s,c){var l=new i(c);return l.process(s)}e=t.exports=o,e.filterXSS=o,e.FilterXSS=i,function(){for(var s in n)e[s]=n[s];for(var c in r)e[c]=r[c]}(),typeof window<"u"&&(window.filterXSS=t.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=t.exports)})(pk,pk.exports);var kve=pk.exports;const Eve=Nge(kve),Tve={a:["href","title","target"],span:["style","class","data-display"],blockquote:["class","style"],p:["class","style"],hr:[],pre:[],code:[],strong:[],img:["src","alt","title","width","height","style","data-display"],label:["contenteditable"],input:["type","value","checked"],div:["class","style"],iframe:["src","allowfullscreen","frameborder","width","height"],em:[],s:[],mark:["class","style"],sub:["class","style"],sup:["class","style"],h1:["class","style"],h2:["class","style"],h3:["class","style"],h4:["class","style"],h5:["class","style"],h6:["class","style"],ul:["class","data-type"],li:["class","data-checked","itemtypename"],ol:[],u:[],table:["class","style"],colgroup:[],col:["style"],tbody:["class","style"],tr:["class","style"],th:["class","style","colspan","rowspan"],td:["class","style","colspan","rowspan"],br:[]},Mve=["innerHTML"],Ive=u.defineComponent({__name:"VuetifyViewer",props:{value:{default:""},dark:{type:Boolean,default:void 0},dense:{type:Boolean,default:!1},markdownTheme:{type:[String,Boolean],default:void 0},xss:{type:[Boolean,Array],default:!0},xssOptions:{default:()=>Tve},extensions:{default:()=>[]}},setup(t){const e=t,{state:n}=cv(),r=oi.useTheme(),{markdownThemeStyle:i}=P4(u.computed(()=>e.markdownTheme)),o=u.computed(()=>[...n.extensions,...e.extensions]),a=u.computed(()=>Qu(e.dark)?e.dark:Qu(r.current.value.dark)?r.current.value.dark:!1),s=u.computed(()=>({__dark:u.unref(a),dense:e.dense,view:!0,...u.unref(i)})),c=u.computed(()=>sh(e.value)?e.value:Dge(e.value,u.unref(o))),l=u.computed(()=>{let x=u.unref(c);if(e.xss===!1)return x;x=x.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/").replace("https://vimeo.com/","https://player.vimeo.com/video/");const k=e.xssOptions;return Eve(x,{whiteList:k,css:!1})}),d=u.ref();function f(){var x;(x=d.value)==null||x.querySelectorAll("img").forEach(k=>{var E;(E=k.nextElementSibling)!=null&&E.classList.contains("image-figure_caption")&&(k.nextElementSibling.style.width=`${k.offsetWidth}px`)})}const b=new ResizeObserver(()=>f());return u.watchEffect(x=>{d.value&&u.unref(b).observe(d.value),x(()=>{u.unref(b).disconnect()})}),(x,k)=>(u.openBlock(),u.createElementBlock("div",{class:u.normalizeClass(["vuetify-pro-tiptap-editor__content",s.value]),style:{width:"100%"}},[u.renderSlot(x.$slots,"before"),u.createElementVNode("div",{ref_key:"contentEl",ref:d,class:"content",innerHTML:l.value},null,8,Mve),u.renderSlot(x.$slots,"after")],2))}});var Ove=Ir.create({name:"doc",topNode:!0,content:"block+"}),Ave=Ir.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",gn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:s}=r.extensionManager,c=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:l,dispatch:d})=>{if(d&&c&&a){const f=c.filter(b=>s.includes(b.type.name));l.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_ve=Object.defineProperty,Dve=(t,e)=>{for(var n in e)_ve(t,n,{get:e[n],enumerable:!0})},Nve="listItem",i3="textStyle",o3=/^\s*([-+*])\s$/,a3=Ir.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Nve,this.editor.getAttributes(i3)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Xu({find:o3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xu({find:o3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(i3),editor:this.editor})),[t]}}),s3=Ir.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",gn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Pve={};Dve(Pve,{findListItemPos:()=>hh,getNextListDepth:()=>yk,handleBackspace:()=>bk,handleDelete:()=>wk,hasListBefore:()=>l3,hasListItemAfter:()=>Lve,hasListItemBefore:()=>c3,listItemHasSubList:()=>u3,nextListIsDeeper:()=>d3,nextListIsHigher:()=>f3});var hh=(t,e)=>{const{$from:n}=e.selection,r=Mr(t,e.schema);let i=null,o=n.depth,a=n.pos,s=null;for(;o>0&&s===null;)i=n.node(o),i.type===r?s=o:(o-=1,a-=1);return s===null?null:{$pos:e.doc.resolve(a),depth:s}},yk=(t,e)=>{const n=hh(t,e);if(!n)return!1;const[,r]=ise(e,t,n.$pos.pos+4);return r},l3=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},c3=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},u3=(t,e,n)=>{if(!n)return!1;const r=Mr(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},bk=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Tl(t.state,e)&&l3(t.state,e,n)){const{$anchor:a}=t.state.selection,s=t.state.doc.resolve(a.before()-1),c=[];s.node().descendants((f,b)=>{f.type.name===e&&c.push({node:f,pos:b})});const l=c.at(-1);if(!l)return!1;const d=t.state.doc.resolve(s.start()+l.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Tl(t.state,e)||!lse(t.state))return!1;const r=hh(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=u3(e,t.state,i);return c3(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},d3=(t,e)=>{const n=yk(t,e),r=hh(t,e);return!r||!n?!1:n>r.depth},f3=(t,e)=>{const n=yk(t,e),r=hh(t,e);return!r||!n?!1:n<r.depth},wk=(t,e)=>{if(!Tl(t.state,e)||!sse(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:d3(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():f3(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Lve=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},Rve=Zt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&wk(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&wk(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&bk(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&bk(t,n,r)&&(e=!0)}),e}}}}),Bve="listItem",h3="textStyle",p3=/^(\d+)\.\s$/,m3=Ir.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",gn(this.options.HTMLAttributes,n),0]:["ol",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Bve,this.editor.getAttributes(h3)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Xu({find:p3,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xu({find:p3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(h3)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),jve=/^\s*(\[([( |x])?\])\s$/,g3=Ir.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",gn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),a=document.createElement("span"),s=document.createElement("input"),c=document.createElement("div"),l=d=>{var f,b;s.ariaLabel=((b=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:b.call(f,d,s.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return l(t),o.contentEditable="false",s.type="checkbox",s.addEventListener("mousedown",d=>d.preventDefault()),s.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){s.checked=!s.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:b})=>{const x=n();if(typeof x!="number")return!1;const k=b.doc.nodeAt(x);return b.setNodeMarkup(x,void 0,{...k==null?void 0:k.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(s.checked=!s.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=t.attrs.checked,s.checked=t.attrs.checked,o.append(s,a),i.append(o,c),Object.entries(e).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:c,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,s.checked=d.attrs.checked,l(d),!0)}}},addInputRules(){return[Xu({find:jve,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),v3=Ir.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",gn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Zt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(a3.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(s3.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Rve.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(m3.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(g3.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(v3.configure(this.options.taskList)),t}});var Fve=Ir.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Hve=Ir.create({name:"text",group:"inline"}),zve=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const o=n.getAttribute("style"),a=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${a};${o}`)})},y3=ra.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&zve(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),$ve=Zt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),s=o.slice(1).join(":").trim();if(a==="background-color")return s.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),b3=Zt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),s=o.slice(1).join(":").trim();if(a==="color")return s.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Uve=Zt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Wve=Zt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Yve=Zt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Zt.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push($ve.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(b3.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(Uve.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Wve.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(Yve.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(y3.configure(this.options.textStyle)),t}});function Gve(t={}){return new En({view(e){return new Xve(e,t)}})}class Xve{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),a=o.width/i.offsetWidth,s=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,b=e.nodeAfter;if(f||b){let x=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(x){let k=x.getBoundingClientRect(),E=f?k.bottom:k.top;f&&b&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*s;r={left:k.left,right:k.right,top:E-m,bottom:E+m}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*a;r={left:f.left-b,right:f.left+b,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let l,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")l=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),b=f.width/c.offsetWidth,x=f.height/c.offsetHeight;l=f.left-c.scrollLeft*b,d=f.top-c.scrollTop*x}this.element.style.left=(r.left-l)/a+"px",this.element.style.top=(r.top-d)/s+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let s=JP(this.editorView.state.doc,a,this.editorView.dragging.slice);s!=null&&(a=s)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ur extends Dt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ur.valid(r)?new ur(r):Dt.near(r)}content(){return lt.empty}eq(e){return e instanceof ur&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ur(e.resolve(n.pos))}getBookmark(){return new xk(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Kve(e)||!Zve(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ur.valid(e))return e;let i=e.pos,o=null;for(let a=e.depth;;a--){let s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){o=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=n;let c=e.doc.resolve(i);if(ur.valid(c))return c}for(;;){let a=n>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!kt.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=a,i+=n;let s=e.doc.resolve(i);if(ur.valid(s))return s}return null}}}ur.prototype.visible=!1,ur.findFrom=ur.findGapCursorFrom,Dt.jsonID("gapcursor",ur);class xk{constructor(e){this.pos=e}map(e){return new xk(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ur.valid(n)?new ur(n):Dt.near(n)}}function Kve(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Zve(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Jve(){return new En({props:{decorations:eye,createSelectionBetween(t,e,n){return e.pos==n.pos&&ur.valid(n)?new ur(n):null},handleClick:Vve,handleKeyDown:Qve,handleDOMEvents:{beforeinput:qve}}})}const Qve=iS({ArrowLeft:jv("horiz",-1),ArrowRight:jv("horiz",1),ArrowUp:jv("vert",-1),ArrowDown:jv("vert",1)});function jv(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let a=r.selection,s=e>0?a.$to:a.$from,c=a.empty;if(a instanceof Et){if(!o.endOfTextblock(n)||s.depth==0)return!1;c=!1,s=r.doc.resolve(e>0?s.after():s.before())}let l=ur.findGapCursorFrom(s,e,c);return l?(i&&i(r.tr.setSelection(new ur(l))),!0):!1}}function Vve(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ur.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&kt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ur(r))),!0)}function qve(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ur))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ye.empty;for(let a=r.length-1;a>=0;a--)i=Ye.from(r[a].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new lt(i,0,0));return o.setSelection(Et.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function eye(t){if(!(t.selection instanceof ur))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Dn.create(t.doc,[Wr.widget(t.selection.head,e,{key:"gapcursor"})])}var Fv=200,Yr=function(){};Yr.prototype.append=function(t){return t.length?(t=Yr.from(t),!this.length&&t||t.length<Fv&&this.leafAppend(t)||this.length<Fv&&t.leafPrepend(this)||this.appendInner(t)):this},Yr.prototype.prepend=function(t){return t.length?Yr.from(t).append(this):this},Yr.prototype.appendInner=function(t){return new tye(this,t)},Yr.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Yr.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Yr.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Yr.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Yr.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(i,o){return r.push(t(i,o))},e,n),r},Yr.from=function(t){return t instanceof Yr?t:t&&t.length?new w3(t):Yr.empty};var w3=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,i){return r==0&&i==this.length?this:new e(this.values.slice(r,i))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,i,o,a){for(var s=i;s<o;s++)if(r(this.values[s],a+s)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,a){for(var s=i-1;s>=o;s--)if(r(this.values[s],a+s)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Fv)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Fv)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Yr);Yr.empty=new w3([]);var tye=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,i,o){var a=this.left.length;if(r<a&&this.left.forEachInner(n,r,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(n,Math.max(r-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,i,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(n,r-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(n,Math.min(r,a),i,o)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var i=this.left.length;return r<=i?this.left.slice(n,r):n>=i?this.right.slice(n-i,r-i):this.left.slice(n,i).append(this.right.slice(0,r-i))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Yr);const nye=500;class da{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=e.tr,s,c,l=[],d=[];return this.items.forEach((f,b)=>{if(!f.step){i||(i=this.remapping(r,b+1),o=i.maps.length),o--,d.push(f);return}if(i){d.push(new Ya(f.map));let x=f.step.map(i.slice(o)),k;x&&a.maybeStep(x).doc&&(k=a.mapping.maps[a.mapping.maps.length-1],l.push(new Ya(k,void 0,void 0,l.length+d.length))),o--,k&&i.appendMap(k,o)}else a.maybeStep(f.step);if(f.selection)return s=i?f.selection.map(i.slice(o)):f.selection,c=new da(this.items.slice(0,r).append(d.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:s}}addTransform(e,n,r,i){let o=[],a=this.eventCount,s=this.items,c=!i&&s.length?s.get(s.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),b=new Ya(e.mapping.maps[d],f,n),x;(x=c&&c.merge(b))&&(b=x,d?o.pop():s=s.slice(0,s.length-1)),o.push(b),n&&(a++,n=void 0),i||(c=b)}let l=a-r.depth;return l>iye&&(s=rye(s,l),a-=l),new da(s.append(o),a)}remapping(e,n){let r=new Ff;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new da(this.items.append(e.map(n=>new Ya(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,a=e.steps.length,s=this.eventCount;this.items.forEach(b=>{b.selection&&s--},i);let c=n;this.items.forEach(b=>{let x=o.getMirror(--c);if(x==null)return;a=Math.min(a,x);let k=o.maps[x];if(b.step){let E=e.steps[x].invert(e.docs[x]),m=b.selection&&b.selection.map(o.slice(c+1,x));m&&s++,r.push(new Ya(k,E,m))}else r.push(new Ya(k))},i);let l=[];for(let b=n;b<a;b++)l.push(new Ya(o.maps[b]));let d=this.items.slice(0,i).append(l).append(r),f=new da(d,s);return f.emptyItemCount()>nye&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((a,s)=>{if(s>=e)i.push(a),a.selection&&o++;else if(a.step){let c=a.step.map(n.slice(r)),l=c&&c.getMap();if(r--,l&&n.appendMap(l,r),c){let d=a.selection&&a.selection.map(n.slice(r));d&&o++;let f=new Ya(l.invert(),c,d),b,x=i.length-1;(b=i.length&&i[x].merge(f))?i[x]=b:i.push(f)}}else a.map&&r--},this.items.length,0),new da(Yr.from(i.reverse()),o)}}da.empty=new da(Yr.empty,0);function rye(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ya{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ya(n.getMap().invert(),n,this.selection)}}}class _l{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const iye=20;function oye(t,e,n,r){let i=n.getMeta(jc),o;if(i)return i.historyState;n.getMeta(lye)&&(t=new _l(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(jc))return a.getMeta(jc).redo?new _l(t.done.addTransform(n,void 0,r,Hv(e)),t.undone,x3(n.mapping.maps),t.prevTime,t.prevComposition):new _l(t.done,t.undone.addTransform(n,void 0,r,Hv(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let s=n.getMeta("composition"),c=t.prevTime==0||!a&&t.prevComposition!=s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!aye(n,t.prevRanges)),l=a?Ck(t.prevRanges,n.mapping):x3(n.mapping.maps);return new _l(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,Hv(e)),da.empty,l,n.time,s??t.prevComposition)}else return(o=n.getMeta("rebased"))?new _l(t.done.rebased(n,o),t.undone.rebased(n,o),Ck(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new _l(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ck(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function aye(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function x3(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,a)=>e.push(o,a));return e}function Ck(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function sye(t,e,n){let r=Hv(e),i=jc.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let a=o.selection.resolve(o.transform.doc),s=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),c=new _l(n?s:o.remaining,n?o.remaining:s,null,0,-1);return o.transform.setSelection(a).setMeta(jc,{redo:n,historyState:c})}let Sk=!1,C3=null;function Hv(t){let e=t.plugins;if(C3!=e){Sk=!1,C3=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Sk=!0;break}}return Sk}const jc=new qn("history"),lye=new qn("closeHistory");function cye(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new En({key:jc,state:{init(){return new _l(da.empty,da.empty,null,0,-1)},apply(e,n,r){return oye(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?k3:r=="historyRedo"?E3:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function S3(t,e){return(n,r)=>{let i=jc.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=sye(i,n,t);o&&r(o.scrollIntoView())}return!0}}const k3=S3(!1),E3=S3(!0);var uye=Zt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new En({key:new qn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const a=o-i,s=0,c=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const l=r.tr.deleteRange(s,c);return t=!0,l}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,s=o-r,c=a-s,l=a;return e.deleteRange(c,l),!(this.storage.characters({node:e.doc})>r)}})]}}),dye=Zt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gve(this.options)]}}),fye=Zt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new En({key:new qn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return Dn.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((c,l)=>{if(!c.isText){if(!(i>=l&&i<=l+c.nodeSize-1))return!1;a+=1}});let s=0;return t.descendants((c,l)=>{if(c.isText||!(i>=l&&i<=l+c.nodeSize-1))return!1;if(s+=1,this.options.mode==="deepest"&&a-s>0||this.options.mode==="shallowest"&&s>1)return this.options.mode==="deepest";o.push(Wr.node(l,l+c.nodeSize,{class:this.options.className}))}),Dn.create(t,o)}}})]}}),hye=Zt.create({name:"gapCursor",addProseMirrorPlugins(){return[Jve()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=mn(Tt(t,"allowGapCursor",n)))!=null?e:null}}}),pye=Zt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new En({key:new qn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((a,s)=>{const c=r>=s&&r<=s+a.nodeSize,l=!a.isLeaf&&Jg(a);if((c||!this.options.showOnlyCurrent)&&l){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=Wr.node(s,s+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:s,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Dn.create(t,i)}}})]}});Zt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new En({key:new qn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||tB(n.selection)||t.view.dragging?null:Dn.create(n.doc,[Wr.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function T3({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}Zt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new qn(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new En({key:t,appendTransaction:(n,r,i)=>{const{doc:o,tr:a,schema:s}=i,c=t.getState(i),l=o.content.size,d=s.nodes[this.options.node];if(c)return a.insert(l,d.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!T3({node:i,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!T3({node:i,types:e})}}})]}});var mye=Zt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>k3(t,e),redo:()=>({state:t,dispatch:e})=>E3(t,e)}},addProseMirrorPlugins(){return[cye(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const gye=t=>{var e;return{action:()=>t.editor.chain().focus().toggleBlockquote().run(),isActive:()=>t.editor.isActive("blockquote")||!1,disabled:((e=t.isDisabled)==null?void 0:e.call(t,t.editor))||!t.editor.can().toggleCodeBlock(),title:t.t("editor.blockquote.tooltip"),icon:"blockquote"}};var vye="M19,12H17V15H14V17H19V12M7,9H10V7H5V12H7V9M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3M21,19H3V5H21V19Z",yye="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",bye="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",wye="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",xye="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M11 8H9V10C9 11.1 8.1 12 7 12C8.1 12 9 12.9 9 14V16H11V18H9C7.9 18 7 17.1 7 16V15C7 13.9 6.1 13 5 13V11C6.1 11 7 10.1 7 9V8C7 6.9 7.9 6 9 6H11V8M19 13C17.9 13 17 13.9 17 15V16C17 17.1 16.1 18 15 18H13V16H15V14C15 12.9 15.9 12 17 12C15.9 12 15 11.1 15 10V8H13V6H15C16.1 6 17 6.9 17 8V9C17 10.1 17.9 11 19 11V13Z",Cye="M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z",Sye="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",kye="M13.09 20H6L12 14L13.88 15.88C14.5 14.9 15.36 14.1 16.4 13.6L18 12V13.09C18.33 13.04 18.66 13 19 13C19.34 13 19.67 13.04 20 13.09V8L14 2H6C4.89 2 4 2.89 4 4V20C4 21.1 4.89 22 6 22H13.81C13.46 21.39 13.21 20.72 13.09 20M13 3.5L18.5 9H13V3.5M8 9C9.11 9 10 9.9 10 11S9.11 13 8 13 6 12.11 6 11 6.9 9 8 9M20 15V18H23V20H20V23H18V20H15V18H18V15H20Z",M3="M3,3H21V5H3V3M7,7H17V9H7V7M3,11H21V13H3V11M7,15H17V17H7V15M3,19H21V21H3V19Z",Eye="M3,3H21V5H3V3M3,7H21V9H3V7M3,11H21V13H3V11M3,15H21V17H3V15M3,19H21V21H3V19Z",Tye="M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z",Mye="M3,3H21V5H3V3M9,7H21V9H9V7M3,11H21V13H3V11M9,15H21V17H9V15M3,19H21V21H3V19Z",Iye="M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z",Oye="M6,5V5.18L8.82,8H11.22L10.5,9.68L12.6,11.78L14.21,8H20V5H6M3.27,5L2,6.27L8.97,13.24L6.5,19H9.5L11.07,15.34L16.73,21L18,19.73L3.55,5.27L3.27,5Z",Aye="M4,17L6.75,14.25L6.72,14.23C6.14,13.64 6.14,12.69 6.72,12.11L11.46,7.37L15.7,11.61L10.96,16.35C10.39,16.93 9.46,16.93 8.87,16.37L8.24,17H4M15.91,2.91C16.5,2.33 17.45,2.33 18.03,2.91L20.16,5.03C20.74,5.62 20.74,6.57 20.16,7.16L16.86,10.45L12.62,6.21L15.91,2.91Z",_ye="M3,7H9V13H3V7M3,3H21V5H3V3M21,7V9H11V7H21M21,11V13H11V11H21M3,15H17V17H3V15M3,19H21V21H3V19Z",Dye="M3,7H9V13H3V7M3,3H21V5H3V3M21,11V13H11V11H21M3,15H17V17H3V15M3,19H21V21H3V19Z",Nye="M15,7H21V13H15V7M3,3H21V5H3V3M13,7V9H3V7H13M9,11V13H3V11H9M3,15H17V17H3V15M3,19H21V21H3V19Z",Pye="M17,8H20V20H21V21H17V20H18V17H14L12.5,20H14V21H10V20H11L17,8M18,9L14.5,16H18V9M5,3H10C11.11,3 12,3.89 12,5V16H9V11H6V16H3V5C3,3.89 3.89,3 5,3M6,5V9H9V5H6Z",Lye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z",Rye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z",Bye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z",jye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M18,18V13H13V11L18,4H20V11H21V13H20V18H18M18,11V7.42L15.45,11H18Z",Fye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H20V6H15V10H17A4,4 0 0,1 21,14A4,4 0 0,1 17,18H15A2,2 0 0,1 13,16V15H15V16H17A2,2 0 0,0 19,14A2,2 0 0,0 17,12H15A2,2 0 0,1 13,10V6A2,2 0 0,1 15,4Z",Hye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V7H19V6H15V10H19A2,2 0 0,1 21,12V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V6A2,2 0 0,1 15,4M15,12V16H19V12H15Z",zye="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M13,8H15.31L15.63,5H17.63L17.31,8H19.31L19.63,5H21.63L21.31,8H23V10H21.1L20.9,12H23V14H20.69L20.37,17H18.37L18.69,14H16.69L16.37,17H14.37L14.69,14H13V12H14.9L15.1,10H13V8M17.1,10L16.9,12H18.9L19.1,10H17.1Z",$ye="M11,13H21V11H11M11,9H21V7H11M3,3V5H21V3M3,21H21V19H3M3,12L7,16V8M11,17H21V15H11V17Z",Uye="M11,13H21V11H11M11,9H21V7H11M3,3V5H21V3M11,17H21V15H11M3,8V16L7,12M3,21H21V19H3V21Z",Wye="M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z",Yye="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z",Gye="M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z",Xye="M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",Kye="M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z",Zye="M10,7L8,11H11V17H5V11L7,7H10M18,7L16,11H19V17H13V11L15,7H18Z",Jye="M2 4V7H7V19H10V7H15V4H2M21 9H12V12H15V19H18V12H21V9Z",Qye="M3,14H21V12H3M5,4V7H10V10H14V7H19V4M10,19H14V16H10V19Z",Vye="M16,7.41L11.41,12L16,16.59L14.59,18L10,13.41L5.41,18L4,16.59L8.59,12L4,7.41L5.41,6L10,10.59L14.59,6L16,7.41M21.85,21.03H16.97V20.03L17.86,19.23C18.62,18.58 19.18,18.04 19.56,17.6C19.93,17.16 20.12,16.75 20.13,16.36C20.14,16.08 20.05,15.85 19.86,15.66C19.68,15.5 19.39,15.38 19,15.38C18.69,15.38 18.42,15.44 18.16,15.56L17.5,15.94L17.05,14.77C17.32,14.56 17.64,14.38 18.03,14.24C18.42,14.1 18.85,14 19.32,14C20.1,14.04 20.7,14.25 21.1,14.66C21.5,15.07 21.72,15.59 21.72,16.23C21.71,16.79 21.53,17.31 21.18,17.78C20.84,18.25 20.42,18.7 19.91,19.14L19.27,19.66V19.68H21.85V21.03Z",qye="M16,7.41L11.41,12L16,16.59L14.59,18L10,13.41L5.41,18L4,16.59L8.59,12L4,7.41L5.41,6L10,10.59L14.59,6L16,7.41M21.85,9H16.97V8L17.86,7.18C18.62,6.54 19.18,6 19.56,5.55C19.93,5.11 20.12,4.7 20.13,4.32C20.14,4.04 20.05,3.8 19.86,3.62C19.68,3.43 19.39,3.34 19,3.33C18.69,3.34 18.42,3.4 18.16,3.5L17.5,3.89L17.05,2.72C17.32,2.5 17.64,2.33 18.03,2.19C18.42,2.05 18.85,2 19.32,2C20.1,2 20.7,2.2 21.1,2.61C21.5,3 21.72,3.54 21.72,4.18C21.71,4.74 21.53,5.26 21.18,5.73C20.84,6.21 20.42,6.66 19.91,7.09L19.27,7.61V7.63H21.85V9Z",ebe="M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z",tbe="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",nbe="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",rbe="M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z",ibe="M22 13H14V11H22V13M22 7H14V9H22V7M14 17H22V15H14V17M12 9V15C12 16.1 11.1 17 10 17H4C2.9 17 2 16.1 2 15V9C2 7.9 2.9 7 4 7H10C11.1 7 12 7.9 12 9M10.5 15L8.3 12L6.5 14.3L5.3 12.8L3.5 15H10.5Z",obe="M2,5.27L3.28,4L20,20.72L18.73,22L13.9,17.17L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L12.5,15.76L10.88,14.15C10.87,14.39 10.77,14.64 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C8.12,13.77 7.63,12.37 7.72,11L2,5.27M12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.79,8.97L9.38,7.55L12.71,4.22M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.2,10.54 16.61,12.5 16.06,14.23L14.28,12.46C14.23,11.78 13.94,11.11 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z",I3="M10.6 13.4A1 1 0 0 1 9.2 14.8A4.8 4.8 0 0 1 9.2 7.8L12.7 4.2A5.1 5.1 0 0 1 19.8 4.2A5.1 5.1 0 0 1 19.8 11.3L18.3 12.8A6.4 6.4 0 0 0 17.9 10.4L18.4 9.9A3.2 3.2 0 0 0 18.4 5.6A3.2 3.2 0 0 0 14.1 5.6L10.6 9.2A2.9 2.9 0 0 0 10.6 13.4M23 18V20H20V23H18V20H15V18H18V15H20V18M16.2 13.7A4.8 4.8 0 0 0 14.8 9.2A1 1 0 0 0 13.4 10.6A2.9 2.9 0 0 1 13.4 14.8L9.9 18.4A3.2 3.2 0 0 1 5.6 18.4A3.2 3.2 0 0 1 5.6 14.1L6.1 13.7A7.3 7.3 0 0 1 5.7 11.2L4.2 12.7A5.1 5.1 0 0 0 4.2 19.8A5.1 5.1 0 0 0 11.3 19.8L13.1 18A6 6 0 0 1 16.2 13.7Z",abe="M19,13H5V11H19V13Z",sbe="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",lbe="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z",cbe="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",ube="M9 7V17H15V15H11V7H9Z",dbe="M9 7C7.9 7 7 7.9 7 9V17H9V9H11V16H13V9H15V17H17V9C17 7.9 16.11 7 15 7H9Z",fbe="M11 7C9.9 7 9 7.9 9 9V11C9 12.11 9.9 13 11 13H13V15H9V17H13C14.11 17 15 16.11 15 15V13C15 11.9 14.11 11 13 11H11V9H15V7H11Z",hbe="M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z",pbe="M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z",mbe="M13,2A2,2 0 0,0 11,4V20A2,2 0 0,0 13,22H22V2H13M20,10V14H13V10H20M20,16V20H13V16H20M20,4V8H13V4H20M9,11H6V8H4V11H1V13H4V16H6V13H9V11Z",gbe="M4,2H11A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M17.59,12L15,9.41L16.41,8L19,10.59L21.59,8L23,9.41L20.41,12L23,14.59L21.59,16L19,13.41L16.41,16L15,14.59L17.59,12Z",vbe="M5,10H3V4H11V6H5V10M19,18H13V20H21V14H19V18M5,18V14H3V20H11V18H5M21,4H13V6H19V10H21V4M8,13V15L11,12L8,9V11H3V13H8M16,11V9L13,12L16,15V13H21V11H16Z",ybe="M18,14H20V17H23V19H20V22H18V19H15V17H18V14M4,3H18A2,2 0 0,1 20,5V12.08C18.45,11.82 16.92,12.18 15.68,13H12V17H13.08C12.97,17.68 12.97,18.35 13.08,19H4A2,2 0 0,1 2,17V5A2,2 0 0,1 4,3M4,7V11H10V7H4M12,7V11H18V7H12M4,13V17H10V13H4Z",bbe="M15.46,15.88L16.88,14.46L19,16.59L21.12,14.46L22.54,15.88L20.41,18L22.54,20.12L21.12,21.54L19,19.41L16.88,21.54L15.46,20.12L17.59,18L15.46,15.88M4,3H18A2,2 0 0,1 20,5V12.08C18.45,11.82 16.92,12.18 15.68,13H12V17H13.08C12.97,17.68 12.97,18.35 13.08,19H4A2,2 0 0,1 2,17V5A2,2 0 0,1 4,3M4,7V11H10V7H4M12,7V11H18V7H12M4,13V17H10V13H4Z",wbe="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z",xbe="M22,14A2,2 0 0,0 20,12H4A2,2 0 0,0 2,14V21H4V19H8V21H10V19H14V21H16V19H20V21H22V14M4,14H8V17H4V14M10,14H14V17H10V14M20,14V17H16V14H20M11,10H13V7H16V5H13V2H11V5H8V7H11V10Z",Cbe="M9.41,13L12,15.59L14.59,13L16,14.41L13.41,17L16,19.59L14.59,21L12,18.41L9.41,21L8,19.59L10.59,17L8,14.41L9.41,13M22,9A2,2 0 0,1 20,11H4A2,2 0 0,1 2,9V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V9M4,9H8V6H4V9M10,9H14V6H10V9M16,9H20V6H16V9Z",Sbe="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",kbe="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",Ebe="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z",Tbe="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z";const Mbe={bold:Iye,italic:Wye,underline:ebe,strike:Qye,color:Tbe,highlight:Aye,heading:zye,textAlign:M3,fontFamily:Pye,fontSize:Jye,subscript:Vye,superscript:qye,bulletList:Yye,orderedList:Xye,taskList:Gye,indent:Uye,outdent:$ye,link:I3,fileImagePlus:kye,image:rbe,imageLabel:ibe,video:Ebe,table:hbe,blockquote:Zye,horizontalRule:abe,code:Cye,codeBlock:xye,clear:Oye,undo:kbe,redo:cbe,markdownTheme:lbe,fullscreen:tbe,h1:Lye,h2:Rye,h3:Bye,h4:jye,h5:Fye,h6:Hye,p:Kye,left:Tye,center:M3,right:Mye,justify:Eye,circle:bye,close:wye,fullscreenExit:nbe,linkVariant:I3,linkVariantOff:obe,openInNew:sbe,formatFloatLeft:_ye,formatFloatNone:Dye,formatFloatRight:Nye,sizeS:fbe,sizeM:dbe,sizeL:ube,aspectRatio:vye,delete:Sye,text:Sbe,tablePlus:ybe,tableRemove:bbe,tableColumnPlusAfter:pbe,tableColumnPlusBefore:mbe,tableColumnRemove:gbe,tableRowPlusAfter:wbe,tableRowPlusBefore:xbe,tableRowRemove:Cbe,tableMergeCells:vbe,check:yye};function Cr(t){if(t)return`svg:${Mbe[t]}`}const O3={editor:{type:Object,required:!0},icon:{type:String,default:void 0},rawIcon:{type:String,default:void 0},tooltip:{type:String,default:""},disabled:{type:Boolean,default:!1},color:{type:String,default:void 0},action:{type:Function,default:void 0},isActive:{type:Function,default:void 0},class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},Yn={editor:{type:Object,required:!0},t:{type:Function,required:!0},isDisabled:{type:Function,default:void 0}},Wt=u.defineComponent({__name:"index",props:O3,setup(t){const e=t,n=u.inject("disableToolbar",u.ref(!1));return(r,i)=>{var o;const a=_t,s=cf,c=dt;return u.openBlock(),u.createBlock(c,{density:"comfortable",size:"small",disabled:u.unref(n)||r.disabled,color:r.color,icon:"",class:u.normalizeClass(["rounded me-1 ms-0",[e.class,{"v-btn--active":(o=r.isActive)==null?void 0:o.call(r)}]]),onClick:r.action},{default:u.withCtx(()=>[u.createVNode(a,{icon:e.rawIcon||u.unref(Cr)(e.icon)},null,8,["icon"]),u.createVNode(s,{eager:!1,activator:"parent",location:"top",text:e.tooltip},null,8,["text"]),u.renderSlot(r.$slots,"default")]),_:3},8,["disabled","color","class","onClick"])}}}),Ibe=u.defineComponent({__name:"BoldActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleBold().run(),"is-active":()=>e.editor.isActive("bold")||!1,disabled:!e.editor.can().toggleBold(),tooltip:e.t("editor.bold.tooltip"),icon:"bold"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),Obe=u.defineComponent({__name:"BulletListActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleBulletList().run(),"is-active":()=>e.editor.isActive("bulletList")||!1,disabled:!e.editor.can().toggleBulletList(),tooltip:e.t("editor.bulletlist.tooltip"),icon:"bulletList"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),Abe=u.defineComponent({__name:"ClearActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().clearNodes().unsetAllMarks().run(),disabled:!e.editor.can().chain().focus().clearNodes().unsetAllMarks().run(),tooltip:e.t("editor.clear.tooltip"),icon:"clear"},null,8,["editor","action","disabled","tooltip"]))}}),_be=u.defineComponent({__name:"CodeActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleCode().run(),"is-active":()=>e.editor.isActive("code")||!1,disabled:!e.editor.can().toggleCode(),tooltip:e.t("editor.code.tooltip"),icon:"code"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),Dbe=t=>{var e;return{action:()=>t.editor.chain().focus().toggleCodeBlock().run(),isActive:()=>t.editor.isActive("codeBlock")||!1,disabled:((e=t.isDisabled)==null?void 0:e.call(t,t.editor))||!t.editor.can().toggleCodeBlock(),title:t.t("editor.codeblock.tooltip"),icon:"codeBlock"}},A3=u.defineComponent({__name:"ColorPicker",props:{modelValue:{default:""},nudgeLeft:{default:0},nudgeTop:{default:0},more:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=t,r=e,i=u.ref(""),o=u.ref(!1);u.watch(o,s=>{i.value=n.modelValue});function a(s){r("update:modelValue",s),r("change",s),i.value=s,o.value=!1}return(s,c)=>{const l=_t,d=dt,f=Fn,b=s0,x=ji,k=Go;return u.openBlock(),u.createBlock(k,{modelValue:o.value,"onUpdate:modelValue":c[2]||(c[2]=E=>o.value=E),"nudge-left":s.nudgeLeft||255,"nudge-top":s.nudgeTop||42,"close-on-content-click":!1,transition:"scale-transition",origin:s.nudgeLeft?"top left":"top right",activator:"parent"},{default:u.withCtx(()=>[u.createVNode(x,null,{default:u.withCtx(()=>[u.createVNode(b,{class:"d-flex flex-wrap justify-between ma-1",fluid:"","max-width":230},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(u.unref(Wle),E=>(u.openBlock(),u.createBlock(d,{key:E,flat:"",icon:"",density:"compact",onClick:m=>a(E)},{default:u.withCtx(()=>[u.createVNode(l,{icon:u.unref(Cr)("circle"),color:E},null,8,["icon","color"])]),_:2},1032,["onClick"]))),128)),u.createVNode(f,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=E=>i.value=E),class:"mt-2 mx-1","append-inner-icon":u.unref(Cr)("check"),density:"compact",label:"HEX",variant:"outlined",flat:"","hide-details":"","single-line":"",clearable:"","onClick:appendInner":c[1]||(c[1]=E=>a(i.value))},u.createSlots({_:2},[i.value?{name:"prepend-inner",fn:u.withCtx(()=>[u.createVNode(l,{class:"opacity-100",icon:u.unref(Cr)("circle"),color:i.value},null,8,["icon","color"])]),key:"0"}:void 0]),1032,["modelValue","append-inner-icon"])]),_:1})]),_:1})]),_:1},8,["modelValue","nudge-left","nudge-top","origin"])}}}),Nbe=u.defineComponent({__name:"ColorActionButton",props:Yn,setup(t){const e=t,{state:n}=JS();function r(o){typeof o=="string"&&e.editor.chain().focus().setColor(o).run()}function i(){const{color:o}=e.editor.getAttributes("textStyle");return o&&e.editor.isActive({color:o})||!1}return u.watchEffect(()=>{const{color:o}=e.editor.getAttributes("textStyle");n.color=o}),(o,a)=>(u.openBlock(),u.createBlock(Wt,{editor:o.editor,icon:"color",tooltip:o.t("editor.color.tooltip"),disabled:!o.editor.can().setColor(""),color:u.unref(n).color,"is-active":i},{default:u.withCtx(()=>[u.createVNode(A3,{modelValue:u.unref(n).color,"onUpdate:modelValue":a[0]||(a[0]=s=>u.unref(n).color=s),activator:"parent","nudge-top":-4,"nudge-left":8,onChange:r},null,8,["modelValue"])]),_:1},8,["editor","tooltip","disabled","color"]))}}),Pbe=u.defineComponent({__name:"FullscreenActionButton",props:{...Yn,useWindow:{type:Boolean,default:!1}},setup(t){const e=t,{t:n}=Is(),{state:r,toggleFullscreen:i}=JS(),{isFullscreen:o,enter:a,exit:s}=bpe();u.watch(o,f=>{!f&&r.isFullscreen&&e.useWindow&&d()});const c=u.computed(()=>{const f=r.isFullscreen?"editor.fullscreen.tooltip.exit":"editor.fullscreen.tooltip.fullscreen";if(f)return u.unref(n)(f)}),l=u.computed(()=>r.isFullscreen?"fullscreenExit":"fullscreen");function d(f=!1){i(),r.isFullscreen?(document.documentElement.classList.add("overflow-y-hidden"),f&&a()):(document.documentElement.classList.remove("overflow-y-hidden"),f&&s())}return(f,b)=>(u.openBlock(),u.createBlock(Wt,{editor:f.editor,icon:l.value,tooltip:c.value,action:()=>d(t.useWindow)},null,8,["editor","icon","tooltip","action"]))}}),Lbe=u.defineComponent({__name:"HighlightActionButton",props:Yn,setup(t){const e=t,{state:n}=JS();function r(i){typeof i=="string"&&e.editor.chain().focus().setHighlight({color:i}).run()}return u.watchEffect(()=>{const{color:i}=e.editor.getAttributes("highlight");n.highlight=i}),(i,o)=>(u.openBlock(),u.createBlock(Wt,{editor:i.editor,icon:"highlight",tooltip:i.t("editor.highlight.tooltip"),disabled:!i.editor.can().setHighlight(),color:u.unref(n).highlight,"is-active":()=>i.editor.isActive("highlight")||!1},{default:u.withCtx(()=>[u.createVNode(A3,{modelValue:u.unref(n).highlight,"onUpdate:modelValue":o[0]||(o[0]=a=>u.unref(n).highlight=a),activator:"parent","nudge-top":-4,"nudge-left":8,onChange:r},null,8,["modelValue"])]),_:1},8,["editor","tooltip","disabled","color","is-active"]))}}),Rbe=u.defineComponent({__name:"HistoryActionButton",props:Yn,setup(t){const e=t,n=["undo","redo"];function r(i){i==="redo"&&e.editor.chain().focus().redo().run(),i==="undo"&&e.editor.chain().focus().undo().run()}return(i,o)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,u.renderList(n,a=>u.createVNode(Wt,{key:a,editor:i.editor,action:()=>r(a),"is-active":()=>!1,disabled:!i.editor.can()[a](),tooltip:i.t(`editor.${a}.tooltip`),icon:a},null,8,["editor","action","disabled","tooltip","icon"])),64))}}),Bbe=u.defineComponent({__name:"HorizontalRuleActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().setHorizontalRule().run(),"is-active":()=>e.editor.isActive("horizontalRule")||!1,disabled:!e.editor.can().setHorizontalRule(),tooltip:e.t("editor.horizontalrule.tooltip"),icon:"horizontalRule"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),kk=u.defineComponent({__name:"OriginalThemeProvider",setup(t){const{global:{name:e}}=oi.useTheme();return(n,r)=>{const i=N_;return u.openBlock(),u.createBlock(i,{theme:u.unref(e)},{default:u.withCtx(()=>[u.renderSlot(n.$slots,"default")]),_:3},8,["theme"])}}}),jbe=u.defineComponent({__name:"ImageActionButton",props:{...Yn,upload:{type:Function,default:void 0},imageTabs:{type:Array,default:()=>[]},hiddenTabs:{type:Array,default:()=>[]}},setup(t){const e=t,n=u.ref({});function r(){var i,o;const a=(i=e.editor)==null?void 0:i.view.state.selection,s=((o=a==null?void 0:a.node)==null?void 0:o.attrs)??{};s!=null&&s.src&&(n.value.src=s.src),s!=null&&s.alt&&(n.value.alt=s.alt),s!=null&&s.title&&(n.value.title=s.title),s!=null&&s.width&&(n.value.width=s.width),s!=null&&s.height&&(n.value.height=s.height),s!=null&&s.display&&(n.value.display=s.display),s!=null&&s.captionDisabled&&(n.value.captionDisabled=s.captionDisabled),n.value.lockAspectRatio=s.lockAspectRatio??!0}return(i,o)=>(u.openBlock(),u.createBlock(Wt,{editor:i.editor,action:r,"is-active":()=>i.editor.isActive("image")||!1,disabled:!i.editor.can().setImage({}),tooltip:i.t("editor.image.tooltip"),icon:"image"},{default:u.withCtx(()=>[u.createVNode(kk,null,{default:u.withCtx(()=>[u.renderSlot(i.$slots,"dialog",{props:{editor:i.editor,value:n.value,imageTabs:t.imageTabs,hiddenTabs:t.hiddenTabs,upload:t.upload}})]),_:3})]),_:3},8,["editor","is-active","disabled","tooltip"]))}}),Fbe=u.defineComponent({__name:"IndentActionButton",props:Yn,setup(t){const e=t,n=["outdent","indent"],r={indent:"sinkListItem",outdent:"liftListItem"};function i(o){o==="indent"&&e.editor.chain().focus().sinkListItem("listItem").run(),o==="outdent"&&e.editor.chain().focus().liftListItem("listItem").run()}return(o,a)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,u.renderList(n,s=>u.createVNode(Wt,{key:s,editor:o.editor,action:()=>i(s),"is-active":()=>!1,disabled:!o.editor.can()[r[s]]("listItem"),tooltip:o.t(`editor.${s}.tooltip`),icon:s},null,8,["editor","action","disabled","tooltip","icon"])),64))}}),Hbe=u.defineComponent({__name:"ItalicActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleItalic().run(),"is-active":()=>e.editor.isActive("italic")||!1,disabled:!e.editor.can().toggleItalic(),tooltip:e.t("editor.italic.tooltip"),icon:"italic"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),zbe=u.defineComponent({__name:"LinkActionButton",props:Yn,setup(t){const e=t,n=u.ref({href:void 0,target:void 0});function r(){const{href:i,target:o}=e.editor.getAttributes("link");n.value={href:i,target:o}}return(i,o)=>(u.openBlock(),u.createBlock(Wt,{editor:i.editor,icon:"link",tooltip:i.t("editor.link.tooltip"),disabled:!i.editor.can().setLink({href:""}),"is-active":()=>i.editor.isActive("link")||!1,action:r},{default:u.withCtx(()=>[u.createVNode(kk,null,{default:u.withCtx(()=>[u.renderSlot(i.$slots,"dialog",{props:{editor:i.editor,value:n.value.href,...n.value}})]),_:3})]),_:3},8,["editor","tooltip","disabled","is-active"]))}}),$be=u.defineComponent({__name:"OrderedListActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleOrderedList().run(),"is-active":()=>e.editor.isActive("orderedList")||!1,disabled:!e.editor.can().toggleOrderedList(),tooltip:e.t("editor.orderedlist.tooltip"),icon:"orderedList"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),Ube=u.defineComponent({__name:"StrikeActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleStrike().run(),"is-active":()=>e.editor.isActive("strike")||!1,disabled:!e.editor.can().toggleStrike(),tooltip:e.t("editor.strike.tooltip"),icon:"strike"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),Wbe=u.defineComponent({__name:"SubscriptActionButton",props:{...Yn,extension:{type:Object,required:!0}},setup(t){const e=t,n=u.computed(()=>{const o=[],a=e.extension.options.subscript,s=e.extension.options.superscript;return a!==!1&&o.push("subscript"),s!==!1&&o.push("superscript"),o}),r={subscript:"toggleSubscript",superscript:"toggleSuperscript"};function i(o){o==="subscript"&&e.editor.chain().focus().toggleSubscript().run(),o==="superscript"&&e.editor.chain().focus().toggleSuperscript().run()}return(o,a)=>(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(n.value,s=>(u.openBlock(),u.createBlock(Wt,{key:s,editor:o.editor,action:()=>i(s),"is-active":()=>o.editor.isActive(s)||!1,disabled:!o.editor.can()[r[s]](),tooltip:o.t(`editor.${s}.tooltip`),icon:s},null,8,["editor","action","is-active","disabled","tooltip","icon"]))),128))}}),Ybe=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Gbe=/CrOS/,Xbe=/android|ipad|playbook|silk/i;function _3(t={}){let e=t.ua||typeof navigator<"u"&&navigator.userAgent;return e&&typeof e=="object"&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string"?!1:!!(Ybe.test(e)&&!Gbe.test(e)||t.tablet&&Xbe.test(e)||t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.includes("Macintosh")&&e.includes("Safari"))}const Kbe=["onMouseover","onMousedown"],Zbe=u.defineComponent({__name:"CreateTablePopover",emits:["create-table"],setup(t,{emit:e}){const n=e,{t:r}=Is(),i=u.ref(!1),o=u.ref(!0),a=u.reactive({rows:_3()?iv:rv,cols:_3()?iv:rv}),s=u.reactive({rows:ov,cols:ov});function c(b,x){const k={boxSizing:"border-box",width:"16px",height:"16px",padding:"4px",border:"1px solid #dcdfe6",borderRadius:"2px"};return x<=s.cols&&b<=s.rows&&(k.backgroundColor="#ecf5ff",k.borderColor="var(--vp-theme-primary)"),k}function l(b,x){b===a.rows&&(a.rows=Math.min(b+1,iv)),x===a.cols&&(a.cols=Math.min(x+1,iv)),s.rows=b,s.cols=x}function d(b,x){n("create-table",{rows:b,cols:x,withHeaderRow:u.unref(o)}),f()}function f(){i.value=!1,o.value=!0,a.rows=rv,a.cols=rv,s.rows=ov,s.cols=ov}return(b,x)=>{const k=wI,E=Dr,m=cM,h=jn,g=Go;return u.openBlock(),u.createBlock(g,{modelValue:i.value,"onUpdate:modelValue":x[1]||(x[1]=w=>i.value=w),location:"end bottom","open-on-click":"","open-on-hover":"","close-on-content-click":!1,activator:"parent"},{default:u.withCtx(()=>[u.createVNode(h,{density:"compact"},{default:u.withCtx(()=>[u.createVNode(E,{class:"pa-2 pb-0"},{default:u.withCtx(()=>[u.createVNode(k,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=w=>o.value=w),density:"compact","hide-details":"",label:u.unref(r)("editor.table.menu.insert_table.with_header_row")},null,8,["modelValue","label"])]),_:1}),u.createVNode(E,{class:"d-flex flex-column flex-wrap justify-space-between pa-2"},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(a.rows,w=>(u.openBlock(),u.createElementBlock("div",{key:"r"+w,class:"d-flex"},[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(a.cols,p=>(u.openBlock(),u.createElementBlock("div",{key:"c"+p,class:"pa-1",onMouseover:v=>l(w,p),onMousedown:v=>d(w,p)},[u.createElementVNode("div",{style:u.normalizeStyle(c(w,p))},null,4)],40,Kbe))),128))]))),128))]),_:1}),u.createVNode(m,{class:"pt-0 pb-2"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(s.rows)+" x "+u.toDisplayString(s.cols),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Jbe=u.defineComponent({__name:"TableMenu",props:{editor:{},activator:{default:void 0}},setup(t){const e=t,{t:n}=Is(),r=u.ref(!1),i=u.computed(()=>[{type:"item",key:"insert-table",title:u.unref(n)("editor.table.menu.insert_table"),icon:Cr("tablePlus"),disabled:!e.editor.can().insertTable()||!1},{type:"divider"},{type:"item",key:"add-column-before",title:u.unref(n)("editor.table.menu.add_column_before"),icon:Cr("tableColumnPlusBefore"),disabled:!e.editor.can().addColumnBefore()||!1},{type:"item",key:"add-column-after",title:u.unref(n)("editor.table.menu.add_column_after"),icon:Cr("tableColumnPlusAfter"),disabled:!e.editor.can().addColumnAfter()||!1},{type:"item",key:"delete-column",title:u.unref(n)("editor.table.menu.delete_column"),icon:Cr("tableColumnRemove"),disabled:!e.editor.can().deleteColumn()||!1},{type:"divider"},{type:"item",key:"add-row-before",title:u.unref(n)("editor.table.menu.add_row_before"),icon:Cr("tableRowPlusBefore"),disabled:!e.editor.can().addRowBefore()||!1},{type:"item",key:"add-row-after",title:u.unref(n)("editor.table.menu.add_row_after"),icon:Cr("tableRowPlusAfter"),disabled:!e.editor.can().addRowAfter()||!1},{type:"item",key:"delete-row",title:u.unref(n)("editor.table.menu.delete_row"),icon:Cr("tableRowRemove"),disabled:!e.editor.can().deleteRow()||!1},{type:"divider"},{type:"item",key:"merge-or-split-cells",title:u.unref(n)("editor.table.menu.merge_or_split_cells"),icon:Cr("tableMergeCells"),disabled:!e.editor.can().mergeOrSplit()||!1},{type:"divider"},{type:"item",key:"delete-table",title:u.unref(n)("editor.table.menu.delete_table"),icon:Cr("tableRemove"),disabled:!e.editor.can().deleteTable()||!1}]);function o(s,c){var l;if(!s)return;const{editor:d}=e,f={"insert-table":()=>d.chain().focus().insertTable({...c}).run(),"add-column-before":()=>d.chain().focus().addColumnBefore().run(),"add-column-after":()=>d.chain().focus().addColumnAfter().run(),"delete-column":()=>d.chain().focus().deleteColumn().run(),"add-row-before":()=>d.chain().focus().addRowBefore().run(),"add-row-after":()=>d.chain().focus().addRowAfter().run(),"delete-row":()=>d.chain().focus().deleteRow().run(),"merge-or-split-cells":()=>d.chain().focus().mergeOrSplit().run(),"delete-table":()=>d.chain().focus().deleteTable().run()};(l=f[s])==null||l.call(f)}function a(s){o("insert-table",s),r.value=!1}return(s,c)=>{const l=_t,d=Mp,f=ir,b=Mn,x=ji,k=Go;return u.openBlock(),u.createBlock(k,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=E=>r.value=E),activator:"parent"},{default:u.withCtx(()=>[u.createVNode(x,{density:"compact"},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(i.value,(E,m)=>(u.openBlock(),u.createElementBlock(u.Fragment,null,[E.key==="insert-table"?(u.openBlock(),u.createBlock(f,{key:m,disabled:E.disabled},{prepend:u.withCtx(()=>[u.createVNode(l,{icon:E.icon},null,8,["icon"])]),default:u.withCtx(()=>[u.createVNode(d,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(E.title),1)]),_:2},1024),E.key==="insert-table"?(u.openBlock(),u.createBlock(Zbe,{key:m,onCreateTable:a})):u.createCommentVNode("",!0)]),_:2},1032,["disabled"])):E.type==="item"?(u.openBlock(),u.createBlock(f,{key:"item-"+m,disabled:E.disabled,onClick:h=>o(E.key)},{prepend:u.withCtx(()=>[u.createVNode(l,{icon:E.icon},null,8,["icon"])]),default:u.withCtx(()=>[u.createVNode(d,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(E.title),1)]),_:2},1024)]),_:2},1032,["disabled","onClick"])):(u.openBlock(),u.createBlock(b,{key:"divider-"+m}))],64))),256))]),_:1})]),_:1},8,["modelValue"])}}}),Qbe=u.defineComponent({__name:"TableActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,"is-active":()=>e.editor.isActive("table")||!1,disabled:!e.editor.can().insertTable(),tooltip:e.t("editor.table.tooltip"),icon:"table"},{default:u.withCtx(()=>[u.createVNode(Jbe,{editor:e.editor,activator:"parent"},null,8,["editor"])]),_:1},8,["editor","is-active","disabled","tooltip"]))}}),Vbe=u.defineComponent({__name:"TaskListActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleTaskList().run(),"is-active":()=>e.editor.isActive("taskList")||!1,disabled:!e.editor.can().toggleTaskList(),tooltip:e.t("editor.tasklist.tooltip"),icon:"taskList"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),qbe=u.defineComponent({__name:"UnderlineActionButton",props:Yn,setup(t){return(e,n)=>(u.openBlock(),u.createBlock(Wt,{editor:e.editor,action:()=>e.editor.chain().focus().toggleUnderline().run(),"is-active":()=>e.editor.isActive("underline")||!1,disabled:!e.editor.can().toggleUnderline(),tooltip:e.t("editor.underline.tooltip"),icon:"underline"},null,8,["editor","action","is-active","disabled","tooltip"]))}}),e0e=u.defineComponent({__name:"VideoActionButton",props:Yn,setup(t){const e=t,n=u.ref(void 0);function r(){const{src:i}=e.editor.getAttributes("video");n.value=i}return(i,o)=>(u.openBlock(),u.createBlock(Wt,{editor:i.editor,action:r,"is-active":()=>i.editor.isActive("video")||!1,disabled:!i.editor.can().setVideo({}),tooltip:i.t("editor.video.tooltip"),icon:"video"},{default:u.withCtx(()=>[u.createVNode(kk,null,{default:u.withCtx(()=>[u.renderSlot(i.$slots,"dialog",{props:{editor:i.editor,value:n.value}})]),_:3})]),_:3},8,["editor","is-active","disabled","tooltip"]))}}),t0e=t=>{const e=["float-left","float-none","float-right"],n=["formatFloatLeft","formatFloatNone","formatFloatRight"],r=["left","inline","right"];return e.map((i,o)=>({type:i,component:Wt,componentProps:{tooltip:`editor.image.${i.replace("-",".")}.tooltip`,icon:n[o],action:()=>t.chain().focus().updateImage({display:r[o]}).run(),isActive:()=>t.isActive("image",{display:r[o]})}}))},n0e=t=>{const e=["size-small","size-medium","size-large"],n=["sizeS","sizeM","sizeL"];return e.map((r,i)=>({type:`image-${r}`,component:Wt,componentProps:{tooltip:`editor.${r.replace("-",".")}.tooltip`,icon:n[i],action:()=>t.chain().focus().updateImage({width:sv[r],height:null}).run(),isActive:()=>t.isActive("image",{width:sv[r]})}}))},r0e=t=>[...t0e(t),...n0e(t),{type:"image-aspect-ratio",component:Wt,componentProps:{tooltip:"editor.image.dialog.form.aspectRatio",icon:"aspectRatio",action:()=>{const e=t.isActive("image",{lockAspectRatio:!0});t.chain().focus().updateImage({lockAspectRatio:!e,height:e?void 0:null}).run()},isActive:()=>t.isActive("image",{lockAspectRatio:!0})}},{type:"image-caption",component:Wt,componentProps:{tooltip:"editor.image.dialog.form.caption",icon:"imageLabel",action:()=>{const e=t.isActive("image",{captionDisabled:!0});t.chain().focus().updateImage({captionDisabled:!e}).run()},isActive:()=>!t.isActive("image",{captionDisabled:!0})}}],i0e=t=>{const e=["size-small","size-medium","size-large"],n=["sizeS","sizeM","sizeL"];return e.map((r,i)=>({type:`video-${r}`,component:Wt,componentProps:{tooltip:`editor.${r.replace("-",".")}.tooltip`,icon:n[i],action:()=>t.chain().focus().updateVideo({width:lv[r]}).run(),isActive:()=>t.isActive("video",{width:lv[r]})}}))},o0e=t=>[{type:"table-add-column-before",component:Wt,componentProps:{tooltip:"editor.table.menu.add_column_before",icon:"tableColumnPlusBefore",action:()=>t.chain().focus().addColumnBefore().run(),disabled:!t.can().addColumnBefore()}},{type:"table-add-column-after",component:Wt,componentProps:{tooltip:"editor.table.menu.add_column_after",icon:"tableColumnPlusAfter",action:()=>t.chain().focus().addColumnAfter().run(),disabled:!t.can().addColumnAfter()}},{type:"table-delete-column",component:Wt,componentProps:{tooltip:"editor.table.menu.delete_column",icon:"tableColumnRemove",action:()=>t.chain().focus().deleteColumn().run(),disabled:!t.can().deleteColumn()}},{type:"table-add-row-before",component:Wt,componentProps:{tooltip:"editor.table.menu.add_row_before",icon:"tableRowPlusBefore",action:()=>t.chain().focus().addRowBefore().run(),disabled:!t.can().addRowBefore()}},{type:"table-add-row-after",component:Wt,componentProps:{tooltip:"editor.table.menu.add_row_after",icon:"tableRowPlusAfter",action:()=>t.chain().focus().addRowAfter().run(),disabled:!t.can().addRowAfter()}},{type:"table-delete-row",component:Wt,componentProps:{tooltip:"editor.table.menu.delete_row",icon:"tableRowRemove",action:()=>t.chain().focus().deleteRow().run(),disabled:!t.can().deleteRow()}},{type:"table-merge-or-split-cells",component:Wt,componentProps:{tooltip:"editor.table.menu.merge_or_split_cells",icon:"tableMergeCells",action:()=>t.chain().focus().mergeOrSplit().run(),disabled:!t.can().mergeOrSplit()}},{type:"table-delete-table",component:Wt,componentProps:{tooltip:"editor.table.menu.delete_table",icon:"tableRemove",action:()=>t.chain().focus().deleteTable().run(),disabled:!t.can().deleteTable()}}],D3=t=>[...r0e(t),...i0e(t),...o0e(t),{type:"unlink",component:Wt,componentProps:{tooltip:"editor.link.unlink.tooltip",icon:"linkVariantOff",action:()=>{const{href:e}=t.getAttributes("link");t.chain().extendMarkRange("link",{href:e}).unsetLink().focus().run()}}},{type:"link-open",component:Wt,componentProps:{tooltip:"editor.link.open",icon:"openInNew",action:()=>{const{href:e}=t.getAttributes("link");sh(e)&&e&&window.open(e,"_blank")}}},{type:"remove",component:Wt,componentProps:{tooltip:"editor.remove",icon:"delete",action:()=>{const{state:e,dispatch:n}=t.view;Hg(e,n)}}}],a0e=(t,e,{editor:n,extension:r,t:i})=>{const{extensions:o=[]}=n.extensionManager,a={};for(const s of Object.keys(t)){const c=t[s];if(!c)continue;const l=[];for(const b of c){if(b==="divider"){const E=l[l.length-1];if((E==null?void 0:E.type)==="divider")continue;l.push({type:"divider",component:void 0,componentProps:{}});continue}const x=e.find(E=>E.type===b);if(x){l.push({...x,componentProps:{...x.componentProps,tooltip:x.componentProps.tooltip?i(x.componentProps.tooltip):void 0},componentSlots:x.componentSlots});continue}const k=o.find(E=>E.name===b);if(k){const{button:E}=k.options,m=E({editor:n,extension:k,t:i});l.push({type:b,component:m.component,componentProps:m.componentProps,componentSlots:m.componentSlots});continue}}const d=l[l.length-1],f=l[0];(d==null?void 0:d.type)==="divider"&&l.pop(),(f==null?void 0:f.type)==="divider"&&l.shift(),a[s]=l}return a},s0e=Zt.create({name:"base-kit",addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),bubble:{list:Xle,defaultBubbleList:D3,button:({editor:e,extension:n,t:r})=>{var i;const{list:o={},defaultBubbleList:a}=((i=n.options)==null?void 0:i.bubble)??{},s=(a==null?void 0:a(e))??[];return a0e(o,s,{editor:e,extension:n,t:r})}}}},addExtensions(){const t=[];return this.options.placeholder!==!1&&t.push(pye.configure({placeholder:"",...this.options.placeholder})),this.options.focus!==!1&&t.push(fye.configure({className:"focus",...this.options.focus})),this.options.document!==!1&&t.push(Ove.configure()),this.options.text!==!1&&t.push(Hve.configure()),this.options.gapcursor!==!1&&t.push(hye.configure()),this.options.dropcursor!==!1&&t.push(dye.configure(this.options.dropcursor)),this.options.characterCount!==!1&&t.push(uye.configure(this.options.characterCount)),this.options.paragraph!==!1&&t.push(Fve.configure(this.options.paragraph)),this.options.hardBreak!==!1&&t.push(Ave.configure(this.options.hardBreak)),this.options.listItem!==!1&&t.push(s3.configure(this.options.listItem)),this.options.textStyle!==!1&&t.push(y3.configure(this.options.textStyle)),t}}),l0e={...npe(O3,["action","isActive"]),maxHeight:{type:[String,Number],default:void 0},items:{type:Array,default:()=>[]}},od=()=>({...Yn,extension:{type:Object,required:!0}}),c0e={...od(),items:{type:Function,default:[]},headingLevels:{type:Array,default:void 0}},ad=u.defineComponent({__name:"index",props:u.mergeModels({...l0e,showMenu:{type:Boolean,default:!1}},{showMenu:{type:Boolean},showMenuModifiers:{}}),emits:["update:showMenu"],setup(t){const e=t,n=u.useModel(t,"showMenu"),r=u.computed(()=>{const o=e.items.find(a=>a.isActive());return o&&!o.default?{...o,rawIcon:o.rawIcon,icon:o.icon?o.icon:e.icon}:{title:e.tooltip,icon:e.icon,isActive:()=>!1}}),i=u.computed(()=>({active:r,items:e.items}));return(o,a)=>{const s=_t,c=Mp,l=ir,d=Mn,f=ji,b=Go;return u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createVNode(u.unref(Wt),{class:u.normalizeClass(e.class),style:u.normalizeStyle(e.style),editor:o.editor,icon:r.value.icon,"raw-icon":r.value.rawIcon,tooltip:r.value.title,disabled:o.disabled,color:o.color,"is-active":r.value.isActive},{default:u.withCtx(()=>[u.createVNode(b,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=x=>n.value=x),activator:"parent"},{default:u.withCtx(()=>[u.createVNode(f,{density:"compact","max-height":o.maxHeight},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(o.items,(x,k)=>(u.openBlock(),u.createElementBlock(u.Fragment,{key:k},[u.createVNode(l,{active:x.isActive(),disabled:x.disabled,onClick:x.action},{prepend:u.withCtx(()=>[x.rawIcon||x.icon?(u.openBlock(),u.createBlock(s,{key:0,icon:x.rawIcon?x.rawIcon:u.unref(Cr)(x.icon)},null,8,["icon"])):u.createCommentVNode("",!0)]),default:u.withCtx(()=>[u.createVNode(c,{style:u.normalizeStyle(x.style)},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(x.title),1)]),_:2},1032,["style"])]),_:2},1032,["active","disabled","onClick"]),x.divider?(u.openBlock(),u.createBlock(d,{key:0})):u.createCommentVNode("",!0)],64))),128))]),_:1},8,["max-height"])]),_:1},8,["modelValue"]),u.renderSlot(o.$slots,"btn-append",u.normalizeProps(u.guardReactiveProps(i.value)))]),_:3},8,["class","style","editor","icon","raw-icon","tooltip","disabled","color","is-active"]),u.renderSlot(o.$slots,"append",u.normalizeProps(u.guardReactiveProps(i.value)))],64)}}}),u0e={class:"blocktype-selector"},d0e=u.defineComponent({__name:"BlockTypeSelectorActionMenuButton",props:c0e,setup(t){const e=t,{editor:n}=e,r=u.computed(()=>{const{t:o}=e,{extensions:a=[]}=n.extensionManager??[],s=a.find(d=>d.name==="base-kit"),c=[];s&&s.options.paragraph!==!1&&c.push({action:()=>n.chain().focus().setParagraph().run(),isActive:()=>n.isActive("paragraph")||!1,disabled:!n.can().setParagraph(),icon:"p",title:o("editor.paragraph.tooltip"),divider:!0});const l=a.find(d=>d.name==="heading");return l&&(e.headingLevels||l.options.levels).forEach(d=>{c.push({action:()=>n.chain().focus().toggleHeading({level:d}).run(),isActive:()=>n.isActive("heading",{level:d})||!1,disabled:!n.can().toggleHeading({level:d}),icon:`h${d}`,title:o(`editor.heading.h${d}.tooltip`)})}),e.items&&e.items({editor:n,t:o}).forEach(d=>{c.push(d)}),c}),i=u.ref(!1);return(o,a)=>{var s;return u.openBlock(),u.createElementBlock("span",u0e,[u.createVNode(ad,{"show-menu":i.value,"onUpdate:showMenu":a[1]||(a[1]=c=>i.value=c),editor:u.unref(n),class:"rounded-e-0 border",items:r.value,"max-height":280,disabled:((s=e.isDisabled)==null?void 0:s.call(e,u.unref(n)))||r.value.filter(c=>c.disabled).length===o.items.length,tooltip:o.t("editor.heading.tooltip"),icon:"heading"},{append:u.withCtx(({active:c})=>[u.createElementVNode("span",{class:"active-title px-2 d-flex align-center rounded-e border border-s-0",onClick:a[0]||(a[0]=l=>i.value=!i.value)},u.toDisplayString(c.value.title),1)]),_:1},8,["show-menu","editor","items","disabled","tooltip"])])}}});od();const f0e=u.defineComponent({__name:"FontSizeActionMenuButton",props:od(),setup(t){const e=t,n=u.computed(()=>{var r;const i=((r=e.extension.options)==null?void 0:r.fontSizes)||[];return[Ku,...i].map(o=>({title:o===Ku?e.t("editor.default"):String(o),isActive:()=>{const{fontSize:a}=e.editor.getAttributes("textStyle");return o===Ku&&a===void 0?!0:e.editor.isActive({fontSize:String(o)})||!1},action:()=>{if(o===Ku){e.editor.chain().focus().unsetFontSize().run();return}e.editor.chain().focus().setFontSize(String(o)).run()},divider:o===Ku,default:o===Ku}))});return(r,i)=>(u.openBlock(),u.createBlock(ad,{editor:r.editor,items:n.value,"max-height":280,disabled:!e.editor.can().setFontSize(""),tooltip:r.t("editor.fontSize.tooltip"),icon:"fontSize"},null,8,["editor","items","disabled","tooltip"]))}});od(),od();const h0e=u.defineComponent({__name:"TextAlignActionMenuButton",props:od(),setup(t){const e=t,n=u.computed(()=>{var r;return(((r=e.extension.options)==null?void 0:r.alignments)||[]).map(i=>({title:e.t(`editor.textalign.${i}.tooltip`),icon:i,isActive:()=>e.editor.isActive({textAlign:i})||!1,action:()=>e.editor.chain().focus().setTextAlign(i).run(),disabled:!e.editor.can().setTextAlign(i)}))});return(r,i)=>(u.openBlock(),u.createBlock(ad,{editor:r.editor,items:n.value,"max-height":280,disabled:n.value.filter(o=>o.disabled).length===n.value.length,tooltip:r.t("editor.textalign.tooltip"),icon:"center"},null,8,["editor","items","disabled","tooltip"]))}}),p0e=Zt.create({addOptions(){return{button:({editor:t,extension:e,t:n})=>({component:d0e,componentProps:{isDisabled:e.options.isDisabled,headingLevels:e.options.headingLevels,items:e.options.items,editor:t,extension:e,t:n}})}}});var zv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},m0e=/^\s*>\s$/;Ir.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return zv("blockquote",{...gn(this.options.HTMLAttributes,t),children:zv("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Xu({find:m0e,type:this.type})]}});var g0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,v0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,y0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,b0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,w0e=ra.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return zv("strong",{...gn(this.options.HTMLAttributes,t),children:zv("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[_c({find:g0e,type:this.type}),_c({find:y0e,type:this.type})]},addPasteRules(){return[Ml({find:v0e,type:this.type}),Ml({find:b0e,type:this.type})]}});const x0e=w0e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Ibe,componentProps:{editor:e,t:n}})}}}),C0e=a3.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Obe,componentProps:{editor:e,t:n}})}}}),S0e=Ir.create({name:"clear",addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Abe,componentProps:{editor:e,t:n}})}}});var k0e=/(^|[^`])`([^`]+)`(?!`)$/,E0e=/(^|[^`])`([^`]+)`(?!`)/g,T0e=ra.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[_c({find:k0e,type:this.type})]},addPasteRules(){return[Ml({find:E0e,type:this.type})]}});const M0e=T0e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:_be,componentProps:{editor:e,t:n}})}}});var I0e=/^```([a-z]+)?[\s\n]$/,O0e=/^~~~([a-z]+)?[\s\n]$/;Ir.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;return[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0]||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",gn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const o=" ".repeat(this.options.tabSize);return i?t.commands.insertContent(o):t.commands.command(({tr:a})=>{const{from:s,to:c}=n,l=e.doc.textBetween(s,c,`
`,`
`).split(`
`).map(d=>o+d).join(`
`);return a.replaceWith(s,c,e.schema.text(l)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?t.commands.command(({tr:o})=>{var a;const{pos:s}=r,c=r.start(),l=r.end(),d=e.doc.textBetween(c,l,`
`,`
`).split(`
`);let f=0,b=0;const x=s-c;for(let h=0;h<d.length;h+=1){if(b+d[h].length>=x){f=h;break}b+=d[h].length+1}const k=((a=d[f].match(/^ */))==null?void 0:a[0])||"",E=Math.min(k.length,this.options.tabSize);if(E===0)return!0;let m=c;for(let h=0;h<f;h+=1)m+=d[h].length+1;return o.delete(m,m+E),s-m<=E&&o.setSelection(Et.create(o.doc,m)),!0}):t.commands.command(({tr:o})=>{const{from:a,to:s}=n,c=e.doc.textBetween(a,s,`
`,`
`).split(`
`).map(l=>{var d;const f=((d=l.match(/^ */))==null?void 0:d[0])||"",b=Math.min(f.length,this.options.tabSize);return l.slice(b)}).join(`
`);return o.replaceWith(a,s,e.schema.text(c)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!o||!a?!1:t.chain().command(({tr:s})=>(s.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||i.parentOffset!==i.parent.nodeSize-2)return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:s})=>(s.setSelection(Dt.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[SS({find:I0e,type:this.type,getAttributes:t=>({language:t[1]})}),SS({find:O0e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new En({key:new qn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:a,schema:s}=t.state,c=s.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:o},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Et.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}});const A0e=b3.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Nbe,componentProps:{editor:e,t:n}})}}}),_0e=Zt.create({name:"fontSize",addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),types:["textStyle"],fontSizes:[...Gle],button:({editor:e,extension:n,t:r})=>({component:f0e,componentProps:{editor:e,extension:n,t:r}})}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>{const e=(t.style.fontSize||"").match(/^(\d+(\.\d+)?)(px|em|rem|%)?$/);return e?e[0]:""},renderHTML:t=>t.fontSize?{style:`font-size: ${lh(t.fontSize)}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),D0e=Zt.create({name:"fullscreen",addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),useWindow:!1,button:({editor:e,extension:n,t:r})=>({component:Pbe,componentProps:{editor:e,t:r,useWindow:n.options.useWindow??!1}})}}});Ir.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,gn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>SS({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var N0e=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,P0e=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,L0e=ra.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[_c({find:N0e,type:this.type})]},addPasteRules(){return[Ml({find:P0e,type:this.type})]}});const R0e=L0e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),multicolor:!0,button:({editor:e,t:n})=>({component:Lbe,componentProps:{editor:e,t:n}})}}}),B0e=mye.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),depth:10,button:({editor:e,t:n})=>({component:Rbe,componentProps:{editor:e,t:n}})}}});var j0e=Ir.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",gn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!_le(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return tB(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:a})=>{var s;if(a){const{$to:c}=o.selection,l=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Et.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(kt.create(o.doc,c.pos)):o.setSelection(Et.create(o.doc,c.pos));else{const d=(s=c.parent.type.contentMatch.defaultType)==null?void 0:s.create();d&&(o.insert(l,d),o.setSelection(Et.create(o.doc,l+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[wB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});const F0e=j0e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Bbe,componentProps:{editor:e,t:n}})}}});var H0e=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,z0e=Ir.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",gn(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[wB({find:H0e,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}});const Ek=u.defineComponent({__name:"ImageProperties",props:{modelValue:{default:()=>({})},t:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=u.computed({get:()=>n.modelValue,set:o=>r("update:modelValue",o)});return(o,a)=>{const s=Fn,c=wI;return u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createVNode(s,{modelValue:i.value.alt,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value.alt=l),label:o.t("editor.image.dialog.form.alt"),"prepend-icon":u.unref(Cr)("text")},null,8,["modelValue","label","prepend-icon"]),u.createVNode(c,{modelValue:i.value.lockAspectRatio,"onUpdate:modelValue":a[1]||(a[1]=l=>i.value.lockAspectRatio=l),label:o.t("editor.image.dialog.form.aspectRatio"),"hide-details":""},null,8,["modelValue","label"]),u.createVNode(c,{modelValue:i.value.captionDisabled,"onUpdate:modelValue":a[2]||(a[2]=l=>i.value.captionDisabled=l),label:o.t("editor.image.dialog.form.captionDisabled"),"hide-details":""},null,8,["modelValue","label"])],64)}}}),$0e=u.defineComponent({__name:"ImageUpload",props:{modelValue:{default:()=>({})},upload:{type:Function,default:void 0},t:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=u.ref(!1),o=u.computed({get:()=>n.modelValue,set:s=>r("update:modelValue",s)}),a=async s=>{var c;const l=s instanceof File?s:s[0];if(!l)throw new Error("No files to upload");try{i.value=!0;const d=await((c=n.upload)==null?void 0:c.call(n,l));if(!d)throw new Error("No link received after upload");o.value={...u.unref(o),src:d}}catch(d){QS.error(`Failed to execute upload file: ${d}`)}finally{i.value=!1}};return(s,c)=>{const l=bV,d=Fn,f=__;return u.openBlock(),u.createBlock(f,{disabled:i.value},{default:u.withCtx(()=>[u.createVNode(l,{modelValue:o.value.file,"onUpdate:modelValue":[c[0]||(c[0]=b=>o.value.file=b),a],label:s.t("editor.image.dialog.form.file"),accept:"image/*",loading:i.value,"prepend-icon":u.unref(Cr)("fileImagePlus"),"onClick:clear":c[1]||(c[1]=b=>o.value.src=void 0)},null,8,["modelValue","label","loading","prepend-icon"]),u.createVNode(d,{modelValue:o.value.src,"onUpdate:modelValue":c[2]||(c[2]=b=>o.value.src=b),label:s.t("editor.image.dialog.form.link"),disabled:"",autofocus:"","prepend-icon":u.unref(Cr)("linkVariant")},null,8,["modelValue","label","prepend-icon"]),u.createVNode(Ek,{modelValue:o.value,"onUpdate:modelValue":c[3]||(c[3]=b=>o.value=b),t:s.t},null,8,["modelValue","t"])]),_:1},8,["disabled"])}}}),U0e=u.defineComponent({__name:"ImageUrl",props:{modelValue:{default:()=>({})},t:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=u.computed({get:()=>n.modelValue,set:o=>r("update:modelValue",o)});return(o,a)=>{const s=Fn,c=__;return u.openBlock(),u.createBlock(c,null,{default:u.withCtx(()=>[u.createVNode(s,{modelValue:i.value.src,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value.src=l),label:o.t("editor.image.dialog.form.link"),autofocus:"","prepend-icon":u.unref(Cr)("linkVariant")},null,8,["modelValue","label","prepend-icon"]),u.createVNode(Ek,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=l=>i.value=l),t:o.t},null,8,["modelValue","t"])]),_:1})}}}),W0e={class:"headline"},Y0e=u.defineComponent({__name:"ImageDialog",props:{value:{default:()=>({})},editor:{},upload:{type:Function,default:void 0},imageTabs:{default:()=>[]},hiddenTabs:{default:()=>[]},destroy:{type:Function,default:void 0}},setup(t){const e=t,{t:n}=Is(),r=u.ref(!1),i=u.ref(!1),o=u.ref({}),a=u.computed(()=>[...[{name:u.unref(n)("editor.image.dialog.tab.url"),type:"url",component:U0e},{name:u.unref(n)("editor.image.dialog.tab.upload"),type:"upload",component:$0e}].filter(d=>d.type?!e.hiddenTabs.includes(d.type):d),...e.imageTabs]),s=u.computed(()=>{const{src:d}=u.unref(o);return!(typeof d=="string"&&d!=="")});async function c(){const{src:d,lockAspectRatio:f,height:b}=u.unref(o);d&&(e.editor.chain().focus().setImage({...u.unref(o),src:d,height:f?void 0:b}).run(),l())}function l(){r.value=!1,o.value={},setTimeout(()=>{var d;return(d=e.destroy)==null?void 0:d.call(e)},300)}return u.watch(()=>e.value,d=>{o.value={...u.unref(o),...d}},{immediate:!0,deep:!0}),(d,f)=>{const b=Xr,x=_t,k=dt,E=Zr,m=D_,h=AV,g=vx,w=gx,p=Dr,v=ki,y=jn,S=eo;return u.openBlock(),u.createBlock(S,{modelValue:r.value,"onUpdate:modelValue":f[3]||(f[3]=T=>r.value=T),"max-width":"400",activator:"parent","onClick:outside":l},{default:u.withCtx(()=>[u.createVNode(y,null,{default:u.withCtx(()=>[u.createVNode(E,{class:"px-6",density:"compact"},{default:u.withCtx(()=>[u.createElementVNode("span",W0e,u.toDisplayString(u.unref(n)("editor.image.dialog.title")),1),u.createVNode(b),u.createVNode(k,{class:"mx-0",icon:"",onClick:l},{default:u.withCtx(()=>[u.createVNode(x,{icon:u.unref(Cr)("close")},null,8,["icon"])]),_:1})]),_:1}),u.createVNode(h,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=T=>i.value=T)},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(a.value,(T,C)=>(u.openBlock(),u.createBlock(m,{key:C,value:C},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(T.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),u.createVNode(p,null,{default:u.withCtx(()=>[u.createVNode(w,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=T=>i.value=T)},{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(a.value,(T,C)=>(u.openBlock(),u.createBlock(g,{key:C,value:C},{default:u.withCtx(()=>[(u.openBlock(),u.createBlock(u.resolveDynamicComponent(T.component),{modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=M=>o.value=M),upload:d.upload,t:u.unref(n)},null,8,["modelValue","upload","t"]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u.createVNode(v,null,{default:u.withCtx(()=>[u.createVNode(k,{disabled:s.value,onClick:c},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(u.unref(n)("editor.image.dialog.button.apply")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),G0e=["src","alt"],X0e={key:0,class:"image-resizer"},K0e=["onMousedown"],Z0e=u.defineComponent({__name:"ImageView",props:{...Hle,selected:{type:Boolean,required:!0}},setup(t){const e=t,n=e.editor,r={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},i=u.ref({width:SB,height:SB}),o=u.ref({width:0,height:0}),a=u.ref([r.TOP_LEFT,r.TOP_RIGHT,r.BOTTOM_LEFT,r.BOTTOM_RIGHT]),s=u.ref(!1),c=u.ref({x:0,y:0,w:0,h:0,dir:""}),l=u.computed(()=>{const{src:P,alt:L,width:R,height:j}=e.node.attrs,z=XS(R)?`${R}px`:R,$=XS(j)?`${j}px`:j;return{src:P||void 0,alt:L||void 0,style:{width:z||void 0,height:$||void 0}}}),d=u.computed(()=>e.node.attrs.display||void 0),f=u.computed(()=>e.node.attrs.lockAspectRatio??!0),b=u.computed(()=>typeof u.unref(d)=="string"?["image-view",`image-view--${u.unref(d)}`]:["image-view"]),x=u.ref(void 0),k=u.computed(()=>{const{style:{width:P}}=u.unref(l);return{width:P==="100%"?P:void 0}}),E=u.computed(()=>e.node.attrs.captionDisabled||!1);function m(P){o.value={width:P.target.width,height:P.target.height}}function h(){const{editor:P,getPos:L}=e,R=L();R&&P.commands.setNodeSelection(R)}const g=u.ref(null),w=Ju(function(){const{editor:P}=e,{width:L}=getComputedStyle(P.view.dom);i.value.width=Number.parseInt(L,10)},TS);function p(P,L){P.preventDefault(),P.stopPropagation(),c.value.x=P.clientX,c.value.y=P.clientY;const R=u.unref(o).width,j=u.unref(o).height,z=R/j;let $=Number(e.node.attrs.width),Y=Number(e.node.attrs.height);const ae=u.unref(i).width;$&&!Y?($=$>ae?ae:$,Y=Math.round($/z)):Y&&!$?($=Math.round(Y*z),$=$>ae?ae:$):!$&&!Y?($=R>ae?ae:R,Y=Math.round($/z)):$=$>ae?ae:$,c.value.w=$,c.value.h=Y,c.value.dir=L,s.value=!0,S()}const v=Ju(function(P){if(P.preventDefault(),P.stopPropagation(),!u.unref(s))return;const{x:L,y:R,w:j,h:z,dir:$}=u.unref(c),Y=(P.clientX-L)*(/l/.test($)?-1:1),ae=(P.clientY-R)*(/t/.test($)?-1:1),K=ipe(j+Y,CB,u.unref(i).width),te=u.unref(f)?null:Math.max(z+ae,CB);e.updateAttributes({width:K,height:te})},TS);function y(P){P.preventDefault(),P.stopPropagation(),u.unref(s)&&(s.value=!1,c.value={x:0,y:0,w:0,h:0,dir:""},T(),h())}function S(){document==null||document.addEventListener("mousemove",v,!0),document==null||document.addEventListener("mouseup",y,!0)}function T(){document==null||document.removeEventListener("mousemove",v,!0),document==null||document.removeEventListener("mouseup",y,!0)}const C=Ju(function(){var P;x.value=`${(P=g.value)==null?void 0:P.offsetWidth}px`},TS),M=new ResizeObserver(()=>w()),A=new ResizeObserver(()=>C());return u.watchEffect(P=>{u.unref(M).observe(e.editor.view.dom),g.value&&u.unref(A).observe(g.value),P(()=>{u.unref(M).disconnect(),u.unref(A).disconnect()})}),(P,L)=>(u.openBlock(),u.createBlock(u.unref(Ble),{as:"span",class:u.normalizeClass(b.value),style:u.normalizeStyle(k.value)},{default:u.withCtx(()=>[u.createElementVNode("div",{draggable:"true","data-drag-handle":"",class:u.normalizeClass([{"image-view__body--focused":t.selected,"image-view__body--resizing":s.value},"image-view__body"]),style:u.normalizeStyle(k.value)},[u.createElementVNode("img",{ref_key:"imgEl",ref:g,src:l.value.src,alt:l.value.alt,style:u.normalizeStyle(l.value.style),class:"image-view__body__image",onLoad:m,onClick:h},null,44,G0e),u.unref(n).view.editable?u.withDirectives((u.openBlock(),u.createElementBlock("div",X0e,[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(a.value,R=>(u.openBlock(),u.createElementBlock("span",{key:R,class:u.normalizeClass([`image-resizer__handler--${R}`,"image-resizer__handler"]),onMousedown:j=>p(j,R)},null,42,K0e))),128))],512)),[[u.vShow,t.selected||s.value]]):u.createCommentVNode("",!0)],6),E.value?u.createCommentVNode("",!0):(u.openBlock(),u.createElementBlock("div",{key:0,class:"caption",style:u.normalizeStyle({width:x.value})},[u.createVNode(u.unref(Rle))],4))]),_:1},8,["class","style"]))}}),J0e=z0e.extend({parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])',getAttrs(t){var e,n,r;if((e=t.parentElement)!=null&&e.classList.contains("image-figure_content")){const i=t.parentElement;let o=i.getAttribute("data-display");o||(n=i.parentElement)!=null&&n.classList.contains("image-figure")&&(o=(r=i.parentElement)==null?void 0:r.getAttribute("data-display")),o&&t.setAttribute("data-display",o);const a=i.querySelector(".image-figure_caption");a&&(t.innerHTML=a.innerHTML,i.removeChild(a))}return null}}]},renderHTML({HTMLAttributes:t,node:e}){const n=gn(this.options.HTMLAttributes,t);if(e.attrs.captionDisabled||!e.content.size)return["img",n];const r={class:"image-figure"};return n["data-display"]&&(r["data-display"]=n["data-display"],delete n["data-display"]),["span",r,["span",{class:"image-figure_content"},["img",n],["span",{class:"image-figure_caption"},0]]]},content(){return this.options.captionContent||"text*"},addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),src:{default:null},alt:{default:null},lockAspectRatio:{default:!0},width:{default:this.options.width},height:{default:null},display:{default:this.options.display,renderHTML:({display:e})=>e?{"data-display":e}:{},parseHTML:e=>e.getAttribute("data-display")||"inline"},captionDisabled:{default:this.options.captionDisabled,renderHTML:({captionDisabled:e})=>e?{"data-caption-disabled":e}:{},parseHTML:e=>e.getAttribute("data-caption-disabled")==="true"||!1}}},addNodeView(){return $le(Z0e)},addCommands(){var t;return{...(t=this.parent)==null?void 0:t.call(this),updateImage:e=>({commands:n})=>n.updateAttributes(this.name,e)}},addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),upload:void 0,width:sv["size-large"],display:"inline",imageTabs:[],hiddenTabs:[],inline:!0,dialogComponent:()=>Y0e,button:({editor:e,extension:n,t:r})=>{const{upload:i,imageTabs:o,hiddenTabs:a,dialogComponent:s}=n.options;return{component:jbe,componentProps:{editor:e,t:r,upload:i,imageTabs:o,hiddenTabs:a},componentSlots:{dialog:s()}}}}}}),Q0e=Zt.create({name:"indent",addOptions(){return{divider:!1,spacer:!1,button:({editor:t,t:e})=>({component:Fbe,componentProps:{editor:t,t:e}})}}});var V0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,q0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,e1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,t1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,n1e=ra.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[_c({find:V0e,type:this.type}),_c({find:e1e,type:this.type})]},addPasteRules(){return[Ml({find:q0e,type:this.type}),Ml({find:t1e,type:this.type})]}});const r1e=n1e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Hbe,componentProps:{editor:e,t:n}})}}}),i1e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",o1e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Tk="numeric",Mk="ascii",Ik="alpha",ph="asciinumeric",mh="alphanumeric",Ok="domain",N3="emoji",a1e="scheme",s1e="slashscheme",Ak="whitespace";function l1e(t,e){return t in e||(e[t]=[]),e[t]}function Fc(t,e,n){e[Tk]&&(e[ph]=!0,e[mh]=!0),e[Mk]&&(e[ph]=!0,e[Ik]=!0),e[ph]&&(e[mh]=!0),e[Ik]&&(e[mh]=!0),e[mh]&&(e[Ok]=!0),e[N3]&&(e[Ok]=!0);for(const r in e){const i=l1e(r,n);i.indexOf(t)<0&&i.push(t)}}function c1e(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Wi(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Wi.groups={},Wi.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Wi.groups;let i;return e&&e.j?i=e:(i=new Wi(e),n&&r&&Fc(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let a=0;a<o-1;a++)i=i.tt(t[a]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Wi.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let a,s=i.go(t);if(s?(a=new Wi,Object.assign(a.j,s.j),a.jr.push.apply(a.jr,s.jr),a.jd=s.jd,a.t=s.t):a=new Wi,o){if(r)if(a.t&&typeof a.t=="string"){const c=Object.assign(c1e(a.t,r),n);Fc(o,c,r)}else n&&Fc(o,n,r);a.t=o}return i.j[t]=a,a}};const Yt=(t,e,n,r,i)=>t.ta(e,n,r,i),dr=(t,e,n,r,i)=>t.tr(e,n,r,i),P3=(t,e,n,r,i)=>t.ts(e,n,r,i),Ve=(t,e,n,r,i)=>t.tt(e,n,r,i),_s="WORD",_k="UWORD",L3="ASCIINUMERICAL",R3="ALPHANUMERICAL",gh="LOCALHOST",Dk="TLD",Nk="UTLD",$v="SCHEME",sd="SLASH_SCHEME",Pk="NUM",Lk="WS",Rk="NL",vh="OPENBRACE",yh="CLOSEBRACE",Uv="OPENBRACKET",Wv="CLOSEBRACKET",Yv="OPENPAREN",Gv="CLOSEPAREN",Xv="OPENANGLEBRACKET",Kv="CLOSEANGLEBRACKET",Zv="FULLWIDTHLEFTPAREN",Jv="FULLWIDTHRIGHTPAREN",Qv="LEFTCORNERBRACKET",Vv="RIGHTCORNERBRACKET",qv="LEFTWHITECORNERBRACKET",ey="RIGHTWHITECORNERBRACKET",ty="FULLWIDTHLESSTHAN",ny="FULLWIDTHGREATERTHAN",ry="AMPERSAND",iy="APOSTROPHE",oy="ASTERISK",Dl="AT",ay="BACKSLASH",sy="BACKTICK",ly="CARET",Nl="COLON",Bk="COMMA",cy="DOLLAR",Ga="DOT",uy="EQUALS",jk="EXCLAMATION",Lo="HYPHEN",bh="PERCENT",dy="PIPE",fy="PLUS",hy="POUND",wh="QUERY",Fk="QUOTE",B3="FULLWIDTHMIDDLEDOT",Hk="SEMI",Xa="SLASH",xh="TILDE",py="UNDERSCORE",j3="EMOJI",my="SYM";var F3=Object.freeze({__proto__:null,ALPHANUMERICAL:R3,AMPERSAND:ry,APOSTROPHE:iy,ASCIINUMERICAL:L3,ASTERISK:oy,AT:Dl,BACKSLASH:ay,BACKTICK:sy,CARET:ly,CLOSEANGLEBRACKET:Kv,CLOSEBRACE:yh,CLOSEBRACKET:Wv,CLOSEPAREN:Gv,COLON:Nl,COMMA:Bk,DOLLAR:cy,DOT:Ga,EMOJI:j3,EQUALS:uy,EXCLAMATION:jk,FULLWIDTHGREATERTHAN:ny,FULLWIDTHLEFTPAREN:Zv,FULLWIDTHLESSTHAN:ty,FULLWIDTHMIDDLEDOT:B3,FULLWIDTHRIGHTPAREN:Jv,HYPHEN:Lo,LEFTCORNERBRACKET:Qv,LEFTWHITECORNERBRACKET:qv,LOCALHOST:gh,NL:Rk,NUM:Pk,OPENANGLEBRACKET:Xv,OPENBRACE:vh,OPENBRACKET:Uv,OPENPAREN:Yv,PERCENT:bh,PIPE:dy,PLUS:fy,POUND:hy,QUERY:wh,QUOTE:Fk,RIGHTCORNERBRACKET:Vv,RIGHTWHITECORNERBRACKET:ey,SCHEME:$v,SEMI:Hk,SLASH:Xa,SLASH_SCHEME:sd,SYM:my,TILDE:xh,TLD:Dk,UNDERSCORE:py,UTLD:Nk,UWORD:_k,WORD:_s,WS:Lk});const Ds=/[a-z]/,Ch=new RegExp("\\p{L}","u"),zk=new RegExp("\\p{Emoji}","u"),Ns=/\d/,$k=/\s/,H3="\r",Uk=`
`,u1e="",d1e="",Wk="";let gy=null,vy=null;function f1e(t=[]){const e={};Wi.groups=e;const n=new Wi;gy==null&&(gy=$3(i1e)),vy==null&&(vy=$3(o1e)),Ve(n,"'",iy),Ve(n,"{",vh),Ve(n,"}",yh),Ve(n,"[",Uv),Ve(n,"]",Wv),Ve(n,"(",Yv),Ve(n,")",Gv),Ve(n,"<",Xv),Ve(n,">",Kv),Ve(n,"",Zv),Ve(n,"",Jv),Ve(n,"",Qv),Ve(n,"",Vv),Ve(n,"",qv),Ve(n,"",ey),Ve(n,"",ty),Ve(n,"",ny),Ve(n,"&",ry),Ve(n,"*",oy),Ve(n,"@",Dl),Ve(n,"`",sy),Ve(n,"^",ly),Ve(n,":",Nl),Ve(n,",",Bk),Ve(n,"$",cy),Ve(n,".",Ga),Ve(n,"=",uy),Ve(n,"!",jk),Ve(n,"-",Lo),Ve(n,"%",bh),Ve(n,"|",dy),Ve(n,"+",fy),Ve(n,"#",hy),Ve(n,"?",wh),Ve(n,'"',Fk),Ve(n,"/",Xa),Ve(n,";",Hk),Ve(n,"~",xh),Ve(n,"_",py),Ve(n,"\\",ay),Ve(n,"",B3);const r=dr(n,Ns,Pk,{[Tk]:!0});dr(r,Ns,r);const i=dr(r,Ds,L3,{[ph]:!0}),o=dr(r,Ch,R3,{[mh]:!0}),a=dr(n,Ds,_s,{[Mk]:!0});dr(a,Ns,i),dr(a,Ds,a),dr(i,Ns,i),dr(i,Ds,i);const s=dr(n,Ch,_k,{[Ik]:!0});dr(s,Ds),dr(s,Ns,o),dr(s,Ch,s),dr(o,Ns,o),dr(o,Ds),dr(o,Ch,o);const c=Ve(n,Uk,Rk,{[Ak]:!0}),l=Ve(n,H3,Lk,{[Ak]:!0}),d=dr(n,$k,Lk,{[Ak]:!0});Ve(n,Wk,d),Ve(l,Uk,c),Ve(l,Wk,d),dr(l,$k,d),Ve(d,H3),Ve(d,Uk),dr(d,$k,d),Ve(d,Wk,d);const f=dr(n,zk,j3,{[N3]:!0});Ve(f,"#"),dr(f,zk,f),Ve(f,u1e,f);const b=Ve(f,d1e);Ve(b,"#"),dr(b,zk,f);const x=[[Ds,a],[Ns,i]],k=[[Ds,null],[Ch,s],[Ns,o]];for(let E=0;E<gy.length;E++)Pl(n,gy[E],Dk,_s,x);for(let E=0;E<vy.length;E++)Pl(n,vy[E],Nk,_k,k);Fc(Dk,{tld:!0,ascii:!0},e),Fc(Nk,{utld:!0,alpha:!0},e),Pl(n,"file",$v,_s,x),Pl(n,"mailto",$v,_s,x),Pl(n,"http",sd,_s,x),Pl(n,"https",sd,_s,x),Pl(n,"ftp",sd,_s,x),Pl(n,"ftps",sd,_s,x),Fc($v,{scheme:!0,ascii:!0},e),Fc(sd,{slashscheme:!0,ascii:!0},e),t=t.sort((E,m)=>E[0]>m[0]?1:-1);for(let E=0;E<t.length;E++){const m=t[E][0],h=t[E][1]?{[a1e]:!0}:{[s1e]:!0};m.indexOf("-")>=0?h[Ok]=!0:Ds.test(m)?Ns.test(m)?h[ph]=!0:h[Mk]=!0:h[Tk]=!0,P3(n,m,m,h)}return P3(n,"localhost",gh,{ascii:!0}),n.jd=new Wi(my),{start:n,tokens:Object.assign({groups:e},F3)}}function z3(t,e){const n=h1e(e.replace(/[A-Z]/g,s=>s.toLowerCase())),r=n.length,i=[];let o=0,a=0;for(;a<r;){let s=t,c=null,l=0,d=null,f=-1,b=-1;for(;a<r&&(c=s.go(n[a]));)s=c,s.accepts()?(f=0,b=0,d=s):f>=0&&(f+=n[a].length,b++),l+=n[a].length,o+=n[a].length,a++;o-=f,a-=b,l-=f,i.push({t:d.t,v:e.slice(o-l,o),s:o-l,e:o})}return i}function h1e(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,a=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function Pl(t,e,n,r,i){let o;const a=e.length;for(let s=0;s<a-1;s++){const c=e[s];t.j[c]?o=t.j[c]:(o=new Wi(r),o.jr=i.slice(),t.j[c]=o),t=o}return o=new Wi(n),o.jr=i.slice(),t.j[e[a-1]]=o,o}function $3(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+o),10);a>0;a--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Sh={defaultProtocol:"http",events:null,format:U3,formatHref:U3,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Yk(t,e=null){let n=Object.assign({},Sh);t&&(n=Object.assign(n,t instanceof Yk?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Yk.prototype={o:Sh,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Sh[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function U3(t){return t}function W3(t,e){this.t="token",this.v=t,this.tk=e}W3.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Sh.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),a={},s=t.get("className",n,e),c=t.get("target",n,e),l=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return a.href=r,s&&(a.class=s),c&&(a.target=c),l&&(a.rel=l),d&&Object.assign(a,d),{tagName:i,attributes:a,content:o,eventListeners:f}}};function yy(t,e){class n extends W3{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Y3=yy("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),G3=yy("text"),p1e=yy("nl"),by=yy("url",{isLink:!0,toHref(t=Sh.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==gh&&t[1].t===Nl}}),Ro=t=>new Wi(t);function m1e({groups:t}){const e=t.domain.concat([ry,oy,Dl,ay,sy,ly,cy,uy,Lo,Pk,bh,dy,fy,hy,Xa,my,xh,py]),n=[iy,Nl,Bk,Ga,jk,bh,wh,Fk,Hk,Xv,Kv,vh,yh,Wv,Uv,Yv,Gv,Zv,Jv,Qv,Vv,qv,ey,ty,ny],r=[ry,iy,oy,ay,sy,ly,cy,uy,Lo,vh,yh,bh,dy,fy,hy,wh,Xa,my,xh,py],i=Ro(),o=Ve(i,xh);Yt(o,r,o),Yt(o,t.domain,o);const a=Ro(),s=Ro(),c=Ro();Yt(i,t.domain,a),Yt(i,t.scheme,s),Yt(i,t.slashscheme,c),Yt(a,r,o),Yt(a,t.domain,a);const l=Ve(a,Dl);Ve(o,Dl,l),Ve(s,Dl,l),Ve(c,Dl,l);const d=Ve(o,Ga);Yt(d,r,o),Yt(d,t.domain,o);const f=Ro();Yt(l,t.domain,f),Yt(f,t.domain,f);const b=Ve(f,Ga);Yt(b,t.domain,f);const x=Ro(Y3);Yt(b,t.tld,x),Yt(b,t.utld,x),Ve(l,gh,x);const k=Ve(f,Lo);Ve(k,Lo,k),Yt(k,t.domain,f),Yt(x,t.domain,f),Ve(x,Ga,b),Ve(x,Lo,k);const E=Ve(x,Nl);Yt(E,t.numeric,Y3);const m=Ve(a,Lo),h=Ve(a,Ga);Ve(m,Lo,m),Yt(m,t.domain,a),Yt(h,r,o),Yt(h,t.domain,a);const g=Ro(by);Yt(h,t.tld,g),Yt(h,t.utld,g),Yt(g,t.domain,a),Yt(g,r,o),Ve(g,Ga,h),Ve(g,Lo,m),Ve(g,Dl,l);const w=Ve(g,Nl),p=Ro(by);Yt(w,t.numeric,p);const v=Ro(by),y=Ro();Yt(v,e,v),Yt(v,n,y),Yt(y,e,v),Yt(y,n,y),Ve(g,Xa,v),Ve(p,Xa,v);const S=Ve(s,Nl),T=Ve(c,Nl),C=Ve(T,Xa),M=Ve(C,Xa);Yt(s,t.domain,a),Ve(s,Ga,h),Ve(s,Lo,m),Yt(c,t.domain,a),Ve(c,Ga,h),Ve(c,Lo,m),Yt(S,t.domain,v),Ve(S,Xa,v),Ve(S,wh,v),Yt(M,t.domain,v),Yt(M,e,v),Ve(M,Xa,v);const A=[[vh,yh],[Uv,Wv],[Yv,Gv],[Xv,Kv],[Zv,Jv],[Qv,Vv],[qv,ey],[ty,ny]];for(let P=0;P<A.length;P++){const[L,R]=A[P],j=Ve(v,L);Ve(y,L,j),Ve(j,R,v);const z=Ro(by);Yt(j,e,z);const $=Ro();Yt(j,n),Yt(z,e,z),Yt(z,n,$),Yt($,e,z),Yt($,n,$),Ve(z,R,v),Ve($,R,v)}return Ve(i,gh,g),Ve(i,Rk,p1e),{start:i,tokens:F3}}function g1e(t,e,n){let r=n.length,i=0,o=[],a=[];for(;i<r;){let s=t,c=null,l=null,d=0,f=null,b=-1;for(;i<r&&!(c=s.go(n[i].t));)a.push(n[i++]);for(;i<r&&(l=c||s.go(n[i].t));)c=null,s=l,s.accepts()?(b=0,f=s):b>=0&&b++,i++,d++;if(b<0)i-=d,i<r&&(a.push(n[i]),i++);else{a.length>0&&(o.push(Gk(G3,e,a)),a=[]),i-=b,d-=b;const x=f.t,k=n.slice(i-d,i);o.push(Gk(x,e,k))}}return a.length>0&&o.push(Gk(G3,e,a)),o}function Gk(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const v1e=typeof console<"u"&&console&&console.warn||(()=>{}),y1e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ln={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function b1e(){return Wi.groups={},Ln.scanner=null,Ln.parser=null,Ln.tokenQueue=[],Ln.pluginQueue=[],Ln.customSchemes=[],Ln.initialized=!1,Ln}function X3(t,e=!1){if(Ln.initialized&&v1e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${y1e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ln.customSchemes.push([t,e])}function w1e(){Ln.scanner=f1e(Ln.customSchemes);for(let t=0;t<Ln.tokenQueue.length;t++)Ln.tokenQueue[t][1]({scanner:Ln.scanner});Ln.parser=m1e(Ln.scanner.tokens);for(let t=0;t<Ln.pluginQueue.length;t++)Ln.pluginQueue[t][1]({scanner:Ln.scanner,parser:Ln.parser});return Ln.initialized=!0,Ln}function Xk(t){return Ln.initialized||w1e(),g1e(Ln.parser.start,t,z3(Ln.scanner.start,t))}Xk.scan=z3;function K3(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Yk(n),i=Xk(t),o=[];for(let a=0;a<i.length;a++){const s=i[a];s.isLink&&(!e||s.t===e)&&r.check(s)&&o.push(s.toFormattedObject(r))}return o}var Kk="[\0- -\u2029]",x1e=new RegExp(Kk),C1e=new RegExp(`${Kk}$`),S1e=new RegExp(Kk,"g");function k1e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function E1e(t){return new En({key:new qn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:a}=r,s=jR(n.doc,[...e]);if(JR(s).forEach(({newRange:c})=>{const l=Jae(r.doc,c,b=>b.isTextblock);let d,f;if(l.length>1)d=l[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(l.length){const b=r.doc.textBetween(c.from,c.to," "," ");if(!C1e.test(b))return;d=l[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&f){const b=f.split(x1e).filter(Boolean);if(b.length<=0)return!1;const x=b[b.length-1],k=d.pos+f.lastIndexOf(x);if(!x)return!1;const E=Xk(x).map(m=>m.toObject(t.defaultProtocol));if(!k1e(E))return!1;E.filter(m=>m.isLink).map(m=>({...m,from:k+m.start+1,to:k+m.end+1})).filter(m=>r.schema.marks.code?!r.doc.rangeHasMark(m.from,m.to,r.schema.marks.code):!0).filter(m=>t.validate(m.value)).filter(m=>t.shouldAutoLink(m.value)).forEach(m=>{gS(m.from,m.to,r.doc).some(h=>h.mark.type===t.type)||a.addMark(m.from,m.to,t.type.create({href:m.href}))})}}),!!a.steps.length)return a}})}function T1e(t){return new En({key:new qn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;a=f.find(b=>b.nodeName==="A")}if(!a)return!1;const s=ZR(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:s.href,l=(o=a==null?void 0:a.target)!=null?o:s.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),a&&c?(window.open(c,l),!0):!1}}})}function M1e(t){return new En({key:new qn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let s="";r.content.forEach(l=>{s+=l.textContent});const c=K3(s,{defaultProtocol:t.defaultProtocol}).find(l=>l.isLink&&l.value===s);return!s||!c?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Hc(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(S1e,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var I1e=ra.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){X3(t);return}X3(t.scheme,t.optionalSlashes)})},onDestroy(){b1e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Hc(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Hc(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Hc(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",gn(this.options.HTMLAttributes,t),0]:["a",gn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Hc(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Hc(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ml({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=K3(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!Hc(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(E1e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Hc(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(T1e({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(M1e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}});const O1e={class:"headline"},A1e=u.defineComponent({__name:"LinkDialog",props:{value:{default:void 0},target:{default:"_blank"},editor:{},destroy:{type:Function,default:void 0}},setup(t){const e=t,{t:n}=Is(),r=()=>({href:"",target:"_blank"}),i=u.ref(r()),o=u.ref(!1),a=u.computed(()=>{const{href:l,target:d}=i.value;return l?e.value===l&&e.target===d:!0});function s(){const{href:l,target:d}=i.value;l&&e.editor.chain().focus().extendMarkRange("link").setLink({href:l,target:d}).run(),c()}function c(){o.value=!1,i.value=r(),setTimeout(()=>{var l;return(l=e.destroy)==null?void 0:l.call(e)},300)}return u.watch(o,l=>{l&&(i.value={href:e.value,target:e.target})}),(l,d)=>{const f=Xr,b=_t,x=dt,k=Zr,E=Fn,m=Dr,h=ki,g=jn,w=eo;return u.openBlock(),u.createBlock(w,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=p=>o.value=p),"max-width":"400",activator:"parent","onClick:outside":c},{default:u.withCtx(()=>[u.createVNode(g,null,{default:u.withCtx(()=>[u.createVNode(k,{class:"px-6",density:"compact"},{default:u.withCtx(()=>[u.createElementVNode("span",O1e,u.toDisplayString(u.unref(n)("editor.link.dialog.title")),1),u.createVNode(f),u.createVNode(x,{class:"mx-0",icon:"",onClick:c},{default:u.withCtx(()=>[u.createVNode(b,{icon:u.unref(Cr)("close")},null,8,["icon"])]),_:1})]),_:1}),u.createVNode(m,null,{default:u.withCtx(()=>[u.createVNode(E,{modelValue:i.value.href,"onUpdate:modelValue":d[0]||(d[0]=p=>i.value.href=p),label:u.unref(n)("editor.link.dialog.link"),autofocus:""},null,8,["modelValue","label"])]),_:1}),u.createVNode(h,null,{default:u.withCtx(()=>[u.createVNode(x,{disabled:a.value,onClick:s},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(u.unref(n)("editor.link.dialog.button.apply")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),_1e=I1e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),openOnClick:!1,dialogComponent:()=>A1e,button:({editor:e,extension:n,t:r})=>{const{dialogComponent:i}=n.options;return{component:zbe,componentProps:{editor:e,t:r},componentSlots:{dialog:i()}}}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],new En({props:{handleClick(e,n){const{schema:r,doc:i,tr:o}=e.state,a=Kg(i.resolve(n),r.marks.link);if(!a)return!1;const s=i.resolve(a.from),c=i.resolve(a.to),l=o.setSelection(new Et(s,c));return e.dispatch(l),!0}}})]}}),D1e=m3.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:$be,componentProps:{editor:e,t:n}})}}});var N1e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,P1e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,L1e=ra.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[_c({find:N1e,type:this.type})]},addPasteRules(){return[Ml({find:P1e,type:this.type})]}});const R1e=L1e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:Ube,componentProps:{editor:e,t:n}})}}});var B1e=ra.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),j1e=ra.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}});const F1e=Zt.create({name:"subAndSuperScript",addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,extension:n,t:r})=>({component:Wbe,componentProps:{editor:e,extension:n,t:r}})}},addExtensions(){const t=[];return this.options.subscript!==!1&&t.push(B1e.configure(this.options.subscript)),this.options.superscript!==!1&&t.push(j1e.configure(this.options.superscript)),t}});var Z3=Ir.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",gn(this.options.HTMLAttributes,t),0]}}),J3=Ir.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",gn(this.options.HTMLAttributes,t),0]}}),Q3=Ir.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",gn(this.options.HTMLAttributes,t),0]}});function Zk(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function V3(t,e,n,r,i,o){var a;let s=0,c=!0,l=e.firstChild;const d=t.firstChild;if(d!==null)for(let f=0,b=0;f<d.childCount;f+=1){const{colspan:x,colwidth:k}=d.child(f).attrs;for(let E=0;E<x;E+=1,b+=1){const m=i===b?o:k&&k[E],h=m?`${m}px`:"";if(s+=m||r,m||(c=!1),l){if(l.style.width!==h){const[g,w]=Zk(r,m);l.style.setProperty(g,w)}l=l.nextSibling}else{const g=document.createElement("col"),[w,p]=Zk(r,m);g.style.setProperty(w,p),e.appendChild(g)}}}for(;l;){const f=l.nextSibling;(a=l.parentNode)==null||a.removeChild(l),l=f}c?(n.style.width=`${s}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${s}px`)}var H1e=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),V3(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,V3(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}};function z1e(t,e,n,r){let i=0,o=!0;const a=[],s=t.firstChild;if(!s)return{};for(let d=0,f=0;d<s.childCount;d+=1){const{colspan:b,colwidth:x}=s.child(d).attrs;for(let k=0;k<b;k+=1,f+=1){const E=n===f?r:x&&x[k];i+=E||e,E||(o=!1);const[m,h]=Zk(e,E);a.push(["col",{style:`${m}: ${h}`}])}}const c=o?`${i}px`:"",l=o?"":`${i}px`;return{colgroup:["colgroup",{},...a],tableWidth:c,tableMinWidth:l}}function q3(t,e){return t.createAndFill()}function $1e(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function U1e(t,e,n,r,i){const o=$1e(t),a=[],s=[];for(let l=0;l<n;l+=1){const d=q3(o.cell);if(d&&s.push(d),r){const f=q3(o.header_cell);f&&a.push(f)}}const c=[];for(let l=0;l<e;l+=1)c.push(o.row.createChecked(null,r&&l===0?a:s));return o.table.createChecked(null,c)}function W1e(t){return t instanceof Tn}var wy=({editor:t})=>{const{selection:e}=t.state;if(!W1e(e))return!1;let n=0;const r=HR(e.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},ej=Ir.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:H1e,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=z1e(t,this.options.cellMinWidth);return["table",gn(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const a=U1e(o.schema,t,e,n);if(i){const s=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(Et.near(r.doc.resolve(s)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Hme(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>zme(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Ume(t,e),addRowBefore:()=>({state:t,dispatch:e})=>Yme(t,e),addRowAfter:()=>({state:t,dispatch:e})=>Gme(t,e),deleteRow:()=>({state:t,dispatch:e})=>Kme(t,e),deleteTable:()=>({state:t,dispatch:e})=>tge(t,e),mergeCells:()=>({state:t,dispatch:e})=>E5(t,e),splitCell:()=>({state:t,dispatch:e})=>T5(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>dh("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>dh("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>qme(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>E5(t,e)?!0:T5(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>Qme(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>I5(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>I5(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&x5(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Tn.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:wy,"Mod-Backspace":wy,Delete:wy,"Mod-Delete":wy}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[dge({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],xge({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:mn(Tt(t,"tableRole",e))}}});Zt.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(ej.configure(this.options.table)),this.options.tableCell!==!1&&t.push(Z3.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(J3.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(Q3.configure(this.options.tableRow)),t}});const Y1e=ej.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),resizable:!0,HTMLAttributes:{class:"table-wrapper"},button:({editor:e,t:n})=>({component:Qbe,componentProps:{editor:e,t:n}})}},addExtensions(){return[Q3.configure(this.options.tableRow),J3.configure(this.options.tableHeader),Z3.configure(this.options.tableCell)]}}),G1e=v3.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),HTMLAttributes:{class:"task-list"},taskItem:{HTMLAttributes:{class:"task-list-item"}},button:({editor:e,t:n})=>({component:Vbe,componentProps:{editor:e,t:n}})}},addExtensions(){return[g3.configure(this.options.taskItem)]}});var X1e=Zt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});const K1e=X1e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),types:["heading","paragraph"],button:({editor:e,extension:n,t:r})=>({component:h0e,componentProps:{editor:e,extension:n,t:r}})}}});var Z1e=ra.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",gn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});const J1e=Z1e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),button:({editor:e,t:n})=>({component:qbe,componentProps:{editor:e,t:n}})}}}),Q1e={class:"headline"},V1e=u.defineComponent({__name:"VideoDialog",props:{value:{default:void 0},editor:{},destroy:{type:Function,default:void 0}},setup(t){const e=t,{t:n}=Is(),r=u.ref(""),i=u.ref(!1),o=u.computed(()=>e.value===r.value||!u.unref(r));function a(){u.unref(r)&&e.editor.chain().focus().setVideo({src:r.value}).run(),s()}function s(){i.value=!1,r.value="",setTimeout(()=>{var c;return(c=e.destroy)==null?void 0:c.call(e)},300)}return u.watchEffect(()=>{e.value&&(r.value=e.value)}),(c,l)=>{const d=Xr,f=_t,b=dt,x=Zr,k=Fn,E=Dr,m=ki,h=jn,g=eo;return u.openBlock(),u.createBlock(g,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=w=>i.value=w),"max-width":"400",activator:"parent","onClick:outside":s},{default:u.withCtx(()=>[u.createVNode(h,null,{default:u.withCtx(()=>[u.createVNode(x,{class:"px-6",density:"compact"},{default:u.withCtx(()=>[u.createElementVNode("span",Q1e,u.toDisplayString(u.unref(n)("editor.video.dialog.title")),1),u.createVNode(d),u.createVNode(b,{class:"mx-0",icon:"",onClick:s},{default:u.withCtx(()=>[u.createVNode(f,{icon:u.unref(Cr)("close")},null,8,["icon"])]),_:1})]),_:1}),u.createVNode(E,null,{default:u.withCtx(()=>[u.createVNode(k,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=w=>r.value=w),label:u.unref(n)("editor.video.dialog.link"),"hide-details":"",autofocus:""},null,8,["modelValue","label"])]),_:1}),u.createVNode(m,null,{default:u.withCtx(()=>[u.createVNode(b,{disabled:o.value,onClick:a},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(u.unref(n)("editor.video.dialog.button.apply")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});function q1e(t){return t=t.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/"),t=t.replace("https://vimeo.com/","https://player.vimeo.com/video/"),/^https?:\/\/www.bilibili.com\/video\/.*/i.test(t)&&(t=t.replace(/\?.*$/i,"").replace("https://www.bilibili.com/video/","https://player.bilibili.com/player.html?bvid=")),t.includes("drive.google.com")&&(t=t.replace("/view","/preview")),t}const ewe=Ir.create({name:"video",group:"block",atom:!0,draggable:!0,addAttributes(){return{src:{default:null,renderHTML:({src:t})=>({src:t?q1e(t):null})},width:{default:this.options.width,renderHTML:({width:t})=>({width:lh(t)})},frameborder:{default:this.options.frameborder?1:0,parseHTML:()=>this.options.frameborder?1:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"div[data-video] iframe"}]},renderHTML({HTMLAttributes:t}){const{width:e="100%"}=t??{},n={...t,width:"100%",height:"100%"},r=`position: relative;overflow: hidden;display: flex;flex: 1;max-width: ${e};`,i=`flex: 1;padding-bottom: ${9/16*100}%;`,o=["div",{style:r},["div",{style:i}],["iframe",n]];return["div",{...this.options.HTMLAttributes,"data-video":""},o]},addCommands(){return{setVideo:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t}),updateVideo:t=>({commands:e})=>e.updateAttributes(this.name,t)}},addOptions(){return{divider:!1,spacer:!1,allowFullscreen:!0,frameborder:!1,width:lv["size-medium"],HTMLAttributes:{class:"iframe-wrapper",style:"display: flex;justify-content: center;"},dialogComponent:()=>V1e,button:({editor:t,extension:e,t:n})=>{const{dialogComponent:r}=e.options;return{component:e0e,componentProps:{editor:t,t:n},componentSlots:{dialog:r()}}}}}});var twe="M5 3C3.9 3 3 3.9 3 5S2.1 7 1 7V9C2.1 9 3 9.9 3 11S3.9 13 5 13H7V11H5V10C5 8.9 4.1 8 3 8C4.1 8 5 7.1 5 6V5H7V3M11 3C12.1 3 13 3.9 13 5S13.9 7 15 7V9C13.9 9 13 9.9 13 11S12.1 13 11 13H9V11H11V10C11 8.9 11.9 8 13 8C11.9 8 11 7.1 11 6V5H9V3H11M22 6V18C22 19.11 21.11 20 20 20H4C2.9 20 2 19.11 2 18V15H4V18H20V6H17.03V4H20C21.11 4 22 4.89 22 6Z",nwe="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",rwe="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",iwe="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",owe="M19,10H5V8H19V10M19,16H5V14H19V16Z",awe="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",swe="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",lwe="M21.71 20.29L20.29 21.71A1 1 0 0 1 18.88 21.71L7 9.85A3.81 3.81 0 0 1 6 10A4 4 0 0 1 2.22 4.7L4.76 7.24L5.29 6.71L6.71 5.29L7.24 4.76L4.7 2.22A4 4 0 0 1 10 6A3.81 3.81 0 0 1 9.85 7L21.71 18.88A1 1 0 0 1 21.71 20.29M2.29 18.88A1 1 0 0 0 2.29 20.29L3.71 21.71A1 1 0 0 0 5.12 21.71L10.59 16.25L7.76 13.42M20 2L16 4V6L13.83 8.17L15.83 10.17L18 8H20L22 4Z";const cwe=u.defineComponent({__name:"PreviewActionButton",props:{editor:{},disabled:{type:Boolean,default:!1},component:{},componentProps:{}},setup(t){const{global:{name:e}}=oi.useTheme(),{t:n}=ea(),r=n("preview");return(i,o)=>i.component?(u.openBlock(),u.createBlock(fx,{key:0,expandable:"",closable:"",title:u.unref(r),density:"compact"},{activator:u.withCtx(({props:a})=>[u.createVNode(u.unref(Wt),u.mergeProps({editor:i.editor,tooltip:u.unref(r),disabled:i.disabled},a),{default:u.withCtx(()=>[u.createVNode(_t,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(`svg:${u.unref(awe)}`),1)]),_:1})]),_:2},1040,["editor","tooltip","disabled"])]),body:u.withCtx(()=>[(u.openBlock(),u.createBlock(u.resolveDynamicComponent(i.component),u.mergeProps({editor:i.editor,t:u.unref(n)},i.componentProps||{}),null,16,["editor","t"]))]),_:1},8,["title"])):u.createCommentVNode("",!0)}}),uwe=Mo.create({name:"preview",addOptions(){return{divider:!1,spacer:!1,title:"Preview",button:({editor:t,extension:e})=>({component:cwe,componentProps:{editor:t,component:e.options.component}})}}}),dwe=u.defineComponent({__name:"HelpActionButton",props:u.mergeModels({editor:{},tooltip:{},disabled:{type:Boolean},title:{},component:{},modelValue:{type:Boolean,default:!1}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const{t:e}=ea(),n=u.useModel(t,"modelValue");function r(o){const a=!n.value;n.value=a}function i(){return n.value}return(o,a)=>(u.openBlock(),u.createBlock(u.unref(Wt),{rawIcon:`svg:${u.unref(swe)}`,editor:o.editor,tooltip:u.unref(e)("help"),disabled:o.disabled,action:r,"is-active":i},null,8,["rawIcon","editor","tooltip","disabled"]))}}),fwe=Mo.create({name:"help",addOptions(){return{divider:!1,spacer:!1,button:({editor:t,extension:e})=>{var n;return{component:dwe,componentProps:{editor:t,modelValue:(n=e.options.modelValue)==null?void 0:n.value,"onUpdate:modelValue":r=>{e.options.modelValue&&(e.options.modelValue.value=r)}}}}}}}),hwe={class:"headline"},pwe=u.defineComponent({__name:"LinkDialog",props:{value:{default:void 0},target:{default:"_blank"},editor:{},destroy:{type:Function,default:void 0}},setup(t){const e=t,n=()=>({href:"",target:"_blank"}),r=u.ref(n()),i=u.ref(!1),o=u.computed(()=>{const{href:c,target:l}=r.value;return c?e.value===c&&e.target===l:!0});function a(){const{href:c,target:l}=r.value;c&&e.editor.chain().focus().extendMarkRange("link").setLink({href:c,target:l}).run(),s()}function s(){i.value=!1,r.value=n(),setTimeout(()=>{var c;return(c=e.destroy)==null?void 0:c.call(e)},300)}return u.watch(i,c=>{c&&(r.value={href:e.value,target:e.target})}),(c,l)=>(u.openBlock(),u.createBlock(eo,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=d=>i.value=d),"max-width":"400",activator:"parent","onClick:outside":s},{default:u.withCtx(()=>[u.createVNode(jn,null,{default:u.withCtx(()=>[u.createVNode(Zr,{class:"px-6",density:"compact"},{default:u.withCtx(()=>[u.createElementVNode("span",hwe,u.toDisplayString(u.unref(Fa).message[u.unref(Fa).lang]["editor.link.dialog.title"]),1),u.createVNode(Xr),u.createVNode(dt,{class:"mx-0",icon:"",onClick:s},{default:u.withCtx(()=>[u.createVNode(_t,{icon:"$close"})]),_:1})]),_:1}),u.createVNode(Dr,null,{default:u.withCtx(()=>[l[2]||(l[2]=u.createElementVNode("div",null,"This is a custom dialog component;",-1)),l[3]||(l[3]=u.createElementVNode("div",null,[u.createTextVNode("please use the "),u.createElementVNode("strong",null,"dialogComponent"),u.createTextVNode(" parameter.")],-1)),u.createVNode(Fn,{modelValue:r.value.href,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value.href=d),label:u.unref(Fa).message[u.unref(Fa).lang]["editor.link.dialog.link"],autofocus:""},null,8,["modelValue","label"])]),_:1}),u.createVNode(ki,null,{default:u.withCtx(()=>[u.createVNode(dt,{disabled:o.value,onClick:a},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(u.unref(Fa).message[u.unref(Fa).lang]["editor.link.dialog.button.apply"]),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),mwe={modelValue:{type:Object,required:!0},upload:{type:Function,required:!0},t:{type:Function,required:!0}},gwe=u.defineComponent({name:"VXTipTapComponentImage",props:mwe,emits:{"update:modelValue":t=>!0},setup(t,{emit:e}){const n=t.t,r=u.useModel(t,"modelValue"),i=u.computed(()=>r.value.src&&r.value.src.substring(0,5)=="data:"),o=u.computed({get(){return i.value?"binary":r.value.src},set(a){a!=="binary"&&(r.value.src=a)}});return()=>u.createVNode(u.Fragment,null,[u.createVNode("div",null,[u.createVNode(v_,{class:"mb-3 mx-auto",link:!0,upload:!0,paste:!0,hint:"Teste","initial-value":r.value.src,modelValue:r.value.src,"onUpdate:modelValue":a=>r.value.src=a,style:"width:fit-content",field:{width:"310px",height:"200px"}},null)]),i.value?u.createVNode(Fn,{readonly:!0,modelValue:o.value,"onUpdate:modelValue":a=>o.value=a,clearable:!0,label:n("editor.image.dialog.form.link"),"prepend-icon":"mdi-link-variant"},null):u.createVNode(Fn,{modelValue:r.value.src,"onUpdate:modelValue":a=>r.value.src=a,label:n("editor.image.dialog.form.link"),autofocus:!0,"prepend-icon":"mdi-link-variant"},null),u.createVNode(Ek,{modelValue:r.value,"onUpdate:modelValue":a=>r.value=a,t:n},null)])}}),tj=Re({id:String,hideDetails:[Boolean,String],hint:String,messages:{type:[Array,String],default:()=>[]},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]}},"vx-util-input");Re({persistentHint:Boolean,...tj()},"vx-util-input");const vwe=u.defineComponent({__name:"Button",props:Yn,setup(t){const{t:e}=ea();return(n,r)=>(u.openBlock(),u.createBlock(u.unref(Wt),{editor:n.editor,action:()=>n.editor.chain().focus().addScript().run(),"is-active":()=>n.editor.isActive("script"),disabled:n.editor.isActive("scriptBlock"),tooltip:u.unref(e)("script"),"raw-icon":`svg:${u.unref(nwe)}`},null,8,["editor","action","is-active","disabled","tooltip","raw-icon"]))}});u.defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=u.ref(),n=u.getCurrentInstance();return u.watchEffect(()=>{const r=t.editor;r&&r.options.element&&e.value&&u.nextTick(()=>{var i;if(!e.value||!((i=r.options.element)!=null&&i.firstChild))return;const o=u.unref(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),u.onBeforeUnmount(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return u.h("div",{ref:t=>{this.rootEl=t}})}}),u.defineComponent({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return u.h(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});var Jk=u.defineComponent({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return u.h(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(t=this.$slots).default)==null?void 0:e.call(t))}}),ywe=class{constructor(t,{props:e={},editor:n}){this.editor=n,this.component=u.markRaw(t),this.el=document.createElement("div"),this.props=u.reactive(e),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var t,e,n,r;return(e=(t=this.renderedComponent.vNode)==null?void 0:t.component)!=null&&e.exposed?this.renderedComponent.vNode.component.exposed:(r=(n=this.renderedComponent.vNode)==null?void 0:n.component)==null?void 0:r.proxy}renderComponent(){let t=u.h(this.component,this.props);return this.editor.appContext&&(t.appContext=this.editor.appContext),typeof document<"u"&&this.el&&u.render(t,this.el),{vNode:t,destroy:()=>{this.el&&u.render(null,this.el),this.el=null,t=null},el:this.el?this.el.firstElementChild:null}}updateProps(t={}){Object.entries(t).forEach(([e,n])=>{this.props[e]=n}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}};u.defineComponent({name:"MarkViewContent",props:{as:{type:String,default:"span"}},render(){return u.h(this.as,{style:{whiteSpace:"inherit"},"data-mark-view-content":""})}});var Qk={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0},view:{type:Object,required:!0},innerDecorations:{type:Object,required:!0},HTMLAttributes:{type:Object,required:!0}},bwe=class extends Pre{mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(r={})=>this.updateAttributes(r),deleteNode:()=>this.deleteNode()},e=this.onDragStart.bind(this);this.decorationClasses=u.ref(this.getDecorationClasses());const n=u.defineComponent({extends:{...this.component},props:Object.keys(t),template:this.component.template,setup:r=>{var i,o;return u.provide("onDragStart",e),u.provide("decorationClasses",this.decorationClasses),(o=(i=this.component).setup)==null?void 0:o.call(i,r,{expose:()=>{}})},__scopeId:this.component.__scopeId,__cssModules:this.component.__cssModules,__name:this.component.__name,__file:this.component.__file});this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new ywe(n,{editor:this.editor,props:t})}get dom(){if(!this.renderer.element||!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=i=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(i)};if(typeof this.options.update=="function"){const i=this.node,o=this.decorations,a=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:t,newDecorations:e,oldInnerDecorations:a,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t.type!==this.node.type?!1:(t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element&&this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element&&this.renderer.element.classList.remove("ProseMirror-selectednode")}getDecorationClasses(){return this.decorations.flatMap(t=>t.type.attrs.class).join(" ")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}};function Vk(t,e){return n=>{if(!n.editor.contentComponent)return{};const r=typeof t=="function"&&"__vccOpts"in t?t.__vccOpts:t;return new bwe(r,n,e)}}function kh(){return kh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kh.apply(this,arguments)}var wwe=13,xwe=9,Cwe=8,Swe=89,xy=90,kwe=77,nj=57,rj=219,ij=222,oj=192,Ewe=27,aj=100,Twe=3e3,Mwe=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),qk=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Iwe=u.defineComponent({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(e){e?this.codeData=e:this.codeData=""}},content:{immediate:!0,handler:function(){var e=this;this.lineNumbers&&this.$nextTick(function(){e.setLineNumbersHeight()})}},lineNumbers:function(){var e=this;this.$nextTick(function(){e.styleLineNumbers(),e.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var e=this.highlight(this.codeData)+"<br />";return e},lineNumbersCount:function(){var e=this.codeData.split(/\r\n|\n/).length;return e}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var e=this.$refs.pre,n=this.$el.querySelector(".prism-editor__line-numbers"),r=window.getComputedStyle(e);this.$nextTick(function(){var i="border-top-left-radius",o="border-bottom-left-radius";if(n){n.style[i]=r[i],n.style[o]=r[o],e.style[i]="0",e.style[o]="0";var a=["background-color","margin-top","padding-top","font-family","font-size","line-height"];a.forEach(function(s){n.style[s]=r[s]}),n.style["margin-bottom"]="-"+r["padding-top"]}})}},_recordCurrentState:function(){var e=this.$refs.textarea;if(e){var n=e.value,r=e.selectionStart,i=e.selectionEnd;this._recordChange({value:n,selectionStart:r,selectionEnd:i})}},_getLines:function(e,n){return e.substring(0,n).split(`
`)},_applyEdits:function(e){var n=this.$refs.textarea,r=this.history.stack[this.history.offset];r&&n&&(this.history.stack[this.history.offset]=kh({},r,{selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})),this._recordChange(e),this._updateInput(e)},_recordChange:function(e,n){n===void 0&&(n=!1);var r=this.history,i=r.stack,o=r.offset;if(i.length&&o>-1){this.history.stack=i.slice(0,o+1);var a=this.history.stack.length;if(a>aj){var s=a-aj;this.history.stack=i.slice(s,a),this.history.offset=Math.max(this.history.offset-s,0)}}var c=Date.now();if(n){var l=this.history.stack[this.history.offset];if(l&&c-l.timestamp<Twe){var d,f,b=/[^a-z0-9]([a-z0-9]+)$/i,x=(d=this._getLines(l.value,l.selectionStart).pop())===null||d===void 0?void 0:d.match(b),k=(f=this._getLines(e.value,e.selectionStart).pop())===null||f===void 0?void 0:f.match(b);if(x&&k&&k[1].startsWith(x[1])){this.history.stack[this.history.offset]=kh({},e,{timestamp:c});return}}}this.history.stack.push(kh({},e,{timestamp:c})),this.history.offset++},_updateInput:function(e){var n=this.$refs.textarea;n&&(n.value=e.value,n.selectionStart=e.selectionStart,n.selectionEnd=e.selectionEnd,this.$emit("update:modelValue",e.value))},handleChange:function(e){var n=e.target,r=n.value,i=n.selectionStart,o=n.selectionEnd;this._recordChange({value:r,selectionStart:i,selectionEnd:o},!0),this.$emit("update:modelValue",r)},_undoEdit:function(){var e=this.history,n=e.stack,r=e.offset,i=n[r-1];i&&(this._updateInput(i),this.history.offset=Math.max(r-1,0))},_redoEdit:function(){var e=this.history,n=e.stack,r=e.offset,i=n[r+1];i&&(this._updateInput(i),this.history.offset=Math.min(r+1,n.length-1))},handleKeyDown:function(e){var n=this.tabSize,r=this.insertSpaces,i=this.ignoreTabKey;if(this.$emit("keydown",e),!e.defaultPrevented){e.keyCode===Ewe&&(e.target.blur(),this.$emit("blur",e));var o=e.target,a=o.value,s=o.selectionStart,c=o.selectionEnd,l=(r?" ":"	").repeat(n);if(e.keyCode===xwe&&!i&&this.capture)if(e.preventDefault(),e.shiftKey){var d=this._getLines(a,s),f=d.length-1,b=this._getLines(a,c).length-1,x=a.split(`
`).map(function(P,L){return L>=f&&L<=b&&P.startsWith(l)?P.substring(l.length):P}).join(`
`);if(a!==x){var k=d[f];this._applyEdits({value:x,selectionStart:k.startsWith(l)?s-l.length:s,selectionEnd:c-(a.length-x.length)})}}else if(s!==c){var E=this._getLines(a,s),m=E.length-1,h=this._getLines(a,c).length-1,g=E[m];this._applyEdits({value:a.split(`
`).map(function(P,L){return L>=m&&L<=h?l+P:P}).join(`
`),selectionStart:/\S/.test(g)?s+l.length:s,selectionEnd:c+l.length*(h-m+1)})}else{var w=s+l.length;this._applyEdits({value:a.substring(0,s)+l+a.substring(c),selectionStart:w,selectionEnd:w})}else if(e.keyCode===Cwe){var p=s!==c,v=a.substring(0,s);if(v.endsWith(l)&&!p){e.preventDefault();var y=s-l.length;this._applyEdits({value:a.substring(0,s-l.length)+a.substring(c),selectionStart:y,selectionEnd:y})}}else if(e.keyCode===wwe){if(s===c){var S=this._getLines(a,s).pop(),T=S==null?void 0:S.match(/^\s+/);if(T&&T[0]){e.preventDefault();var C=`
`+T[0],M=s+C.length;this._applyEdits({value:a.substring(0,s)+C+a.substring(c),selectionStart:M,selectionEnd:M})}}}else if(e.keyCode===nj||e.keyCode===rj||e.keyCode===ij||e.keyCode===oj){var A;e.keyCode===nj&&e.shiftKey?A=["(",")"]:e.keyCode===rj?e.shiftKey?A=["{","}"]:A=["[","]"]:e.keyCode===ij?e.shiftKey?A=['"','"']:A=["'","'"]:e.keyCode===oj&&!e.shiftKey&&(A=["`","`"]),s!==c&&A&&(e.preventDefault(),this._applyEdits({value:a.substring(0,s)+A[0]+a.substring(s,c)+A[1]+a.substring(c),selectionStart:s,selectionEnd:c+2}))}else(qk?e.metaKey&&e.keyCode===xy:e.ctrlKey&&e.keyCode===xy)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),this._undoEdit()):(qk?e.metaKey&&e.keyCode===xy&&e.shiftKey:Mwe?e.ctrlKey&&e.keyCode===Swe:e.ctrlKey&&e.keyCode===xy&&e.shiftKey)&&!e.altKey?(e.preventDefault(),this._redoEdit()):e.keyCode===kwe&&e.ctrlKey&&(!qk||e.shiftKey)&&(e.preventDefault(),this.capture=!this.capture)}}},render:function(){var e=this,n=u.h("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),r=u.h("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[n,Array.from(Array(this.lineNumbersCount).keys()).map(function(s,c){return u.h("div",{class:"prism-editor__line-number token comment"},""+ ++c)})]),i=u.h("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(c){e.$emit("click",c)},onKeyup:function(c){e.$emit("keyup",c)},onFocus:function(c){e.$emit("focus",c)},onBlur:function(c){e.$emit("blur",c)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),o=u.h("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),a=u.h("div",{class:"prism-editor__container"},[i,o]);return u.h("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&r,a])}}),eE={exports:{}},sj;function Owe(){return sj||(sj=1,function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function g(w){return w instanceof c?new c(w.type,g(w.content),w.alias):Array.isArray(w)?w.map(g):w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(g){return Object.prototype.toString.call(g).slice(8,-1)},objId:function(g){return g.__id||Object.defineProperty(g,"__id",{value:++o}),g.__id},clone:function g(w,p){p=p||{};var v,y;switch(s.util.type(w)){case"Object":if(y=s.util.objId(w),p[y])return p[y];v={},p[y]=v;for(var S in w)w.hasOwnProperty(S)&&(v[S]=g(w[S],p));return v;case"Array":return y=s.util.objId(w),p[y]?p[y]:(v=[],p[y]=v,w.forEach(function(T,C){v[C]=g(T,p)}),v);default:return w}},getLanguage:function(g){for(;g;){var w=i.exec(g.className);if(w)return w[1].toLowerCase();g=g.parentElement}return"none"},setLanguage:function(g,w){g.className=g.className.replace(RegExp(i,"gi"),""),g.classList.add("language-"+w)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(v){var g=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(g){var w=document.getElementsByTagName("script");for(var p in w)if(w[p].src==g)return w[p]}return null}},isActive:function(g,w,p){for(var v="no-"+w;g;){var y=g.classList;if(y.contains(w))return!0;if(y.contains(v))return!1;g=g.parentElement}return!!p}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(g,w){var p=s.util.clone(s.languages[g]);for(var v in w)p[v]=w[v];return p},insertBefore:function(g,w,p,v){v=v||s.languages;var y=v[g],S={};for(var T in y)if(y.hasOwnProperty(T)){if(T==w)for(var C in p)p.hasOwnProperty(C)&&(S[C]=p[C]);p.hasOwnProperty(T)||(S[T]=y[T])}var M=v[g];return v[g]=S,s.languages.DFS(s.languages,function(A,P){P===M&&A!=g&&(this[A]=S)}),S},DFS:function g(w,p,v,y){y=y||{};var S=s.util.objId;for(var T in w)if(w.hasOwnProperty(T)){p.call(w,T,w[T],v||T);var C=w[T],M=s.util.type(C);M==="Object"&&!y[S(C)]?(y[S(C)]=!0,g(C,p,null,y)):M==="Array"&&!y[S(C)]&&(y[S(C)]=!0,g(C,p,T,y))}}},plugins:{},highlightAll:function(g,w){s.highlightAllUnder(document,g,w)},highlightAllUnder:function(g,w,p){var v={callback:p,container:g,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),s.hooks.run("before-all-elements-highlight",v);for(var y=0,S;S=v.elements[y++];)s.highlightElement(S,w===!0,v.callback)},highlightElement:function(g,w,p){var v=s.util.getLanguage(g),y=s.languages[v];s.util.setLanguage(g,v);var S=g.parentElement;S&&S.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(S,v);var T=g.textContent,C={element:g,language:v,grammar:y,code:T};function M(P){C.highlightedCode=P,s.hooks.run("before-insert",C),C.element.innerHTML=C.highlightedCode,s.hooks.run("after-highlight",C),s.hooks.run("complete",C),p&&p.call(C.element)}if(s.hooks.run("before-sanity-check",C),S=C.element.parentElement,S&&S.nodeName.toLowerCase()==="pre"&&!S.hasAttribute("tabindex")&&S.setAttribute("tabindex","0"),!C.code){s.hooks.run("complete",C),p&&p.call(C.element);return}if(s.hooks.run("before-highlight",C),!C.grammar){M(s.util.encode(C.code));return}if(w&&r.Worker){var A=new Worker(s.filename);A.onmessage=function(P){M(P.data)},A.postMessage(JSON.stringify({language:C.language,code:C.code,immediateClose:!0}))}else M(s.highlight(C.code,C.grammar,C.language))},highlight:function(g,w,p){var v={code:g,grammar:w,language:p};if(s.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=s.tokenize(v.code,v.grammar),s.hooks.run("after-tokenize",v),c.stringify(s.util.encode(v.tokens),v.language)},tokenize:function(g,w){var p=w.rest;if(p){for(var v in p)w[v]=p[v];delete w.rest}var y=new f;return b(y,y.head,g),d(g,y,w,y.head,0),k(y)},hooks:{all:{},add:function(g,w){var p=s.hooks.all;p[g]=p[g]||[],p[g].push(w)},run:function(g,w){var p=s.hooks.all[g];if(!(!p||!p.length))for(var v=0,y;y=p[v++];)y(w)}},Token:c};r.Prism=s;function c(g,w,p,v){this.type=g,this.content=w,this.alias=p,this.length=(v||"").length|0}c.stringify=function g(w,p){if(typeof w=="string")return w;if(Array.isArray(w)){var v="";return w.forEach(function(M){v+=g(M,p)}),v}var y={type:w.type,content:g(w.content,p),tag:"span",classes:["token",w.type],attributes:{},language:p},S=w.alias;S&&(Array.isArray(S)?Array.prototype.push.apply(y.classes,S):y.classes.push(S)),s.hooks.run("wrap",y);var T="";for(var C in y.attributes)T+=" "+C+'="'+(y.attributes[C]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+T+">"+y.content+"</"+y.tag+">"};function l(g,w,p,v){g.lastIndex=w;var y=g.exec(p);if(y&&v&&y[1]){var S=y[1].length;y.index+=S,y[0]=y[0].slice(S)}return y}function d(g,w,p,v,y,S){for(var T in p)if(!(!p.hasOwnProperty(T)||!p[T])){var C=p[T];C=Array.isArray(C)?C:[C];for(var M=0;M<C.length;++M){if(S&&S.cause==T+","+M)return;var A=C[M],P=A.inside,L=!!A.lookbehind,R=!!A.greedy,j=A.alias;if(R&&!A.pattern.global){var z=A.pattern.toString().match(/[imsuy]*$/)[0];A.pattern=RegExp(A.pattern.source,z+"g")}for(var $=A.pattern||A,Y=v.next,ae=y;Y!==w.tail&&!(S&&ae>=S.reach);ae+=Y.value.length,Y=Y.next){var K=Y.value;if(w.length>g.length)return;if(!(K instanceof c)){var te=1,G;if(R){if(G=l($,ae,g,L),!G||G.index>=g.length)break;var de=G.index,ue=G.index+G[0].length,J=ae;for(J+=Y.value.length;de>=J;)Y=Y.next,J+=Y.value.length;if(J-=Y.value.length,ae=J,Y.value instanceof c)continue;for(var be=Y;be!==w.tail&&(J<ue||typeof be.value=="string");be=be.next)te++,J+=be.value.length;te--,K=g.slice(ae,J),G.index-=ae}else if(G=l($,0,K,L),!G)continue;var de=G.index,ce=G[0],V=K.slice(0,de),ne=K.slice(de+ce.length),Q=ae+K.length;S&&Q>S.reach&&(S.reach=Q);var Z=Y.prev;V&&(Z=b(w,Z,V),ae+=V.length),x(w,Z,te);var he=new c(T,P?s.tokenize(ce,P):ce,j,ce);if(Y=b(w,Z,he),ne&&b(w,Y,ne),te>1){var X={cause:T+","+M,reach:Q};d(g,w,p,Y.prev,ae,X),S&&X.reach>S.reach&&(S.reach=X.reach)}}}}}}function f(){var g={value:null,prev:null,next:null},w={value:null,prev:g,next:null};g.next=w,this.head=g,this.tail=w,this.length=0}function b(g,w,p){var v=w.next,y={value:p,prev:w,next:v};return w.next=y,v.prev=y,g.length++,y}function x(g,w,p){for(var v=w.next,y=0;y<p&&v!==g.tail;y++)v=v.next;w.next=v,v.prev=w,g.length-=y}function k(g){for(var w=[],p=g.head.next;p!==g.tail;)w.push(p.value),p=p.next;return w}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(g){var w=JSON.parse(g.data),p=w.language,v=w.code,y=w.immediateClose;r.postMessage(s.highlight(v,s.languages[p],p)),y&&r.close()},!1)),s;var E=s.util.currentScript();E&&(s.filename=E.src,E.hasAttribute("data-manual")&&(s.manual=!0));function m(){s.manual||s.highlightAll()}if(!s.manual){var h=document.readyState;h==="loading"||h==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return s}(e);t.exports&&(t.exports=n),typeof XI<"u"&&(XI.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,o){var a={};a["language-"+o]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[o]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};s["language-"+o]={pattern:/[\s\S]+/,inside:n.languages[o]};var c={};c[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var o=r.languages.markup;o&&(o.tag.addInlined("style","css"),o.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(E,m){return" Error "+E+" while fetching file: "+m},o=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",c="loading",l="loaded",d="failed",f="pre[data-src]:not(["+s+'="'+l+'"]):not(['+s+'="'+c+'"])';function b(E,m,h){var g=new XMLHttpRequest;g.open("GET",E,!0),g.onreadystatechange=function(){g.readyState==4&&(g.status<400&&g.responseText?m(g.responseText):g.status>=400?h(i(g.status,g.statusText)):h(o))},g.send(null)}function x(E){var m=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(m){var h=Number(m[1]),g=m[2],w=m[3];return g?w?[h,Number(w)]:[h,void 0]:[h,h]}}n.hooks.add("before-highlightall",function(E){E.selector+=", "+f}),n.hooks.add("before-sanity-check",function(E){var m=E.element;if(m.matches(f)){E.code="",m.setAttribute(s,c);var h=m.appendChild(document.createElement("CODE"));h.textContent=r;var g=m.getAttribute("data-src"),w=E.language;if(w==="none"){var p=(/\.(\w+)$/.exec(g)||[,"none"])[1];w=a[p]||p}n.util.setLanguage(h,w),n.util.setLanguage(m,w);var v=n.plugins.autoloader;v&&v.loadLanguages(w),b(g,function(y){m.setAttribute(s,l);var S=x(m.getAttribute("data-range"));if(S){var T=y.split(/\r\n?|\n/g),C=S[0],M=S[1]==null?T.length:S[1];C<0&&(C+=T.length),C=Math.max(0,Math.min(C-1,T.length)),M<0&&(M+=T.length),M=Math.max(0,Math.min(M,T.length)),y=T.slice(C,M).join(`
`),m.hasAttribute("data-start")||m.setAttribute("data-start",String(C+1))}h.textContent=y,n.highlightElement(h)},function(y){m.setAttribute(s,d),h.textContent=y})}}),n.plugins.fileHighlight={highlight:function(m){for(var h=(m||document).querySelectorAll(f),g=0,w;w=h[g++];)n.highlightElement(w)}};var k=!1;n.fileHighlight=function(){k||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),k=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(eE)),eE.exports}var Awe=Owe();const _we=ec(Awe);Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};var lj={},cj;function Dwe(){return cj||(cj=1,Prism.languages.gad=Prism.languages.extend("clike",{keyword:/\b(?:break|continue|else|for|func|if|import|return|var|const|param|global|try|catch|finally|throw|in|undefined|yes|no|do|end)\b/,builtin:/\b(?:bool|bytes|error|float|chars?|string|u?int|append|copy|delete|len|printf?(?:ln)?|sort|sortReverse|repeat|contains|typeName|sprintf|isError|isInt|isUint|isFloat|isChar|isBool|isString|isBytes|isMap|isSyncMap|isArray|isUndefined|isFunction|isCallable|isIterable|WrongNumArgumentsError|InvalidOperatorError|IndexOutOfBoundsError|NotIterableError|NotIndexableError|NotIndexAssignableError|NotCallableError|NotImplementedError|ZeroDivisionError|TypeError)\b/,boolean:/\b(?:_|true|false)\b/,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\.|\*\*?=?/,number:/(?:\b0x[a-f\d]+|(?:\b\d+u?\.?\d*|\B\.\d+)(?:e[-+]?\d+)?)i?/i,string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0}}),delete Prism.languages.gad["class-name"]),lj}Dwe();const{highlight:Nwe,languages:Pwe}=_we,Lwe={modelValue:{type:String,required:!0},singleLine:Boolean,noPlaceholder:Boolean,editorProps:{type:Object,default:()=>({lineNumbers:!0})}},uj={"(":")","[":"]","{":"}","'":"'",'"':'"'},tE=u.defineComponent({name:"VXGadLangCodeEditor",props:Lwe,emits:{"update:modelValue":t=>!0},setup(t){const{t:e}=ea(),n=u.useModel(t,"modelValue"),r=a=>Nwe(a,Pwe.gad,"gad"),i={...t.editorProps},o=async a=>{const{target:s}=a,c=s.selectionStart,l=s.value,d=l.slice(c-1,c);if(uj[d]){const f=l.slice(0,c)+uj[d]+l.slice(c);return n.value=f,u.nextTick().then(()=>{s.selectionEnd=c})}return new Promise(f=>f(""))};return t.singleLine&&(i.lineNumbers=!1),t.noPlaceholder||(i.placeholder=e("pleaseEnterTheCode")),()=>u.createVNode("div",{class:["gadlang-editor language-gad",{"gadlang-editor--single-line":t.singleLine||!1}]},[u.createVNode(Iwe,u.mergeProps({modelValue:n.value,"onUpdate:modelValue":a=>n.value=a},{highlight:r,onInput:o,...i}),null)])}}),Rwe=Re({title:String,...n0()},"VXBtn"),fa=et()({name:"VXBtn",props:Rwe(),setup(t,{slots:e,attrs:n}){return st(()=>{const r={...t,...n};return u.createVNode(cf,{text:t.title,location:"top"},{activator:({props:i})=>u.createVNode(dt,{...r,...i},e)})}),{}}});function Bwe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!u.isVNode(t)}const jwe=t=>t.map(e=>{const n=u.computed(()=>e.type),{textColorClasses:r,textColorStyles:i}=Ji(n);return{classes:r.value,styles:i.value}}),Fwe={items:{type:Array,required:!0},error:Boolean,...Ot()},Cy=u.defineComponent({name:"VXMessages",props:Fwe,emits:{"update:modelValue":t=>!0},setup(t,{slots:e}){const{t:n}=ea(),r=t.items??[];return st(()=>{let i;if(!r.length)return u.createVNode(u.Fragment,null,null);const o=jwe(r),a=r.filter(c=>c.type=="error").length>0,s=()=>u.createVNode("div",{class:"v-messages"},[r.map((c,l)=>u.createVNode("div",{class:["v-messages__message",...o[l].classes],style:o[l].styles,key:`${l}-${c.value}`},[u.createVNode(_t,{icon:"$"+c.type},null),c.value,c.detail?u.createVNode(fx,{density:"compact",closable:!0,expandable:!0},{activator:d=>u.createVNode(fa,u.mergeProps({title:n("showDetail"),size:"small",density:"compact",variant:"text",class:"ms-2",icon:"mdi-open-in-new"},d.props),null),body:()=>{let d;return typeof c.detail=="string"?d=pC({template:c.detail}):d=pC(c.detail),u.createVNode("div",null,[u.h(d)])}}):void 0]))]);return u.createVNode("div",{class:["vx-messages",t.class],style:t.style},[a?u.createVNode(Rm,{density:"compact",type:"error",variant:"tonal",class:"rounded-0"},Bwe(i=s())?i:{default:()=>[i]}):u.createVNode("div",{class:"v-input__details py-2 px-3",role:"alert","aria-live":"polite"},[s()])])}),{}}}),Hwe={"data-type":"script"},zwe=u.defineComponent({__name:"View",props:{...Qk,selected:{type:Boolean,required:!0}},setup(t){const e=t,n=u.computed({get(){return e.node.attrs.value??""},set(i){e.updateAttributes({value:i})}}),r=e.node.attrs.messages??[];return(i,o)=>(u.openBlock(),u.createBlock(u.unref(Jk),{as:"span"},{default:u.withCtx(()=>[u.createElementVNode("div",Hwe,[u.createVNode(u.unref(tE),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a),"single-line":"","no-placeholder":""},null,8,["modelValue"]),u.createVNode(u.unref(Cy),{class:"border-t bg-grey-lighten-5",items:u.unref(r)},null,8,["items"])])]),_:1}))}}),$we=nl(zwe,[["__scopeId","data-v-d3937bb5"]]),nE=()=>({messages:{renderHTML:()=>({}),parseHTML(t){const e=t.getAttribute("data-messages");let n=[];return e&&(n=JSON.parse(e)),n}}}),rE=()=>({value:{default:"",renderHTML:()=>({}),parseHTML:t=>{const e=t.innerText;return t.innerHTML="",e}}}),Uwe=()=>({...nE(),...rE()}),Wwe=Pu.create({name:"script",inline:!0,group:"inline",content:"text*",addAttributes(){return{...rE(),...nE()}},parseHTML(){return[{tag:'script[type="text/script"]'}]},renderHTML({node:t}){return["script",{type:"text/script"},t.attrs.value]},addCommands(){return{addScript:()=>({commands:t,editor:e})=>{const n=e.schema.nodes.script.create({value:""});return t.insertContent(n)}}},addNodeView(){return Vk($we)}}).extend({addOptions(){return{HTMLAttributes:{},button:({editor:t,extension:e,t:n})=>({component:vwe,componentProps:{...e,editor:t,t:n}})}}}),Ywe=u.defineComponent({__name:"Button",props:Yn,setup(t){const{t:e}=ea();function n(){return t.editor.chain().focus().addScriptValue().run()}return(r,i)=>(u.openBlock(),u.createBlock(u.unref(Wt),{editor:r.editor,action:n,"is-active":()=>r.editor.isActive("scriptValue")||!1,disabled:r.editor.isActive("scriptBlock"),tooltip:u.unref(e)("scriptResult"),"raw-icon":`svg:${u.unref(owe)}`},null,8,["editor","is-active","disabled","tooltip","raw-icon"]))}}),Gwe=nl(u.defineComponent({__name:"View",props:Qk,setup(t){const e=t,n=e.node.attrs.messages??[],r=u.computed({get(){return e.node.attrs.value??""},set(i){e.updateAttributes({value:i})}});return(i,o)=>(u.openBlock(),u.createBlock(u.unref(Jk),{as:"div","data-type":"scriptValue"},{default:u.withCtx(()=>[u.createVNode(u.unref(tE),{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a),"single-line":"","no-placeholder":""},null,8,["modelValue"]),u.createVNode(u.unref(Cy),{class:"border-t bg-grey-lighten-5",items:u.unref(n)},null,8,["items"])]),_:1}))}}),[["__scopeId","data-v-750dfe30"]]),Xwe=Pu.create({name:"scriptValue",inline:!0,group:"inline",content:"text*",addAttributes(){return{...rE(),...nE()}},parseHTML(){return[{tag:'script[type="text/scriptValue"]'}]},renderHTML({node:t}){const e={...t.attrs};return delete e.messages,["script",{type:"text/scriptValue"},e.value]},addCommands(){return{addScriptValue:()=>({commands:t,editor:e})=>{const n=e.schema.nodes.scriptValue.create({value:""});return t.insertContent(n)}}},addNodeView(){return Vk(Gwe)}}).extend({addOptions(){return{HTMLAttributes:{},button:({editor:t,extension:e,t:n})=>({component:Ywe,componentProps:{...e,editor:t,t:n}})}}}),Kwe=u.defineComponent({__name:"Button",props:{items:{type:Object,default:()=>[]},...Yn},setup(t){const n=t.editor,{t:r}=ea(),i=u.ref([]);function o(s,c="success"){i.value.push({text:s,color:c})}const a={editor:n,notify:o};return(s,c)=>{var l;return u.openBlock(),u.createElementBlock(u.Fragment,null,[u.createVNode(CV,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),location:"top",timeout:"3000",closable:""},null,8,["modelValue"]),(l=t.items)!=null&&l.length?(u.openBlock(),u.createBlock(Go,{key:0},{activator:u.withCtx(({props:d})=>[u.createVNode(dt,u.mergeProps(d,{icon:"",density:"comfortable",size:"small",class:"rounded me-1 ms-0"}),{default:u.withCtx(()=>[u.createVNode(_t,{icon:"svg:"+u.unref(lwe)},null,8,["icon"]),u.createVNode(cf,{eager:!1,activator:"parent",location:"top",text:u.unref(r)("tools")},null,8,["text"])]),_:2},1040)]),default:u.withCtx(()=>[u.createVNode(ji,null,{default:u.withCtx(()=>[(u.openBlock(!0),u.createElementBlock(u.Fragment,null,u.renderList(t.items,(d,f)=>{var b,x;return u.openBlock(),u.createElementBlock(u.Fragment,{key:f},[d.component?(u.openBlock(),u.createBlock(u.resolveDynamicComponent((b=d.component)==null?void 0:b.view),u.mergeProps({key:0,ref_for:!0},d.component.props,{t:u.unref(r),editor:u.unref(n),notify:o}),null,16,["t","editor"])):(u.openBlock(),u.createBlock(ir,{key:1,"prepend-icon":d.icon,title:(x=d.title)==null?void 0:x.call(d),onClick:k=>{var E;return(E=d.action)==null?void 0:E.call(d,a)}},null,8,["prepend-icon","title","onClick"]))],64)}),128))]),_:1})]),_:1})):u.createCommentVNode("",!0)],64)}}}),Zwe=Mo.create({name:"toolsButton",addOptions(){return{divider:!1,spacer:!1,title:"Tools",button:({editor:t,extension:e})=>({component:Kwe,componentProps:{editor:t,component:e.options.component,items:e.options.items}})}}}),Jwe=u.defineComponent({__name:"Item",props:{t:{type:Function,required:!0},editor:{type:Object,required:!0},notify:{type:Function,required:!0}},setup(t){const e=t,n=e.editor,r=e.notify,{t:i}=ea();async function o(s){const c=JSON.stringify(n.getJSON());await s.view.navigator.clipboard.writeText(c),r(i("copiedToClipboard"))}async function a(s){s.view.navigator.clipboard.readText().then(c=>{if(!c)r(i("pastedIsEmpty"),"error");else if(c[0]=="{"&&c[c.length-1]=="}")try{const l=JSON.parse(c);n.commands.setContent(l),r(i("pastedFromClipboard"))}catch{r(i("invalidContent"),"error")}else r(i("invalidContent"),"error")})}return(s,c)=>(u.openBlock(),u.createBlock(ir,{density:"compact"},{append:u.withCtx(()=>[u.createVNode(_t,{icon:"mdi-menu-right",size:"x-small"})]),default:u.withCtx(()=>[u.createVNode(Mp,null,{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(u.unref(i)("copyOrPasteContent")),1)]),_:1}),u.createVNode(Go,{"open-on-focus":!1,activator:"parent","open-on-hover":"",submenu:""},{default:u.withCtx(()=>[u.createVNode(ji,{density:"compact"},{default:u.withCtx(()=>[u.createVNode(ir,{onClick:o,title:u.unref(i)("copy"),subtitle:u.unref(i)("copyContent"),"prepend-icon":`svg:${u.unref(rwe)}`},null,8,["title","subtitle","prepend-icon"]),u.createVNode(ir,{onClick:a,title:u.unref(i)("paste"),subtitle:u.unref(i)("pasteContent"),"prepend-icon":`svg:${u.unref(iwe)}`},null,8,["title","subtitle","prepend-icon"])]),_:1})]),_:1})]),_:1}))}});function Qwe(){return{component:{view:Jwe}}}const iE=4,Vwe=/^```([a-z]+)?[\s\n]$/,qwe=/^~~~([a-z]+)?[\s\n]$/,exe=Pu.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!0,tabSize:iE,HTMLAttributes:{}}},content:"(text | script | scriptValue)*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var o;const{languageClassPrefix:e}=this.options;if(!e)return null;const i=[...((o=t.firstElementChild)==null?void 0:o.classList)||[]].filter(a=>a.startsWith(e)).map(a=>a.replace(e,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",lC(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const e=this.options.tabSize??iE,{state:n}=t,{selection:r}=n,{$from:i,empty:o}=r;if(i.parent.type!==this.type)return!1;const a=" ".repeat(e);return o?t.commands.insertContent(a):t.commands.command(({tr:s})=>{const{from:c,to:l}=r,b=n.doc.textBetween(c,l,`
`,`
`).split(`
`).map(x=>a+x).join(`
`);return s.replaceWith(c,l,n.schema.text(b)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const e=this.options.tabSize??iE,{state:n}=t,{selection:r}=n,{$from:i,empty:o}=r;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var p;const{pos:s}=i,c=i.start(),l=i.end(),f=n.doc.textBetween(c,l,`
`,`
`).split(`
`);let b=0,x=0;const k=s-c;for(let v=0;v<f.length;v+=1){if(x+f[v].length>=k){b=v;break}x+=f[v].length+1}const m=((p=f[b].match(/^ */))==null?void 0:p[0])||"",h=Math.min(m.length,e);if(h===0)return!0;let g=c;for(let v=0;v<b;v+=1)g+=f[v].length+1;return a.delete(g,g+h),s-g<=h&&a.setSelection(_n.create(a.doc,g)),!0}):t.commands.command(({tr:a})=>{const{from:s,to:c}=r,f=n.doc.textBetween(s,c,`
`,`
`).split(`
`).map(b=>{var E;const x=((E=b.match(/^ */))==null?void 0:E[0])||"",k=Math.min(x.length,e);return b.slice(k)}).join(`
`);return a.replaceWith(s,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parent.textContent.substring(0,r.parentOffset);if(o.indexOf(`
`)<0){const l=o.match(/^(#|\/\/)(.*)*$/);let d={};l&&l[2]&&l[2].replace(/(^\s+|\s+$)/g,"").split(",").map(b=>{const x=b.replace(/(^\s+|\s+$)/g,"").split("=");if(x.length==2){const k=x[0];let E=x[1];k=="lang"&&(d.language=E)}}),Object.keys(d).filter(b=>d[b]!=r.parent.attrs[b]).length&&t.commands.updateAttributes(this.type,d)}if(!this.options.exitOnTripleEnter)return!1;const s=r.parentOffset===r.parent.nodeSize-2,c=r.parent.textContent.endsWith(`

`);return!s||!c?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const s=i.after();return s===void 0?!1:r.nodeAt(s)?t.commands.command(({tr:l})=>(l.setSelection(yn.near(r.resolve(s))),!0)):t.commands.exitCode()}}},addInputRules(){return[fC({find:Vwe,type:this.type,getAttributes:t=>({language:t[1]})}),fC({find:qwe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new cl({key:new ul("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:a,schema:s}=t.state,c=s.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:o},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(_n.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),txe=(t,e)=>({action:()=>t.chain().focus().setScriptBlock().run(),isActive:()=>t.isActive("scriptBlock")||!1,disabled:!t.can().toggleTemplateCodeBlock(),title:e("script"),rawIcon:`svg:${twe}`}),nxe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor"};function rxe(t,e){return u.openBlock(),u.createElementBlock("svg",nxe,e[0]||(e[0]=[u.createElementVNode("path",{d:"M12 3h-2v2H8v2h2v2h2V7h2V5h-2zM4 12h16v2H4zM4 16h16v2H4zM4 20h10v2H4z"},null,-1)]))}const ixe={render:rxe},oxe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor"};function axe(t,e){return u.openBlock(),u.createElementBlock("svg",oxe,e[0]||(e[0]=[u.createElementVNode("path",{d:"M4 4h16v2H4zM4 8h16v2H4zM4 12h10v2H4zM19 17h-2v-2h-2v2h-2v2h2v2h2v-2h2z"},null,-1)]))}const sxe={render:axe},lxe=u.defineComponent({__name:"View",props:{...Qk,selected:{type:Boolean,required:!0}},setup(t){const e=t,n=()=>e.getPos(),r=u.ref(!1),i=u.computed({get(){return e.node.attrs.value??""},set(l){e.updateAttributes({value:l})}}),o=e.node.attrs.messages??[],{t:a}=ea(),s=()=>{const{editor:l,node:d}=e;l.chain().insertContentAt(n(),{type:"paragraph"}).run()},c=()=>{const{editor:l}=e;l.chain().insertContentAt(n()+1,{type:"paragraph"}).run()};return(l,d)=>(u.openBlock(),u.createBlock(u.unref(Jk),{as:"div","data-type":"scriptBlock"},{default:u.withCtx(()=>[u.createVNode(u.unref(fa),{size:"small",icon:r.value?"mdi-chevron-up":"mdi-chevron-down",title:r.value?"Ocultar":"Expandir",variant:"text",onClick:d[0]||(d[0]=f=>r.value=!r.value),density:"compact"},null,8,["icon","title"]),u.createTextVNode(" "+u.toDisplayString(u.unref(a)("script"))+" ",1),u.createVNode(u.unref(fa),{class:"mx-3",size:"small",variant:"text",icon:u.unref(ixe),density:"compact",title:u.unref(a)("insertTextBlockBefore"),onClick:s},null,8,["icon","title"]),u.createVNode(u.unref(fa),{size:"small",variant:"text",icon:u.unref(sxe),density:"compact",title:u.unref(a)("insertTextBlockAfter"),onClick:c},null,8,["icon","title"]),r.value?(u.openBlock(),u.createBlock(u.unref(tE),{key:0,modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f)},null,8,["modelValue"])):u.createCommentVNode("",!0),u.createVNode(u.unref(Cy),{items:u.unref(o),class:"border-t bg-grey-lighten-5"},null,8,["items"])]),_:1}))}}),cxe=Pu.create({name:"scriptBlock",priority:1e3,addAttributes(){return Uwe()},marks:"",group:"block",content:"inline*",draggable:!0,code:!0,whitespace:"pre",parseHTML(){return[{tag:'script[type="text/scriptBlock"]'}]},renderHTML({node:t}){return["script",{type:"text/scriptBlock"},t.attrs.value]},addNodeView(){return Vk(lxe)},addCommands(){return{setScriptBlock:()=>({commands:t})=>t.setNode(this.name),toggleTemplateCodeBlock:()=>({commands:t})=>{var e;return(e=t.toggleNode)==null?void 0:e.call(t,this.name,"paragraph",{})}}}});function oE(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!u.isVNode(t)}const uxe=Re({label:{type:String,default:""},placeHolder:{type:String,default:""},modelValue:{default:()=>""},readonly:{type:Boolean,default:!1},template:{type:Boolean,default:!1},output:{type:String,default:"json"},outlined:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},hideToolbar:{type:Boolean,default:!1},disableToolbar:{type:Boolean,default:!1},maxWidth:{type:Number,default:900},maxHeight:{type:Number,default:500},readonlyClass:{type:String,default:""},headings:{type:Array,default:[1,2,3,4,5,6]},viewerProps:{type:Object,default:()=>({})},...Ot(),...ai(),...wn(),...tj()},"VXTipTapEditor"),dxe="this.classList.remove('overflow-y-auto');this.style.maxHeight='inherit'",fxe=et()({name:"VXTipTapEditor",props:uxe(),emits:{"update:modelValue":t=>!0,editor:t=>!0},setup(t,{expose:e,slots:n,emit:r}){const{t:i,locale:o}=ea();Fa.setLang(o.value);const a=[{name:i("home"),component:u.markRaw(gwe)}];n["select-image"]&&a.push({name:i("select"),component:u.markRaw(n["select-image"])});const s=v=>{const y=""+v;return/^\d+$/.test(y)?y+"px":y},c=u.useModel(t,"modelValue"),l=u.ref(!1),d=u.ref(!1),f=[s0e.configure({placeholder:{placeholder:t.placeHolder},bubble:{defaultBubbleList:v=>D3(v)}}),p0e.configure({headingLevels:t.headings,items:({editor:v,t:y})=>[gye({editor:v,t:y}),Dbe({editor:v,t:y}),...t.template?[txe(v,i)]:[]]}),x0e,r1e,J1e,R1e,M0e.configure({divider:!0}),...t.template?[Wwe.configure({}),Xwe.configure({divider:!0})]:[],Lre,exe,Bre,cxe,K1e,_0e,A0e,R0e.configure({divider:!0}),F1e.configure({divider:!0}),S0e.configure({divider:!0}),C0e,D1e,G1e,Q0e.configure({divider:!0}),_1e.configure({dialogComponent:()=>pwe}),J0e.configure({imageTabs:a,width:500,hiddenTabs:["url","upload"],allowBase64:!0,upload(v){const y=URL.createObjectURL(v);return Promise.resolve(y)}}),ewe,Y1e.configure({divider:!0,cellMinWidth:100}),F0e,B0e.configure({divider:!0}),uwe.configure({spacer:!0,component:n.preview}),D0e.configure({useWindow:!0}),...n.help?[fwe.configure({modelValue:l})]:[],Zwe.configure({items:[Qwe()]})],b=u.computed(()=>{var v;return(v=t.errorMessages)!=null&&v.length?t.errorMessages:t.hint?t.hint:t.messages}),x=u.useId(),k=u.computed(()=>t.id||`input-${x}`),E=u.computed(()=>`${k.value}-messages`),m=u.computed(()=>({id:k,messagesId:E,density:t.density})),h=u.useTemplateRef("vuetifyTiptap"),g=u.computed(()=>h.value.editor),w=u.ref(0);dV(h,v=>{const y=v[0];w.value=y.contentRect.height});const p=u.computed(()=>Eu(u.toValue(h)));return u.watch(p,v=>{v&&(w.value=v.offsetHeight)},{immediate:!0,flush:"post"}),st(()=>{var j,z;let v;const y=b.value.length>0,S=y,T=t.error||((j=t.errorMessages)==null?void 0:j.length),C=T?"error":void 0,M=()=>{var $;return u.createVNode(u.Fragment,null,[u.createVNode(uI,{active:y,messages:b.value},{message:n.message}),($=n.details)==null?void 0:$.call(n,m.value)])},A=S&&((z=t.errorMessages)!=null&&z.length?u.createVNode(u.Fragment,null,[u.createVNode(Rm,{density:"compact",icon:"$error",type:"error",variant:"tonal",class:"rounded-0"},oE(v=M())?v:{default:()=>[v]})]):u.createVNode(u.Fragment,null,[u.createVNode("div",{id:E.value,class:"v-input__details py-2 px-3",role:"alert","aria-live":"polite"},[M()])])),P=u.createVNode(Age,{class:t.label?"rounded-t-0":A?"rounded-b-0":void 0,"model-value":c.value,"onUpdate:modelValue":$=>r("update:modelValue",$),output:t.output,dense:t.dense,"max-height":t.maxHeight,"max-width":t.maxWidth,extensions:f,ref:"vuetifyTiptap",style:"width:100%"},null),L=($,Y,ae)=>u.createVNode(fa,u.mergeProps({class:"rounded me-1 ms-0",density:"comfortable",size:"small",icon:"mdi-"+Y,title:i($),variant:"text"},{onClick:ae}),null),R=$=>{let Y;return u.createVNode(u.Fragment,null,[u.createVNode(jn,u.mergeProps({color:T?"error":void 0,class:["border v-input"],density:t.density},$?t.viewerProps:{}),{default:()=>[t.label&&u.createVNode(u.Fragment,null,[u.createVNode(Zr,{color:C,density:t.density,height:"36"},{default:()=>[u.createVNode(as,{style:"margin-inline-start: 0",class:"px-3"},{default:()=>[t.label]})]}),A&&u.createVNode("div",{class:["v-toolbar",{"d-block":T}]},[A]),u.createVNode(Mn,null,null)]),$?u.createVNode(Dr,{"data-print-script":dxe,class:["overflow-y-auto",t.readonlyClass,{"bg-white":T}],style:t.maxHeight?{maxHeight:s(t.maxHeight)}:{}},{default:()=>[u.createVNode(uP,{"model-value":c.value},null)]}):n.help?u.createVNode(u.Fragment,null,[u.createVNode("div",{class:"d-flex"},[d.value?void 0:u.createVNode(u.Fragment,null,[P,u.createVNode(Mn,{vertical:!0},null)]),w.value&&l.value?u.createVNode("div",{class:"d-flex flex-column",style:`height: ${w.value}px;width:${d.value?"100%":"40%"}`},[u.createVNode(Zr,{class:"py-1",density:"compact",height:"24px"},{append:()=>u.createVNode(u.Fragment,null,[d.value?L("collapse","arrow-collapse",()=>d.value=!1):L("expand","arrow-expand",()=>d.value=!0),L("close","close",()=>{l.value=!1,d.value=!1})]),default:()=>{let ae;return u.createVNode(as,{class:"text-subtitle-1"},oE(ae=i("help"))?ae:{default:()=>[ae]})}}),u.createVNode(Mn,null,null),u.createVNode(Dr,{class:"overflow-y-auto"},oE(Y=n.help({editor:g.value}))?Y:{default:()=>[Y]})]):void 0])]):P,!t.label&&u.createVNode(u.Fragment,null,[u.createVNode(Mn,null,null),A&&u.createVNode("div",{class:"bg-grey-lighten-3"},[A])])]})])};return u.createVNode("div",{class:[t.class,"vx-tiptap-editor",{"vx-tiptap-editor--error":T}],style:t.style},[t.readonly?n.viewer?n.viewer({maxHeight:t.maxHeight,value:c.value,...t.viewerProps}):R(!0):R(!1)])}),e({vuetifyTiptap:h}),{}}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(n),!0).forEach(function(r){hxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sy(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sy=function(e){return typeof e}:Sy=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function hxe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ps(){return Ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ps.apply(this,arguments)}function pxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mxe(t,e){if(t==null)return{};var n=pxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var gxe="1.14.0";function Ls(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Rs=Ls(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Eh=Ls(/Edge/i),fj=Ls(/firefox/i),Th=Ls(/safari/i)&&!Ls(/chrome/i)&&!Ls(/android/i),hj=Ls(/iP(ad|od|hone)/i),vxe=Ls(/chrome/i)&&Ls(/android/i),pj={capture:!1,passive:!1};function cn(t,e,n){t.addEventListener(e,n,!Rs&&pj)}function tn(t,e,n){t.removeEventListener(e,n,!Rs&&pj)}function ky(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function yxe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Za(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&ky(t,e):ky(t,e))||r&&t===n)return t;if(t===n)break}while(t=yxe(t))}return null}var mj=/\s+/g;function mo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(mj," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(mj," ")}}function Rt(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ld(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Rt(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function gj(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Ja(){var t=document.scrollingElement;return t||document.documentElement}function Pr(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,a,s,c,l,d,f;if(t!==window&&t.parentNode&&t!==Ja()?(o=t.getBoundingClientRect(),a=o.top,s=o.left,c=o.bottom,l=o.right,d=o.height,f=o.width):(a=0,s=0,c=window.innerHeight,l=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Rs))do if(i&&i.getBoundingClientRect&&(Rt(i,"transform")!=="none"||n&&Rt(i,"position")!=="static")){var b=i.getBoundingClientRect();a-=b.top+parseInt(Rt(i,"border-top-width")),s-=b.left+parseInt(Rt(i,"border-left-width")),c=a+o.height,l=s+o.width;break}while(i=i.parentNode);if(r&&t!==window){var x=ld(i||t),k=x&&x.a,E=x&&x.d;x&&(a/=E,s/=k,f/=k,d/=E,c=a+d,l=s+f)}return{top:a,left:s,bottom:c,right:l,width:f,height:d}}}function vj(t,e,n){for(var r=Ll(t,!0),i=Pr(t)[e];r;){var o=Pr(r)[n],a=void 0;if(a=i>=o,!a)return r;if(r===Ja())break;r=Ll(r,!1)}return!1}function cd(t,e,n,r){for(var i=0,o=0,a=t.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==Bt.ghost&&(r||a[o]!==Bt.dragged)&&Za(a[o],n.draggable,t,!1)){if(i===e)return a[o];i++}o++}return null}function aE(t,e){for(var n=t.lastElementChild;n&&(n===Bt.ghost||Rt(n,"display")==="none"||e&&!ky(n,e));)n=n.previousElementSibling;return n||null}function Bo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Bt.clone&&(!e||ky(t,e))&&n++;return n}function yj(t){var e=0,n=0,r=Ja();if(t)do{var i=ld(t),o=i.a,a=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function bxe(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ll(t,e){if(!t||!t.getBoundingClientRect)return Ja();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Rt(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ja();if(r||e)return n;r=!0}}while(n=n.parentNode);return Ja()}function wxe(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function sE(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Mh;function bj(t,e){return function(){if(!Mh){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Mh=setTimeout(function(){Mh=void 0},e)}}}function xxe(){clearTimeout(Mh),Mh=void 0}function wj(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function xj(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var go="Sortable"+new Date().getTime();function Cxe(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Rt(i,"display")==="none"||i===Bt.ghost)){t.push({target:i,rect:Pr(i)});var o=Ka({},t[t.length-1].rect);if(i.thisAnimationDuration){var a=ld(i,!0);a&&(o.top-=a.f,o.left-=a.e)}i.fromRect=o}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(bxe(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,a=0;t.forEach(function(s){var c=0,l=s.target,d=l.fromRect,f=Pr(l),b=l.prevFromRect,x=l.prevToRect,k=s.rect,E=ld(l,!0);E&&(f.top-=E.f,f.left-=E.e),l.toRect=f,l.thisAnimationDuration&&sE(b,f)&&!sE(d,f)&&(k.top-f.top)/(k.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(c=kxe(k,b,x,i.options)),sE(f,d)||(l.prevFromRect=d,l.prevToRect=f,c||(c=i.options.animation),i.animate(l,k,f,c)),c&&(o=!0,a=Math.max(a,c),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},c),l.thisAnimationDuration=c)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,i,o,a){if(a){Rt(r,"transition",""),Rt(r,"transform","");var s=ld(this.el),c=s&&s.a,l=s&&s.d,d=(i.left-o.left)/(c||1),f=(i.top-o.top)/(l||1);r.animatingX=!!d,r.animatingY=!!f,Rt(r,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=Sxe(r),Rt(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),Rt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Rt(r,"transition",""),Rt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function Sxe(t){return t.offsetWidth}function kxe(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ud=[],lE={initializeByDefault:!0},Ih={mount:function(e){for(var n in lE)lE.hasOwnProperty(n)&&!(n in e)&&(e[n]=lE[n]);ud.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ud.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=e+"Global";ud.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][o]&&n[a.pluginName][o](Ka({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](Ka({sortable:n},r)))})},initializePlugins:function(e,n,r,i){ud.forEach(function(s){var c=s.pluginName;if(!(!e.options[c]&&!s.initializeByDefault)){var l=new s(e,n,e.options);l.sortable=e,l.options=e.options,e[c]=l,Ps(r,l.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);typeof a<"u"&&(e.options[o]=a)}},getEventProperties:function(e,n){var r={};return ud.forEach(function(i){typeof i.eventProperties=="function"&&Ps(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return ud.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(e[o.pluginName],r))}),i}};function Exe(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,c=t.oldIndex,l=t.newIndex,d=t.oldDraggableIndex,f=t.newDraggableIndex,b=t.originalEvent,x=t.putSortable,k=t.extraEventProperties;if(e=e||n&&n[go],!!e){var E,m=e.options,h="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Rs&&!Eh?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=a||n,E.from=s||n,E.item=i||n,E.clone=o,E.oldIndex=c,E.newIndex=l,E.oldDraggableIndex=d,E.newDraggableIndex=f,E.originalEvent=b,E.pullMode=x?x.lastPutMode:void 0;var g=Ka(Ka({},k),Ih.getEventProperties(r,e));for(var w in g)E[w]=g[w];n&&n.dispatchEvent(E),m[h]&&m[h].call(e,E)}}var Txe=["evt"],Yi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=mxe(r,Txe);Ih.pluginEvent.bind(Bt)(e,n,Ka({dragEl:at,parentEl:fr,ghostEl:Ut,rootEl:Gn,nextEl:zc,lastDownEl:Ey,cloneEl:hr,cloneHidden:Rl,dragStarted:Ah,putSortable:ni,activeSortable:Bt.active,originalEvent:i,oldIndex:dd,oldDraggableIndex:Oh,newIndex:vo,newDraggableIndex:Bl,hideGhostForTarget:Ij,unhideGhostForTarget:Oj,cloneNowHidden:function(){Rl=!0},cloneNowShown:function(){Rl=!1},dispatchSortableEvent:function(s){Ni({sortable:n,name:s,originalEvent:i})}},o))};function Ni(t){Exe(Ka({putSortable:ni,cloneEl:hr,targetEl:at,rootEl:Gn,oldIndex:dd,oldDraggableIndex:Oh,newIndex:vo,newDraggableIndex:Bl},t))}var at,fr,Ut,Gn,zc,Ey,hr,Rl,dd,vo,Oh,Bl,Ty,ni,fd=!1,My=!1,Iy=[],$c,ha,cE,uE,Cj,Sj,Ah,hd,_h,Dh=!1,Oy=!1,Ay,wi,dE=[],fE=!1,_y=[],Dy=typeof document<"u",Ny=hj,kj=Eh||Rs?"cssFloat":"float",Mxe=Dy&&!vxe&&!hj&&"draggable"in document.createElement("div"),Ej=function(){if(Dy){if(Rs)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Tj=function(e,n){var r=Rt(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=cd(e,0,n),a=cd(e,1,n),s=o&&Rt(o),c=a&&Rt(a),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Pr(o).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Pr(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||l>=i&&r[kj]==="none"||a&&r[kj]==="none"&&l+d>i)?"vertical":"horizontal"},Ixe=function(e,n,r){var i=r?e.left:e.top,o=r?e.right:e.bottom,a=r?e.width:e.height,s=r?n.left:n.top,c=r?n.right:n.bottom,l=r?n.width:n.height;return i===s||o===c||i+a/2===s+l/2},Oxe=function(e,n){var r;return Iy.some(function(i){var o=i[go].options.emptyInsertThreshold;if(!(!o||aE(i))){var a=Pr(i),s=e>=a.left-o&&e<=a.right+o,c=n>=a.top-o&&n<=a.bottom+o;if(s&&c)return r=i}}),r},Mj=function(e){function n(o,a){return function(s,c,l,d){var f=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(o==null&&(a||f))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return n(o(s,c,l,d),a)(s,c,l,d);var b=(a?s:c).options.group.name;return o===!0||typeof o=="string"&&o===b||o.join&&o.indexOf(b)>-1}}var r={},i=e.group;(!i||Sy(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},Ij=function(){!Ej&&Ut&&Rt(Ut,"display","none")},Oj=function(){!Ej&&Ut&&Rt(Ut,"display","")};Dy&&document.addEventListener("click",function(t){if(My)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),My=!1,!1},!0);var Uc=function(e){if(at){e=e.touches?e.touches[0]:e;var n=Oxe(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[go]._onDragOver(r)}}},Axe=function(e){at&&at.parentNode[go]._isOutsideThisEl(e.target)};function Bt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ps({},e),t[go]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Tj(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Bt.supportPointer!==!1&&"PointerEvent"in window&&!Th,emptyInsertThreshold:5};Ih.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);Mj(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Mxe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?cn(t,"pointerdown",this._onTapStart):(cn(t,"mousedown",this._onTapStart),cn(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(cn(t,"dragover",this),cn(t,"dragenter",this)),Iy.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ps(this,Cxe())}Bt.prototype={constructor:Bt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(hd=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,at):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,d=i.filter;if(jxe(r),!at&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Th&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=Za(c,i.draggable,r,!1),!(c&&c.animated)&&Ey!==c)){if(dd=Bo(c),Oh=Bo(c,i.draggable),typeof d=="function"){if(d.call(this,e,c,this)){Ni({sortable:n,rootEl:l,name:"filter",targetEl:c,toEl:r,fromEl:r}),Yi("filter",n,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=Za(l,f.trim(),r,!1),f)return Ni({sortable:n,rootEl:f,name:"filter",targetEl:c,fromEl:r,toEl:r}),Yi("filter",n,{evt:e}),!0}),d)){o&&e.cancelable&&e.preventDefault();return}i.handle&&!Za(l,i.handle,r,!1)||this._prepareDragStart(e,s,c)}}},_prepareDragStart:function(e,n,r){var i=this,o=i.el,a=i.options,s=o.ownerDocument,c;if(r&&!at&&r.parentNode===o){var l=Pr(r);if(Gn=o,at=r,fr=at.parentNode,zc=at.nextSibling,Ey=r,Ty=a.group,Bt.dragged=at,$c={target:at,clientX:(n||e).clientX,clientY:(n||e).clientY},Cj=$c.clientX-l.left,Sj=$c.clientY-l.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,at.style["will-change"]="all",c=function(){if(Yi("delayEnded",i,{evt:e}),Bt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!fj&&i.nativeDraggable&&(at.draggable=!0),i._triggerDragStart(e,n),Ni({sortable:i,name:"choose",originalEvent:e}),mo(at,a.chosenClass,!0)},a.ignore.split(",").forEach(function(d){gj(at,d.trim(),hE)}),cn(s,"dragover",Uc),cn(s,"mousemove",Uc),cn(s,"touchmove",Uc),cn(s,"mouseup",i._onDrop),cn(s,"touchend",i._onDrop),cn(s,"touchcancel",i._onDrop),fj&&this.nativeDraggable&&(this.options.touchStartThreshold=4,at.draggable=!0),Yi("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Eh||Rs))){if(Bt.eventCanceled){this._onDrop();return}cn(s,"mouseup",i._disableDelayedDrag),cn(s,"touchend",i._disableDelayedDrag),cn(s,"touchcancel",i._disableDelayedDrag),cn(s,"mousemove",i._delayedDragTouchMoveHandler),cn(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&cn(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(c,a.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){at&&hE(at),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;tn(e,"mouseup",this._disableDelayedDrag),tn(e,"touchend",this._disableDelayedDrag),tn(e,"touchcancel",this._disableDelayedDrag),tn(e,"mousemove",this._delayedDragTouchMoveHandler),tn(e,"touchmove",this._delayedDragTouchMoveHandler),tn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?cn(document,"pointermove",this._onTouchMove):n?cn(document,"touchmove",this._onTouchMove):cn(document,"mousemove",this._onTouchMove):(cn(at,"dragend",this),cn(Gn,"dragstart",this._onDragStart));try{document.selection?Ly(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(fd=!1,Gn&&at){Yi("dragStarted",this,{evt:n}),this.nativeDraggable&&cn(document,"dragover",Axe);var r=this.options;!e&&mo(at,r.dragClass,!1),mo(at,r.ghostClass,!0),Bt.active=this,e&&this._appendGhost(),Ni({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ha){this._lastX=ha.clientX,this._lastY=ha.clientY,Ij();for(var e=document.elementFromPoint(ha.clientX,ha.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ha.clientX,ha.clientY),e!==n);)n=e;if(at.parentNode[go]._isOutsideThisEl(e),n)do{if(n[go]){var r=void 0;if(r=n[go]._onDragOver({clientX:ha.clientX,clientY:ha.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Oj()}},_onTouchMove:function(e){if($c){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=e.touches?e.touches[0]:e,a=Ut&&ld(Ut,!0),s=Ut&&a&&a.a,c=Ut&&a&&a.d,l=Ny&&wi&&yj(wi),d=(o.clientX-$c.clientX+i.x)/(s||1)+(l?l[0]-dE[0]:0)/(s||1),f=(o.clientY-$c.clientY+i.y)/(c||1)+(l?l[1]-dE[1]:0)/(c||1);if(!Bt.active&&!fd){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Ut){a?(a.e+=d-(cE||0),a.f+=f-(uE||0)):a={a:1,b:0,c:0,d:1,e:d,f};var b="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Rt(Ut,"webkitTransform",b),Rt(Ut,"mozTransform",b),Rt(Ut,"msTransform",b),Rt(Ut,"transform",b),cE=d,uE=f,ha=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ut){var e=this.options.fallbackOnBody?document.body:Gn,n=Pr(at,!0,Ny,!0,e),r=this.options;if(Ny){for(wi=e;Rt(wi,"position")==="static"&&Rt(wi,"transform")==="none"&&wi!==document;)wi=wi.parentNode;wi!==document.body&&wi!==document.documentElement?(wi===document&&(wi=Ja()),n.top+=wi.scrollTop,n.left+=wi.scrollLeft):wi=Ja(),dE=yj(wi)}Ut=at.cloneNode(!0),mo(Ut,r.ghostClass,!1),mo(Ut,r.fallbackClass,!0),mo(Ut,r.dragClass,!0),Rt(Ut,"transition",""),Rt(Ut,"transform",""),Rt(Ut,"box-sizing","border-box"),Rt(Ut,"margin",0),Rt(Ut,"top",n.top),Rt(Ut,"left",n.left),Rt(Ut,"width",n.width),Rt(Ut,"height",n.height),Rt(Ut,"opacity","0.8"),Rt(Ut,"position",Ny?"absolute":"fixed"),Rt(Ut,"zIndex","100000"),Rt(Ut,"pointerEvents","none"),Bt.ghost=Ut,e.appendChild(Ut),Rt(Ut,"transform-origin",Cj/parseInt(Ut.style.width)*100+"% "+Sj/parseInt(Ut.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,o=r.options;if(Yi("dragStart",this,{evt:e}),Bt.eventCanceled){this._onDrop();return}Yi("setupClone",this),Bt.eventCanceled||(hr=xj(at),hr.draggable=!1,hr.style["will-change"]="",this._hideClone(),mo(hr,this.options.chosenClass,!1),Bt.clone=hr),r.cloneId=Ly(function(){Yi("clone",r),!Bt.eventCanceled&&(r.options.removeCloneOnHide||Gn.insertBefore(hr,at),r._hideClone(),Ni({sortable:r,name:"clone"}))}),!n&&mo(at,o.dragClass,!0),n?(My=!0,r._loopId=setInterval(r._emulateDragOver,50)):(tn(document,"mouseup",r._onDrop),tn(document,"touchend",r._onDrop),tn(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,at)),cn(document,"drop",r),Rt(at,"transform","translateZ(0)")),fd=!0,r._dragStartId=Ly(r._dragStarted.bind(r,n,e)),cn(document,"selectstart",r),Ah=!0,Th&&Rt(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,o,a,s=this.options,c=s.group,l=Bt.active,d=Ty===c,f=s.sort,b=ni||l,x,k=this,E=!1;if(fE)return;function m(Y,ae){Yi(Y,k,Ka({evt:e,isOwner:d,axis:x?"vertical":"horizontal",revert:a,dragRect:i,targetRect:o,canSort:f,fromSortable:b,target:r,completed:g,onMove:function(te,G){return Py(Gn,n,at,i,te,Pr(te),e,G)},changed:w},ae))}function h(){m("dragOverAnimationCapture"),k.captureAnimationState(),k!==b&&b.captureAnimationState()}function g(Y){return m("dragOverCompleted",{insertion:Y}),Y&&(d?l._hideClone():l._showClone(k),k!==b&&(mo(at,ni?ni.options.ghostClass:l.options.ghostClass,!1),mo(at,s.ghostClass,!0)),ni!==k&&k!==Bt.active?ni=k:k===Bt.active&&ni&&(ni=null),b===k&&(k._ignoreWhileAnimating=r),k.animateAll(function(){m("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(r===at&&!at.animated||r===n&&!r.animated)&&(hd=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(at.parentNode[go]._isOutsideThisEl(e.target),!Y&&Uc(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function w(){vo=Bo(at),Bl=Bo(at,s.draggable),Ni({sortable:k,name:"change",toEl:n,newIndex:vo,newDraggableIndex:Bl,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Za(r,s.draggable,n,!0),m("dragOver"),Bt.eventCanceled)return E;if(at.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||k._ignoreWhileAnimating===r)return g(!1);if(My=!1,l&&!s.disabled&&(d?f||(a=fr!==Gn):ni===this||(this.lastPutMode=Ty.checkPull(this,l,at,e))&&c.checkPut(this,l,at,e))){if(x=this._getDirection(e,r)==="vertical",i=Pr(at),m("dragOverValid"),Bt.eventCanceled)return E;if(a)return fr=Gn,h(),this._hideClone(),m("revert"),Bt.eventCanceled||(zc?Gn.insertBefore(at,zc):Gn.appendChild(at)),g(!0);var p=aE(n,s.draggable);if(!p||Pxe(e,x,this)&&!p.animated){if(p===at)return g(!1);if(p&&n===e.target&&(r=p),r&&(o=Pr(r)),Py(Gn,n,at,i,r,o,e,!!r)!==!1)return h(),n.appendChild(at),fr=n,w(),g(!0)}else if(p&&Nxe(e,x,this)){var v=cd(n,0,s,!0);if(v===at)return g(!1);if(r=v,o=Pr(r),Py(Gn,n,at,i,r,o,e,!1)!==!1)return h(),n.insertBefore(at,v),fr=n,w(),g(!0)}else if(r.parentNode===n){o=Pr(r);var y=0,S,T=at.parentNode!==n,C=!Ixe(at.animated&&at.toRect||i,r.animated&&r.toRect||o,x),M=x?"top":"left",A=vj(r,"top","top")||vj(at,"top","top"),P=A?A.scrollTop:void 0;hd!==r&&(S=o[M],Dh=!1,Oy=!C&&s.invertSwap||T),y=Lxe(e,r,o,x,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Oy,hd===r);var L;if(y!==0){var R=Bo(at);do R-=y,L=fr.children[R];while(L&&(Rt(L,"display")==="none"||L===Ut))}if(y===0||L===r)return g(!1);hd=r,_h=y;var j=r.nextElementSibling,z=!1;z=y===1;var $=Py(Gn,n,at,i,r,o,e,z);if($!==!1)return($===1||$===-1)&&(z=$===1),fE=!0,setTimeout(Dxe,30),h(),z&&!j?n.appendChild(at):r.parentNode.insertBefore(at,z?j:r),A&&wj(A,0,P-A.scrollTop),fr=at.parentNode,S!==void 0&&!Oy&&(Ay=Math.abs(S-Pr(r)[M])),w(),g(!0)}if(n.contains(at))return g(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){tn(document,"mousemove",this._onTouchMove),tn(document,"touchmove",this._onTouchMove),tn(document,"pointermove",this._onTouchMove),tn(document,"dragover",Uc),tn(document,"mousemove",Uc),tn(document,"touchmove",Uc)},_offUpEvents:function(){var e=this.el.ownerDocument;tn(e,"mouseup",this._onDrop),tn(e,"touchend",this._onDrop),tn(e,"pointerup",this._onDrop),tn(e,"touchcancel",this._onDrop),tn(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(vo=Bo(at),Bl=Bo(at,r.draggable),Yi("drop",this,{evt:e}),fr=at&&at.parentNode,vo=Bo(at),Bl=Bo(at,r.draggable),Bt.eventCanceled){this._nulling();return}fd=!1,Oy=!1,Dh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pE(this.cloneId),pE(this._dragStartId),this.nativeDraggable&&(tn(document,"drop",this),tn(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Th&&Rt(document.body,"user-select",""),Rt(at,"transform",""),e&&(Ah&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Ut&&Ut.parentNode&&Ut.parentNode.removeChild(Ut),(Gn===fr||ni&&ni.lastPutMode!=="clone")&&hr&&hr.parentNode&&hr.parentNode.removeChild(hr),at&&(this.nativeDraggable&&tn(at,"dragend",this),hE(at),at.style["will-change"]="",Ah&&!fd&&mo(at,ni?ni.options.ghostClass:this.options.ghostClass,!1),mo(at,this.options.chosenClass,!1),Ni({sortable:this,name:"unchoose",toEl:fr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Gn!==fr?(vo>=0&&(Ni({rootEl:fr,name:"add",toEl:fr,fromEl:Gn,originalEvent:e}),Ni({sortable:this,name:"remove",toEl:fr,originalEvent:e}),Ni({rootEl:fr,name:"sort",toEl:fr,fromEl:Gn,originalEvent:e}),Ni({sortable:this,name:"sort",toEl:fr,originalEvent:e})),ni&&ni.save()):vo!==dd&&vo>=0&&(Ni({sortable:this,name:"update",toEl:fr,originalEvent:e}),Ni({sortable:this,name:"sort",toEl:fr,originalEvent:e})),Bt.active&&((vo==null||vo===-1)&&(vo=dd,Bl=Oh),Ni({sortable:this,name:"end",toEl:fr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yi("nulling",this),Gn=at=fr=Ut=zc=hr=Ey=Rl=$c=ha=Ah=vo=Bl=dd=Oh=hd=_h=ni=Ty=Bt.dragged=Bt.ghost=Bt.clone=Bt.active=null,_y.forEach(function(e){e.checked=!0}),_y.length=cE=uE=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":at&&(this._onDragOver(e),_xe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,o=r.length,a=this.options;i<o;i++)n=r[i],Za(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||Bxe(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(o,a){var s=i.children[a];Za(s,this.options.draggable,i,!1)&&(r[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Za(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Ih.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&Mj(r)},destroy:function(){Yi("destroy",this);var e=this.el;e[go]=null,tn(e,"mousedown",this._onTapStart),tn(e,"touchstart",this._onTapStart),tn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(tn(e,"dragover",this),tn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Iy.splice(Iy.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Rl){if(Yi("hideClone",this),Bt.eventCanceled)return;Rt(hr,"display","none"),this.options.removeCloneOnHide&&hr.parentNode&&hr.parentNode.removeChild(hr),Rl=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Rl){if(Yi("showClone",this),Bt.eventCanceled)return;at.parentNode==Gn&&!this.options.group.revertClone?Gn.insertBefore(hr,at):zc?Gn.insertBefore(hr,zc):Gn.appendChild(hr),this.options.group.revertClone&&this.animate(at,hr),Rt(hr,"display",""),Rl=!1}}};function _xe(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Py(t,e,n,r,i,o,a,s){var c,l=t[go],d=l.options.onMove,f;return window.CustomEvent&&!Rs&&!Eh?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=n,c.draggedRect=r,c.related=i||e,c.relatedRect=o||Pr(e),c.willInsertAfter=s,c.originalEvent=a,t.dispatchEvent(c),d&&(f=d.call(l,c,a)),f}function hE(t){t.draggable=!1}function Dxe(){fE=!1}function Nxe(t,e,n){var r=Pr(cd(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function Pxe(t,e,n){var r=Pr(aE(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function Lxe(t,e,n,r,i,o,a,s){var c=r?t.clientY:t.clientX,l=r?n.height:n.width,d=r?n.top:n.left,f=r?n.bottom:n.right,b=!1;if(!a){if(s&&Ay<l*i){if(!Dh&&(_h===1?c>d+l*o/2:c<f-l*o/2)&&(Dh=!0),Dh)b=!0;else if(_h===1?c<d+Ay:c>f-Ay)return-_h}else if(c>d+l*(1-i)/2&&c<f-l*(1-i)/2)return Rxe(e)}return b=b||a,b&&(c<d+l*o/2||c>f-l*o/2)?c>d+l/2?1:-1:0}function Rxe(t){return Bo(at)<Bo(t)?1:-1}function Bxe(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function jxe(t){_y.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&_y.push(r)}}function Ly(t){return setTimeout(t,0)}function pE(t){return clearTimeout(t)}Dy&&cn(document,"touchmove",function(t){(Bt.active||fd)&&t.cancelable&&t.preventDefault()}),Bt.utils={on:cn,off:tn,css:Rt,find:gj,is:function(e,n){return!!Za(e,n,e,!1)},extend:wxe,throttle:bj,closest:Za,toggleClass:mo,clone:xj,index:Bo,nextTick:Ly,cancelNextTick:pE,detectDirection:Tj,getChild:cd},Bt.get=function(t){return t[go]},Bt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Bt.utils=Ka(Ka({},Bt.utils),r.utils)),Ih.mount(r)})},Bt.create=function(t,e){return new Bt(t,e)},Bt.version=gxe;var Or=[],Nh,mE,gE=!1,vE,yE,Ry,Ph;function Fxe(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?cn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?cn(document,"pointermove",this._handleFallbackAutoScroll):r.touches?cn(document,"touchmove",this._handleFallbackAutoScroll):cn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?tn(document,"dragover",this._handleAutoScroll):(tn(document,"pointermove",this._handleFallbackAutoScroll),tn(document,"touchmove",this._handleFallbackAutoScroll),tn(document,"mousemove",this._handleFallbackAutoScroll)),Aj(),By(),xxe()},nulling:function(){Ry=mE=Nh=gE=Ph=vE=yE=null,Or.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,a);if(Ry=n,r||this.options.forceAutoScrollFallback||Eh||Rs||Th){bE(n,this.options,s,r);var c=Ll(s,!0);gE&&(!Ph||o!==vE||a!==yE)&&(Ph&&Aj(),Ph=setInterval(function(){var l=Ll(document.elementFromPoint(o,a),!0);l!==c&&(c=l,By()),bE(n,i.options,l,r)},10),vE=o,yE=a)}else{if(!this.options.bubbleScroll||Ll(s,!0)===Ja()){By();return}bE(n,this.options,Ll(s,!1),!1)}}},Ps(t,{pluginName:"scroll",initializeByDefault:!0})}function By(){Or.forEach(function(t){clearInterval(t.pid)}),Or=[]}function Aj(){clearInterval(Ph)}var bE=bj(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,c=Ja(),l=!1,d;mE!==n&&(mE=n,By(),Nh=e.scroll,d=e.scrollFn,Nh===!0&&(Nh=Ll(n,!0)));var f=0,b=Nh;do{var x=b,k=Pr(x),E=k.top,m=k.bottom,h=k.left,g=k.right,w=k.width,p=k.height,v=void 0,y=void 0,S=x.scrollWidth,T=x.scrollHeight,C=Rt(x),M=x.scrollLeft,A=x.scrollTop;x===c?(v=w<S&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),y=p<T&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(v=w<S&&(C.overflowX==="auto"||C.overflowX==="scroll"),y=p<T&&(C.overflowY==="auto"||C.overflowY==="scroll"));var P=v&&(Math.abs(g-i)<=a&&M+w<S)-(Math.abs(h-i)<=a&&!!M),L=y&&(Math.abs(m-o)<=a&&A+p<T)-(Math.abs(E-o)<=a&&!!A);if(!Or[f])for(var R=0;R<=f;R++)Or[R]||(Or[R]={});(Or[f].vx!=P||Or[f].vy!=L||Or[f].el!==x)&&(Or[f].el=x,Or[f].vx=P,Or[f].vy=L,clearInterval(Or[f].pid),(P!=0||L!=0)&&(l=!0,Or[f].pid=setInterval((function(){r&&this.layer===0&&Bt.active._onTouchMove(Ry);var j=Or[this.layer].vy?Or[this.layer].vy*s:0,z=Or[this.layer].vx?Or[this.layer].vx*s:0;typeof d=="function"&&d.call(Bt.dragged.parentNode[go],z,j,t,Ry,Or[this.layer].el)!=="continue"||wj(Or[this.layer].el,z,j)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&b!==c&&(b=Ll(b,!1)));gE=l}},30),_j=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(n){var l=r||o;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(d.clientX,d.clientY);c(),l&&!l.el.contains(f)&&(a("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function wE(){}wE.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=cd(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:_j},Ps(wE,{pluginName:"revertOnSpill"});function xE(){}xE.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_j},Ps(xE,{pluginName:"removeOnSpill"}),Bt.mount(new Fxe),Bt.mount(xE,wE);function Hxe(){return typeof window<"u"?window.console:global.console}const zxe=Hxe();function $xe(t){const e=Object.create(null);return function(r){return e[r]||(e[r]=t(r))}}const Uxe=/-(\w)/g,Dj=$xe(t=>t.replace(Uxe,(e,n)=>n?n.toUpperCase():""));function CE(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Nj(t,e,n){const r=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,r)}function Wxe(t,e){return Object.values(t).indexOf(e)}function Yxe(t,e,n,r){if(!t)return[];const i=Object.values(t),o=e.length-r;return[...e].map((s,c)=>c>=o?i.length:i.indexOf(s))}function Pj(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function Gxe(t){return e=>{this.realList!==null&&this["onDrag"+t](e),Pj.call(this,t,e)}}function Xxe(t){return["transition-group","TransitionGroup"].includes(t)}function Kxe(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?Xxe(e.name):!1}function Zxe(t,e){return e?{...e.props,...e.attrs}:t}const SE=["Start","Add","Remove","Update","End"],kE=["Choose","Unchoose","Sort","Filter","Clone"],Jxe=["Move",...SE,...kE].map(t=>"on"+t);let EE=null;const Qxe={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Vxe=u.defineComponent({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...SE.map(t=>t.toLowerCase()),...kE.map(t=>t.toLowerCase())],props:Qxe,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=Zxe(this.$attrs,this.componentData);return t?(this.transitionMode=Kxe(t),u.h(this.getTag(),e,t)):u.h(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&zxe.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};SE.forEach(i=>{t["on"+i]=Gxe.call(this,i)}),kE.forEach(i=>{t["on"+i]=Pj.bind(this,i)});const e=Object.keys(this.$attrs).reduce((i,o)=>(i[Dj(o)]=this.$attrs[o],i),{}),n=Object.assign({},e,t,{onMove:(i,o)=>this.onDragMove(i,o)});!("draggable"in n)&&(n.draggable=">*");const r=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Bt(r,n),r.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?u.resolveComponent(this.component):this.tag},updateOptions(t){for(var e in t){const n=Dj(e);Jxe.indexOf(n)===-1&&this._sortable.option(n,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=Yxe(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=Wxe(this.getChildrenNodes()||[],t);if(e===-1)return null;const n=this.realList[e];return{index:e,element:n}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=r=>r.splice(e,0,r.splice(t,1)[0]);this.alterList(n)},getVmIndex(t){const e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),EE=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;CE(t.item);const n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();const r={element:e,newIndex:n};this.emitChanges({added:r})},onDragRemove(t){if(Nj(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){CE(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})},onDragUpdate(t){CE(t.item),Nj(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);const r={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:r})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const n=this.move;if(!n||!this.realList)return!0;const r=this.getRelatedContextFromMoveEvent(t),i=this.context,o=this.computeFutureIndex(r,t);Object.assign(i,{futureIndex:o});const a=Object.assign({},t,{relatedContext:r,draggedContext:i});return n(a,e)},onDragEnd(){this.computeIndexes(),EE=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getTrargetedComponent(t);if(!n)return{component:n};const r=n.realList,i={list:r,component:n};if(t!==e&&r&&n.getUnderlyingVm){const o=n.getUnderlyingVm(e);if(o)return Object.assign(o,i)}return i},computeFutureIndex(t,e){const n=[...e.to.children].filter(a=>a.style.display!=="none");if(n.length===0)return 0;const r=n.indexOf(e.related),i=t.component.getVmIndex(r);return n.indexOf(EE)!==-1||!e.willInsertAfter?i:i+1}}});function Lj(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!u.isVNode(t)}const qxe=Re({label:String,modelValue:{type:Array,default:()=>[]},sorting:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},itemKey:{type:[String,Array,Function],default:"key"},itemTitle:{type:[String,Array,Function],default:"title"},...Ot(),...ai(),...wn()},"VXArraySorter"),eCe=et()({name:"VXArraySorter",props:qxe(),emits:{"update:modelValue":t=>!0,"update:sorting":t=>!0,sorted:t=>!0},setup(t,{slots:e,emit:n}){const{t:r}=ea(),i=u.useModel(t,"modelValue"),o=u.useModel(t,"sorting"),a=u.computed(()=>o.value),s=()=>(o.value=!o.value,o.value),c=u.toRef(t,"label"),l=u.computed({get(){return i.value},set(g){u.toRaw(g).forEach((w,p)=>{i.value[p]=w})}}),d=g=>Lr(g,t.itemTitle),f=g=>Lr(g,t.itemKey),b={label:c,sorting:o,itemTitle:d,itemKey:f,items:l},x=u.ref([]),k=g=>{if(g==="edit"&&x.value.unshift(i.value),g==="undo"){x.value.length>0&&x.value.shift().forEach((w,p)=>{i.value[p]=w});return}if(g==="save"){const w=x.value[0].map(p=>p);l.value=w,x.value.splice(0,x.value.length),n("update:modelValue",w)}s()},E=g=>{let w=x.value[0].map(v=>v);const p=w.splice(g.oldIndex,1)[0];w.splice(g.newIndex,0,p),x.value.unshift(w)},m=g=>u.createVNode(ir,{key:f(g.item),title:d(g.item)},{prepend:()=>u.createVNode(u.Fragment,null,[u.createVNode(fa,{class:"me-2",title:r("move"),density:t.density,icon:"mdi-drag",variant:"text"},null),u.createVNode(ka,{density:t.density,color:"secondary"},{default:()=>[g.itemIndex+1]})])}),h=(g,w)=>{var v;const p={item:g,itemIndex:w,global:b};if(e.item){const y={props:p,defaultItemComp:u.markRaw(m)};return(v=e.item)==null?void 0:v.call(e,y)}return m(p)};return st(()=>{let g;const w=()=>{let p;return u.createVNode(ji,{tile:!0,density:t.density},Lj(p=i.value.map(h))?p:{default:()=>[p]})};return u.createVNode(jn,{class:t.class,style:t.style,density:t.density},{default:()=>{var p;return[u.createVNode(Zr,{density:t.density},{default:()=>[a.value?u.createVNode(fa,u.mergeProps({title:r("back"),density:t.density,variant:"text",icon:"mdi-arrow-left"},{onClick:()=>k("close")}),null):void 0,c.value&&u.createVNode(as,null,{default:()=>[c.value]}),u.createVNode(Xr,null,null),a.value?u.createVNode(u.Fragment,null,[u.createVNode(fa,u.mergeProps({title:r("apply"),density:t.density,class:"me-3",variant:"text",color:"primary",icon:"mdi-check"},{onClick:()=>k("save")}),null),x.value.length>1?u.createVNode(fa,u.mergeProps({title:r("undo"),density:t.density,variant:"text",icon:"mdi-undo"},{onClick:()=>k("undo")}),null):void 0]):t.readonly?void 0:u.createVNode(fa,u.mergeProps({density:t.density,title:r("changeOrder"),variant:"text",icon:"mdi-sort"},{onClick:()=>k("edit")}),null)]}),o.value?u.createVNode(Vxe,{items:i,itemKey:t.itemKey,handle:".v-list-item__prepend > button",onEnd:E,tag:w,ghostClass:"ghost"},null):((p=e.default)==null?void 0:p.call(e,b))||u.createVNode(ji,{density:t.density},Lj(g=i.value.map(v=>u.createVNode(ir,{title:d(v)},null)))?g:{default:()=>[g]})]}})}),{}}}),tCe={install:t=>{t.component("vx-datepicker",Yd),t.component("vx-datetimepicker",g0),t.component("vx-monthpicker",Op),t.component("vx-advanced-select",F7),t.component("vx-linkageselect",GI),t.component("vx-filter",E7),t.component("vx-autocomplete",vO),t.component("vx-textdatepicker",NU),t.component("vx-draggable",X0),t.component("vx-restore-scroll-listener",T7),t.component("vx-scroll-iframe",I7),t.component("vx-send-variables",O7),t.component("vx-messagelistener",_7),t.component("vx-drag-listener",N7),t.component("vx-tree-rows",wW),t.component("vx-tree-data-table",yW),t.component("vx-editorjs",sQ),t.component("vx-image-field",v_),t.component("vx-navigation-drawer",xf),t.component("vx-dialog",fx),t.component("vx-card",gV),t.component("vx-tiptap-editor",fxe),t.component("vx-tiptap-viewer",Ive),t.component("vx-btn",fa),t.component("vx-array-sorter",eCe),t.component("vx-portal",uP),t.component("vx-messages",Cy)}};window.__goplaidVueComponentRegisters=window.__goplaidVueComponentRegisters||[],window.__goplaidVueComponentRegisters.push((t,e)=>{t.use(tCe)})});
